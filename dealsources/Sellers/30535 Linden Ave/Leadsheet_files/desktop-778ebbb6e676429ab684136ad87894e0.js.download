function requestUserMedia(constraints){return new Promise(function(resolve,reject){getUserMedia(constraints,resolve,reject)})}function RecordRTC(mediaStream,config){function startRecording(){return config.disableLogs||console.debug("started recording "+config.type+" stream."),mediaRecorder?(mediaRecorder.clearRecordedData(),mediaRecorder.resume(),self.recordingDuration&&handleRecordingDuration(),self):(initRecorder(function(){self.recordingDuration&&handleRecordingDuration()}),self)}function initRecorder(initCallback){initCallback&&(config.initCallback=function(){initCallback(),initCallback=config.initCallback=null});var Recorder=new GetRecorderType(mediaStream,config);mediaRecorder=new Recorder(mediaStream,config),mediaRecorder.record(),config.disableLogs||console.debug("Initialized recorderType:",mediaRecorder.constructor.name,"for output-type:",config.type)}function stopRecording(callback){function _callback(){for(var item in mediaRecorder)self&&(self[item]=mediaRecorder[item]),recordRTC&&(recordRTC[item]=mediaRecorder[item]);var blob=mediaRecorder.blob;if(callback){var url=URL.createObjectURL(blob);callback(url)}blob&&!config.disableLogs&&console.debug(blob.type,"->",bytesToSize(blob.size)),config.autoWriteToDisk&&getDataURL(function(dataURL){var parameter={};parameter[config.type+"Blob"]=dataURL,DiskStorage.Store(parameter)})}if(!mediaRecorder)return console.warn(WARNING);var recordRTC=this;config.disableLogs||console.warn("Stopped recording "+config.type+" stream."),"gif"!==config.type?mediaRecorder.stop(_callback):(mediaRecorder.stop(),_callback())}function pauseRecording(){return mediaRecorder?(mediaRecorder.pause(),config.disableLogs||console.debug("Paused recording."),void 0):console.warn(WARNING)}function resumeRecording(){return mediaRecorder?(mediaRecorder.resume(),config.disableLogs||console.debug("Resumed recording."),void 0):console.warn(WARNING)}function readFile(_blob){postMessage((new FileReaderSync).readAsDataURL(_blob))}function getDataURL(callback,_mediaRecorder){function processInWebWorker(_function){var blob=URL.createObjectURL(new Blob([_function.toString(),"this.onmessage =  function (e) {"+_function.name+"(e.data);}"],{type:"application/javascript"})),worker=new Worker(blob);return URL.revokeObjectURL(blob),worker}if(!callback)throw"Pass a callback function over getDataURL.";var blob=_mediaRecorder?_mediaRecorder.blob:mediaRecorder.blob;if(!blob)return config.disableLogs||console.warn("Blob encoder did not yet finished its job."),setTimeout(function(){getDataURL(callback,_mediaRecorder)},1e3),void 0;if("undefined"==typeof Worker||navigator.mozGetUserMedia){var reader=new FileReader;reader.readAsDataURL(blob),reader.onload=function(event){callback(event.target.result)}}else{var webWorker=processInWebWorker(readFile);webWorker.onmessage=function(event){callback(event.data)},webWorker.postMessage(blob)}}function handleRecordingDuration(){setTimeout(function(){stopRecording(self.onRecordingStopped)},self.recordingDuration)}if(!mediaStream)throw"MediaStream is mandatory.";config=new RecordRTCConfiguration(mediaStream,config);var mediaRecorder,self=this,WARNING='It seems that "startRecording" is not invoked for '+config.type+" recorder.",returnObject={startRecording:startRecording,stopRecording:stopRecording,pauseRecording:pauseRecording,resumeRecording:resumeRecording,initRecorder:initRecorder,setRecordingDuration:function(milliseconds,callback){if("undefined"==typeof milliseconds)throw"milliseconds is required.";if("number"!=typeof milliseconds)throw"milliseconds must be a number.";return self.recordingDuration=milliseconds,self.onRecordingStopped=callback||function(){},{onRecordingStopped:function(callback){self.onRecordingStopped=callback}}},clearRecordedData:function(){return mediaRecorder?(mediaRecorder.clearRecordedData(),config.disableLogs||console.debug("Cleared old recorded data."),void 0):console.warn(WARNING)},getBlob:function(){return mediaRecorder?mediaRecorder.blob:console.warn(WARNING)},getDataURL:getDataURL,toURL:function(){return mediaRecorder?URL.createObjectURL(mediaRecorder.blob):console.warn(WARNING)},save:function(fileName){return mediaRecorder?(invokeSaveAsDialog(mediaRecorder.blob,fileName),void 0):console.warn(WARNING)},getFromDisk:function(callback){return mediaRecorder?(RecordRTC.getFromDisk(config.type,callback),void 0):console.warn(WARNING)},setAdvertisementArray:function(arrayOfWebPImages){config.advertisement=[];for(var length=arrayOfWebPImages.length,i=0;length>i;i++)config.advertisement.push({duration:i,image:arrayOfWebPImages[i]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,view:null};if(!this)return self=returnObject,returnObject;for(var prop in returnObject)this[prop]=returnObject[prop];return self=this,returnObject}function RecordRTCConfiguration(mediaStream,config){return config.recorderType&&!config.type&&(config.recorderType===WhammyRecorder||config.recorderType===CanvasRecorder?config.type="video":config.recorderType===GifRecorder?config.type="gif":config.recorderType===StereoAudioRecorder?config.type="audio":config.recorderType===MediaStreamRecorder&&(mediaStream.getAudioTracks().length&&mediaStream.getVideoTracks().length?config.type="video":mediaStream.getAudioTracks().length&&!mediaStream.getVideoTracks().length?config.type="audio":!mediaStream.getAudioTracks().length&&mediaStream.getVideoTracks().length&&(config.type="audio"))),"undefined"!=typeof MediaStreamRecorder&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(config.mimeType||(config.mimeType="video/webm"),config.type||(config.type=config.mimeType.split("/")[0]),!config.bitsPerSecond),config.type||(config.mimeType&&(config.type=config.mimeType.split("/")[0]),config.type||(config.type="audio")),config}function GetRecorderType(mediaStream,config){var recorder;return(isChrome||isEdge||isOpera)&&(recorder=StereoAudioRecorder),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!isChrome&&(recorder=MediaStreamRecorder),"video"===config.type&&(isChrome||isOpera)&&(recorder=WhammyRecorder),"gif"===config.type&&(recorder=GifRecorder),"canvas"===config.type&&(recorder=CanvasRecorder),isMediaRecorderCompatible()&&isChrome&&recorder!==CanvasRecorder&&recorder!==GifRecorder&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&mediaStream.getVideoTracks().length&&(recorder=MediaStreamRecorder),config.recorderType&&(recorder=config.recorderType),!config.disableLogs&&recorder&&recorder.name&&console.debug("Using recorderType:",recorder.name||recorder.constructor.name),recorder}function MRecordRTC(mediaStream){this.addStream=function(_mediaStream){_mediaStream&&(mediaStream=_mediaStream)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var recorderType,mediaType=this.mediaType,mimeType=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof mediaType.audio&&isMediaRecorderCompatible()&&mediaStream&&mediaStream.getAudioTracks&&mediaStream.getAudioTracks().length&&mediaStream.getVideoTracks().length&&(this.mediaType.audio=!1),mediaType.audio&&(recorderType=null,"function"==typeof mediaType.audio&&(recorderType=mediaType.audio),this.audioRecorder=new RecordRTC(mediaStream,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:recorderType,mimeType:mimeType.audio}),mediaType.video||this.audioRecorder.startRecording()),mediaType.video){recorderType=null,"function"==typeof mediaType.video&&(recorderType=mediaType.video);var newStream=mediaStream;if(isMediaRecorderCompatible()&&mediaType.audio&&"function"==typeof mediaType.audio){var videoTrack=mediaStream.getVideoTracks()[0];navigator.mozGetUserMedia?(newStream=new MediaStream,newStream.addTrack(videoTrack),recorderType&&recorderType===WhammyRecorder&&(recorderType=MediaStreamRecorder)):newStream=new MediaStream([videoTrack])}this.videoRecorder=new RecordRTC(newStream,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:recorderType,mimeType:mimeType.video}),mediaType.audio||this.videoRecorder.startRecording()}if(mediaType.audio&&mediaType.video){var self=this;self.videoRecorder.initRecorder(function(){self.audioRecorder.initRecorder(function(){self.videoRecorder.startRecording(),self.audioRecorder.startRecording()})})}mediaType.gif&&(recorderType=null,"function"==typeof mediaType.gif&&(recorderType=mediaType.gif),this.gifRecorder=new RecordRTC(mediaStream,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:recorderType,mimeType:mimeType.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(callback){callback=callback||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(blobURL){callback(blobURL,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(blobURL){callback(blobURL,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(blobURL){callback(blobURL,"gif")})},this.getBlob=function(callback){var output={};return this.audioRecorder&&(output.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(output.video=this.videoRecorder.getBlob()),this.gifRecorder&&(output.gif=this.gifRecorder.getBlob()),callback&&callback(output),output},this.getDataURL=function(callback){function getDataURL(blob,callback00){if("undefined"!=typeof Worker){var webWorker=processInWebWorker(function(_blob){postMessage((new FileReaderSync).readAsDataURL(_blob))});webWorker.onmessage=function(event){callback00(event.data)},webWorker.postMessage(blob)}else{var reader=new FileReader;reader.readAsDataURL(blob),reader.onload=function(event){callback00(event.target.result)}}}function processInWebWorker(_function){var url,blob=URL.createObjectURL(new Blob([_function.toString(),"this.onmessage =  function (e) {"+_function.name+"(e.data);}"],{type:"application/javascript"})),worker=new Worker(blob);if("undefined"!=typeof URL)url=URL;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";url=webkitURL}return url.revokeObjectURL(blob),worker}this.getBlob(function(blob){getDataURL(blob.audio,function(_audioDataURL){getDataURL(blob.video,function(_videoDataURL){callback({audio:_audioDataURL,video:_videoDataURL})})})})},this.writeToDisk=function(){RecordRTC.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(args){args=args||{audio:!0,video:!0,gif:!0},args.audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof args.audio?args.audio:""),args.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof args.video?args.video:""),args.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof args.gif?args.gif:"")}}function bytesToSize(bytes){var k=1e3,sizes=["Bytes","KB","MB","GB","TB"];if(0===bytes)return"0 Bytes";var i=parseInt(Math.floor(Math.log(bytes)/Math.log(k)),10);return(bytes/Math.pow(k,i)).toPrecision(3)+" "+sizes[i]}function invokeSaveAsDialog(file,fileName){if(!file)throw"Blob object is required.";if(!file.type)try{file.type="video/webm"}catch(e){}var fileExtension=(file.type||"video/webm").split("/")[1];if(fileName&&-1!==fileName.indexOf(".")){var splitted=fileName.split(".");fileName=splitted[0],fileExtension=splitted[1]}var fileFullName=(fileName||Math.round(9999999999*Math.random())+888888888)+"."+fileExtension;if("undefined"!=typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(file,fileFullName);if("undefined"!=typeof navigator.msSaveBlob)return navigator.msSaveBlob(file,fileFullName);var hyperlink=document.createElement("a");hyperlink.href=URL.createObjectURL(file),hyperlink.target="_blank",hyperlink.download=fileFullName,navigator.mozGetUserMedia&&(hyperlink.onclick=function(){(document.body||document.documentElement).removeChild(hyperlink)},(document.body||document.documentElement).appendChild(hyperlink));var evt=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});hyperlink.dispatchEvent(evt),navigator.mozGetUserMedia||URL.revokeObjectURL(hyperlink.href)}function isMediaRecorderCompatible(){var isOpera=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,isChrome=!!window.chrome&&!isOpera,isFirefox="undefined"!=typeof window.InstallTrigger;if(isFirefox)return!0;if(!isChrome)return!1;var verOffset,ix,nAgt=(navigator.appVersion,navigator.userAgent),fullVersion=""+parseFloat(navigator.appVersion),majorVersion=parseInt(navigator.appVersion,10);return isChrome&&(verOffset=nAgt.indexOf("Chrome"),fullVersion=nAgt.substring(verOffset+7)),-1!==(ix=fullVersion.indexOf(";"))&&(fullVersion=fullVersion.substring(0,ix)),-1!==(ix=fullVersion.indexOf(" "))&&(fullVersion=fullVersion.substring(0,ix)),majorVersion=parseInt(""+fullVersion,10),isNaN(majorVersion)&&(fullVersion=""+parseFloat(navigator.appVersion),majorVersion=parseInt(navigator.appVersion,10)),majorVersion>=49}function MediaStreamRecorder(mediaStream,config){function isMediaStreamActive(){if("active"in mediaStream){if(!mediaStream.active)return!1}else if("ended"in mediaStream&&mediaStream.ended)return!1;return!0}var self=this;if(config=config||{mimeType:"video/webm"},"audio"===config.type){if(mediaStream.getVideoTracks().length&&mediaStream.getAudioTracks().length){var stream;navigator.mozGetUserMedia?(stream=new MediaStream,stream.addTrack(mediaStream.getAudioTracks()[0])):stream=new MediaStream(mediaStream.getAudioTracks()),mediaStream=stream}config.mimeType&&-1!==config.mimeType.indexOf("audio")||(config.mimeType=isChrome?"audio/webm":"audio/ogg")}this.record=function(){self.blob=null;var recorderHints=config;config.disableLogs||console.log("Passing following config over MediaRecorder API.",recorderHints),mediaRecorder&&(mediaRecorder=null),isChrome&&!isMediaRecorderCompatible()&&(recorderHints="video/vp8"),mediaRecorder=new MediaRecorder(mediaStream,recorderHints),"canRecordMimeType"in mediaRecorder&&mediaRecorder.canRecordMimeType(config.mimeType)===!1&&(config.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",config.mimeType)),mediaRecorder.ignoreMutedMedia=config.ignoreMutedMedia||!1,mediaRecorder.ondataavailable=function(e){self.dontFireOnDataAvailableEvent||!e.data||!e.data.size||e.data.size<100||self.blob||(self.blob=config.getNativeBlob?e.data:new Blob([e.data],{type:config.mimeType||"video/webm"}),self.recordingCallback&&(self.recordingCallback(self.blob),self.recordingCallback=null))},mediaRecorder.onerror=function(error){config.disableLogs||("InvalidState"===error.name?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed."):"OutOfMemory"===error.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute."):"IllegalStreamModification"===error.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute."):"OtherRecordingError"===error.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute."):"GenericError"===error.name?console.error("The UA cannot provide the codec or recording option that has been requested.",error):console.error("MediaRecorder Error",error)),"inactive"!==mediaRecorder.state&&"stopped"!==mediaRecorder.state&&mediaRecorder.stop()},mediaRecorder.start(36e5),config.onAudioProcessStarted&&config.onAudioProcessStarted(),config.initCallback&&config.initCallback()},this.stop=function(callback){mediaRecorder&&(this.recordingCallback=callback||function(){},"recording"===mediaRecorder.state&&(mediaRecorder.requestData(),mediaRecorder.stop()))},this.pause=function(){mediaRecorder&&"recording"===mediaRecorder.state&&mediaRecorder.pause()},this.resume=function(){if(this.dontFireOnDataAvailableEvent){this.dontFireOnDataAvailableEvent=!1;var disableLogs=config.disableLogs;return config.disableLogs=!0,this.record(),config.disableLogs=disableLogs,void 0}mediaRecorder&&"paused"===mediaRecorder.state&&mediaRecorder.resume()},this.clearRecordedData=function(){mediaRecorder&&(this.pause(),this.dontFireOnDataAvailableEvent=!0,this.stop())};var mediaRecorder,self=this;!function looper(){return mediaRecorder?isMediaStreamActive()===!1?(self.stop(),void 0):(setTimeout(looper,1e3),void 0):void 0}()}function StereoAudioRecorder(mediaStream,config){function isMediaStreamActive(){if("active"in mediaStream){if(!mediaStream.active)return!1}else if("ended"in mediaStream&&mediaStream.ended)return!1;return!0}function mergeLeftRightBuffers(config,callback){function mergeAudioBuffers(config,cb){function mergeBuffers(channelBuffer,rLength){for(var result=new Float64Array(rLength),offset=0,lng=channelBuffer.length,i=0;lng>i;i++){var buffer=channelBuffer[i];result.set(buffer,offset),offset+=buffer.length}return result}function interleave(leftChannel,rightChannel){for(var length=leftChannel.length+rightChannel.length,result=new Float64Array(length),inputIndex=0,index=0;length>index;)result[index++]=leftChannel[inputIndex],result[index++]=rightChannel[inputIndex],inputIndex++;return result}function writeUTFBytes(view,offset,string){for(var lng=string.length,i=0;lng>i;i++)view.setUint8(offset+i,string.charCodeAt(i))}var numberOfAudioChannels=config.numberOfAudioChannels,leftBuffers=config.leftBuffers.slice(0),rightBuffers=config.rightBuffers.slice(0),sampleRate=config.sampleRate,internalInterleavedLength=config.internalInterleavedLength;2===numberOfAudioChannels&&(leftBuffers=mergeBuffers(leftBuffers,internalInterleavedLength),rightBuffers=mergeBuffers(rightBuffers,internalInterleavedLength)),1===numberOfAudioChannels&&(leftBuffers=mergeBuffers(leftBuffers,internalInterleavedLength));var interleaved;2===numberOfAudioChannels&&(interleaved=interleave(leftBuffers,rightBuffers)),1===numberOfAudioChannels&&(interleaved=leftBuffers);var interleavedLength=interleaved.length,resultingBufferLength=44+2*interleavedLength,buffer=new ArrayBuffer(resultingBufferLength),view=new DataView(buffer);writeUTFBytes(view,0,"RIFF"),view.setUint32(4,44+2*interleavedLength,!0),writeUTFBytes(view,8,"WAVE"),writeUTFBytes(view,12,"fmt "),view.setUint32(16,16,!0),view.setUint16(20,1,!0),view.setUint16(22,numberOfAudioChannels,!0),view.setUint32(24,sampleRate,!0),view.setUint32(28,2*sampleRate,!0),view.setUint16(32,2*numberOfAudioChannels,!0),view.setUint16(34,16,!0),writeUTFBytes(view,36,"data"),view.setUint32(40,2*interleavedLength,!0);for(var lng=interleavedLength,index=44,volume=1,i=0;lng>i;i++)view.setInt16(index,32767*interleaved[i]*volume,!0),index+=2;return cb?cb({buffer:buffer,view:view}):(postMessage({buffer:buffer,view:view}),void 0)}if(!isChrome)return mergeAudioBuffers(config,function(data){callback(data.buffer,data.view)}),void 0;var webWorker=processInWebWorker(mergeAudioBuffers);webWorker.onmessage=function(event){callback(event.data.buffer,event.data.view),URL.revokeObjectURL(webWorker.workerURL)},webWorker.postMessage(config)}function processInWebWorker(_function){var workerURL=URL.createObjectURL(new Blob([_function.toString(),";this.onmessage =  function (e) {"+_function.name+"(e.data);}"],{type:"application/javascript"})),worker=new Worker(workerURL);return worker.workerURL=workerURL,worker}function onAudioProcessDataAvailable(e){if(!isPaused){if(isMediaStreamActive()===!1&&(config.disableLogs||console.error("MediaStream seems stopped."),jsAudioNode.disconnect(),recording=!1),!recording)return audioInput.disconnect(),void 0;isAudioProcessStarted||(isAudioProcessStarted=!0,config.onAudioProcessStarted&&config.onAudioProcessStarted(),config.initCallback&&config.initCallback());var left=e.inputBuffer.getChannelData(0);if(leftchannel.push(new Float32Array(left)),2===numberOfAudioChannels){var right=e.inputBuffer.getChannelData(1);rightchannel.push(new Float32Array(right))}recordingLength+=bufferSize}}if(!mediaStream.getAudioTracks().length)throw"Your stream has no audio tracks.";config=config||{};var jsAudioNode,self=this,leftchannel=[],rightchannel=[],recording=!1,recordingLength=0,numberOfAudioChannels=2;config.leftChannel===!0&&(numberOfAudioChannels=1),1===config.numberOfAudioChannels&&(numberOfAudioChannels=1),config.disableLogs||console.debug("StereoAudioRecorder is set to record number of channels: ",numberOfAudioChannels),this.record=function(){if(isMediaStreamActive()===!1)throw"Please make sure MediaStream is active.";leftchannel.length=rightchannel.length=0,recordingLength=0,audioInput&&audioInput.connect(jsAudioNode),isAudioProcessStarted=isPaused=!1,recording=!0},this.stop=function(callback){recording=!1,mergeLeftRightBuffers({sampleRate:sampleRate,numberOfAudioChannels:numberOfAudioChannels,internalInterleavedLength:recordingLength,leftBuffers:leftchannel,rightBuffers:1===numberOfAudioChannels?[]:rightchannel},function(buffer,view){self.blob=new Blob([view],{type:"audio/wav"}),self.buffer=new ArrayBuffer(view),self.view=view,self.sampleRate=sampleRate,self.bufferSize=bufferSize,self.length=recordingLength,callback&&callback(),isAudioProcessStarted=!1})},Storage.AudioContextConstructor||(Storage.AudioContextConstructor=new Storage.AudioContext);var context=Storage.AudioContextConstructor,audioInput=context.createMediaStreamSource(mediaStream),legalBufferValues=[0,256,512,1024,2048,4096,8192,16384],bufferSize="undefined"==typeof config.bufferSize?4096:config.bufferSize;if(-1===legalBufferValues.indexOf(bufferSize)&&(config.disableLogs||console.warn("Legal values for buffer-size are "+JSON.stringify(legalBufferValues,null,"	"))),context.createJavaScriptNode)jsAudioNode=context.createJavaScriptNode(bufferSize,numberOfAudioChannels,numberOfAudioChannels);else{if(!context.createScriptProcessor)throw"WebAudio API has no support on this browser.";jsAudioNode=context.createScriptProcessor(bufferSize,numberOfAudioChannels,numberOfAudioChannels)}audioInput.connect(jsAudioNode),config.bufferSize||(bufferSize=jsAudioNode.bufferSize);var sampleRate="undefined"!=typeof config.sampleRate?config.sampleRate:context.sampleRate||44100;(22050>sampleRate||sampleRate>96e3)&&(config.disableLogs||console.warn("sample-rate must be under range 22050 and 96000.")),config.disableLogs||(console.log("sample-rate",sampleRate),console.log("buffer-size",bufferSize));var isPaused=!1;this.pause=function(){isPaused=!0},this.resume=function(){if(isMediaStreamActive()===!1)throw"Please make sure MediaStream is active.";return recording?(isPaused=!1,void 0):(config.disableLogs||console.info("Seems recording has been restarted."),this.record(),void 0)},this.clearRecordedData=function(){this.pause(),leftchannel.length=rightchannel.length=0,recordingLength=0};var isAudioProcessStarted=!1;jsAudioNode.onaudioprocess=onAudioProcessDataAvailable,jsAudioNode.connect(context.destination)}function CanvasRecorder(htmlElement,config){function cloneCanvas(){var newCanvas=document.createElement("canvas"),context=newCanvas.getContext("2d");return newCanvas.width=htmlElement.width,newCanvas.height=htmlElement.height,context.drawImage(htmlElement,0,0),newCanvas}function drawCanvasFrame(){if(isPausedRecording)return lastTime=(new Date).getTime(),setTimeout(drawCanvasFrame,500);if("canvas"===htmlElement.nodeName.toLowerCase()){var duration=(new Date).getTime()-lastTime;return lastTime=(new Date).getTime(),whammy.frames.push({image:cloneCanvas(),duration:duration}),isRecording&&setTimeout(drawCanvasFrame,config.frameInterval),void 0}html2canvas(htmlElement,{grabMouse:"undefined"==typeof config.showMousePointer||config.showMousePointer,onrendered:function(canvas){var duration=(new Date).getTime()-lastTime;return duration?(lastTime=(new Date).getTime(),whammy.frames.push({image:canvas.toDataURL("image/webp",1),duration:duration}),isRecording&&setTimeout(drawCanvasFrame,config.frameInterval),void 0):setTimeout(drawCanvasFrame,config.frameInterval)}})}if("undefined"==typeof html2canvas&&"canvas"!==htmlElement.nodeName.toLowerCase())throw"Please link: //cdn.webrtc-experiment.com/screenshot.js";config=config||{},config.frameInterval||(config.frameInterval=10);var isCanvasSupportsStreamCapturing=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(item){item in document.createElement("canvas")&&(isCanvasSupportsStreamCapturing=!0)}),(window.webkitRTCPeerConnection||window.webkitGetUserMedia)&&(isCanvasSupportsStreamCapturing=!1);var globalCanvas,globalContext,mediaStreamRecorder;isCanvasSupportsStreamCapturing?(config.disableLogs||console.debug("Your browser supports both MediRecorder API and canvas.captureStream!"),globalCanvas=document.createElement("canvas"),globalCanvas.width=htmlElement.clientWidth||window.innerWidth,globalCanvas.height=htmlElement.clientHeight||window.innerHeight,globalCanvas.style="top: -9999999; left: -99999999; visibility:hidden; position:absoluted; display: none;",(document.body||document.documentElement).appendChild(globalCanvas),globalContext=globalCanvas.getContext("2d")):navigator.mozGetUserMedia&&(config.disableLogs||alert("Canvas recording is NOT supported in Firefox."));var isRecording;this.record=function(){if(isRecording=!0,isCanvasSupportsStreamCapturing){var canvasMediaStream;"captureStream"in globalCanvas?canvasMediaStream=globalCanvas.captureStream(25):"mozCaptureStream"in globalCanvas?canvasMediaStream=globalCanvas.captureStream(25):"webkitCaptureStream"in globalCanvas&&(canvasMediaStream=globalCanvas.captureStream(25));try{var mdStream=new MediaStream;mdStream.addTrack(canvasMediaStream.getVideoTracks()[0]),canvasMediaStream=mdStream}catch(e){}if(!canvasMediaStream)throw"captureStream API are NOT available.";mediaStreamRecorder=new MediaStreamRecorder(canvasMediaStream,{mimeType:"video/webm"}),mediaStreamRecorder.record()}else whammy.frames=[],lastTime=(new Date).getTime(),drawCanvasFrame();config.initCallback&&config.initCallback()},this.getWebPImages=function(callback){if("canvas"!==htmlElement.nodeName.toLowerCase())return callback(),void 0;var framesLength=whammy.frames.length;whammy.frames.forEach(function(frame,idx){var framesRemaining=framesLength-idx;document.title=framesRemaining+"/"+framesLength+" frames remaining",config.onEncodingCallback&&config.onEncodingCallback(framesRemaining,framesLength);var webp=frame.image.toDataURL("image/webp",1);whammy.frames[idx].image=webp}),document.title="Generating WebM",callback()},this.stop=function(callback){isRecording=!1;var that=this;if(isCanvasSupportsStreamCapturing&&mediaStreamRecorder){return mediaStreamRecorder.stop(function(){for(var prop in mediaStreamRecorder)self[prop]=mediaStreamRecorder[prop];callback&&callback(that.blob)}),void 0}this.getWebPImages(function(){whammy.compile(function(blob){document.title="Recording finished!",that.blob=blob,that.blob.forEach&&(that.blob=new Blob([],{type:"video/webm"})),callback&&callback(that.blob),whammy.frames=[]})})};var isPausedRecording=!1;this.pause=function(){isPausedRecording=!0},this.resume=function(){isPausedRecording=!1},this.clearRecordedData=function(){this.pause(),whammy.frames=[]};var lastTime=(new Date).getTime(),whammy=new Whammy.Video(100)}function WhammyRecorder(mediaStream,config){function drawFrames(frameInterval){frameInterval="undefined"!=typeof frameInterval?frameInterval:10;var duration=(new Date).getTime()-lastTime;return duration?isPausedRecording?(lastTime=(new Date).getTime(),setTimeout(drawFrames,100)):(lastTime=(new Date).getTime(),video.paused&&video.play(),context.drawImage(video,0,0,canvas.width,canvas.height),whammy.frames.push({duration:duration,image:canvas.toDataURL("image/webp")}),isStopDrawing||setTimeout(drawFrames,frameInterval,frameInterval),void 0):setTimeout(drawFrames,frameInterval,frameInterval)}function asyncLoop(o){var i=-1,length=o.length,loop=function(){return i++,i===length?(o.callback(),void 0):(o.functionToLoop(loop,i),void 0)};loop()}function dropBlackFrames(_frames,_framesToCheck,_pixTolerance,_frameTolerance,callback){var localCanvas=document.createElement("canvas");localCanvas.width=canvas.width,localCanvas.height=canvas.height;var context2d=localCanvas.getContext("2d"),resultFrames=[],checkUntilNotBlack=-1===_framesToCheck,endCheckFrame=_framesToCheck&&_framesToCheck>0&&_framesToCheck<=_frames.length?_framesToCheck:_frames.length,sampleColor={r:0,g:0,b:0},maxColorDifference=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),pixTolerance=_pixTolerance&&_pixTolerance>=0&&1>=_pixTolerance?_pixTolerance:0,frameTolerance=_frameTolerance&&_frameTolerance>=0&&1>=_frameTolerance?_frameTolerance:0,doNotCheckNext=!1;asyncLoop({length:endCheckFrame,functionToLoop:function(loop,f){var matchPixCount,endPixCheck,maxPixCount,finishImage=function(){!doNotCheckNext&&maxPixCount*frameTolerance>=maxPixCount-matchPixCount||(checkUntilNotBlack&&(doNotCheckNext=!0),resultFrames.push(_frames[f])),loop()};if(doNotCheckNext)finishImage();else{var image=new Image;image.onload=function(){context2d.drawImage(image,0,0,canvas.width,canvas.height);var imageData=context2d.getImageData(0,0,canvas.width,canvas.height);matchPixCount=0,endPixCheck=imageData.data.length,maxPixCount=imageData.data.length/4;for(var pix=0;endPixCheck>pix;pix+=4){var currentColor={r:imageData.data[pix],g:imageData.data[pix+1],b:imageData.data[pix+2]},colorDifference=Math.sqrt(Math.pow(currentColor.r-sampleColor.r,2)+Math.pow(currentColor.g-sampleColor.g,2)+Math.pow(currentColor.b-sampleColor.b,2));maxColorDifference*pixTolerance>=colorDifference&&matchPixCount++}finishImage()},image.src=_frames[f].image}},callback:function(){resultFrames=resultFrames.concat(_frames.slice(endCheckFrame)),resultFrames.length<=0&&resultFrames.push(_frames[_frames.length-1]),callback(resultFrames)}})}config=config||{},config.frameInterval||(config.frameInterval=10),config.disableLogs||console.log("Using frames-interval:",config.frameInterval),this.record=function(){config.width||(config.width=320),config.height||(config.height=240),config.video||(config.video={width:config.width,height:config.height}),config.canvas||(config.canvas={width:config.width,height:config.height}),canvas.width=config.canvas.width,canvas.height=config.canvas.height,context=canvas.getContext("2d"),config.video&&config.video instanceof HTMLVideoElement?(video=config.video.cloneNode(),config.initCallback&&config.initCallback()):(video=document.createElement("video"),"undefined"!=typeof video.srcObject?video.srcObject=mediaStream:video.src=URL.createObjectURL(mediaStream),video.onloadedmetadata=function(){config.initCallback&&config.initCallback()},video.width=config.video.width,video.height=config.video.height),video.muted=!0,video.play(),lastTime=(new Date).getTime(),whammy=new Whammy.Video,config.disableLogs||(console.log("canvas resolutions",canvas.width,"*",canvas.height),console.log("video width/height",video.width||canvas.width,"*",video.height||canvas.height)),drawFrames(config.frameInterval)};var isStopDrawing=!1;this.stop=function(callback){isStopDrawing=!0;var _this=this;setTimeout(function(){dropBlackFrames(whammy.frames,-1,null,null,function(frames){whammy.frames=frames,config.advertisement&&config.advertisement.length&&(whammy.frames=config.advertisement.concat(whammy.frames)),whammy.compile(function(blob){_this.blob=blob,_this.blob.forEach&&(_this.blob=new Blob([],{type:"video/webm"})),callback&&callback(_this.blob)})})},10)};var isPausedRecording=!1;this.pause=function(){isPausedRecording=!0},this.resume=function(){isPausedRecording=!1},this.clearRecordedData=function(){this.pause(),whammy.frames=[]};var video,lastTime,whammy,canvas=document.createElement("canvas"),context=canvas.getContext("2d")}function GifRecorder(mediaStream,config){if("undefined"==typeof GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";config=config||{};var isHTMLObject=mediaStream instanceof CanvasRenderingContext2D||mediaStream instanceof HTMLCanvasElement;this.record=function(){function drawVideoFrame(time){return isPausedRecording?setTimeout(function(){drawVideoFrame(time)},100):(lastAnimationFrame=requestAnimationFrame(drawVideoFrame),void 0===typeof lastFrameTime&&(lastFrameTime=time),90>time-lastFrameTime||(!isHTMLObject&&video.paused&&video.play(),context.drawImage(video,0,0,canvas.width,canvas.height),config.onGifPreview&&config.onGifPreview(canvas.toDataURL("image/png")),gifEncoder.addFrame(context),lastFrameTime=time),void 0)}isHTMLObject||(config.width||(config.width=video.offsetWidth||320),this.height||(config.height=video.offsetHeight||240),config.video||(config.video={width:config.width,height:config.height}),config.canvas||(config.canvas={width:config.width,height:config.height}),canvas.width=config.canvas.width,canvas.height=config.canvas.height,video.width=config.video.width,video.height=config.video.height),gifEncoder=new GIFEncoder,gifEncoder.setRepeat(0),gifEncoder.setDelay(config.frameRate||200),gifEncoder.setQuality(config.quality||10),gifEncoder.start(),startTime=Date.now();
lastAnimationFrame=requestAnimationFrame(drawVideoFrame),config.initCallback&&config.initCallback()},this.stop=function(){lastAnimationFrame&&cancelAnimationFrame(lastAnimationFrame),endTime=Date.now(),this.blob=new Blob([new Uint8Array(gifEncoder.stream().bin)],{type:"image/gif"}),gifEncoder.stream().bin=[]};var isPausedRecording=!1;this.pause=function(){isPausedRecording=!0},this.resume=function(){isPausedRecording=!1},this.clearRecordedData=function(){gifEncoder&&(this.pause(),gifEncoder.stream().bin=[])};var canvas=document.createElement("canvas"),context=canvas.getContext("2d");if(isHTMLObject&&(mediaStream instanceof CanvasRenderingContext2D?context=mediaStream:mediaStream instanceof HTMLCanvasElement&&(context=mediaStream.getContext("2d"))),!isHTMLObject){var video=document.createElement("video");video.muted=!0,video.autoplay=!0,"undefined"!=typeof video.srcObject?video.srcObject=mediaStream:video.src=URL.createObjectURL(mediaStream),video.play()}var startTime,endTime,lastFrameTime,gifEncoder,lastAnimationFrame=null}function InfoBubble(opt_options){this.extend(InfoBubble,google.maps.OverlayView),this.tabs_=[],this.activeTab_=null,this.baseZIndex_=100,this.isOpen_=!1;var options=opt_options||{};void 0==options.backgroundColor&&(options.backgroundColor=this.BACKGROUND_COLOR_),void 0==options.borderColor&&(options.borderColor=this.BORDER_COLOR_),void 0==options.borderRadius&&(options.borderRadius=this.BORDER_RADIUS_),void 0==options.borderWidth&&(options.borderWidth=this.BORDER_WIDTH_),void 0==options.padding&&(options.padding=this.PADDING_),void 0==options.arrowPosition&&(options.arrowPosition=this.ARROW_POSITION_),void 0==options.disableAutoPan&&(options.disableAutoPan=!1),void 0==options.disableAnimation&&(options.disableAnimation=!1),void 0==options.minWidth&&(options.minWidth=this.MIN_WIDTH_),void 0==options.shadowStyle&&(options.shadowStyle=this.SHADOW_STYLE_),void 0==options.arrowSize&&(options.arrowSize=this.ARROW_SIZE_),void 0==options.arrowStyle&&(options.arrowStyle=this.ARROW_STYLE_),this.buildDom_(),this.setValues(options)}function Xinha(_5,_6){if(Xinha.isSupportedBrowser){if(!_5)throw new Error("Tried to create Xinha without textarea specified.");this.config="undefined"==typeof _6?new Xinha.Config:_6,"object"!=typeof _5&&(_5=Xinha.getElementById("textarea",_5)),this._textArea=_5,this._textArea.spellcheck=!1,Xinha.freeLater(this,"_textArea"),this._initial_ta_size={w:_5.style.width?_5.style.width:_5.offsetWidth?_5.offsetWidth+"px":_5.cols+"em",h:_5.style.height?_5.style.height:_5.offsetHeight?_5.offsetHeight+"px":_5.rows+"em"},(document.getElementById("loading_"+_5.id)||this.config.showLoading)&&(document.getElementById("loading_"+_5.id)||Xinha.createLoadingMessage(_5),this.setLoadingMessage(Xinha._lc("Constructing object"))),this._editMode="wysiwyg",this.plugins={},this._timerToolbar=null,this._timerUndo=null,this._undoQueue=[this.config.undoSteps],this._undoPos=-1,this._customUndo=!0,this._mdoc=document,this.doctype="",this.__htmlarea_id_num=__xinhas.length,__xinhas[this.__htmlarea_id_num]=this,this._notifyListeners={};var _7={right:{on:!0,container:document.createElement("td"),panels:[]},left:{on:!0,container:document.createElement("td"),panels:[]},top:{on:!0,container:document.createElement("td"),panels:[]},bottom:{on:!0,container:document.createElement("td"),panels:[]}};for(var i in _7)_7[i].container&&(_7[i].div=_7[i].container,_7[i].container.className="panels "+i,Xinha.freeLater(_7[i],"container"),Xinha.freeLater(_7[i],"div"));this._panels=_7,this._statusBar=null,this._statusBarTree=null,this._statusBarTextMode=null,this._statusBarItems=[],this._framework={},this._htmlArea=null,this._iframe=null,this._doc=null,this._toolBar=this._toolbar=null,this._toolbarObjects={}}}function dumpValues(o){var s="";for(var prop in o)window.console&&"function"==typeof window.console.log?"undefined"!=typeof console.firebug?console.log(o):console.log(prop+" = "+o[prop]+"\n"):s+=prop+" = "+o[prop]+"\n";if(s)if(document.getElementById("errors"))document.getElementById("errors").value+=s;else{var x=window.open("","debugger");x.document.write("<pre>"+s+"</pre>")}}!function(e,undefined){function j(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function A(e){var t=D[e]={};return x.each(e.match(w)||[],function(e,n){t[n]=!0}),t}function F(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=x.expando+Math.random()}function P(e,t,n){var r;if(n===undefined&&1===e.nodeType)if(r="data-"+t.replace(O,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:H.test(n)?JSON.parse(n):n}catch(i){}L.set(e,t,n)}else n=undefined;return n}function U(){return!0}function Y(){return!1}function V(){try{return o.activeElement}catch(e){}}function Z(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function et(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(G.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return g.call(t,e)>=0!==n})}function pt(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ht(e){var t=ut.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function dt(e,t){for(var n=e.length,r=0;n>r;r++)q.set(e[r],"globalEval",!t||q.get(t[r],"globalEval"))}function gt(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(q.hasData(e)&&(o=q.access(e),s=q.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)x.event.add(t,i,l[i][n])}L.hasData(e)&&(a=L.access(e),u=x.extend({},a),L.set(t,u))}}function mt(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&x.nodeName(e,t)?x.merge([e],n):n}function yt(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ot.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function At(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Dt.length;i--;)if(t=Dt[i]+n,t in e)return t;return r}function Lt(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function qt(t){return e.getComputedStyle(t,null)}function Ht(e,t){for(var n,r,i,o=[],s=0,a=e.length;a>s;s++)r=e[s],r.style&&(o[s]=q.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Lt(r)&&(o[s]=q.access(r,"olddisplay",Rt(r.nodeName)))):o[s]||(i=Lt(r),(n&&"none"!==n||!i)&&q.set(r,"olddisplay",i?n:x.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function Ot(e,t,n){var r=Tt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Ft(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=x.css(e,n+jt[o],!0,i)),r?("content"===n&&(s-=x.css(e,"padding"+jt[o],!0,i)),"margin"!==n&&(s-=x.css(e,"border"+jt[o]+"Width",!0,i))):(s+=x.css(e,"padding"+jt[o],!0,i),"padding"!==n&&(s+=x.css(e,"border"+jt[o]+"Width",!0,i)));return s}function Pt(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=qt(e),s=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=vt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Ct.test(i))return i;r=s&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+Ft(e,t,n||(s?"border":"content"),r,o)+"px"}function Rt(e){var t=o,n=Nt[e];return n||(n=Mt(e,t),"none"!==n&&n||(xt=(xt||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(xt[0].contentWindow||xt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=Mt(e,t),xt.detach()),Nt[e]=n),n}function Mt(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}function _t(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||$t.test(e)?r(e,i):_t(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)_t(e+"["+i+"]",t[i],n,r)}function un(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(x.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function ln(e,t,n,r){function s(a){var u;return i[a]=!0,x.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):undefined:(t.dataTypes.unshift(l),s(l),!1)}),u}var i={},o=e===on;return s(t.dataTypes[0])||!i["*"]&&s("*")}function cn(e,t){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}function pn(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):undefined}function fn(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(p){return{state:"parsererror",error:s?p:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function En(){return setTimeout(function(){xn=undefined}),xn=x.now()}function Sn(e,t,n){for(var r,i=(Nn[t]||[]).concat(Nn["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,t,e))return r}function jn(e,t,n){var r,i,o=0,s=kn.length,a=x.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=xn||En(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:xn||En(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Dn(c,l.opts.specialEasing);s>o;o++)if(r=kn[o].call(l,e,c,l.opts))return r;return x.map(c,Sn,l),x.isFunction(l.opts.start)&&l.opts.start.call(e,l),x.fx.timer(x.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function Dn(e,t){var n,r,i,o,s;for(n in e)if(r=x.camelCase(n),i=t[r],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=x.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function An(e,t,n){var r,i,o,s,a,u,l=this,c={},p=e.style,f=e.nodeType&&Lt(e),h=q.get(e,"fxshow");n.queue||(a=x._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,l.always(function(){l.always(function(){a.unqueued--,x.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",l.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],wn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!h||h[r]===undefined)continue;f=!0}c[r]=h&&h[r]||x.style(e,r)}if(!x.isEmptyObject(c)){h?"hidden"in h&&(f=h.hidden):h=q.access(e,"fxshow",{}),o&&(h.hidden=!f),f?x(e).show():l.done(function(){x(e).hide()}),l.done(function(){var t;q.remove(e,"fxshow");for(t in c)x.style(e,t,c[t])});for(r in c)s=Sn(f?h[r]:0,r,l),r in h||(h[r]=s.start,f&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function Ln(e,t,n,r,i){return new Ln.prototype.init(e,t,n,r,i)}function qn(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=jt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function Hn(e){return x.isWindow(e)?e:9===e.nodeType&&e.defaultView}var t,n,r=typeof undefined,i=e.location,o=e.document,s=o.documentElement,a=e.jQuery,u=e.$,l={},c=[],p="2.0.3",f=c.concat,h=c.push,d=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,x=function(e,n){return new x.fn.init(e,n,t)},b=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^-ms-/,N=/-([\da-z])/gi,E=function(e,t){return t.toUpperCase()},S=function(){o.removeEventListener("DOMContentLoaded",S,!1),e.removeEventListener("load",S,!1),x.ready()};x.fn=x.prototype={jquery:p,constructor:x,init:function(e,t,n){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:o,!0)),C.test(r[1])&&x.isPlainObject(t))for(r in t)x.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=o.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?n.ready(e):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},a=2),"object"==typeof s||x.isFunction(s)||(s={}),u===a&&(s=this,--a);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(x.isPlainObject(r)||(i=x.isArray(r)))?(i?(i=!1,o=n&&x.isArray(n)?n:[]):o=n&&x.isPlainObject(n)?n:{},s[t]=x.extend(l,o,r)):r!==undefined&&(s[t]=r));return s},x.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=a),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){(e===!0?--x.readyWait:x.isReady)||(x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(o,[x]),x.fn.trigger&&x(o).trigger("ready").off("ready")))},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=undefined}return(!t||t.getElementsByTagName("parsererror").length)&&x.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){var t,n=eval;e=x.trim(e),e&&(1===e.indexOf("use strict")?(t=o.createElement("script"),t.text=e,o.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(k,"ms-").replace(N,E)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,s=j(e);if(n){if(s)for(;o>i&&(r=t.apply(e[i],n),r!==!1);i++);else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(s)for(;o>i&&(r=t.call(e[i],i,e[i]),r!==!1);i++);else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":v.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(j(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;n>i;i++)e[r++]=t[i];else for(;t[i]!==undefined;)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){var r,i=[],o=0,s=e.length;for(n=!!n;s>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,s=j(e),a=[];if(s)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(a[a.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(a[a.length]=r);return f.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),x.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(t||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):undefined},access:function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===x.type(n)){i=!0;for(a in n)x.access(e,t,a,n[a],!0,o,s)}else if(r!==undefined&&(i=!0,x.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(x(e),n)})),t))for(;u>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o},now:Date.now,swap:function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i}}),x.ready.promise=function(t){return n||(n=x.Deferred(),"complete"===o.readyState?setTimeout(x.ready):(o.addEventListener("DOMContentLoaded",S,!1),e.addEventListener("load",S,!1))),n.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),t=x(o),function(e,undefined){function ot(e,t,r,i){var o,s,a,u,l,f,g,m,x,w;if((t?t.ownerDocument||t:b)!==p&&c(t),t=t||p,r=r||[],!e||"string"!=typeof e)return r;if(1!==(u=t.nodeType)&&9!==u)return[];if(h&&!i){if(o=K.exec(e))if(a=o[1]){if(9===u){if(s=t.getElementById(a),!s||!s.parentNode)return r;if(s.id===a)return r.push(s),r}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&y(t,s)&&s.id===a)return r.push(s),r}else{if(o[2])return O.apply(r,t.getElementsByTagName(e)),r;if((a=o[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&(!d||!d.test(e))){if(m=g=v,x=t,w=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(f=gt(e),(g=t.getAttribute("id"))?m=g.replace(tt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",l=f.length;l--;)f[l]=m+mt(f[l]);x=U.test(e)&&t.parentNode||t,w=f.join(",")}if(w)try{return O.apply(r,x.querySelectorAll(w)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return kt(e.replace(z,"$1"),t,r,i)}function st(){function t(n,r){return e.push(n+=" ")>i.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[v]=!0,e}function ut(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){for(var n=e.split("|"),r=e.length;r--;)i.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ht(e){return at(function(t){return t=+t,at(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function dt(){}function gt(e,t){var n,r,o,s,a,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);for(a=e,u=[],l=i.preFilter;a;){(!n||(r=_.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=X.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(z," ")}),a=a.slice(n.length));for(s in i.filter)!(r=J[s].exec(a))||l[s]&&!(r=l[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ot.error(e):k(e,u).slice(0)}function mt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var i=t.dir,o=n&&"parentNode"===i,s=T++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var u,l,c,p=w+" "+s;if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(c=t[v]||(t[v]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,a)||r,l[1]===!0)return!0}}function vt(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),l&&t.push(a));return s}function bt(e,t,n,r,i,o){return r&&!r[v]&&(r=bt(r)),i&&!i[v]&&(i=bt(i,o)),at(function(o,s,a,u){var l,c,p,f=[],h=[],d=s.length,g=o||Ct(t||"*",a.nodeType?[a]:a,[]),m=!e||!o&&t?g:xt(g,f,e,a,u),y=n?i||(o?e:d||r)?[]:s:m;if(n&&n(m,y,a,u),r)for(l=xt(y,h),r(l,[],a,u),c=l.length;c--;)(p=l[c])&&(y[h[c]]=!(m[h[c]]=p));if(o){if(i||e){if(i){for(l=[],c=y.length;c--;)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}for(c=y.length;c--;)(p=y[c])&&(l=i?P.call(o,p):f[c])>-1&&(o[l]=!(s[l]=p))}}else y=xt(y===s?y.splice(d,y.length):y),i?i(null,s,y,u):O.apply(s,y)})}function wt(e){for(var t,n,r,o=e.length,s=i.relative[e[0].type],a=s||i.relative[" "],l=s?1:0,c=yt(function(e){return e===t},a,!0),p=yt(function(e){return P.call(t,e)>-1},a,!0),f=[function(e,n,r){return!s&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];o>l;l++)if(n=i.relative[e[l].type])f=[yt(vt(f),n)];else{if(n=i.filter[e[l].type].apply(null,e[l].matches),n[v]){for(r=++l;o>r&&!i.relative[e[r].type];r++);return bt(l>1&&vt(f),l>1&&mt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,r>l&&wt(e.slice(l,r)),o>r&&wt(e=e.slice(r)),o>r&&mt(e))}f.push(n)}return vt(f)}function Tt(e,t){var n=0,o=t.length>0,s=e.length>0,a=function(a,l,c,f,h){var d,g,m,y=[],v=0,x="0",b=a&&[],T=null!=h,C=u,k=a||s&&i.find.TAG("*",h&&l.parentNode||l),N=w+=null==C?1:Math.random()||.1;for(T&&(u=l!==p&&l,r=n);null!=(d=k[x]);x++){if(s&&d){for(g=0;m=e[g++];)if(m(d,l,c)){f.push(d);break}T&&(w=N,r=++n)}o&&((d=!m&&d)&&v--,a&&b.push(d))}if(v+=x,o&&x!==v){for(g=0;m=t[g++];)m(b,y,l,c);if(a){if(v>0)for(;x--;)b[x]||y[x]||(y[x]=q.call(f));y=xt(y)}O.apply(f,y),T&&!a&&y.length>0&&v+t.length>1&&ot.uniqueSort(f)}return T&&(w=N,u=C),b};return o?at(a):a}function Ct(e,t,n){for(var r=0,i=t.length;i>r;r++)ot(e,t[r],n);return n}function kt(e,t,r,o){var s,u,l,c,p,f=gt(e);if(!o&&1===f.length){if(u=f[0]=f[0].slice(0),u.length>2&&"ID"===(l=u[0]).type&&n.getById&&9===t.nodeType&&h&&i.relative[u[1].type]){if(t=(i.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return r;e=e.slice(u.shift().value.length)}for(s=J.needsContext.test(e)?0:u.length;s--&&(l=u[s],!i.relative[c=l.type]);)if((p=i.find[c])&&(o=p(l.matches[0].replace(nt,rt),U.test(u[0].type)&&t.parentNode||t))){if(u.splice(s,1),e=o.length&&mt(u),!e)return O.apply(r,o),r;break}}return a(e,f)(o,t,!h,r,U.test(e)),r}var t,n,r,i,o,s,a,u,l,c,p,f,h,d,g,m,y,v="sizzle"+-new Date,b=e.document,w=0,T=0,C=st(),k=st(),N=st(),E=!1,S=function(e,t){return e===t?(E=!0,0):0},j=typeof undefined,D=1<<31,A={}.hasOwnProperty,L=[],q=L.pop,H=L.push,O=L.push,F=L.slice,P=L.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",W="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",$=W.replace("w","w#"),B="\\["+M+"*("+W+")"+M+"*(?:([*^$|!~]?=)"+M+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+$+")|)|)"+M+"*\\]",I=":("+W+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+B.replace(3,8)+")*)|.*)\\)|)",z=RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=RegExp("^"+M+"*,"+M+"*"),X=RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=RegExp(M+"*[+~]"),Y=RegExp("="+M+"*([^\\]'\"]*)"+M+"*\\]","g"),V=RegExp(I),G=RegExp("^"+$+"$"),J={ID:RegExp("^#("+W+")"),CLASS:RegExp("^\\.("+W+")"),TAG:RegExp("^("+W.replace("w","w*")+")"),ATTR:RegExp("^"+B),PSEUDO:RegExp("^"+I),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:RegExp("^(?:"+R+")$","i"),needsContext:RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Q=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/^(?:input|select|textarea|button)$/i,et=/^h\d$/i,tt=/'|\\/g,nt=RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{O.apply(L=F.call(b.childNodes),b.childNodes),L[b.childNodes.length].nodeType}catch(it){O={apply:L.length?function(e,t){H.apply(e,F.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},n=ot.support={},c=ot.setDocument=function(e){var t=e?e.ownerDocument||e:b,r=t.defaultView;return t!==p&&9===t.nodeType&&t.documentElement?(p=t,f=t.documentElement,h=!s(t),r&&r.attachEvent&&r!==r.top&&r.attachEvent("onbeforeunload",function(){c()}),n.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ut(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=ut(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),n.getById=ut(function(e){return f.appendChild(e).id=v,!t.getElementsByName||!t.getElementsByName(v).length}),n.getById?(i.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==j?t.getElementsByTagName(e):undefined}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},i.find.CLASS=n.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==j&&h?t.getElementsByClassName(e):undefined},g=[],d=[],(n.qsa=Q.test(t.querySelectorAll))&&(ut(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll(":checked").length||d.push(":checked")}),ut(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&d.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")})),(n.matchesSelector=Q.test(m=f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ut(function(e){n.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",I)}),d=d.length&&RegExp(d.join("|")),g=g.length&&RegExp(g.join("|")),y=Q.test(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},S=f.compareDocumentPosition?function(e,r){if(e===r)return E=!0,0;var i=r.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(r);return i?1&i||!n.sortDetached&&r.compareDocumentPosition(e)===i?e===t||y(b,e)?-1:r===t||y(b,r)?1:l?P.call(l,e)-P.call(l,r):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,o=e.parentNode,s=n.parentNode,a=[e],u=[n];if(e===n)return E=!0,0;if(!o||!s)return e===t?-1:n===t?1:o?-1:s?1:l?P.call(l,e)-P.call(l,n):0;if(o===s)return ct(e,n);for(r=e;r=r.parentNode;)a.unshift(r);for(r=n;r=r.parentNode;)u.unshift(r);for(;a[i]===u[i];)i++;return i?ct(a[i],u[i]):a[i]===b?-1:u[i]===b?1:0},t):p},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Y,"='$1']"),!(!n.matchesSelector||!h||g&&g.test(t)||d&&d.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&c(e);var r=i.attrHandle[t.toLowerCase()],o=r&&A.call(i.attrHandle,t.toLowerCase())?r(e,t,!h):undefined;return o===undefined?n.attributes||!h?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null:o},ot.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,o=0;if(E=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(S),E){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=ot.selectors={cacheLength:50,createPseudo:at,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return J.CHILD.test(e[0])?null:(e[3]&&e[4]!==undefined?e[2]=e[4]:n&&V.test(n)&&(t=gt(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0
}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,h,d,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,y=a&&t.nodeName.toLowerCase(),x=!u&&!a;if(m){if(o){for(;g;){for(p=t;p=p[g];)if(a?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;d=g="only"===e&&!d&&"nextSibling"}return!0}if(d=[s?m.firstChild:m.lastChild],s&&x){for(c=m[v]||(m[v]={}),l=c[e]||[],h=l[0]===w&&l[1],f=l[0]===w&&l[2],p=h&&m.childNodes[h];p=++h&&p&&p[g]||(f=h=0)||d.pop();)if(1===p.nodeType&&++f&&p===t){c[e]=[w,h,f];break}}else if(x&&(l=(t[v]||(t[v]={}))[e])&&l[0]===w)f=l[1];else for(;(p=++h&&p&&p[g]||(f=h=0)||d.pop())&&((a?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++f||(x&&((p[v]||(p[v]={}))[e]=[w,f]),p!==t)););return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[v]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){for(var i,o=r(e,t),s=o.length;s--;)i=P.call(e,o[s]),e[i]=!(n[i]=o[s])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(z,"$1"));return r[v]?at(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return G.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return et.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[0>n?n+t:n]}),even:ht(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:ht(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}},i.pseudos.nth=i.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=pt(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=ft(t);dt.prototype=i.filters=i.pseudos,i.setFilters=new dt,a=ot.compile=function(e,t){var n,r=[],i=[],o=N[e+" "];if(!o){for(t||(t=gt(e)),n=t.length;n--;)o=wt(t[n]),o[v]?r.push(o):i.push(o);o=N(e,Tt(i,r))}return o},n.sortStable=v.split("").sort(S).join("")===v,n.detectDuplicates=E,c(),n.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ut(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,t,n){return n?undefined:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?undefined:e.defaultValue}),ut(function(e){return null==e.getAttribute("disabled")})||lt(R,function(e,t,n){var r;return n?undefined:(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}),x.find=ot,x.expr=ot.selectors,x.expr[":"]=x.expr.pseudos,x.unique=ot.uniqueSort,x.text=ot.getText,x.isXMLDoc=ot.isXML,x.contains=ot.contains}(e);var D={};x.Callbacks=function(e){e="string"==typeof e?D[e]||A(e):x.extend({},e);var t,n,r,i,o,s,a=[],u=!e.once&&[],l=function(p){for(t=e.memory&&p,n=!0,s=i||0,i=0,o=a.length,r=!0;a&&o>s;s++)if(a[s].apply(p[0],p[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,a&&(u?u.length&&l(u.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var n=a.length;!function s(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&s(n)})}(arguments),r?o=a.length:t&&(i=n,l(t))}return this},remove:function(){return a&&x.each(arguments,function(e,t){for(var n;(n=x.inArray(t,a,n))>-1;)a.splice(n,1),r&&(o>=n&&o--,s>=n&&s--)}),this},has:function(e){return e?x.inArray(e,a)>-1:!(!a||!a.length)},empty:function(){return a=[],o=0,this},disable:function(){return a=u=t=undefined,this},disabled:function(){return!a},lock:function(){return u=undefined,t||c.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!a||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],r?u.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,o){var s=o[0],a=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var a,u,l,t=0,n=d.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),s=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--i||o.resolveWith(t,n)}};if(r>1)for(a=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(s(t,l,n)).fail(o.reject).progress(s(t,u,a)):--i;return i||o.resolveWith(l,n),o.promise()}}),x.support=function(t){var n=o.createElement("input"),r=o.createDocumentFragment(),i=o.createElement("div"),s=o.createElement("select"),a=s.appendChild(o.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=a.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!a.disabled,n=o.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),r.appendChild(n),t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===i.style.backgroundClip,x(function(){var n,r,s="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",a=o.getElementsByTagName("body")[0];a&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(i),i.innerHTML="",i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",x.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===i.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,r=i.appendChild(o.createElement("div")),r.style.cssText=i.style.cssText=s,r.style.marginRight=r.style.width="0",i.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),a.removeChild(n))}),t):t}({});var L,q,H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,O=/([A-Z])/g;F.uid=1,F.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},F.prototype={key:function(e){if(!F.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=F.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,x.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(x.isEmptyObject(o))x.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return t===undefined?n:n[t]},access:function(e,t,n){var r;return t===undefined||t&&"string"==typeof t&&n===undefined?(r=this.get(e,t),r!==undefined?r:this.get(e,x.camelCase(t))):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),s=this.cache[o];if(t===undefined)this.cache[o]={};else{x.isArray(t)?r=t.concat(t.map(x.camelCase)):(i=x.camelCase(t),t in s?r=[t,i]:(r=i,r=r in s?[r]:r.match(w)||[])),n=r.length;for(;n--;)delete s[r[n]]}},hasData:function(e){return!x.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},L=new F,q=new F,x.extend({acceptData:F.accepts,hasData:function(e){return L.hasData(e)||q.hasData(e)},data:function(e,t,n){return L.access(e,t,n)},removeData:function(e,t){L.remove(e,t)},_data:function(e,t,n){return q.access(e,t,n)},_removeData:function(e,t){q.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,i=this[0],o=0,s=null;if(e===undefined){if(this.length&&(s=L.get(i),1===i.nodeType&&!q.get(i,"hasDataAttrs"))){for(n=i.attributes;n.length>o;o++)r=n[o].name,0===r.indexOf("data-")&&(r=x.camelCase(r.slice(5)),P(i,r,s[r]));q.set(i,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){L.set(this,e)}):x.access(this,function(t){var n,r=x.camelCase(e);if(i&&t===undefined){if(n=L.get(i,e),n!==undefined)return n;if(n=L.get(i,r),n!==undefined)return n;if(n=P(i,r,undefined),n!==undefined)return n}else this.each(function(){var n=L.get(this,r);L.set(this,r,t),-1!==e.indexOf("-")&&n!==undefined&&L.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){L.remove(this,e)})}}),x.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=q.get(e,t),n&&(!r||x.isArray(n)?r=q.access(e,t,x.makeArray(n)):r.push(n)),r||[]):undefined},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),s=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return q.get(e,n)||q.access(e,n,{empty:x.Callbacks("once memory").add(function(){q.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),n>arguments.length?x.queue(this[0],e):t===undefined?this:this.each(function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=x.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";s--;)n=q.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var R,M,W=/[\t\r\n\f]/g,$=/\r/g,B=/^(?:input|select|textarea|button)$/i;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})},addClass:function(e){var t,n,r,i,o,s=0,a=this.length,u="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(W," "):" ")){for(o=0;i=t[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,s=0,a=this.length,u=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(W," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,o=x(this),s=e.match(w)||[];t=s[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===r||"boolean"===n)&&(this.className&&q.set(this,"__className__",this.className),this.className=this.className||e===!1?"":q.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(W," ").indexOf(t)>=0)return!0;return!1},val:function(e){var t,n,r,i=this[0];return arguments.length?(r=x.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,x(this).val()):e,null==i?i="":"number"==typeof i?i+="":x.isArray(i)&&(i=x.map(i,function(e){return null==e?"":e+""})),t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&t.set(this,i,"value")!==undefined||(this.value=i))})):i?(t=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,"string"==typeof n?n.replace($,""):null==n?"":n)):void 0}}),x.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=x.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,t,n){var i,o,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?typeof e.getAttribute===r?x.prop(e,t,n):(1===s&&x.isXMLDoc(e)||(t=t.toLowerCase(),i=x.attrHooks[t]||(x.expr.match.bool.test(t)?M:R)),n===undefined?i&&"get"in i&&null!==(o=i.get(e,t))?o:(o=x.find.attr(e,t),null==o?undefined:o):null!==n?i&&"set"in i&&(o=i.set(e,n,t))!==undefined?o:(e.setAttribute(t,n+""),n):(x.removeAttr(e,t),undefined)):void 0},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)for(;n=o[i++];)r=x.propFix[n]||n,x.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(o=1!==s||!x.isXMLDoc(e),o&&(t=x.propFix[t]||t,i=x.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]):void 0},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||B.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),M={set:function(e,t,n){return t===!1?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var n=x.expr.attrHandle[t]||x.find.attr;x.expr.attrHandle[t]=function(e,t,r){var i=x.expr.attrHandle[t],o=r?undefined:(x.expr.attrHandle[t]=undefined)!=n(e,t,r)?t.toLowerCase():null;return x.expr.attrHandle[t]=i,o}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){return x.isArray(t)?e.checked=x.inArray(x(e).val(),t)>=0:undefined}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var I=/^key/,z=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,X=/^([^.]*)(?:\.(.+)|)$/;x.event={global:{},add:function(e,t,n,i,o){var s,a,u,l,c,p,f,h,d,g,m,y=q.get(e);if(y){for(n.handler&&(s=n,n=s.handler,o=s.selector),n.guid||(n.guid=x.guid++),(l=y.events)||(l=y.events={}),(a=y.handle)||(a=y.handle=function(e){return typeof x===r||e&&x.event.triggered===e.type?undefined:x.event.dispatch.apply(a.elem,arguments)},a.elem=e),t=(t||"").match(w)||[""],c=t.length;c--;)u=X.exec(t[c])||[],d=m=u[1],g=(u[2]||"").split(".").sort(),d&&(f=x.event.special[d]||{},d=(o?f.delegateType:f.bindType)||d,f=x.event.special[d]||{},p=x.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&x.expr.match.needsContext.test(o),namespace:g.join(".")},s),(h=l[d])||(h=l[d]=[],h.delegateCount=0,f.setup&&f.setup.call(e,i,g,a)!==!1||e.addEventListener&&e.addEventListener(d,a,!1)),f.add&&(f.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,p):h.push(p),x.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var o,s,a,u,l,c,p,f,h,d,g,m=q.hasData(e)&&q.get(e);if(m&&(u=m.events)){for(t=(t||"").match(w)||[""],l=t.length;l--;)if(a=X.exec(t[l])||[],h=g=a[1],d=(a[2]||"").split(".").sort(),h){for(p=x.event.special[h]||{},h=(r?p.delegateType:p.bindType)||h,f=u[h]||[],a=a[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)c=f[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,p.remove&&p.remove.call(e,c));s&&!f.length&&(p.teardown&&p.teardown.call(e,d,m.handle)!==!1||x.removeEvent(e,h,m.handle),delete u[h])}else for(h in u)x.event.remove(e,h+t[l],n,r,!0);x.isEmptyObject(u)&&(delete m.handle,q.remove(e,"events"))}},trigger:function(t,n,r,i){var s,a,u,l,c,p,f,h=[r||o],d=y.call(t,"type")?t.type:t,g=y.call(t,"namespace")?t.namespace.split("."):[];if(a=u=r=r||o,3!==r.nodeType&&8!==r.nodeType&&!_.test(d+x.event.triggered)&&(d.indexOf(".")>=0&&(g=d.split("."),d=g.shift(),g.sort()),c=0>d.indexOf(":")&&"on"+d,t=t[x.expando]?t:new x.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=g.join("."),t.namespace_re=t.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=r),n=null==n?[t]:x.makeArray(n,[t]),f=x.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!x.isWindow(r)){for(l=f.delegateType||d,_.test(l+d)||(a=a.parentNode);a;a=a.parentNode)h.push(a),u=a;u===(r.ownerDocument||o)&&h.push(u.defaultView||u.parentWindow||e)}for(s=0;(a=h[s++])&&!t.isPropagationStopped();)t.type=s>1?l:f.bindType||d,p=(q.get(a,"events")||{})[t.type]&&q.get(a,"handle"),p&&p.apply(a,n),p=c&&a[c],p&&x.acceptData(a)&&p.apply&&p.apply(a,n)===!1&&t.preventDefault();return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(h.pop(),n)!==!1||!x.acceptData(r)||c&&x.isFunction(r[d])&&!x.isWindow(r)&&(u=r[c],u&&(r[c]=null),x.event.triggered=d,r[d](),x.event.triggered=undefined,u&&(r[c]=u)),t.result}},dispatch:function(e){e=x.event.fix(e);var t,n,r,i,o,s=[],a=d.call(arguments),u=(q.get(this,"events")||{})[e.type]||[],l=x.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=x.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),r!==undefined&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",r[i]===undefined&&(r[i]=o.needsContext?x(i,this).index(u)>=0:x.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return t.length>a&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||o,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||s===undefined||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,s=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=z.test(i)?this.mouseHooks:I.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new x.Event(s),t=r.length;t--;)n=r[t],e[n]=s[n];return e.target||(e.target=o),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==V()&&this.focus?(this.focus(),!1):undefined},delegateType:"focusin"},blur:{trigger:function(){return this===V()&&this.blur?(this.blur(),!1):undefined},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&x.nodeName(this,"input")?(this.click(),!1):undefined},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},x.Event=function(e,t){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?U:Y):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,undefined):new x.Event(e,t)},x.Event.prototype={isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=U,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=U,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=U,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=undefined);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=undefined):null==r&&("string"==typeof t?(r=n,n=undefined):(r=n,n=t,t=undefined)),r===!1)r=Y;else if(!r)return this;return 1===i&&(o=r,r=function(e){return x().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=x.guid++)),this.each(function(){x.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=undefined),n===!1&&(n=Y),this.each(function(){x.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?x.event.trigger(e,t,n,!0):undefined}});var G=/^.[^:#\[\.,]*$/,J=/^(?:parents|prev(?:Until|All))/,Q=x.expr.match.needsContext,K={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(x.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(et(this,e||[],!0))},filter:function(e){return this.pushStack(et(this,e||[],!1))},is:function(e){return!!et(this,"string"==typeof e&&Q.test(e)?x(e):e||[],!1).length},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=Q.test(e)||"string"!=typeof e?x(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(s?s.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(x(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return Z(e,"nextSibling")},prev:function(e){return Z(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return e.contentDocument||x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(K[e]||x.unique(i),J.test(e)&&i.reverse()),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,t,n){for(var r=[],i=n!==undefined;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&x(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,nt=/<([\w:]+)/,rt=/<|&#?\w+;/,it=/<(?:script|style|link)/i,ot=/^(?:checkbox|radio)$/i,st=/checked\s*(?:[^=]|=\s*.checked.)/i,at=/^$|\/(?:java|ecma)script/i,ut=/^true\/(.*)/,lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ct={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ct.optgroup=ct.option,ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===undefined?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=pt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=pt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?x.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(mt(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&dt(mt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(mt(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!it.test(e)&&!ct[(nt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(tt,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(x.cleanData(mt(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=f.apply([],e);var r,i,o,s,a,u,l=0,c=this.length,p=this,h=c-1,d=e[0],g=x.isFunction(d);if(g||!(1>=c||"string"!=typeof d||x.support.checkClone)&&st.test(d))return this.each(function(r){var i=p.eq(r);g&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(r=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(o=x.map(mt(r,"script"),ft),s=o.length;c>l;l++)a=r,l!==h&&(a=x.clone(a,!0,!0),s&&x.merge(o,mt(a,"script"))),t.call(this[l],a,l);if(s)for(u=o[o.length-1].ownerDocument,x.map(o,ht),l=0;s>l;l++)a=o[l],at.test(a.type||"")&&!q.access(a,"globalEval")&&x.contains(u,a)&&(a.src?x._evalUrl(a.src):x.globalEval(a.textContent.replace(lt,"")))}return this}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=[],i=x(e),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),x(i[s])[t](n),h.apply(r,n.get());return this.pushStack(r)
}}),x.extend({clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=x.contains(e.ownerDocument,e);if(!(x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(s=mt(a),o=mt(e),r=0,i=o.length;i>r;r++)yt(o[r],s[r]);if(t)if(n)for(o=o||mt(e),s=s||mt(a),r=0,i=o.length;i>r;r++)gt(o[r],s[r]);else gt(e,a);return s=mt(a,"script"),s.length>0&&dt(s,!u&&mt(e,"script")),a},buildFragment:function(e,t,n,r){for(var i,o,s,a,u,l,c=0,p=e.length,f=t.createDocumentFragment(),h=[];p>c;c++)if(i=e[c],i||0===i)if("object"===x.type(i))x.merge(h,i.nodeType?[i]:i);else if(rt.test(i)){for(o=o||f.appendChild(t.createElement("div")),s=(nt.exec(i)||["",""])[1].toLowerCase(),a=ct[s]||ct._default,o.innerHTML=a[1]+i.replace(tt,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;x.merge(h,o.childNodes),o=f.firstChild,o.textContent=""}else h.push(t.createTextNode(i));for(f.textContent="",c=0;i=h[c++];)if((!r||-1===x.inArray(i,r))&&(u=x.contains(i.ownerDocument,i),o=mt(f.appendChild(i),"script"),u&&dt(o),n))for(l=0;i=o[l++];)at.test(i.type||"")&&n.push(i);return f},cleanData:function(e){for(var t,n,r,i,o,s,a=x.event.special,u=0;(n=e[u])!==undefined;u++){if(F.accepts(n)&&(o=n[q.expando],o&&(t=q.cache[o]))){if(r=Object.keys(t.events||{}),r.length)for(s=0;(i=r[s])!==undefined;s++)a[i]?x.event.remove(n,i):x.removeEvent(n,i,t.handle);q.cache[o]&&delete q.cache[o]}delete L.cache[n[L.expando]]}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),x.fn.extend({wrapAll:function(e){var t;return x.isFunction(e)?this.each(function(t){x(this).wrapAll(e.call(this,t))}):(this[0]&&(t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var vt,xt,bt=/^(none|table(?!-c[ea]).+)/,wt=/^margin/,Tt=RegExp("^("+b+")(.*)$","i"),Ct=RegExp("^("+b+")(?!px)[a-z%]+$","i"),kt=RegExp("^([+-])=("+b+")","i"),Nt={BODY:"block"},Et={position:"absolute",visibility:"hidden",display:"block"},St={letterSpacing:0,fontWeight:400},jt=["Top","Right","Bottom","Left"],Dt=["Webkit","O","Moz","ms"];x.fn.extend({css:function(e,t){return x.access(this,function(e,t,n){var r,i,o={},s=0;if(x.isArray(t)){for(r=qt(e),i=t.length;i>s;s++)o[t[s]]=x.css(e,t[s],!1,r);return o}return n!==undefined?x.style(e,t,n):x.css(e,t)},e,t,arguments.length>1)},show:function(){return Ht(this,!0)},hide:function(){return Ht(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Lt(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=vt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=x.camelCase(t),u=e.style;return t=x.cssProps[a]||(x.cssProps[a]=At(u,a)),s=x.cssHooks[t]||x.cssHooks[a],n===undefined?s&&"get"in s&&(i=s.get(e,!1,r))!==undefined?i:u[t]:(o=typeof n,"string"===o&&(i=kt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(x.css(e,t)),o="number"),null==n||"number"===o&&isNaN(n)||("number"!==o||x.cssNumber[a]||(n+="px"),x.support.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&(n=s.set(e,n,r))===undefined||(u[t]=n)),undefined)}},css:function(e,t,n,r){var i,o,s,a=x.camelCase(t);return t=x.cssProps[a]||(x.cssProps[a]=At(e.style,a)),s=x.cssHooks[t]||x.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),i===undefined&&(i=vt(e,t,r)),"normal"===i&&t in St&&(i=St[t]),""===n||n?(o=parseFloat(i),n===!0||x.isNumeric(o)?o||0:i):i}}),vt=function(e,t,n){var r,i,o,s=n||qt(e),a=s?s.getPropertyValue(t)||s[t]:undefined,u=e.style;return s&&(""!==a||x.contains(e.ownerDocument,e)||(a=x.style(e,t)),Ct.test(a)&&wt.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=s.width,u.width=r,u.minWidth=i,u.maxWidth=o)),a},x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&bt.test(x.css(e,"display"))?x.swap(e,Et,function(){return Pt(e,t,r)}):Pt(e,t,r):undefined},set:function(e,n,r){var i=r&&qt(e);return Ot(e,n,r?Ft(e,t,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,t){return t?x.swap(e,{display:"inline-block"},vt,[e,"marginRight"]):undefined}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,t){x.cssHooks[t]={get:function(e,n){return n?(n=vt(e,t),Ct.test(n)?x(e).position()[t]+"px":n):undefined}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+jt[r]+t]=o[r]||o[r-2]||o[0];return i}},wt.test(e)||(x.cssHooks[e+t].set=Ot)});var Wt=/%20/g,$t=/\[\]$/,Bt=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,zt=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&zt.test(this.nodeName)&&!It.test(e)&&(this.checked||!ot.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(Bt,"\r\n")}}):{name:t.name,value:n.replace(Bt,"\r\n")}}).get()}}),x.param=function(e,t){var n,r=[],i=function(e,t){t=x.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined&&(t=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){i(this.name,this.value)});else for(n in e)_t(n,e[n],t,i);return r.join("&").replace(Wt,"+")},x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Xt,Ut,Yt=x.now(),Vt=/\?/,Gt=/#.*$/,Jt=/([?&])_=[^&]*/,Qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Kt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Zt=/^(?:GET|HEAD)$/,en=/^\/\//,tn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,nn=x.fn.load,rn={},on={},sn="*/".concat("*");try{Ut=i.href}catch(an){Ut=o.createElement("a"),Ut.href="",Ut=Ut.href}Xt=tn.exec(Ut.toLowerCase())||[],x.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>=0&&(r=e.slice(a),e=e.slice(0,a)),x.isFunction(t)?(n=t,t=undefined):t&&"object"==typeof t&&(i="POST"),s.length>0&&x.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ut,type:"GET",isLocal:Kt.test(Xt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?cn(cn(e,x.ajaxSettings),t):cn(x.ajaxSettings,e)},ajaxPrefilter:un(rn),ajaxTransport:un(on),ajax:function(e,t){function k(e,t,o,a){var l,m,y,b,w,C=t;2!==v&&(v=2,s&&clearTimeout(s),n=undefined,i=a||"",T.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(b=pn(c,T,o)),b=fn(c,b,T,l),l?(c.ifModified&&(w=T.getResponseHeader("Last-Modified"),w&&(x.lastModified[r]=w),w=T.getResponseHeader("etag"),w&&(x.etag[r]=w)),204===e||"HEAD"===c.type?C="nocontent":304===e?C="notmodified":(C=b.state,m=b.data,y=b.error,l=!y)):(y=C,(e||!C)&&(C="error",0>e&&(e=0))),T.status=e,T.statusText=(t||C)+"",l?h.resolveWith(p,[m,C,T]):h.rejectWith(p,[T,C,y]),T.statusCode(g),g=undefined,u&&f.trigger(l?"ajaxSuccess":"ajaxError",[T,c,l?m:y]),d.fireWith(p,[T,C]),u&&(f.trigger("ajaxComplete",[T,c]),--x.active||x.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,r,i,o,s,a,u,l,c=x.ajaxSetup({},t),p=c.context||c,f=c.context&&(p.nodeType||p.jquery)?x(p):x.event,h=x.Deferred(),d=x.Callbacks("once memory"),g=c.statusCode||{},m={},y={},v=0,b="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===v){if(!o)for(o={};t=Qt.exec(i);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===v?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return v||(e=y[n]=y[n]||e,m[e]=t),this},overrideMimeType:function(e){return v||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>v)for(t in e)g[t]=[g[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),k(0,t),this}};if(h.promise(T).complete=d.add,T.success=T.done,T.error=T.fail,c.url=((e||c.url||Ut)+"").replace(Gt,"").replace(en,Xt[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=x.trim(c.dataType||"*").toLowerCase().match(w)||[""],null==c.crossDomain&&(a=tn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===Xt[1]&&a[2]===Xt[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(Xt[3]||("http:"===Xt[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=x.param(c.data,c.traditional)),ln(rn,c,t,T),2===v)return T;u=c.global,u&&0===x.active++&&x.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Zt.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(Vt.test(r)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Jt.test(r)?r.replace(Jt,"$1_="+Yt++):r+(Vt.test(r)?"&":"?")+"_="+Yt++)),c.ifModified&&(x.lastModified[r]&&T.setRequestHeader("If-Modified-Since",x.lastModified[r]),x.etag[r]&&T.setRequestHeader("If-None-Match",x.etag[r])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&T.setRequestHeader("Content-Type",c.contentType),T.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+sn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)T.setRequestHeader(l,c.headers[l]);if(c.beforeSend&&(c.beforeSend.call(p,T,c)===!1||2===v))return T.abort();b="abort";for(l in{success:1,error:1,complete:1})T[l](c[l]);if(n=ln(on,c,t,T)){T.readyState=1,u&&f.trigger("ajaxSend",[T,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){T.abort("timeout")},c.timeout));try{v=1,n.send(m,k)}catch(C){if(!(2>v))throw C;k(-1,C)}}else k(-1,"No Transport");return T},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,undefined,t,"script")}}),x.each(["get","post"],function(e,t){x[t]=function(e,n,r,i){return x.isFunction(n)&&(i=i||r,r=n,n=undefined),x.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=x("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){n&&n()}}}});var hn=[],dn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=hn.pop()||x.expando+"_"+Yt++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(dn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&dn.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=x.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(dn,"$1"+i):t.jsonp!==!1&&(t.url+=(Vt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||x.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,hn.push(i)),s&&x.isFunction(o)&&o(s[0]),s=o=undefined}),"script"):undefined}),x.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var gn=x.ajaxSettings.xhr(),mn={0:200,1223:204},yn=0,vn={};e.ActiveXObject&&x(e).on("unload",function(){for(var e in vn)vn[e]();vn=undefined}),x.support.cors=!!gn&&"withCredentials"in gn,x.support.ajax=gn=!!gn,x.ajaxTransport(function(e){var t;return x.support.cors||gn&&!e.crossDomain?{send:function(n,r){var i,o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete vn[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status||404,s.statusText):r(mn[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:undefined,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=vn[o=yn++]=t("abort"),s.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}:undefined});var xn,bn,wn=/^(?:toggle|show|hide)$/,Tn=RegExp("^(?:([+-])=|)("+b+")([a-z%]*)$","i"),Cn=/queueHooks$/,kn=[An],Nn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Tn.exec(t),o=i&&i[3]||(x.cssNumber[e]?"":"px"),s=(x.cssNumber[e]||"px"!==o&&+r)&&Tn.exec(x.css(n.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,x.style(n.elem,e,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};x.Animation=x.extend(jn,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],Nn[n]=Nn[n]||[],Nn[n].unshift(t)},prefilter:function(e,t){t?kn.unshift(e):kn.push(e)}}),x.Tween=Ln,Ln.prototype={constructor:Ln,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=Ln.propHooks[this.prop];return e&&e.get?e.get(this):Ln.propHooks._default.get(this)},run:function(e){var t,n=Ln.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ln.propHooks._default.set(this),this}},Ln.prototype.init.prototype=Ln.prototype,Ln.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ln.propHooks.scrollTop=Ln.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(qn(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Lt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),s=function(){var t=jn(this,x.extend({},e),o);(i||q.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=x.timers,s=q.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&Cn.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,s=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),x.each({slideDown:qn("show"),slideUp:qn("hide"),slideToggle:qn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=Ln.prototype.init,x.fx.tick=function(){var e,t=x.timers,n=0;for(xn=x.now();t.length>n;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||x.fx.stop(),xn=undefined},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){bn||(bn=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(bn),bn=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===undefined?this:this.each(function(t){x.offset.setOffset(this,e,t)});var t,n,i=this[0],o={top:0,left:0},s=i&&i.ownerDocument;return s?(t=s.documentElement,x.contains(t,i)?(typeof i.getBoundingClientRect!==r&&(o=i.getBoundingClientRect()),n=Hn(s),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o):void 0},x.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=x.css(e,"position"),p=x(e),f={};"static"===c&&(e.style.position="relative"),a=p.offset(),o=x.css(e,"top"),u=x.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=p.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),x.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(f.top=t.top-a.top+s),null!=t.left&&(f.left=t.left-a.left+i),"using"in t?t.using.call(e,f):p.css(f)}},x.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===x.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(r=e.offset()),r.top+=x.css(e[0],"borderTopWidth",!0),r.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-x.css(n,"marginTop",!0),left:t.left-r.left-x.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||s;e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position");)e=e.offsetParent;return e||s})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;x.fn[t]=function(i){return x.access(this,function(t,i,o){var s=Hn(t);return o===undefined?s?s[n]:t[i]:(s?s.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o,undefined)},t,i,arguments.length,null)}}),x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){x.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return x.access(this,function(t,n,r){var i;return x.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?x.css(t,n,s):x.style(t,n,r,s)},t,o?r:undefined,o,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=x)}(window),/*! jQuery UI - v1.11.2 - 2014-10-19
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, resizable.js, selectable.js, sortable.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, menu.js, progressbar.js, selectmenu.js, slider.js, spinner.js, tabs.js, tooltip.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=u.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=u.call(arguments,1),r=this;return n=!a&&o.length?e.widget.extend.apply(null,[n].concat(o)):n,a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+n+"'")}):this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))}),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,M=e.extend({},y),C=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?M.left-=d:"center"===n.my[0]&&(M.left-=d/2),"bottom"===n.my[1]?M.top-=c:"center"===n.my[1]&&(M.top-=c/2),M.left+=C[0],M.top+=C[1],a||(M.left=h(M.left),M.top=h(M.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](M,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+C[0],p[1]+C[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-M.left,i=t+m-d,s=v.top-M.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:M.left,top:M.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(M,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,e.top+p+f+m>u&&(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,e.top+p+f+m>d&&(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}
},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n})),n?(a.isOver||(a.isOver=1,a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return a>=l&&d>=r&&o>=u&&c>=h;case"intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case"touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=this.element.children(this.handles[i]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},h=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):e.each(n.alsoResize,function(e,t){h(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=u-t.height,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.selectable",e.ui.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()
},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.accordion",{version:"1.11.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),n=s.uniqueId().attr("id");t.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=n.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)
},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?e():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,i){var s,n,a,o=this,r=0,h=e.length&&(!t.length||e.index()<t.index()),l=this.options.animate||{},u=h&&l.down||l,d=function(){o._toggleComplete(i)};return"number"==typeof u&&(a=u),"string"==typeof u&&(n=u),n=n||u.easing||l.easing,a=a||u.duration||l.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:n,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:a,easing:n,complete:d,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?r+=i.now:"content"!==o.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-r),r=0)}}),void 0):t.animate(this.hideProps,a,n,d):e.animate(this.showProps,a,n,d)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,s,n,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,s=this.previousFilter||"",n=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-n}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.2"}});var v;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)
},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;a=this._getDaysInMonth(m,g-1),!(a>=v);)g++,v-=a;if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,M,C,N,A,P,I,z,H,F,E,O,j,W,L=new Date,R=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),J=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),U=this._get(e,"stepMonths"),Q=1!==K[0]||1!==K[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-K[0]*K[1]+1,$.getDate())),t=X&&X>t?X:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-U,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+U,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:R,o=q?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;K[0]>w;w++){for(k="",this.maxRows=4,T=0;K[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",M="",Q){if(M+="<div class='ui-datepicker-group",K[1]>1)switch(T){case 0:M+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:M+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-datepicker-group-middle",S=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,X,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+u)%7,C+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+c[N]+"'>"+p[N]+"</span></th>";for(M+=C+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),z=Q?this.maxRows>I?this.maxRows:I:I,this.maxRows=z,H=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;z>F;F++){for(M+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(H)+"</td>":"",x=0;7>x;x++)O=g?g.apply(e.input?e.input[0]:null,[H]):[!0,""],j=H.getMonth()!==Z,W=j&&!y||!O[0]||X&&X>H||$&&H>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(H.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===H.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+O[1]+(H.getTime()===G.getTime()?" "+this._currentClass:"")+(H.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===R.getTime()?" ui-state-highlight":"")+(H.getTime()===G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);M+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),M+="</tbody></table>"+(Q?"</div>"+(K[0]>0&&T===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=M}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.2",e.datepicker,e.widget("ui.dialog",{version:"1.11.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)
}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.progressbar",{version:"1.11.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectmenu",{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this,i=this.element.attr("tabindex");this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:i||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var s=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&s.index!==t.focusIndex&&(t._trigger("focus",e,{item:s}),t.isOpen||t._select(s,e)),t.focusIndex=s.index,t.button.attr("aria-activedescendant",t.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,i){var s=this,n="";e.each(i,function(i,a){a.optgroup!==n&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:a.optgroup}).appendTo(t),n=a.optgroup),s._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var s=e("<li>");return i.disabled&&s.addClass("ui-state-disabled"),this._setText(s,i.label),s.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),n+=":not(.ui-state-disabled)"),s="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](n).eq(-1):i[e+"All"](n).eq(0),s.length&&this.menuInstance.focus(t,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var i=[];t.each(function(t,s){var n=e(s),a=n.parent("optgroup");i.push({element:n,index:t,value:n.attr("value"),label:n.text(),optgroup:a.attr("label")||"",disabled:a.prop("disabled")||n.prop("disabled")})}),this.items=i},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-a.width()/2,top:t.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=(this.options.max-this._valueMin())%this.options.step;this.max=this.options.max-e},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.spinner",{version:"1.11.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:h(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:h(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:h(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(h(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)
}catch(n){}return t.hash.length>1&&i===s}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,n){return e(n).attr("aria-controls")===s?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,s=this.anchors,n=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var n,a,o,r=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(n=s.hash,o=n.substring(1),a=t.element.find(t._sanitizeSelector(n))):(o=h.attr("aria-controls")||e({}).uniqueId()[0].id,n="#"+o,a=t.element.find(n),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":o,"aria-labelledby":r}),a.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?e():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:r?e():a,newPanel:h};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),t),this._toggle(t,u))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){o.html(e),s._trigger("load",i,r)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.widget("ui.tooltip",{version:"1.11.2",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t.element)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s.element[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){e.data("ui-tooltip-open")&&n._delay(function(){t&&(t.type=a),this._open(t,e,i)})}),i&&this._open(t,e,i),void 0)},_open:function(t,i,s){function n(e){u.of=e,o.is(":hidden")||o.position(u)}var a,o,r,h,l,u=e.extend({},this.options.position);if(s){if(a=this._find(i))return a.tooltip.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),o=a.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(l=s.clone(),l.removeAttr("id").find("[id]").removeAttr("id")):l=s,e("<div>").html(l).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){o.is(":visible")&&(n(u.of),clearInterval(h))},e.fx.interval)),this._trigger("open",t,{tooltip:o}),r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0)}}},i[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(o)}),t&&"mouseover"!==t.type||(r.mouseleave="close"),t&&"focusin"!==t.type||(r.focusout="close"),this._on(!0,i,r)}},close:function(t){var i,s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);a&&(i=a.tooltip,a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),a.closing=!0,this._trigger("close",t,{tooltip:i}),a.hiding||(a.closing=!1)))},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur"),a=s.element;n.target=n.currentTarget=a[0],t.close(n,!0),e("#"+i).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}});var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],n=s._rgba=o._rgba,!1):t}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s):a[i]}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c="array"),"string"===c?this.parse(s(n)||a._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):"object"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if("alpha"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===o?u:("function"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+"Class"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return"boolean"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.2",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(y+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(y+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(o,t.mode||"hide"),d=t.direction||"up",c=r.test(d),p=c?"height":"width",f=c?"top":"left",m=h.test(d),g={},v="show"===u;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i()}})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"effect"),l="hide"===h,u="show"===h,d=t.direction||"up",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=o.queue(),_=b.length;for((u||l)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"hide"),l="show"===h,u=t.direction||"vertical",d="vertical"===u,c=d?"height":"width",p=d?"top":"left",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(n,t.mode||"hide"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===u?-s:s),d[l]=(r?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)
},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),h="show"===r,l="hide"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||("show"===p?b:s),o.to=t.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),c=c.concat(["marginLeft","marginRight"]),l=r.concat(d).concat(c),o.find("*[width]").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||"both",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"hide"),a="hide"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||"show"),o="show"===a,r="hide"===a,h=o||"hide"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?"-=":"+=")+h,m[c]=(p?"+=":"-=")+2*h,g[c]=(p?"-=":"+=")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(n,t.mode||"show"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(r?u?"+=":"-=":u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a="fixed"===n.css("position"),o=e("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})}}),/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery),function($,undefined){$.rails!==undefined&&$.error("jquery-ujs has already been loaded!");var rails,$document=$(document);$.rails=rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(xhr){var token=$('meta[name="csrf-token"]').attr("content");token&&xhr.setRequestHeader("X-CSRF-Token",token)},refreshCSRFTokens:function(){var csrfToken=$("meta[name=csrf-token]").attr("content"),csrfParam=$("meta[name=csrf-param]").attr("content");$('form input[name="'+csrfParam+'"]').val(csrfToken)},fire:function(obj,name,data){var event=$.Event(name);return obj.trigger(event,data),event.result!==!1},confirm:function(message){return confirm(message)},ajax:function(options){return $.ajax(options)},href:function(element){return element[0].href},handleRemote:function(element){var method,url,data,withCredentials,dataType,options;if(rails.fire(element,"ajax:before")){if(withCredentials=element.data("with-credentials")||null,dataType=element.data("type")||$.ajaxSettings&&$.ajaxSettings.dataType,element.is("form")){method=element.attr("method"),url=element.attr("action"),data=element.serializeArray();var button=element.data("ujs:submit-button");button&&(data.push(button),element.data("ujs:submit-button",null))}else element.is(rails.inputChangeSelector)?(method=element.data("method"),url=element.data("url"),data=element.serialize(),element.data("params")&&(data=data+"&"+element.data("params"))):element.is(rails.buttonClickSelector)?(method=element.data("method")||"get",url=element.data("url"),data=element.serialize(),element.data("params")&&(data=data+"&"+element.data("params"))):(method=element.data("method"),url=rails.href(element),data=element.data("params")||null);return options={type:method||"GET",data:data,dataType:dataType,beforeSend:function(xhr,settings){return settings.dataType===undefined&&xhr.setRequestHeader("accept","*/*;q=0.5, "+settings.accepts.script),rails.fire(element,"ajax:beforeSend",[xhr,settings])?(element.trigger("ajax:send",xhr),void 0):!1},success:function(data,status,xhr){element.trigger("ajax:success",[data,status,xhr])},complete:function(xhr,status){element.trigger("ajax:complete",[xhr,status])},error:function(xhr,status,error){element.trigger("ajax:error",[xhr,status,error])},crossDomain:rails.isCrossDomain(url)},withCredentials&&(options.xhrFields={withCredentials:withCredentials}),url&&(options.url=url),rails.ajax(options)}return!1},isCrossDomain:function(url){var originAnchor=document.createElement("a");originAnchor.href=location.href;var urlAnchor=document.createElement("a");try{return urlAnchor.href=url,urlAnchor.href=urlAnchor.href,!urlAnchor.protocol||!urlAnchor.host||originAnchor.protocol+"//"+originAnchor.host!=urlAnchor.protocol+"//"+urlAnchor.host}catch(e){return!0}},handleMethod:function(link){var href=rails.href(link),method=link.data("method"),target=link.attr("target"),csrfToken=$("meta[name=csrf-token]").attr("content"),csrfParam=$("meta[name=csrf-param]").attr("content"),form=$('<form method="post" action="'+href+'"></form>'),metadataInput='<input name="_method" value="'+method+'" type="hidden" />';csrfParam===undefined||csrfToken===undefined||rails.isCrossDomain(href)||(metadataInput+='<input name="'+csrfParam+'" value="'+csrfToken+'" type="hidden" />'),target&&form.attr("target",target),form.hide().append(metadataInput).appendTo("body"),form.submit()},formElements:function(form,selector){return form.is("form")?$(form[0].elements).filter(selector):form.find(selector)},disableFormElements:function(form){rails.formElements(form,rails.disableSelector).each(function(){rails.disableFormElement($(this))})},disableFormElement:function(element){var method,replacement;method=element.is("button")?"html":"val",replacement=element.data("disable-with"),element.data("ujs:enable-with",element[method]()),replacement!==undefined&&element[method](replacement),element.prop("disabled",!0)},enableFormElements:function(form){rails.formElements(form,rails.enableSelector).each(function(){rails.enableFormElement($(this))})},enableFormElement:function(element){var method=element.is("button")?"html":"val";element.data("ujs:enable-with")&&element[method](element.data("ujs:enable-with")),element.prop("disabled",!1)},allowAction:function(element){var callback,message=element.data("confirm"),answer=!1;return message?(rails.fire(element,"confirm")&&(answer=rails.confirm(message),callback=rails.fire(element,"confirm:complete",[answer])),answer&&callback):!0},blankInputs:function(form,specifiedSelector,nonBlank){var input,valueToCheck,inputs=$(),selector=specifiedSelector||"input,textarea",allInputs=form.find(selector);return allInputs.each(function(){if(input=$(this),valueToCheck=input.is("input[type=checkbox],input[type=radio]")?input.is(":checked"):input.val(),!valueToCheck==!nonBlank){if(input.is("input[type=radio]")&&allInputs.filter('input[type=radio]:checked[name="'+input.attr("name")+'"]').length)return!0;inputs=inputs.add(input)}}),inputs.length?inputs:!1},nonBlankInputs:function(form,specifiedSelector){return rails.blankInputs(form,specifiedSelector,!0)},stopEverything:function(e){return $(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(element){var replacement=element.data("disable-with");element.data("ujs:enable-with",element.html()),replacement!==undefined&&element.html(replacement),element.bind("click.railsDisable",function(e){return rails.stopEverything(e)})},enableElement:function(element){element.data("ujs:enable-with")!==undefined&&(element.html(element.data("ujs:enable-with")),element.removeData("ujs:enable-with")),element.unbind("click.railsDisable")}},rails.fire($document,"rails:attachBindings")&&($.ajaxPrefilter(function(options,originalOptions,xhr){options.crossDomain||rails.CSRFProtection(xhr)}),$document.delegate(rails.linkDisableSelector,"ajax:complete",function(){rails.enableElement($(this))}),$document.delegate(rails.buttonDisableSelector,"ajax:complete",function(){rails.enableFormElement($(this))}),$document.delegate(rails.linkClickSelector,"click.rails",function(e){var link=$(this),method=link.data("method"),data=link.data("params"),metaClick=e.metaKey||e.ctrlKey;if(!rails.allowAction(link))return rails.stopEverything(e);if(!metaClick&&link.is(rails.linkDisableSelector)&&rails.disableElement(link),link.data("remote")!==undefined){if(metaClick&&(!method||"GET"===method)&&!data)return!0;var handleRemote=rails.handleRemote(link);return handleRemote===!1?rails.enableElement(link):handleRemote.error(function(){rails.enableElement(link)}),!1}return link.data("method")?(rails.handleMethod(link),!1):void 0}),$document.delegate(rails.buttonClickSelector,"click.rails",function(e){var button=$(this);if(!rails.allowAction(button))return rails.stopEverything(e);button.is(rails.buttonDisableSelector)&&rails.disableFormElement(button);var handleRemote=rails.handleRemote(button);return handleRemote===!1?rails.enableFormElement(button):handleRemote.error(function(){rails.enableFormElement(button)}),!1}),$document.delegate(rails.inputChangeSelector,"change.rails",function(e){var link=$(this);return rails.allowAction(link)?(rails.handleRemote(link),!1):rails.stopEverything(e)}),$document.delegate(rails.formSubmitSelector,"submit.rails",function(e){var blankRequiredInputs,nonBlankFileInputs,form=$(this),remote=form.data("remote")!==undefined;if(!rails.allowAction(form))return rails.stopEverything(e);if(form.attr("novalidate")==undefined&&(blankRequiredInputs=rails.blankInputs(form,rails.requiredInputSelector),blankRequiredInputs&&rails.fire(form,"ajax:aborted:required",[blankRequiredInputs])))return rails.stopEverything(e);if(remote){if(nonBlankFileInputs=rails.nonBlankInputs(form,rails.fileInputSelector)){setTimeout(function(){rails.disableFormElements(form)},13);var aborted=rails.fire(form,"ajax:aborted:file",[nonBlankFileInputs]);return aborted||setTimeout(function(){rails.enableFormElements(form)},13),aborted}return rails.handleRemote(form),!1}setTimeout(function(){rails.disableFormElements(form)},13)}),$document.delegate(rails.formInputClickSelector,"click.rails",function(event){var button=$(this);if(!rails.allowAction(button))return rails.stopEverything(event);var name=button.attr("name"),data=name?{name:name,value:button.val()}:null;button.closest("form").data("ujs:submit-button",data)}),$document.delegate(rails.formSubmitSelector,"ajax:send.rails",function(event){this==event.target&&rails.disableFormElements($(this))}),$document.delegate(rails.formSubmitSelector,"ajax:complete.rails",function(event){this==event.target&&rails.enableFormElements($(this))}),$(function(){rails.refreshCSRFTokens()}))}(jQuery),/*!
 * Copyright 2012, Chris Wanstrath
 * Released under the MIT License
 * https://github.com/defunkt/jquery-pjax
 */
function($){function fnPjax(selector,container,options){var context=this;return this.on("click.pjax",selector,function(event){var opts=$.extend({},optionsFor(container,options));opts.container||(opts.container=$(this).attr("data-pjax")||context),handleClick(event,opts)})}function handleClick(event,container,options){options=optionsFor(container,options);var link=event.currentTarget;if("A"!==link.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(event.which>1||event.metaKey||event.ctrlKey||event.shiftKey||event.altKey||location.protocol!==link.protocol||location.hostname!==link.hostname||link.hash&&link.href.replace(link.hash,"")===location.href.replace(location.hash,"")||link.href===location.href+"#"||event.isDefaultPrevented())){var defaults={url:link.href,container:$(link).attr("data-pjax"),target:link},opts=$.extend({},defaults,options),clickEvent=$.Event("pjax:click");$(link).trigger(clickEvent,[opts]),clickEvent.isDefaultPrevented()||(pjax(opts),event.preventDefault(),$(link).trigger("pjax:clicked",[opts]))}}function handleSubmit(event,container,options){options=optionsFor(container,options);var form=event.currentTarget;if("FORM"!==form.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var defaults={type:form.method.toUpperCase(),url:form.action,container:$(form).attr("data-pjax"),target:form};if("GET"!==defaults.type&&void 0!==window.FormData)defaults.data=new FormData(form),defaults.processData=!1,defaults.contentType=!1;else{if($(form).find(":file").length)return;defaults.data=$(form).serializeArray()}pjax($.extend({},defaults,options)),event.preventDefault()}function pjax(options){function fire(type,args,props){props||(props={}),props.relatedTarget=target;var event=$.Event(type,props);return context.trigger(event,args),!event.isDefaultPrevented()}options=$.extend(!0,{},$.ajaxSettings,pjax.defaults,options),$.isFunction(options.url)&&(options.url=options.url());var target=options.target,hash=parseURL(options.url).hash,context=options.context=findContainerFor(options.container);options.data||(options.data={}),options.data._pjax=context.selector;var timeoutTimer;options.beforeSend=function(xhr,settings){return"GET"!==settings.type&&(settings.timeout=0),xhr.setRequestHeader("X-PJAX","true"),xhr.setRequestHeader("X-PJAX-Container",context.selector),fire("pjax:beforeSend",[xhr,settings])?(settings.timeout>0&&(timeoutTimer=setTimeout(function(){fire("pjax:timeout",[xhr,options])&&xhr.abort("timeout")},settings.timeout),settings.timeout=0),options.requestUrl=parseURL(settings.url).href,void 0):!1},options.complete=function(xhr,textStatus){timeoutTimer&&clearTimeout(timeoutTimer),fire("pjax:complete",[xhr,textStatus,options]),fire("pjax:end",[xhr,options])},options.error=function(xhr,textStatus,errorThrown){var container=extractContainer("",xhr,options),allowed=fire("pjax:error",[xhr,textStatus,errorThrown,options]);"GET"==options.type&&"abort"!==textStatus&&allowed&&locationReplace(container.url)},options.success=function(data,status,xhr){var previousState=pjax.state,currentVersion="function"==typeof $.pjax.defaults.version?$.pjax.defaults.version():$.pjax.defaults.version,latestVersion=xhr.getResponseHeader("X-PJAX-Version"),container=extractContainer(data,xhr,options);if(currentVersion&&latestVersion&&currentVersion!==latestVersion)return locationReplace(container.url),void 0;if(!container.contents)return locationReplace(container.url),void 0;pjax.state={id:options.id||uniqueId(),url:container.url,title:container.title,container:context.selector,fragment:options.fragment,timeout:options.timeout},(options.push||options.replace)&&window.history.replaceState(pjax.state,container.title,container.url);try{document.activeElement.blur()}catch(e){}container.title&&(document.title=container.title),fire("pjax:beforeReplace",[container.contents,options],{state:pjax.state,previousState:previousState}),context.html(container.contents);var autofocusEl=context.find("input[autofocus], textarea[autofocus]").last()[0];if(autofocusEl&&document.activeElement!==autofocusEl&&autofocusEl.focus(),executeScriptTags(container.scripts),"number"==typeof options.scrollTo&&$(window).scrollTop(options.scrollTo),""!==hash){var url=parseURL(container.url);url.hash=hash,pjax.state.url=url.href,window.history.replaceState(pjax.state,container.title,url.href);var target=$(url.hash);target.length&&$(window).scrollTop(target.offset().top)}fire("pjax:success",[data,status,xhr,options])},pjax.state||(pjax.state={id:uniqueId(),url:window.location.href,title:document.title,container:context.selector,fragment:options.fragment,timeout:options.timeout},window.history.replaceState(pjax.state,document.title));var xhr=pjax.xhr;xhr&&xhr.readyState<4&&(xhr.onreadystatechange=$.noop,xhr.abort()),pjax.options=options;var xhr=pjax.xhr=$.ajax(options);return xhr.readyState>0&&(options.push&&!options.replace&&(cachePush(pjax.state.id,context.clone().contents()),window.history.pushState(null,"",stripPjaxParam(options.requestUrl))),fire("pjax:start",[xhr,options]),fire("pjax:send",[xhr,options])),pjax.xhr}function pjaxReload(container,options){var defaults={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return pjax($.extend(defaults,optionsFor(container,options)))}function locationReplace(url){window.history.replaceState(null,"","#"),window.location.replace(url)}function onPjaxPopstate(event){var previousState=pjax.state,state=event.state;if(state&&state.container){if(initialPop&&initialURL==state.url)return;if(pjax.state&&pjax.state.id===state.id)return;var container=$(state.container);if(container.length){var direction,contents=cacheMapping[state.id];pjax.state&&(direction=pjax.state.id<state.id?"forward":"back",cachePop(direction,pjax.state.id,container.clone().contents()));var popstateEvent=$.Event("pjax:popstate",{state:state,direction:direction});container.trigger(popstateEvent);var options={id:state.id,url:state.url,container:container,push:!1,fragment:state.fragment,timeout:state.timeout,scrollTo:!1};if(contents){container.trigger("pjax:start",[null,options]),pjax.state=state,state.title&&(document.title=state.title);var beforeReplaceEvent=$.Event("pjax:beforeReplace",{state:state,previousState:previousState});container.trigger(beforeReplaceEvent,[contents,options]),container.html(contents),container.trigger("pjax:end",[null,options])}else pjax(options);container[0].offsetHeight}else locationReplace(location.href)}initialPop=!1}function fallbackPjax(options){var url=$.isFunction(options.url)?options.url():options.url,method=options.type?options.type.toUpperCase():"GET",form=$("<form>",{method:"GET"===method?"GET":"POST",action:url,style:"display:none"});"GET"!==method&&"POST"!==method&&form.append($("<input>",{type:"hidden",name:"_method",value:method.toLowerCase()}));var data=options.data;if("string"==typeof data)$.each(data.split("&"),function(index,value){var pair=value.split("=");form.append($("<input>",{type:"hidden",name:pair[0],value:pair[1]}))});else if("object"==typeof data)for(key in data)form.append($("<input>",{type:"hidden",name:key,value:data[key]}));$(document.body).append(form),form.submit()}function uniqueId(){return(new Date).getTime()}function stripPjaxParam(url){return url.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function parseURL(url){var a=document.createElement("a");return a.href=url,a}function optionsFor(container,options){return container&&options?options.container=container:options=$.isPlainObject(container)?container:{container:container},options.container&&(options.container=findContainerFor(options.container)),options}function findContainerFor(container){if(container=$(container),container.length){if(""!==container.selector&&container.context===document)return container;if(container.attr("id"))return $("#"+container.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+container.selector}function findAll(elems,selector){return elems.filter(selector).add(elems.find(selector))}function parseHTML(html){return $.parseHTML(html,document,!0)}function extractContainer(data,xhr,options){var obj={};if(obj.url=stripPjaxParam(xhr.getResponseHeader("X-PJAX-URL")||options.requestUrl),/<html/i.test(data))var $head=$(parseHTML(data.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),$body=$(parseHTML(data.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var $head=$body=$(parseHTML(data));if(0===$body.length)return obj;if(obj.title=findAll($head,"title").last().text(),options.fragment){if("body"===options.fragment)var $fragment=$body;else var $fragment=findAll($body,options.fragment).first();$fragment.length&&(obj.contents=$fragment.contents(),obj.title||(obj.title=$fragment.attr("title")||$fragment.data("title")))}else/<html/i.test(data)||(obj.contents=$body);return obj.contents&&(obj.contents=obj.contents.not(function(){return $(this).is("title")}),obj.contents.find("title").remove(),obj.scripts=findAll(obj.contents,"script[src]").remove(),obj.contents=obj.contents.not(obj.scripts)),obj.title&&(obj.title=$.trim(obj.title)),obj}function executeScriptTags(scripts){if(scripts){var existingScripts=$("script[src]");scripts.each(function(){var src=this.src,matchedScripts=existingScripts.filter(function(){return this.src===src});if(!matchedScripts.length){var script=document.createElement("script"),type=$(this).attr("type");type&&(script.type=type),script.src=$(this).attr("src"),document.head.appendChild(script)}})}}function cachePush(id,value){cacheMapping[id]=value,cacheBackStack.push(id),trimCacheStack(cacheForwardStack,0),trimCacheStack(cacheBackStack,pjax.defaults.maxCacheLength)}function cachePop(direction,id,value){var pushStack,popStack;cacheMapping[id]=value,"forward"===direction?(pushStack=cacheBackStack,popStack=cacheForwardStack):(pushStack=cacheForwardStack,popStack=cacheBackStack),pushStack.push(id),(id=popStack.pop())&&delete cacheMapping[id],trimCacheStack(pushStack,pjax.defaults.maxCacheLength)}function trimCacheStack(stack,length){for(;stack.length>length;)delete cacheMapping[stack.shift()]}function findVersion(){return $("meta").filter(function(){var name=$(this).attr("http-equiv");return name&&"X-PJAX-VERSION"===name.toUpperCase()}).attr("content")}function enable(){$.fn.pjax=fnPjax,$.pjax=pjax,$.pjax.enable=$.noop,$.pjax.disable=disable,$.pjax.click=handleClick,$.pjax.submit=handleSubmit,$.pjax.reload=pjaxReload,$.pjax.defaults={timeout:1e4,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:findVersion},$(window).on("popstate.pjax",onPjaxPopstate)}function disable(){$.fn.pjax=function(){return this},$.pjax=fallbackPjax,$.pjax.enable=enable,$.pjax.disable=$.noop,$.pjax.click=$.noop,$.pjax.submit=$.noop,$.pjax.reload=function(){window.location.reload()},$(window).off("popstate.pjax",onPjaxPopstate)}var initialPop=!0,initialURL=window.location.href,initialState=window.history.state;initialState&&initialState.container&&(pjax.state=initialState),"state"in window.history&&(initialPop=!1);var cacheMapping={},cacheForwardStack=[],cacheBackStack=[];$.inArray("state",$.event.props)<0&&$.event.props.push("state"),$.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),$.support.pjax?enable():disable()}(jQuery),/*!
 * jQuery Cookie Plugin v1.2
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
function($,document,undefined){function raw(s){return s}function decoded(s){return decodeURIComponent(s.replace(pluses," "))}var pluses=/\+/g;$.cookie=function(key,value,options){if(value!==undefined&&!/Object/.test(Object.prototype.toString.call(value))){if(options=$.extend({},$.cookie.defaults,options),null===value&&(options.expires=-1),"number"==typeof options.expires){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}return value=String(value),document.cookie=[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}options=value||$.cookie.defaults||{};for(var parts,decode=options.raw?raw:decoded,cookies=document.cookie.split("; "),i=0;parts=cookies[i]&&cookies[i].split("=");i++)if(decode(parts.shift())===key)return decode(parts.join("="));return null},$.cookie.defaults={},$.removeCookie=function(key,options){return null!==$.cookie(key,options)?($.cookie(key,null,options),!0):!1}}(jQuery,document),/*! jQuery UI - v1.10.4 - 2014-02-05
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.sortable.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
function(e,t){function i(t,i){var s,a,o,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,a=s.name,t.href&&a&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,a=e(this[0]);a.length&&a[0]!==document;){if(n=a.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(o,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(o,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,a=e.ui[t].prototype;for(s in n)a.plugins[s]=a.plugins[s]||[],a.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;s.length>n;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)}})}(jQuery),function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l={},c=i.split(".")[0];i=i.split(".")[1],o=c+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][i],r=t[c][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(n,function(i,n){return t.isFunction(n)?(l[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=n.apply(this,arguments),this._super=s,this._superApply=o,i}}(),e):(l[i]=n,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix||i:i},l,{constructor:r,namespace:c,widgetName:i,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h),s!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),1===arguments.length)return o[i]===e?null:o[i];o[i]=s}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-t(document).scrollTop()<a.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-a.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<a.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+a.scrollSpeed)),e.pageX-t(document).scrollLeft()<a.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-a.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<a.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&s,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return n?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&s||"left"===o&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],h=[],l=this._connectWith();if(l&&e)for(s=l.length-1;s>=0;s--)for(o=t(l[s]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&h.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(h.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_contactContainers:function(s){var n,o,a,r,h,l,c,u,d,p,f=null,g=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],g=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(a=1e4,r=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",c=this.positionAbs[h]+this.offset.click[h],o=this.items.length-1;o>=0;o--)t.contains(this.containers[g].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[h],d=!1,Math.abs(u-c)>Math.abs(u+this.items[o][l]-c)&&(d=!0,u+=this.items[o][l]),a>Math.abs(u-c)&&(a=Math.abs(u-c),r=this.items[o],this.direction=d?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[g].element,!0),this._trigger("change",s,this._uiHash()),this.containers[g]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);
return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function($){"use strict";var ts=$.tablesorter={version:"2.26.6",parsers:[],widgets:[],defaults:{theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,resort:!0,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",duplicateSpan:!0,textExtraction:"basic",textAttribute:"data-text",textSorter:null,numberSorter:null,initWidgets:!0,widgetClass:"widget-{name}",widgets:[],widgetOptions:{zebra:["even","odd"]},initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssNone:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssInfoBlock:"tablesorter-infoOnly",cssNoSort:"tablesorter-noSort",cssIgnoreRow:"tablesorter-ignoreRow",cssIcon:"tablesorter-icon",cssIconNone:"",cssIconAsc:"",cssIconDesc:"",pointerClick:"click",pointerDown:"mousedown",pointerUp:"mouseup",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},css:{table:"tablesorter",cssHasChild:"tablesorter-hasChildRow",childRow:"tablesorter-childRow",colgroup:"tablesorter-colgroup",header:"tablesorter-header",headerRow:"tablesorter-headerRow",headerIn:"tablesorter-header-inner",icon:"tablesorter-icon",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc",sortNone:"tablesorter-headerUnSorted"},language:{sortAsc:"Ascending sort applied, ",sortDesc:"Descending sort applied, ",sortNone:"No sort applied, ",sortDisabled:"sorting is disabled",nextAsc:"activate to apply an ascending sort",nextDesc:"activate to apply a descending sort",nextNone:"activate to remove the sort"},regex:{templateContent:/\{content\}/g,templateIcon:/\{icon\}/g,templateName:/\{name\}/i,spaces:/\s+/g,nonWord:/\W/g,formElements:/(input|select|button|textarea)/i,chunk:/(^([+\-]?(?:\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i,comma:/,/g,digitNonUS:/[\s|\.]/g,digitNegativeTest:/^\s*\([.\d]+\)/,digitNegativeReplace:/^\s*\(([.\d]+)\)/,digitTest:/^[\-+(]?\d+[)]?$/,digitReplace:/[,.'"\s]/g},string:{max:1,min:-1,emptymin:1,emptymax:-1,zero:0,none:0,"null":0,top:!0,bottom:!1},keyCodes:{enter:13},dates:{},instanceMethods:{},setup:function(table,c){if(!table||!table.tHead||0===table.tBodies.length||table.hasInitialized===!0)return c.debug&&(table.hasInitialized?console.warn("Stopping initialization. Tablesorter has already been initialized"):console.error("Stopping initialization! No table, thead or tbody",table)),void 0;var tmp="",$table=$(table),meta=$.metadata;table.hasInitialized=!1,table.isProcessing=!0,table.config=c,$.data(table,"tablesorter",c),c.debug&&(console[console.group?"group":"log"]("Initializing tablesorter"),$.data(table,"startoveralltimer",new Date)),c.supportsDataObject=function(version){return version[0]=parseInt(version[0],10),version[0]>1||1===version[0]&&parseInt(version[1],10)>=4}($.fn.jquery.split(".")),c.emptyTo=c.emptyTo.toLowerCase(),c.stringTo=c.stringTo.toLowerCase(),c.last={sortList:[],clickedIndex:-1},/tablesorter\-/.test($table.attr("class"))||(tmp=""!==c.theme?" tablesorter-"+c.theme:""),c.table=table,c.$table=$table.addClass(ts.css.table+" "+c.tableClass+tmp).attr("role","grid"),c.$headers=$table.find(c.selectorHeaders),c.namespace=c.namespace?"."+c.namespace.replace(ts.regex.nonWord,""):".tablesorter"+Math.random().toString(16).slice(2),c.$table.children().children("tr").attr("role","row"),c.$tbodies=$table.children("tbody:not(."+c.cssInfoBlock+")").attr({"aria-live":"polite","aria-relevant":"all"}),c.$table.children("caption").length&&(tmp=c.$table.children("caption")[0],tmp.id||(tmp.id=c.namespace.slice(1)+"caption"),c.$table.attr("aria-labelledby",tmp.id)),c.widgetInit={},c.textExtraction=c.$table.attr("data-text-extraction")||c.textExtraction||"basic",ts.buildHeaders(c),ts.fixColumnWidth(table),ts.addWidgetFromClass(table),ts.applyWidgetOptions(table),ts.setupParsers(c),c.totalRows=0,c.delayInit||ts.buildCache(c),ts.bindEvents(table,c.$headers,!0),ts.bindMethods(c),c.supportsDataObject&&"undefined"!=typeof $table.data().sortlist?c.sortList=$table.data().sortlist:meta&&$table.metadata()&&$table.metadata().sortlist&&(c.sortList=$table.metadata().sortlist),ts.applyWidget(table,!0),c.sortList.length>0?ts.sortOn(c,c.sortList,{},!c.initWidgets):(ts.setHeadersCss(c),c.initWidgets&&ts.applyWidget(table,!1)),c.showProcessing&&$table.unbind("sortBegin"+c.namespace+" sortEnd"+c.namespace).bind("sortBegin"+c.namespace+" sortEnd"+c.namespace,function(e){clearTimeout(c.timerProcessing),ts.isProcessing(table),"sortBegin"===e.type&&(c.timerProcessing=setTimeout(function(){ts.isProcessing(table,!0)},500))}),table.hasInitialized=!0,table.isProcessing=!1,c.debug&&(console.log("Overall initialization time: "+ts.benchmark($.data(table,"startoveralltimer"))),c.debug&&console.groupEnd&&console.groupEnd()),$table.triggerHandler("tablesorter-initialized",table),"function"==typeof c.initialized&&c.initialized(table)},bindMethods:function(c){var $table=c.$table,namespace=c.namespace,events="sortReset update updateRows updateAll updateHeaders addRows updateCell updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(namespace+" ");$table.unbind(events.replace(ts.regex.spaces," ")).bind("sortReset"+namespace,function(e,callback){e.stopPropagation(),ts.sortReset(this.config,callback)}).bind("updateAll"+namespace,function(e,resort,callback){e.stopPropagation(),ts.updateAll(this.config,resort,callback)}).bind("update"+namespace+" updateRows"+namespace,function(e,resort,callback){e.stopPropagation(),ts.update(this.config,resort,callback)}).bind("updateHeaders"+namespace,function(e,callback){e.stopPropagation(),ts.updateHeaders(this.config,callback)}).bind("updateCell"+namespace,function(e,cell,resort,callback){e.stopPropagation(),ts.updateCell(this.config,cell,resort,callback)}).bind("addRows"+namespace,function(e,$row,resort,callback){e.stopPropagation(),ts.addRows(this.config,$row,resort,callback)}).bind("updateComplete"+namespace,function(){this.isUpdating=!1}).bind("sorton"+namespace,function(e,list,callback,init){e.stopPropagation(),ts.sortOn(this.config,list,callback,init)}).bind("appendCache"+namespace,function(e,callback,init){e.stopPropagation(),ts.appendCache(this.config,init),$.isFunction(callback)&&callback(this)}).bind("updateCache"+namespace,function(e,callback,$tbodies){e.stopPropagation(),ts.updateCache(this.config,callback,$tbodies)}).bind("applyWidgetId"+namespace,function(e,id){e.stopPropagation(),ts.applyWidgetId(this,id)}).bind("applyWidgets"+namespace,function(e,init){e.stopPropagation(),ts.applyWidget(this,init)}).bind("refreshWidgets"+namespace,function(e,all,dontapply){e.stopPropagation(),ts.refreshWidgets(this,all,dontapply)}).bind("removeWidget"+namespace,function(e,name,refreshing){e.stopPropagation(),ts.removeWidget(this,name,refreshing)}).bind("destroy"+namespace,function(e,removeClasses,callback){e.stopPropagation(),ts.destroy(this,removeClasses,callback)}).bind("resetToLoadState"+namespace,function(e){e.stopPropagation(),ts.removeWidget(this,!0,!1),c=$.extend(!0,ts.defaults,c.originalSettings),this.hasInitialized=!1,ts.setup(this,c)})},bindEvents:function(table,$headers,core){table=$(table)[0];var tmp,c=table.config,namespace=c.namespace,downTarget=null;core!==!0&&($headers.addClass(namespace.slice(1)+"_extra_headers"),tmp=$.fn.closest?$headers.closest("table")[0]:$headers.parents("table")[0],tmp&&"TABLE"===tmp.nodeName&&tmp!==table&&$(tmp).addClass(namespace.slice(1)+"_extra_table")),tmp=(c.pointerDown+" "+c.pointerUp+" "+c.pointerClick+" sort keyup ").replace(ts.regex.spaces," ").split(" ").join(namespace+" "),$headers.find(c.selectorSort).add($headers.filter(c.selectorSort)).unbind(tmp).bind(tmp,function(e,external){var $cell,cell,temp,$target=$(e.target),type=" "+e.type+" ";if(!(1!==(e.which||e.button)&&!type.match(" "+c.pointerClick+" | sort | keyup ")||" keyup "===type&&e.which!==ts.keyCodes.enter||type.match(" "+c.pointerClick+" ")&&"undefined"!=typeof e.which||type.match(" "+c.pointerUp+" ")&&downTarget!==e.target&&external!==!0)){if(type.match(" "+c.pointerDown+" "))return downTarget=e.target,temp=$target.jquery.split("."),"1"===temp[0]&&temp[1]<4&&e.preventDefault(),void 0;if(downTarget=null,ts.regex.formElements.test(e.target.nodeName)||$target.hasClass(c.cssNoSort)||$target.parents("."+c.cssNoSort).length>0||$target.parents("button").length>0)return!c.cancelSelection;c.delayInit&&ts.isEmptyObject(c.cache)&&ts.buildCache(c),$cell=$.fn.closest?$(this).closest("th, td"):/TH|TD/.test(this.nodeName)?$(this):$(this).parents("th, td"),temp=$headers.index($cell),c.last.clickedIndex=0>temp?$cell.attr("data-column"):temp,cell=c.$headers[c.last.clickedIndex],cell&&!cell.sortDisabled&&ts.initSort(c,cell,e)}}),c.cancelSelection&&$headers.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})},buildHeaders:function(c){var $temp,icon,timer,indx;for(c.headerList=[],c.headerContent=[],c.sortVars=[],c.debug&&(timer=new Date),c.columns=ts.computeColumnIndex(c.$table.children("thead, tfoot").children("tr")),icon=c.cssIcon?'<i class="'+(c.cssIcon===ts.css.icon?ts.css.icon:c.cssIcon+" "+ts.css.icon)+'"></i>':"",c.$headers=$($.map(c.$table.find(c.selectorHeaders),function(elem,index){var configHeaders,header,column,template,tmp,$elem=$(elem);if(!$elem.parent().hasClass(c.cssIgnoreRow))return configHeaders=ts.getColumnData(c.table,c.headers,index,!0),c.headerContent[index]=$elem.html(),""===c.headerTemplate||$elem.find("."+ts.css.headerIn).length||(template=c.headerTemplate.replace(ts.regex.templateContent,$elem.html()).replace(ts.regex.templateIcon,$elem.find("."+ts.css.icon).length?"":icon),c.onRenderTemplate&&(header=c.onRenderTemplate.apply($elem,[index,template]),header&&"string"==typeof header&&(template=header)),$elem.html('<div class="'+ts.css.headerIn+'">'+template+"</div>")),c.onRenderHeader&&c.onRenderHeader.apply($elem,[index,c,c.$table]),column=parseInt($elem.attr("data-column"),10),elem.column=column,tmp=ts.getData($elem,configHeaders,"sortInitialOrder")||c.sortInitialOrder,c.sortVars[column]={count:-1,order:ts.getOrder(tmp)?[1,0,2]:[0,1,2],lockedOrder:!1},tmp=ts.getData($elem,configHeaders,"lockedOrder")||!1,"undefined"!=typeof tmp&&tmp!==!1&&(c.sortVars[column].lockedOrder=!0,c.sortVars[column].order=ts.getOrder(tmp)?[1,1,1]:[0,0,0]),c.headerList[index]=elem,$elem.addClass(ts.css.header+" "+c.cssHeader).parent().addClass(ts.css.headerRow+" "+c.cssHeaderRow).attr("role","row"),c.tabIndex&&$elem.attr("tabindex",0),elem})),c.$headerIndexed=[],indx=0;indx<c.columns;indx++)ts.isEmptyObject(c.sortVars[indx])&&(c.sortVars[indx]={}),$temp=c.$headers.filter('[data-column="'+indx+'"]'),c.$headerIndexed[indx]=$temp.length?$temp.not(".sorter-false").length?$temp.not(".sorter-false").filter(":last"):$temp.filter(":last"):$();c.$table.find(c.selectorHeaders).attr({scope:"col",role:"columnheader"}),ts.updateHeader(c),c.debug&&(console.log("Built headers:"+ts.benchmark(timer)),console.log(c.$headers))},addInstanceMethods:function(methods){$.extend(ts.instanceMethods,methods)},setupParsers:function(c,$tbodies){var rows,list,span,max,colIndex,indx,header,configHeaders,noParser,parser,extractor,time,tbody,len,table=c.table,tbodyIndex=0,debug={};if(c.$tbodies=c.$table.children("tbody:not(."+c.cssInfoBlock+")"),tbody="undefined"==typeof $tbodies?c.$tbodies:$tbodies,len=tbody.length,0===len)return c.debug?console.warn("Warning: *Empty table!* Not building a parser cache"):"";for(c.debug&&(time=new Date,console[console.group?"group":"log"]("Detecting parsers for each column")),list={extractors:[],parsers:[]};len>tbodyIndex;){if(rows=tbody[tbodyIndex].rows,rows.length)for(colIndex=0,max=c.columns,indx=0;max>indx;indx++){if(header=c.$headerIndexed[colIndex],header&&header.length&&(configHeaders=ts.getColumnData(table,c.headers,colIndex),extractor=ts.getParserById(ts.getData(header,configHeaders,"extractor")),parser=ts.getParserById(ts.getData(header,configHeaders,"sorter")),noParser="false"===ts.getData(header,configHeaders,"parser"),c.empties[colIndex]=(ts.getData(header,configHeaders,"empty")||c.emptyTo||(c.emptyToBottom?"bottom":"top")).toLowerCase(),c.strings[colIndex]=(ts.getData(header,configHeaders,"string")||c.stringTo||"max").toLowerCase(),noParser&&(parser=ts.getParserById("no-parser")),extractor||(extractor=!1),parser||(parser=ts.detectParserForColumn(c,rows,-1,colIndex)),c.debug&&(debug["("+colIndex+") "+header.text()]={parser:parser.id,extractor:extractor?extractor.id:"none",string:c.strings[colIndex],empty:c.empties[colIndex]}),list.parsers[colIndex]=parser,list.extractors[colIndex]=extractor,span=header[0].colSpan-1,span>0))for(colIndex+=span,max+=span;span+1>0;)list.parsers[colIndex-span]=parser,list.extractors[colIndex-span]=extractor,span--;colIndex++}tbodyIndex+=list.parsers.length?len:1}c.debug&&(ts.isEmptyObject(debug)?console.warn("  No parsers detected!"):console[console.table?"table":"log"](debug),console.log("Completed detecting parsers"+ts.benchmark(time)),console.groupEnd&&console.groupEnd()),c.parsers=list.parsers,c.extractors=list.extractors},addParser:function(parser){var indx,len=ts.parsers.length,add=!0;for(indx=0;len>indx;indx++)ts.parsers[indx].id.toLowerCase()===parser.id.toLowerCase()&&(add=!1);add&&(ts.parsers[ts.parsers.length]=parser)},getParserById:function(name){if("false"==name)return!1;var indx,len=ts.parsers.length;for(indx=0;len>indx;indx++)if(ts.parsers[indx].id.toLowerCase()===name.toString().toLowerCase())return ts.parsers[indx];return!1},detectParserForColumn:function(c,rows,rowIndex,cellIndex){for(var cur,$node,row,indx=ts.parsers.length,node=!1,nodeValue="",keepLooking=!0;""===nodeValue&&keepLooking;)rowIndex++,row=rows[rowIndex],row&&50>rowIndex?row.className.indexOf(ts.cssIgnoreRow)<0&&(node=rows[rowIndex].cells[cellIndex],nodeValue=ts.getElementText(c,node,cellIndex),$node=$(node),c.debug&&console.log("Checking if value was empty on row "+rowIndex+", column: "+cellIndex+': "'+nodeValue+'"')):keepLooking=!1;for(;--indx>=0;)if(cur=ts.parsers[indx],cur&&"text"!==cur.id&&cur.is&&cur.is(nodeValue,c.table,node,$node))return cur;return ts.getParserById("text")},getElementText:function(c,node,cellIndex){if(!node)return"";var tmp,extract=c.textExtraction||"",$node=node.jquery?node:$(node);return"string"==typeof extract?"basic"===extract&&"undefined"!=typeof(tmp=$node.attr(c.textAttribute))?$.trim(tmp):$.trim(node.textContent||$node.text()):"function"==typeof extract?$.trim(extract($node[0],c.table,cellIndex)):"function"==typeof(tmp=ts.getColumnData(c.table,extract,cellIndex))?$.trim(tmp($node[0],c.table,cellIndex)):$.trim($node[0].textContent||$node.text())},getParsedText:function(c,cell,colIndex,txt){"undefined"==typeof txt&&(txt=ts.getElementText(c,cell,colIndex));var val=""+txt,parser=c.parsers[colIndex],extractor=c.extractors[colIndex];return parser&&(extractor&&"function"==typeof extractor.format&&(txt=extractor.format(txt,c.table,cell,colIndex)),val="no-parser"===parser.id?"":parser.format(""+txt,c.table,cell,colIndex),c.ignoreCase&&"string"==typeof val&&(val=val.toLowerCase())),val},buildCache:function(c,callback,$tbodies){var cache,val,txt,rowIndex,colIndex,tbodyIndex,$tbody,$row,cols,$cells,cell,cacheTime,totalRows,rowData,prevRowData,colMax,span,cacheIndex,hasParser,max,len,index,table=c.table,parsers=c.parsers;if(c.$tbodies=c.$table.children("tbody:not(."+c.cssInfoBlock+")"),$tbody="undefined"==typeof $tbodies?c.$tbodies:$tbodies,c.cache={},c.totalRows=0,!parsers)return c.debug?console.warn("Warning: *Empty table!* Not building a cache"):"";for(c.debug&&(cacheTime=new Date),c.showProcessing&&ts.isProcessing(table,!0),tbodyIndex=0;tbodyIndex<$tbody.length;tbodyIndex++){for(colMax=[],cache=c.cache[tbodyIndex]={normalized:[]},totalRows=$tbody[tbodyIndex]&&$tbody[tbodyIndex].rows.length||0,rowIndex=0;totalRows>rowIndex;++rowIndex)if(rowData={child:[],raw:[]},$row=$($tbody[tbodyIndex].rows[rowIndex]),cols=[],!$row.hasClass(c.selectorRemove.slice(1)))if($row.hasClass(c.cssChildRow)&&0!==rowIndex)for(len=cache.normalized.length-1,prevRowData=cache.normalized[len][c.columns],prevRowData.$row=prevRowData.$row.add($row),$row.prev().hasClass(c.cssChildRow)||$row.prev().addClass(ts.css.cssHasChild),$cells=$row.children("th, td"),len=prevRowData.child.length,prevRowData.child[len]=[],cacheIndex=0,max=c.columns,colIndex=0;max>colIndex;colIndex++)cell=$cells[colIndex],cell&&(prevRowData.child[len][colIndex]=ts.getParsedText(c,cell,colIndex),span=$cells[colIndex].colSpan-1,span>0&&(cacheIndex+=span,max+=span)),cacheIndex++;else{for(rowData.$row=$row,rowData.order=rowIndex,cacheIndex=0,max=c.columns,colIndex=0;max>colIndex;++colIndex){if(cell=$row[0].cells[colIndex],cell&&cacheIndex<c.columns&&(hasParser="undefined"!=typeof parsers[cacheIndex],!hasParser&&c.debug&&console.warn("No parser found for row: "+rowIndex+", column: "+colIndex+'; cell containing: "'+$(cell).text()+'"; does it have a header?'),val=ts.getElementText(c,cell,cacheIndex),rowData.raw[cacheIndex]=val,txt=ts.getParsedText(c,cell,cacheIndex,val),cols[cacheIndex]=txt,hasParser&&"numeric"===(parsers[cacheIndex].type||"").toLowerCase()&&(colMax[cacheIndex]=Math.max(Math.abs(txt)||0,colMax[cacheIndex]||0)),span=cell.colSpan-1,span>0)){for(index=0;span>=index;)txt=c.duplicateSpan||0===index?val:"string"!=typeof c.textExtraction?ts.getElementText(c,cell,cacheIndex+index)||"":"",rowData.raw[cacheIndex+index]=txt,cols[cacheIndex+index]=txt,index++;cacheIndex+=span,max+=span}cacheIndex++}cols[c.columns]=rowData,cache.normalized[cache.normalized.length]=cols}cache.colMax=colMax,c.totalRows+=cache.normalized.length}if(c.showProcessing&&ts.isProcessing(table),c.debug){for(len=Math.min(5,c.cache[0].normalized.length),console[console.group?"group":"log"]("Building cache for "+c.totalRows+" rows (showing "+len+" rows in log) and "+c.columns+" columns"+ts.benchmark(cacheTime)),val={},colIndex=0;colIndex<c.columns;colIndex++)for(cacheIndex=0;len>cacheIndex;cacheIndex++)val["row: "+cacheIndex]||(val["row: "+cacheIndex]={}),val["row: "+cacheIndex][c.$headerIndexed[colIndex].text()]=c.cache[0].normalized[cacheIndex][colIndex];console[console.table?"table":"log"](val),console.groupEnd&&console.groupEnd()}$.isFunction(callback)&&callback(table)},getColumnText:function(table,column,callback,rowFilter){table=$(table)[0];var tbodyIndex,rowIndex,cache,row,tbodyLen,rowLen,raw,parsed,$cell,result,hasCallback="function"==typeof callback,allColumns="all"===column,data={raw:[],parsed:[],$cell:[]},c=table.config;if(!ts.isEmptyObject(c)){for(tbodyLen=c.$tbodies.length,tbodyIndex=0;tbodyLen>tbodyIndex;tbodyIndex++)for(cache=c.cache[tbodyIndex].normalized,rowLen=cache.length,rowIndex=0;rowLen>rowIndex;rowIndex++)row=cache[rowIndex],(!rowFilter||row[c.columns].$row.is(rowFilter))&&(result=!0,parsed=allColumns?row.slice(0,c.columns):row[column],row=row[c.columns],raw=allColumns?row.raw:row.raw[column],$cell=allColumns?row.$row.children():row.$row.children().eq(column),hasCallback&&(result=callback({tbodyIndex:tbodyIndex,rowIndex:rowIndex,parsed:parsed,raw:raw,$row:row.$row,$cell:$cell})),result!==!1&&(data.parsed[data.parsed.length]=parsed,data.raw[data.raw.length]=raw,data.$cell[data.$cell.length]=$cell));return data}c.debug&&console.warn("No cache found - aborting getColumnText function!")},setHeadersCss:function(c){var $sorted,indx,column,list=c.sortList,len=list.length,none=ts.css.sortNone+" "+c.cssNone,css=[ts.css.sortAsc+" "+c.cssAsc,ts.css.sortDesc+" "+c.cssDesc],cssIcon=[c.cssIconAsc,c.cssIconDesc,c.cssIconNone],aria=["ascending","descending"],$headers=c.$table.find("tfoot tr").children("td, th").add($(c.namespace+"_extra_headers")).removeClass(css.join(" "));for(c.$headers.removeClass(css.join(" ")).addClass(none).attr("aria-sort","none").find("."+ts.css.icon).removeClass(cssIcon.join(" ")).addClass(cssIcon[2]),indx=0;len>indx;indx++)if(2!==list[indx][1]&&($sorted=c.$headers.filter(function(i){for(var include=!0,$el=c.$headers.eq(i),col=parseInt($el.attr("data-column"),10),end=col+c.$headers[i].colSpan;end>col;col++)include=include?include||ts.isValueInArray(col,c.sortList)>-1:!1;return include}),$sorted=$sorted.not(".sorter-false").filter('[data-column="'+list[indx][0]+'"]'+(1===len?":last":"")),$sorted.length)){for(column=0;column<$sorted.length;column++)$sorted[column].sortDisabled||$sorted.eq(column).removeClass(none).addClass(css[list[indx][1]]).attr("aria-sort",aria[list[indx][1]]).find("."+ts.css.icon).removeClass(cssIcon[2]).addClass(cssIcon[list[indx][1]]);$headers.length&&$headers.filter('[data-column="'+list[indx][0]+'"]').removeClass(none).addClass(css[list[indx][1]])}for(len=c.$headers.length,indx=0;len>indx;indx++)ts.setColumnAriaLabel(c,c.$headers.eq(indx))},setColumnAriaLabel:function(c,$header,nextSort){if($header.length){var column=parseInt($header.attr("data-column"),10),tmp=$header.hasClass(ts.css.sortAsc)?"sortAsc":$header.hasClass(ts.css.sortDesc)?"sortDesc":"sortNone",txt=$.trim($header.text())+": "+ts.language[tmp];$header.hasClass("sorter-false")||nextSort===!1?txt+=ts.language.sortDisabled:(nextSort=c.sortVars[column].order[(c.sortVars[column].count+1)%(c.sortReset?3:2)],txt+=ts.language[0===nextSort?"nextAsc":1===nextSort?"nextDesc":"nextNone"]),$header.attr("aria-label",txt)}},updateHeader:function(c){var index,isDisabled,$header,col,table=c.table,len=c.$headers.length;for(index=0;len>index;index++)$header=c.$headers.eq(index),col=ts.getColumnData(table,c.headers,index,!0),isDisabled="false"===ts.getData($header,col,"sorter")||"false"===ts.getData($header,col,"parser"),ts.setColumnSort(c,$header,isDisabled)},setColumnSort:function(c,$header,isDisabled){var id=c.table.id;$header[0].sortDisabled=isDisabled,$header[isDisabled?"addClass":"removeClass"]("sorter-false").attr("aria-disabled",""+isDisabled),c.tabIndex&&(isDisabled?$header.removeAttr("tabindex"):$header.attr("tabindex","0")),id&&(isDisabled?$header.removeAttr("aria-controls"):$header.attr("aria-controls",id))},updateHeaderSortCount:function(c,list){var col,dir,group,indx,primary,temp,val,order,sortList=list||c.sortList,len=sortList.length;for(c.sortList=[],indx=0;len>indx;indx++)if(val=sortList[indx],col=parseInt(val[0],10),col<c.columns){switch(c.sortVars[col].order||(order=c.sortVars[col].order=ts.getOrder(c.sortInitialOrder)?[1,0,2]:[0,1,2],c.sortVars[col].count=0),order=c.sortVars[col].order,dir=(""+val[1]).match(/^(1|d|s|o|n)/),dir=dir?dir[0]:""){case"1":case"d":dir=1;break;case"s":dir=primary||0;break;case"o":temp=order[(primary||0)%(c.sortReset?3:2)],dir=0===temp?1:1===temp?0:2;break;case"n":dir=order[++c.sortVars[col].count%(c.sortReset?3:2)];break;default:dir=0}primary=0===indx?dir:primary,group=[col,parseInt(dir,10)||0],c.sortList[c.sortList.length]=group,dir=$.inArray(group[1],order),c.sortVars[col].count=dir>=0?dir:group[1]%(c.sortReset?3:2)}},updateAll:function(c,resort,callback){var table=c.table;table.isUpdating=!0,ts.refreshWidgets(table,!0,!0),ts.buildHeaders(c),ts.bindEvents(table,c.$headers,!0),ts.bindMethods(c),ts.commonUpdate(c,resort,callback)},update:function(c,resort,callback){var table=c.table;table.isUpdating=!0,ts.updateHeader(c),ts.commonUpdate(c,resort,callback)},updateHeaders:function(c,callback){c.table.isUpdating=!0,ts.buildHeaders(c),ts.bindEvents(c.table,c.$headers,!0),ts.resortComplete(c,callback)},updateCell:function(c,cell,resort,callback){if(ts.isEmptyObject(c.cache))return ts.updateHeader(c),ts.commonUpdate(c,resort,callback),void 0;c.table.isUpdating=!0,c.$table.find(c.selectorRemove).remove();var tmp,indx,row,icell,cache,len,$tbodies=c.$tbodies,$cell=$(cell),tbodyIndex=$tbodies.index($.fn.closest?$cell.closest("tbody"):$cell.parents("tbody").filter(":first")),tbcache=c.cache[tbodyIndex],$row=$.fn.closest?$cell.closest("tr"):$cell.parents("tr").filter(":first");if(cell=$cell[0],$tbodies.length&&tbodyIndex>=0){if(row=$tbodies.eq(tbodyIndex).find("tr").index($row),cache=tbcache.normalized[row],len=$row[0].cells.length,len!==c.columns)for(icell=0,tmp=!1,indx=0;len>indx;indx++)tmp||$row[0].cells[indx]===cell?tmp=!0:icell+=$row[0].cells[indx].colSpan;else icell=$cell.index();tmp=ts.getElementText(c,cell,icell),cache[c.columns].raw[icell]=tmp,tmp=ts.getParsedText(c,cell,icell,tmp),cache[icell]=tmp,cache[c.columns].$row=$row,"numeric"===(c.parsers[icell].type||"").toLowerCase()&&(tbcache.colMax[icell]=Math.max(Math.abs(tmp)||0,tbcache.colMax[icell]||0)),tmp="undefined"!==resort?resort:c.resort,tmp!==!1?ts.checkResort(c,tmp,callback):ts.resortComplete(c,callback)}else c.debug&&console.error("updateCell aborted, tbody missing or not within the indicated table"),c.table.isUpdating=!1},addRows:function(c,$row,resort,callback){var txt,val,tbodyIndex,rowIndex,rows,cellIndex,len,order,cacheIndex,rowData,cells,cell,span,valid="string"==typeof $row&&1===c.$tbodies.length&&/<tr/.test($row||""),table=c.table;if(valid)$row=$($row),c.$tbodies.append($row);else if(!($row&&$row instanceof jQuery&&($.fn.closest?$row.closest("table")[0]:$row.parents("table")[0])===c.table))return c.debug&&console.error("addRows method requires (1) a jQuery selector reference to rows that have already been added to the table, or (2) row HTML string to be added to a table with only one tbody"),!1;if(table.isUpdating=!0,ts.isEmptyObject(c.cache))ts.updateHeader(c),ts.commonUpdate(c,resort,callback);else{for(rows=$row.filter("tr").attr("role","row").length,tbodyIndex=c.$tbodies.index($row.parents("tbody").filter(":first")),c.parsers&&c.parsers.length||ts.setupParsers(c),rowIndex=0;rows>rowIndex;rowIndex++){for(cacheIndex=0,len=$row[rowIndex].cells.length,order=c.cache[tbodyIndex].normalized.length,cells=[],rowData={child:[],raw:[],$row:$row.eq(rowIndex),order:order},cellIndex=0;len>cellIndex;cellIndex++)cell=$row[rowIndex].cells[cellIndex],txt=ts.getElementText(c,cell,cacheIndex),rowData.raw[cacheIndex]=txt,val=ts.getParsedText(c,cell,cacheIndex,txt),cells[cacheIndex]=val,"numeric"===(c.parsers[cacheIndex].type||"").toLowerCase()&&(c.cache[tbodyIndex].colMax[cacheIndex]=Math.max(Math.abs(val)||0,c.cache[tbodyIndex].colMax[cacheIndex]||0)),span=cell.colSpan-1,span>0&&(cacheIndex+=span),cacheIndex++;cells[c.columns]=rowData,c.cache[tbodyIndex].normalized[order]=cells}ts.checkResort(c,resort,callback)}},updateCache:function(c,callback,$tbodies){c.parsers&&c.parsers.length||ts.setupParsers(c,$tbodies),ts.buildCache(c,callback,$tbodies)},appendCache:function(c,init){var parsed,totalRows,$tbody,$curTbody,rowIndex,tbodyIndex,appendTime,table=c.table,wo=c.widgetOptions,$tbodies=c.$tbodies,rows=[],cache=c.cache;if(ts.isEmptyObject(cache))return c.appender?c.appender(table,rows):table.isUpdating?c.$table.triggerHandler("updateComplete",table):"";for(c.debug&&(appendTime=new Date),tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++)if($tbody=$tbodies.eq(tbodyIndex),$tbody.length){for($curTbody=ts.processTbody(table,$tbody,!0),parsed=cache[tbodyIndex].normalized,totalRows=parsed.length,rowIndex=0;totalRows>rowIndex;rowIndex++)rows[rows.length]=parsed[rowIndex][c.columns].$row,c.appender&&(!c.pager||c.pager.removeRows&&wo.pager_removeRows||c.pager.ajax)||$curTbody.append(parsed[rowIndex][c.columns].$row);ts.processTbody(table,$curTbody,!1)}c.appender&&c.appender(table,rows),c.debug&&console.log("Rebuilt table"+ts.benchmark(appendTime)),init||c.appender||ts.applyWidget(table),table.isUpdating&&c.$table.triggerHandler("updateComplete",table)},commonUpdate:function(c,resort,callback){c.$table.find(c.selectorRemove).remove(),ts.setupParsers(c),ts.buildCache(c),ts.checkResort(c,resort,callback)},initSort:function(c,cell,event){if(c.table.isUpdating)return setTimeout(function(){ts.initSort(c,cell,event)},50);var arry,indx,headerIndx,dir,temp,tmp,$header,notMultiSort=!event[c.sortMultiSortKey],table=c.table,len=c.$headers.length,col=parseInt($(cell).attr("data-column"),10),order=c.sortVars[col].order;if(c.$table.triggerHandler("sortStart",table),c.sortVars[col].count=event[c.sortResetKey]?2:(c.sortVars[col].count+1)%(c.sortReset?3:2),c.sortRestart)for(headerIndx=0;len>headerIndx;headerIndx++)$header=c.$headers.eq(headerIndx),tmp=parseInt($header.attr("data-column"),10),col!==tmp&&(notMultiSort||$header.hasClass(ts.css.sortNone))&&(c.sortVars[tmp].count=-1);
if(notMultiSort){if(c.sortList=[],c.last.sortList=[],null!==c.sortForce)for(arry=c.sortForce,indx=0;indx<arry.length;indx++)arry[indx][0]!==col&&(c.sortList[c.sortList.length]=arry[indx]);if(dir=order[c.sortVars[col].count],2>dir&&(c.sortList[c.sortList.length]=[col,dir],cell.colSpan>1))for(indx=1;indx<cell.colSpan;indx++)c.sortList[c.sortList.length]=[col+indx,dir],c.sortVars[col+indx].count=$.inArray(dir,order)}else if(c.sortList=$.extend([],c.last.sortList),ts.isValueInArray(col,c.sortList)>=0)for(indx=0;indx<c.sortList.length;indx++)tmp=c.sortList[indx],tmp[0]===col&&(tmp[1]=order[c.sortVars[col].count],2===tmp[1]&&(c.sortList.splice(indx,1),c.sortVars[col].count=-1));else if(dir=order[c.sortVars[col].count],2>dir&&(c.sortList[c.sortList.length]=[col,dir],cell.colSpan>1))for(indx=1;indx<cell.colSpan;indx++)c.sortList[c.sortList.length]=[col+indx,dir],c.sortVars[col+indx].count=$.inArray(dir,order);if(c.last.sortList=$.extend([],c.sortList),c.sortList.length&&c.sortAppend&&(arry=$.isArray(c.sortAppend)?c.sortAppend:c.sortAppend[c.sortList[0][0]],!ts.isEmptyObject(arry)))for(indx=0;indx<arry.length;indx++)if(arry[indx][0]!==col&&ts.isValueInArray(arry[indx][0],c.sortList)<0){if(dir=arry[indx][1],temp=(""+dir).match(/^(a|d|s|o|n)/))switch(tmp=c.sortList[0][1],temp[0]){case"d":dir=1;break;case"s":dir=tmp;break;case"o":dir=0===tmp?1:0;break;case"n":dir=(tmp+1)%(c.sortReset?3:2);break;default:dir=0}c.sortList[c.sortList.length]=[arry[indx][0],dir]}c.$table.triggerHandler("sortBegin",table),setTimeout(function(){ts.setHeadersCss(c),ts.multisort(c),ts.appendCache(c),c.$table.triggerHandler("sortBeforeEnd",table),c.$table.triggerHandler("sortEnd",table)},1)},multisort:function(c){var tbodyIndex,sortTime,colMax,rows,table=c.table,dir=0,textSorter=c.textSorter||"",sortList=c.sortList,sortLen=sortList.length,len=c.$tbodies.length;if(!c.serverSideSorting&&!ts.isEmptyObject(c.cache)){for(c.debug&&(sortTime=new Date),tbodyIndex=0;len>tbodyIndex;tbodyIndex++)colMax=c.cache[tbodyIndex].colMax,rows=c.cache[tbodyIndex].normalized,rows.sort(function(a,b){var sortIndex,num,col,order,sort,x,y;for(sortIndex=0;sortLen>sortIndex;sortIndex++){if(col=sortList[sortIndex][0],order=sortList[sortIndex][1],dir=0===order,c.sortStable&&a[col]===b[col]&&1===sortLen)return a[c.columns].order-b[c.columns].order;if(num=/n/i.test(ts.getSortType(c.parsers,col)),num&&c.strings[col]?(num="boolean"==typeof ts.string[c.strings[col]]?(dir?1:-1)*(ts.string[c.strings[col]]?-1:1):c.strings[col]?ts.string[c.strings[col]]||0:0,sort=c.numberSorter?c.numberSorter(a[col],b[col],dir,colMax[col],table):ts["sortNumeric"+(dir?"Asc":"Desc")](a[col],b[col],num,colMax[col],col,c)):(x=dir?a:b,y=dir?b:a,sort="function"==typeof textSorter?textSorter(x[col],y[col],dir,col,table):"object"==typeof textSorter&&textSorter.hasOwnProperty(col)?textSorter[col](x[col],y[col],dir,col,table):ts["sortNatural"+(dir?"Asc":"Desc")](a[col],b[col],col,c)),sort)return sort}return a[c.columns].order-b[c.columns].order});c.debug&&console.log("Applying sort "+sortList.toString()+ts.benchmark(sortTime))}},resortComplete:function(c,callback){c.table.isUpdating&&c.$table.triggerHandler("updateComplete",c.table),$.isFunction(callback)&&callback(c.table)},checkResort:function(c,resort,callback){var sortList=$.isArray(resort)?resort:c.sortList,resrt="undefined"==typeof resort?c.resort:resort;resrt===!1||c.serverSideSorting||c.table.isProcessing?(ts.resortComplete(c,callback),ts.applyWidget(c.table,!1)):sortList.length?ts.sortOn(c,sortList,function(){ts.resortComplete(c,callback)},!0):ts.sortReset(c,function(){ts.resortComplete(c,callback),ts.applyWidget(c.table,!1)})},sortOn:function(c,list,callback,init){var table=c.table;c.$table.triggerHandler("sortStart",table),ts.updateHeaderSortCount(c,list),ts.setHeadersCss(c),c.delayInit&&ts.isEmptyObject(c.cache)&&ts.buildCache(c),c.$table.triggerHandler("sortBegin",table),ts.multisort(c),ts.appendCache(c,init),c.$table.triggerHandler("sortBeforeEnd",table),c.$table.triggerHandler("sortEnd",table),ts.applyWidget(table),$.isFunction(callback)&&callback(table)},sortReset:function(c,callback){c.sortList=[],ts.setHeadersCss(c),ts.multisort(c),ts.appendCache(c),$.isFunction(callback)&&callback(c.table)},getSortType:function(parsers,column){return parsers&&parsers[column]?parsers[column].type||"":""},getOrder:function(val){return/^d/i.test(val)||1===val},sortNatural:function(a,b){if(a===b)return 0;var aNum,bNum,aFloat,bFloat,indx,max,regex=ts.regex;if(regex.hex.test(b)){if(aNum=parseInt((a||"").match(regex.hex),16),bNum=parseInt((b||"").match(regex.hex),16),bNum>aNum)return-1;if(aNum>bNum)return 1}for(aNum=(a||"").replace(regex.chunk,"\\0$1\\0").replace(regex.chunks,"").split("\\0"),bNum=(b||"").replace(regex.chunk,"\\0$1\\0").replace(regex.chunks,"").split("\\0"),max=Math.max(aNum.length,bNum.length),indx=0;max>indx;indx++){if(aFloat=isNaN(aNum[indx])?aNum[indx]||0:parseFloat(aNum[indx])||0,bFloat=isNaN(bNum[indx])?bNum[indx]||0:parseFloat(bNum[indx])||0,isNaN(aFloat)!==isNaN(bFloat))return isNaN(aFloat)?1:-1;if(typeof aFloat!=typeof bFloat&&(aFloat+="",bFloat+=""),bFloat>aFloat)return-1;if(aFloat>bFloat)return 1}return 0},sortNaturalAsc:function(a,b,col,c){if(a===b)return 0;var empty=ts.string[c.empties[col]||c.emptyTo];return""===a&&0!==empty?"boolean"==typeof empty?empty?-1:1:-empty||-1:""===b&&0!==empty?"boolean"==typeof empty?empty?1:-1:empty||1:ts.sortNatural(a,b)},sortNaturalDesc:function(a,b,col,c){if(a===b)return 0;var empty=ts.string[c.empties[col]||c.emptyTo];return""===a&&0!==empty?"boolean"==typeof empty?empty?-1:1:empty||1:""===b&&0!==empty?"boolean"==typeof empty?empty?1:-1:-empty||-1:ts.sortNatural(b,a)},sortText:function(a,b){return a>b?1:b>a?-1:0},getTextValue:function(val,num,max){if(max){var indx,len=val?val.length:0,n=max+num;for(indx=0;len>indx;indx++)n+=val.charCodeAt(indx);return num*n}return 0},sortNumericAsc:function(a,b,num,max,col,c){if(a===b)return 0;var empty=ts.string[c.empties[col]||c.emptyTo];return""===a&&0!==empty?"boolean"==typeof empty?empty?-1:1:-empty||-1:""===b&&0!==empty?"boolean"==typeof empty?empty?1:-1:empty||1:(isNaN(a)&&(a=ts.getTextValue(a,num,max)),isNaN(b)&&(b=ts.getTextValue(b,num,max)),a-b)},sortNumericDesc:function(a,b,num,max,col,c){if(a===b)return 0;var empty=ts.string[c.empties[col]||c.emptyTo];return""===a&&0!==empty?"boolean"==typeof empty?empty?-1:1:empty||1:""===b&&0!==empty?"boolean"==typeof empty?empty?1:-1:-empty||-1:(isNaN(a)&&(a=ts.getTextValue(a,num,max)),isNaN(b)&&(b=ts.getTextValue(b,num,max)),b-a)},sortNumeric:function(a,b){return a-b},addWidget:function(widget){widget.id&&!ts.isEmptyObject(ts.getWidgetById(widget.id))&&console.warn('"'+widget.id+'" widget was loaded more than once!'),ts.widgets[ts.widgets.length]=widget},hasWidget:function($table,name){return $table=$($table),$table.length&&$table[0].config&&$table[0].config.widgetInit[name]||!1},getWidgetById:function(name){var indx,widget,len=ts.widgets.length;for(indx=0;len>indx;indx++)if(widget=ts.widgets[indx],widget&&widget.id&&widget.id.toLowerCase()===name.toLowerCase())return widget},applyWidgetOptions:function(table){var indx,widget,c=table.config,len=c.widgets.length;if(len)for(indx=0;len>indx;indx++)widget=ts.getWidgetById(c.widgets[indx]),widget&&widget.options&&(c.widgetOptions=$.extend(!0,{},widget.options,c.widgetOptions))},addWidgetFromClass:function(table){var len,indx,c=table.config,regex="^"+c.widgetClass.replace(ts.regex.templateName,"(\\S+)+")+"$",widgetClass=new RegExp(regex,"g"),widgets=(table.className||"").split(ts.regex.spaces);if(widgets.length)for(len=widgets.length,indx=0;len>indx;indx++)widgets[indx].match(widgetClass)&&(c.widgets[c.widgets.length]=widgets[indx].replace(widgetClass,"$1"))},applyWidgetId:function(table,id,init){table=$(table)[0];var applied,time,name,c=table.config,wo=c.widgetOptions,widget=ts.getWidgetById(id);widget&&(name=widget.id,applied=!1,$.inArray(name,c.widgets)<0&&(c.widgets[c.widgets.length]=name),c.debug&&(time=new Date),(init||!c.widgetInit[name])&&(c.widgetInit[name]=!0,table.hasInitialized&&ts.applyWidgetOptions(table),"function"==typeof widget.init&&(applied=!0,c.debug&&console[console.group?"group":"log"]("Initializing "+name+" widget"),widget.init(table,widget,c,wo))),init||"function"!=typeof widget.format||(applied=!0,c.debug&&console[console.group?"group":"log"]("Updating "+name+" widget"),widget.format(table,c,wo,!1)),c.debug&&applied&&(console.log("Completed "+(init?"initializing ":"applying ")+name+" widget"+ts.benchmark(time)),console.groupEnd&&console.groupEnd()))},applyWidget:function(table,init,callback){table=$(table)[0];var indx,len,names,widget,time,c=table.config,widgets=[];if(init===!1||!table.hasInitialized||!table.isApplyingWidgets&&!table.isUpdating){if(c.debug&&(time=new Date),ts.addWidgetFromClass(table),clearTimeout(c.timerReady),c.widgets.length){for(table.isApplyingWidgets=!0,c.widgets=$.grep(c.widgets,function(val,index){return $.inArray(val,c.widgets)===index}),names=c.widgets||[],len=names.length,indx=0;len>indx;indx++)widget=ts.getWidgetById(names[indx]),widget&&widget.id?(widget.priority||(widget.priority=10),widgets[indx]=widget):c.debug&&console.warn('"'+names[indx]+'" widget code does not exist!');for(widgets.sort(function(a,b){return a.priority<b.priority?-1:a.priority===b.priority?0:1}),len=widgets.length,c.debug&&console[console.group?"group":"log"]("Start "+(init?"initializing":"applying")+" widgets"),indx=0;len>indx;indx++)widget=widgets[indx],widget&&widget.id&&ts.applyWidgetId(table,widget.id,init);c.debug&&console.groupEnd&&console.groupEnd(),init||"function"!=typeof callback||callback(table)}c.timerReady=setTimeout(function(){table.isApplyingWidgets=!1,$.data(table,"lastWidgetApplication",new Date),c.$table.triggerHandler("tablesorter-ready")},10),c.debug&&(widget=c.widgets.length,console.log("Completed "+(init===!0?"initializing ":"applying ")+widget+" widget"+(1!==widget?"s":"")+ts.benchmark(time)))}},removeWidget:function(table,name,refreshing){table=$(table)[0];var index,widget,indx,len,c=table.config;if(name===!0)for(name=[],len=ts.widgets.length,indx=0;len>indx;indx++)widget=ts.widgets[indx],widget&&widget.id&&(name[name.length]=widget.id);else name=($.isArray(name)?name.join(","):name||"").toLowerCase().split(/[\s,]+/);for(len=name.length,index=0;len>index;index++)widget=ts.getWidgetById(name[index]),indx=$.inArray(name[index],c.widgets),indx>=0&&refreshing!==!0&&c.widgets.splice(indx,1),widget&&widget.remove&&(c.debug&&console.log((refreshing?"Refreshing":"Removing")+' "'+name[index]+'" widget'),widget.remove(table,c,c.widgetOptions,refreshing),c.widgetInit[name[index]]=!1)},refreshWidgets:function(table,doAll,dontapply){table=$(table)[0];var indx,widget,c=table.config,curWidgets=c.widgets,widgets=ts.widgets,len=widgets.length,list=[],callback=function(table){$(table).triggerHandler("refreshComplete")};for(indx=0;len>indx;indx++)widget=widgets[indx],widget&&widget.id&&(doAll||$.inArray(widget.id,curWidgets)<0)&&(list[list.length]=widget.id);ts.removeWidget(table,list.join(","),!0),dontapply!==!0?(ts.applyWidget(table,doAll||!1,callback),doAll&&ts.applyWidget(table,!1,callback)):callback(table)},benchmark:function(diff){return" ("+((new Date).getTime()-diff.getTime())+" ms)"},log:function(){console.log(arguments)},isEmptyObject:function(obj){for(var name in obj)return!1;return!0},isValueInArray:function(column,arry){var indx,len=arry&&arry.length||0;for(indx=0;len>indx;indx++)if(arry[indx][0]===column)return indx;return-1},formatFloat:function(str,table){if("string"!=typeof str||""===str)return str;var num,usFormat=table&&table.config?table.config.usNumberFormat!==!1:"undefined"!=typeof table?table:!0;return str=usFormat?str.replace(ts.regex.comma,""):str.replace(ts.regex.digitNonUS,"").replace(ts.regex.comma,"."),ts.regex.digitNegativeTest.test(str)&&(str=str.replace(ts.regex.digitNegativeReplace,"-$1")),num=parseFloat(str),isNaN(num)?$.trim(str):num},isDigit:function(str){return isNaN(str)?ts.regex.digitTest.test(str.toString().replace(ts.regex.digitReplace,"")):""!==str},computeColumnIndex:function($rows,c){var i,j,k,l,cell,cells,rowIndex,rowSpan,colSpan,firstAvailCol,columns=c&&c.columns||0,matrix=[],matrixrow=new Array(columns);for(i=0;i<$rows.length;i++)for(cells=$rows[i].cells,j=0;j<cells.length;j++){for(cell=cells[j],rowIndex=cell.parentNode.rowIndex,rowSpan=cell.rowSpan||1,colSpan=cell.colSpan||1,"undefined"==typeof matrix[rowIndex]&&(matrix[rowIndex]=[]),k=0;k<matrix[rowIndex].length+1;k++)if("undefined"==typeof matrix[rowIndex][k]){firstAvailCol=k;break}for(columns&&cell.cellIndex===firstAvailCol||(cell.setAttribute?cell.setAttribute("data-column",firstAvailCol):$(cell).attr("data-column",firstAvailCol)),k=rowIndex;rowIndex+rowSpan>k;k++)for("undefined"==typeof matrix[k]&&(matrix[k]=[]),matrixrow=matrix[k],l=firstAvailCol;firstAvailCol+colSpan>l;l++)matrixrow[l]="x"}return matrixrow.length},fixColumnWidth:function(table){table=$(table)[0];var overallWidth,percent,$tbodies,len,index,c=table.config,$colgroup=c.$table.children("colgroup");if($colgroup.length&&$colgroup.hasClass(ts.css.colgroup)&&$colgroup.remove(),c.widthFixed&&0===c.$table.children("colgroup").length){for($colgroup=$('<colgroup class="'+ts.css.colgroup+'">'),overallWidth=c.$table.width(),$tbodies=c.$tbodies.find("tr:first").children(":visible"),len=$tbodies.length,index=0;len>index;index++)percent=parseInt($tbodies.eq(index).width()/overallWidth*1e3,10)/10+"%",$colgroup.append($("<col>").css("width",percent));c.$table.prepend($colgroup)}},getData:function(header,configHeader,key){var meta,cl4ss,val="",$header=$(header);return $header.length?(meta=$.metadata?$header.metadata():!1,cl4ss=" "+($header.attr("class")||""),"undefined"!=typeof $header.data(key)||"undefined"!=typeof $header.data(key.toLowerCase())?val+=$header.data(key)||$header.data(key.toLowerCase()):meta&&"undefined"!=typeof meta[key]?val+=meta[key]:configHeader&&"undefined"!=typeof configHeader[key]?val+=configHeader[key]:" "!==cl4ss&&cl4ss.match(" "+key+"-")&&(val=cl4ss.match(new RegExp("\\s"+key+"-([\\w-]+)"))[1]||""),$.trim(val)):""},getColumnData:function(table,obj,indx,getCell,$headers){if("undefined"!=typeof obj&&null!==obj){table=$(table)[0];var $header,key,c=table.config,$cells=$headers||c.$headers,$cell=c.$headerIndexed&&c.$headerIndexed[indx]||$cells.filter('[data-column="'+indx+'"]:last');if(obj[indx])return getCell?obj[indx]:obj[$cells.index($cell)];for(key in obj)if("string"==typeof key&&($header=$cell.filter(key).add($cell.find(key)),$header.length))return obj[key]}},isProcessing:function($table,toggle,$headers){$table=$($table);var c=$table[0].config,$header=$headers||$table.find("."+ts.css.header);toggle?("undefined"!=typeof $headers&&c.sortList.length>0&&($header=$header.filter(function(){return this.sortDisabled?!1:ts.isValueInArray(parseFloat($(this).attr("data-column")),c.sortList)>=0})),$table.add($header).addClass(ts.css.processing+" "+c.cssProcessing)):$table.add($header).removeClass(ts.css.processing+" "+c.cssProcessing)},processTbody:function(table,$tb,getIt){if(table=$(table)[0],getIt)return table.isProcessing=!0,$tb.before('<colgroup class="tablesorter-savemyplace"/>'),$.fn.detach?$tb.detach():$tb.remove();var holdr=$(table).find("colgroup.tablesorter-savemyplace");$tb.insertAfter(holdr),holdr.remove(),table.isProcessing=!1},clearTableBody:function(table){$(table)[0].config.$tbodies.children().detach()},characterEquivalents:{a:"",A:"",c:"",C:"",e:"",E:"",i:"",I:"",o:"",O:"",ss:"",SS:"",u:"",U:""},replaceAccents:function(str){var chr,acc="[",eq=ts.characterEquivalents;if(!ts.characterRegex){ts.characterRegexArray={};for(chr in eq)"string"==typeof chr&&(acc+=eq[chr],ts.characterRegexArray[chr]=new RegExp("["+eq[chr]+"]","g"));ts.characterRegex=new RegExp(acc+"]")}if(ts.characterRegex.test(str))for(chr in eq)"string"==typeof chr&&(str=str.replace(ts.characterRegexArray[chr],chr));return str},restoreHeaders:function(table){var index,$cell,c=$(table)[0].config,$headers=c.$table.find(c.selectorHeaders),len=$headers.length;for(index=0;len>index;index++)$cell=$headers.eq(index),$cell.find("."+ts.css.headerIn).length&&$cell.html(c.headerContent[index])},destroy:function(table,removeClasses,callback){if(table=$(table)[0],table.hasInitialized){ts.removeWidget(table,!0,!1);var events,$t=$(table),c=table.config,debug=c.debug,$h=$t.find("thead:first"),$r=$h.find("tr."+ts.css.headerRow).removeClass(ts.css.headerRow+" "+c.cssHeaderRow),$f=$t.find("tfoot:first > tr").children("th, td");removeClasses===!1&&$.inArray("uitheme",c.widgets)>=0&&($t.triggerHandler("applyWidgetId",["uitheme"]),$t.triggerHandler("applyWidgetId",["zebra"])),$h.find("tr").not($r).remove(),events="sortReset update updateRows updateAll updateHeaders updateCell addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets removeWidget destroy mouseup mouseleave "+"keypress sortBegin sortEnd resetToLoadState ".split(" ").join(c.namespace+" "),$t.removeData("tablesorter").unbind(events.replace(ts.regex.spaces," ")),c.$headers.add($f).removeClass([ts.css.header,c.cssHeader,c.cssAsc,c.cssDesc,ts.css.sortAsc,ts.css.sortDesc,ts.css.sortNone].join(" ")).removeAttr("data-column").removeAttr("aria-label").attr("aria-disabled","true"),$r.find(c.selectorSort).unbind("mousedown mouseup keypress ".split(" ").join(c.namespace+" ").replace(ts.regex.spaces," ")),ts.restoreHeaders(table),$t.toggleClass(ts.css.table+" "+c.tableClass+" tablesorter-"+c.theme,removeClasses===!1),table.hasInitialized=!1,delete table.config.cache,"function"==typeof callback&&callback(table),debug&&console.log("tablesorter has been removed")}}};$.fn.tablesorter=function(settings){return this.each(function(){var table=this,c=$.extend(!0,{},ts.defaults,settings,ts.instanceMethods);c.originalSettings=settings,!table.hasInitialized&&ts.buildTable&&"TABLE"!==this.nodeName?ts.buildTable(table,c):ts.setup(table,c)})},window.console&&window.console.log||(ts.logs=[],console={},console.log=console.warn=console.error=console.table=function(){var arg=arguments.length>1?arguments:arguments[0];ts.logs[ts.logs.length]={date:Date.now(),log:arg}}),ts.addParser({id:"no-parser",is:function(){return!1},format:function(){return""},type:"text"}),ts.addParser({id:"text",is:function(){return!0},format:function(str,table){var c=table.config;return str&&(str=$.trim(c.ignoreCase?str.toLocaleLowerCase():str),str=c.sortLocaleCompare?ts.replaceAccents(str):str),str},type:"text"}),ts.regex.nondigit=/[^\w,. \-()]/g,ts.addParser({id:"digit",is:function(str){return ts.isDigit(str)},format:function(str,table){var num=ts.formatFloat((str||"").replace(ts.regex.nondigit,""),table);return str&&"number"==typeof num?num:str?$.trim(str&&table.config.ignoreCase?str.toLocaleLowerCase():str):str},type:"numeric"}),ts.regex.currencyReplace=/[+\-,. ]/g,ts.regex.currencyTest=/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/,ts.addParser({id:"currency",is:function(str){return str=(str||"").replace(ts.regex.currencyReplace,""),ts.regex.currencyTest.test(str)},format:function(str,table){var num=ts.formatFloat((str||"").replace(ts.regex.nondigit,""),table);return str&&"number"==typeof num?num:str?$.trim(str&&table.config.ignoreCase?str.toLocaleLowerCase():str):str},type:"numeric"}),ts.regex.urlProtocolTest=/^(https?|ftp|file):\/\//,ts.regex.urlProtocolReplace=/(https?|ftp|file):\/\//,ts.addParser({id:"url",is:function(str){return ts.regex.urlProtocolTest.test(str)},format:function(str){return str?$.trim(str.replace(ts.regex.urlProtocolReplace,"")):str},parsed:!0,type:"text"}),ts.regex.dash=/-/g,ts.regex.isoDate=/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,ts.addParser({id:"isoDate",is:function(str){return ts.regex.isoDate.test(str)},format:function(str){var date=str?new Date(str.replace(ts.regex.dash,"/")):str;return date instanceof Date&&isFinite(date)?date.getTime():str},type:"numeric"}),ts.regex.percent=/%/g,ts.regex.percentTest=/(\d\s*?%|%\s*?\d)/,ts.addParser({id:"percent",is:function(str){return ts.regex.percentTest.test(str)&&str.length<15},format:function(str,table){return str?ts.formatFloat(str.replace(ts.regex.percent,""),table):str},type:"numeric"}),ts.addParser({id:"image",is:function(str,table,node,$node){return $node.find("img").length>0},format:function(str,table,cell){return $(cell).find("img").attr(table.config.imgAttr||"alt")||str},parsed:!0,type:"text"}),ts.regex.dateReplace=/(\S)([AP]M)$/i,ts.regex.usLongDateTest1=/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i,ts.regex.usLongDateTest2=/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i,ts.addParser({id:"usLongDate",is:function(str){return ts.regex.usLongDateTest1.test(str)||ts.regex.usLongDateTest2.test(str)},format:function(str){var date=str?new Date(str.replace(ts.regex.dateReplace,"$1 $2")):str;return date instanceof Date&&isFinite(date)?date.getTime():str},type:"numeric"}),ts.regex.shortDateTest=/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/,ts.regex.shortDateReplace=/[\-.,]/g,ts.regex.shortDateXXY=/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,ts.regex.shortDateYMD=/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,ts.convertFormat=function(dateString,format){dateString=(dateString||"").replace(ts.regex.spaces," ").replace(ts.regex.shortDateReplace,"/"),"mmddyyyy"===format?dateString=dateString.replace(ts.regex.shortDateXXY,"$3/$1/$2"):"ddmmyyyy"===format?dateString=dateString.replace(ts.regex.shortDateXXY,"$3/$2/$1"):"yyyymmdd"===format&&(dateString=dateString.replace(ts.regex.shortDateYMD,"$1/$2/$3"));var date=new Date(dateString);return date instanceof Date&&isFinite(date)?date.getTime():""},ts.addParser({id:"shortDate",is:function(str){return str=(str||"").replace(ts.regex.spaces," ").replace(ts.regex.shortDateReplace,"/"),ts.regex.shortDateTest.test(str)},format:function(str,table,cell,cellIndex){if(str){var c=table.config,$header=c.$headerIndexed[cellIndex],format=$header.length&&$header.data("dateFormat")||ts.getData($header,ts.getColumnData(table,c.headers,cellIndex),"dateFormat")||c.dateFormat;return $header.length&&$header.data("dateFormat",format),ts.convertFormat(str,format)||str}return str},type:"numeric"}),ts.regex.timeTest=/^([1-9]|1[0-2]):([0-5]\d)(\s[AP]M)$|^((?:[01]\d|[2][0-4]):[0-5]\d)$/i,ts.regex.timeMatch=/([1-9]|1[0-2]):([0-5]\d)(\s[AP]M)|((?:[01]\d|[2][0-4]):[0-5]\d)/i,ts.addParser({id:"time",is:function(str){return ts.regex.timeTest.test(str)},format:function(str){var temp,timePart=(str||"").match(ts.regex.timeMatch),orig=new Date(str),time=str&&(null!==timePart?timePart[0]:"00:00 AM"),date=time?new Date("2000/01/01 "+time.replace(ts.regex.dateReplace,"$1 $2")):time;return date instanceof Date&&isFinite(date)?(temp=orig instanceof Date&&isFinite(orig)?orig.getTime():0,temp?parseFloat(date.getTime()+"."+orig.getTime()):date.getTime()):str},type:"numeric"}),ts.addParser({id:"metadata",is:function(){return!1},format:function(str,table,cell){var c=table.config,p=c.parserMetadataName?c.parserMetadataName:"sortValue";return $(cell).metadata()[p]},type:"numeric"}),ts.addWidget({id:"zebra",priority:90,format:function(table,c,wo){var $visibleRows,$row,count,isEven,tbodyIndex,rowIndex,len,child=new RegExp(c.cssChildRow,"i"),$tbodies=c.$tbodies.add($(c.namespace+"_extra_table").children("tbody:not(."+c.cssInfoBlock+")"));for(tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++)for(count=0,$visibleRows=$tbodies.eq(tbodyIndex).children("tr:visible").not(c.selectorRemove),len=$visibleRows.length,rowIndex=0;len>rowIndex;rowIndex++)$row=$visibleRows.eq(rowIndex),child.test($row[0].className)||count++,isEven=count%2===0,$row.removeClass(wo.zebra[isEven?1:0]).addClass(wo.zebra[isEven?0:1])},remove:function(table,c,wo,refreshing){if(!refreshing){var tbodyIndex,$tbody,$tbodies=c.$tbodies,toRemove=(wo.zebra||["even","odd"]).join(" ");for(tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++)$tbody=ts.processTbody(table,$tbodies.eq(tbodyIndex),!0),$tbody.children().removeClass(toRemove),ts.processTbody(table,$tbody,!1)}}})}(jQuery),/*!
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
function($){function simulateMouseEvent(event,simulatedType){if(!(event.originalEvent.touches.length>1)){event.preventDefault();var touch=event.originalEvent.changedTouches[0],simulatedEvent=document.createEvent("MouseEvents");simulatedEvent.initMouseEvent(simulatedType,!0,!0,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,!1,!1,!1,!1,0,null),event.target.dispatchEvent(simulatedEvent)}}if($.support.touch="ontouchend"in document,$.support.touch){var touchHandled,mouseProto=$.ui.mouse.prototype,_mouseInit=mouseProto._mouseInit;mouseProto._touchStart=function(event){var self=this;!touchHandled&&self._mouseCapture(event.originalEvent.changedTouches[0])&&(touchHandled=!0,self._touchMoved=!1,simulateMouseEvent(event,"mouseover"),simulateMouseEvent(event,"mousemove"),simulateMouseEvent(event,"mousedown"))},mouseProto._touchMove=function(event){touchHandled&&(this._touchMoved=!0,simulateMouseEvent(event,"mousemove"))},mouseProto._touchEnd=function(event){touchHandled&&(simulateMouseEvent(event,"mouseup"),simulateMouseEvent(event,"mouseout"),this._touchMoved||simulateMouseEvent(event,"click"),touchHandled=!1)},mouseProto._mouseInit=function(){var self=this;self.element.bind("touchstart",$.proxy(self,"_touchStart")).bind("touchmove",$.proxy(self,"_touchMove")).bind("touchend",$.proxy(self,"_touchEnd")),_mouseInit.call(self)}}}(jQuery),/*

	jQuery Tags Input Plugin 1.3.3

	Copyright (c) 2011 XOXCO, Inc

	Documentation for this plugin lives here:
	http://xoxco.com/clickable/jquery-tags-input

	Licensed under the MIT license:
	http://www.opensource.org/licenses/mit-license.php

	ben@xoxco.com

*/
function($){var delimiter=new Array,tags_callbacks=new Array;$.fn.doAutosize=function(o){var minWidth=$(this).data("minwidth"),maxWidth=$(this).data("maxwidth"),val="",input=$(this),testSubject=$("#"+$(this).data("tester_id"));if(val!==(val=input.val())){var escaped=val.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");testSubject.html(escaped);var testerWidth=testSubject.width(),newWidth=testerWidth+o.comfortZone>=minWidth?testerWidth+o.comfortZone:minWidth,currentWidth=input.width(),isValidWidthChange=currentWidth>newWidth&&newWidth>=minWidth||newWidth>minWidth&&maxWidth>newWidth;isValidWidthChange&&input.width(newWidth)}},$.fn.resetAutosize=function(options){var minWidth=$(this).data("minwidth")||options.minInputWidth||$(this).width(),maxWidth=$(this).data("maxwidth")||options.maxInputWidth||$(this).closest(".tagsinput").width()-options.inputPadding,input=$(this),testSubject=$("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:input.css("fontSize"),fontFamily:input.css("fontFamily"),fontWeight:input.css("fontWeight"),letterSpacing:input.css("letterSpacing"),whiteSpace:"nowrap"}),testerId=$(this).attr("id")+"_autosize_tester";!$("#"+testerId).length>0&&(testSubject.attr("id",testerId),testSubject.appendTo("body")),input.data("minwidth",minWidth),input.data("maxwidth",maxWidth),input.data("tester_id",testerId),input.css("width",minWidth)},$.fn.addTag=function(value,options){return options=jQuery.extend({focus:!1,callback:!0},options),this.each(function(){var id=$(this).attr("id"),tagslist=$(this).val().split(delimiter[id]);if(""==tagslist[0]&&(tagslist=new Array),value=jQuery.trim(value),options.unique){var skipTag=$(this).tagExist(value);1==skipTag&&$("#"+id+"_tag").addClass("not_valid")}else var skipTag=!1;if(""!=value&&1!=skipTag){if($("<span>").addClass("tag").append($("<span>").text(value).append("&nbsp;&nbsp;"),$("<a>",{href:"#",title:"Remove tag"}).html("&times;").click(function(){return $("#"+id).removeTag(escape(value))})).insertBefore("#"+id+"_addTag"),tagslist.push(value),$("#"+id+"_tag").val(""),options.focus?$("#"+id+"_tag").focus():$("#"+id+"_tag").blur(),$.fn.tagsInput.updateTagsField(this,tagslist),options.callback&&tags_callbacks[id]&&tags_callbacks[id].onAddTag){var f=tags_callbacks[id].onAddTag;f.call(this,value)}if(tags_callbacks[id]&&tags_callbacks[id].onChange){var i=tagslist.length,f=tags_callbacks[id].onChange;f.call(this,$(this),tagslist[i-1])}}}),!1},$.fn.removeTag=function(value){return value=unescape(value),this.each(function(){var id=$(this).attr("id"),old=$(this).val().split(delimiter[id]);for($("#"+id+"_tagsinput .tag").remove(),str="",i=0;i<old.length;i++)old[i]!=value&&(str=str+delimiter[id]+old[i]);if($.fn.tagsInput.importTags(this,str),tags_callbacks[id]&&tags_callbacks[id].onRemoveTag){var f=tags_callbacks[id].onRemoveTag;f.call(this,value)}}),!1},$.fn.tagExist=function(val){var id=$(this).attr("id"),tagslist=$(this).val().split(delimiter[id]);return jQuery.inArray(val,tagslist)>=0},$.fn.importTags=function(str){var id=$(this).attr("id");$("#"+id+"_tagsinput .tag").remove(),$.fn.tagsInput.importTags(this,str)},$.fn.tagsInput=function(options){var settings=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},options),uniqueIdCounter=0;return this.each(function(){if("undefined"==typeof $(this).attr("data-tagsinput-init")){$(this).attr("data-tagsinput-init",!0),settings.hide&&$(this).hide();var id=$(this).attr("id");(!id||delimiter[$(this).attr("id")])&&(id=$(this).attr("id","tags"+(new Date).getTime()+uniqueIdCounter++).attr("id"));var data=jQuery.extend({pid:id,real_input:"#"+id,holder:"#"+id+"_tagsinput",input_wrapper:"#"+id+"_addTag",fake_input:"#"+id+"_tag"},settings);delimiter[id]=data.delimiter,(settings.onAddTag||settings.onRemoveTag||settings.onChange)&&(tags_callbacks[id]=new Array,tags_callbacks[id].onAddTag=settings.onAddTag,tags_callbacks[id].onRemoveTag=settings.onRemoveTag,tags_callbacks[id].onChange=settings.onChange);var markup='<div id="'+id+'_tagsinput" class="tagsinput"><div id="'+id+'_addTag">';if(settings.interactive&&(markup=markup+'<input id="'+id+'_tag" value="" placeholder="'+settings.defaultText+'" />'),markup+='</div><div class="tags_clear"></div></div>',$(markup).insertAfter(this),$(data.holder).css("width",settings.width),$(data.holder).css("min-height",settings.height),$(data.holder).css("height",settings.height),""!=$(data.real_input).val()&&$.fn.tagsInput.importTags($(data.real_input),$(data.real_input).val()),settings.interactive){if($(data.fake_input).val($(data.fake_input).attr("data-default")),$(data.fake_input).css("color",settings.placeholderColor),$(data.fake_input).resetAutosize(settings),$(data.holder).bind("click",data,function(event){$(event.data.fake_input).focus()}),$(data.fake_input).bind("focus",data,function(event){$(event.data.fake_input).val()==$(event.data.fake_input).attr("data-default")&&$(event.data.fake_input).val(""),$(event.data.fake_input).css("color","#000000")}),void 0!=settings.autocomplete_url){autocomplete_options={source:settings.autocomplete_url};for(attrname in settings.autocomplete)autocomplete_options[attrname]=settings.autocomplete[attrname];void 0!==jQuery.Autocompleter?($(data.fake_input).autocomplete(settings.autocomplete_url,settings.autocomplete),$(data.fake_input).bind("result",data,function(event,data){data&&$("#"+id).addTag(data[0]+"",{focus:!0,unique:settings.unique})})):void 0!==jQuery.ui.autocomplete&&($(data.fake_input).autocomplete(autocomplete_options),$(data.fake_input).bind("autocompleteselect",data,function(event,ui){return $(event.data.real_input).addTag(ui.item.value,{focus:!0,unique:settings.unique}),!1}))}else $(data.fake_input).bind("blur",data,function(event){var d=$(this).attr("data-default");return""!=$(event.data.fake_input).val()&&$(event.data.fake_input).val()!=d?event.data.minChars<=$(event.data.fake_input).val().length&&(!event.data.maxChars||event.data.maxChars>=$(event.data.fake_input).val().length)&&$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:!0,unique:settings.unique}):($(event.data.fake_input).val($(event.data.fake_input).attr("data-default")),$(event.data.fake_input).css("color",settings.placeholderColor)),!1});$(data.fake_input).bind("keypress",data,function(event){return _checkDelimiter(event)?(event.preventDefault(),event.data.minChars<=$(event.data.fake_input).val().length&&(!event.data.maxChars||event.data.maxChars>=$(event.data.fake_input).val().length)&&$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:!0,unique:settings.unique}),$(event.data.fake_input).resetAutosize(settings),!1):(event.data.autosize&&$(event.data.fake_input).doAutosize(settings),void 0)}),data.removeWithBackspace&&$(data.fake_input).bind("keydown",function(event){if(8==event.keyCode&&""==$(this).val()){event.preventDefault();var last_tag=$(this).closest(".tagsinput").find(".tag:last").text(),id=$(this).attr("id").replace(/_tag$/,"");last_tag=last_tag.replace(/[\s]+x$/,""),$("#"+id).removeTag(escape(last_tag)),$(this).trigger("focus")}}),$(data.fake_input).blur(),data.unique&&$(data.fake_input).keydown(function(event){(8==event.keyCode||String.fromCharCode(event.which).match(/\w+|[,/]+/))&&$(this).removeClass("not_valid")})}}}),this},$.fn.tagsInput.updateTagsField=function(obj,tagslist){var id=$(obj).attr("id");$(obj).val(tagslist.join(delimiter[id]))},$.fn.tagsInput.importTags=function(obj,val){$(obj).val("");var id=$(obj).attr("id"),tags=val.split(delimiter[id]);for(i=0;i<tags.length;i++)$(obj).addTag(tags[i],{focus:!1,callback:!1});if(tags_callbacks[id]&&tags_callbacks[id].onChange){var f=tags_callbacks[id].onChange;f.call(obj,obj,tags[i])}};var _checkDelimiter=function(event){var found=!1;return 13==event.which?!0:("string"==typeof event.data.delimiter?event.which==event.data.delimiter.charCodeAt(0)&&(found=!0):$.each(event.data.delimiter,function(index,delimiter){event.which==delimiter.charCodeAt(0)&&(found=!0)}),found)}}(jQuery),function($){$.fn.colorpicker=function(settings){settings=settings||{},$(this).on("focus",function(e){cpk._parent=$(this),cpk.settings=settings,cpk.register(),e.stopPropagation()}),$(this).on("blur",function(){cpk.close()}),$(this).on("change",function(e){cpk._ignoreChanges||cpk.set(e.target.value)})};var cpk={};cpk.saturation={},cpk.hue={},cpk.alpha={},cpk.calc={},cpk._alpha=1,cpk._hsv={h:0,s:0,v:0},cpk.singleton=function(){var _cpk=$(".cpk-colorpicker");return _cpk.length||(_html_alpha=cpk.settings.alpha===!1?"":'<div class="cpk-alpha-picker"><div class="cpk-alpha-gradient"></div><div class="cpk-alpha-cursor"></div></div>',_cpk=$('<div class="cpk-colorpicker"><div class="cpk-sat-picker"><div class="cpk-sat-cursor"></div></div><div class="cpk-hue-picker"><div class="cpk-hue-cursor"></div></div>'+_html_alpha+"</div>"),cpk.saturation.picker=$(".cpk-sat-picker",_cpk),cpk.saturation.cursor=$(".cpk-sat-cursor",_cpk),cpk.hue.picker=$(".cpk-hue-picker",_cpk),cpk.hue.cursor=$(".cpk-hue-cursor",_cpk),cpk.alpha.picker=$(".cpk-alpha-picker",_cpk),cpk.alpha.cursor=$(".cpk-alpha-cursor",_cpk),cpk.alpha.gradient=$(".cpk-alpha-gradient",_cpk),$(document).on("mousemove",cpk.saturation.update),$(document).on("mousemove",cpk.hue.update),$(document).on("mousemove",cpk.alpha.update),cpk.saturation.picker.on("mousedown",cpk.mousedown("saturation")),cpk.hue.picker.on("mousedown",cpk.mousedown("hue")),cpk.alpha.picker.on("mousedown",cpk.mousedown("alpha")),$(document).mouseup(function(){delete cpk.focus}),_cpk.click(function(e){e.stop()}),$(document).on("colorpicker:hide",function(){cpk.close()})),_cpk},cpk.mousedown=function(target){return function(event){event.stop(),cpk.focus=target,cpk[target].update(event)}},cpk.register=function(){$("body").append(cpk.singleton()),cpk.settings.position=cpk.settings.position||"left",cpk.reposition();var color=cpk._parent.val();color&&cpk.set(color)},cpk.reposition=function(){var _cpk=$(".cpk-colorpicker"),position=cpk._parent.offset(),offsetX=0;"center"==cpk.settings.position&&(offsetX=(cpk._parent.outerWidth()-_cpk.outerWidth())/2);var offsetY=cpk._parent.outerHeight()+5;cpk.singleton().css({left:position.left+offsetX,top:position.top+offsetY})},cpk.close=function(){$(".cpk-colorpicker").remove()},cpk.callback=function(){if(cpk._alpha<1)var rgb=cpk.calc.hsvToRgb(cpk._hsv),color="rgba("+Math.round(rgb.r)+", "+Math.round(rgb.g)+", "+Math.round(rgb.b)+", "+cpk._alpha+")";else var color=cpk.calc.hsvToHex(cpk._hsv);cpk.alpha.updateGradient(),cpk._parent.is("input")&&(cpk._parent.val(color),cpk._ignoreChanges=!0,cpk._parent.trigger("change"),cpk._ignoreChanges=!1),cpk.settings.callback&&cpk.settings.callback(color,cpk._parent)},cpk.saturation.update=function(event){if("saturation"==cpk.focus){var position=cpk.saturation.picker.offset(),x=event.pageX-Math.ceil(position.left),y=event.pageY-Math.ceil(position.top),width=cpk.saturation.picker.width(),height=cpk.saturation.picker.height();x=0>x?0:x,x=x>width?width:x,y=0>y?0:y,y=y>height?height:y,cpk.saturation.cursor.css({left:x+"px",top:y+"px"}),cpk._hsv.s=Math.round(x/width*100),cpk._hsv.v=Math.round(100-y/height*100),cpk.callback()}},cpk.hue.update=function(event){if("hue"==cpk.focus){var position=cpk.hue.picker.offset(),y=event.pageY-Math.ceil(position.top),height=cpk.hue.picker.height();y=0>y?0:y,y=y>height?height:y,cpk.hue.cursor.css({top:y+"px"}),cpk._hsv.h=360-Math.round(y/height*360);var bg=cpk.calc.hsvToHex({s:100,v:100,h:cpk._hsv.h});cpk.saturation.picker.css("background-color",bg),cpk.callback()}},cpk.alpha.update=function(event){if("alpha"==cpk.focus){var position=cpk.alpha.picker.offset(),y=event.pageY-Math.ceil(position.top),height=cpk.alpha.picker.height();y=0>y?0:y,y=y>height?height:y,cpk.alpha.cursor.css({top:y+"px"}),cpk._alpha=+(1-y/height).toFixed(2),cpk.callback()}},cpk.alpha.updateGradient=function(){var rgb=cpk.calc.hsvToRgb(cpk._hsv),from="rgb("+Math.round(rgb.r)+", "+Math.round(rgb.g)+", "+Math.round(rgb.b)+")",to="rgba("+Math.round(rgb.r)+", "+Math.round(rgb.g)+", "+Math.round(rgb.b)+", 0)",gradient="linear-gradient(to bottom, "+from+", "+to+")";cpk.alpha.gradient.css({background:gradient})},cpk.parse=function(color){if(color.match(/^#[0-9a-f]{6}/i))cpk._hsv=cpk.calc.hexToHsv(color),cpk._alpha=1;else if(color.match(/^rgba/i)){var c=color.replace(/(\s+|rgba\(|\))/g,"").split(","),rgb={r:parseInt(c[0]),g:parseInt(c[1]),b:parseInt(c[2])};cpk._hsv=cpk.calc.rgbToHsv(rgb),cpk._alpha=+parseFloat(c[3]).toFixed(2),cpk.settings.alpha===!1&&(cpk._alpha=1)}else if(color.match(/^rgb/i)){var c=color.replace(/(\s+|rgb\(|\))/g,"").split(","),rgb={r:parseInt(c[0]),g:parseInt(c[1]),b:parseInt(c[2])};cpk._hsv=cpk.calc.rgbToHsv(rgb),cpk._alpha=1}},cpk.set=function(color){if(cpk.parse(color),cpk._hsv){var satWidth=cpk.saturation.picker.width(),satHeight=cpk.saturation.picker.height(),bg=cpk.calc.hsvToHex({s:100,v:100,h:cpk._hsv.h});cpk.saturation.picker.css("background-color",bg);var x=cpk._hsv.s/100*satWidth,y=(100-cpk._hsv.v)/100*satHeight;cpk.saturation.cursor.css({left:x+"px",top:y+"px"}),0==cpk._hsv.h&&(cpk._hsv.h=360);var hueHeight=cpk.hue.picker.height(),hueTop=hueHeight-Math.floor(cpk._hsv.h/360*hueHeight);cpk.hue.cursor.css({top:hueTop+"px"});var alphaHeight=cpk.hue.picker.height(),alphaTop=(1-cpk._alpha)*alphaHeight;cpk.alpha.cursor.css({top:alphaTop+"px"}),cpk.alpha.updateGradient()}},cpk.calc.hsvToRgb=function(hsv){var r,g,b,h=hsv.h/360,s=hsv.s/100,v=hsv.v/100,i=Math.floor(6*h),f=6*h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q}return{r:255*r,g:255*g,b:255*b}},cpk.calc.rgbToHsv=function(rgb){r=rgb.r/255,g=rgb.g/255,b=rgb.b/255;var h,s,max=Math.max(r,g,b),min=Math.min(r,g,b),v=max,d=max-min;if(s=0==max?0:d/max,max==min)h=0;else{switch(max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:360*h,s:100*s,v:100*v}},cpk.calc.vHex=function(n){var digits="0123456789abcdef";return n=parseInt(n),0==n||isNaN(n)?"00":(n=Math.floor(Math.min(Math.max(0,n),255)),digits.charAt((n-n%16)/16)+digits.charAt(n%16))},cpk.calc.rgbToHex=function(rgb){return"#"+cpk.calc.vHex(rgb.r)+cpk.calc.vHex(rgb.g)+cpk.calc.vHex(rgb.b)},cpk.calc.vRGB=function(n){return parseInt(n,16)},cpk.calc.hexToRgb=function(hex){return hex=hex.replace(/#/,""),{r:cpk.calc.vRGB(hex.substring(0,2)),g:cpk.calc.vRGB(hex.substring(2,4)),b:cpk.calc.vRGB(hex.substring(4,6))}},cpk.calc.hexToHsv=function(hex){return cpk.calc.rgbToHsv(cpk.calc.hexToRgb(hex))},cpk.calc.hsvToHex=function(hsv){var c=cpk.calc.hsvToRgb(hsv);return cpk.calc.rgbToHex(c)}}(jQuery),/*! jQuery Caret Plugin - v1.5.2 - 2014-03-25
 * https://github.com/acdvorak/jquery.caret
 * Copyright (c) 2012-2014 Andrew C. Dvorak; Licensed MIT */
!function(a,b){var c=document.createElement("input"),d={setSelectionRange:"setSelectionRange"in c||"selectionStart"in c,createTextRange:"createTextRange"in c||"selection"in document},e=/\r\n/g,f=/\r/g,g=function(b){return"undefined"!=typeof b.value?b.value:a(b).text()},h=function(b,c){"undefined"!=typeof b.value?b.value=c:a(b).text(c)},i=function(a,b){var c=g(a).replace(f,""),d=c.length;return"undefined"==typeof b&&(b=d),b=Math.floor(b),0>b&&(b=d+b),0>b&&(b=0),b>d&&(b=d),b},j=function(a,b){return a.hasAttribute?a.hasAttribute(b):"undefined"!=typeof a[b]},k=function(a,b,c,d){this.start=a||0,this.end=b||0,this.length=c||0,this.text=d||""};k.prototype.toString=function(){return JSON.stringify(this,null,"    ")};var l=function(a){return a.selectionStart},m=function(a){var b,c,d,f,h,i;return a.focus(),a.focus(),c=document.selection.createRange(),c&&c.parentElement()===a?(f=g(a),h=f.length,d=a.createTextRange(),d.moveToBookmark(c.getBookmark()),i=a.createTextRange(),i.collapse(!1),b=d.compareEndPoints("StartToEnd",i)>-1?f.replace(e,"\n").length:-d.moveStart("character",-h)):0},n=function(a){return a?d.setSelectionRange?l(a):d.createTextRange?m(a):b:b},o=function(a,b){a.setSelectionRange(b,b)},p=function(a,b){var c=a.createTextRange();c.move("character",b),c.select()},q=function(a,b){a.focus(),b=i(a,b),d.setSelectionRange?o(a,b):d.createTextRange&&p(a,b)},r=function(a,b){var c=n(a),d=g(a).replace(f,""),e=+(c+b.length+(d.length-c)),i=+a.getAttribute("maxlength");if(j(a,"maxlength")&&e>i){var k=b.length-(e-i);b=b.substr(0,k)}h(a,d.substr(0,c)+b+d.substr(c)),q(a,c+b.length)},s=function(a){var b=new k;b.start=a.selectionStart,b.end=a.selectionEnd;var c=Math.min(b.start,b.end),d=Math.max(b.start,b.end);return b.length=d-c,b.text=g(a).substring(c,d),b},t=function(a){var b=new k;a.focus();var c=document.selection.createRange();if(c&&c.parentElement()===a){var d,e,f,h,i=0,j=0,l=g(a);d=l.length,e=l.replace(/\r\n/g,"\n"),f=a.createTextRange(),f.moveToBookmark(c.getBookmark()),h=a.createTextRange(),h.collapse(!1),f.compareEndPoints("StartToEnd",h)>-1?i=j=d:(i=-f.moveStart("character",-d),i+=e.slice(0,i).split("\n").length-1,f.compareEndPoints("EndToEnd",h)>-1?j=d:(j=-f.moveEnd("character",-d),j+=e.slice(0,j).split("\n").length-1)),i-=l.substring(0,i).split("\r\n").length-1,j-=l.substring(0,j).split("\r\n").length-1,b.start=i,b.end=j,b.length=b.end-b.start,b.text=e.substr(b.start,b.length)}return b},u=function(a){return a?d.setSelectionRange?s(a):d.createTextRange?t(a):b:b},v=function(a,b,c){a.setSelectionRange(b,c)},w=function(a,b,c){var d=a.createTextRange();d.moveEnd("textedit",-1),d.moveStart("character",b),d.moveEnd("character",c-b),d.select()},x=function(a,b,c){b=i(a,b),c=i(a,c),d.setSelectionRange?v(a,b,c):d.createTextRange&&w(a,b,c)},y=function(b,c){var d=a(b),e=d.val(),f=u(b),g=+(f.start+c.length+(e.length-f.end)),h=+d.attr("maxlength");if(d.is("[maxlength]")&&g>h){var i=c.length-(g-h);c=c.substr(0,i)}var j=e.substr(0,f.start),k=e.substr(f.end);d.val(j+c+k);var l=f.start,m=l+c.length;x(b,f.length?l:m,m)},z=function(a){var b=window.getSelection(),c=document.createRange();c.selectNodeContents(a),b.removeAllRanges(),b.addRange(c)},A=function(a){var b=document.body.createTextRange();b.moveToElementText(a),b.select()},B=function(b){var c=a(b);return c.is("input, textarea")||b.select?(c.select(),void 0):(d.setSelectionRange?z(b):d.createTextRange&&A(b),void 0)},C=function(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()};a.extend(a.fn,{caret:function(){var a=this.filter("input, textarea");if(0===arguments.length){var b=a.get(0);return n(b)}if("number"==typeof arguments[0]){var c=arguments[0];a.each(function(a,b){q(b,c)})}else{var d=arguments[0];a.each(function(a,b){r(b,d)})}return this},range:function(){var a=this.filter("input, textarea");if(0===arguments.length){var b=a.get(0);return u(b)}if("number"==typeof arguments[0]){var c=arguments[0],d=arguments[1];a.each(function(a,b){x(b,c,d)})}else{var e=arguments[0];a.each(function(a,b){y(b,e)})}return this},selectAll:function(){return this.each(function(a,b){B(b)})}}),a.extend(a,{deselectAll:function(){return C(),this}})}(window.jQuery||window.Zepto||window.$),function(){var PJAX,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};PJAX=function(){function PJAX(){this._submitForm=__bind(this._submitForm,this),this._removeDuplicateFormSubmissionFlag=__bind(this._removeDuplicateFormSubmissionFlag,this),this._reinitializeScripts=__bind(this._reinitializeScripts,this),this._prepareForPopstate=__bind(this._prepareForPopstate,this),this._loadPjaxUrl=__bind(this._loadPjaxUrl,this),this._ensureUnpushedUrl=__bind(this._ensureUnpushedUrl,this),this._addToCache=__bind(this._addToCache,this),this._addCommit=__bind(this._addCommit,this),this.assignElements(),this.observeElements()}return PJAX.prototype.assignElements=function(){return this.selectors={container:"[data-pjax-container]",anchor:"a[data-pjax]",form:"form[data-pjax]",formButton:"form[data-pjax] input:submit"},this.container=$(this.selectors.container),this.cache={}},PJAX.prototype.ensureUrl=function(url){return window.location.pathname!==url&&window.location.href!==url&&window.history.replaceState({},this._title(),url),this.trigger("url-ensured")},PJAX.prototype.loadUrl=function(url,options){var _this=this;return null==options&&(options={}),options.url=url,options.container=this.container,$.pjax(options).done(function(){return _this.trigger("url-loaded")})},PJAX.prototype.observeElements=function(){return $(document).pjax(this.selectors.anchor,this.selectors.container),$(document).on("click",this.selectors.formButton,this._addCommit),$(document).on("submit",this.selectors.form,this._submitForm),$(document).ajaxSuccess(this._loadPjaxUrl),$(this._addToCache),this.on("success",this._addToCache),this.on("popstate",this._prepareForPopstate),this.on("popped",this._reinitializeScripts),this.on("error",this._allowError),this.on("complete",this._removeDuplicateFormSubmissionFlag)},PJAX.prototype.off=function(eventName,handler){return this.container.off("pjax:"+eventName,handler)},PJAX.prototype.on=function(eventName,handler){return this.container.on("pjax:"+eventName,handler)},PJAX.prototype.reload=function(options){return null==options&&(options={}),this.trigger("reload"),this.loadUrl(window.location.href,options)},PJAX.prototype.trigger=function(eventName){return this.container.trigger("pjax:"+eventName)},PJAX.prototype._addCommit=function(event){var element,form,input,value;return event.stop(),element=$(event.target),form=element.parents("form"),input=form.find("input:hidden[name=commit]"),input.exists()||(input=$('<input type="hidden" name="commit">')),value=element.text(),value.blank()&&(value=element.attr("value")),input.attr("value",value),form.append(input),form.submit()},PJAX.prototype._addToCache=function(){var element;return element=$(document.body),this.cache[window.location.href]={classes:element.attr("class"),id:element.attr("id")}},PJAX.prototype._allowError=function(event,xhr){return"This action is taking too long. Please wait and try again."===xhr.responseText?(event.stop(),window.history.back()):void 0},PJAX.prototype._ensureUnpushedUrl=function(){return this.off("complete",this._ensureUnpushedUrl),this.trigger("url-ensured")},PJAX.prototype._loadPjaxUrl=function(event,xhr){return xhr.responseJSON&&xhr.responseJSON.pjax?this.loadUrl(xhr.responseJSON.pjax):void 0},PJAX.prototype._prepareForPopstate=function(){var handler,_this=this;return handler=function(){var entry;return _this.off("end",handler),entry=_this.cache[window.location.href],$("body").attr({"class":entry.classes,id:entry.id}),_this.trigger("popped")},this.on("end",handler)},PJAX.prototype._reinitializeScripts=function(){var script,_i,_len,_ref,_results;for(_ref=this.container.find("script:not(:empty)"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)script=_ref[_i],_results.push($.globalEval($(script).text()));return _results},PJAX.prototype._removeDuplicateFormSubmissionFlag=function(event){var target;return target=$(event.relatedTarget),target.is(this.selectors.form)?target.removeAttr("data-pjax-submitted"):void 0},PJAX.prototype._submitForm=function(event){var form,push;return event.stop(),form=$(event.target),form.data("pjax-submitted")?void 0:(form.attr("data-pjax-submitted",!0),push="get"===form[0].method.toLowerCase(),push=push||form.data("push")===!0,form.data("push")===!1&&(push=!1),push||this.on("complete",this._ensureUnpushedUrl),$.pjax.submit(event,this.selectors.container,{push:push,scrollTo:!1}))},PJAX.prototype._title=function(){return $("title").text()},PJAX}(),this.pjax=new PJAX}.call(this),function(){var _this=this;this.currentUserId=parseInt($('meta[name="current-user-id"]').attr("content"),10),this.environment=$('meta[name="environment"]').attr("content"),this.layout=$('meta[name="layout"]').attr("content")||"unknown",this.refreshCSRF=function(){return _this.csrf={param:$('meta[name="csrf-param"]').attr("content"),token:$('meta[name="csrf-token"]').attr("content")},_this[csrf.param]=csrf.token,_this.csrfParam=csrf.param,_this.csrfToken=csrf.token},this.refreshCSRF(),this.defaultParams=function(additions){var params;return null==additions&&(additions={}),params={},"undefined"!==$.type(csrfParam)&&(params[csrfParam]=csrfToken),$.extend(params,additions),params},this.isMobile=function(){var a;return $("body").width()<800?!0:"true"===$('meta[name="mobile-device"]').attr("content")?!0:(a=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))?!0:!1)}}.call(this),/*!
 * zeroclipboard
 * The Zero Clipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie, and a JavaScript interface.
 * Copyright 2012 Jon Rohan, James M. Greene, .
 * Released under the MIT license
 * http://jonrohan.github.com/ZeroClipboard/
 * v1.1.7
 */
function(){"use strict";var currentElement,_getStyle=function(el,prop){var y=el.style[prop];if(el.currentStyle?y=el.currentStyle[prop]:window.getComputedStyle&&(y=document.defaultView.getComputedStyle(el,null).getPropertyValue(prop)),"auto"==y&&"cursor"==prop)for(var possiblePointers=["a"],i=0;i<possiblePointers.length;i++)if(el.tagName.toLowerCase()==possiblePointers[i])return"pointer";return y},_elementMouseOver=function(event){if(ZeroClipboard.prototype._singleton){event||(event=window.event);var target;this!==window?target=this:event.target?target=event.target:event.srcElement&&(target=event.srcElement),ZeroClipboard.prototype._singleton.setCurrent(target)}},_addEventHandler=function(element,method,func){element.addEventListener?element.addEventListener(method,func,!1):element.attachEvent&&element.attachEvent("on"+method,func)},_removeEventHandler=function(element,method,func){element.removeEventListener?element.removeEventListener(method,func,!1):element.detachEvent&&element.detachEvent("on"+method,func)},_addClass=function(element,value){if(element.addClass)return element.addClass(value),element;if(value&&"string"==typeof value){var classNames=(value||"").split(/\s+/);if(1===element.nodeType)if(element.className){for(var className=" "+element.className+" ",setClass=element.className,c=0,cl=classNames.length;cl>c;c++)className.indexOf(" "+classNames[c]+" ")<0&&(setClass+=" "+classNames[c]);element.className=setClass.replace(/^\s+|\s+$/g,"")}else element.className=value}return element},_removeClass=function(element,value){if(element.removeClass)return element.removeClass(value),element;if(value&&"string"==typeof value||void 0===value){var classNames=(value||"").split(/\s+/);if(1===element.nodeType&&element.className)if(value){for(var className=(" "+element.className+" ").replace(/[\n\t]/g," "),c=0,cl=classNames.length;cl>c;c++)className=className.replace(" "+classNames[c]+" "," ");element.className=className.replace(/^\s+|\s+$/g,"")}else element.className=""}return element},_getDOMObjectPosition=function(obj){var info={left:0,top:0,width:obj.width||obj.offsetWidth||0,height:obj.height||obj.offsetHeight||0,zIndex:9999},zi=_getStyle(obj,"zIndex");for(zi&&"auto"!=zi&&(info.zIndex=parseInt(zi,10));obj;){var borderLeftWidth=parseInt(_getStyle(obj,"borderLeftWidth"),10),borderTopWidth=parseInt(_getStyle(obj,"borderTopWidth"),10);info.left+=isNaN(obj.offsetLeft)?0:obj.offsetLeft,info.left+=isNaN(borderLeftWidth)?0:borderLeftWidth,info.top+=isNaN(obj.offsetTop)?0:obj.offsetTop,info.top+=isNaN(borderTopWidth)?0:borderTopWidth,obj=obj.offsetParent}return info},_noCache=function(path){return(path.indexOf("?")>=0?"&":"?")+"nocache="+(new Date).getTime()},_vars=function(options){var str=[];return options.trustedDomains&&("string"==typeof options.trustedDomains?str.push("trustedDomain="+options.trustedDomains):str.push("trustedDomain="+options.trustedDomains.join(","))),str.join("&")},_inArray=function(elem,array){if(array.indexOf)return array.indexOf(elem);for(var i=0,length=array.length;length>i;i++)if(array[i]===elem)return i;return-1},_prepGlue=function(elements){if("string"==typeof elements)throw new TypeError("ZeroClipboard doesn't accept query strings.");return elements.length?elements:[elements]},ZeroClipboard=function(elements,options){if(elements&&(ZeroClipboard.prototype._singleton||this).glue(elements),ZeroClipboard.prototype._singleton)return ZeroClipboard.prototype._singleton;ZeroClipboard.prototype._singleton=this,this.options={};for(var kd in _defaults)this.options[kd]=_defaults[kd];for(var ko in options)this.options[ko]=options[ko];this.handlers={},ZeroClipboard.detectFlashSupport()&&_bridge()},gluedElements=[];ZeroClipboard.prototype.setCurrent=function(element){currentElement=element,this.reposition(),element.getAttribute("title")&&this.setTitle(element.getAttribute("title")),this.setHandCursor("pointer"==_getStyle(element,"cursor"))},ZeroClipboard.prototype.setText=function(newText){newText&&""!==newText&&(this.options.text=newText,this.ready()&&this.flashBridge.setText(newText))},ZeroClipboard.prototype.setTitle=function(newTitle){newTitle&&""!==newTitle&&this.htmlBridge.setAttribute("title",newTitle)},ZeroClipboard.prototype.setSize=function(width,height){this.ready()&&this.flashBridge.setSize(width,height)},ZeroClipboard.prototype.setHandCursor=function(enabled){this.ready()&&this.flashBridge.setHandCursor(enabled)},ZeroClipboard.version="1.1.7";var _defaults={moviePath:"ZeroClipboard.swf",trustedDomains:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain"};ZeroClipboard.setDefaults=function(options){for(var ko in options)_defaults[ko]=options[ko]},ZeroClipboard.destroy=function(){ZeroClipboard.prototype._singleton.unglue(gluedElements);var bridge=ZeroClipboard.prototype._singleton.htmlBridge;bridge.parentNode.removeChild(bridge),delete ZeroClipboard.prototype._singleton},ZeroClipboard.detectFlashSupport=function(){var hasFlash=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(hasFlash=!0)}catch(error){navigator.mimeTypes["application/x-shockwave-flash"]&&(hasFlash=!0)}return hasFlash};var _bridge=function(){var client=ZeroClipboard.prototype._singleton,container=document.getElementById("global-zeroclipboard-html-bridge");if(!container){var html='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+client.options.moviePath+_noCache(client.options.moviePath)+'"/>         <param name="allowScriptAccess" value="'+client.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+_vars(client.options)+'"/>         <embed src="'+client.options.moviePath+_noCache(client.options.moviePath)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+_vars(client.options)+'"           scale="exactfit">         </embed>       </object>';container=document.createElement("div"),container.id="global-zeroclipboard-html-bridge",container.setAttribute("class","global-zeroclipboard-container"),container.setAttribute("data-clipboard-ready",!1),container.style.position="absolute",container.style.left="-9999px",container.style.top="-9999px",container.style.width="15px",container.style.height="15px",container.style.zIndex="9999",container.innerHTML=html,document.body.appendChild(container)}client.htmlBridge=container,client.flashBridge=document["global-zeroclipboard-flash-bridge"]||container.children[0].lastElementChild};ZeroClipboard.prototype.resetBridge=function(){this.htmlBridge.style.left="-9999px",this.htmlBridge.style.top="-9999px",this.htmlBridge.removeAttribute("title"),this.htmlBridge.removeAttribute("data-clipboard-text"),_removeClass(currentElement,this.options.activeClass),currentElement=null,this.options.text=null},ZeroClipboard.prototype.ready=function(){var ready=this.htmlBridge.getAttribute("data-clipboard-ready");return"true"===ready||ready===!0},ZeroClipboard.prototype.reposition=function(){if(!currentElement)return!1;var pos=_getDOMObjectPosition(currentElement);this.htmlBridge.style.top=pos.top+"px",this.htmlBridge.style.left=pos.left+"px",this.htmlBridge.style.width=pos.width+"px",this.htmlBridge.style.height=pos.height+"px",this.htmlBridge.style.zIndex=pos.zIndex+1,this.setSize(pos.width,pos.height)},ZeroClipboard.dispatch=function(eventName,args){ZeroClipboard.prototype._singleton.receiveEvent(eventName,args)},ZeroClipboard.prototype.on=function(eventName,func){for(var events=eventName.toString().split(/\s/g),i=0;i<events.length;i++)eventName=events[i].toLowerCase().replace(/^on/,""),this.handlers[eventName]||(this.handlers[eventName]=func);this.handlers.noflash&&!ZeroClipboard.detectFlashSupport()&&this.receiveEvent("onNoFlash",null)},ZeroClipboard.prototype.addEventListener=ZeroClipboard.prototype.on,ZeroClipboard.prototype.off=function(eventName,func){for(var events=eventName.toString().split(/\s/g),i=0;i<events.length;i++){eventName=events[i].toLowerCase().replace(/^on/,"");for(var event in this.handlers)event===eventName&&this.handlers[event]===func&&delete this.handlers[event]}},ZeroClipboard.prototype.removeEventListener=ZeroClipboard.prototype.off,ZeroClipboard.prototype.receiveEvent=function(eventName,args){eventName=eventName.toString().toLowerCase().replace(/^on/,"");var element=currentElement;switch(eventName){case"load":if(args&&parseFloat(args.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))<10)return this.receiveEvent("onWrongFlash",{flashVersion:args.flashVersion}),void 0;this.htmlBridge.setAttribute("data-clipboard-ready",!0);break;case"mouseover":_addClass(element,this.options.hoverClass);break;case"mouseout":_removeClass(element,this.options.hoverClass),this.resetBridge();break;case"mousedown":_addClass(element,this.options.activeClass);break;case"mouseup":_removeClass(element,this.options.activeClass);break;case"datarequested":var targetId=element.getAttribute("data-clipboard-target"),targetEl=targetId?document.getElementById(targetId):null;if(targetEl){var textContent=targetEl.value||targetEl.textContent||targetEl.innerText;textContent&&this.setText(textContent)}else{var defaultText=element.getAttribute("data-clipboard-text");defaultText&&this.setText(defaultText)}break;case"complete":this.options.text=null}if(this.handlers[eventName]){var func=this.handlers[eventName];"function"==typeof func?func.call(element,this,args):"string"==typeof func&&window[func].call(element,this,args)}},ZeroClipboard.prototype.glue=function(elements){elements=_prepGlue(elements);for(var i=0;i<elements.length;i++)-1==_inArray(elements[i],gluedElements)&&(gluedElements.push(elements[i]),_addEventHandler(elements[i],"mouseover",_elementMouseOver))},ZeroClipboard.prototype.unglue=function(elements){elements=_prepGlue(elements);for(var i=0;i<elements.length;i++){_removeEventHandler(elements[i],"mouseover",_elementMouseOver);var arrayIndex=_inArray(elements[i],gluedElements);-1!=arrayIndex&&gluedElements.splice(arrayIndex,1)}},"undefined"!=typeof module?module.exports=ZeroClipboard:"function"==typeof define&&define.amd?define(function(){return ZeroClipboard}):window.ZeroClipboard=ZeroClipboard}(),function(root,factory){"function"==typeof define&&define.amd?define("Chartist",[],function(){return root.Chartist=factory()}):"object"==typeof module&&module.exports?module.exports=factory():root.Chartist=factory()}(this,function(){/* Chartist.js 0.11.0
 * Copyright  2017 Gion Kunz
 * Free to use under either the WTFPL license or the MIT license.
 * https://raw.githubusercontent.com/gionkunz/chartist-js/master/LICENSE-WTFPL
 * https://raw.githubusercontent.com/gionkunz/chartist-js/master/LICENSE-MIT
 */
var Chartist={version:"0.11.0"};return function(window,document,Chartist){"use strict";Chartist.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},Chartist.noop=function(n){return n},Chartist.alphaNumerate=function(n){return String.fromCharCode(97+n%26)},Chartist.extend=function(target){var i,source,sourceProp;for(target=target||{},i=1;i<arguments.length;i++){source=arguments[i];for(var prop in source)sourceProp=source[prop],target[prop]="object"!=typeof sourceProp||null===sourceProp||sourceProp instanceof Array?sourceProp:Chartist.extend(target[prop],sourceProp)}return target},Chartist.replaceAll=function(str,subStr,newSubStr){return str.replace(new RegExp(subStr,"g"),newSubStr)},Chartist.ensureUnit=function(value,unit){return"number"==typeof value&&(value+=unit),value},Chartist.quantity=function(input){if("string"==typeof input){var match=/^(\d+)\s*(.*)$/g.exec(input);return{value:+match[1],unit:match[2]||void 0}}return{value:input}},Chartist.querySelector=function(query){return query instanceof Node?query:document.querySelector(query)},Chartist.times=function(length){return Array.apply(null,new Array(length))},Chartist.sum=function(previous,current){return previous+(current?current:0)},Chartist.mapMultiply=function(factor){return function(num){return num*factor}},Chartist.mapAdd=function(addend){return function(num){return num+addend}},Chartist.serialMap=function(arr,cb){var result=[],length=Math.max.apply(null,arr.map(function(e){return e.length}));return Chartist.times(length).forEach(function(e,index){var args=arr.map(function(e){return e[index]});result[index]=cb.apply(null,args)}),result},Chartist.roundWithPrecision=function(value,digits){var precision=Math.pow(10,digits||Chartist.precision);return Math.round(value*precision)/precision},Chartist.precision=8,Chartist.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},Chartist.serialize=function(data){return null===data||void 0===data?data:("number"==typeof data?data=""+data:"object"==typeof data&&(data=JSON.stringify({data:data})),Object.keys(Chartist.escapingMap).reduce(function(result,key){return Chartist.replaceAll(result,key,Chartist.escapingMap[key])},data))},Chartist.deserialize=function(data){if("string"!=typeof data)return data;data=Object.keys(Chartist.escapingMap).reduce(function(result,key){return Chartist.replaceAll(result,Chartist.escapingMap[key],key)},data);try{data=JSON.parse(data),data=void 0!==data.data?data.data:data}catch(e){}return data},Chartist.createSvg=function(container,width,height,className){var svg;return width=width||"100%",height=height||"100%",Array.prototype.slice.call(container.querySelectorAll("svg")).filter(function(svg){return svg.getAttributeNS(Chartist.namespaces.xmlns,"ct")}).forEach(function(svg){container.removeChild(svg)}),svg=new Chartist.Svg("svg").attr({width:width,height:height}).addClass(className),svg._node.style.width=width,svg._node.style.height=height,container.appendChild(svg._node),svg},Chartist.normalizeData=function(data,reverse,multi){var labelCount,output={raw:data,normalized:{}};return output.normalized.series=Chartist.getDataArray({series:data.series||[]},reverse,multi),labelCount=output.normalized.series.every(function(value){return value instanceof Array})?Math.max.apply(null,output.normalized.series.map(function(series){return series.length})):output.normalized.series.length,output.normalized.labels=(data.labels||[]).slice(),Array.prototype.push.apply(output.normalized.labels,Chartist.times(Math.max(0,labelCount-output.normalized.labels.length)).map(function(){return""})),reverse&&Chartist.reverseData(output.normalized),output},Chartist.safeHasProperty=function(object,property){return null!==object&&"object"==typeof object&&object.hasOwnProperty(property)},Chartist.isDataHoleValue=function(value){return null===value||void 0===value||"number"==typeof value&&isNaN(value)},Chartist.reverseData=function(data){data.labels.reverse(),data.series.reverse();for(var i=0;i<data.series.length;i++)"object"==typeof data.series[i]&&void 0!==data.series[i].data?data.series[i].data.reverse():data.series[i]instanceof Array&&data.series[i].reverse()},Chartist.getDataArray=function(data,reverse,multi){function recursiveConvert(value){if(Chartist.safeHasProperty(value,"value"))return recursiveConvert(value.value);if(Chartist.safeHasProperty(value,"data"))return recursiveConvert(value.data);if(value instanceof Array)return value.map(recursiveConvert);if(Chartist.isDataHoleValue(value))return void 0;if(multi){var multiValue={};return"string"==typeof multi?multiValue[multi]=Chartist.getNumberOrUndefined(value):multiValue.y=Chartist.getNumberOrUndefined(value),multiValue.x=value.hasOwnProperty("x")?Chartist.getNumberOrUndefined(value.x):multiValue.x,multiValue.y=value.hasOwnProperty("y")?Chartist.getNumberOrUndefined(value.y):multiValue.y,multiValue}return Chartist.getNumberOrUndefined(value)}return data.series.map(recursiveConvert)},Chartist.normalizePadding=function(padding,fallback){return fallback=fallback||0,"number"==typeof padding?{top:padding,right:padding,bottom:padding,left:padding}:{top:"number"==typeof padding.top?padding.top:fallback,right:"number"==typeof padding.right?padding.right:fallback,bottom:"number"==typeof padding.bottom?padding.bottom:fallback,left:"number"==typeof padding.left?padding.left:fallback}},Chartist.getMetaData=function(series,index){var value=series.data?series.data[index]:series[index];return value?value.meta:void 0},Chartist.orderOfMagnitude=function(value){return Math.floor(Math.log(Math.abs(value))/Math.LN10)},Chartist.projectLength=function(axisLength,length,bounds){return length/bounds.range*axisLength},Chartist.getAvailableHeight=function(svg,options){return Math.max((Chartist.quantity(options.height).value||svg.height())-(options.chartPadding.top+options.chartPadding.bottom)-options.axisX.offset,0)},Chartist.getHighLow=function(data,options,dimension){function recursiveHighLow(data){if(void 0===data)return void 0;if(data instanceof Array)for(var i=0;i<data.length;i++)recursiveHighLow(data[i]);else{var value=dimension?+data[dimension]:+data;findHigh&&value>highLow.high&&(highLow.high=value),findLow&&value<highLow.low&&(highLow.low=value)}}options=Chartist.extend({},options,dimension?options["axis"+dimension.toUpperCase()]:{});var highLow={high:void 0===options.high?-Number.MAX_VALUE:+options.high,low:void 0===options.low?Number.MAX_VALUE:+options.low},findHigh=void 0===options.high,findLow=void 0===options.low;return(findHigh||findLow)&&recursiveHighLow(data),(options.referenceValue||0===options.referenceValue)&&(highLow.high=Math.max(options.referenceValue,highLow.high),highLow.low=Math.min(options.referenceValue,highLow.low)),highLow.high<=highLow.low&&(0===highLow.low?highLow.high=1:highLow.low<0?highLow.high=0:highLow.high>0?highLow.low=0:(highLow.high=1,highLow.low=0)),highLow},Chartist.isNumeric=function(value){return null===value?!1:isFinite(value)},Chartist.isFalseyButZero=function(value){return!value&&0!==value},Chartist.getNumberOrUndefined=function(value){return Chartist.isNumeric(value)?+value:void 0},Chartist.isMultiValue=function(value){return"object"==typeof value&&("x"in value||"y"in value)},Chartist.getMultiValue=function(value,dimension){return Chartist.isMultiValue(value)?Chartist.getNumberOrUndefined(value[dimension||"y"]):Chartist.getNumberOrUndefined(value)},Chartist.rho=function(num){function gcd(p,q){return p%q===0?q:gcd(q,p%q)}function f(x){return x*x+1}if(1===num)return num;var divisor,x1=2,x2=2;if(num%2===0)return 2;do x1=f(x1)%num,x2=f(f(x2))%num,divisor=gcd(Math.abs(x1-x2),num);while(1===divisor);return divisor},Chartist.getBounds=function(axisLength,highLow,scaleMinSpace,onlyInteger){function safeIncrement(value,increment){return value===(value+=increment)&&(value*=1+(increment>0?EPSILON:-EPSILON)),value}var i,newMin,newMax,optimizationCounter=0,bounds={high:highLow.high,low:highLow.low};bounds.valueRange=bounds.high-bounds.low,bounds.oom=Chartist.orderOfMagnitude(bounds.valueRange),bounds.step=Math.pow(10,bounds.oom),bounds.min=Math.floor(bounds.low/bounds.step)*bounds.step,bounds.max=Math.ceil(bounds.high/bounds.step)*bounds.step,bounds.range=bounds.max-bounds.min,bounds.numberOfSteps=Math.round(bounds.range/bounds.step);var length=Chartist.projectLength(axisLength,bounds.step,bounds),scaleUp=scaleMinSpace>length,smallestFactor=onlyInteger?Chartist.rho(bounds.range):0;if(onlyInteger&&Chartist.projectLength(axisLength,1,bounds)>=scaleMinSpace)bounds.step=1;else if(onlyInteger&&smallestFactor<bounds.step&&Chartist.projectLength(axisLength,smallestFactor,bounds)>=scaleMinSpace)bounds.step=smallestFactor;else for(;;){if(scaleUp&&Chartist.projectLength(axisLength,bounds.step,bounds)<=scaleMinSpace)bounds.step*=2;else{if(scaleUp||!(Chartist.projectLength(axisLength,bounds.step/2,bounds)>=scaleMinSpace))break;if(bounds.step/=2,onlyInteger&&bounds.step%1!==0){bounds.step*=2;break}}if(optimizationCounter++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}var EPSILON=2.221e-16;for(bounds.step=Math.max(bounds.step,EPSILON),newMin=bounds.min,newMax=bounds.max;newMin+bounds.step<=bounds.low;)newMin=safeIncrement(newMin,bounds.step);for(;newMax-bounds.step>=bounds.high;)newMax=safeIncrement(newMax,-bounds.step);bounds.min=newMin,bounds.max=newMax,bounds.range=bounds.max-bounds.min;var values=[];for(i=bounds.min;i<=bounds.max;i=safeIncrement(i,bounds.step)){var value=Chartist.roundWithPrecision(i);value!==values[values.length-1]&&values.push(value)}return bounds.values=values,bounds},Chartist.polarToCartesian=function(centerX,centerY,radius,angleInDegrees){var angleInRadians=(angleInDegrees-90)*Math.PI/180;return{x:centerX+radius*Math.cos(angleInRadians),y:centerY+radius*Math.sin(angleInRadians)}},Chartist.createChartRect=function(svg,options,fallbackPadding){var hasAxis=!(!options.axisX&&!options.axisY),yAxisOffset=hasAxis?options.axisY.offset:0,xAxisOffset=hasAxis?options.axisX.offset:0,width=svg.width()||Chartist.quantity(options.width).value||0,height=svg.height()||Chartist.quantity(options.height).value||0,normalizedPadding=Chartist.normalizePadding(options.chartPadding,fallbackPadding);width=Math.max(width,yAxisOffset+normalizedPadding.left+normalizedPadding.right),height=Math.max(height,xAxisOffset+normalizedPadding.top+normalizedPadding.bottom);var chartRect={padding:normalizedPadding,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return hasAxis?("start"===options.axisX.position?(chartRect.y2=normalizedPadding.top+xAxisOffset,chartRect.y1=Math.max(height-normalizedPadding.bottom,chartRect.y2+1)):(chartRect.y2=normalizedPadding.top,chartRect.y1=Math.max(height-normalizedPadding.bottom-xAxisOffset,chartRect.y2+1)),"start"===options.axisY.position?(chartRect.x1=normalizedPadding.left+yAxisOffset,chartRect.x2=Math.max(width-normalizedPadding.right,chartRect.x1+1)):(chartRect.x1=normalizedPadding.left,chartRect.x2=Math.max(width-normalizedPadding.right-yAxisOffset,chartRect.x1+1))):(chartRect.x1=normalizedPadding.left,chartRect.x2=Math.max(width-normalizedPadding.right,chartRect.x1+1),chartRect.y2=normalizedPadding.top,chartRect.y1=Math.max(height-normalizedPadding.bottom,chartRect.y2+1)),chartRect},Chartist.createGrid=function(position,index,axis,offset,length,group,classes,eventEmitter){var positionalData={};positionalData[axis.units.pos+"1"]=position,positionalData[axis.units.pos+"2"]=position,positionalData[axis.counterUnits.pos+"1"]=offset,positionalData[axis.counterUnits.pos+"2"]=offset+length;var gridElement=group.elem("line",positionalData,classes.join(" "));eventEmitter.emit("draw",Chartist.extend({type:"grid",axis:axis,index:index,group:group,element:gridElement},positionalData))},Chartist.createGridBackground=function(gridGroup,chartRect,className,eventEmitter){var gridBackground=gridGroup.elem("rect",{x:chartRect.x1,y:chartRect.y2,width:chartRect.width(),height:chartRect.height()},className,!0);eventEmitter.emit("draw",{type:"gridBackground",group:gridGroup,element:gridBackground})},Chartist.createLabel=function(position,length,index,labels,axis,axisOffset,labelOffset,group,classes,useForeignObject,eventEmitter){var labelElement,positionalData={};if(positionalData[axis.units.pos]=position+labelOffset[axis.units.pos],positionalData[axis.counterUnits.pos]=labelOffset[axis.counterUnits.pos],positionalData[axis.units.len]=length,positionalData[axis.counterUnits.len]=Math.max(0,axisOffset-10),useForeignObject){var content=document.createElement("span");content.className=classes.join(" "),content.setAttribute("xmlns",Chartist.namespaces.xhtml),content.innerText=labels[index],content.style[axis.units.len]=Math.round(positionalData[axis.units.len])+"px",content.style[axis.counterUnits.len]=Math.round(positionalData[axis.counterUnits.len])+"px",labelElement=group.foreignObject(content,Chartist.extend({style:"overflow: visible;"},positionalData))}else labelElement=group.elem("text",positionalData,classes.join(" ")).text(labels[index]);eventEmitter.emit("draw",Chartist.extend({type:"label",axis:axis,index:index,group:group,element:labelElement,text:labels[index]},positionalData))},Chartist.getSeriesOption=function(series,options,key){if(series.name&&options.series&&options.series[series.name]){var seriesOptions=options.series[series.name];return seriesOptions.hasOwnProperty(key)?seriesOptions[key]:options[key]}return options[key]},Chartist.optionsProvider=function(options,responsiveOptions,eventEmitter){function updateCurrentOptions(mediaEvent){var previousOptions=currentOptions;if(currentOptions=Chartist.extend({},baseOptions),responsiveOptions)for(i=0;i<responsiveOptions.length;i++){var mql=window.matchMedia(responsiveOptions[i][0]);mql.matches&&(currentOptions=Chartist.extend(currentOptions,responsiveOptions[i][1]))}eventEmitter&&mediaEvent&&eventEmitter.emit("optionsChanged",{previousOptions:previousOptions,currentOptions:currentOptions})}function removeMediaQueryListeners(){mediaQueryListeners.forEach(function(mql){mql.removeListener(updateCurrentOptions)})}var currentOptions,i,baseOptions=Chartist.extend({},options),mediaQueryListeners=[];if(!window.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(responsiveOptions)for(i=0;i<responsiveOptions.length;i++){var mql=window.matchMedia(responsiveOptions[i][0]);mql.addListener(updateCurrentOptions),mediaQueryListeners.push(mql)}return updateCurrentOptions(),{removeMediaQueryListeners:removeMediaQueryListeners,getCurrentOptions:function(){return Chartist.extend({},currentOptions)}}},Chartist.splitIntoSegments=function(pathCoordinates,valueData,options){var defaultOptions={increasingX:!1,fillHoles:!1};options=Chartist.extend({},defaultOptions,options);for(var segments=[],hole=!0,i=0;i<pathCoordinates.length;i+=2)void 0===Chartist.getMultiValue(valueData[i/2].value)?options.fillHoles||(hole=!0):(options.increasingX&&i>=2&&pathCoordinates[i]<=pathCoordinates[i-2]&&(hole=!0),hole&&(segments.push({pathCoordinates:[],valueData:[]}),hole=!1),segments[segments.length-1].pathCoordinates.push(pathCoordinates[i],pathCoordinates[i+1]),segments[segments.length-1].valueData.push(valueData[i/2]));return segments}}(window,document,Chartist),function(window,document,Chartist){"use strict";Chartist.Interpolation={},Chartist.Interpolation.none=function(options){var defaultOptions={fillHoles:!1};return options=Chartist.extend({},defaultOptions,options),function(pathCoordinates,valueData){for(var path=new Chartist.Svg.Path,hole=!0,i=0;i<pathCoordinates.length;i+=2){var currX=pathCoordinates[i],currY=pathCoordinates[i+1],currData=valueData[i/2];void 0!==Chartist.getMultiValue(currData.value)?(hole?path.move(currX,currY,!1,currData):path.line(currX,currY,!1,currData),hole=!1):options.fillHoles||(hole=!0)}return path}},Chartist.Interpolation.simple=function(options){var defaultOptions={divisor:2,fillHoles:!1};options=Chartist.extend({},defaultOptions,options);var d=1/Math.max(1,options.divisor);return function(pathCoordinates,valueData){for(var prevX,prevY,prevData,path=new Chartist.Svg.Path,i=0;i<pathCoordinates.length;i+=2){var currX=pathCoordinates[i],currY=pathCoordinates[i+1],length=(currX-prevX)*d,currData=valueData[i/2];void 0!==currData.value?(void 0===prevData?path.move(currX,currY,!1,currData):path.curve(prevX+length,prevY,currX-length,currY,currX,currY,!1,currData),prevX=currX,prevY=currY,prevData=currData):options.fillHoles||(prevX=currX=prevData=void 0)}return path}},Chartist.Interpolation.cardinal=function(options){var defaultOptions={tension:1,fillHoles:!1};options=Chartist.extend({},defaultOptions,options);var t=Math.min(1,Math.max(0,options.tension)),c=1-t;return function cardinal(pathCoordinates,valueData){var segments=Chartist.splitIntoSegments(pathCoordinates,valueData,{fillHoles:options.fillHoles});if(segments.length){if(segments.length>1){var paths=[];return segments.forEach(function(segment){paths.push(cardinal(segment.pathCoordinates,segment.valueData))}),Chartist.Svg.Path.join(paths)}if(pathCoordinates=segments[0].pathCoordinates,valueData=segments[0].valueData,pathCoordinates.length<=4)return Chartist.Interpolation.none()(pathCoordinates,valueData);for(var z,path=(new Chartist.Svg.Path).move(pathCoordinates[0],pathCoordinates[1],!1,valueData[0]),i=0,iLen=pathCoordinates.length;iLen-2*!z>i;i+=2){var p=[{x:+pathCoordinates[i-2],y:+pathCoordinates[i-1]},{x:+pathCoordinates[i],y:+pathCoordinates[i+1]},{x:+pathCoordinates[i+2],y:+pathCoordinates[i+3]},{x:+pathCoordinates[i+4],y:+pathCoordinates[i+5]}];z?i?iLen-4===i?p[3]={x:+pathCoordinates[0],y:+pathCoordinates[1]}:iLen-2===i&&(p[2]={x:+pathCoordinates[0],y:+pathCoordinates[1]},p[3]={x:+pathCoordinates[2],y:+pathCoordinates[3]}):p[0]={x:+pathCoordinates[iLen-2],y:+pathCoordinates[iLen-1]}:iLen-4===i?p[3]=p[2]:i||(p[0]={x:+pathCoordinates[i],y:+pathCoordinates[i+1]}),path.curve(t*(-p[0].x+6*p[1].x+p[2].x)/6+c*p[2].x,t*(-p[0].y+6*p[1].y+p[2].y)/6+c*p[2].y,t*(p[1].x+6*p[2].x-p[3].x)/6+c*p[2].x,t*(p[1].y+6*p[2].y-p[3].y)/6+c*p[2].y,p[2].x,p[2].y,!1,valueData[(i+2)/2])}return path}return Chartist.Interpolation.none()([])}},Chartist.Interpolation.monotoneCubic=function(options){var defaultOptions={fillHoles:!1};return options=Chartist.extend({},defaultOptions,options),function monotoneCubic(pathCoordinates,valueData){var segments=Chartist.splitIntoSegments(pathCoordinates,valueData,{fillHoles:options.fillHoles,increasingX:!0});if(segments.length){if(segments.length>1){var paths=[];return segments.forEach(function(segment){paths.push(monotoneCubic(segment.pathCoordinates,segment.valueData))}),Chartist.Svg.Path.join(paths)}if(pathCoordinates=segments[0].pathCoordinates,valueData=segments[0].valueData,pathCoordinates.length<=4)return Chartist.Interpolation.none()(pathCoordinates,valueData);var i,path,xs=[],ys=[],n=pathCoordinates.length/2,ms=[],ds=[],dys=[],dxs=[];for(i=0;n>i;i++)xs[i]=pathCoordinates[2*i],ys[i]=pathCoordinates[2*i+1];for(i=0;n-1>i;i++)dys[i]=ys[i+1]-ys[i],dxs[i]=xs[i+1]-xs[i],ds[i]=dys[i]/dxs[i];for(ms[0]=ds[0],ms[n-1]=ds[n-2],i=1;n-1>i;i++)0===ds[i]||0===ds[i-1]||ds[i-1]>0!=ds[i]>0?ms[i]=0:(ms[i]=3*(dxs[i-1]+dxs[i])/((2*dxs[i]+dxs[i-1])/ds[i-1]+(dxs[i]+2*dxs[i-1])/ds[i]),isFinite(ms[i])||(ms[i]=0));for(path=(new Chartist.Svg.Path).move(xs[0],ys[0],!1,valueData[0]),i=0;n-1>i;i++)path.curve(xs[i]+dxs[i]/3,ys[i]+ms[i]*dxs[i]/3,xs[i+1]-dxs[i]/3,ys[i+1]-ms[i+1]*dxs[i]/3,xs[i+1],ys[i+1],!1,valueData[i+1]);return path}return Chartist.Interpolation.none()([])}},Chartist.Interpolation.step=function(options){var defaultOptions={postpone:!0,fillHoles:!1};return options=Chartist.extend({},defaultOptions,options),function(pathCoordinates,valueData){for(var prevX,prevY,prevData,path=new Chartist.Svg.Path,i=0;i<pathCoordinates.length;i+=2){var currX=pathCoordinates[i],currY=pathCoordinates[i+1],currData=valueData[i/2];void 0!==currData.value?(void 0===prevData?path.move(currX,currY,!1,currData):(options.postpone?path.line(currX,prevY,!1,prevData):path.line(prevX,currY,!1,currData),path.line(currX,currY,!1,currData)),prevX=currX,prevY=currY,prevData=currData):options.fillHoles||(prevX=prevY=prevData=void 0)}return path}}}(window,document,Chartist),function(window,document,Chartist){"use strict";Chartist.EventEmitter=function(){function addEventHandler(event,handler){handlers[event]=handlers[event]||[],handlers[event].push(handler)}function removeEventHandler(event,handler){handlers[event]&&(handler?(handlers[event].splice(handlers[event].indexOf(handler),1),0===handlers[event].length&&delete handlers[event]):delete handlers[event])}function emit(event,data){handlers[event]&&handlers[event].forEach(function(handler){handler(data)}),handlers["*"]&&handlers["*"].forEach(function(starHandler){starHandler(event,data)})}var handlers=[];return{addEventHandler:addEventHandler,removeEventHandler:removeEventHandler,emit:emit}}}(window,document,Chartist),function(window,document,Chartist){"use strict";function listToArray(list){var arr=[];if(list.length)for(var i=0;i<list.length;i++)arr.push(list[i]);return arr}function extend(properties,superProtoOverride){var superProto=superProtoOverride||this.prototype||Chartist.Class,proto=Object.create(superProto);Chartist.Class.cloneDefinitions(proto,properties);var constr=function(){var instance,fn=proto.constructor||function(){};return instance=this===Chartist?Object.create(proto):this,fn.apply(instance,Array.prototype.slice.call(arguments,0)),instance};return constr.prototype=proto,constr.super=superProto,constr.extend=this.extend,constr}function cloneDefinitions(){var args=listToArray(arguments),target=args[0];return args.splice(1,args.length-1).forEach(function(source){Object.getOwnPropertyNames(source).forEach(function(propName){delete target[propName],Object.defineProperty(target,propName,Object.getOwnPropertyDescriptor(source,propName))})}),target}Chartist.Class={extend:extend,cloneDefinitions:cloneDefinitions}}(window,document,Chartist),function(window,document,Chartist){"use strict";function update(data,options,override){return data&&(this.data=data||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),options&&(this.options=Chartist.extend({},override?this.options:this.defaultOptions,options),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=Chartist.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this}function detach(){return this.initializeTimeoutId?window.clearTimeout(this.initializeTimeoutId):(window.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this}function on(event,handler){return this.eventEmitter.addEventHandler(event,handler),this}function off(event,handler){return this.eventEmitter.removeEventHandler(event,handler),this}function initialize(){window.addEventListener("resize",this.resizeListener),this.optionsProvider=Chartist.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(plugin){plugin instanceof Array?plugin[0](this,plugin[1]):plugin(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}function Base(query,data,defaultOptions,options,responsiveOptions){this.container=Chartist.querySelector(query),this.data=data||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=defaultOptions,this.options=options,this.responsiveOptions=responsiveOptions,this.eventEmitter=Chartist.EventEmitter(),this.supportsForeignObject=Chartist.Svg.isSupported("Extensibility"),this.supportsAnimations=Chartist.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(initialize.bind(this),0)}Chartist.Base=Chartist.Class.extend({constructor:Base,optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:update,detach:detach,on:on,off:off,version:Chartist.version,supportsForeignObject:!1})}(window,document,Chartist),function(window,document,Chartist){"use strict";function Svg(name,attributes,className,parent,insertFirst){name instanceof Element?this._node=name:(this._node=document.createElementNS(Chartist.namespaces.svg,name),"svg"===name&&this.attr({"xmlns:ct":Chartist.namespaces.ct})),attributes&&this.attr(attributes),className&&this.addClass(className),parent&&(insertFirst&&parent._node.firstChild?parent._node.insertBefore(this._node,parent._node.firstChild):parent._node.appendChild(this._node))}function attr(attributes,ns){return"string"==typeof attributes?ns?this._node.getAttributeNS(ns,attributes):this._node.getAttribute(attributes):(Object.keys(attributes).forEach(function(key){if(void 0!==attributes[key])if(-1!==key.indexOf(":")){var namespacedAttribute=key.split(":");this._node.setAttributeNS(Chartist.namespaces[namespacedAttribute[0]],key,attributes[key])}else this._node.setAttribute(key,attributes[key])}.bind(this)),this)}function elem(name,attributes,className,insertFirst){return new Chartist.Svg(name,attributes,className,this,insertFirst)}function parent(){return this._node.parentNode instanceof SVGElement?new Chartist.Svg(this._node.parentNode):null}function root(){for(var node=this._node;"svg"!==node.nodeName;)node=node.parentNode;return new Chartist.Svg(node)}function querySelector(selector){var foundNode=this._node.querySelector(selector);return foundNode?new Chartist.Svg(foundNode):null}function querySelectorAll(selector){var foundNodes=this._node.querySelectorAll(selector);return foundNodes.length?new Chartist.Svg.List(foundNodes):null}function getNode(){return this._node}function foreignObject(content,attributes,className,insertFirst){if("string"==typeof content){var container=document.createElement("div");container.innerHTML=content,content=container.firstChild}content.setAttribute("xmlns",Chartist.namespaces.xmlns);var fnObj=this.elem("foreignObject",attributes,className,insertFirst);return fnObj._node.appendChild(content),fnObj}function text(t){return this._node.appendChild(document.createTextNode(t)),this}function empty(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}function remove(){return this._node.parentNode.removeChild(this._node),this.parent()}function replace(newElement){return this._node.parentNode.replaceChild(newElement._node,this._node),newElement}function append(element,insertFirst){return insertFirst&&this._node.firstChild?this._node.insertBefore(element._node,this._node.firstChild):this._node.appendChild(element._node),this}function classes(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]}function addClass(names){return this._node.setAttribute("class",this.classes(this._node).concat(names.trim().split(/\s+/)).filter(function(elem,pos,self){return self.indexOf(elem)===pos}).join(" ")),this}function removeClass(names){var removedClasses=names.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(name){return-1===removedClasses.indexOf(name)}).join(" ")),this}function removeAllClasses(){return this._node.setAttribute("class",""),this}function height(){return this._node.getBoundingClientRect().height}function width(){return this._node.getBoundingClientRect().width}function animate(animations,guided,eventEmitter){return void 0===guided&&(guided=!0),Object.keys(animations).forEach(function(attribute){function createAnimate(animationDefinition,guided){var animate,timeout,easing,attributeProperties={};animationDefinition.easing&&(easing=animationDefinition.easing instanceof Array?animationDefinition.easing:Chartist.Svg.Easing[animationDefinition.easing],delete animationDefinition.easing),animationDefinition.begin=Chartist.ensureUnit(animationDefinition.begin,"ms"),animationDefinition.dur=Chartist.ensureUnit(animationDefinition.dur,"ms"),easing&&(animationDefinition.calcMode="spline",animationDefinition.keySplines=easing.join(" "),animationDefinition.keyTimes="0;1"),guided&&(animationDefinition.fill="freeze",attributeProperties[attribute]=animationDefinition.from,this.attr(attributeProperties),timeout=Chartist.quantity(animationDefinition.begin||0).value,animationDefinition.begin="indefinite"),animate=this.elem("animate",Chartist.extend({attributeName:attribute},animationDefinition)),guided&&setTimeout(function(){try{animate._node.beginElement()}catch(err){attributeProperties[attribute]=animationDefinition.to,this.attr(attributeProperties),animate.remove()}}.bind(this),timeout),eventEmitter&&animate._node.addEventListener("beginEvent",function(){eventEmitter.emit("animationBegin",{element:this,animate:animate._node,params:animationDefinition})}.bind(this)),animate._node.addEventListener("endEvent",function(){eventEmitter&&eventEmitter.emit("animationEnd",{element:this,animate:animate._node,params:animationDefinition}),guided&&(attributeProperties[attribute]=animationDefinition.to,this.attr(attributeProperties),animate.remove())}.bind(this))}animations[attribute]instanceof Array?animations[attribute].forEach(function(animationDefinition){createAnimate.bind(this)(animationDefinition,!1)}.bind(this)):createAnimate.bind(this)(animations[attribute],guided)}.bind(this)),this}function SvgList(nodeList){var list=this;this.svgElements=[];for(var i=0;i<nodeList.length;i++)this.svgElements.push(new Chartist.Svg(nodeList[i]));Object.keys(Chartist.Svg.prototype).filter(function(prototypeProperty){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(prototypeProperty)}).forEach(function(prototypeProperty){list[prototypeProperty]=function(){var args=Array.prototype.slice.call(arguments,0);return list.svgElements.forEach(function(element){Chartist.Svg.prototype[prototypeProperty].apply(element,args)}),list}})}Chartist.Svg=Chartist.Class.extend({constructor:Svg,attr:attr,elem:elem,parent:parent,root:root,querySelector:querySelector,querySelectorAll:querySelectorAll,getNode:getNode,foreignObject:foreignObject,text:text,empty:empty,remove:remove,replace:replace,append:append,classes:classes,addClass:addClass,removeClass:removeClass,removeAllClasses:removeAllClasses,height:height,width:width,animate:animate}),Chartist.Svg.isSupported=function(feature){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+feature,"1.1")};var easingCubicBeziers={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};Chartist.Svg.Easing=easingCubicBeziers,Chartist.Svg.List=Chartist.Class.extend({constructor:SvgList})}(window,document,Chartist),function(window,document,Chartist){"use strict";function element(command,params,pathElements,pos,relative,data){var pathElement=Chartist.extend({command:relative?command.toLowerCase():command.toUpperCase()},params,data?{data:data}:{});pathElements.splice(pos,0,pathElement)}function forEachParam(pathElements,cb){pathElements.forEach(function(pathElement,pathElementIndex){elementDescriptions[pathElement.command.toLowerCase()].forEach(function(paramName,paramIndex){cb(pathElement,paramName,pathElementIndex,paramIndex,pathElements)})})}function SvgPath(close,options){this.pathElements=[],this.pos=0,this.close=close,this.options=Chartist.extend({},defaultOptions,options)}function position(pos){return void 0!==pos?(this.pos=Math.max(0,Math.min(this.pathElements.length,pos)),this):this.pos
}function remove(count){return this.pathElements.splice(this.pos,count),this}function move(x,y,relative,data){return element("M",{x:+x,y:+y},this.pathElements,this.pos++,relative,data),this}function line(x,y,relative,data){return element("L",{x:+x,y:+y},this.pathElements,this.pos++,relative,data),this}function curve(x1,y1,x2,y2,x,y,relative,data){return element("C",{x1:+x1,y1:+y1,x2:+x2,y2:+y2,x:+x,y:+y},this.pathElements,this.pos++,relative,data),this}function arc(rx,ry,xAr,lAf,sf,x,y,relative,data){return element("A",{rx:+rx,ry:+ry,xAr:+xAr,lAf:+lAf,sf:+sf,x:+x,y:+y},this.pathElements,this.pos++,relative,data),this}function parse(path){var chunks=path.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(result,element){return element.match(/[A-Za-z]/)&&result.push([]),result[result.length-1].push(element),result},[]);"Z"===chunks[chunks.length-1][0].toUpperCase()&&chunks.pop();var elements=chunks.map(function(chunk){var command=chunk.shift(),description=elementDescriptions[command.toLowerCase()];return Chartist.extend({command:command},description.reduce(function(result,paramName,index){return result[paramName]=+chunk[index],result},{}))}),spliceArgs=[this.pos,0];return Array.prototype.push.apply(spliceArgs,elements),Array.prototype.splice.apply(this.pathElements,spliceArgs),this.pos+=elements.length,this}function stringify(){var accuracyMultiplier=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(path,pathElement){var params=elementDescriptions[pathElement.command.toLowerCase()].map(function(paramName){return this.options.accuracy?Math.round(pathElement[paramName]*accuracyMultiplier)/accuracyMultiplier:pathElement[paramName]}.bind(this));return path+pathElement.command+params.join(",")}.bind(this),"")+(this.close?"Z":"")}function scale(x,y){return forEachParam(this.pathElements,function(pathElement,paramName){pathElement[paramName]*="x"===paramName[0]?x:y}),this}function translate(x,y){return forEachParam(this.pathElements,function(pathElement,paramName){pathElement[paramName]+="x"===paramName[0]?x:y}),this}function transform(transformFnc){return forEachParam(this.pathElements,function(pathElement,paramName,pathElementIndex,paramIndex,pathElements){var transformed=transformFnc(pathElement,paramName,pathElementIndex,paramIndex,pathElements);(transformed||0===transformed)&&(pathElement[paramName]=transformed)}),this}function clone(close){var c=new Chartist.Svg.Path(close||this.close);return c.pos=this.pos,c.pathElements=this.pathElements.slice().map(function(pathElement){return Chartist.extend({},pathElement)}),c.options=Chartist.extend({},this.options),c}function splitByCommand(command){var split=[new Chartist.Svg.Path];return this.pathElements.forEach(function(pathElement){pathElement.command===command.toUpperCase()&&0!==split[split.length-1].pathElements.length&&split.push(new Chartist.Svg.Path),split[split.length-1].pathElements.push(pathElement)}),split}function join(paths,close,options){for(var joinedPath=new Chartist.Svg.Path(close,options),i=0;i<paths.length;i++)for(var path=paths[i],j=0;j<path.pathElements.length;j++)joinedPath.pathElements.push(path.pathElements[j]);return joinedPath}var elementDescriptions={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},defaultOptions={accuracy:3};Chartist.Svg.Path=Chartist.Class.extend({constructor:SvgPath,position:position,remove:remove,move:move,line:line,curve:curve,arc:arc,scale:scale,translate:translate,transform:transform,parse:parse,stringify:stringify,clone:clone,splitByCommand:splitByCommand}),Chartist.Svg.Path.elementDescriptions=elementDescriptions,Chartist.Svg.Path.join=join}(window,document,Chartist),function(window,document,Chartist){"use strict";function Axis(units,chartRect,ticks,options){this.units=units,this.counterUnits=units===axisUnits.x?axisUnits.y:axisUnits.x,this.chartRect=chartRect,this.axisLength=chartRect[units.rectEnd]-chartRect[units.rectStart],this.gridOffset=chartRect[units.rectOffset],this.ticks=ticks,this.options=options}function createGridAndLabels(gridGroup,labelGroup,useForeignObject,chartOptions,eventEmitter){var axisOptions=chartOptions["axis"+this.units.pos.toUpperCase()],projectedValues=this.ticks.map(this.projectValue.bind(this)),labelValues=this.ticks.map(axisOptions.labelInterpolationFnc);projectedValues.forEach(function(projectedValue,index){var labelLength,labelOffset={x:0,y:0};labelLength=projectedValues[index+1]?projectedValues[index+1]-projectedValue:Math.max(this.axisLength-projectedValue,30),Chartist.isFalseyButZero(labelValues[index])&&""!==labelValues[index]||("x"===this.units.pos?(projectedValue=this.chartRect.x1+projectedValue,labelOffset.x=chartOptions.axisX.labelOffset.x,labelOffset.y="start"===chartOptions.axisX.position?this.chartRect.padding.top+chartOptions.axisX.labelOffset.y+(useForeignObject?5:20):this.chartRect.y1+chartOptions.axisX.labelOffset.y+(useForeignObject?5:20)):(projectedValue=this.chartRect.y1-projectedValue,labelOffset.y=chartOptions.axisY.labelOffset.y-(useForeignObject?labelLength:0),labelOffset.x="start"===chartOptions.axisY.position?useForeignObject?this.chartRect.padding.left+chartOptions.axisY.labelOffset.x:this.chartRect.x1-10:this.chartRect.x2+chartOptions.axisY.labelOffset.x+10),axisOptions.showGrid&&Chartist.createGrid(projectedValue,index,this,this.gridOffset,this.chartRect[this.counterUnits.len](),gridGroup,[chartOptions.classNames.grid,chartOptions.classNames[this.units.dir]],eventEmitter),axisOptions.showLabel&&Chartist.createLabel(projectedValue,labelLength,index,labelValues,this,axisOptions.offset,labelOffset,labelGroup,[chartOptions.classNames.label,chartOptions.classNames[this.units.dir],"start"===axisOptions.position?chartOptions.classNames[axisOptions.position]:chartOptions.classNames.end],useForeignObject,eventEmitter))}.bind(this))}var axisUnits={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};Chartist.Axis=Chartist.Class.extend({constructor:Axis,createGridAndLabels:createGridAndLabels,projectValue:function(){throw new Error("Base axis can't be instantiated!")}}),Chartist.Axis.units=axisUnits}(window,document,Chartist),function(window,document,Chartist){"use strict";function AutoScaleAxis(axisUnit,data,chartRect,options){var highLow=options.highLow||Chartist.getHighLow(data,options,axisUnit.pos);this.bounds=Chartist.getBounds(chartRect[axisUnit.rectEnd]-chartRect[axisUnit.rectStart],highLow,options.scaleMinSpace||20,options.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},Chartist.AutoScaleAxis.super.constructor.call(this,axisUnit,chartRect,this.bounds.values,options)}function projectValue(value){return this.axisLength*(+Chartist.getMultiValue(value,this.units.pos)-this.bounds.min)/this.bounds.range}Chartist.AutoScaleAxis=Chartist.Axis.extend({constructor:AutoScaleAxis,projectValue:projectValue})}(window,document,Chartist),function(window,document,Chartist){"use strict";function FixedScaleAxis(axisUnit,data,chartRect,options){var highLow=options.highLow||Chartist.getHighLow(data,options,axisUnit.pos);this.divisor=options.divisor||1,this.ticks=options.ticks||Chartist.times(this.divisor).map(function(value,index){return highLow.low+(highLow.high-highLow.low)/this.divisor*index}.bind(this)),this.ticks.sort(function(a,b){return a-b}),this.range={min:highLow.low,max:highLow.high},Chartist.FixedScaleAxis.super.constructor.call(this,axisUnit,chartRect,this.ticks,options),this.stepLength=this.axisLength/this.divisor}function projectValue(value){return this.axisLength*(+Chartist.getMultiValue(value,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}Chartist.FixedScaleAxis=Chartist.Axis.extend({constructor:FixedScaleAxis,projectValue:projectValue})}(window,document,Chartist),function(window,document,Chartist){"use strict";function StepAxis(axisUnit,data,chartRect,options){Chartist.StepAxis.super.constructor.call(this,axisUnit,chartRect,options.ticks,options);var calc=Math.max(1,options.ticks.length-(options.stretch?1:0));this.stepLength=this.axisLength/calc}function projectValue(value,index){return this.stepLength*index}Chartist.StepAxis=Chartist.Axis.extend({constructor:StepAxis,projectValue:projectValue})}(window,document,Chartist),function(window,document,Chartist){"use strict";function createChart(options){var data=Chartist.normalizeData(this.data,options.reverseData,!0);this.svg=Chartist.createSvg(this.container,options.width,options.height,options.classNames.chart);var axisX,axisY,gridGroup=this.svg.elem("g").addClass(options.classNames.gridGroup),seriesGroup=this.svg.elem("g"),labelGroup=this.svg.elem("g").addClass(options.classNames.labelGroup),chartRect=Chartist.createChartRect(this.svg,options,defaultOptions.padding);axisX=void 0===options.axisX.type?new Chartist.StepAxis(Chartist.Axis.units.x,data.normalized.series,chartRect,Chartist.extend({},options.axisX,{ticks:data.normalized.labels,stretch:options.fullWidth})):options.axisX.type.call(Chartist,Chartist.Axis.units.x,data.normalized.series,chartRect,options.axisX),axisY=void 0===options.axisY.type?new Chartist.AutoScaleAxis(Chartist.Axis.units.y,data.normalized.series,chartRect,Chartist.extend({},options.axisY,{high:Chartist.isNumeric(options.high)?options.high:options.axisY.high,low:Chartist.isNumeric(options.low)?options.low:options.axisY.low})):options.axisY.type.call(Chartist,Chartist.Axis.units.y,data.normalized.series,chartRect,options.axisY),axisX.createGridAndLabels(gridGroup,labelGroup,this.supportsForeignObject,options,this.eventEmitter),axisY.createGridAndLabels(gridGroup,labelGroup,this.supportsForeignObject,options,this.eventEmitter),options.showGridBackground&&Chartist.createGridBackground(gridGroup,chartRect,options.classNames.gridBackground,this.eventEmitter),data.raw.series.forEach(function(series,seriesIndex){var seriesElement=seriesGroup.elem("g");seriesElement.attr({"ct:series-name":series.name,"ct:meta":Chartist.serialize(series.meta)}),seriesElement.addClass([options.classNames.series,series.className||options.classNames.series+"-"+Chartist.alphaNumerate(seriesIndex)].join(" "));var pathCoordinates=[],pathData=[];data.normalized.series[seriesIndex].forEach(function(value,valueIndex){var p={x:chartRect.x1+axisX.projectValue(value,valueIndex,data.normalized.series[seriesIndex]),y:chartRect.y1-axisY.projectValue(value,valueIndex,data.normalized.series[seriesIndex])};pathCoordinates.push(p.x,p.y),pathData.push({value:value,valueIndex:valueIndex,meta:Chartist.getMetaData(series,valueIndex)})}.bind(this));var seriesOptions={lineSmooth:Chartist.getSeriesOption(series,options,"lineSmooth"),showPoint:Chartist.getSeriesOption(series,options,"showPoint"),showLine:Chartist.getSeriesOption(series,options,"showLine"),showArea:Chartist.getSeriesOption(series,options,"showArea"),areaBase:Chartist.getSeriesOption(series,options,"areaBase")},smoothing="function"==typeof seriesOptions.lineSmooth?seriesOptions.lineSmooth:seriesOptions.lineSmooth?Chartist.Interpolation.monotoneCubic():Chartist.Interpolation.none(),path=smoothing(pathCoordinates,pathData);if(seriesOptions.showPoint&&path.pathElements.forEach(function(pathElement){var point=seriesElement.elem("line",{x1:pathElement.x,y1:pathElement.y,x2:pathElement.x+.01,y2:pathElement.y},options.classNames.point).attr({"ct:value":[pathElement.data.value.x,pathElement.data.value.y].filter(Chartist.isNumeric).join(","),"ct:meta":Chartist.serialize(pathElement.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:pathElement.data.value,index:pathElement.data.valueIndex,meta:pathElement.data.meta,series:series,seriesIndex:seriesIndex,axisX:axisX,axisY:axisY,group:seriesElement,element:point,x:pathElement.x,y:pathElement.y})}.bind(this)),seriesOptions.showLine){var line=seriesElement.elem("path",{d:path.stringify()},options.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:data.normalized.series[seriesIndex],path:path.clone(),chartRect:chartRect,index:seriesIndex,series:series,seriesIndex:seriesIndex,seriesMeta:series.meta,axisX:axisX,axisY:axisY,group:seriesElement,element:line})}if(seriesOptions.showArea&&axisY.range){var areaBase=Math.max(Math.min(seriesOptions.areaBase,axisY.range.max),axisY.range.min),areaBaseProjected=chartRect.y1-axisY.projectValue(areaBase);path.splitByCommand("M").filter(function(pathSegment){return pathSegment.pathElements.length>1}).map(function(solidPathSegments){var firstElement=solidPathSegments.pathElements[0],lastElement=solidPathSegments.pathElements[solidPathSegments.pathElements.length-1];return solidPathSegments.clone(!0).position(0).remove(1).move(firstElement.x,areaBaseProjected).line(firstElement.x,firstElement.y).position(solidPathSegments.pathElements.length+1).line(lastElement.x,areaBaseProjected)}).forEach(function(areaPath){var area=seriesElement.elem("path",{d:areaPath.stringify()},options.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:data.normalized.series[seriesIndex],path:areaPath.clone(),series:series,seriesIndex:seriesIndex,axisX:axisX,axisY:axisY,chartRect:chartRect,index:seriesIndex,group:seriesElement,element:area})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:axisY.bounds,chartRect:chartRect,axisX:axisX,axisY:axisY,svg:this.svg,options:options})}function Line(query,data,options,responsiveOptions){Chartist.Line.super.constructor.call(this,query,data,defaultOptions,Chartist.extend({},defaultOptions,options),responsiveOptions)}var defaultOptions={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Chartist.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Chartist.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};Chartist.Line=Chartist.Base.extend({constructor:Line,createChart:createChart})}(window,document,Chartist),function(window,document,Chartist){"use strict";function createChart(options){var data,highLow;options.distributeSeries?(data=Chartist.normalizeData(this.data,options.reverseData,options.horizontalBars?"x":"y"),data.normalized.series=data.normalized.series.map(function(value){return[value]})):data=Chartist.normalizeData(this.data,options.reverseData,options.horizontalBars?"x":"y"),this.svg=Chartist.createSvg(this.container,options.width,options.height,options.classNames.chart+(options.horizontalBars?" "+options.classNames.horizontalBars:""));var gridGroup=this.svg.elem("g").addClass(options.classNames.gridGroup),seriesGroup=this.svg.elem("g"),labelGroup=this.svg.elem("g").addClass(options.classNames.labelGroup);if(options.stackBars&&0!==data.normalized.series.length){var serialSums=Chartist.serialMap(data.normalized.series,function(){return Array.prototype.slice.call(arguments).map(function(value){return value}).reduce(function(prev,curr){return{x:prev.x+(curr&&curr.x)||0,y:prev.y+(curr&&curr.y)||0}},{x:0,y:0})});highLow=Chartist.getHighLow([serialSums],options,options.horizontalBars?"x":"y")}else highLow=Chartist.getHighLow(data.normalized.series,options,options.horizontalBars?"x":"y");highLow.high=+options.high||(0===options.high?0:highLow.high),highLow.low=+options.low||(0===options.low?0:highLow.low);var valueAxis,labelAxisTicks,labelAxis,axisX,axisY,chartRect=Chartist.createChartRect(this.svg,options,defaultOptions.padding);labelAxisTicks=options.distributeSeries&&options.stackBars?data.normalized.labels.slice(0,1):data.normalized.labels,options.horizontalBars?(valueAxis=axisX=void 0===options.axisX.type?new Chartist.AutoScaleAxis(Chartist.Axis.units.x,data.normalized.series,chartRect,Chartist.extend({},options.axisX,{highLow:highLow,referenceValue:0})):options.axisX.type.call(Chartist,Chartist.Axis.units.x,data.normalized.series,chartRect,Chartist.extend({},options.axisX,{highLow:highLow,referenceValue:0})),labelAxis=axisY=void 0===options.axisY.type?new Chartist.StepAxis(Chartist.Axis.units.y,data.normalized.series,chartRect,{ticks:labelAxisTicks}):options.axisY.type.call(Chartist,Chartist.Axis.units.y,data.normalized.series,chartRect,options.axisY)):(labelAxis=axisX=void 0===options.axisX.type?new Chartist.StepAxis(Chartist.Axis.units.x,data.normalized.series,chartRect,{ticks:labelAxisTicks}):options.axisX.type.call(Chartist,Chartist.Axis.units.x,data.normalized.series,chartRect,options.axisX),valueAxis=axisY=void 0===options.axisY.type?new Chartist.AutoScaleAxis(Chartist.Axis.units.y,data.normalized.series,chartRect,Chartist.extend({},options.axisY,{highLow:highLow,referenceValue:0})):options.axisY.type.call(Chartist,Chartist.Axis.units.y,data.normalized.series,chartRect,Chartist.extend({},options.axisY,{highLow:highLow,referenceValue:0})));var zeroPoint=options.horizontalBars?chartRect.x1+valueAxis.projectValue(0):chartRect.y1-valueAxis.projectValue(0),stackedBarValues=[];labelAxis.createGridAndLabels(gridGroup,labelGroup,this.supportsForeignObject,options,this.eventEmitter),valueAxis.createGridAndLabels(gridGroup,labelGroup,this.supportsForeignObject,options,this.eventEmitter),options.showGridBackground&&Chartist.createGridBackground(gridGroup,chartRect,options.classNames.gridBackground,this.eventEmitter),data.raw.series.forEach(function(series,seriesIndex){var periodHalfLength,seriesElement,biPol=seriesIndex-(data.raw.series.length-1)/2;periodHalfLength=options.distributeSeries&&!options.stackBars?labelAxis.axisLength/data.normalized.series.length/2:options.distributeSeries&&options.stackBars?labelAxis.axisLength/2:labelAxis.axisLength/data.normalized.series[seriesIndex].length/2,seriesElement=seriesGroup.elem("g"),seriesElement.attr({"ct:series-name":series.name,"ct:meta":Chartist.serialize(series.meta)}),seriesElement.addClass([options.classNames.series,series.className||options.classNames.series+"-"+Chartist.alphaNumerate(seriesIndex)].join(" ")),data.normalized.series[seriesIndex].forEach(function(value,valueIndex){var projected,bar,previousStack,labelAxisValueIndex;if(labelAxisValueIndex=options.distributeSeries&&!options.stackBars?seriesIndex:options.distributeSeries&&options.stackBars?0:valueIndex,projected=options.horizontalBars?{x:chartRect.x1+valueAxis.projectValue(value&&value.x?value.x:0,valueIndex,data.normalized.series[seriesIndex]),y:chartRect.y1-labelAxis.projectValue(value&&value.y?value.y:0,labelAxisValueIndex,data.normalized.series[seriesIndex])}:{x:chartRect.x1+labelAxis.projectValue(value&&value.x?value.x:0,labelAxisValueIndex,data.normalized.series[seriesIndex]),y:chartRect.y1-valueAxis.projectValue(value&&value.y?value.y:0,valueIndex,data.normalized.series[seriesIndex])},labelAxis instanceof Chartist.StepAxis&&(labelAxis.options.stretch||(projected[labelAxis.units.pos]+=periodHalfLength*(options.horizontalBars?-1:1)),projected[labelAxis.units.pos]+=options.stackBars||options.distributeSeries?0:biPol*options.seriesBarDistance*(options.horizontalBars?-1:1)),previousStack=stackedBarValues[valueIndex]||zeroPoint,stackedBarValues[valueIndex]=previousStack-(zeroPoint-projected[labelAxis.counterUnits.pos]),void 0!==value){var positions={};positions[labelAxis.units.pos+"1"]=projected[labelAxis.units.pos],positions[labelAxis.units.pos+"2"]=projected[labelAxis.units.pos],!options.stackBars||"accumulate"!==options.stackMode&&options.stackMode?(positions[labelAxis.counterUnits.pos+"1"]=zeroPoint,positions[labelAxis.counterUnits.pos+"2"]=projected[labelAxis.counterUnits.pos]):(positions[labelAxis.counterUnits.pos+"1"]=previousStack,positions[labelAxis.counterUnits.pos+"2"]=stackedBarValues[valueIndex]),positions.x1=Math.min(Math.max(positions.x1,chartRect.x1),chartRect.x2),positions.x2=Math.min(Math.max(positions.x2,chartRect.x1),chartRect.x2),positions.y1=Math.min(Math.max(positions.y1,chartRect.y2),chartRect.y1),positions.y2=Math.min(Math.max(positions.y2,chartRect.y2),chartRect.y1);var metaData=Chartist.getMetaData(series,valueIndex);bar=seriesElement.elem("line",positions,options.classNames.bar).attr({"ct:value":[value.x,value.y].filter(Chartist.isNumeric).join(","),"ct:meta":Chartist.serialize(metaData)}),this.eventEmitter.emit("draw",Chartist.extend({type:"bar",value:value,index:valueIndex,meta:metaData,series:series,seriesIndex:seriesIndex,axisX:axisX,axisY:axisY,chartRect:chartRect,group:seriesElement,element:bar},positions))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:valueAxis.bounds,chartRect:chartRect,axisX:axisX,axisY:axisY,svg:this.svg,options:options})}function Bar(query,data,options,responsiveOptions){Chartist.Bar.super.constructor.call(this,query,data,defaultOptions,Chartist.extend({},defaultOptions,options),responsiveOptions)}var defaultOptions={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Chartist.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Chartist.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};Chartist.Bar=Chartist.Base.extend({constructor:Bar,createChart:createChart})}(window,document,Chartist),function(window,document,Chartist){"use strict";function determineAnchorPosition(center,label,direction){var toTheRight=label.x>center.x;return toTheRight&&"explode"===direction||!toTheRight&&"implode"===direction?"start":toTheRight&&"implode"===direction||!toTheRight&&"explode"===direction?"end":"middle"}function createChart(options){var labelsGroup,chartRect,radius,labelRadius,totalDataSum,data=Chartist.normalizeData(this.data),seriesGroups=[],startAngle=options.startAngle;this.svg=Chartist.createSvg(this.container,options.width,options.height,options.donut?options.classNames.chartDonut:options.classNames.chartPie),chartRect=Chartist.createChartRect(this.svg,options,defaultOptions.padding),radius=Math.min(chartRect.width()/2,chartRect.height()/2),totalDataSum=options.total||data.normalized.series.reduce(function(previousValue,currentValue){return previousValue+currentValue},0);var donutWidth=Chartist.quantity(options.donutWidth);"%"===donutWidth.unit&&(donutWidth.value*=radius/100),radius-=options.donut&&!options.donutSolid?donutWidth.value/2:0,labelRadius="outside"===options.labelPosition||options.donut&&!options.donutSolid?radius:"center"===options.labelPosition?0:options.donutSolid?radius-donutWidth.value/2:radius/2,labelRadius+=options.labelOffset;var center={x:chartRect.x1+chartRect.width()/2,y:chartRect.y2+chartRect.height()/2},hasSingleValInSeries=1===data.raw.series.filter(function(val){return val.hasOwnProperty("value")?0!==val.value:0!==val}).length;data.raw.series.forEach(function(series,index){seriesGroups[index]=this.svg.elem("g",null,null)}.bind(this)),options.showLabel&&(labelsGroup=this.svg.elem("g",null,null)),data.raw.series.forEach(function(series,index){if(0!==data.normalized.series[index]||!options.ignoreEmptyValues){seriesGroups[index].attr({"ct:series-name":series.name}),seriesGroups[index].addClass([options.classNames.series,series.className||options.classNames.series+"-"+Chartist.alphaNumerate(index)].join(" "));var endAngle=totalDataSum>0?startAngle+data.normalized.series[index]/totalDataSum*360:0,overlappigStartAngle=Math.max(0,startAngle-(0===index||hasSingleValInSeries?0:.2));endAngle-overlappigStartAngle>=359.99&&(endAngle=overlappigStartAngle+359.99);var innerStart,innerEnd,donutSolidRadius,start=Chartist.polarToCartesian(center.x,center.y,radius,overlappigStartAngle),end=Chartist.polarToCartesian(center.x,center.y,radius,endAngle),path=new Chartist.Svg.Path(!options.donut||options.donutSolid).move(end.x,end.y).arc(radius,radius,0,endAngle-startAngle>180,0,start.x,start.y);options.donut?options.donutSolid&&(donutSolidRadius=radius-donutWidth.value,innerStart=Chartist.polarToCartesian(center.x,center.y,donutSolidRadius,startAngle-(0===index||hasSingleValInSeries?0:.2)),innerEnd=Chartist.polarToCartesian(center.x,center.y,donutSolidRadius,endAngle),path.line(innerStart.x,innerStart.y),path.arc(donutSolidRadius,donutSolidRadius,0,endAngle-startAngle>180,1,innerEnd.x,innerEnd.y)):path.line(center.x,center.y);var pathClassName=options.classNames.slicePie;options.donut&&(pathClassName=options.classNames.sliceDonut,options.donutSolid&&(pathClassName=options.classNames.sliceDonutSolid));var pathElement=seriesGroups[index].elem("path",{d:path.stringify()},pathClassName);if(pathElement.attr({"ct:value":data.normalized.series[index],"ct:meta":Chartist.serialize(series.meta)}),options.donut&&!options.donutSolid&&(pathElement._node.style.strokeWidth=donutWidth.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:data.normalized.series[index],totalDataSum:totalDataSum,index:index,meta:series.meta,series:series,group:seriesGroups[index],element:pathElement,path:path.clone(),center:center,radius:radius,startAngle:startAngle,endAngle:endAngle}),options.showLabel){var labelPosition;labelPosition=1===data.raw.series.length?{x:center.x,y:center.y}:Chartist.polarToCartesian(center.x,center.y,labelRadius,startAngle+(endAngle-startAngle)/2);var rawValue;rawValue=data.normalized.labels&&!Chartist.isFalseyButZero(data.normalized.labels[index])?data.normalized.labels[index]:data.normalized.series[index];var interpolatedValue=options.labelInterpolationFnc(rawValue,index);if(interpolatedValue||0===interpolatedValue){var labelElement=labelsGroup.elem("text",{dx:labelPosition.x,dy:labelPosition.y,"text-anchor":determineAnchorPosition(center,labelPosition,options.labelDirection)},options.classNames.label).text(""+interpolatedValue);this.eventEmitter.emit("draw",{type:"label",index:index,group:labelsGroup,element:labelElement,text:""+interpolatedValue,x:labelPosition.x,y:labelPosition.y})}}startAngle=endAngle}}.bind(this)),this.eventEmitter.emit("created",{chartRect:chartRect,svg:this.svg,options:options})}function Pie(query,data,options,responsiveOptions){Chartist.Pie.super.constructor.call(this,query,data,defaultOptions,Chartist.extend({},defaultOptions,options),responsiveOptions)}var defaultOptions={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:Chartist.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};Chartist.Pie=Chartist.Base.extend({constructor:Pie,createChart:createChart,determineAnchorPosition:determineAnchorPosition})}(window,document,Chartist),Chartist}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.moment=factory()}(this,function(){"use strict";function utils_hooks__hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)}function map(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function getParsingFlags(m){return null==m._pf&&(m._pf=defaultParsingFlags()),m._pf}function valid__isValid(m){if(null==m._isValid){var flags=getParsingFlags(m);m._isValid=!(isNaN(m._d.getTime())||!(flags.overflow<0)||flags.empty||flags.invalidMonth||flags.invalidWeekday||flags.nullInput||flags.invalidFormat||flags.userInvalidated),m._strict&&(m._isValid=m._isValid&&0===flags.charsLeftOver&&0===flags.unusedTokens.length&&void 0===flags.bigHour)}return m._isValid}function valid__createInvalid(flags){var m=create_utc__createUTC(0/0);return null!=flags?extend(getParsingFlags(m),flags):getParsingFlags(m).userInvalidated=!0,m}function copyConfig(to,from){var i,prop,val;if("undefined"!=typeof from._isAMomentObject&&(to._isAMomentObject=from._isAMomentObject),"undefined"!=typeof from._i&&(to._i=from._i),"undefined"!=typeof from._f&&(to._f=from._f),"undefined"!=typeof from._l&&(to._l=from._l),"undefined"!=typeof from._strict&&(to._strict=from._strict),"undefined"!=typeof from._tzm&&(to._tzm=from._tzm),"undefined"!=typeof from._isUTC&&(to._isUTC=from._isUTC),"undefined"!=typeof from._offset&&(to._offset=from._offset),"undefined"!=typeof from._pf&&(to._pf=getParsingFlags(from)),"undefined"!=typeof from._locale&&(to._locale=from._locale),momentProperties.length>0)for(i in momentProperties)prop=momentProperties[i],val=from[prop],"undefined"!=typeof val&&(to[prop]=val);return to}function Moment(config){copyConfig(this,config),this._d=new Date(null!=config._d?config._d.getTime():0/0),updateInProgress===!1&&(updateInProgress=!0,utils_hooks__hooks.updateOffset(this),updateInProgress=!1)}function isMoment(obj){return obj instanceof Moment||null!=obj&&null!=obj._isAMomentObject}function absFloor(number){return 0>number?Math.ceil(number):Math.floor(number)}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=absFloor(coercedNumber)),value}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;len>i;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function Locale(){}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){for(var j,next,locale,split,i=0;i<names.length;){for(split=normalizeLocale(names[i]).split("-"),j=split.length,next=normalizeLocale(names[i+1]),next=next?next.split("-"):null;j>0;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&"undefined"!=typeof module&&module&&module.exports)try{oldLocale=globalLocale._abbr,require("./locale/"+name),locale_locales__getSetGlobalLocale(oldLocale)}catch(e){}return locales[name]}function locale_locales__getSetGlobalLocale(key,values){var data;return key&&(data="undefined"==typeof values?locale_locales__getLocale(key):defineLocale(key,values),data&&(globalLocale=data)),globalLocale._abbr}function defineLocale(name,values){return null!==values?(values.abbr=name,locales[name]=locales[name]||new Locale,locales[name].set(values),locale_locales__getSetGlobalLocale(name),locales[name]):(delete locales[name],null)}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return globalLocale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return chooseLocale(key)}function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return"string"==typeof units?aliases[units]||aliases[units.toLowerCase()]:void 0
}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop),normalizedProp&&(normalizedInput[normalizedProp]=inputObject[prop]));return normalizedInput}function makeGetSet(unit,keepTime){return function(value){return null!=value?(get_set__set(this,unit,value),utils_hooks__hooks.updateOffset(this,keepTime),this):get_set__get(this,unit)}}function get_set__get(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function get_set__set(mom,unit,value){return mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function getSet(units,value){var unit;if("object"==typeof units)for(unit in units)this.set(unit,units[unit]);else if(units=normalizeUnits(units),"function"==typeof this[units])return this[units](value);return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}function addFormatToken(token,padded,ordinal,callback){var func=callback;"string"==typeof callback&&(func=function(){return this[callback]()}),token&&(formatTokenFunctions[token]=func),padded&&(formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}),ordinal&&(formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)})}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;length>i;i++)array[i]=formatTokenFunctions[array[i]]?formatTokenFunctions[array[i]]:removeFormattingTokens(array[i]);return function(mom){var output="";for(i=0;length>i;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function isFunction(sth){return"function"==typeof sth&&"[object Function]"===Object.prototype.toString.call(sth)}function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){return hasOwnProp(regexes,token)?regexes[token](config._strict,config._locale):new RegExp(unescapeFormat(token))}function unescapeFormat(s){return s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function addParseToken(token,callback){var i,func=callback;for("string"==typeof token&&(token=[token]),"number"==typeof callback&&(func=function(input,array){array[callback]=toInt(input)}),i=0;i<token.length;i++)tokens[token[i]]=func}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{},callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){null!=input&&hasOwnProp(tokens,token)&&tokens[token](input,config._a,config,token)}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function localeMonths(m){return this._months[m.month()]}function localeMonthsShort(m){return this._monthsShort[m.month()]}function localeMonthsParse(monthName,format,strict){var i,mom,regex;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(mom=create_utc__createUTC([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}}function setMonth(mom,value){var dayOfMonth;return"string"==typeof value&&(value=mom.localeData().monthsParse(value),"number"!=typeof value)?mom:(dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom)}function getSetMonth(value){return null!=value?(setMonth(this,value),utils_hooks__hooks.updateOffset(this,!0),this):get_set__get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function checkOverflow(m){var overflow,a=m._a;return a&&-2===getParsingFlags(m).overflow&&(overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||24===a[HOUR]&&(0!==a[MINUTE]||0!==a[SECOND]||0!==a[MILLISECOND])?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(m)._overflowDayOfYear&&(YEAR>overflow||overflow>DATE)&&(overflow=DATE),getParsingFlags(m).overflow=overflow),m}function warn(msg){utils_hooks__hooks.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){return firstTime&&(warn(msg+"\n"+(new Error).stack),firstTime=!1),fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){deprecations[name]||(warn(msg),deprecations[name]=!0)}function configFromISO(config){var i,l,string=config._i,match=from_string__isoRegex.exec(string);if(match){for(getParsingFlags(config).iso=!0,i=0,l=isoDates.length;l>i;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0];break}for(i=0,l=isoTimes.length;l>i;i++)if(isoTimes[i][1].exec(string)){config._f+=(match[6]||" ")+isoTimes[i][0];break}string.match(matchOffset)&&(config._f+="Z"),configFromStringAndFormat(config)}else config._isValid=!1}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);return null!==matched?(config._d=new Date(+matched[1]),void 0):(configFromISO(config),config._isValid===!1&&(delete config._isValid,utils_hooks__hooks.createFromInputFallback(config)),void 0)}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return 1970>y&&date.setFullYear(y),date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return 1970>y&&date.setUTCFullYear(y),date}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function getIsLeapYear(){return isLeapYear(this.year())}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var adjustedMoment,end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();return daysToDayOfWeek>end&&(daysToDayOfWeek-=7),end-7>daysToDayOfWeek&&(daysToDayOfWeek+=7),adjustedMoment=local__createLocal(mom).add(daysToDayOfWeek,"d"),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")}function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var dayOfYear,week1Jan=6+firstDayOfWeek-firstDayOfWeekOfYear,janX=createUTCDate(year,0,1+week1Jan),d=janX.getUTCDay();return firstDayOfWeek>d&&(d+=7),weekday=null!=weekday?1*weekday:firstDayOfWeek,dayOfYear=1+week1Jan+7*(week-1)-d+weekday,{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")}function defaults(a,b,c){return null!=a?a:null!=b?b:c}function currentDateArray(config){var now=new Date;return config._useUTC?[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]:[now.getFullYear(),now.getMonth(),now.getDate()]}function configFromArray(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&dayOfYearFromWeekInfo(config),config._dayOfYear&&(yearToUse=defaults(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(getParsingFlags(config)._overflowDayOfYear=!0),date=createUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;3>i&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;7>i;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[HOUR]&&0===config._a[MINUTE]&&0===config._a[SECOND]&&0===config._a[MILLISECOND]&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?createUTCDate:createDate).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w,null!=w.GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year),week=defaults(w.W,1),weekday=defaults(w.E,1)):(dow=config._locale._week.dow,doy=config._locale._week.doy,weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year),week=defaults(w.w,1),null!=w.d?(weekday=w.d,dow>weekday&&++week):weekday=null!=w.e?w.e+dow:dow),temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear}function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601)return configFromISO(config),void 0;config._a=[],getParsingFlags(config).empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&getParsingFlags(config).unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?getParsingFlags(config).empty=!1:getParsingFlags(config).unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&getParsingFlags(config).unusedTokens.push(token);getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&getParsingFlags(config).unusedInput.push(string),getParsingFlags(config).bigHour===!0&&config._a[HOUR]<=12&&config._a[HOUR]>0&&(getParsingFlags(config).bigHour=void 0),config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem),configFromArray(config),checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;return null==meridiem?hour:null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):null!=locale.isPM?(isPm=locale.isPM(meridiem),isPm&&12>hour&&(hour+=12),isPm||12!==hour||(hour=0),hour):hour}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return getParsingFlags(config).invalidFormat=!0,config._d=new Date(0/0),void 0;for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._f=config._f[i],configFromStringAndFormat(tempConfig),valid__isValid(tempConfig)&&(currentScore+=getParsingFlags(tempConfig).charsLeftOver,currentScore+=10*getParsingFlags(tempConfig).unusedTokens.length,getParsingFlags(tempConfig).score=currentScore,(null==scoreToBeat||scoreToBeat>currentScore)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function configFromObject(config){if(!config._d){var i=normalizeObjectUnits(config._i);config._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],configFromArray(config)}}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));return res._nextDay&&(res.add(1,"d"),res._nextDay=void 0),res}function prepareConfig(config){var input=config._i,format=config._f;return config._locale=config._locale||locale_locales__getLocale(config._l),null===input||void 0===format&&""===input?valid__createInvalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),isMoment(input)?new Moment(checkOverflow(input)):(isArray(format)?configFromStringAndArray(config):format?configFromStringAndFormat(config):isDate(input)?config._d=input:configFromInput(config),config))}function configFromInput(config){var input=config._i;void 0===input?config._d=new Date:isDate(input)?config._d=new Date(+input):"string"==typeof input?configFromString(config):isArray(input)?(config._a=map(input.slice(0),function(obj){return parseInt(obj,10)}),configFromArray(config)):"object"==typeof input?configFromObject(config):"number"==typeof input?config._d=new Date(input):utils_hooks__hooks.createFromInputFallback(config)}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};return"boolean"==typeof locale&&(strict=locale,locale=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=isUTC,c._l=locale,c._i=input,c._f=format,c._strict=strict,createFromConfig(c)}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!1)}function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return local__createLocal();for(res=moments[0],i=1;i<moments.length;++i)(!moments[i].isValid()||moments[i][fn](res))&&(res=moments[i]);return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=locale_locales__getLocale(),this._bubble()}function isDuration(obj){return obj instanceof Duration}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset(),sign="+";return 0>offset&&(offset=-offset,sign="-"),sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}function offsetFromString(string){var matches=(string||"").match(matchOffset)||[],chunk=matches[matches.length-1]||[],parts=(chunk+"").match(chunkOffset)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-+res,res._d.setTime(+res._d+diff),utils_hooks__hooks.updateOffset(res,!1),res):local__createLocal(input).local()}function getDateOffset(m){return 15*-Math.round(m._d.getTimezoneOffset()/15)}function getSetOffset(input,keepLocalTime){var localAdjust,offset=this._offset||0;return null!=input?("string"==typeof input&&(input=offsetFromString(input)),Math.abs(input)<16&&(input=60*input),!this._isUTC&&keepLocalTime&&(localAdjust=getDateOffset(this)),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,utils_hooks__hooks.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?offset:getDateOffset(this)}function getSetZone(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(offsetFromString(this._i)),this}function hasAlignedHourOffset(input){return input=input?local__createLocal(input).utcOffset():0,(this.utcOffset()-input)%60===0}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var c={};if(copyConfig(c,this),c=prepareConfig(c),c._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function isLocal(){return!this._isUTC}function isUtcOffset(){return this._isUTC}function isUtc(){return this._isUTC&&0===this._offset}function create__createDuration(input,key){var sign,ret,diffRes,duration=input,match=null;return isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=create__isoRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),d:parseIso(match[4],sign),h:parseIso(match[5],sign),m:parseIso(match[6],sign),s:parseIso(match[7],sign),w:parseIso(match[8],sign)}):null==duration?duration={}:"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to)),duration={},duration.ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret}function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return other=cloneWithOffset(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):(res=positiveMomentsDifference(other,base),res.milliseconds=-res.milliseconds,res.months=-res.months),res}function createAdder(direction,name){return function(val,period){var dur,tmp;return null===period||isNaN(+period)||(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period)."),tmp=val,val=period,period=tmp),val="string"==typeof val?+val:val,dur=create__createDuration(val,period),add_subtract__addSubtract(this,dur,direction),this}}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=null==updateOffset?!0:updateOffset,milliseconds&&mom._d.setTime(+mom._d+milliseconds*isAdding),days&&get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding),months&&setMonth(mom,get_set__get(mom,"Month")+months*isAdding),updateOffset&&utils_hooks__hooks.updateOffset(mom,days||months)}function moment_calendar__calendar(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),diff=this.diff(sod,"days",!0),format=-6>diff?"sameElse":-1>diff?"lastWeek":0>diff?"lastDay":1>diff?"sameDay":2>diff?"nextDay":7>diff?"nextWeek":"sameElse";return this.format(formats&&formats[format]||this.localeData().calendar(format,this,local__createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var inputMs;return units=normalizeUnits("undefined"!=typeof units?units:"millisecond"),"millisecond"===units?(input=isMoment(input)?input:local__createLocal(input),+this>+input):(inputMs=isMoment(input)?+input:+local__createLocal(input),inputMs<+this.clone().startOf(units))}function isBefore(input,units){var inputMs;return units=normalizeUnits("undefined"!=typeof units?units:"millisecond"),"millisecond"===units?(input=isMoment(input)?input:local__createLocal(input),+input>+this):(inputMs=isMoment(input)?+input:+local__createLocal(input),+this.clone().endOf(units)<inputMs)}function isBetween(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units)}function isSame(input,units){var inputMs;return units=normalizeUnits(units||"millisecond"),"millisecond"===units?(input=isMoment(input)?input:local__createLocal(input),+this===+input):(inputMs=+local__createLocal(input),+this.clone().startOf(units)<=inputMs&&inputMs<=+this.clone().endOf(units))}function diff(input,units,asFloat){var delta,output,that=cloneWithOffset(input,this),zoneDelta=6e4*(that.utcOffset()-this.utcOffset());return units=normalizeUnits(units),"year"===units||"month"===units||"quarter"===units?(output=monthDiff(this,that),"quarter"===units?output/=3:"year"===units&&(output/=12)):(delta=this-that,output="second"===units?delta/1e3:"minute"===units?delta/6e4:"hour"===units?delta/36e5:"day"===units?(delta-zoneDelta)/864e5:"week"===units?(delta-zoneDelta)/6048e5:delta),asFloat?output:absFloor(output)}function monthDiff(a,b){var anchor2,adjust,wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months");return 0>b-anchor?(anchor2=a.clone().add(wholeMonthDiff-1,"months"),adjust=(b-anchor)/(anchor-anchor2)):(anchor2=a.clone().add(wholeMonthDiff+1,"months"),adjust=(b-anchor)/(anchor2-anchor)),-(wholeMonthDiff+adjust)}function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function moment_format__toISOString(){var m=this.clone().utc();return 0<m.year()&&m.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function format(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output)}function from(time,withoutSuffix){return this.isValid()?create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix)}function to(time,withoutSuffix){return this.isValid()?create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix)}function locale(key){var newLocaleData;return void 0===key?this._locale._abbr:(newLocaleData=locale_locales__getLocale(key),null!=newLocaleData&&(this._locale=newLocaleData),this)}function localeData(){return this._locale}function startOf(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units&&this.weekday(0),"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this}function endOf(units){return units=normalizeUnits(units),void 0===units||"millisecond"===units?this:this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms")}function to_type__valueOf(){return+this._d-6e4*(this._offset||0)}function unix(){return Math.floor(+this/1e3)}function toDate(){return this._offset?new Date(+this):this._d}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function moment_valid__isValid(){return valid__isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}function weeksInYear(year,dow,doy){return weekOfYear(local__createLocal([year,11,31+dow-doy]),dow,doy).week}function getSetWeekYear(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==input?year:this.add(input-year,"y")}function getSetISOWeekYear(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add(input-year,"y")}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetQuarter(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)}function parseWeekday(input,locale){return"string"!=typeof input?input:isNaN(input)?(input=locale.weekdaysParse(input),"number"==typeof input?input:null):parseInt(input,10)}function localeWeekdays(m){return this._weekdays[m.day()]}function localeWeekdaysShort(m){return this._weekdaysShort[m.day()]}function localeWeekdaysMin(m){return this._weekdaysMin[m.day()]}function localeWeekdaysParse(weekdayName){var i,mom,regex;for(this._weekdaysParse=this._weekdaysParse||[],i=0;7>i;i++)if(this._weekdaysParse[i]||(mom=local__createLocal([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),this._weekdaysParse[i].test(weekdayName))return i}function getSetDayOfWeek(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day}function getSetLocaleDayOfWeek(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)}function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}function matchMeridiem(isStrict,locale){return locale._meridiemParse}function localeIsPM(input){return"p"===(input+"").toLowerCase().charAt(0)}function localeMeridiem(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"}function parseMs(input,array){array[MILLISECOND]=toInt(1e3*("0."+input))}function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}function moment__createUnix(input){return local__createLocal(1e3*input)}function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone()}function locale_calendar__calendar(key,mom,now){var output=this._calendar[key];return"function"==typeof output?output.call(mom,now):output}function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];return format||!formatUpper?format:(this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key])}function invalidDate(){return this._invalidDate}function ordinal(number){return this._ordinal.replace("%d",number)}function preParsePostFormat(string){return string}function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)}function locale_set__set(config){var prop,i;for(i in config)prop=config[i],"function"==typeof prop?this[i]=prop:this["_"+i]=prop;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function lists__get(format,index,field,setter){var locale=locale_locales__getLocale(),utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format)}function list(format,index,field,count,setter){if("number"==typeof format&&(index=format,format=void 0),format=format||"",null!=index)return lists__get(format,index,field,setter);var i,out=[];for(i=0;count>i;i++)out[i]=lists__get(format,i,field,setter);return out}function lists__listMonths(format,index){return list(format,index,"months",12,"month")}function lists__listMonthsShort(format,index){return list(format,index,"monthsShort",12,"month")}function lists__listWeekdays(format,index){return list(format,index,"weekdays",7,"day")}function lists__listWeekdaysShort(format,index){return list(format,index,"weekdaysShort",7,"day")}function lists__listWeekdaysMin(format,index){return list(format,index,"weekdaysMin",7,"day")}function duration_abs__abs(){var data=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),data.milliseconds=mathAbs(data.milliseconds),data.seconds=mathAbs(data.seconds),data.minutes=mathAbs(data.minutes),data.hours=mathAbs(data.hours),data.months=mathAbs(data.months),data.years=mathAbs(data.years),this}function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);return duration._milliseconds+=direction*other._milliseconds,duration._days+=direction*other._days,duration._months+=direction*other._months,duration._bubble()}function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1)}function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1)}function absCeil(number){return 0>number?Math.floor(number):Math.ceil(number)}function bubble(){var seconds,minutes,hours,years,monthsFromDays,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;return milliseconds>=0&&days>=0&&months>=0||0>=milliseconds&&0>=days&&0>=months||(milliseconds+=864e5*absCeil(monthsToDays(months)+days),days=0,months=0),data.milliseconds=milliseconds%1e3,seconds=absFloor(milliseconds/1e3),data.seconds=seconds%60,minutes=absFloor(seconds/60),data.minutes=minutes%60,hours=absFloor(minutes/60),data.hours=hours%24,days+=absFloor(hours/24),monthsFromDays=absFloor(daysToMonths(days)),months+=monthsFromDays,days-=absCeil(monthsToDays(monthsFromDays)),years=absFloor(months/12),months%=12,data.days=days,data.months=months,data.years=years,this}function daysToMonths(days){return 4800*days/146097}function monthsToDays(months){return 146097*months/4800}function as(units){var days,months,milliseconds=this._milliseconds;if(units=normalizeUnits(units),"month"===units||"year"===units)return days=this._days+milliseconds/864e5,months=this._months+daysToMonths(days),"month"===units?months:months/12;switch(days=this._days+Math.round(monthsToDays(this._months)),units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return 24*days+milliseconds/36e5;
case"minute":return 1440*days+milliseconds/6e4;case"second":return 86400*days+milliseconds/1e3;case"millisecond":return Math.floor(864e5*days)+milliseconds;default:throw new Error("Unknown unit "+units)}}function duration_as__valueOf(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)}function makeAs(alias){return function(){return this.as(alias)}}function duration_get__get(units){return units=normalizeUnits(units),this[units+"s"]()}function makeGetter(name){return function(){return this._data[name]}}function weeks(){return absFloor(this.days()/7)}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),a=seconds<thresholds.s&&["s",seconds]||1===minutes&&["m"]||minutes<thresholds.m&&["mm",minutes]||1===hours&&["h"]||hours<thresholds.h&&["hh",hours]||1===days&&["d"]||days<thresholds.d&&["dd",days]||1===months&&["M"]||months<thresholds.M&&["MM",months]||1===years&&["y"]||["yy",years];return a[2]=withoutSuffix,a[3]=+posNegDuration>0,a[4]=locale,substituteTimeAgo.apply(null,a)}function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){return void 0===thresholds[threshold]?!1:void 0===limit?thresholds[threshold]:(thresholds[threshold]=limit,!0)}function humanize(withSuffix){var locale=this.localeData(),output=duration_humanize__relativeTime(this,!withSuffix,locale);return withSuffix&&(output=locale.pastFuture(+this,output)),locale.postformat(output)}function iso_string__toISOString(){var minutes,hours,years,seconds=iso_string__abs(this._milliseconds)/1e3,days=iso_string__abs(this._days),months=iso_string__abs(this._months);minutes=absFloor(seconds/60),hours=absFloor(minutes/60),seconds%=60,minutes%=60,years=absFloor(months/12),months%=12;var Y=years,M=months,D=days,h=hours,m=minutes,s=seconds,total=this.asSeconds();return total?(0>total?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":""):"P0D"}var hookCallback,globalLocale,momentProperties=utils_hooks__hooks.momentProperties=[],updateInProgress=!1,locales={},aliases={},formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={},match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,regexes={},tokens={},YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6;addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)}),addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)}),addUnitAlias("month","M"),addRegexToken("M",match1to2),addRegexToken("MM",match1to2,match2),addRegexToken("MMM",matchWord),addRegexToken("MMMM",matchWord),addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1}),addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);null!=month?array[MONTH]=month:getParsingFlags(config).invalidMonth=input});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),deprecations={};utils_hooks__hooks.suppressDeprecationWarnings=!1;var from_string__isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;utils_hooks__hooks.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addRegexToken("Y",matchSigned),addRegexToken("YY",match1to2,match2),addRegexToken("YYYY",match1to4,match4),addRegexToken("YYYYY",match1to6,match6),addRegexToken("YYYYYY",match1to6,match6),addParseToken(["YYYYY","YYYYYY"],YEAR),addParseToken("YYYY",function(input,array){array[YEAR]=2===input.length?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input)}),addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input)}),utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!1);addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addRegexToken("w",match1to2),addRegexToken("ww",match1to2,match2),addRegexToken("W",match1to2),addRegexToken("WW",match1to2,match2),addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});var defaultLocaleWeek={dow:0,doy:6};addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addRegexToken("DDD",match1to3),addRegexToken("DDDD",match3),addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)}),utils_hooks__hooks.ISO_8601=function(){};var prototypeMin=deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return this>other?this:other}),prototypeMax=deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other>this?this:other});offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchOffset),addRegexToken("ZZ",matchOffset),addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=!0,config._tzm=offsetFromString(input)});var chunkOffset=/([\+\-]|\d\d)/gi;utils_hooks__hooks.updateOffset=function(){};var aspNetRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,create__isoRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;create__createDuration.fn=Duration.prototype;var add_subtract__add=createAdder(1,"add"),add_subtract__subtract=createAdder(-1,"subtract");utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return void 0===key?this.localeData():this.locale(key)});addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100}),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addRegexToken("G",matchSigned),addRegexToken("g",matchSigned),addRegexToken("GG",match1to2,match2),addRegexToken("gg",match1to2,match2),addRegexToken("GGGG",match1to4,match4),addRegexToken("gggg",match1to4,match4),addRegexToken("GGGGG",match1to6,match6),addRegexToken("ggggg",match1to6,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)}),addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input)}),addFormatToken("Q",0,0,"quarter"),addUnitAlias("quarter","Q"),addRegexToken("Q",match1),addParseToken("Q",function(input,array){array[MONTH]=3*(toInt(input)-1)}),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addRegexToken("D",match1to2),addRegexToken("DD",match1to2,match2),addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient}),addParseToken(["D","DD"],DATE),addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10)});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)}),addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)}),addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addRegexToken("d",match1to2),addRegexToken("e",match1to2),addRegexToken("E",match1to2),addRegexToken("dd",matchWord),addRegexToken("ddd",matchWord),addRegexToken("dddd",matchWord),addWeekParseToken(["dd","ddd","dddd"],function(input,week,config){var weekday=config._locale.weekdaysParse(input);null!=weekday?week.d=weekday:getParsingFlags(config).invalidWeekday=input}),addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,function(){return this.hours()%12||12}),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",match1to2),addRegexToken("h",match1to2),addRegexToken("HH",match1to2,match2),addRegexToken("hh",match1to2,match2),addParseToken(["H","HH"],HOUR),addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input),config._meridiem=input}),addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input),getParsingFlags(config).bigHour=!0});var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0);addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addRegexToken("m",match1to2),addRegexToken("mm",match1to2,match2),addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addRegexToken("s",match1to2),addRegexToken("ss",match1to2,match2),addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return 10*this.millisecond()}),addFormatToken(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),addFormatToken(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),addFormatToken(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),addFormatToken(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),addUnitAlias("millisecond","ms"),addRegexToken("S",match1to3,match1),addRegexToken("SS",match1to3,match2),addRegexToken("SSS",match1to3,match3);var token;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);var getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add,momentPrototype__proto.calendar=moment_calendar__calendar,momentPrototype__proto.clone=clone,momentPrototype__proto.diff=diff,momentPrototype__proto.endOf=endOf,momentPrototype__proto.format=format,momentPrototype__proto.from=from,momentPrototype__proto.fromNow=fromNow,momentPrototype__proto.to=to,momentPrototype__proto.toNow=toNow,momentPrototype__proto.get=getSet,momentPrototype__proto.invalidAt=invalidAt,momentPrototype__proto.isAfter=isAfter,momentPrototype__proto.isBefore=isBefore,momentPrototype__proto.isBetween=isBetween,momentPrototype__proto.isSame=isSame,momentPrototype__proto.isValid=moment_valid__isValid,momentPrototype__proto.lang=lang,momentPrototype__proto.locale=locale,momentPrototype__proto.localeData=localeData,momentPrototype__proto.max=prototypeMax,momentPrototype__proto.min=prototypeMin,momentPrototype__proto.parsingFlags=parsingFlags,momentPrototype__proto.set=getSet,momentPrototype__proto.startOf=startOf,momentPrototype__proto.subtract=add_subtract__subtract,momentPrototype__proto.toArray=toArray,momentPrototype__proto.toObject=toObject,momentPrototype__proto.toDate=toDate,momentPrototype__proto.toISOString=moment_format__toISOString,momentPrototype__proto.toJSON=moment_format__toISOString,momentPrototype__proto.toString=toString,momentPrototype__proto.unix=unix,momentPrototype__proto.valueOf=to_type__valueOf,momentPrototype__proto.year=getSetYear,momentPrototype__proto.isLeapYear=getIsLeapYear,momentPrototype__proto.weekYear=getSetWeekYear,momentPrototype__proto.isoWeekYear=getSetISOWeekYear,momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter,momentPrototype__proto.month=getSetMonth,momentPrototype__proto.daysInMonth=getDaysInMonth,momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek,momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek,momentPrototype__proto.weeksInYear=getWeeksInYear,momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear,momentPrototype__proto.date=getSetDayOfMonth,momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek,momentPrototype__proto.weekday=getSetLocaleDayOfWeek,momentPrototype__proto.isoWeekday=getSetISODayOfWeek,momentPrototype__proto.dayOfYear=getSetDayOfYear,momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour,momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute,momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond,momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond,momentPrototype__proto.utcOffset=getSetOffset,momentPrototype__proto.utc=setOffsetToUTC,momentPrototype__proto.local=setOffsetToLocal,momentPrototype__proto.parseZone=setOffsetToParsedOffset,momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset,momentPrototype__proto.isDST=isDaylightSavingTime,momentPrototype__proto.isDSTShifted=isDaylightSavingTimeShifted,momentPrototype__proto.isLocal=isLocal,momentPrototype__proto.isUtcOffset=isUtcOffset,momentPrototype__proto.isUtc=isUtc,momentPrototype__proto.isUTC=isUtc,momentPrototype__proto.zoneAbbr=getZoneAbbr,momentPrototype__proto.zoneName=getZoneName,momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",getSetZone);var momentPrototype=momentPrototype__proto,defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},defaultInvalidDate="Invalid date",defaultOrdinal="%d",defaultOrdinalParse=/\d{1,2}/,defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},prototype__proto=Locale.prototype;prototype__proto._calendar=defaultCalendar,prototype__proto.calendar=locale_calendar__calendar,prototype__proto._longDateFormat=defaultLongDateFormat,prototype__proto.longDateFormat=longDateFormat,prototype__proto._invalidDate=defaultInvalidDate,prototype__proto.invalidDate=invalidDate,prototype__proto._ordinal=defaultOrdinal,prototype__proto.ordinal=ordinal,prototype__proto._ordinalParse=defaultOrdinalParse,prototype__proto.preparse=preParsePostFormat,prototype__proto.postformat=preParsePostFormat,prototype__proto._relativeTime=defaultRelativeTime,prototype__proto.relativeTime=relative__relativeTime,prototype__proto.pastFuture=pastFuture,prototype__proto.set=locale_set__set,prototype__proto.months=localeMonths,prototype__proto._months=defaultLocaleMonths,prototype__proto.monthsShort=localeMonthsShort,prototype__proto._monthsShort=defaultLocaleMonthsShort,prototype__proto.monthsParse=localeMonthsParse,prototype__proto.week=localeWeek,prototype__proto._week=defaultLocaleWeek,prototype__proto.firstDayOfYear=localeFirstDayOfYear,prototype__proto.firstDayOfWeek=localeFirstDayOfWeek,prototype__proto.weekdays=localeWeekdays,prototype__proto._weekdays=defaultLocaleWeekdays,prototype__proto.weekdaysMin=localeWeekdaysMin,prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin,prototype__proto.weekdaysShort=localeWeekdaysShort,prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort,prototype__proto.weekdaysParse=localeWeekdaysParse,prototype__proto.isPM=localeIsPM,prototype__proto._meridiemParse=defaultLocaleMeridiemParse,prototype__proto.meridiem=localeMeridiem,locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale),utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs,asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asYears=makeAs("y"),milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years"),round=Math.round,thresholds={s:45,m:45,h:22,d:26,M:11},iso_string__abs=Math.abs,duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs,duration_prototype__proto.add=duration_add_subtract__add,duration_prototype__proto.subtract=duration_add_subtract__subtract,duration_prototype__proto.as=as,duration_prototype__proto.asMilliseconds=asMilliseconds,duration_prototype__proto.asSeconds=asSeconds,duration_prototype__proto.asMinutes=asMinutes,duration_prototype__proto.asHours=asHours,duration_prototype__proto.asDays=asDays,duration_prototype__proto.asWeeks=asWeeks,duration_prototype__proto.asMonths=asMonths,duration_prototype__proto.asYears=asYears,duration_prototype__proto.valueOf=duration_as__valueOf,duration_prototype__proto._bubble=bubble,duration_prototype__proto.get=duration_get__get,duration_prototype__proto.milliseconds=milliseconds,duration_prototype__proto.seconds=seconds,duration_prototype__proto.minutes=minutes,duration_prototype__proto.hours=hours,duration_prototype__proto.days=days,duration_prototype__proto.weeks=weeks,duration_prototype__proto.months=months,duration_prototype__proto.years=years,duration_prototype__proto.humanize=humanize,duration_prototype__proto.toISOString=iso_string__toISOString,duration_prototype__proto.toString=iso_string__toISOString,duration_prototype__proto.toJSON=iso_string__toISOString,duration_prototype__proto.locale=locale,duration_prototype__proto.localeData=localeData,duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString),duration_prototype__proto.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",matchSigned),addRegexToken("X",matchTimestamp),addParseToken("X",function(input,array,config){config._d=new Date(1e3*parseFloat(input,10))}),addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))}),utils_hooks__hooks.version="2.10.6",setHookCallback(local__createLocal),utils_hooks__hooks.fn=momentPrototype,utils_hooks__hooks.min=min,utils_hooks__hooks.max=max,utils_hooks__hooks.utc=create_utc__createUTC,utils_hooks__hooks.unix=moment__createUnix,utils_hooks__hooks.months=lists__listMonths,utils_hooks__hooks.isDate=isDate,utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale,utils_hooks__hooks.invalid=valid__createInvalid,utils_hooks__hooks.duration=create__createDuration,utils_hooks__hooks.isMoment=isMoment,utils_hooks__hooks.weekdays=lists__listWeekdays,utils_hooks__hooks.parseZone=moment__createInZone,utils_hooks__hooks.localeData=locale_locales__getLocale,utils_hooks__hooks.isDuration=isDuration,utils_hooks__hooks.monthsShort=lists__listMonthsShort,utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin,utils_hooks__hooks.defineLocale=defineLocale,utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort,utils_hooks__hooks.normalizeUnits=normalizeUnits,utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold;var _moment=utils_hooks__hooks;return _moment}),/**
* @version: 2.1.13
* @author: Dan Grossman http://www.dangrossman.info/
* @copyright: Copyright (c) 2012-2015 Dan Grossman. All rights reserved.
* @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
* @website: https://www.improvely.com/
*/
function(root,factory){if("function"==typeof define&&define.amd)define(["moment","jquery","exports"],function(momentjs,$,exports){root.daterangepicker=factory(root,exports,momentjs,$)});else if("undefined"!=typeof exports){var momentjs=require("moment"),jQuery="undefined"!=typeof window?window.jQuery:void 0;if(!jQuery)try{jQuery=require("jquery"),jQuery.fn||(jQuery.fn={})}catch(err){if(!jQuery)throw new Error("jQuery dependency not found")}factory(root,exports,momentjs,jQuery)}else root.daterangepicker=factory(root,{},root.moment||moment,root.jQuery||root.Zepto||root.ender||root.$)}(this||{},function(root,daterangepicker,moment,$){var DateRangePicker=function(element,options,cb){if(this.parentEl="body",this.element=$(element),this.startDate=moment().startOf("day"),this.endDate=moment().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-success",this.cancelClass="btn-default",this.locale={format:"MM/DD/YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:moment.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},("object"!=typeof options||null===options)&&(options={}),options=$.extend(this.element.data(),options),"string"!=typeof options.template&&(options.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'),this.parentEl=options.parentEl&&$(options.parentEl).length?$(options.parentEl):$(this.parentEl),this.container=$(options.template).appendTo(this.parentEl),"object"==typeof options.locale&&("string"==typeof options.locale.format&&(this.locale.format=options.locale.format),"string"==typeof options.locale.separator&&(this.locale.separator=options.locale.separator),"object"==typeof options.locale.daysOfWeek&&(this.locale.daysOfWeek=options.locale.daysOfWeek.slice()),"object"==typeof options.locale.monthNames&&(this.locale.monthNames=options.locale.monthNames.slice()),"number"==typeof options.locale.firstDay&&(this.locale.firstDay=options.locale.firstDay),"string"==typeof options.locale.applyLabel&&(this.locale.applyLabel=options.locale.applyLabel),"string"==typeof options.locale.cancelLabel&&(this.locale.cancelLabel=options.locale.cancelLabel),"string"==typeof options.locale.weekLabel&&(this.locale.weekLabel=options.locale.weekLabel),"string"==typeof options.locale.customRangeLabel&&(this.locale.customRangeLabel=options.locale.customRangeLabel)),"string"==typeof options.startDate&&(this.startDate=moment(options.startDate,this.locale.format)),"string"==typeof options.endDate&&(this.endDate=moment(options.endDate,this.locale.format)),"string"==typeof options.minDate&&(this.minDate=moment(options.minDate,this.locale.format)),"string"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate,this.locale.format)),"object"==typeof options.startDate&&(this.startDate=moment(options.startDate)),"object"==typeof options.endDate&&(this.endDate=moment(options.endDate)),"object"==typeof options.minDate&&(this.minDate=moment(options.minDate)),"object"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof options.applyClass&&(this.applyClass=options.applyClass),"string"==typeof options.cancelClass&&(this.cancelClass=options.cancelClass),"object"==typeof options.dateLimit&&(this.dateLimit=options.dateLimit),"string"==typeof options.opens&&(this.opens=options.opens),"string"==typeof options.drops&&(this.drops=options.drops),"boolean"==typeof options.showWeekNumbers&&(this.showWeekNumbers=options.showWeekNumbers),"string"==typeof options.buttonClasses&&(this.buttonClasses=options.buttonClasses),"object"==typeof options.buttonClasses&&(this.buttonClasses=options.buttonClasses.join(" ")),"boolean"==typeof options.showDropdowns&&(this.showDropdowns=options.showDropdowns),"boolean"==typeof options.singleDatePicker&&(this.singleDatePicker=options.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof options.timePicker&&(this.timePicker=options.timePicker),"boolean"==typeof options.timePickerSeconds&&(this.timePickerSeconds=options.timePickerSeconds),"number"==typeof options.timePickerIncrement&&(this.timePickerIncrement=options.timePickerIncrement),"boolean"==typeof options.timePicker24Hour&&(this.timePicker24Hour=options.timePicker24Hour),"boolean"==typeof options.autoApply&&(this.autoApply=options.autoApply),"boolean"==typeof options.autoUpdateInput&&(this.autoUpdateInput=options.autoUpdateInput),"boolean"==typeof options.linkedCalendars&&(this.linkedCalendars=options.linkedCalendars),"function"==typeof options.isInvalidDate&&(this.isInvalidDate=options.isInvalidDate),0!=this.locale.firstDay)for(var iterator=this.locale.firstDay;iterator>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),iterator--;var start,end,range;if("undefined"==typeof options.startDate&&"undefined"==typeof options.endDate&&$(this.element).is("input[type=text]")){var val=$(this.element).val(),split=val.split(this.locale.separator);start=end=null,2==split.length?(start=moment(split[0],this.locale.format),end=moment(split[1],this.locale.format)):this.singleDatePicker&&""!==val&&(start=moment(val,this.locale.format),end=moment(val,this.locale.format)),null!==start&&null!==end&&(this.setStartDate(start),this.setEndDate(end))}if("object"==typeof options.ranges){for(range in options.ranges){start="string"==typeof options.ranges[range][0]?moment(options.ranges[range][0],this.locale.format):moment(options.ranges[range][0]),end="string"==typeof options.ranges[range][1]?moment(options.ranges[range][1],this.locale.format):moment(options.ranges[range][1]),this.minDate&&start.isBefore(this.minDate)&&(start=this.minDate.clone());var maxDate=this.maxDate;if(this.dateLimit&&start.clone().add(this.dateLimit).isAfter(maxDate)&&(maxDate=start.clone().add(this.dateLimit)),maxDate&&end.isAfter(maxDate)&&(end=maxDate.clone()),!(this.minDate&&end.isBefore(this.minDate)||maxDate&&start.isAfter(maxDate))){var elem=document.createElement("textarea");elem.innerHTML=range,rangeHtml=elem.value,this.ranges[rangeHtml]=[start,end]}}var list="<ul>";for(range in this.ranges)list+="<li>"+range+"</li>";list+="<li>"+this.locale.customRangeLabel+"</li>",list+="</ul>",this.container.find(".ranges").prepend(list)}if("function"==typeof cb&&(this.callback=cb),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof options.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input i").hide(),this.timePicker||this.container.find(".ranges").hide()),"undefined"!=typeof options.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),"undefined"!=typeof options.ranges&&"right"==this.opens){var ranges=this.container.find(".ranges"),html=ranges.clone();ranges.remove(),this.container.find(".calendar.left").parent().prepend(html)}this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",$.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",$.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",$.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",$.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",$.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",$.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",$.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_input input",$.proxy(this.formInputsChanged,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",$.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",$.proxy(this.clickCancel,this)).on("click.daterangepicker","li",$.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",$.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",$.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":$.proxy(this.show,this),"focus.daterangepicker":$.proxy(this.show,this),"keyup.daterangepicker":$.proxy(this.elementChanged,this),"keydown.daterangepicker":$.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",$.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};DateRangePicker.prototype={constructor:DateRangePicker,setStartDate:function(startDate){"string"==typeof startDate&&(this.startDate=moment(startDate,this.locale.format)),"object"==typeof startDate&&(this.startDate=moment(startDate)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(endDate){"string"==typeof endDate&&(this.endDate=moment(endDate,this.locale.format)),"object"==typeof endDate&&(this.endDate=moment(endDate)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.startDate.clone().date(2).add(1,"month"):this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"))},updateCalendars:function(){if(this.timePicker){var hour,minute,second;if(this.endDate){if(hour=parseInt(this.container.find(".left .hourselect").val(),10),minute=parseInt(this.container.find(".left .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var ampm=this.container.find(".left .ampmselect").val();"PM"===ampm&&12>hour&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}}else if(hour=parseInt(this.container.find(".right .hourselect").val(),10),minute=parseInt(this.container.find(".right .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour){var ampm=this.container.find(".right .ampmselect").val();"PM"===ampm&&12>hour&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}this.leftCalendar.month.hour(hour).minute(minute).second(second),this.rightCalendar.month.hour(hour).minute(minute).second(second)}if(this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate){var customRange=!0,i=0;for(var range in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[range][0])&&this.endDate.isSame(this.ranges[range][1])){customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[range][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[range][1].format("YYYY-MM-DD")){customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break}i++}customRange&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())}},renderCalendar:function(side){var calendar="left"==side?this.leftCalendar:this.rightCalendar,month=calendar.month.month(),year=calendar.month.year(),hour=calendar.month.hour(),minute=calendar.month.minute(),second=calendar.month.second(),daysInMonth=moment([year,month]).daysInMonth(),firstDay=moment([year,month,1]),lastDay=moment([year,month,daysInMonth]),lastMonth=moment(firstDay).subtract(1,"month").month(),lastYear=moment(firstDay).subtract(1,"month").year(),daysInLastMonth=moment([lastYear,lastMonth]).daysInMonth(),dayOfWeek=firstDay.day(),calendar=[];calendar.firstDay=firstDay,calendar.lastDay=lastDay;for(var i=0;6>i;i++)calendar[i]=[];var startDay=daysInLastMonth-dayOfWeek+this.locale.firstDay+1;startDay>daysInLastMonth&&(startDay-=7),dayOfWeek==this.locale.firstDay&&(startDay=daysInLastMonth-6);for(var col,row,curDate=moment([lastYear,lastMonth,startDay,12,minute,second]),i=0,col=0,row=0;42>i;i++,col++,curDate=moment(curDate).add(24,"hour"))i>0&&col%7===0&&(col=0,row++),calendar[row][col]=curDate.clone().hour(hour).minute(minute).second(second),curDate.hour(12),this.minDate&&calendar[row][col].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&calendar[row][col].isBefore(this.minDate)&&"left"==side&&(calendar[row][col]=this.minDate.clone()),this.maxDate&&calendar[row][col].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&calendar[row][col].isAfter(this.maxDate)&&"right"==side&&(calendar[row][col]=this.maxDate.clone());"left"==side?this.leftCalendar.calendar=calendar:this.rightCalendar.calendar=calendar;var minDate="left"==side?this.minDate:this.startDate,maxDate=this.maxDate,html=("left"==side?this.startDate:this.endDate,'<table class="table-condensed">');html+="<thead>",html+="<tr>",this.showWeekNumbers&&(html+="<th></th>"),html+=minDate&&!minDate.isBefore(calendar.firstDay)||this.linkedCalendars&&"left"!=side?"<th></th>":'<th class="prev available"><i class="fa fa-chevron-left glyphicon glyphicon-chevron-left"></i></th>';var dateHtml=this.locale.monthNames[calendar[1][1].month()]+calendar[1][1].format(" YYYY");if(this.showDropdowns){for(var currentMonth=calendar[1][1].month(),currentYear=calendar[1][1].year(),maxYear=maxDate&&maxDate.year()||currentYear+5,minYear=minDate&&minDate.year()||currentYear-50,inMinYear=currentYear==minYear,inMaxYear=currentYear==maxYear,monthHtml='<select class="monthselect">',m=0;12>m;m++)monthHtml+=(!inMinYear||m>=minDate.month())&&(!inMaxYear||m<=maxDate.month())?"<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+">"+this.locale.monthNames[m]+"</option>":"<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[m]+"</option>";monthHtml+="</select>";for(var yearHtml='<select class="yearselect">',y=minYear;maxYear>=y;y++)yearHtml+='<option value="'+y+'"'+(y===currentYear?' selected="selected"':"")+">"+y+"</option>";yearHtml+="</select>",dateHtml=monthHtml+yearHtml}if(html+='<th colspan="5" class="month">'+dateHtml+"</th>",html+=maxDate&&!maxDate.isAfter(calendar.lastDay)||this.linkedCalendars&&"right"!=side&&!this.singleDatePicker?"<th></th>":'<th class="next available"><i class="fa fa-chevron-right glyphicon glyphicon-chevron-right"></i></th>',html+="</tr>",html+="<tr>",this.showWeekNumbers&&(html+='<th class="week">'+this.locale.weekLabel+"</th>"),$.each(this.locale.daysOfWeek,function(index,dayOfWeek){html+="<th>"+dayOfWeek+"</th>"}),html+="</tr>",html+="</thead>",html+="<tbody>",null==this.endDate&&this.dateLimit){var maxLimit=this.startDate.clone().add(this.dateLimit).endOf("day");(!maxDate||maxLimit.isBefore(maxDate))&&(maxDate=maxLimit)}for(var row=0;6>row;row++){html+="<tr>",this.showWeekNumbers&&(html+='<td class="week">'+calendar[row][0].week()+"</td>");for(var col=0;7>col;col++){var classes=[];calendar[row][col].isSame(new Date,"day")&&classes.push("today"),calendar[row][col].isoWeekday()>5&&classes.push("weekend"),calendar[row][col].month()!=calendar[1][1].month()&&classes.push("off"),this.minDate&&calendar[row][col].isBefore(this.minDate,"day")&&classes.push("off","disabled"),maxDate&&calendar[row][col].isAfter(maxDate,"day")&&classes.push("off","disabled"),this.isInvalidDate(calendar[row][col])&&classes.push("off","disabled"),calendar[row][col].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(classes.push("active","start-date"),null!=this.endDate&&classes.push("in-range")),null!=this.endDate&&calendar[row][col].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&classes.push("active","end-date","in-range"),null!=this.endDate&&calendar[row][col]>this.startDate&&calendar[row][col]<this.endDate&&classes.push("in-range");for(var cname="",disabled=!1,i=0;i<classes.length;i++)cname+=classes[i]+" ","disabled"==classes[i]&&(disabled=!0);disabled||(cname+="available"),html+='<td class="'+cname.replace(/^\s+|\s+$/g,"")+'" data-title="r'+row+"c"+col+'">'+calendar[row][col].date()+"</td>"}html+="</tr>"}html+="</tbody>",html+="</table>",this.container.find(".calendar."+side+" .calendar-table").html(html)},renderTimePicker:function(side){var html,selected,minDate,maxDate=this.maxDate;!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(maxDate=this.startDate.clone().add(this.dateLimit)),"left"==side?(selected=this.startDate.clone(),minDate=this.minDate):"right"==side&&(selected=this.endDate?this.endDate.clone():this.startDate.clone(),minDate=this.startDate),html='<select class="hourselect">';for(var start=this.timePicker24Hour?0:1,end=this.timePicker24Hour?23:12,i=start;end>=i;i++){var i_in_24=i;this.timePicker24Hour||(i_in_24=selected.hour()>=12?12==i?12:i+12:12==i?0:i);var time=selected.clone().hour(i_in_24),disabled=!1;minDate&&time.minute(59).isBefore(minDate)&&(disabled=!0),maxDate&&time.minute(0).isAfter(maxDate)&&(disabled=!0),html+=i_in_24!=selected.hour()||disabled?disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+i+"</option>":'<option value="'+i+'">'+i+"</option>":'<option value="'+i+'" selected="selected">'+i+"</option>"}html+="</select> ",html+=': <select class="minuteselect">';for(var i=0;60>i;i+=this.timePickerIncrement){var padded=10>i?"0"+i:i,time=selected.clone().minute(i),disabled=!1;minDate&&time.second(59).isBefore(minDate)&&(disabled=!0),maxDate&&time.second(0).isAfter(maxDate)&&(disabled=!0),html+=selected.minute()!=i||disabled?disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+padded+"</option>":'<option value="'+i+'">'+padded+"</option>":'<option value="'+i+'" selected="selected">'+padded+"</option>"}if(html+="</select> ",this.timePickerSeconds){html+=': <select class="secondselect">';for(var i=0;60>i;i++){var padded=10>i?"0"+i:i,time=selected.clone().second(i),disabled=!1;minDate&&time.isBefore(minDate)&&(disabled=!0),maxDate&&time.isAfter(maxDate)&&(disabled=!0),html+=selected.second()!=i||disabled?disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+padded+"</option>":'<option value="'+i+'">'+padded+"</option>":'<option value="'+i+'" selected="selected">'+padded+"</option>"}html+="</select> "}if(!this.timePicker24Hour){html+='<select class="ampmselect">';var am_html="",pm_html="";minDate&&selected.clone().hour(12).minute(0).second(0).isBefore(minDate)&&(am_html=' disabled="disabled" class="disabled"'),maxDate&&selected.clone().hour(0).minute(0).second(0).isAfter(maxDate)&&(pm_html=' disabled="disabled" class="disabled"'),html+=selected.hour()>=12?'<option value="AM"'+am_html+'>AM</option><option value="PM" selected="selected"'+pm_html+">PM</option>":'<option value="AM" selected="selected"'+am_html+'>AM</option><option value="PM"'+pm_html+">PM</option>",html+="</select>"}this.container.find(".calendar."+side+" .calendar-time div").html(html)},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var containerTop,parentOffset={top:0,left:0},parentRightEdge=$(window).width();this.parentEl.is("body")||(parentOffset={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},parentRightEdge=this.parentEl[0].clientWidth+this.parentEl.offset().left),containerTop="up"==this.drops?this.element.offset().top-this.container.outerHeight()-parentOffset.top:this.element.offset().top+this.element.outerHeight()-parentOffset.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:containerTop,right:parentRightEdge-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>$(window).width()&&this.container.css({left:"auto",right:0}))},show:function(){this.isShowing||(this._outsideClickProxy=$.proxy(function(e){this.outsideClick(e)},this),$(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),$(window).on("resize.daterangepicker",$.proxy(function(e){this.move(e)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),$(document).off(".daterangepicker"),$(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(){this.isShowing?this.hide():this.show()},outsideClick:function(e){var target=$(e.target);"focusin"==e.type||target.closest(this.element).length||target.closest(this.container).length||target.closest(".calendar-table").length||this.hide()},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(e){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){var label=e.target.innerHTML;if(label==this.locale.customRangeLabel)this.updateView();else{var dates=this.ranges[label];this.container.find("input[name=daterangepicker_start]").val(dates[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(dates[1].format(this.locale.format))}}},clickRange:function(e){var label=e.target.innerHTML;if(this.chosenLabel=label,label==this.locale.customRangeLabel)this.showCalendars();else{var dates=this.ranges[label];this.startDate=dates[0],this.endDate=dates[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.hideCalendars(),this.clickApply()}},clickPrev:function(e){var cal=$(e.target).parents(".calendar");cal.hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){var cal=$(e.target).parents(".calendar");cal.hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(e){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")&&$(e.target).hasClass("available")){var title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(e.target).parents(".calendar"),date=cal.hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];this.endDate?this.container.find("input[name=daterangepicker_start]").val(date.format(this.locale.format)):this.container.find("input[name=daterangepicker_end]").val(date.format(this.locale.format));var leftCalendar=this.leftCalendar,rightCalendar=this.rightCalendar,startDate=this.startDate;this.endDate||this.container.find(".calendar td").each(function(index,el){if(!$(el).hasClass("week")){var title=$(el).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(el).parents(".calendar"),dt=cal.hasClass("left")?leftCalendar.calendar[row][col]:rightCalendar.calendar[row][col],_endDate=moment(date).add(1,"days"),isStartDate=dt.format("YYYY-MM-DD")==startDate.format("YYYY-MM-DD"),isEndDate=dt.format("YYYY-MM-DD")==date.format("YYYY-MM-DD");dt.isAfter(startDate)&&dt.isBefore(_endDate)||isStartDate?($(el).addClass("in-range"),isEndDate?$(el).addClass("end-date"):$(el).removeClass("end-date")):$(el).removeClass("in-range")}})}},clickDate:function(e){if($(e.target).hasClass("available")){var title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(e.target).parents(".calendar"),date=cal.hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];if(this.endDate||date.isBefore(this.startDate)){if(this.timePicker){var hour=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var ampm=cal.find(".ampmselect").val();"PM"===ampm&&12>hour&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}var minute=parseInt(this.container.find(".left .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second)}this.endDate=null,this.setStartDate(date.clone())}else{if(this.timePicker){var hour=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour){var ampm=this.container.find(".right .ampmselect").val();"PM"===ampm&&12>hour&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}var minute=parseInt(this.container.find(".right .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second)}this.setEndDate(date.clone()),this.autoApply&&this.clickApply()}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView()}},clickApply:function(){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(e){var isLeft=$(e.target).closest(".calendar").hasClass("left"),leftOrRight=isLeft?"left":"right",cal=this.container.find(".calendar."+leftOrRight),month=parseInt(cal.find(".monthselect").val(),10),year=cal.find(".yearselect").val();isLeft||(year<this.startDate.year()||year==this.startDate.year()&&month<this.startDate.month())&&(month=this.startDate.month(),year=this.startDate.year()),this.minDate&&(year<this.minDate.year()||year==this.minDate.year()&&month<this.minDate.month())&&(month=this.minDate.month(),year=this.minDate.year()),this.maxDate&&(year>this.maxDate.year()||year==this.maxDate.year()&&month>this.maxDate.month())&&(month=this.maxDate.month(),year=this.maxDate.year()),isLeft?(this.leftCalendar.month.month(month).year(year),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(month).year(year),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()
},timeChanged:function(e){var cal=$(e.target).closest(".calendar"),isLeft=cal.hasClass("left"),hour=parseInt(cal.find(".hourselect").val(),10),minute=parseInt(cal.find(".minuteselect").val(),10),second=this.timePickerSeconds?parseInt(cal.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var ampm=cal.find(".ampmselect").val();"PM"===ampm&&12>hour&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}if(isLeft){var start=this.startDate.clone();start.hour(hour),start.minute(minute),start.second(second),this.setStartDate(start),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==start.format("YYYY-MM-DD")&&this.endDate.isBefore(start)&&this.setEndDate(start.clone())}else if(this.endDate){var end=this.endDate.clone();end.hour(hour),end.minute(minute),end.second(second),this.setEndDate(end)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(e){var isRight=$(e.target).closest(".calendar").hasClass("right"),start=moment(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),end=moment(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);start.isValid()&&end.isValid()&&(isRight&&end.isBefore(start)&&(start=end.clone()),this.setStartDate(start),this.setEndDate(end),isRight?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateCalendars(),this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"))},elementChanged:function(){if(this.element.is("input")&&this.element.val().length&&!(this.element.val().length<this.locale.format.length)){var dateString=this.element.val().split(this.locale.separator),start=null,end=null;2===dateString.length&&(start=moment(dateString[0],this.locale.format),end=moment(dateString[1],this.locale.format)),(this.singleDatePicker||null===start||null===end)&&(start=moment(this.element.val(),this.locale.format),end=start),start.isValid()&&end.isValid()&&(this.setStartDate(start),this.setEndDate(end),this.updateView())}},keydown:function(e){(9===e.keyCode||13===e.keyCode)&&this.hide()},updateElement:function(){this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},$.fn.daterangepicker=function(options,callback){return this.each(function(){var el=$(this);el.data("daterangepicker")&&el.data("daterangepicker").remove(),el.data("daterangepicker",new DateRangePicker(el,options,callback))}),this}}),/*! Quill Editor v0.20.1
 *  https://quilljs.com/
 *  Copyright (c) 2014, Jason Chen
 *  Copyright (c) 2013, salesforce.com
 */
function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.Quill=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){(function(global){(function(){function baseFindIndex(array,predicate,fromRight){for(var length=array.length,index=fromRight?length:-1;fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){if(value!==value)return indexOfNaN(array,fromIndex);for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}function baseIsFunction(value){return"function"==typeof value||!1}function baseToString(value){return"string"==typeof value?value:null==value?"":value+""}function indexOfNaN(array,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?0:-1);fromRight?index--:++index<length;){var other=array[index];if(other!==other)return index}return-1}function isObjectLike(value){return!!value&&"object"==typeof value}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=-1,result=[];++index<length;)array[index]===placeholder&&(array[index]=PLACEHOLDER,result[++resIndex]=index);return result}function lodash(){}function baseLodash(){}function LazyWrapper(value){this.__wrapped__=value,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=POSITIVE_INFINITY,this.__views__=null}function SetCache(values){var length=values?values.length:0;for(this.data={hash:nativeCreate(null),set:new Set};length--;)this.push(values[length])}function cacheIndexOf(cache,value){var data=cache.data,result="string"==typeof value||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}function cachePush(value){var data=this.data;"string"==typeof value||isObject(value)?data.set.add(value):data.hash[value]=!0}function arrayCopy(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function arrayEach(array,iteratee){for(var index=-1,length=array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}function arrayEvery(array,predicate){for(var index=-1,length=array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arrayMap(array,iteratee){for(var index=-1,length=array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;for(initFromArray&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue}function assignWith(object,source,customizer){for(var index=-1,props=keys(source),length=props.length;++index<length;){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);(result===result?result===value:value!==value)&&(value!==undefined||key in object)||(object[key]=result)}return object}function baseAssign(object,source){return null==source?object:baseCopy(source,keys(source),object)}function baseCopy(source,props,object){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;return"function"==type?thisArg===undefined?func:bindCallback(func,thisArg,argCount):null==func?identity:"object"==type?baseMatches(func):thisArg===undefined?property(func):baseMatchesProperty(func,thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer&&(result=object?customizer(value,key,object):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return arrayCopy(value,result)}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag!=objectTag&&tag!=argsTag&&(!isFunc||object))return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{};if(result=initCloneObject(isFunc?{}:value),!isDeep)return baseAssign(result,value)}stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];return stackA.push(value),stackB.push(result),(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)}),result}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length)return result;var index=-1,indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,cache=isCommon&&values.length>=200?createCache(values):null,valuesLength=values.length;cache&&(indexOf=cacheIndexOf,isCommon=!1,values=cache);outer:for(;++index<length;){var value=array[index];if(isCommon&&value===value){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===value)continue outer;result.push(value)}else indexOf(values,value,0)<0&&result.push(value)}return result}function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseFind(collection,predicate,eachFunc,retKey){var result;return eachFunc(collection,function(value,key,collection){return predicate(value,key,collection)?(result=retKey?key:value,!1):void 0}),result}function baseFlatten(array,isDeep,isStrict){for(var index=-1,length=array.length,resIndex=-1,result=[];++index<length;){var value=array[index];if(isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))){isDeep&&(value=baseFlatten(value,isDeep,isStrict));for(var valIndex=-1,valLength=value.length;++valIndex<valLength;)result[++resIndex]=value[valIndex]}else isStrict||(result[++resIndex]=value)}return result}function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseGet(object,path,pathKey){if(null!=object){pathKey!==undefined&&pathKey in toObject(object)&&(path=[pathKey]);for(var index=0,length=path.length;null!=object&&length>index;)object=object[path[index++]];return index&&index==length?object:undefined}}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){return value===other?!0:null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag==argsTag?objTag=objectTag:objTag!=objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag==argsTag?othTag=objectTag:othTag!=objectTag&&(othIsArr=isTypedArray(other)));var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB)}if(!isSameTag)return!1;stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==object)return stackB[length]==other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=toObject(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else{var result=customizer?customizer(objValue,srcValue,key):undefined;if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,!0):result))return!1}}return!0}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function baseMatches(source){var matchData=getMatchData(source);if(1==matchData.length&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){return null==object?!1:object[key]===value&&(value!==undefined||key in toObject(object))}}return function(object){return baseIsMatch(object,matchData)}}function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=path+"";return path=toPath(path),function(object){if(null==object)return!1;var key=pathKey;if(object=toObject(object),!(!isArr&&isCommon||key in object)){if(object=1==path.length?object:baseGet(object,baseSlice(path,0,-1)),null==object)return!1;key=last(path),object=toObject(object)}return object[key]===srcValue?srcValue!==undefined||key in object:baseIsEqual(srcValue,object[key],undefined,!0)}}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyDeep(path){var pathKey=path+"";return path=toPath(path),function(object){return baseGet(object,path,pathKey)}}function baseReduce(collection,iteratee,accumulator,initFromCollection,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initFromCollection?(initFromCollection=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}function baseSlice(array,start,end){var index=-1,length=array.length;start=null==start?0:+start||0,0>start&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:+end||0,0>end&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function baseValues(object,props){for(var index=-1,length=props.length,result=Array(length);++index<length;)result[index]=object[props[index]];return result}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if("number"==typeof value&&value===value&&HALF_MAX_ARRAY_LENGTH>=high){for(;high>low;){var mid=low+high>>>1,computed=array[mid];(retHighest?value>=computed:value>computed)&&null!==computed?low=mid+1:high=mid}return high}return binaryIndexBy(array,value,identity,retHighest)}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);for(var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsNull=null===value,valIsUndef=value===undefined;high>low;){var mid=floor((low+high)/2),computed=iteratee(array[mid]),isDef=computed!==undefined,isReflexive=computed===computed;if(valIsNaN)var setLow=isReflexive||retHighest;else setLow=valIsNull?isReflexive&&isDef&&(retHighest||null!=computed):valIsUndef?isReflexive&&(retHighest||isDef):null==computed?!1:retHighest?value>=computed:value>computed;setLow?low=mid+1:high=mid}return nativeMin(high,MAX_ARRAY_INDEX)}function bindCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if(thisArg===undefined)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){return bufferSlice.call(buffer,0)}function composeArgs(args,partials,holders){for(var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(argsLength+leftLength);++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)result[holders[argsIndex]]=args[argsIndex];for(;argsLength--;)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders){for(var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);++argsIndex<argsLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)result[offset+holders[holdersIndex]]=args[argsIndex++];return result}function createAggregator(setter,initializer){return function(collection,iteratee,thisArg){var result=initializer?initializer():{};if(iteratee=getCallback(iteratee,thisArg,3),isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];setter(result,value,iteratee(value,index,collection),collection)}else baseEach(collection,function(value,key,collection){setter(result,value,iteratee(value,key,collection),collection)});return result}}function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=null==object?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;for("function"==typeof customizer?(customizer=bindCallback(customizer,thisArg,5),length-=2):(customizer="function"==typeof thisArg?thisArg:undefined,length-=customizer?1:0),guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=3>length?undefined:customizer,length=1);++index<length;){var source=sources[index];source&&assigner(object,source,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length))return eachFunc(collection,iteratee);for(var index=fromRight?length:-1,iterable=toObject(collection);(fromRight?index--:++index<length)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:++index<length;){var key=props[index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}function createBindWrapper(func,thisArg){function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(thisArg,arguments)}var Ctor=createCtorWrapper(func);return wrapper}function createCtorWrapper(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){if(predicate=getCallback(predicate,thisArg,3),isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined}return baseFind(collection,predicate,eachFunc)}}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return"function"==typeof iteratee&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}function createPartial(flag){var partialFunc=restParam(function(func,partials){var holders=replaceHolders(partials,partialFunc.placeholder);return createWrapper(func,flag,null,partials,holders)});return partialFunc}function createReduce(arrayFunc,eachFunc){return function(collection,iteratee,accumulator,thisArg){var initFromArray=arguments.length<3;return"function"==typeof iteratee&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee,accumulator,initFromArray):baseReduce(collection,getCallback(iteratee,thisArg,4),accumulator,initFromArray,eachFunc)}}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){function wrapper(){for(var length=arguments.length,index=length,args=Array(length);index--;)args[index]=arguments[index];if(partials&&(args=composeArgs(args,partials,holders)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight)),isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);if(length-=argsHolders.length,arity>length){var newArgPos=argPos?arrayCopy(argPos):null,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:null,newHoldersRight=isCurry?null:argsHolders,newPartials=isCurry?args:null,newPartialsRight=isCurry?null:args;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG,bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG),isCurryBound||(bitmask&=~(BIND_FLAG|BIND_KEY_FLAG));var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,result}}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;return argPos&&(args=reorder(args,argPos)),isAry&&ary<args.length&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtorWrapper(func)),fn.apply(thisBinding,args)}var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG,Ctor=isBindKey?null:createCtorWrapper(func);return wrapper}function createPartialWrapper(func,bitmask,thisArg,partials){function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(argsLength+leftLength);++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,args)}var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);return wrapper}function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var length=partials?partials.length:0;if(length||(bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG),partials=holders=null),length-=holders?holders.length:0,bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=null}var data=isBindKey?null:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data&&(mergeData(newData,data),bitmask=newData[1],arity=newData[9]),newData[9]=null==arity?isBindKey?0:func.length:nativeMax(arity-length,0)||0,bitmask==BIND_FLAG)var result=createBindWrapper(newData[0],newData[2]);else result=bitmask!=PARTIAL_FLAG&&bitmask!=(BIND_FLAG|PARTIAL_FLAG)||newData[4].length?createHybridWrapper.apply(undefined,newData):createPartialWrapper.apply(undefined,newData);var setter=data?baseSetData:setData;return setter(result,newData)}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength))return!1;for(;++index<arrLength;){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):undefined;if(result!==undefined){if(result)continue;return!1}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}))return!1}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))return!1}return!0}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+""}return!1}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key)))return!1}for(var skipCtor=isLoose;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):undefined;if(!(result===undefined?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result))return!1;skipCtor||(skipCtor="constructor"==key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor))return!1}return!0}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;return result=result===callback?baseCallback:result,argCount?result(func,thisArg,argCount):result}function getFuncName(func){for(var result=func.name,array=realNames[result],length=array?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;return result=result===indexOf?baseIndexOf:result,collection?result(collection,target,fromIndex):result}function getMatchData(object){for(var result=pairs(object),length=result.length;length--;)result[length][2]=isStrictComparable(result[length][1]);return result}function getNative(object,key){var value=null==object?undefined:object[key];return isNative(value)?value:undefined}function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){var Ctor=object.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor||(Ctor=Object),new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function invokePath(object,path,args){null==object||isKey(path,object)||(path=toPath(path),object=1==path.length?object:baseGet(object,baseSlice(path,0,-1)),path=last(path));var func=null==object?object:object[path];return null==func?undefined:func.apply(object,args)}function isArrayLike(value){return null!=value&&isLength(getLength(value))}function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&length>value}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;if("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object){var other=object[index];return value===value?value===other:other!==other}return!1}function isKey(value,object){var type=typeof value;if("string"==type&&reIsPlainProp.test(value)||"number"==type)return!0;if(isArray(value))return!1;var result=!reIsDeepProp.test(value);return result||null!=object&&value in toObject(object)}function isLaziable(func){var funcName=getFuncName(func);if(!(funcName in LazyWrapper.prototype))return!1;var other=lodash[funcName];if(func===other)return!0;var data=getData(other);return!!data&&func===data[0]}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isStrictComparable(value){return value===value&&!isObject(value)}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=ARY_FLAG>newBitmask,isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG;if(!isCommon&&!isCombo)return data;srcBitmask&BIND_FLAG&&(data[2]=source[2],newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG);var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value),data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4])}return value=source[5],value&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value),data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6])),value=source[7],value&&(data[7]=arrayCopy(value)),srcBitmask&ARY_FLAG&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8])),null==data[9]&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask,data}function pickByArray(object,props){object=toObject(object);for(var index=-1,length=props.length,result={};++index<length;){var key=props[index];key in object&&(result[key]=object[key])}return result}function pickByCallback(object,predicate){var result={};return baseForIn(object,function(value,key,object){predicate(value,key,object)&&(result[key]=value)}),result}function reorder(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}function shimIsPlainObject(value){{var Ctor;lodash.support}if(!isObjectLike(value)||objToString.call(value)!=objectTag||!hasOwnProperty.call(value,"constructor")&&(Ctor=value.constructor,"function"==typeof Ctor&&!(Ctor instanceof Ctor)))return!1;var result;return baseForIn(value,function(subValue,key){result=key}),result===undefined||hasOwnProperty.call(value,result)}function shimKeys(object){for(var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object)),index=-1,result=[];++index<propsLength;){var key=props[index];(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key))&&result.push(key)}return result}function toObject(value){return isObject(value)?value:Object(value)}function toPath(value){if(isArray(value))return value;var result=[];return baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length)return-1;if("number"==typeof fromIndex)fromIndex=0>fromIndex?nativeMax(length+fromIndex,0):fromIndex;else if(fromIndex){var index=binaryIndex(array,value),other=array[index];return(value===value?value===other:other!==other)?index:-1}return baseIndexOf(array,value,fromIndex||0)}function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;return thisArg&&isIterateeCall(collection,predicate,thisArg)&&(predicate=null),("function"!=typeof predicate||thisArg!==undefined)&&(predicate=getCallback(predicate,thisArg,3)),func(collection,predicate)}function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;return iteratee=getCallback(iteratee,thisArg,3),func(collection,iteratee)}function restParam(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=nativeMax(start===undefined?func.length-1:+start||0,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);++index<length;)rest[index]=args[start+index];switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);for(index=-1;++index<start;)otherArgs[index]=args[index];return otherArgs[start]=rest,func.apply(this,otherArgs)}}function clone(value,isDeep,customizer,thisArg){return isDeep&&"boolean"!=typeof isDeep&&isIterateeCall(value,isDeep,customizer)?isDeep=!1:"function"==typeof isDeep&&(thisArg=customizer,customizer=isDeep,isDeep=!1),"function"==typeof customizer?baseClone(value,isDeep,bindCallback(customizer,thisArg,1)):baseClone(value,isDeep)}function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&objToString.call(value)==argsTag}function isElement(value){return!!value&&1===value.nodeType&&isObjectLike(value)&&objToString.call(value).indexOf("Element")>-1}function isEqual(value,other,customizer,thisArg){customizer="function"==typeof customizer?bindCallback(customizer,thisArg,3):undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isNative(value){return null==value?!1:objToString.call(value)==funcTag?reIsNative.test(fnToString.call(value)):isObjectLike(value)&&reIsHostCtor.test(value)}function isNumber(value){return"number"==typeof value||isObjectLike(value)&&objToString.call(value)==numberTag}function isString(value){return"string"==typeof value||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function keysIn(object){if(null==object)return[];isObject(object)||(object=Object(object));var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;for(var Ctor=object.constructor,index=-1,isProto="function"==typeof Ctor&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;++index<length;)result[index]=index+"";for(var key in object)skipIndexes&&isIndex(key,length)||"constructor"==key&&(isProto||!hasOwnProperty.call(object,key))||result.push(key);return result}function pairs(object){object=toObject(object);for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}function values(object){return baseValues(object,keys(object))}function escapeRegExp(string){return string=baseToString(string),string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,"\\$&"):string}function callback(func,thisArg,guard){return guard&&isIterateeCall(func,thisArg,guard)&&(thisArg=null),isObjectLike(func)?matches(func):baseCallback(func,thisArg)
}function constant(value){return function(){return value}}function identity(value){return value}function matches(source){return baseMatches(baseClone(source,!0))}function noop(){}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}function uniqueId(prefix){var id=++idCounter;return baseToString(prefix)+id}var undefined,VERSION="3.9.3",BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256,HOT_COUNT=150,HOT_SPAN=16,FUNC_ERROR_TEXT="Expected a function",PLACEHOLDER="__lodash_placeholder__",argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,reRegExpChars=/[.*+?^${}()|[\]\/\\]/g,reHasRegExpChars=RegExp(reRegExpChars.source),reEscapeChar=/\\(\\)?/g,reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^\d+$/,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=!1;var objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&"object"==typeof global&&global&&global.Object&&global,freeSelf=objectTypes[typeof self]&&self&&self.Object&&self,freeWindow=objectTypes[typeof window]&&window&&window.Object&&window,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this,objectProto=Object.prototype,document=(document=root.window)?document.document:null,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,objToString=objectProto.toString,reIsNative=RegExp("^"+escapeRegExp(fnToString.call(hasOwnProperty)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ArrayBuffer=getNative(root,"ArrayBuffer"),bufferSlice=getNative(ArrayBuffer&&new ArrayBuffer(0),"slice"),floor=Math.floor,getPrototypeOf=getNative(Object,"getPrototypeOf"),Set=getNative(root,"Set"),Uint8Array=getNative(root,"Uint8Array"),WeakMap=getNative(root,"WeakMap"),Float64Array=function(){try{var func=getNative(root,"Float64Array"),result=new func(new ArrayBuffer(10),0,1)&&func}catch(e){}return result||null}(),nativeCreate=getNative(Object,"create"),nativeIsArray=getNative(Array,"isArray"),nativeKeys=getNative(Object,"keys"),nativeMax=Math.max,nativeMin=Math.min,nativeNow=getNative(Date,"now"),POSITIVE_INFINITY=Number.POSITIVE_INFINITY,MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,FLOAT64_BYTES_PER_ELEMENT=Float64Array?Float64Array.BYTES_PER_ELEMENT:0,MAX_SAFE_INTEGER=9007199254740991,metaMap=WeakMap&&new WeakMap,realNames={},support=lodash.support={};!function(x){var Ctor=function(){this.x=x},props=[];Ctor.prototype={valueOf:x,y:x};for(var key in new Ctor)props.push(key);try{support.dom=11===document.createDocumentFragment().nodeType}catch(e){support.dom=!1}}(1,0);var baseCreate=function(){function object(){}return function(prototype){if(isObject(prototype)){object.prototype=prototype;var result=new object;object.prototype=null}return result||{}}}(),baseEach=createBaseEach(baseForOwn),baseFor=createBaseFor(),baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity;bufferSlice||(bufferClone=ArrayBuffer&&Uint8Array?function(buffer){var byteLength=buffer.byteLength,floatLength=Float64Array?floor(byteLength/FLOAT64_BYTES_PER_ELEMENT):0,offset=floatLength*FLOAT64_BYTES_PER_ELEMENT,result=new ArrayBuffer(byteLength);if(floatLength){var view=new Float64Array(result,0,floatLength);view.set(new Float64Array(buffer,0,floatLength))}return byteLength!=offset&&(view=new Uint8Array(result,offset),view.set(new Uint8Array(buffer,offset))),result}:constant(null));var createCache=nativeCreate&&Set?function(values){return new SetCache(values)}:constant(null),getData=metaMap?function(func){return metaMap.get(func)}:noop,getLength=baseProperty("length"),setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return key}else count=0;return baseSetData(key,value)}}(),difference=restParam(function(array,values){return isArrayLike(array)?baseDifference(array,baseFlatten(values,!1,!0)):[]}),intersection=restParam(function(arrays){for(var othLength=arrays.length,othIndex=othLength,caches=Array(length),indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,result=[];othIndex--;){var value=arrays[othIndex]=isArrayLike(value=arrays[othIndex])?value:[];caches[othIndex]=isCommon&&value.length>=120?createCache(othIndex&&value):null}var array=arrays[0],index=-1,length=array?array.length:0,seen=caches[0];outer:for(;++index<length;)if(value=array[index],(seen?cacheIndexOf(seen,value):indexOf(result,value,0))<0){for(var othIndex=othLength;--othIndex;){var cache=caches[othIndex];if((cache?cacheIndexOf(cache,value):indexOf(arrays[othIndex],value,0))<0)continue outer}seen&&seen.push(value),result.push(value)}return result}),find=createFind(baseEach),forEach=createForEach(arrayEach,baseEach),invoke=restParam(function(collection,path,args){var index=-1,isFunc="function"==typeof path,isProp=isKey(path),result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value){var func=isFunc?path:isProp&&null!=value?value[path]:null;result[++index]=func?func.apply(value,args):invokePath(value,path,args)}),result}),partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]}),reduce=createReduce(arrayReduce,baseEach),now=nativeNow||function(){return(new Date).getTime()},bind=restParam(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(func,bitmask,thisArg,partials,holders)}),defer=restParam(function(func,args){return baseDelay(func,1,args)}),partial=createPartial(PARTIAL_FLAG),isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};support.dom||(isElement=function(value){return!!value&&1===value.nodeType&&isObjectLike(value)&&!isPlainObject(value)});var isFunction=baseIsFunction(/x/)||Uint8Array&&!baseIsFunction(Uint8Array)?function(value){return objToString.call(value)==funcTag}:baseIsFunction,isPlainObject=getPrototypeOf?function(value){if(!value||objToString.call(value)!=objectTag)return!1;var valueOf=getNative(value,"valueOf"),objProto=valueOf&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)}:shimIsPlainObject,assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)}),defaults=restParam(function(args){var object=args[0];return null==object?object:(args.push(assignDefaults),assign.apply(undefined,args))}),keys=nativeKeys?function(object){var Ctor=null==object?null:object.constructor;return"function"==typeof Ctor&&Ctor.prototype===object||"function"!=typeof object&&isArrayLike(object)?shimKeys(object):isObject(object)?nativeKeys(object):[]}:shimKeys,omit=restParam(function(object,props){if(null==object)return{};if("function"!=typeof props[0]){var props=arrayMap(baseFlatten(props),String);return pickByArray(object,baseDifference(keysIn(object),props))}var predicate=bindCallback(props[0],props[1],3);return pickByCallback(object,function(value,key,object){return!predicate(value,key,object)})});LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,SetCache.prototype.push=cachePush,lodash.assign=assign,lodash.bind=bind,lodash.callback=callback,lodash.constant=constant,lodash.defaults=defaults,lodash.defer=defer,lodash.difference=difference,lodash.forEach=forEach,lodash.intersection=intersection,lodash.invoke=invoke,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.matches=matches,lodash.omit=omit,lodash.pairs=pairs,lodash.partial=partial,lodash.partition=partition,lodash.property=property,lodash.restParam=restParam,lodash.values=values,lodash.collect=map,lodash.each=forEach,lodash.extend=assign,lodash.iteratee=callback,lodash.clone=clone,lodash.escapeRegExp=escapeRegExp,lodash.every=every,lodash.find=find,lodash.identity=identity,lodash.indexOf=indexOf,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isElement=isElement,lodash.isEqual=isEqual,lodash.isFunction=isFunction,lodash.isNative=isNative,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isPlainObject=isPlainObject,lodash.isString=isString,lodash.isTypedArray=isTypedArray,lodash.last=last,lodash.noop=noop,lodash.now=now,lodash.reduce=reduce,lodash.uniqueId=uniqueId,lodash.all=every,lodash.eq=isEqual,lodash.detect=find,lodash.foldl=reduce,lodash.inject=reduce,lodash.VERSION=VERSION,arrayEach(["bind","partial"],function(methodName){lodash[methodName].placeholder=lodash}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=lodash,define(function(){return lodash})):freeExports&&freeModule?moduleExports?(freeModule.exports=lodash)._=lodash:freeExports._=lodash:root._=lodash}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(_dereq_,module,exports){!function(){function init(){this._events={},this._conf&&configure.call(this,this._conf)}function configure(conf){conf&&(this._conf=conf,conf.delimiter&&(this.delimiter=conf.delimiter),conf.maxListeners&&(this._events.maxListeners=conf.maxListeners),conf.wildcard&&(this.wildcard=conf.wildcard),conf.newListener&&(this.newListener=conf.newListener),this.wildcard&&(this.listenerTree={}))}function EventEmitter(conf){this._events={},this.newListener=!1,configure.call(this,conf)}function searchListenerTree(handlers,type,tree,i){if(!tree)return[];var leaf,len,branch,xTree,xxTree,isolatedBranch,endReached,listeners=[],typeLength=type.length,currentType=type[i],nextType=type[i+1];if(i===typeLength&&tree._listeners){if("function"==typeof tree._listeners)return handlers&&handlers.push(tree._listeners),[tree];for(leaf=0,len=tree._listeners.length;len>leaf;leaf++)handlers&&handlers.push(tree._listeners[leaf]);return[tree]}if("*"===currentType||"**"===currentType||tree[currentType]){if("*"===currentType){for(branch in tree)"_listeners"!==branch&&tree.hasOwnProperty(branch)&&(listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i+1)));return listeners}if("**"===currentType){endReached=i+1===typeLength||i+2===typeLength&&"*"===nextType,endReached&&tree._listeners&&(listeners=listeners.concat(searchListenerTree(handlers,type,tree,typeLength)));for(branch in tree)"_listeners"!==branch&&tree.hasOwnProperty(branch)&&("*"===branch||"**"===branch?(tree[branch]._listeners&&!endReached&&(listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],typeLength))),listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i))):listeners=branch===nextType?listeners.concat(searchListenerTree(handlers,type,tree[branch],i+2)):listeners.concat(searchListenerTree(handlers,type,tree[branch],i)));return listeners}listeners=listeners.concat(searchListenerTree(handlers,type,tree[currentType],i+1))}if(xTree=tree["*"],xTree&&searchListenerTree(handlers,type,xTree,i+1),xxTree=tree["**"])if(typeLength>i){xxTree._listeners&&searchListenerTree(handlers,type,xxTree,typeLength);for(branch in xxTree)"_listeners"!==branch&&xxTree.hasOwnProperty(branch)&&(branch===nextType?searchListenerTree(handlers,type,xxTree[branch],i+2):branch===currentType?searchListenerTree(handlers,type,xxTree[branch],i+1):(isolatedBranch={},isolatedBranch[branch]=xxTree[branch],searchListenerTree(handlers,type,{"**":isolatedBranch},i+1)))}else xxTree._listeners?searchListenerTree(handlers,type,xxTree,typeLength):xxTree["*"]&&xxTree["*"]._listeners&&searchListenerTree(handlers,type,xxTree["*"],typeLength);return listeners}function growListenerTree(type,listener){type="string"==typeof type?type.split(this.delimiter):type.slice();for(var i=0,len=type.length;len>i+1;i++)if("**"===type[i]&&"**"===type[i+1])return;for(var tree=this.listenerTree,name=type.shift();name;){if(tree[name]||(tree[name]={}),tree=tree[name],0===type.length){if(tree._listeners){if("function"==typeof tree._listeners)tree._listeners=[tree._listeners,listener];else if(isArray(tree._listeners)&&(tree._listeners.push(listener),!tree._listeners.warned)){var m=defaultMaxListeners;"undefined"!=typeof this._events.maxListeners&&(m=this._events.maxListeners),m>0&&tree._listeners.length>m&&(tree._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",tree._listeners.length),console.trace())}}else tree._listeners=listener;return!0}name=type.shift()}return!0}var isArray=Array.isArray?Array.isArray:function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},defaultMaxListeners=10;EventEmitter.prototype.delimiter=".",EventEmitter.prototype.setMaxListeners=function(n){this._events||init.call(this),this._events.maxListeners=n,this._conf||(this._conf={}),this._conf.maxListeners=n},EventEmitter.prototype.event="",EventEmitter.prototype.once=function(event,fn){return this.many(event,1,fn),this},EventEmitter.prototype.many=function(event,ttl,fn){function listener(){0===--ttl&&self.off(event,listener),fn.apply(this,arguments)}var self=this;if("function"!=typeof fn)throw new Error("many only accepts instances of Function");return listener._origin=fn,this.on(event,listener),self},EventEmitter.prototype.emit=function(){this._events||init.call(this);var type=arguments[0];if("newListener"===type&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var l=arguments.length,args=new Array(l-1),i=1;l>i;i++)args[i-1]=arguments[i];for(i=0,l=this._all.length;l>i;i++)this.event=type,this._all[i].apply(this,args)}if("error"===type&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var handler;if(this.wildcard){handler=[];var ns="string"==typeof type?type.split(this.delimiter):type.slice();searchListenerTree.call(this,handler,ns,this.listenerTree,0)}else handler=this._events[type];if("function"==typeof handler){if(this.event=type,1===arguments.length)handler.call(this);else if(arguments.length>1)switch(arguments.length){case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(var l=arguments.length,args=new Array(l-1),i=1;l>i;i++)args[i-1]=arguments[i];handler.apply(this,args)}return!0}if(handler){for(var l=arguments.length,args=new Array(l-1),i=1;l>i;i++)args[i-1]=arguments[i];for(var listeners=handler.slice(),i=0,l=listeners.length;l>i;i++)this.event=type,listeners[i].apply(this,args);return listeners.length>0||!!this._all}return!!this._all},EventEmitter.prototype.on=function(type,listener){if("function"==typeof type)return this.onAny(type),this;if("function"!=typeof listener)throw new Error("on only accepts instances of Function");if(this._events||init.call(this),this.emit("newListener",type,listener),this.wildcard)return growListenerTree.call(this,type,listener),this;if(this._events[type]){if("function"==typeof this._events[type])this._events[type]=[this._events[type],listener];else if(isArray(this._events[type])&&(this._events[type].push(listener),!this._events[type].warned)){var m=defaultMaxListeners;"undefined"!=typeof this._events.maxListeners&&(m=this._events.maxListeners),m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),console.trace())}}else this._events[type]=listener;return this},EventEmitter.prototype.onAny=function(fn){if("function"!=typeof fn)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(fn),this},EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.off=function(type,listener){if("function"!=typeof listener)throw new Error("removeListener only takes instances of Function");var handlers,leafs=[];if(this.wildcard){var ns="string"==typeof type?type.split(this.delimiter):type.slice();leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0)}else{if(!this._events[type])return this;handlers=this._events[type],leafs.push({_listeners:handlers})}for(var iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];if(handlers=leaf._listeners,isArray(handlers)){for(var position=-1,i=0,length=handlers.length;length>i;i++)if(handlers[i]===listener||handlers[i].listener&&handlers[i].listener===listener||handlers[i]._origin&&handlers[i]._origin===listener){position=i;break}if(0>position)continue;return this.wildcard?leaf._listeners.splice(position,1):this._events[type].splice(position,1),0===handlers.length&&(this.wildcard?delete leaf._listeners:delete this._events[type]),this}(handlers===listener||handlers.listener&&handlers.listener===listener||handlers._origin&&handlers._origin===listener)&&(this.wildcard?delete leaf._listeners:delete this._events[type])}return this},EventEmitter.prototype.offAny=function(fn){var fns,i=0,l=0;if(fn&&this._all&&this._all.length>0){for(fns=this._all,i=0,l=fns.length;l>i;i++)if(fn===fns[i])return fns.splice(i,1),this}else this._all=[];return this},EventEmitter.prototype.removeListener=EventEmitter.prototype.off,EventEmitter.prototype.removeAllListeners=function(type){if(0===arguments.length)return!this._events||init.call(this),this;if(this.wildcard)for(var ns="string"==typeof type?type.split(this.delimiter):type.slice(),leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0),iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];leaf._listeners=null}else{if(!this._events[type])return this;this._events[type]=null}return this},EventEmitter.prototype.listeners=function(type){if(this.wildcard){var handlers=[],ns="string"==typeof type?type.split(this.delimiter):type.slice();return searchListenerTree.call(this,handlers,ns,this.listenerTree,0),handlers}return this._events||init.call(this),this._events[type]||(this._events[type]=[]),isArray(this._events[type])||(this._events[type]=[this._events[type]]),this._events[type]},EventEmitter.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return EventEmitter}):"object"==typeof exports?exports.EventEmitter2=EventEmitter:window.EventEmitter2=EventEmitter}()},{}],3:[function(_dereq_,module){var diff=_dereq_("fast-diff"),is=_dereq_("./is"),op=_dereq_("./op"),NULL_CHARACTER=String.fromCharCode(0),Delta=function(ops){this.ops=is.array(ops)?ops:is.object(ops)&&is.array(ops.ops)?ops.ops:[]};Delta.prototype.insert=function(text,attributes){var newOp={};return 0===text.length?this:(newOp.insert=text,is.object(attributes)&&Object.keys(attributes).length>0&&(newOp.attributes=attributes),this.push(newOp))},Delta.prototype["delete"]=function(length){return 0>=length?this:this.push({"delete":length})},Delta.prototype.retain=function(length,attributes){if(0>=length)return this;var newOp={retain:length};return is.object(attributes)&&Object.keys(attributes).length>0&&(newOp.attributes=attributes),this.push(newOp)},Delta.prototype.push=function(newOp){var index=this.ops.length,lastOp=this.ops[index-1];if(newOp=op.clone(newOp),is.object(lastOp)){if(is.number(newOp["delete"])&&is.number(lastOp["delete"]))return this.ops[index-1]={"delete":lastOp["delete"]+newOp["delete"]},this;if(is.number(lastOp["delete"])&&null!=newOp.insert&&(index-=1,lastOp=this.ops[index-1],!is.object(lastOp)))return this.ops.unshift(newOp),this;if(is.equal(newOp.attributes,lastOp.attributes)){if(is.string(newOp.insert)&&is.string(lastOp.insert))return this.ops[index-1]={insert:lastOp.insert+newOp.insert},is.object(newOp.attributes)&&(this.ops[index-1].attributes=newOp.attributes),this;if(is.number(newOp.retain)&&is.number(lastOp.retain))return this.ops[index-1]={retain:lastOp.retain+newOp.retain},is.object(newOp.attributes)&&(this.ops[index-1].attributes=newOp.attributes),this}}return index===this.ops.length?this.ops.push(newOp):this.ops.splice(index,0,newOp),this},Delta.prototype.chop=function(){var lastOp=this.ops[this.ops.length-1];return lastOp&&lastOp.retain&&!lastOp.attributes&&this.ops.pop(),this},Delta.prototype.length=function(){return this.ops.reduce(function(length,elem){return length+op.length(elem)},0)},Delta.prototype.slice=function(start,end){start=start||0,is.number(end)||(end=1/0);for(var delta=new Delta,iter=op.iterator(this.ops),index=0;end>index&&iter.hasNext();){var nextOp;start>index?nextOp=iter.next(start-index):(nextOp=iter.next(end-index),delta.push(nextOp)),index+=op.length(nextOp)}return delta},Delta.prototype.compose=function(other){for(var thisIter=op.iterator(this.ops),otherIter=op.iterator(other.ops),delta=new Delta;thisIter.hasNext()||otherIter.hasNext();)if("insert"===otherIter.peekType())delta.push(otherIter.next());else if("delete"===thisIter.peekType())delta.push(thisIter.next());else{var length=Math.min(thisIter.peekLength(),otherIter.peekLength()),thisOp=thisIter.next(length),otherOp=otherIter.next(length);if(is.number(otherOp.retain)){var newOp={};is.number(thisOp.retain)?newOp.retain=length:newOp.insert=thisOp.insert;var attributes=op.attributes.compose(thisOp.attributes,otherOp.attributes,is.number(thisOp.retain));attributes&&(newOp.attributes=attributes),delta.push(newOp)}else is.number(otherOp["delete"])&&is.number(thisOp.retain)&&delta.push(otherOp)}return delta.chop()},Delta.prototype.concat=function(other){var delta=this.slice();return other.ops.length>0&&(delta.push(other.ops[0]),delta.ops=delta.ops.concat(other.ops.slice(1))),delta},Delta.prototype.diff=function(other){var delta=new Delta;if(this.ops===other.ops)return delta;var strings=[this.ops,other.ops].map(function(ops){return ops.map(function(op){if(null!=op.insert)return is.string(op.insert)?op.insert:NULL_CHARACTER;var prep=ops===other.ops?"on":"with";throw new Error("diff() called "+prep+" non-document")}).join("")}),diffResult=diff(strings[0],strings[1]),thisIter=op.iterator(this.ops),otherIter=op.iterator(other.ops);return diffResult.forEach(function(component){for(var length=component[1].length;length>0;){var opLength=0;switch(component[0]){case diff.INSERT:opLength=Math.min(otherIter.peekLength(),length),delta.push(otherIter.next(opLength));break;case diff.DELETE:opLength=Math.min(length,thisIter.peekLength()),thisIter.next(opLength),delta["delete"](opLength);break;case diff.EQUAL:opLength=Math.min(thisIter.peekLength(),otherIter.peekLength(),length);var thisOp=thisIter.next(opLength),otherOp=otherIter.next(opLength);is.equal(thisOp.insert,otherOp.insert)?delta.retain(opLength,op.attributes.diff(thisOp.attributes,otherOp.attributes)):delta.push(otherOp)["delete"](opLength)}length-=opLength}}),delta.chop()},Delta.prototype.transform=function(other,priority){if(priority=!!priority,is.number(other))return this.transformPosition(other,priority);for(var thisIter=op.iterator(this.ops),otherIter=op.iterator(other.ops),delta=new Delta;thisIter.hasNext()||otherIter.hasNext();)if("insert"!==thisIter.peekType()||!priority&&"insert"===otherIter.peekType())if("insert"===otherIter.peekType())delta.push(otherIter.next());else{var length=Math.min(thisIter.peekLength(),otherIter.peekLength()),thisOp=thisIter.next(length),otherOp=otherIter.next(length);if(thisOp["delete"])continue;otherOp["delete"]?delta.push(otherOp):delta.retain(length,op.attributes.transform(thisOp.attributes,otherOp.attributes,priority))}else delta.retain(op.length(thisIter.next()));return delta.chop()},Delta.prototype.transformPosition=function(index,priority){priority=!!priority;for(var thisIter=op.iterator(this.ops),offset=0;thisIter.hasNext()&&index>=offset;){var length=thisIter.peekLength(),nextType=thisIter.peekType();thisIter.next(),"delete"!==nextType?("insert"===nextType&&(index>offset||!priority)&&(index+=length),offset+=length):index-=Math.min(length,index-offset)}return index},module.exports=Delta},{"./is":4,"./op":5,"fast-diff":6}],4:[function(_dereq_,module){module.exports={equal:function(a,b){if(a===b)return!0;if(null==a&&null==b)return!0;if(null==a||null==b)return!1;if(!this.object(a)||!this.object(b))return!1;if(Object.keys(a).length!=Object.keys(b).length)return!1;for(var key in a)if(a[key]!==b[key])return!1;return!0},array:function(value){return Array.isArray(value)},number:function(value){return"number"==typeof value?!0:"object"==typeof value&&"[object Number]"===Object.prototype.toString.call(value)?!0:!1},object:function(value){return value?"function"==typeof value||"object"==typeof value:!1},string:function(value){return"string"==typeof value?!0:"object"==typeof value&&"[object String]"===Object.prototype.toString.call(value)?!0:!1}}},{}],5:[function(_dereq_,module){function Iterator(ops){this.ops=ops,this.index=0,this.offset=0}var is=_dereq_("./is"),lib={attributes:{clone:function(attributes,keepNull){return is.object(attributes)?Object.keys(attributes).reduce(function(memo,key){return void 0===attributes[key]||null===attributes[key]&&!keepNull||(memo[key]=attributes[key]),memo},{}):{}},compose:function(a,b,keepNull){is.object(a)||(a={}),is.object(b)||(b={});var attributes=this.clone(b,keepNull);for(var key in a)void 0!==a[key]&&void 0===b[key]&&(attributes[key]=a[key]);return Object.keys(attributes).length>0?attributes:void 0},diff:function(a,b){is.object(a)||(a={}),is.object(b)||(b={});var attributes=Object.keys(a).concat(Object.keys(b)).reduce(function(attributes,key){return a[key]!==b[key]&&(attributes[key]=void 0===b[key]?null:b[key]),attributes},{});return Object.keys(attributes).length>0?attributes:void 0},transform:function(a,b,priority){if(!is.object(a))return b;if(!is.object(b))return void 0;if(!priority)return b;var attributes=Object.keys(b).reduce(function(attributes,key){return void 0===a[key]&&(attributes[key]=b[key]),attributes},{});return Object.keys(attributes).length>0?attributes:void 0}},clone:function(op){var newOp=this.attributes.clone(op);return is.object(newOp.attributes)&&(newOp.attributes=this.attributes.clone(newOp.attributes,!0)),newOp},iterator:function(ops){return new Iterator(ops)},length:function(op){return is.number(op["delete"])?op["delete"]:is.number(op.retain)?op.retain:is.string(op.insert)?op.insert.length:1}};Iterator.prototype.hasNext=function(){return this.peekLength()<1/0},Iterator.prototype.next=function(length){length||(length=1/0);var nextOp=this.ops[this.index];if(nextOp){var offset=this.offset,opLength=lib.length(nextOp);if(length>=opLength-offset?(length=opLength-offset,this.index+=1,this.offset=0):this.offset+=length,is.number(nextOp["delete"]))return{"delete":length};var retOp={};return nextOp.attributes&&(retOp.attributes=nextOp.attributes),is.number(nextOp.retain)?retOp.retain=length:retOp.insert=is.string(nextOp.insert)?nextOp.insert.substr(offset,length):nextOp.insert,retOp}return{retain:1/0}},Iterator.prototype.peekLength=function(){return this.ops[this.index]?lib.length(this.ops[this.index])-this.offset:1/0},Iterator.prototype.peekType=function(){return this.ops[this.index]?is.number(this.ops[this.index]["delete"])?"delete":is.number(this.ops[this.index].retain)?"retain":"insert":"retain"},module.exports=lib},{"./is":4}],6:[function(_dereq_,module){function diff_main(text1,text2){if(text1==text2)return text1?[[DIFF_EQUAL,text1]]:[];var commonlength=diff_commonPrefix(text1,text2),commonprefix=text1.substring(0,commonlength);text1=text1.substring(commonlength),text2=text2.substring(commonlength),commonlength=diff_commonSuffix(text1,text2);var commonsuffix=text1.substring(text1.length-commonlength);text1=text1.substring(0,text1.length-commonlength),text2=text2.substring(0,text2.length-commonlength);var diffs=diff_compute_(text1,text2);return commonprefix&&diffs.unshift([DIFF_EQUAL,commonprefix]),commonsuffix&&diffs.push([DIFF_EQUAL,commonsuffix]),diff_cleanupMerge(diffs),diffs}function diff_compute_(text1,text2){var diffs;if(!text1)return[[DIFF_INSERT,text2]];if(!text2)return[[DIFF_DELETE,text1]];var longtext=text1.length>text2.length?text1:text2,shorttext=text1.length>text2.length?text2:text1,i=longtext.indexOf(shorttext);if(-1!=i)return diffs=[[DIFF_INSERT,longtext.substring(0,i)],[DIFF_EQUAL,shorttext],[DIFF_INSERT,longtext.substring(i+shorttext.length)]],text1.length>text2.length&&(diffs[0][0]=diffs[2][0]=DIFF_DELETE),diffs;if(1==shorttext.length)return[[DIFF_DELETE,text1],[DIFF_INSERT,text2]];var hm=diff_halfMatch_(text1,text2);if(hm){var text1_a=hm[0],text1_b=hm[1],text2_a=hm[2],text2_b=hm[3],mid_common=hm[4],diffs_a=diff_main(text1_a,text2_a),diffs_b=diff_main(text1_b,text2_b);return diffs_a.concat([[DIFF_EQUAL,mid_common]],diffs_b)}return diff_bisect_(text1,text2)}function diff_bisect_(text1,text2){for(var text1_length=text1.length,text2_length=text2.length,max_d=Math.ceil((text1_length+text2_length)/2),v_offset=max_d,v_length=2*max_d,v1=new Array(v_length),v2=new Array(v_length),x=0;v_length>x;x++)v1[x]=-1,v2[x]=-1;v1[v_offset+1]=0,v2[v_offset+1]=0;for(var delta=text1_length-text2_length,front=delta%2!=0,k1start=0,k1end=0,k2start=0,k2end=0,d=0;max_d>d;d++){for(var k1=-d+k1start;d-k1end>=k1;k1+=2){var x1,k1_offset=v_offset+k1;x1=k1==-d||k1!=d&&v1[k1_offset-1]<v1[k1_offset+1]?v1[k1_offset+1]:v1[k1_offset-1]+1;for(var y1=x1-k1;text1_length>x1&&text2_length>y1&&text1.charAt(x1)==text2.charAt(y1);)x1++,y1++;if(v1[k1_offset]=x1,x1>text1_length)k1end+=2;else if(y1>text2_length)k1start+=2;else if(front){var k2_offset=v_offset+delta-k1;if(k2_offset>=0&&v_length>k2_offset&&-1!=v2[k2_offset]){var x2=text1_length-v2[k2_offset];if(x1>=x2)return diff_bisectSplit_(text1,text2,x1,y1)}}}for(var k2=-d+k2start;d-k2end>=k2;k2+=2){var x2,k2_offset=v_offset+k2;x2=k2==-d||k2!=d&&v2[k2_offset-1]<v2[k2_offset+1]?v2[k2_offset+1]:v2[k2_offset-1]+1;for(var y2=x2-k2;text1_length>x2&&text2_length>y2&&text1.charAt(text1_length-x2-1)==text2.charAt(text2_length-y2-1);)x2++,y2++;if(v2[k2_offset]=x2,x2>text1_length)k2end+=2;else if(y2>text2_length)k2start+=2;else if(!front){var k1_offset=v_offset+delta-k2;if(k1_offset>=0&&v_length>k1_offset&&-1!=v1[k1_offset]){var x1=v1[k1_offset],y1=v_offset+x1-k1_offset;if(x2=text1_length-x2,x1>=x2)return diff_bisectSplit_(text1,text2,x1,y1)}}}}return[[DIFF_DELETE,text1],[DIFF_INSERT,text2]]}function diff_bisectSplit_(text1,text2,x,y){var text1a=text1.substring(0,x),text2a=text2.substring(0,y),text1b=text1.substring(x),text2b=text2.substring(y),diffs=diff_main(text1a,text2a),diffsb=diff_main(text1b,text2b);
return diffs.concat(diffsb)}function diff_commonPrefix(text1,text2){if(!text1||!text2||text1.charAt(0)!=text2.charAt(0))return 0;for(var pointermin=0,pointermax=Math.min(text1.length,text2.length),pointermid=pointermax,pointerstart=0;pointermid>pointermin;)text1.substring(pointerstart,pointermid)==text2.substring(pointerstart,pointermid)?(pointermin=pointermid,pointerstart=pointermin):pointermax=pointermid,pointermid=Math.floor((pointermax-pointermin)/2+pointermin);return pointermid}function diff_commonSuffix(text1,text2){if(!text1||!text2||text1.charAt(text1.length-1)!=text2.charAt(text2.length-1))return 0;for(var pointermin=0,pointermax=Math.min(text1.length,text2.length),pointermid=pointermax,pointerend=0;pointermid>pointermin;)text1.substring(text1.length-pointermid,text1.length-pointerend)==text2.substring(text2.length-pointermid,text2.length-pointerend)?(pointermin=pointermid,pointerend=pointermin):pointermax=pointermid,pointermid=Math.floor((pointermax-pointermin)/2+pointermin);return pointermid}function diff_halfMatch_(text1,text2){function diff_halfMatchI_(longtext,shorttext,i){for(var best_longtext_a,best_longtext_b,best_shorttext_a,best_shorttext_b,seed=longtext.substring(i,i+Math.floor(longtext.length/4)),j=-1,best_common="";-1!=(j=shorttext.indexOf(seed,j+1));){var prefixLength=diff_commonPrefix(longtext.substring(i),shorttext.substring(j)),suffixLength=diff_commonSuffix(longtext.substring(0,i),shorttext.substring(0,j));best_common.length<suffixLength+prefixLength&&(best_common=shorttext.substring(j-suffixLength,j)+shorttext.substring(j,j+prefixLength),best_longtext_a=longtext.substring(0,i-suffixLength),best_longtext_b=longtext.substring(i+prefixLength),best_shorttext_a=shorttext.substring(0,j-suffixLength),best_shorttext_b=shorttext.substring(j+prefixLength))}return 2*best_common.length>=longtext.length?[best_longtext_a,best_longtext_b,best_shorttext_a,best_shorttext_b,best_common]:null}var longtext=text1.length>text2.length?text1:text2,shorttext=text1.length>text2.length?text2:text1;if(longtext.length<4||2*shorttext.length<longtext.length)return null;var hm,hm1=diff_halfMatchI_(longtext,shorttext,Math.ceil(longtext.length/4)),hm2=diff_halfMatchI_(longtext,shorttext,Math.ceil(longtext.length/2));if(!hm1&&!hm2)return null;hm=hm2?hm1?hm1[4].length>hm2[4].length?hm1:hm2:hm2:hm1;var text1_a,text1_b,text2_a,text2_b;text1.length>text2.length?(text1_a=hm[0],text1_b=hm[1],text2_a=hm[2],text2_b=hm[3]):(text2_a=hm[0],text2_b=hm[1],text1_a=hm[2],text1_b=hm[3]);var mid_common=hm[4];return[text1_a,text1_b,text2_a,text2_b,mid_common]}function diff_cleanupMerge(diffs){diffs.push([DIFF_EQUAL,""]);for(var commonlength,pointer=0,count_delete=0,count_insert=0,text_delete="",text_insert="";pointer<diffs.length;)switch(diffs[pointer][0]){case DIFF_INSERT:count_insert++,text_insert+=diffs[pointer][1],pointer++;break;case DIFF_DELETE:count_delete++,text_delete+=diffs[pointer][1],pointer++;break;case DIFF_EQUAL:count_delete+count_insert>1?(0!==count_delete&&0!==count_insert&&(commonlength=diff_commonPrefix(text_insert,text_delete),0!==commonlength&&(pointer-count_delete-count_insert>0&&diffs[pointer-count_delete-count_insert-1][0]==DIFF_EQUAL?diffs[pointer-count_delete-count_insert-1][1]+=text_insert.substring(0,commonlength):(diffs.splice(0,0,[DIFF_EQUAL,text_insert.substring(0,commonlength)]),pointer++),text_insert=text_insert.substring(commonlength),text_delete=text_delete.substring(commonlength)),commonlength=diff_commonSuffix(text_insert,text_delete),0!==commonlength&&(diffs[pointer][1]=text_insert.substring(text_insert.length-commonlength)+diffs[pointer][1],text_insert=text_insert.substring(0,text_insert.length-commonlength),text_delete=text_delete.substring(0,text_delete.length-commonlength))),0===count_delete?diffs.splice(pointer-count_insert,count_delete+count_insert,[DIFF_INSERT,text_insert]):0===count_insert?diffs.splice(pointer-count_delete,count_delete+count_insert,[DIFF_DELETE,text_delete]):diffs.splice(pointer-count_delete-count_insert,count_delete+count_insert,[DIFF_DELETE,text_delete],[DIFF_INSERT,text_insert]),pointer=pointer-count_delete-count_insert+(count_delete?1:0)+(count_insert?1:0)+1):0!==pointer&&diffs[pointer-1][0]==DIFF_EQUAL?(diffs[pointer-1][1]+=diffs[pointer][1],diffs.splice(pointer,1)):pointer++,count_insert=0,count_delete=0,text_delete="",text_insert=""}""===diffs[diffs.length-1][1]&&diffs.pop();var changes=!1;for(pointer=1;pointer<diffs.length-1;)diffs[pointer-1][0]==DIFF_EQUAL&&diffs[pointer+1][0]==DIFF_EQUAL&&(diffs[pointer][1].substring(diffs[pointer][1].length-diffs[pointer-1][1].length)==diffs[pointer-1][1]?(diffs[pointer][1]=diffs[pointer-1][1]+diffs[pointer][1].substring(0,diffs[pointer][1].length-diffs[pointer-1][1].length),diffs[pointer+1][1]=diffs[pointer-1][1]+diffs[pointer+1][1],diffs.splice(pointer-1,1),changes=!0):diffs[pointer][1].substring(0,diffs[pointer+1][1].length)==diffs[pointer+1][1]&&(diffs[pointer-1][1]+=diffs[pointer+1][1],diffs[pointer][1]=diffs[pointer][1].substring(diffs[pointer+1][1].length)+diffs[pointer+1][1],diffs.splice(pointer+1,1),changes=!0)),pointer++;changes&&diff_cleanupMerge(diffs)}/**
 * This library modifies the diff-patch-match library by Neil Fraser
 * by removing the patch and match functionality and certain advanced
 * options in the diff function. The original license is as follows:
 *
 * ===
 *
 * Diff Match and Patch
 *
 * Copyright 2006 Google Inc.
 * http://code.google.com/p/google-diff-match-patch/
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0,diff=diff_main;diff.INSERT=DIFF_INSERT,diff.DELETE=DIFF_DELETE,diff.EQUAL=DIFF_EQUAL,module.exports=diff},{}],7:[function(_dereq_,module){module.exports={version:"0.20.1"}},{}],8:[function(_dereq_,module){var Delta,Document,Format,Line,LinkedList,Normalizer,_,dom;_=_dereq_("lodash"),Delta=_dereq_("rich-text/lib/delta"),dom=_dereq_("../lib/dom"),Format=_dereq_("./format"),Line=_dereq_("./line"),LinkedList=_dereq_("../lib/linked-list"),Normalizer=_dereq_("./normalizer"),Document=function(){function Document(root,options){this.root=root,null==options&&(options={}),this.normalizer=new Normalizer,this.formats={},_.each(options.formats,_.bind(this.addFormat,this)),this.setHTML(this.root.innerHTML)}return Document.prototype.addFormat=function(name,config){return _.isObject(config)||(config=Format.FORMATS[name]),null!=this.formats[name]&&console.warn("Overwriting format",name,this.formats[name]),this.formats[name]=new Format(config),this.normalizer.addFormat(config)},Document.prototype.appendLine=function(lineNode){return this.insertLineBefore(lineNode,null)},Document.prototype.findLeafAt=function(index,inclusive){var line,offset,ref;return ref=this.findLineAt(index),line=ref[0],offset=ref[1],null!=line?line.findLeafAt(offset,inclusive):[void 0,offset]},Document.prototype.findLine=function(node){for(var line;null!=node&&null==dom.BLOCK_TAGS[node.tagName];)node=node.parentNode;return line=null!=node?dom(node).data(Line.DATA_KEY):void 0,(null!=line?line.node:void 0)===node?line:void 0},Document.prototype.findLineAt=function(index){var curLine,length;if(!(this.lines.length>0))return[void 0,index];if(length=this.toDelta().length(),index===length)return[this.lines.last,this.lines.last.length];if(index>length)return[void 0,index-length];for(curLine=this.lines.first;null!=curLine;){if(index<curLine.length)return[curLine,index];index-=curLine.length,curLine=curLine.next}return[void 0,index]},Document.prototype.getHTML=function(){return this.root.innerHTML.replace(/\>\s+\</g,">&nbsp;<")},Document.prototype.insertLineBefore=function(newLineNode,refLine){var line;return line=new Line(this,newLineNode),null!=refLine?(dom(newLineNode.parentNode).isElement()||this.root.insertBefore(newLineNode,refLine.node),this.lines.insertAfter(refLine.prev,line)):(dom(newLineNode.parentNode).isElement()||this.root.appendChild(newLineNode),this.lines.append(line)),line},Document.prototype.mergeLines=function(line,lineToMerge){return lineToMerge.length>1&&(1===line.length&&dom(line.leaves.last.node).remove(),_.each(dom(lineToMerge.node).childNodes(),function(child){return child.tagName!==dom.DEFAULT_BREAK_TAG?line.node.appendChild(child):void 0})),this.removeLine(lineToMerge),line.rebuild()},Document.prototype.optimizeLines=function(){return _.each(this.lines.toArray(),function(line){return line.optimize(),!0})},Document.prototype.rebuild=function(){var lineNode,lines,results;for(lines=this.lines.toArray(),lineNode=this.root.firstChild,null!=lineNode&&null!=dom.LIST_TAGS[lineNode.tagName]&&(lineNode=lineNode.firstChild),_.each(lines,function(_this){return function(line){for(var newLine,ref;line.node!==lineNode;){if(line.node.parentNode!==_this.root&&(null!=(ref=line.node.parentNode)?ref.parentNode:void 0)!==_this.root)return _this.removeLine(line);lineNode=_this.normalizer.normalizeLine(lineNode),newLine=_this.insertLineBefore(lineNode,line),lineNode=dom(lineNode).nextLineNode(_this.root)}return line.outerHTML!==lineNode.outerHTML&&(line.node=_this.normalizer.normalizeLine(line.node),line.rebuild()),lineNode=dom(lineNode).nextLineNode(_this.root)}}(this)),results=[];null!=lineNode;)lineNode=this.normalizer.normalizeLine(lineNode),this.appendLine(lineNode),results.push(lineNode=dom(lineNode).nextLineNode(this.root));return results},Document.prototype.removeLine=function(line){return null!=line.node.parentNode&&(dom.LIST_TAGS[line.node.parentNode.tagName]&&1===line.node.parentNode.childNodes.length?dom(line.node.parentNode).remove():dom(line.node).remove()),this.lines.remove(line)},Document.prototype.setHTML=function(html){return html=Normalizer.stripComments(html),html=Normalizer.stripWhitespace(html),this.root.innerHTML=html,this.lines=new LinkedList,this.rebuild()},Document.prototype.splitLine=function(line,offset){var lineNode1,lineNode2,newLine,ref;return offset=Math.min(offset,line.length-1),ref=dom(line.node).split(offset,!0),lineNode1=ref[0],lineNode2=ref[1],line.node=lineNode1,line.rebuild(),newLine=this.insertLineBefore(lineNode2,line.next),newLine.formats=_.clone(line.formats),newLine.resetContent(),newLine},Document.prototype.toDelta=function(){var delta,lines;return lines=this.lines.toArray(),delta=new Delta,_.each(lines,function(line){return _.each(line.delta.ops,function(op){return delta.push(op)})}),delta},Document}(),module.exports=Document},{"../lib/dom":17,"../lib/linked-list":18,"./format":10,"./line":12,"./normalizer":13,lodash:1,"rich-text/lib/delta":3}],9:[function(_dereq_,module){var Delta,Document,Editor,Line,Selection,_,dom;_=_dereq_("lodash"),Delta=_dereq_("rich-text/lib/delta"),dom=_dereq_("../lib/dom"),Document=_dereq_("./document"),Line=_dereq_("./line"),Selection=_dereq_("./selection"),Editor=function(){function Editor(root,quill,options){this.root=root,this.quill=quill,this.options=null!=options?options:{},this.root.setAttribute("id",this.options.id),this.doc=new Document(this.root,this.options),this.delta=this.doc.toDelta(),this.length=this.delta.length(),this.selection=new Selection(this.doc,this.quill),this.timer=setInterval(_.bind(this.checkUpdate,this),this.options.pollInterval),this.savedRange=null,this.quill.on("selection-change",function(_this){return function(range){return _this.savedRange=range}}(this)),this.options.readOnly||this.enable()}return Editor.sources={API:"api",SILENT:"silent",USER:"user"},Editor.prototype.destroy=function(){return clearInterval(this.timer)},Editor.prototype.disable=function(){return this.enable(!1)},Editor.prototype.enable=function(enabled){return null==enabled&&(enabled=!0),this.root.setAttribute("contenteditable",enabled)},Editor.prototype.applyDelta=function(delta,source){var localDelta;return localDelta=this._update(),localDelta&&(delta=localDelta.transform(delta,!0),localDelta=delta.transform(localDelta,!1)),delta.ops.length>0&&(delta=this._trackDelta(function(_this){return function(){var index;return index=0,_.each(delta.ops,function(op){return _.isString(op.insert)?(_this._insertAt(index,op.insert,op.attributes),index+=op.insert.length):_.isNumber(op.insert)?(_this._insertEmbed(index,op.attributes),index+=1):_.isNumber(op["delete"])?_this._deleteAt(index,op["delete"]):_.isNumber(op.retain)?(_.each(op.attributes,function(value,name){return _this._formatAt(index,op.retain,name,value)}),index+=op.retain):void 0}),_this.selection.shiftAfter(0,0,_.bind(_this.doc.optimizeLines,_this.doc))}}(this)),this.delta=this.doc.toDelta(),this.length=this.delta.length(),this.innerHTML=this.root.innerHTML,delta&&source!==Editor.sources.SILENT&&this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,delta,source)),localDelta&&localDelta.ops.length>0&&source!==Editor.sources.SILENT?this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,localDelta,Editor.sources.USER):void 0},Editor.prototype.checkUpdate=function(source){var delta;return null==source&&(source="user"),null==this.root.parentNode?clearInterval(this.timer):(delta=this._update(),delta&&(this.delta=this.delta.compose(delta),this.length=this.delta.length(),this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,delta,source)),delta&&(source=Editor.sources.SILENT),this.selection.update(source))},Editor.prototype.focus=function(){return null!=this.selection.range?this.selection.setRange(this.selection.range):this.root.focus()},Editor.prototype.getBounds=function(index){var bounds,containerBounds,leaf,offset,range,ref,side;return this.checkUpdate(),ref=this.doc.findLeafAt(index,!0),leaf=ref[0],offset=ref[1],null==leaf?null:(containerBounds=this.root.parentNode.getBoundingClientRect(),side="left",0===leaf.length?bounds=leaf.node.parentNode.getBoundingClientRect():dom.VOID_TAGS[leaf.node.tagName]?(bounds=leaf.node.getBoundingClientRect(),1===offset&&(side="right")):(range=document.createRange(),offset<leaf.length?(range.setStart(leaf.node,offset),range.setEnd(leaf.node,offset+1)):(range.setStart(leaf.node,offset-1),range.setEnd(leaf.node,offset),side="right"),bounds=range.getBoundingClientRect()),{height:bounds.height,left:bounds[side]-containerBounds.left,top:bounds.top-containerBounds.top})},Editor.prototype._deleteAt=function(index,length){return 0>=length?void 0:this.selection.shiftAfter(index,-1*length,function(_this){return function(){var curLine,deleteLength,firstLine,mergeFirstLine,nextLine,offset,ref;for(ref=_this.doc.findLineAt(index),firstLine=ref[0],offset=ref[1],curLine=firstLine,mergeFirstLine=firstLine.length-offset<=length&&offset>0;null!=curLine&&length>0;)nextLine=curLine.next,deleteLength=Math.min(curLine.length-offset,length),0===offset&&length>=curLine.length?_this.doc.removeLine(curLine):curLine.deleteText(offset,deleteLength),length-=deleteLength,curLine=nextLine,offset=0;return mergeFirstLine&&firstLine.next?_this.doc.mergeLines(firstLine,firstLine.next):void 0}}(this))},Editor.prototype._formatAt=function(index,length,name,value){return this.selection.shiftAfter(index,0,function(_this){return function(){var formatLength,line,offset,ref,results;for(ref=_this.doc.findLineAt(index),line=ref[0],offset=ref[1],results=[];null!=line&&length>0;)formatLength=Math.min(length,line.length-offset-1),line.formatText(offset,formatLength,name,value),length-=formatLength,length>0&&line.format(name,value),length-=1,offset=0,results.push(line=line.next);return results}}(this))},Editor.prototype._insertEmbed=function(index,attributes){return this.selection.shiftAfter(index,1,function(_this){return function(){var line,offset,ref;return ref=_this.doc.findLineAt(index),line=ref[0],offset=ref[1],line.insertEmbed(offset,attributes)}}(this))},Editor.prototype._insertAt=function(index,text,formatting){return null==formatting&&(formatting={}),this.selection.shiftAfter(index,text.length,function(_this){return function(){var line,lineTexts,offset,ref;return text=text.replace(/\r\n?/g,"\n"),lineTexts=text.split("\n"),ref=_this.doc.findLineAt(index),line=ref[0],offset=ref[1],_.each(lineTexts,function(lineText,i){var nextLine;return null==line||line.length<=offset?(i<lineTexts.length-1||lineText.length>0)&&(line=_this.doc.appendLine(document.createElement(dom.DEFAULT_BLOCK_TAG)),offset=0,line.insertText(offset,lineText,formatting),line.format(formatting),nextLine=null):(line.insertText(offset,lineText,formatting),i<lineTexts.length-1&&(nextLine=_this.doc.splitLine(line,offset+lineText.length),_.each(_.defaults({},formatting,line.formats),function(value,format){return line.format(format,formatting[format])}),offset=0)),line=nextLine})}}(this))},Editor.prototype._trackDelta=function(fn){var ignored,newDelta,newIndex,newLeftDelta,newRightDelta,oldIndex,oldLeftDelta,oldRightDelta,ref,ref1;oldIndex=null!=(ref=this.savedRange)?ref.start:void 0,fn(),newDelta=this.doc.toDelta(),this.savedRange=this.selection.getRange(),newIndex=null!=(ref1=this.savedRange)?ref1.start:void 0;try{if(null!=oldIndex&&null!=newIndex&&oldIndex<=this.delta.length()&&newIndex<=newDelta.length()&&(oldRightDelta=this.delta.slice(oldIndex),newRightDelta=newDelta.slice(newIndex),_.isEqual(oldRightDelta.ops,newRightDelta.ops)))return oldLeftDelta=this.delta.slice(0,oldIndex),newLeftDelta=newDelta.slice(0,newIndex),oldLeftDelta.diff(newLeftDelta)}catch(_error){ignored=_error}return this.delta.diff(newDelta)},Editor.prototype._update=function(){var delta;return this.innerHTML===this.root.innerHTML?!1:(delta=this._trackDelta(function(_this){return function(){return _this.selection.preserve(_.bind(_this.doc.rebuild,_this.doc)),_this.selection.shiftAfter(0,0,_.bind(_this.doc.optimizeLines,_this.doc))}}(this)),this.innerHTML=this.root.innerHTML,delta.ops.length>0?delta:!1)},Editor}(),module.exports=Editor},{"../lib/dom":17,"./document":8,"./line":12,"./selection":14,lodash:1,"rich-text/lib/delta":3}],10:[function(_dereq_,module){var Format,_,dom;_=_dereq_("lodash"),dom=_dereq_("../lib/dom"),Format=function(){function Format(config){this.config=config}return Format.types={LINE:"line",EMBED:"embed"},Format.FORMATS={bold:{tag:"B",prepare:"bold"},italic:{tag:"I",prepare:"italic"},underline:{tag:"U",prepare:"underline"},strike:{tag:"S",prepare:"strikeThrough"},color:{style:"color","default":"rgb(0, 0, 0)",prepare:"foreColor"},background:{style:"backgroundColor","default":"rgb(255, 255, 255)",prepare:"backColor"},font:{style:"fontFamily","default":"'Helvetica', 'Arial', sans-serif",prepare:"fontName"},size:{style:"fontSize","default":"13px",prepare:function(value){return document.execCommand("fontSize",!1,dom.convertFontSize(value))}},link:{tag:"A",add:function(node,value){return node.setAttribute("href",value),node},remove:function(node){return node.removeAttribute("href"),node},value:function(node){return node.getAttribute("href")}},image:{type:Format.types.EMBED,tag:"IMG",attribute:"src"},align:{type:Format.types.LINE,style:"textAlign","default":"left"},bullet:{type:Format.types.LINE,exclude:"list",parentTag:"UL",tag:"LI"},list:{type:Format.types.LINE,exclude:"bullet",parentTag:"OL",tag:"LI"}},Format.prototype.add=function(node,value){var formatNode,inline,parentNode,ref,ref1;return value?this.value(node)===value?node:(_.isString(this.config.parentTag)&&(parentNode=node.parentNode,parentNode.tagName!==this.config.parentTag&&(parentNode=document.createElement(this.config.parentTag),dom(node).wrap(parentNode)),node.parentNode.tagName===(null!=(ref=node.parentNode.previousSibling)?ref.tagName:void 0)&&dom(node.parentNode.previousSibling).merge(node.parentNode),node.parentNode.tagName===(null!=(ref1=node.parentNode.nextSibling)?ref1.tagName:void 0)&&dom(node.parentNode).merge(node.parentNode.nextSibling)),_.isString(this.config.tag)&&node.tagName!==this.config.tag&&(formatNode=document.createElement(this.config.tag),null!=dom.VOID_TAGS[formatNode.tagName]?(null!=node.parentNode&&dom(node).replace(formatNode),node=formatNode):this.isType(Format.types.LINE)?node=dom(node).switchTag(this.config.tag).get():(dom(node).wrap(formatNode),node=formatNode)),(_.isString(this.config.style)||_.isString(this.config.attribute)||_.isString(this.config["class"]))&&(_.isString(this.config["class"])&&(node=this.remove(node)),dom(node).isTextNode()&&(inline=document.createElement(dom.DEFAULT_INLINE_TAG),dom(node).wrap(inline),node=inline),_.isString(this.config.style)&&value!==this.config["default"]&&(node.style[this.config.style]=value),_.isString(this.config.attribute)&&node.setAttribute(this.config.attribute,value),_.isString(this.config["class"])&&dom(node).addClass(this.config["class"]+value)),_.isFunction(this.config.add)&&(node=this.config.add(node,value)),node):this.remove(node)},Format.prototype.isType=function(type){return type===this.config.type},Format.prototype.match=function(node){var c,i,len,ref,ref1;if(!dom(node).isElement())return!1;if(_.isString(this.config.parentTag)&&(null!=(ref=node.parentNode)?ref.tagName:void 0)!==this.config.parentTag)return!1;if(_.isString(this.config.tag)&&node.tagName!==this.config.tag)return!1;if(_.isString(this.config.style)&&(!node.style[this.config.style]||node.style[this.config.style]===this.config["default"]))return!1;if(_.isString(this.config.attribute)&&!node.hasAttribute(this.config.attribute))return!1;if(_.isString(this.config["class"])){for(ref1=dom(node).classes(),i=0,len=ref1.length;len>i;i++)if(c=ref1[i],0===c.indexOf(this.config["class"]))return!0;return!1}return!0},Format.prototype.prepare=function(value){return _.isString(this.config.prepare)?document.execCommand(this.config.prepare,!1,value):_.isFunction(this.config.prepare)?this.config.prepare(value):void 0},Format.prototype.remove=function(node){var c,i,len,ref;if(!this.match(node))return node;if(_.isString(this.config.style)&&(node.style[this.config.style]="",node.getAttribute("style")||node.removeAttribute("style")),_.isString(this.config.attribute)&&node.removeAttribute(this.config.attribute),_.isString(this.config["class"]))for(ref=dom(node).classes(),i=0,len=ref.length;len>i;i++)c=ref[i],0===c.indexOf(this.config["class"])&&dom(node).removeClass(c);if(_.isString(this.config.tag))if(this.isType(Format.types.LINE))_.isString(this.config.parentTag)&&(null!=node.previousSibling&&dom(node).splitBefore(node.parentNode.parentNode),null!=node.nextSibling&&dom(node.nextSibling).splitBefore(node.parentNode.parentNode)),node=dom(node).switchTag(dom.DEFAULT_BLOCK_TAG).get();else{if(this.isType(Format.types.EMBED))return dom(node).remove(),void 0;node=dom(node).switchTag(dom.DEFAULT_INLINE_TAG).get()}return _.isString(this.config.parentTag)&&dom(node.parentNode).unwrap(),_.isFunction(this.config.remove)&&(node=this.config.remove(node)),node.tagName!==dom.DEFAULT_INLINE_TAG||node.hasAttributes()||(node=dom(node).unwrap()),node},Format.prototype.value=function(node){var c,i,len,ref;if(!this.match(node))return void 0;if(this.config.value)return this.config.value(node);if(_.isString(this.config.attribute))return node.getAttribute(this.config.attribute)||void 0;if(_.isString(this.config.style))return node.style[this.config.style]||void 0;if(_.isString(this.config["class"])){for(ref=dom(node).classes(),i=0,len=ref.length;len>i;i++)if(c=ref[i],0===c.indexOf(this.config["class"]))return c.slice(this.config["class"].length)}else if(_.isString(this.config.tag))return!0;return void 0},Format}(),module.exports=Format},{"../lib/dom":17,lodash:1}],11:[function(_dereq_,module){var Format,Leaf,LinkedList,_,dom,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;_=_dereq_("lodash"),dom=_dereq_("../lib/dom"),Format=_dereq_("./format"),LinkedList=_dereq_("../lib/linked-list"),Leaf=function(superClass){function Leaf(node1,formats){this.node=node1,this.formats=_.clone(formats),this.text=dom(this.node).text(),this.length=this.text.length,dom(this.node).data(Leaf.DATA_KEY,this)}return extend(Leaf,superClass),Leaf.DATA_KEY="leaf",Leaf.isLeafNode=function(node){return dom(node).isTextNode()||null==node.firstChild},Leaf.prototype.deleteText=function(offset,length){var textNode;if(length>0)return this.text=this.text.slice(0,offset)+this.text.slice(offset+length),this.length=this.text.length,null!=dom.EMBED_TAGS[this.node.tagName]?(textNode=document.createTextNode(this.text),dom(textNode).data(Leaf.DATA_KEY,this),this.node=dom(this.node).replace(textNode).get()):dom(this.node).text(this.text)},Leaf.prototype.insertText=function(offset,text){var textNode;return this.text=this.text.slice(0,offset)+text+this.text.slice(offset),dom(this.node).isTextNode()?dom(this.node).text(this.text):(textNode=document.createTextNode(text),dom(textNode).data(Leaf.DATA_KEY,this),this.node.tagName===dom.DEFAULT_BREAK_TAG?this.node=dom(this.node).replace(textNode).get():(this.node.appendChild(textNode),this.node=textNode)),this.length=this.text.length},Leaf}(LinkedList.Node),module.exports=Leaf},{"../lib/dom":17,"../lib/linked-list":18,"./format":10,lodash:1}],12:[function(_dereq_,module){var Delta,Format,Leaf,Line,LinkedList,Normalizer,_,dom,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;_=_dereq_("lodash"),Delta=_dereq_("rich-text/lib/delta"),dom=_dereq_("../lib/dom"),Format=_dereq_("./format"),Leaf=_dereq_("./leaf"),Line=_dereq_("./line"),LinkedList=_dereq_("../lib/linked-list"),Normalizer=_dereq_("./normalizer"),Line=function(superClass){function Line(doc,node1){this.doc=doc,this.node=node1,this.formats={},this.rebuild(),Line.__super__.constructor.call(this,this.node)}return extend(Line,superClass),Line.DATA_KEY="line",Line.prototype.buildLeaves=function(node,formats){return _.each(dom(node).childNodes(),function(_this){return function(node){var nodeFormats;return node=_this.doc.normalizer.normalizeNode(node),nodeFormats=_.clone(formats),_.each(_this.doc.formats,function(format,name){return!format.isType(Format.types.LINE)&&format.match(node)?nodeFormats[name]=format.value(node):void 0}),Leaf.isLeafNode(node)?_this.leaves.append(new Leaf(node,nodeFormats)):_this.buildLeaves(node,nodeFormats)}}(this))},Line.prototype.deleteText=function(offset,length){var deleteLength,leaf,ref;if(length>0){for(ref=this.findLeafAt(offset),leaf=ref[0],offset=ref[1];null!=leaf&&length>0;)deleteLength=Math.min(length,leaf.length-offset),leaf.deleteText(offset,deleteLength),length-=deleteLength,leaf=leaf.next,offset=0;return this.rebuild()}},Line.prototype.findLeaf=function(leafNode){return null!=leafNode?dom(leafNode).data(Leaf.DATA_KEY):void 0},Line.prototype.findLeafAt=function(offset,inclusive){var leaf;if(null==inclusive&&(inclusive=!1),offset>=this.length-1)return[this.leaves.last,this.leaves.last.length];for(leaf=this.leaves.first;null!=leaf;){if(offset<leaf.length||offset===leaf.length&&inclusive)return[leaf,offset];offset-=leaf.length,leaf=leaf.next}return[this.leaves.last,offset-this.leaves.last.length]},Line.prototype.format=function(name,value){var formats;return _.isObject(name)?formats=name:(formats={},formats[name]=value),_.each(formats,function(_this){return function(value,name){var excludeFormat,format;return format=_this.doc.formats[name],null!=format?(format.isType(Format.types.LINE)&&(format.config.exclude&&_this.formats[format.config.exclude]&&(excludeFormat=_this.doc.formats[format.config.exclude],null!=excludeFormat&&(_this.node=excludeFormat.remove(_this.node),delete _this.formats[format.config.exclude])),_this.node=format.add(_this.node,value)),value?_this.formats[name]=value:delete _this.formats[name]):void 0}}(this)),this.resetContent()},Line.prototype.formatText=function(offset,length,name,value){var format,leaf,leafOffset,leftNode,nextLeaf,ref,ref1,ref2,rightNode,targetNode;if(ref=this.findLeafAt(offset),leaf=ref[0],leafOffset=ref[1],format=this.doc.formats[name],null!=format&&format.config.type!==Format.types.LINE){for(;null!=leaf&&length>0;){if(nextLeaf=leaf.next,value&&leaf.formats[name]!==value||!value&&null!=leaf.formats[name]){if(targetNode=leaf.node,null!=leaf.formats[name]){for(dom(targetNode).splitBefore(this.node);!format.match(targetNode);)targetNode=targetNode.parentNode;dom(targetNode).split(leaf.length)}leafOffset>0&&(ref1=dom(targetNode).split(leafOffset),leftNode=ref1[0],targetNode=ref1[1]),leaf.length>leafOffset+length&&(ref2=dom(targetNode).split(length),targetNode=ref2[0],rightNode=ref2[1]),format.add(targetNode,value)}length-=leaf.length-leafOffset,leafOffset=0,leaf=nextLeaf}return this.rebuild()}},Line.prototype._insert=function(offset,node,formats){var leaf,leafOffset,nextNode,prevNode,ref,ref1;return ref=this.findLeafAt(offset),leaf=ref[0],leafOffset=ref[1],node=_.reduce(formats,function(_this){return function(node,value,name){var format;return format=_this.doc.formats[name],null==format||format.isType(Format.types.LINE)||(node=format.add(node,value)),node}}(this),node),ref1=dom(leaf.node).split(leafOffset),prevNode=ref1[0],nextNode=ref1[1],nextNode&&(nextNode=dom(nextNode).splitBefore(this.node).get()),this.node.insertBefore(node,nextNode),this.rebuild()},Line.prototype.insertEmbed=function(offset,attributes){var formatName,leaf,leafOffset,nextNode,node,prevNode,ref,ref1;return ref=this.findLeafAt(offset),leaf=ref[0],leafOffset=ref[1],ref1=dom(leaf.node).split(leafOffset),prevNode=ref1[0],nextNode=ref1[1],formatName=_.find(Object.keys(attributes),function(_this){return function(name){return _this.doc.formats[name].isType(Format.types.EMBED)}}(this)),node=this.doc.formats[formatName].add({},attributes[formatName]),attributes=_.clone(attributes),delete attributes[formatName],this._insert(offset,node,attributes)},Line.prototype.insertText=function(offset,text,formats){var leaf,leafOffset,ref;return null==formats&&(formats={}),text.length>0?(ref=this.findLeafAt(offset),leaf=ref[0],leafOffset=ref[1],_.isEqual(leaf.formats,formats)?(leaf.insertText(leafOffset,text),this.resetContent()):this._insert(offset,document.createTextNode(text),formats)):void 0},Line.prototype.optimize=function(){return Normalizer.optimizeLine(this.node),this.rebuild()},Line.prototype.rebuild=function(force){return null==force&&(force=!1),!force&&null!=this.outerHTML&&this.outerHTML===this.node.outerHTML&&_.all(this.leaves.toArray(),function(_this){return function(leaf){return dom(leaf.node).isAncestor(_this.node)}}(this))?!1:(this.node=this.doc.normalizer.normalizeNode(this.node),0!==dom(this.node).length()||this.node.querySelector(dom.DEFAULT_BREAK_TAG)||this.node.appendChild(document.createElement(dom.DEFAULT_BREAK_TAG)),this.leaves=new LinkedList,this.formats=_.reduce(this.doc.formats,function(_this){return function(formats,format,name){return format.isType(Format.types.LINE)&&(format.match(_this.node)?formats[name]=format.value(_this.node):delete formats[name]),formats}}(this),this.formats),this.buildLeaves(this.node,{}),this.resetContent(),!0)},Line.prototype.resetContent=function(){return dom(this.node).data(Line.DATA_KEY,this),this.outerHTML=this.node.outerHTML,this.length=1,this.delta=new Delta,_.each(this.leaves.toArray(),function(_this){return function(leaf){return _this.length+=leaf.length,null!=dom.EMBED_TAGS[leaf.node.tagName]?_this.delta.insert(1,leaf.formats):_this.delta.insert(leaf.text,leaf.formats)}}(this)),this.delta.insert("\n",this.formats)},Line}(LinkedList.Node),module.exports=Line},{"../lib/dom":17,"../lib/linked-list":18,"./format":10,"./leaf":11,"./line":12,"./normalizer":13,lodash:1,"rich-text/lib/delta":3}],13:[function(_dereq_,module){var Normalizer,_,camelize,dom;_=_dereq_("lodash"),dom=_dereq_("../lib/dom"),camelize=function(str){return str=str.replace(/(?:^|[-_])(\w)/g,function(i,c){return c?c.toUpperCase():""}),str.charAt(0).toLowerCase()+str.slice(1)},Normalizer=function(){function Normalizer(){this.whitelist={styles:{},tags:{}},this.whitelist.tags[dom.DEFAULT_BREAK_TAG]=!0,this.whitelist.tags[dom.DEFAULT_BLOCK_TAG]=!0,this.whitelist.tags[dom.DEFAULT_INLINE_TAG]=!0}return Normalizer.ALIASES={STRONG:"B",EM:"I",DEL:"S",STRIKE:"S"},Normalizer.ATTRIBUTES={color:"color",face:"fontFamily",size:"fontSize"},Normalizer.prototype.addFormat=function(config){return null!=config.tag&&(this.whitelist.tags[config.tag]=!0),null!=config.parentTag&&(this.whitelist.tags[config.parentTag]=!0),null!=config.style?this.whitelist.styles[config.style]=!0:void 0},Normalizer.prototype.normalizeLine=function(lineNode){return lineNode=Normalizer.wrapInline(lineNode),lineNode=Normalizer.handleBreaks(lineNode),"LI"===lineNode.tagName&&Normalizer.flattenList(lineNode),lineNode=Normalizer.pullBlocks(lineNode),lineNode=this.normalizeNode(lineNode),Normalizer.unwrapText(lineNode),null!=lineNode&&null!=dom.LIST_TAGS[lineNode.tagName]&&(lineNode=lineNode.firstChild),lineNode},Normalizer.prototype.normalizeNode=function(node){return dom(node).isTextNode()?node:(_.each(Normalizer.ATTRIBUTES,function(style,attribute){var value;return node.hasAttribute(attribute)?(value=node.getAttribute(attribute),"size"===attribute&&(value=dom.convertFontSize(value)),node.style[style]=value,node.removeAttribute(attribute)):void 0}),("bold"===node.style.fontWeight||node.style.fontWeight>500)&&(node.style.fontWeight="",dom(node).wrap(document.createElement("b")),node=node.parentNode),this.whitelistStyles(node),this.whitelistTags(node))},Normalizer.prototype.whitelistStyles=function(node){var original,styles;return original=dom(node).styles(),styles=_.omit(original,function(_this){return function(value,key){return null==_this.whitelist.styles[camelize(key)]}}(this)),Object.keys(styles).length<Object.keys(original).length?Object.keys(styles).length>0?dom(node).styles(styles,!0):node.removeAttribute("style"):void 0},Normalizer.prototype.whitelistTags=function(node){return dom(node).isElement()?(null!=Normalizer.ALIASES[node.tagName]?node=dom(node).switchTag(Normalizer.ALIASES[node.tagName]).get():null==this.whitelist.tags[node.tagName]&&(node=null!=dom.BLOCK_TAGS[node.tagName]?dom(node).switchTag(dom.DEFAULT_BLOCK_TAG).get():node.hasAttributes()||null==node.firstChild?dom(node).switchTag(dom.DEFAULT_INLINE_TAG).get():dom(node).unwrap()),node):node},Normalizer.flattenList=function(listNode){var innerItems,innerLists,ref;return ref=listNode.nextSibling,innerItems=_.map(listNode.querySelectorAll("li")),innerItems.forEach(function(item){return listNode.parentNode.insertBefore(item,ref),ref=item.nextSibling}),innerLists=_.map(listNode.querySelectorAll(Object.keys(dom.LIST_TAGS).join(","))),innerLists.forEach(function(list){return dom(list).remove()})},Normalizer.handleBreaks=function(lineNode){var breaks;return breaks=_.map(lineNode.querySelectorAll(dom.DEFAULT_BREAK_TAG)),_.each(breaks,function(){return function(br){return null==br.nextSibling||dom.isIE(10)&&null==br.previousSibling?void 0:dom(br.nextSibling).splitBefore(lineNode.parentNode)}}(this)),lineNode},Normalizer.optimizeLine=function(lineNode){var lineNodeLength,node,nodes,results;for(lineNode.normalize(),lineNodeLength=dom(lineNode).length(),nodes=dom(lineNode).descendants(),results=[];nodes.length>0;)node=nodes.pop(),null!=(null!=node?node.parentNode:void 0)&&null==dom.EMBED_TAGS[node.tagName]&&(node.tagName===dom.DEFAULT_BREAK_TAG?0!==lineNodeLength?results.push(dom(node).remove()):results.push(void 0):0===dom(node).length()?(nodes.push(node.nextSibling),results.push(dom(node).unwrap())):null!=node.previousSibling&&node.tagName===node.previousSibling.tagName?_.isEqual(dom(node).attributes(),dom(node.previousSibling).attributes())?(nodes.push(node.firstChild),results.push(dom(node.previousSibling).merge(node))):results.push(void 0):results.push(void 0));return results},Normalizer.pullBlocks=function(lineNode){var curNode;for(curNode=lineNode.firstChild;null!=curNode;){if(null!=dom.BLOCK_TAGS[curNode.tagName]&&"LI"!==curNode.tagName){dom(curNode).isolate(lineNode.parentNode),null!=dom.LIST_TAGS[curNode.tagName]&&curNode.firstChild?(dom(curNode.parentNode).unwrap(),null==lineNode.parentNode&&(lineNode=curNode)):(dom(curNode).unwrap(),Normalizer.pullBlocks(lineNode));break}curNode=curNode.nextSibling}return lineNode},Normalizer.stripComments=function(html){return html.replace(/<!--[\s\S]*?-->/g,"")},Normalizer.stripWhitespace=function(html){return html=html.trim(),html=html.replace(/(\r?\n|\r)+/g," "),html=html.replace(/\>\s+\</g,"><")},Normalizer.wrapInline=function(lineNode){var blockNode,nextNode;if(null!=dom.BLOCK_TAGS[lineNode.tagName])return lineNode;for(blockNode=document.createElement(dom.DEFAULT_BLOCK_TAG),lineNode.parentNode.insertBefore(blockNode,lineNode);null!=lineNode&&null==dom.BLOCK_TAGS[lineNode.tagName];)nextNode=lineNode.nextSibling,blockNode.appendChild(lineNode),lineNode=nextNode;return blockNode},Normalizer.unwrapText=function(lineNode){var spans;return spans=_.map(lineNode.querySelectorAll(dom.DEFAULT_INLINE_TAG)),_.each(spans,function(span){return span.hasAttributes()?void 0:dom(span).unwrap()})},Normalizer}(),module.exports=Normalizer},{"../lib/dom":17,lodash:1}],14:[function(_dereq_,module){var Leaf,Normalizer,Range,Selection,_,dom;_=_dereq_("lodash"),dom=_dereq_("../lib/dom"),Leaf=_dereq_("./leaf"),Normalizer=_dereq_("./normalizer"),Range=_dereq_("../lib/range"),Selection=function(){function Selection(doc,emitter){this.doc=doc,this.emitter=emitter,this.focus=!1,this.range=new Range(0,0),this.nullDelay=!1,this.update("silent")}return Selection.prototype.checkFocus=function(){return document.activeElement===this.doc.root},Selection.prototype.getRange=function(ignoreFocus){var end,nativeRange,start;return null==ignoreFocus&&(ignoreFocus=!1),this.checkFocus()?(nativeRange=this._getNativeRange(),null==nativeRange?null:(start=this._positionToIndex(nativeRange.startContainer,nativeRange.startOffset),end=nativeRange.startContainer===nativeRange.endContainer&&nativeRange.startOffset===nativeRange.endOffset?start:this._positionToIndex(nativeRange.endContainer,nativeRange.endOffset),new Range(Math.min(start,end),Math.max(start,end)))):ignoreFocus?this.range:null},Selection.prototype.preserve=function(fn){var endNode,endOffset,nativeRange,ref,ref1,ref2,ref3,startNode,startOffset;return nativeRange=this._getNativeRange(),null!=nativeRange&&this.checkFocus()?(ref=this._encodePosition(nativeRange.startContainer,nativeRange.startOffset),startNode=ref[0],startOffset=ref[1],ref1=this._encodePosition(nativeRange.endContainer,nativeRange.endOffset),endNode=ref1[0],endOffset=ref1[1],fn(),ref2=this._decodePosition(startNode,startOffset),startNode=ref2[0],startOffset=ref2[1],ref3=this._decodePosition(endNode,endOffset),endNode=ref3[0],endOffset=ref3[1],this._setNativeRange(startNode,startOffset,endNode,endOffset)):fn()
},Selection.prototype.scrollIntoView=function(){var containerBounds,containerHeight,editor,endBounds,line,offset,ref,ref1,startBounds;if(this.range)return editor=this.emitter.editor,startBounds=editor.getBounds(this.range.start),endBounds=this.range.isCollapsed()?startBounds:editor.getBounds(this.range.end),containerBounds=editor.root.parentNode.getBoundingClientRect(),containerHeight=containerBounds.bottom-containerBounds.top,containerHeight<endBounds.top+endBounds.height?(ref=editor.doc.findLineAt(this.range.end),line=ref[0],offset=ref[1],line.node.scrollIntoView(!1)):startBounds.top<0?(ref1=editor.doc.findLineAt(this.range.start),line=ref1[0],offset=ref1[1],line.node.scrollIntoView()):void 0},Selection.prototype.setRange=function(range,source){var endNode,endOffset,ref,ref1,ref2,startNode,startOffset;return null!=range?(ref=this._indexToPosition(range.start),startNode=ref[0],startOffset=ref[1],range.isCollapsed()?(ref1=[startNode,startOffset],endNode=ref1[0],endOffset=ref1[1]):(ref2=this._indexToPosition(range.end),endNode=ref2[0],endOffset=ref2[1]),this._setNativeRange(startNode,startOffset,endNode,endOffset)):this._setNativeRange(null),this.update(source)},Selection.prototype.shiftAfter=function(index,length,fn){var range;return range=this.getRange(),fn(),null!=range?(range.shift(index,length),this.setRange(range,"silent")):void 0},Selection.prototype.update=function(source){var emit,focus,range,toEmit;return focus=this.checkFocus(),range=this.getRange(!0),emit="silent"!==source&&(!Range.compare(range,this.range)||focus!==this.focus),toEmit=focus?range:null,null!==toEmit||"user"!==source||this.nullDelay?(this.nullDelay=!1,this.range=range,this.focus=focus,emit?this.emitter.emit(this.emitter.constructor.events.SELECTION_CHANGE,toEmit,source):void 0):this.nullDelay=!0},Selection.prototype._decodePosition=function(node,offset){var childIndex;return dom(node).isElement()&&(childIndex=dom(node.parentNode).childNodes().indexOf(node),offset+=childIndex,node=node.parentNode),[node,offset]},Selection.prototype._encodePosition=function(node,offset){for(var text;;){if(dom(node).isTextNode()||node.tagName===dom.DEFAULT_BREAK_TAG||null!=dom.EMBED_TAGS[node.tagName])return[node,offset];if(offset<node.childNodes.length)node=node.childNodes[offset],offset=0;else{if(0===node.childNodes.length)return null==this.doc.normalizer.whitelist.tags[node.tagName]&&(text=document.createTextNode(""),node.appendChild(text),node=text),[node,0];if(node=node.lastChild,!dom(node).isElement())return[node,dom(node).length()];if(node.tagName===dom.DEFAULT_BREAK_TAG||null!=dom.EMBED_TAGS[node.tagName])return[node,1];offset=node.childNodes.length}}},Selection.prototype._getNativeRange=function(){var range,selection;return selection=document.getSelection(),(null!=selection?selection.rangeCount:void 0)>0&&(range=selection.getRangeAt(0),dom(range.startContainer).isAncestor(this.doc.root,!0)&&(range.startContainer===range.endContainer||dom(range.endContainer).isAncestor(this.doc.root,!0)))?range:null},Selection.prototype._indexToPosition=function(index){var leaf,offset,ref;return 0===this.doc.lines.length?[this.doc.root,0]:(ref=this.doc.findLeafAt(index,!0),leaf=ref[0],offset=ref[1],this._decodePosition(leaf.node,offset))},Selection.prototype._positionToIndex=function(node,offset){var leaf,leafNode,leafOffset,line,lineOffset,ref;if(dom.isIE(10)&&"BR"===node.tagName&&1===offset&&(offset=0),ref=this._encodePosition(node,offset),leafNode=ref[0],offset=ref[1],line=this.doc.findLine(leafNode),null==line)return 0;for(leaf=line.findLeaf(leafNode),lineOffset=0;null!=line.prev;)line=line.prev,lineOffset+=line.length;if(null==leaf)return lineOffset;for(leafOffset=0;null!=leaf.prev;)leaf=leaf.prev,leafOffset+=leaf.length;return lineOffset+leafOffset+offset},Selection.prototype._setNativeRange=function(startNode,startOffset,endNode,endOffset){var nativeRange,selection;if(selection=document.getSelection())if(null!=startNode){if(this.checkFocus()||this.doc.root.focus(),nativeRange=this._getNativeRange(),null==nativeRange||startNode!==nativeRange.startContainer||startOffset!==nativeRange.startOffset||endNode!==nativeRange.endContainer||endOffset!==nativeRange.endOffset)return selection.removeAllRanges(),nativeRange=document.createRange(),nativeRange.setStart(startNode,startOffset),nativeRange.setEnd(endNode,endOffset),selection.addRange(nativeRange)}else if(selection.removeAllRanges(),this.doc.root.blur(),dom.isIE(11)&&!dom.isIE(9))return document.body.focus()},Selection}(),module.exports=Selection},{"../lib/dom":17,"../lib/range":20,"./leaf":11,"./normalizer":13,lodash:1}],15:[function(_dereq_,module){_dereq_("./modules/authorship"),_dereq_("./modules/image-tooltip"),_dereq_("./modules/keyboard"),_dereq_("./modules/link-tooltip"),_dereq_("./modules/multi-cursor"),_dereq_("./modules/paste-manager"),_dereq_("./modules/toolbar"),_dereq_("./modules/tooltip"),_dereq_("./modules/undo-manager"),module.exports=_dereq_("./quill")},{"./modules/authorship":21,"./modules/image-tooltip":22,"./modules/keyboard":23,"./modules/link-tooltip":24,"./modules/multi-cursor":25,"./modules/paste-manager":26,"./modules/toolbar":27,"./modules/tooltip":28,"./modules/undo-manager":29,"./quill":30}],16:[function(_dereq_,module){var ColorPicker,Picker,dom,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;dom=_dereq_("./dom"),Picker=_dereq_("./picker"),ColorPicker=function(superClass){function ColorPicker(){ColorPicker.__super__.constructor.apply(this,arguments),dom(this.container).addClass("ql-color-picker")}return extend(ColorPicker,superClass),ColorPicker.prototype.buildItem=function(picker,option,index){var item;return item=ColorPicker.__super__.buildItem.call(this,picker,option,index),item.style.backgroundColor=option.value,item},ColorPicker}(Picker),module.exports=ColorPicker},{"./dom":17,"./picker":19}],17:[function(_dereq_,module){var SelectWrapper,Wrapper,_,dom,lastKeyEvent,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;_=_dereq_("lodash"),lastKeyEvent=null,Wrapper=function(){function Wrapper(node1){this.node=node1,this.trigger=bind(this.trigger,this)}return Wrapper.prototype.addClass=function(cssClass){return this.hasClass(cssClass)?void 0:(null!=this.node.classList?this.node.classList.add(cssClass):null!=this.node.className&&(this.node.className=(this.node.className+" "+cssClass).trim()),this)},Wrapper.prototype.attributes=function(attributes){var attr,i,j,len,ref,value;if(attributes)return _.each(attributes,function(_this){return function(value,name){return _this.node.setAttribute(name,value)}}(this)),this;if(null==this.node.attributes)return{};for(attributes={},ref=this.node.attributes,i=j=0,len=ref.length;len>j;i=++j)value=ref[i],attr=this.node.attributes[i],attributes[attr.name]=attr.value;return attributes},Wrapper.prototype.child=function(offset){var child,length;for(child=this.node.firstChild,length=dom(child).length();null!=child&&!(length>offset);)offset-=length,child=child.nextSibling,length=dom(child).length();return null==child&&(child=this.node.lastChild,offset=dom(child).length()),[child,offset]},Wrapper.prototype.childNodes=function(){return _.map(this.node.childNodes)},Wrapper.prototype.classes=function(){return this.node.className.split(/\s+/)},Wrapper.prototype.data=function(key,value){var ref;return null!=value?(null==this.node["ql-data"]&&(this.node["ql-data"]={}),this.node["ql-data"][key]=value,this):null!=(ref=this.node["ql-data"])?ref[key]:void 0},Wrapper.prototype.descendants=function(){return _.map(this.node.getElementsByTagName("*"))},Wrapper.prototype.get=function(){return this.node},Wrapper.prototype.hasClass=function(cssClass){return null!=this.node.classList?this.node.classList.contains(cssClass):null!=this.node.className?this.classes().indexOf(cssClass)>-1:!1},Wrapper.prototype.isAncestor=function(ancestor,inclusive){var node;if(null==inclusive&&(inclusive=!1),ancestor===this.node)return inclusive;for(node=this.node;node;){if(node===ancestor)return!0;node=node.parentNode}return!1},Wrapper.prototype.isElement=function(){var ref;return(null!=(ref=this.node)?ref.nodeType:void 0)===dom.ELEMENT_NODE},Wrapper.prototype.isTextNode=function(){var ref;return(null!=(ref=this.node)?ref.nodeType:void 0)===dom.TEXT_NODE},Wrapper.prototype.isolate=function(root){return null!=this.node.nextSibling&&dom(this.node.nextSibling).splitBefore(root),this.splitBefore(root),this},Wrapper.prototype.length=function(){var length;return null==this.node?0:(length=this.text().length,this.isElement()&&(length+=this.node.querySelectorAll(Object.keys(dom.EMBED_TAGS).join(",")).length),length)},Wrapper.prototype.merge=function(node){var $node;return $node=dom(node),this.isElement()?($node.moveChildren(this.node),this.normalize()):this.text(this.text()+$node.text()),$node.remove(),this},Wrapper.prototype.moveChildren=function(newParent){return _.each(this.childNodes(),function(child){return newParent.appendChild(child)}),this},Wrapper.prototype.nextLineNode=function(root){var nextNode;return nextNode=this.node.nextSibling,null==nextNode&&this.node.parentNode!==root&&(nextNode=this.node.parentNode.nextSibling),null!=nextNode&&null!=dom.LIST_TAGS[nextNode.tagName]&&(nextNode=nextNode.firstChild),nextNode},Wrapper.prototype.normalize=function(){var $node,curNode,followingNode,nextNode;for(curNode=this.node.firstChild;null!=curNode;)nextNode=curNode.nextSibling,$node=dom(curNode),null!=nextNode&&dom(nextNode).isTextNode()&&(0===$node.text().length?$node.remove():$node.isTextNode()&&(followingNode=nextNode.nextSibling,$node.merge(nextNode),nextNode=followingNode)),curNode=nextNode;return this},Wrapper.prototype.on=function(eventName,listener){return this.node.addEventListener(eventName,function(_this){return function(event){var arg,propagate;return arg=!lastKeyEvent||"keydown"!==eventName&&"keyup"!==eventName?event:lastKeyEvent,propagate=listener.call(_this.node,arg),propagate||(event.preventDefault(),event.stopPropagation()),propagate}}(this)),this},Wrapper.prototype.remove=function(){var ref;return null!=(ref=this.node.parentNode)&&ref.removeChild(this.node),this.node=null,null},Wrapper.prototype.removeClass=function(cssClass){var classArray;if(this.hasClass(cssClass))return null!=this.node.classList?this.node.classList.remove(cssClass):null!=this.node.className&&(classArray=this.classes(),classArray.splice(classArray.indexOf(cssClass),1),this.node.className=classArray.join(" ")),this.node.getAttribute("class")||this.node.removeAttribute("class"),this},Wrapper.prototype.replace=function(newNode){return this.node.parentNode.replaceChild(newNode,this.node),this.node=newNode,this},Wrapper.prototype.splitBefore=function(root,force){var nextNode,parentClone,parentNode,refNode;if(null==force&&(force=!1),this.node===root||this.node.parentNode===root)return this;if(null!=this.node.previousSibling||force){for(parentNode=this.node.parentNode,parentClone=parentNode.cloneNode(!1),parentNode.parentNode.insertBefore(parentClone,parentNode.nextSibling),refNode=this.node;null!=refNode;)nextNode=refNode.nextSibling,parentClone.appendChild(refNode),refNode=nextNode;return dom(parentClone).splitBefore(root)}return dom(this.node.parentNode).splitBefore(root)},Wrapper.prototype.split=function(offset,force){var after,child,childLeft,childRight,left,nextRight,nodeLength,ref,ref1,right;if(null==force&&(force=!1),nodeLength=this.length(),offset=Math.max(0,offset),offset=Math.min(offset,nodeLength),!force&&0===offset)return[this.node.previousSibling,this.node,!1];if(!force&&offset===nodeLength)return[this.node,this.node.nextSibling,!1];if(this.node.nodeType===dom.TEXT_NODE)return after=this.node.splitText(offset),[this.node,after,!0];for(left=this.node,right=this.node.cloneNode(!1),this.node.parentNode.insertBefore(right,left.nextSibling),ref=this.child(offset),child=ref[0],offset=ref[1],ref1=dom(child).split(offset),childLeft=ref1[0],childRight=ref1[1];null!==childRight;)nextRight=childRight.nextSibling,right.appendChild(childRight),childRight=nextRight;return[left,right,!0]},Wrapper.prototype.styles=function(styles,overwrite){var obj,styleString;return null==overwrite&&(overwrite=!1),styles?(overwrite||(styles=_.defaults(styles,this.styles())),styleString=_.map(styles,function(style,name){return name+": "+style}).join("; ")+";",this.node.setAttribute("style",styleString),this):(styleString=this.node.getAttribute("style")||"",obj=_.reduce(styleString.split(";"),function(styles,str){var name,ref,value;return ref=str.split(":"),name=ref[0],value=ref[1],name&&value&&(name=name.trim(),value=value.trim(),styles[name.toLowerCase()]=value),styles},{}))},Wrapper.prototype.switchTag=function(newTag){var attributes,newNode;return newTag=newTag.toUpperCase(),this.node.tagName===newTag?this:(newNode=document.createElement(newTag),attributes=this.attributes(),null==dom.VOID_TAGS[newTag]&&this.moveChildren(newNode),this.replace(newNode),this.node=newNode,this.attributes(attributes))},Wrapper.prototype.text=function(text){if(null!=text){switch(this.node.nodeType){case dom.ELEMENT_NODE:this.node.textContent=text;break;case dom.TEXT_NODE:this.node.data=text}return this}switch(this.node.nodeType){case dom.ELEMENT_NODE:return this.node.tagName===dom.DEFAULT_BREAK_TAG?"":null!=dom.EMBED_TAGS[this.node.tagName]?dom.EMBED_TEXT:null!=this.node.textContent?this.node.textContent:"";case dom.TEXT_NODE:return this.node.data||"";default:return""}},Wrapper.prototype.textNodes=function(){var textNode,textNodes,walker;for(walker=document.createTreeWalker(this.node,NodeFilter.SHOW_TEXT,null,!1),textNodes=[];textNode=walker.nextNode();)textNodes.push(textNode);return textNodes},Wrapper.prototype.toggleClass=function(className,state){return null==state&&(state=!this.hasClass(className)),state?this.addClass(className):this.removeClass(className),this},Wrapper.prototype.trigger=function(eventName,options){var event,initFn,modifiers;return null==options&&(options={}),["keypress","keydown","keyup"].indexOf(eventName)<0?(event=document.createEvent("Event"),event.initEvent(eventName,options.bubbles,options.cancelable)):(event=document.createEvent("KeyboardEvent"),lastKeyEvent=_.clone(options),lastKeyEvent.which=_.isNumber(options.key)?options.key:_.isString(options.key)?options.key.toUpperCase().charCodeAt(0):0,dom.isIE(10)?(modifiers=[],options.altKey&&modifiers.push("Alt"),options.ctrlKey&&modifiers.push("Control"),options.metaKey&&modifiers.push("Meta"),options.shiftKey&&modifiers.push("Shift"),event.initKeyboardEvent(eventName,options.bubbles,options.cancelable,window,0,0,modifiers.join(" "),null,null)):(initFn=_.isFunction(event.initKeyboardEvent)?"initKeyboardEvent":"initKeyEvent",event[initFn](eventName,options.bubbles,options.cancelable,window,options.ctrlKey,options.altKey,options.shiftKey,options.metaKey,0,0))),this.node.dispatchEvent(event),lastKeyEvent=null,this},Wrapper.prototype.unwrap=function(){var next,ret;return ret=this.node.firstChild,next=this.node.nextSibling,_.each(this.childNodes(),function(_this){return function(child){return _this.node.parentNode.insertBefore(child,next)}}(this)),this.remove(),ret},Wrapper.prototype.wrap=function(wrapper){var parent;for(null!=this.node.parentNode&&this.node.parentNode.insertBefore(wrapper,this.node),parent=wrapper;null!=parent.firstChild;)parent=wrapper.firstChild;return parent.appendChild(this.node),this},Wrapper}(),SelectWrapper=function(superClass){function SelectWrapper(){return SelectWrapper.__super__.constructor.apply(this,arguments)}return extend(SelectWrapper,superClass),SelectWrapper.prototype["default"]=function(){return this.node.querySelector("option[selected]")},SelectWrapper.prototype.option=function(option,trigger){var child,i,j,len,ref,value;if(null==trigger&&(trigger=!0),value=_.isElement(option)?option.value:option){for(value=value.replace(/[^\w]+/g,""),ref=this.node.children,i=j=0,len=ref.length;len>j;i=++j)if(child=ref[i],child.value.replace(/[^\w]+/g,"")===value){this.node.selectedIndex=i;break}}else this.node.selectedIndex=-1;return trigger&&this.trigger("change"),this},SelectWrapper.prototype.reset=function(trigger){var option;return null==trigger&&(trigger=!0),option=this["default"](),null!=option?option.selected=!0:this.node.selectedIndex=0,trigger&&this.trigger("change"),this},SelectWrapper.prototype.value=function(){return this.node.selectedIndex>-1?this.node.options[this.node.selectedIndex].value:""},SelectWrapper}(Wrapper),dom=function(node){return"SELECT"===(null!=node?node.tagName:void 0)?new SelectWrapper(node):new Wrapper(node)},dom=_.extend(dom,{ELEMENT_NODE:1,NOBREAK_SPACE:"&nbsp;",TEXT_NODE:3,ZERO_WIDTH_NOBREAK_SPACE:"",DEFAULT_BLOCK_TAG:"DIV",DEFAULT_BREAK_TAG:"BR",DEFAULT_INLINE_TAG:"SPAN",EMBED_TEXT:"!",FONT_SIZES:{"10px":1,"13px":2,"16px":3,"18px":4,"24px":5,"32px":6,"48px":7},KEYS:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},BLOCK_TAGS:{ADDRESS:"ADDRESS",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",BLOCKQUOTE:"BLOCKQUOTE",CANVAS:"CANVAS",DD:"DD",DIV:"DIV",DL:"DL",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FOOTER:"FOOTER",FORM:"FORM",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEADER:"HEADER",HGROUP:"HGROUP",LI:"LI",OL:"OL",OUTPUT:"OUTPUT",P:"P",PRE:"PRE",SECTION:"SECTION",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TR:"TR",UL:"UL",VIDEO:"VIDEO"},EMBED_TAGS:{IMG:"IMG"},LINE_TAGS:{DIV:"DIV",LI:"LI"},LIST_TAGS:{OL:"OL",UL:"UL"},VOID_TAGS:{AREA:"AREA",BASE:"BASE",BR:"BR",COL:"COL",COMMAND:"COMMAND",EMBED:"EMBED",HR:"HR",IMG:"IMG",INPUT:"INPUT",KEYGEN:"KEYGEN",LINK:"LINK",META:"META",PARAM:"PARAM",SOURCE:"SOURCE",TRACK:"TRACK",WBR:"WBR"},convertFontSize:function(size){var i,s,sources,targets;_.isString(size)&&size.indexOf("px")>-1?(sources=Object.keys(dom.FONT_SIZES),targets=_.values(dom.FONT_SIZES)):(targets=Object.keys(dom.FONT_SIZES),sources=_.values(dom.FONT_SIZES));for(i in sources)if(s=sources[i],parseInt(size)<=parseInt(s))return targets[i];return _.last(targets)},isIE:function(maxVersion){var version;return version=document.documentMode,version&&maxVersion>=version},isIOS:function(){return/iPhone|iPad/i.test(navigator.userAgent)},isMac:function(){return/Mac/i.test(navigator.platform)}}),module.exports=dom},{lodash:1}],18:[function(_dereq_,module){var LinkedList,Node;Node=function(){function Node(data){this.data=data,this.prev=this.next=null}return Node}(),LinkedList=function(){function LinkedList(){this.length=0,this.first=this.last=null}return LinkedList.Node=Node,LinkedList.prototype.append=function(node){return null!=this.first?(node.next=null,this.last.next=node):this.first=node,node.prev=this.last,this.last=node,this.length+=1},LinkedList.prototype.insertAfter=function(refNode,newNode){return newNode.prev=refNode,null!=refNode?(newNode.next=refNode.next,null!=refNode.next&&(refNode.next.prev=newNode),refNode.next=newNode,refNode===this.last&&(this.last=newNode)):(newNode.next=this.first,this.first.prev=newNode,this.first=newNode),this.length+=1},LinkedList.prototype.remove=function(node){return this.length>1?(null!=node.prev&&(node.prev.next=node.next),null!=node.next&&(node.next.prev=node.prev),node===this.first&&(this.first=node.next),node===this.last&&(this.last=node.prev)):this.first=this.last=null,node.prev=node.next=null,this.length-=1},LinkedList.prototype.toArray=function(){var arr,cur;for(arr=[],cur=this.first;null!=cur;)arr.push(cur),cur=cur.next;return arr},LinkedList}(),module.exports=LinkedList},{}],19:[function(_dereq_,module){var Picker,_,dom;_=_dereq_("lodash"),dom=_dereq_("./dom"),Picker=function(){function Picker(select){this.select=select,this.container=document.createElement("span"),this.buildPicker(),dom(this.container).addClass("ql-picker"),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),dom(document).on("click",function(_this){return function(){return _this.close(),!0}}(this)),dom(this.label).on("click",function(_this){return function(){return _.defer(function(){return dom(_this.container).toggleClass("ql-expanded")}),!1}}(this)),dom(this.select).on("change",function(_this){return function(){var item,option;return _this.select.selectedIndex>-1&&(item=_this.container.querySelectorAll(".ql-picker-item")[_this.select.selectedIndex],option=_this.select.options[_this.select.selectedIndex]),_this.selectItem(item,!1),dom(_this.label).toggleClass("ql-active",option!==dom(_this.select)["default"]())}}(this))}return Picker.TEMPLATE='<span class="ql-picker-label"></span><span class="ql-picker-options"></span>',Picker.prototype.buildItem=function(picker,option,index){var item;return item=document.createElement("span"),item.setAttribute("data-value",option.getAttribute("value")),dom(item).addClass("ql-picker-item").text(dom(option).text()).on("click",function(_this){return function(){return _this.selectItem(item,!0),_this.close()}}(this)),this.select.selectedIndex===index&&this.selectItem(item,!1),item},Picker.prototype.buildPicker=function(){var picker;return _.each(dom(this.select).attributes(),function(_this){return function(value,name){return _this.container.setAttribute(name,value)}}(this)),this.container.innerHTML=Picker.TEMPLATE,this.label=this.container.querySelector(".ql-picker-label"),picker=this.container.querySelector(".ql-picker-options"),_.each(this.select.options,function(_this){return function(option,i){var item;return item=_this.buildItem(picker,option,i),picker.appendChild(item)}}(this))},Picker.prototype.close=function(){return dom(this.container).removeClass("ql-expanded")},Picker.prototype.selectItem=function(item,trigger){var selected,value;return selected=this.container.querySelector(".ql-selected"),null!=selected&&dom(selected).removeClass("ql-selected"),null!=item?(value=item.getAttribute("data-value"),dom(item).addClass("ql-selected"),dom(this.label).text(dom(item).text()),dom(this.select).option(value,trigger),this.label.setAttribute("data-value",value)):(this.label.innerHTML="&nbsp;",this.label.removeAttribute("data-value"))},Picker}(),module.exports=Picker},{"./dom":17,lodash:1}],20:[function(_dereq_,module){var Range,_;_=_dereq_("lodash"),Range=function(){function Range(start,end){this.start=start,this.end=end}return Range.compare=function(r1,r2){return r1===r2?!0:null==r1||null==r2?!1:r1.equals(r2)},Range.prototype.equals=function(range){return null==range?!1:this.start===range.start&&this.end===range.end},Range.prototype.shift=function(index,length){var ref;return ref=_.map([this.start,this.end],function(pos){return index>pos?pos:length>=0?pos+length:Math.max(index,pos+length)}),this.start=ref[0],this.end=ref[1],ref},Range.prototype.isCollapsed=function(){return this.start===this.end},Range}(),module.exports=Range},{lodash:1}],21:[function(_dereq_,module){var Authorship,Delta,Quill,_,dom;Quill=_dereq_("../quill"),_=Quill.require("lodash"),dom=Quill.require("dom"),Delta=Quill.require("delta"),Authorship=function(){function Authorship(quill,options){this.quill=quill,this.options=options,null!=this.options.button&&this.attachButton(this.options.button),this.options.enabled&&this.enable(),this.quill.addFormat("author",{"class":"author-"}),null!=this.options.authorId&&(this.quill.on(this.quill.constructor.events.PRE_EVENT,function(_this){return function(eventName,delta,origin){var authorDelta,authorFormat;return eventName===_this.quill.constructor.events.TEXT_CHANGE&&"user"===origin?(authorDelta=new Delta,authorFormat={author:_this.options.authorId},_.each(delta.ops,function(op){return null==op["delete"]?null!=op.insert||null!=op.retain&&null!=op.attributes?(op.attributes||(op.attributes={}),op.attributes.author=_this.options.authorId,authorDelta.retain(op.retain||op.insert.length||1,authorFormat)):authorDelta.retain(op.retain):void 0}),_this.quill.updateContents(authorDelta,Quill.sources.SILENT)):void 0}}(this)),this.addAuthor(this.options.authorId,this.options.color))}return Authorship.DEFAULTS={authorId:null,color:"transparent",enabled:!1},Authorship.prototype.addAuthor=function(id,color){var styles;return styles={},styles[".authorship .author-"+id]={"background-color":""+color},this.quill.theme.addStyles(styles)},Authorship.prototype.attachButton=function(button){var $button;return $button=dom(button),$button.on("click",function(_this){return function(){return $button.toggleClass("ql-on"),_this.enable($dom.hasClass("ql-on"))}}(this))},Authorship.prototype.enable=function(enabled){return null==enabled&&(enabled=!0),dom(this.quill.root).toggleClass("authorship",enabled)},Authorship.prototype.disable=function(){return this.enable(!1)},Authorship}(),Quill.registerModule("authorship",Authorship),module.exports=Authorship},{"../quill":30}],22:[function(_dereq_,module){var Delta,ImageTooltip,Quill,Range,Tooltip,_,dom,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Quill=_dereq_("../quill"),Tooltip=_dereq_("./tooltip"),_=Quill.require("lodash"),dom=Quill.require("dom"),Delta=Quill.require("delta"),Range=Quill.require("range"),ImageTooltip=function(superClass){function ImageTooltip(quill,options){this.quill=quill,this.options=options,this.options=_.defaults(this.options,Tooltip.DEFAULTS),ImageTooltip.__super__.constructor.call(this,this.quill,this.options),this.preview=this.container.querySelector(".preview"),this.textbox=this.container.querySelector(".input"),dom(this.container).addClass("ql-image-tooltip"),this.initListeners()}return extend(ImageTooltip,superClass),ImageTooltip.DEFAULTS={template:'<input class="input" type="textbox"> <div class="preview"> <span>Preview</span> </div> <a href="javascript:;" class="cancel">Cancel</a> <a href="javascript:;" class="insert">Insert</a>'},ImageTooltip.prototype.initListeners=function(){return dom(this.quill.root).on("focus",_.bind(this.hide,this)),dom(this.container.querySelector(".insert")).on("click",_.bind(this.insertImage,this)),dom(this.container.querySelector(".cancel")).on("click",_.bind(this.hide,this)),dom(this.textbox).on("input",_.bind(this._preview,this)),this.initTextbox(this.textbox,this.insertImage,this.hide),this.quill.onModuleLoad("toolbar",function(_this){return function(toolbar){return _this.toolbar=toolbar,toolbar.initFormat("image",_.bind(_this._onToolbar,_this))}}(this))},ImageTooltip.prototype.insertImage=function(){var index,url;return url=this._normalizeURL(this.textbox.value),null==this.range&&(this.range=new Range(0,0)),this.range&&(this.preview.innerHTML="<span>Preview</span>",this.textbox.value="",index=this.range.end,this.quill.insertEmbed(index,"image",url,"user"),this.quill.setSelection(index+1,index+1)),this.hide()},ImageTooltip.prototype._onToolbar=function(range,value){return value?(this.textbox.value||(this.textbox.value="http://"),this.show(),this.textbox.focus(),_.defer(function(_this){return function(){return _this.textbox.setSelectionRange(_this.textbox.value.length,_this.textbox.value.length)}}(this))):(this.quill.deleteText(range,"user"),this.toolbar.setActive("image",!1))},ImageTooltip.prototype._preview=function(){var img;if(this._matchImageURL(this.textbox.value))return"IMG"===this.preview.firstChild.tagName?this.preview.firstChild.setAttribute("src",this.textbox.value):(img=document.createElement("img"),img.setAttribute("src",this.textbox.value),this.preview.replaceChild(img,this.preview.firstChild))},ImageTooltip.prototype._matchImageURL=function(url){return/^https?:\/\/.+\.(jpe?g|gif|png)$/.test(url)},ImageTooltip.prototype._normalizeURL=function(url){return/^https?:\/\//.test(url)||(url="http://"+url),url},ImageTooltip}(Tooltip),Quill.registerModule("image-tooltip",ImageTooltip),module.exports=ImageTooltip},{"../quill":30,"./tooltip":28}],23:[function(_dereq_,module){var Delta,Keyboard,Quill,_,dom;Quill=_dereq_("../quill"),_=Quill.require("lodash"),dom=Quill.require("dom"),Delta=Quill.require("delta"),Keyboard=function(){function Keyboard(quill){this.quill=quill,this.hotkeys={},this._initListeners(),this._initHotkeys(),this.quill.onModuleLoad("toolbar",function(_this){return function(toolbar){return _this.toolbar=toolbar}}(this))}return Keyboard.hotkeys={BOLD:{key:"B",metaKey:!0},INDENT:{key:dom.KEYS.TAB},ITALIC:{key:"I",metaKey:!0},OUTDENT:{key:dom.KEYS.TAB,shiftKey:!0},UNDERLINE:{key:"U",metaKey:!0}},Keyboard.prototype.addHotkey=function(hotkeys,callback){return Array.isArray(hotkeys)||(hotkeys=[hotkeys]),_.each(hotkeys,function(_this){return function(hotkey){var base,which;return hotkey=_.isObject(hotkey)?_.clone(hotkey):{key:hotkey},hotkey.callback=callback,which=_.isNumber(hotkey.key)?hotkey.key:hotkey.key.toUpperCase().charCodeAt(0),null==(base=_this.hotkeys)[which]&&(base[which]=[]),_this.hotkeys[which].push(hotkey)}}(this))},Keyboard.prototype.removeHotkeys=function(hotkey,callback){var base,kept,ref,removed,which;return hotkey=_.isString(hotkey)?hotkey.toUpperCase():hotkey,hotkey=Keyboard.hotkeys[hotkey]?Keyboard.hotkeys[hotkey]:hotkey,hotkey=_.isObject(hotkey)?hotkey:{key:hotkey},which=_.isNumber(hotkey.key)?hotkey.key:hotkey.key.charCodeAt(0),null==(base=this.hotkeys)[which]&&(base[which]=[]),ref=_.partition(this.hotkeys[which],function(handler){return _.isEqual(hotkey,_.omit(handler,"callback"))&&(!callback||callback===handler.callback)}),removed=ref[0],kept=ref[1],this.hotkeys[which]=kept,_.map(removed,"callback")},Keyboard.prototype.toggleFormat=function(range,format){var delta,value;return delta=range.isCollapsed()?this.quill.getContents(Math.max(0,range.start-1),range.end):this.quill.getContents(range),value=0===delta.ops.length||!_.all(delta.ops,function(op){var ref;return null!=(ref=op.attributes)?ref[format]:void 0}),range.isCollapsed()?this.quill.prepareFormat(format,value,Quill.sources.USER):this.quill.formatText(range,format,value,Quill.sources.USER),null!=this.toolbar?this.toolbar.setActive(format,value):void 0},Keyboard.prototype._initEnter=function(){var keys;return keys=[{key:dom.KEYS.ENTER},{key:dom.KEYS.ENTER,shiftKey:!0}],this.addHotkey(keys,function(_this){return function(range){var delta,leaf,line,offset,ref,ref1;return null==range?!0:(ref=_this.quill.editor.doc.findLineAt(range.start),line=ref[0],offset=ref[1],ref1=line.findLeafAt(offset),leaf=ref1[0],offset=ref1[1],delta=(new Delta).retain(range.start).insert("\n",line.formats)["delete"](range.end-range.start),_this.quill.updateContents(delta,Quill.sources.USER),_.each(leaf.formats,function(value,format){_this.quill.prepareFormat(format,value),null!=_this.toolbar&&_this.toolbar.setActive(format,value)}),_this.quill.editor.selection.scrollIntoView(),!1)}}(this))},Keyboard.prototype._initDeletes=function(){return this.addHotkey([dom.KEYS.DELETE,dom.KEYS.BACKSPACE],function(_this){return function(range,hotkey){var format,line,offset,ref;return null!=range&&_this.quill.getLength()>0&&(range.start!==range.end?_this.quill.deleteText(range.start,range.end,Quill.sources.USER):hotkey.key===dom.KEYS.BACKSPACE?(ref=_this.quill.editor.doc.findLineAt(range.start),line=ref[0],offset=ref[1],0===offset&&(line.formats.bullet||line.formats.list)?(format=line.formats.bullet?"bullet":"list",_this.quill.formatLine(range.start,range.start,format,!1,Quill.sources.USER)):range.start>0&&_this.quill.deleteText(range.start-1,range.start,Quill.sources.USER)):range.start<_this.quill.getLength()-1&&_this.quill.deleteText(range.start,range.start+1,Quill.sources.USER)),_this.quill.editor.selection.scrollIntoView(),!1}}(this))},Keyboard.prototype._initHotkeys=function(){return this.addHotkey(Keyboard.hotkeys.INDENT,function(_this){return function(range){return _this._onTab(range,!1),!1}}(this)),this.addHotkey(Keyboard.hotkeys.OUTDENT,function(){return function(){return!1}}(this)),_.each(["bold","italic","underline"],function(_this){return function(format){return _this.addHotkey(Keyboard.hotkeys[format.toUpperCase()],function(range){return _this.quill.editor.doc.formats[format]&&_this.toggleFormat(range,format),!1})}}(this)),this._initDeletes(),this._initEnter()},Keyboard.prototype._initListeners=function(){return dom(this.quill.root).on("keydown",function(_this){return function(event){var prevent;return prevent=!1,_.each(_this.hotkeys[event.which],function(hotkey){var metaKey;
return metaKey=dom.isMac()?event.metaKey:event.metaKey||event.ctrlKey,!!hotkey.metaKey==!!metaKey&&!!hotkey.shiftKey==!!event.shiftKey&&!!hotkey.altKey==!!event.altKey?(prevent=hotkey.callback(_this.quill.getSelection(),hotkey,event)===!1||prevent,!0):void 0}),!prevent}}(this))},Keyboard.prototype._onTab=function(range,shift){var delta;return null==shift&&(shift=!1),delta=(new Delta).retain(range.start).insert("	")["delete"](range.end-range.start).retain(this.quill.getLength()-range.end),this.quill.updateContents(delta,Quill.sources.USER),this.quill.setSelection(range.start+1,range.start+1)},Keyboard}(),Quill.registerModule("keyboard",Keyboard),module.exports=Keyboard},{"../quill":30}],24:[function(_dereq_,module){var LinkTooltip,Quill,Tooltip,_,dom,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Quill=_dereq_("../quill"),Tooltip=_dereq_("./tooltip"),_=Quill.require("lodash"),dom=Quill.require("dom"),LinkTooltip=function(superClass){function LinkTooltip(quill,options){this.quill=quill,this.options=options,this.options=_.defaults(this.options,Tooltip.DEFAULTS),LinkTooltip.__super__.constructor.call(this,this.quill,this.options),dom(this.container).addClass("ql-link-tooltip"),this.textbox=this.container.querySelector(".input"),this.link=this.container.querySelector(".url"),this.initListeners()}return extend(LinkTooltip,superClass),LinkTooltip.DEFAULTS={maxLength:50,template:'<span class="title">Visit URL:&nbsp;</span> <a href="#" class="url" target="_blank" href="about:blank"></a> <input class="input" type="text"> <span>&nbsp;&#45;&nbsp;</span> <a href="javascript:;" class="change">Change</a> <a href="javascript:;" class="remove">Remove</a> <a href="javascript:;" class="done">Done</a>'},LinkTooltip.hotkeys={LINK:{key:"K",metaKey:!0}},LinkTooltip.prototype.initListeners=function(){return this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(_this){return function(range){var anchor;if(null!=range&&range.isCollapsed())return anchor=_this._findAnchor(range),anchor?(_this.setMode(anchor.href,!1),_this.show(anchor)):_this.container.style.left!==Tooltip.HIDE_MARGIN?(_this.range=null,_this.hide()):void 0}}(this)),dom(this.container.querySelector(".done")).on("click",_.bind(this.saveLink,this)),dom(this.container.querySelector(".remove")).on("click",function(_this){return function(){return _this.removeLink(_this.range)}}(this)),dom(this.container.querySelector(".change")).on("click",function(_this){return function(){return _this.setMode(_this.link.href,!0)}}(this)),this.initTextbox(this.textbox,this.saveLink,this.hide),this.quill.onModuleLoad("toolbar",function(_this){return function(toolbar){return _this.toolbar=toolbar,toolbar.initFormat("link",_.bind(_this._onToolbar,_this))}}(this)),this.quill.onModuleLoad("keyboard",function(_this){return function(keyboard){return keyboard.addHotkey(LinkTooltip.hotkeys.LINK,_.bind(_this._onKeyboard,_this))}}(this))},LinkTooltip.prototype.saveLink=function(){var anchor,end,url;return url=this._normalizeURL(this.textbox.value),null!=this.range&&(end=this.range.end,this.range.isCollapsed()?(anchor=this._findAnchor(this.range),null!=anchor&&(anchor.href=url)):this.quill.formatText(this.range,"link",url,"user"),this.quill.setSelection(end,end)),this.setMode(url,!1)},LinkTooltip.prototype.removeLink=function(range){return range.isCollapsed()&&(range=this._expandRange(range)),this.hide(),this.quill.formatText(range,"link",!1,"user"),null!=this.toolbar?this.toolbar.setActive("link",!1):void 0},LinkTooltip.prototype.setMode=function(url,edit){var text;return null==edit&&(edit=!1),edit?(this.textbox.value=url,_.defer(function(_this){return function(){return _this.textbox.focus(),_this.textbox.setSelectionRange(0,url.length)}}(this))):(this.link.href=url,url=this.link.href,text=url.length>this.options.maxLength?url.slice(0,this.options.maxLength)+"...":url,dom(this.link).text(text)),dom(this.container).toggleClass("editing",edit)},LinkTooltip.prototype._findAnchor=function(range){var leaf,node,offset,ref;for(ref=this.quill.editor.doc.findLeafAt(range.start,!0),leaf=ref[0],offset=ref[1],null!=leaf&&(node=leaf.node);null!=node&&node!==this.quill.root;){if("A"===node.tagName)return node;node=node.parentNode}return null},LinkTooltip.prototype._expandRange=function(range){var end,leaf,offset,ref,start;return ref=this.quill.editor.doc.findLeafAt(range.start,!0),leaf=ref[0],offset=ref[1],start=range.start-offset,end=start+leaf.length,{start:start,end:end}},LinkTooltip.prototype._onToolbar=function(range,value){return this._toggle(range,value)},LinkTooltip.prototype._onKeyboard=function(){var range;return range=this.quill.getSelection(),this._toggle(range,!this._findAnchor(range))},LinkTooltip.prototype._toggle=function(range,value){var nativeRange;if(range)return value?range.isCollapsed()?void 0:(this.setMode(this._suggestURL(range),!0),nativeRange=this.quill.editor.selection._getNativeRange(),this.show(nativeRange)):this.removeLink(range)},LinkTooltip.prototype._normalizeURL=function(url){return/^(https?:\/\/|mailto:)/.test(url)||(url="http://"+url),url},LinkTooltip.prototype._suggestURL=function(range){var text;return text=this.quill.getText(range),this._normalizeURL(text)},LinkTooltip}(Tooltip),Quill.registerModule("link-tooltip",LinkTooltip),module.exports=LinkTooltip},{"../quill":30,"./tooltip":28}],25:[function(_dereq_,module){var EventEmitter2,MultiCursor,Quill,_,dom,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Quill=_dereq_("../quill"),EventEmitter2=_dereq_("eventemitter2").EventEmitter2,_=Quill.require("lodash"),dom=Quill.require("dom"),MultiCursor=function(superClass){function MultiCursor(quill,options){this.quill=quill,this.options=options,this.cursors={},this.container=this.quill.addContainer("ql-multi-cursor",!0),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,_.bind(this._applyDelta,this))}return extend(MultiCursor,superClass),MultiCursor.DEFAULTS={template:'<span class="cursor-flag"> <span class="cursor-name"></span> </span> <span class="cursor-caret"></span>',timeout:2500},MultiCursor.events={CURSOR_ADDED:"cursor-addded",CURSOR_MOVED:"cursor-moved",CURSOR_REMOVED:"cursor-removed"},MultiCursor.prototype.clearCursors=function(){return _.each(Object.keys(this.cursors),_.bind(this.removeCursor,this)),this.cursors={}},MultiCursor.prototype.moveCursor=function(userId,index){var cursor;return cursor=this.cursors[userId],null!=cursor?(cursor.index=index,dom(cursor.elem).removeClass("hidden"),clearTimeout(cursor.timer),cursor.timer=setTimeout(function(){return function(){return dom(cursor.elem).addClass("hidden"),cursor.timer=null}}(this),this.options.timeout),this._updateCursor(cursor),cursor):void 0},MultiCursor.prototype.removeCursor=function(userId){var cursor;return cursor=this.cursors[userId],this.emit(MultiCursor.events.CURSOR_REMOVED,cursor),null!=cursor&&cursor.elem.parentNode.removeChild(cursor.elem),delete this.cursors[userId]},MultiCursor.prototype.setCursor=function(userId,index,name,color){var cursor;return null==this.cursors[userId]&&(this.cursors[userId]=cursor={userId:userId,index:index,color:color,elem:this._buildCursor(name,color)},this.emit(MultiCursor.events.CURSOR_ADDED,cursor)),_.defer(function(_this){return function(){return _this.moveCursor(userId,index)}}(this)),this.cursors[userId]},MultiCursor.prototype.shiftCursors=function(index,length,authorId){return null==authorId&&(authorId=null),_.each(this.cursors,function(_this){return function(cursor){var shift;if(cursor)return shift=Math.max(length,index-cursor.index),cursor.userId===authorId?_this.moveCursor(authorId,cursor.index+shift):cursor.index>index?cursor.index+=shift:void 0}}(this))},MultiCursor.prototype.update=function(){return _.each(this.cursors,function(_this){return function(cursor){return null!=cursor?(_this._updateCursor(cursor),!0):void 0}}(this))},MultiCursor.prototype._applyDelta=function(delta){var index;return index=0,_.each(delta.ops,function(_this){return function(op){var length,ref;return length=0,null!=op.insert?(length=op.insert.length||1,_this.shiftCursors(index,length,null!=(ref=op.attributes)?ref.author:void 0)):null!=op["delete"]?_this.shiftCursors(index,-1*op["delete"],null):null!=op.retain&&(_this.shiftCursors(index,0,null),length=op.retain),index+=length}}(this)),this.update()},MultiCursor.prototype._buildCursor=function(name,color){var cursor,cursorCaret,cursorFlag,cursorName;return cursor=document.createElement("span"),dom(cursor).addClass("cursor"),cursor.innerHTML=this.options.template,cursorFlag=cursor.querySelector(".cursor-flag"),cursorName=cursor.querySelector(".cursor-name"),dom(cursorName).text(name),cursorCaret=cursor.querySelector(".cursor-caret"),cursorCaret.style.backgroundColor=cursorName.style.backgroundColor=color,this.container.appendChild(cursor),cursor},MultiCursor.prototype._updateCursor=function(cursor){var bounds,flag;return bounds=this.quill.getBounds(cursor.index),null==bounds?this.removeCursor(cursor.userId):(cursor.elem.style.top=bounds.top+this.quill.container.scrollTop+"px",cursor.elem.style.left=bounds.left+"px",cursor.elem.style.height=bounds.height+"px",flag=cursor.elem.querySelector(".cursor-flag"),dom(cursor.elem).toggleClass("top",parseInt(cursor.elem.style.top)<=flag.offsetHeight).toggleClass("left",parseInt(cursor.elem.style.left)<=flag.offsetWidth).toggleClass("right",this.quill.root.offsetWidth-parseInt(cursor.elem.style.left)<=flag.offsetWidth),this.emit(MultiCursor.events.CURSOR_MOVED,cursor))},MultiCursor}(EventEmitter2),Quill.registerModule("multi-cursor",MultiCursor),module.exports=MultiCursor},{"../quill":30,eventemitter2:2}],26:[function(_dereq_,module){var Delta,Document,PasteManager,Quill,_,dom,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Quill=_dereq_("../quill"),Document=_dereq_("../core/document"),_=Quill.require("lodash"),dom=Quill.require("dom"),Delta=Quill.require("delta"),PasteManager=function(){function PasteManager(quill,options){var base;this.quill=quill,this._onConvert=bind(this._onConvert,this),this.container=this.quill.addContainer("ql-paste-manager"),this.container.setAttribute("contenteditable",!0),this.container.setAttribute("tabindex","-1"),dom(this.quill.root).on("paste",_.bind(this._paste,this)),this.options=_.defaults(options,PasteManager.DEFAULTS),null==(base=this.options).onConvert&&(base.onConvert=this._onConvert)}return PasteManager.DEFAULTS={onConvert:null},PasteManager.prototype._onConvert=function(container){var delta,doc,lengthAdded;return doc=new Document(container,this.quill.options),delta=doc.toDelta(),lengthAdded=delta.length(),0===lengthAdded?delta:delta.compose((new Delta).retain(lengthAdded-1)["delete"](1))},PasteManager.prototype._paste=function(){var oldDocLength,range;return oldDocLength=this.quill.getLength(),range=this.quill.getSelection(),null!=range?(this.container.focus(),_.defer(function(_this){return function(){var delta,lengthAdded;return delta=_this.options.onConvert(_this.container),lengthAdded=delta.length(),lengthAdded>0&&(range.start>0&&delta.ops.unshift({retain:range.start}),delta["delete"](range.end-range.start),_this.quill.updateContents(delta,"user")),_this.quill.setSelection(range.start+lengthAdded,range.start+lengthAdded),_this.quill.editor.selection.scrollIntoView(),_this.container.innerHTML=""}}(this))):void 0},PasteManager}(),Quill.registerModule("paste-manager",PasteManager),module.exports=PasteManager},{"../core/document":8,"../quill":30}],27:[function(_dereq_,module){var Quill,Toolbar,_,dom;Quill=_dereq_("../quill"),_=Quill.require("lodash"),dom=Quill.require("dom"),Toolbar=function(){function Toolbar(quill,options){if(this.quill=quill,this.options=options,(_.isString(this.options)||_.isElement(this.options))&&(this.options={container:this.options}),null==this.options.container)throw new Error("container required for toolbar",this.options);this.container=_.isString(this.options.container)?document.querySelector(this.options.container):this.options.container,this.inputs={},this.preventUpdate=!1,this.triggering=!1,_.each(this.quill.options.formats,function(_this){return function(name){return null==Toolbar.formats.TOOLTIP[name]?_this.initFormat(name,_.bind(_this._applyFormat,_this,name)):void 0}}(this)),this.quill.on(Quill.events.FORMAT_INIT,function(_this){return function(name){return null==Toolbar.formats.TOOLTIP[name]?_this.initFormat(name,_.bind(_this._applyFormat,_this,name)):void 0}}(this)),this.quill.on(Quill.events.SELECTION_CHANGE,function(_this){return function(range){return null!=range?_this.updateActive(range):void 0}}(this)),this.quill.on(Quill.events.TEXT_CHANGE,function(_this){return function(){return _this.updateActive()}}(this)),this.quill.onModuleLoad("keyboard",function(_this){return function(keyboard){return keyboard.addHotkey([dom.KEYS.BACKSPACE,dom.KEYS.DELETE],function(){return _.defer(_.bind(_this.updateActive,_this))})}}(this)),dom(this.container).addClass("ql-toolbar"),dom.isIOS()&&dom(this.container).addClass("ios")}return Toolbar.DEFAULTS={container:null},Toolbar.formats={LINE:{align:"align",bullet:"bullet",list:"list"},SELECT:{align:"align",background:"background",color:"color",font:"font",size:"size"},TOGGLE:{bold:"bold",bullet:"bullet",image:"image",italic:"italic",link:"link",list:"list",strike:"strike",underline:"underline"},TOOLTIP:{image:"image",link:"link"}},Toolbar.prototype.initFormat=function(format,callback){var eventName,input,selector;return selector=".ql-"+format,null!=Toolbar.formats.SELECT[format]?(selector="select"+selector,eventName="change"):eventName="click",input=this.container.querySelector(selector),null!=input?(this.inputs[format]=input,dom(input).on(eventName,function(_this){return function(){var range,value;return value="change"===eventName?dom(input).value():!dom(input).hasClass("ql-active"),_this.preventUpdate=!0,_this.quill.focus(),range=_this.quill.getSelection(),null!=range&&callback(range,value),dom.isIE(11)&&_this.quill.editor.selection.scrollIntoView(),_this.preventUpdate=!1,!1}}(this))):void 0},Toolbar.prototype.setActive=function(format,value){var $input,input,ref,selectValue;return"image"===format&&(value=!1),input=this.inputs[format],null!=input?($input=dom(input),"SELECT"===input.tagName?(this.triggering=!0,selectValue=$input.value(input),null==value&&(value=null!=(ref=$input["default"]())?ref.value:void 0),Array.isArray(value)&&(value=""),value!==selectValue&&(null!=value?$input.option(value):$input.reset()),this.triggering=!1):$input.toggleClass("ql-active",value||!1)):void 0},Toolbar.prototype.updateActive=function(range,formats){var activeFormats;return null==formats&&(formats=null),range||(range=this.quill.getSelection()),null==range||this.preventUpdate?void 0:(activeFormats=this._getActive(range),_.each(this.inputs,function(_this){return function(input,format){return(!Array.isArray(formats)||formats.indexOf(format)>-1)&&_this.setActive(format,activeFormats[format]),!0}}(this)))},Toolbar.prototype._applyFormat=function(format,range,value){return this.triggering?void 0:(range.isCollapsed()?this.quill.prepareFormat(format,value,"user"):null!=Toolbar.formats.LINE[format]?this.quill.formatLine(range,format,value,"user"):this.quill.formatText(range,format,value,"user"),_.defer(function(_this){return function(){return _this.updateActive(range,["bullet","list"]),_this.setActive(format,value)}}(this)))},Toolbar.prototype._getActive=function(range){var leafFormats,lineFormats;return leafFormats=this._getLeafActive(range),lineFormats=this._getLineActive(range),_.defaults({},leafFormats,lineFormats)},Toolbar.prototype._getLeafActive=function(range){var contents,formatsArr,line,offset,ref;return range.isCollapsed()?(ref=this.quill.editor.doc.findLineAt(range.start),line=ref[0],offset=ref[1],contents=0===offset?this.quill.getContents(range.start,range.end+1):this.quill.getContents(range.start-1,range.end)):contents=this.quill.getContents(range),formatsArr=_.map(contents.ops,"attributes"),this._intersectFormats(formatsArr)},Toolbar.prototype._getLineActive=function(range){var firstLine,formatsArr,lastLine,offset,ref,ref1;for(formatsArr=[],ref=this.quill.editor.doc.findLineAt(range.start),firstLine=ref[0],offset=ref[1],ref1=this.quill.editor.doc.findLineAt(range.end),lastLine=ref1[0],offset=ref1[1],null!=lastLine&&lastLine===firstLine&&(lastLine=lastLine.next);null!=firstLine&&firstLine!==lastLine;)formatsArr.push(_.clone(firstLine.formats)),firstLine=firstLine.next;return this._intersectFormats(formatsArr)},Toolbar.prototype._intersectFormats=function(formatsArr){return _.reduce(formatsArr.slice(1),function(activeFormats,formats){var activeKeys,added,formatKeys,intersection,missing;return null==formats&&(formats={}),activeKeys=Object.keys(activeFormats),formatKeys=null!=formats?Object.keys(formats):{},intersection=_.intersection(activeKeys,formatKeys),missing=_.difference(activeKeys,formatKeys),added=_.difference(formatKeys,activeKeys),_.each(intersection,function(name){if(null!=Toolbar.formats.SELECT[name])if(Array.isArray(activeFormats[name])){if(activeFormats[name].indexOf(formats[name])<0)return activeFormats[name].push(formats[name])}else if(activeFormats[name]!==formats[name])return activeFormats[name]=[activeFormats[name],formats[name]]}),_.each(missing,function(name){return null!=Toolbar.formats.TOGGLE[name]?delete activeFormats[name]:null==Toolbar.formats.SELECT[name]||Array.isArray(activeFormats[name])?void 0:activeFormats[name]=[activeFormats[name]]}),_.each(added,function(name){return null!=Toolbar.formats.SELECT[name]?activeFormats[name]=[formats[name]]:void 0}),activeFormats},formatsArr[0]||{})},Toolbar}(),Quill.registerModule("toolbar",Toolbar),module.exports=Toolbar},{"../quill":30}],28:[function(_dereq_,module){var Quill,Tooltip,_,dom;Quill=_dereq_("../quill"),_=Quill.require("lodash"),dom=Quill.require("dom"),Tooltip=function(){function Tooltip(quill,options){this.quill=quill,this.options=options,this.container=this.quill.addContainer("ql-tooltip"),this.container.innerHTML=this.options.template,this.hide(),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(_this){return function(){return _this.container.style.left!==Tooltip.HIDE_MARGIN?(_this.range=null,_this.hide()):void 0}}(this))}return Tooltip.DEFAULTS={offset:10,template:""},Tooltip.HIDE_MARGIN="-10000px",Tooltip.prototype.initTextbox=function(textbox,enterCallback,escapeCallback){return dom(textbox).on("keydown",function(_this){return function(event){switch(event.which){case dom.KEYS.ENTER:return event.preventDefault(),enterCallback.call(_this);case dom.KEYS.ESCAPE:return event.preventDefault(),escapeCallback.call(_this);default:return!0}}}(this))},Tooltip.prototype.hide=function(){return this.container.style.left=Tooltip.HIDE_MARGIN,this.range&&this.quill.setSelection(this.range),this.range=null},Tooltip.prototype.position=function(reference){var left,offsetBottom,offsetLeft,offsetTop,parentBounds,referenceBounds,top;return null!=reference?(referenceBounds=reference.getBoundingClientRect(),parentBounds=this.quill.container.getBoundingClientRect(),offsetLeft=referenceBounds.left-parentBounds.left,offsetTop=referenceBounds.top-parentBounds.top,offsetBottom=referenceBounds.bottom-parentBounds.bottom,left=offsetLeft+referenceBounds.width/2-this.container.offsetWidth/2,top=offsetTop+referenceBounds.height+this.options.offset,top+this.container.offsetHeight>this.quill.container.offsetHeight&&(top=offsetTop-this.container.offsetHeight-this.options.offset),left=Math.max(0,Math.min(left,this.quill.container.offsetWidth-this.container.offsetWidth)),top=Math.max(0,Math.min(top,this.quill.container.offsetHeight-this.container.offsetHeight))):(left=this.quill.container.offsetWidth/2-this.container.offsetWidth/2,top=this.quill.container.offsetHeight/2-this.container.offsetHeight/2),top+=this.quill.container.scrollTop,[left,top]},Tooltip.prototype.show=function(reference){var left,ref,top;return this.range=this.quill.getSelection(),ref=this.position(reference),left=ref[0],top=ref[1],this.container.style.left=left+"px",this.container.style.top=top+"px",this.container.focus()},Tooltip}(),Quill.registerModule("tooltip",Tooltip),module.exports=Tooltip},{"../quill":30}],29:[function(_dereq_,module){var Delta,Quill,UndoManager,_;Quill=_dereq_("../quill"),_=Quill.require("lodash"),Delta=Quill.require("delta"),UndoManager=function(){function UndoManager(quill,options){this.quill=quill,this.options=null!=options?options:{},this.lastRecorded=0,this.ignoreChange=!1,this.clear(),this.initListeners()}return UndoManager.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},UndoManager.hotkeys={UNDO:{key:"Z",metaKey:!0},REDO:{key:"Z",metaKey:!0,shiftKey:!0}},UndoManager.prototype.initListeners=function(){return this.quill.onModuleLoad("keyboard",function(_this){return function(keyboard){var redoKey;return keyboard.addHotkey(UndoManager.hotkeys.UNDO,function(){return _this.quill.editor.checkUpdate(),_this.undo(),!1}),redoKey=[UndoManager.hotkeys.REDO],navigator.platform.indexOf("Win")>-1&&redoKey.push({key:"Y",metaKey:!0}),keyboard.addHotkey(redoKey,function(){return _this.quill.editor.checkUpdate(),_this.redo(),!1})}}(this)),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(_this){return function(delta,source){return _this.ignoreChange?void 0:(_this.options.userOnly&&source!==Quill.sources.USER?_this._transform(delta):_this.record(delta,_this.oldDelta),_this.oldDelta=_this.quill.getContents())}}(this))},UndoManager.prototype.clear=function(){return this.stack={undo:[],redo:[]},this.oldDelta=this.quill.getContents()},UndoManager.prototype.record=function(changeDelta){var change,ignored,timestamp,undoDelta;if(changeDelta.ops.length>0){this.stack.redo=[];try{if(undoDelta=this.quill.getContents().diff(this.oldDelta),timestamp=(new Date).getTime(),this.lastRecorded+this.options.delay>timestamp&&this.stack.undo.length>0?(change=this.stack.undo.pop(),undoDelta=undoDelta.compose(change.undo),changeDelta=change.redo.compose(changeDelta)):this.lastRecorded=timestamp,this.stack.undo.push({redo:changeDelta,undo:undoDelta}),this.stack.undo.length>this.options.maxStack)return this.stack.undo.unshift()}catch(_error){return ignored=_error,console.warn("Could not record change... clearing undo stack."),this.clear()}}},UndoManager.prototype.redo=function(){return this._change("redo","undo")},UndoManager.prototype.undo=function(){return this._change("undo","redo")},UndoManager.prototype._getLastChangeIndex=function(delta){var index,lastIndex;return lastIndex=0,index=0,_.each(delta.ops,function(op){return null!=op.insert?lastIndex=Math.max(index+(op.insert.length||1),lastIndex):null!=op["delete"]?lastIndex=Math.max(index,lastIndex):null!=op.retain?(null!=op.attributes&&(lastIndex=Math.max(index+op.retain,lastIndex)),index+=op.retain):void 0}),lastIndex},UndoManager.prototype._change=function(source,dest){var change,index;return this.stack[source].length>0?(change=this.stack[source].pop(),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(change[source],Quill.sources.USER),this.ignoreChange=!1,index=this._getLastChangeIndex(change[source]),this.quill.setSelection(index,index),this.oldDelta=this.quill.getContents(),this.stack[dest].push(change)):void 0},UndoManager.prototype._transform=function(delta){var change,i,j,len,len1,ref,ref1,results;for(this.oldDelta=delta.transform(this.oldDelta,!0),ref=this.stack.undo,i=0,len=ref.length;len>i;i++)change=ref[i],change.undo=delta.transform(change.undo,!0),change.redo=delta.transform(change.redo,!0);for(ref1=this.stack.redo,results=[],j=0,len1=ref1.length;len1>j;j++)change=ref1[j],change.undo=delta.transform(change.undo,!0),results.push(change.redo=delta.transform(change.redo,!0));return results},UndoManager}(),Quill.registerModule("undo-manager",UndoManager),module.exports=UndoManager},{"../quill":30}],30:[function(_dereq_,module){var Delta,Document,Editor,EventEmitter2,Format,Normalizer,Quill,Range,_,dom,pkg,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,slice=[].slice;_=_dereq_("lodash"),pkg=_dereq_("../package.json"),Delta=_dereq_("rich-text/lib/delta"),EventEmitter2=_dereq_("eventemitter2").EventEmitter2,dom=_dereq_("./lib/dom"),Document=_dereq_("./core/document"),Editor=_dereq_("./core/editor"),Format=_dereq_("./core/format"),Normalizer=_dereq_("./core/normalizer"),Range=_dereq_("./lib/range"),Quill=function(superClass){function Quill(container1,options){var html,moduleOptions,themeClass;if(this.container=container1,null==options&&(options={}),_.isString(this.container)&&(this.container=document.querySelector(this.container)),null==this.container)throw new Error("Invalid Quill container");if(moduleOptions=_.defaults(options.modules||{},Quill.DEFAULTS.modules),html=this.container.innerHTML,this.container.innerHTML="",this.options=_.defaults(options,Quill.DEFAULTS),this.options.modules=moduleOptions,this.options.id=this.id="ql-editor-"+(Quill.editors.length+1),this.modules={},this.root=this.addContainer("ql-editor"),this.editor=new Editor(this.root,this,this.options),Quill.editors.push(this),this.setHTML(html,Quill.sources.SILENT),themeClass=Quill.themes[this.options.theme],null==themeClass)throw new Error("Cannot load "+this.options.theme+" theme. Are you sure you registered it?");this.theme=new themeClass(this,this.options),_.each(this.options.modules,function(_this){return function(option,name){return _this.addModule(name,option)}}(this))}return extend(Quill,superClass),Quill.version=pkg.version,Quill.editors=[],Quill.modules=[],Quill.themes=[],Quill.DEFAULTS={formats:["align","bold","italic","strike","underline","color","background","font","size","link","image","bullet","list"],modules:{keyboard:!0,"paste-manager":!0,"undo-manager":!0},pollInterval:100,readOnly:!1,styles:{},theme:"base"},Quill.events={FORMAT_INIT:"format-init",MODULE_INIT:"module-init",POST_EVENT:"post-event",PRE_EVENT:"pre-event",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},Quill.sources=Editor.sources,Quill.registerModule=function(name,module){return null!=Quill.modules[name]&&console.warn("Overwriting "+name+" module"),Quill.modules[name]=module},Quill.registerTheme=function(name,theme){return null!=Quill.themes[name]&&console.warn("Overwriting "+name+" theme"),Quill.themes[name]=theme},Quill.require=function(name){switch(name){case"lodash":return _;case"delta":return Delta;case"format":return Format;case"normalizer":return Normalizer;case"dom":return dom;case"document":return Document;case"range":return Range;default:return null}},Quill.prototype.destroy=function(){var html;return html=this.getHTML(),_.each(this.modules,function(module){return _.isFunction(module.destroy)?module.destroy():void 0}),this.editor.destroy(),this.removeAllListeners(),Quill.editors.splice(_.indexOf(Quill.editors,this),1),this.container.innerHTML=html},Quill.prototype.addContainer=function(className,before){var container,refNode;return null==before&&(before=!1),refNode=before?this.root:null,container=document.createElement("div"),dom(container).addClass(className),this.container.insertBefore(container,refNode),container},Quill.prototype.addFormat=function(name,config){return this.editor.doc.addFormat(name,config),this.emit(Quill.events.FORMAT_INIT,name)},Quill.prototype.addModule=function(name,options){var moduleClass;if(moduleClass=Quill.modules[name],null==moduleClass)throw new Error("Cannot load "+name+" module. Are you sure you registered it?");return options===!0&&(options={}),options=_.defaults(options,this.theme.constructor.OPTIONS[name]||{},moduleClass.DEFAULTS||{}),this.modules[name]=new moduleClass(this,options),this.emit(Quill.events.MODULE_INIT,name,this.modules[name]),this.modules[name]},Quill.prototype.deleteText=function(start,end,source){var delta,formats,ref;return null==source&&(source=Quill.sources.API),ref=this._buildParams(start,end,{},source),start=ref[0],end=ref[1],formats=ref[2],source=ref[3],end>start?(delta=(new Delta).retain(start)["delete"](end-start),this.editor.applyDelta(delta,source)):void 0},Quill.prototype.emit=function(){var args,eventName;return eventName=arguments[0],args=2<=arguments.length?slice.call(arguments,1):[],Quill.__super__.emit.apply(this,[Quill.events.PRE_EVENT,eventName].concat(slice.call(args))),Quill.__super__.emit.apply(this,[eventName].concat(slice.call(args))),Quill.__super__.emit.apply(this,[Quill.events.POST_EVENT,eventName].concat(slice.call(args)))},Quill.prototype.focus=function(){return this.editor.focus()},Quill.prototype.formatLine=function(start,end,name,value,source){var formats,line,offset,ref,ref1;return ref=this._buildParams(start,end,name,value,source),start=ref[0],end=ref[1],formats=ref[2],source=ref[3],ref1=this.editor.doc.findLineAt(end),line=ref1[0],offset=ref1[1],null!=line&&(end+=line.length-offset),this.formatText(start,end,formats,source)},Quill.prototype.formatText=function(start,end,name,value,source){var delta,formats,ref;return ref=this._buildParams(start,end,name,value,source),start=ref[0],end=ref[1],formats=ref[2],source=ref[3],formats=_.reduce(formats,function(_this){return function(formats,value,name){var format;return format=_this.editor.doc.formats[name],value&&value!==format.config["default"]||(formats[name]=null),formats}}(this),formats),delta=(new Delta).retain(start).retain(end-start,formats),this.editor.applyDelta(delta,source)},Quill.prototype.getBounds=function(index){return this.editor.getBounds(index)},Quill.prototype.getContents=function(start,end){return null==start&&(start=0),null==end&&(end=null),_.isObject(start)&&(end=start.end,start=start.start),this.editor.delta.slice(start,end)},Quill.prototype.getHTML=function(){return this.editor.doc.getHTML()},Quill.prototype.getLength=function(){return this.editor.length},Quill.prototype.getModule=function(name){return this.modules[name]},Quill.prototype.getSelection=function(){return this.editor.checkUpdate(),this.editor.selection.getRange()},Quill.prototype.getText=function(start,end){return null==start&&(start=0),null==end&&(end=null),_.map(this.getContents(start,end).ops,function(op){return _.isString(op.insert)?op.insert:""}).join("")},Quill.prototype.insertEmbed=function(index,type,url,source){var delta,end,formats,ref;return ref=this._buildParams(index,0,type,url,source),index=ref[0],end=ref[1],formats=ref[2],source=ref[3],delta=(new Delta).retain(index).insert(1,formats),this.editor.applyDelta(delta,source)},Quill.prototype.insertText=function(index,text,name,value,source){var delta,end,formats,ref;return ref=this._buildParams(index,0,name,value,source),index=ref[0],end=ref[1],formats=ref[2],source=ref[3],text.length>0?(delta=(new Delta).retain(index).insert(text,formats),this.editor.applyDelta(delta,source)):void 0},Quill.prototype.onModuleLoad=function(name,callback){return this.modules[name]?callback(this.modules[name]):this.on(Quill.events.MODULE_INIT,function(moduleName,module){return moduleName===name?callback(module):void 0})},Quill.prototype.prepareFormat=function(name,value,source){var format,range;return null==source&&(source=Quill.sources.API),format=this.editor.doc.formats[name],null!=format&&(range=this.getSelection(),null!=range?range.isCollapsed():void 0)?format.isType(Format.types.LINE)?this.formatLine(range,name,value,source):format.prepare(value):void 0},Quill.prototype.setContents=function(delta,source){var lastOp;return null==source&&(source=Quill.sources.API),delta=Array.isArray(delta)?new Delta(delta.slice()):new Delta(delta.ops.slice()),lastOp=_.last(delta.slice(delta.length()-1).ops),delta["delete"](this.getLength()-1),null!=lastOp&&_.isString(lastOp.insert)&&"\n"===_.last(lastOp.insert)&&delta["delete"](1),this.updateContents(delta,source)},Quill.prototype.setHTML=function(html,source){return null==source&&(source=Quill.sources.API),html.trim()||(html="<"+dom.DEFAULT_BLOCK_TAG+"><"+dom.DEFAULT_BREAK_TAG+"></"+dom.DEFAULT_BLOCK_TAG+">"),this.editor.doc.setHTML(html),this.editor.checkUpdate(source)},Quill.prototype.setSelection=function(start,end,source){var range;return null==source&&(source=Quill.sources.API),_.isNumber(start)&&_.isNumber(end)?range=new Range(start,end):(range=start,source=end||source),this.editor.selection.setRange(range,source)
},Quill.prototype.setText=function(text,source){var delta;return null==source&&(source=Quill.sources.API),delta=(new Delta).insert(text),this.setContents(delta,source)},Quill.prototype.updateContents=function(delta,source){return null==source&&(source=Quill.sources.API),Array.isArray(delta)&&(delta={ops:delta}),this.editor.applyDelta(delta,source)},Quill.prototype._buildParams=function(){var formats,params;return params=1<=arguments.length?slice.call(arguments,0):[],_.isObject(params[0])&&params.splice(0,1,params[0].start,params[0].end),_.isString(params[2])&&(formats={},formats[params[2]]=params[3],params.splice(2,2,formats)),null==params[3]&&(params[3]=Quill.sources.API),params},Quill}(EventEmitter2),Quill.registerTheme("base",_dereq_("./themes/base")),Quill.registerTheme("snow",_dereq_("./themes/snow")),module.exports=Quill},{"../package.json":7,"./core/document":8,"./core/editor":9,"./core/format":10,"./core/normalizer":13,"./lib/dom":17,"./lib/range":20,"./themes/base":32,"./themes/snow":33,eventemitter2:2,lodash:1,"rich-text/lib/delta":3}],31:[function(_dereq_,module){module.exports='.ql-image-tooltip{padding:10px;width:300px}.ql-image-tooltip:after{clear:both;content:"";display:table}.ql-image-tooltip a{border:1px solid #000;box-sizing:border-box;display:inline-block;float:left;padding:5px;text-align:center;width:50%}.ql-image-tooltip img{bottom:0;left:0;margin:auto;max-height:100%;max-width:100%;position:absolute;right:0;top:0}.ql-image-tooltip .input{box-sizing:border-box;width:100%}.ql-image-tooltip .preview{margin:10px 0;position:relative;border:1px dashed #000;height:200px}.ql-image-tooltip .preview span{display:inline-block;position:absolute;text-align:center;top:40%;width:100%}.ql-link-tooltip{padding:5px 10px}.ql-link-tooltip input.input{width:170px}.ql-link-tooltip a.done,.ql-link-tooltip input.input{display:none}.ql-link-tooltip a.change{margin-right:4px}.ql-link-tooltip.editing a.done,.ql-link-tooltip.editing input.input{display:inline-block}.ql-link-tooltip.editing a.change,.ql-link-tooltip.editing a.remove,.ql-link-tooltip.editing a.url{display:none}.ql-multi-cursor{position:absolute;left:0;top:0;z-index:1000}.ql-multi-cursor .cursor{margin-left:-1px;position:absolute}.ql-multi-cursor .cursor-flag{bottom:100%;position:absolute;white-space:nowrap}.ql-multi-cursor .cursor-name{display:inline-block;color:#fff;padding:2px 8px}.ql-multi-cursor .cursor-caret{height:100%;position:absolute;width:2px}.ql-multi-cursor .cursor.hidden .cursor-flag{display:none}.ql-multi-cursor .cursor.top .cursor-flag{bottom:auto;top:100%}.ql-multi-cursor .cursor.right .cursor-flag{right:-2px}.ql-paste-manager{left:-100000px;position:absolute;top:50%}.ql-toolbar{box-sizing:border-box}.ql-tooltip{background-color:#fff;border:1px solid #000;box-sizing:border-box;position:absolute;top:0;white-space:nowrap;z-index:2000}.ql-tooltip a{cursor:pointer;text-decoration:none}.ql-container{box-sizing:border-box;cursor:text;font-family:Helvetica,Arial,sans-serif;font-size:13px;height:100%;line-height:1.42;margin:0;overflow-x:hidden;overflow-y:auto;padding:12px 15px;position:relative}.ql-editor{box-sizing:border-box;min-height:100%;outline:0;tab-size:4;white-space:pre-wrap}.ql-editor div{margin:0;padding:0}.ql-editor a{text-decoration:underline}.ql-editor b{font-weight:700}.ql-editor i{font-style:italic}.ql-editor s{text-decoration:line-through}.ql-editor u{text-decoration:underline}.ql-editor a,.ql-editor b,.ql-editor i,.ql-editor s,.ql-editor span,.ql-editor u{background-color:inherit}.ql-editor img{max-width:100%}.ql-editor blockquote,.ql-editor ol,.ql-editor ul{margin:0 0 0 2em;padding:0}.ql-editor ol{list-style-type:decimal}.ql-editor ul{list-style-type:disc}.ql-editor.ql-ie-10 br,.ql-editor.ql-ie-9 br{display:none}'},{}],32:[function(_dereq_,module){var BaseTheme,_,baseStyles,dom;_=_dereq_("lodash"),dom=_dereq_("../../lib/dom"),baseStyles=_dereq_("./base.styl"),BaseTheme=function(){function BaseTheme(quill,options){var version;this.quill=quill,this.options=options,dom(this.quill.container).addClass("ql-container"),this.options.styles&&this.addStyles(baseStyles+BaseTheme.objToCss(this.options.styles)),dom.isIE(10)&&(version=dom.isIE(9)?"9":"10",dom(this.quill.root).addClass("ql-ie-"+version))}return BaseTheme.OPTIONS={},BaseTheme.objToCss=function(obj){return _.map(obj,function(value,key){var innerStr;return innerStr=_.map(value,function(innerValue,innerKey){return innerKey+": "+innerValue+";"}).join(" "),key+" { "+innerStr+" }"}).join("\n")},BaseTheme.prototype.addStyles=function(css){var style;return _.isObject(css)&&(css=BaseTheme.objToCss(css)),style=document.createElement("style"),style.type="text/css",style.appendChild(document.createTextNode(css)),document.head.appendChild(style)},BaseTheme}(),module.exports=BaseTheme},{"../../lib/dom":17,"./base.styl":31,lodash:1}],33:[function(_dereq_,module){var BaseTheme,ColorPicker,Picker,SnowTheme,_,dom,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;_=_dereq_("lodash"),ColorPicker=_dereq_("../../lib/color-picker"),BaseTheme=_dereq_("../base"),dom=_dereq_("../../lib/dom"),Picker=_dereq_("../../lib/picker"),SnowTheme=function(superClass){function SnowTheme(quill,options){this.quill=quill,this.options=options,SnowTheme.__super__.constructor.apply(this,arguments),dom(this.quill.container).addClass("ql-snow"),this.pickers=[],this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(_this){return function(range){return null!=range?_.invoke(_this.pickers,"close"):void 0}}(this)),this.quill.onModuleLoad("multi-cursor",_.bind(this.extendMultiCursor,this)),this.quill.onModuleLoad("toolbar",_.bind(this.extendToolbar,this))}return extend(SnowTheme,superClass),SnowTheme.COLORS=["#000000","#e60000","#ff9900","#ffff00","#008A00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],SnowTheme.OPTIONS={"multi-cursor":{template:'<span class="cursor-flag"> <span class="cursor-triangle top"></span> <span class="cursor-name"></span> <span class="cursor-triangle bottom"></span> </span> <span class="cursor-caret"></span>'}},SnowTheme.prototype.extendMultiCursor=function(module){return module.on(module.constructor.events.CURSOR_ADDED,function(cursor){var bottomTriangle,topTriangle;return bottomTriangle=cursor.elem.querySelector(".cursor-triangle.bottom"),topTriangle=cursor.elem.querySelector(".cursor-triangle.top"),bottomTriangle.style.borderTopColor=topTriangle.style.borderBottomColor=cursor.color})},SnowTheme.prototype.extendToolbar=function(module){return dom(module.container).addClass("ql-snow"),_.each(["color","background","font","size","align"],function(_this){return function(format){var picker,select;if(select=module.container.querySelector(".ql-"+format),null!=select){switch(format){case"font":case"size":case"align":picker=new Picker(select);break;case"color":case"background":picker=new ColorPicker(select),_.each(picker.container.querySelectorAll(".ql-picker-item"),function(item,i){return 7>i?dom(item).addClass("ql-primary-color"):void 0})}return null!=picker?_this.pickers.push(picker):void 0}}}(this)),_.each(dom(module.container).textNodes(),function(node){return 0===dom(node).text().trim().length?dom(node).remove():void 0})},SnowTheme}(BaseTheme),module.exports=SnowTheme},{"../../lib/color-picker":16,"../../lib/dom":17,"../../lib/picker":19,"../base":32,lodash:1}]},{},[15])(15)}),function(){this.resetXinhaKeywords=function(){var keywords,propertySections;return propertySections=[app_t("seller_leads"),app_t("properties")],app_section("rehabbers_gps")&&propertySections.push(app_t("rehabbers_gps")),this.keywordsPropertyTitle=propertySections.join(" / "),this.keywordsBuyerTitle=""+app_t("buyer_leads")+" / "+app_t("buyers"),this.xinha_keywords1=$.extend($.extend({You:""},{"Your Full Name":"{!user_full_name}","Your First Name":"{!user_first_name}","Your Last Name":"{!user_last_name}","Your Signature":"{!user_signature}","Your Initials":"{!user_initials}","Your Email":"{!user_email}","Your Address":"{!user_address}","Your City":"{!user_city}","Your State":"{!user_state}","Your Zip":"{!user_zip}","Your City, State Zip":"{!user_city_state_zip}","Your Phone":"{!user_phone}","Your Company Name":"{!user_company_name}","Your Company Email":"{!user_company_email}","Your Company Address":"{!user_company_address}","Your Company City":"{!user_company_city}","Your Company State":"{!user_company_state}","Your Company Zip":"{!user_company_zip}","Your Company Phone":"{!user_company_phone}","Your Company Fax":"{!user_company_fax}"}),{"Current Date":"{!current_date}"}),keywords={},keywords[this.keywordsBuyerTitle]="",this.xinha_keywords2=$.extend(keywords,{"Full Name":"{!buyer_full_name}","First Name":"{!buyer_first_name}","Last Name":"{!buyer_last_name}",Company:"{!buyer_company_name}",Phone:"{!buyer_phone}",Fax:"{!buyer_fax}",Email:"{!buyer_email}",Address:"{!buyer_address}",City:"{!buyer_city}",State:"{!buyer_state}",Zip:"{!buyer_zip}","City, State Zip":"{!buyer_city_state_zip}",Country:"{!buyer_country}","Buyer Type":"{!buyer_type}","Construction Type":"{!buyer_construction}",Funding:"{!buyer_funding}","Min Baths":"{!buyer_min_baths}","Max Baths":"{!buyer_max_baths}","Min Beds":"{!buyer_min_beds}","Max Beds":"{!buyer_max_beds}","Min Garage":"{!buyer_min_garage}","Max Garage":"{!buyer_max_garage}","Min Living Area":"{!buyer_min_living_space}","Max Living Area":"{!buyer_max_living_space}","Min Price":"{!buyer_min_price_range}","Max Price":"{!buyer_max_price_range}",Notes:"{!buyer_notes}",Source:"{!buyer_source}"}),keywords={},keywords[this.keywordsPropertyTitle]="",this.xinha_keywords3=$.extend(keywords,{"Primary Contact Name":"{!property_primary_contact_name}","Primary Contact First Name":"{!property_primary_contact_first_name}","Primary Contact Phone":"{!property_phone}","Primary Contact Fax":"{!property_fax}","Primary Contact Email":"{!property_email}","Asking Price":"{!property_price}","Property Address":"{!property_address}","Property City":"{!property_city}","Property State":"{!property_state}","Property Zip":"{!property_zip}","Property City, State Zip":"{!property_city_state_zip}","Property County":"{!property_county}","Property Country":"{!property_country}","Owner of Record":"{!property_owner_of_record}","Mailing Address":"{!property_mailing_address}","Mailing City":"{!property_mailing_city}","Mailing State":"{!property_mailing_state}","Mailing Zip":"{!property_mailing_zip}","Mailing City, State Zip":"{!property_mailing_city_state_zip}","Mailing County":"{!property_mailing_county}","Mailing Country":"{!property_mailing_country}","After Repair Value":"{!property_arv}",Baths:"{!property_baths}",Beds:"{!property_beds}",Construction:"{!property_construction}","Cost of Sale":"{!property_costs_of_sale_}","Deal Type":"{!property_deal_type}",Feature:"{!property_features}",Garage:"{!property_garage}",HOA:"{!property_hoa}","Lowest Acceptable Offer":"{!property_lao}","List Date":"{!property_list_date}","List Price":"{!property_list_price}","Listed?":"{!property_listed}","Listing Agent Name":"{!property_listing_agent_name}","Listing Agent Email":"{!property_listing_agent_email}","Listing Agent Phone":"{!property_listing_agent_phone}","Living Area":"{!property_living_area}","Loan Balance":"{!property_loan_balance}","Lot Size":"{!property_lot_size}","MLS Number":"{!property_mls_number}",Notes:"{!property_notes}","Occupancy Type":"{!property_occupancy}","Other Costs":"{!property_other_costs_}","Price Flexible?":"{!property_price_flexible}","P/T Current?":"{!property_pt_current}","Public URL":"{!property_public_url}","Purchase Price":"{!property_purchase_price_}","Reason for Selling":"{!property_reason}","Rent Price":"{!property_rent_price}","Repair Cost":"{!property_repair_cost_}",Repairs:"{!property_repairs}","Sales Price":"{!property_sales_price_}","Sell By":"{!property_sell_by}",Source:"{!property_source}",Status:"{!property_status}",Taxes:"{!property_taxes}","Property Type":"{!property_type}","Year Built":"{!property_year_built}"}),this.xinha_keywords4={Recipient:"","Recipient First Name":"{!recipient_first_name}","Recipient Last Name":"{!recipient_last_name}","Recipient Address":"{!recipient_address}","Recipient City":"{!recipient_city}","Recipient State":"{!recipient_state}","Recipient Zip":"{!recipient_zip}","Property Address":"{!property_address}","Property City":"{!property_city}","Property State":"{!property_state}","Property Zip":"{!property_zip}","Decedent First Name":"{!decedent_first_name}","Decedent Last Name":"{!decedent_last_name}"},this.xinha_keywords5=$.extend({Contact:""},{"Full Name":"{!contact_name}","First Name":"{!contact_first_name}","Last Name":"{!contact_last_name}",Phone:"{!contact_phone}",Fax:"{!contact_fax}",Email:"{!contact_email}",Company:"{!contact_company_name}",Website:"{!contact_website_url}","Contact Type":"{!contact_type}",Address:"{!contact_address}",City:"{!contact_city}",State:"{!contact_state}",Zip:"{!contact_zip}","City, State Zip":"{!contact_city_state_zip}",Country:"{!contact_country}"}),this.xinha_keywords6={Property:"",Address:"{!property_address}",City:"{!property_city}",State:"{!property_state}",Zip:"{!property_zip}",County:"{!property_county}","Agent Name":"{!property_agent_name}","Agent Email":"{!property_agent_email}","OfferBot Offer Price":"{!property_offer_price_with_currency}"},this.xinha_keywords7=$.extend({Recipient:""},{"First Name":"{!broadcast_recipient_first_name}","Last Name":"{!broadcast_recipient_last_name}",Company:"{!broadcast_recipient_company_name}",Address:"{!broadcast_recipient_address}",City:"{!broadcast_recipient_city}",State:"{!broadcast_recipient_state}",Zip:"{!broadcast_recipient_zip}",Phone:"{!broadcast_recipient_phone}",Fax:"{!broadcast_recipient_fax}",Email:"{!broadcast_recipient_email}"}),this.xinha_keywords8=$.extend($.extend({"Merge Fields":""},{"Your Full Name":"{!user_full_name}","Your First Name":"{!user_first_name}","Your Last Name":"{!user_last_name}","Your Signature":"{!user_signature}","Your Initials":"{!user_initials}","Your Email":"{!user_email}","Your Address":"{!user_address}","Your City":"{!user_city}","Your State":"{!user_state}","Your Zip":"{!user_zip}","Your City, State Zip":"{!user_city_state_zip}","Your Company Name":"{!user_company_name}","Your Company Email":"{!user_company_email}","Your Company Address":"{!user_company_address}","Your Company City":"{!user_company_city}","Your Company State":"{!user_company_state}","Your Company Zip":"{!user_company_zip}","Your Company Phone":"{!user_company_phone}","Your Company Fax":"{!user_company_fax}"}),{"Your Company Website":"{!user_website_url}","Current Date":"{!current_date}","Owner First Name":"{!owner_first_name}","Owner Last Name":"{!owner_last_name}","Mailing Address":"{!mailing_address}","Mailing City":"{!mailing_city}","Mailing State":"{!mailing_state}","Mailing Zip":"{!mailing_zip}","Property Address":"{!property_address}","Property City":"{!property_city}","Property State":"{!property_state}","Property Zip":"{!property_zip}","Decedent First Name":"{!decedent_first_name}","Decedent Last Name":"{!decedent_last_name}","Custom Field":"{!Replace with your field name}"})},this.extendXinhaKeywords=function(additions){var k,key,keywords,v,values,_results;null==additions&&(additions={}),_results=[];for(key in additions)values=additions[key],keywords=window[key],_results.push(function(){var _results1;_results1=[];for(k in values)v=values[k],_results1.push(keywords[k]=v);return _results1}());return _results},resetXinhaKeywords()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Quill.registerModule("custom_variables",function(quill,options){var variable,_i,_len,_ref,_results;for(_ref=options.variables,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)variable=_ref[_i],_results.push(new Quill.CustomVariableDropdown(quill,variable,options));return _results}),Quill.CustomVariableDropdown=function(){function CustomVariableDropdown(editor,variable,options){this.editor=editor,this.variable=variable,this.options=options,this._insertVariable=__bind(this._insertVariable,this),this.buildElement(),this.element.on("change",this._insertVariable)}return CustomVariableDropdown.prototype.buildElement=function(){var elementContainer,label,variable,_ref;this.element=$("<select>"),_ref=this._variables();for(label in _ref)variable=_ref[label],this.element.append("<option value='"+variable+"'>"+this._label(label)+"</option>");return elementContainer=$('<div class="selector">'),elementContainer.append("<span><span>"),elementContainer.append(this.element),$(this.options.container).append(elementContainer)},CustomVariableDropdown.prototype._insertVariable=function(){var range,value;return value=this.element.val(),value.blank()?void 0:(this.editor.focus(),range=this.editor.getSelection(),range&&(this.editor.deleteText(range.start,range.end),this.editor.insertText(range.start,value)),this.element.val(""))},CustomVariableDropdown.prototype._label=function(original){var labels;return labels={You:"Your Variables",Recipient:"Recipient Variables",Contact:"Contact Variables","Merge Fields":"Merge Fields"},labels[keywordsBuyerTitle]=""+keywordsBuyerTitle+" Variables",labels[keywordsPropertyTitle]=""+keywordsPropertyTitle+" Variables",labels[original]||original},CustomVariableDropdown.prototype._variables=function(){var dup,things;return dup=function(object){return $.extend({},object)},things={your:dup(xinha_keywords1),buyer:dup(xinha_keywords2),property:dup(xinha_keywords3),recipient:dup(xinha_keywords4),contact:dup(xinha_keywords5),offerbot:dup(xinha_keywords6),mergeFields:dup(xinha_keywords8)}[this.variable.camelCase()]},CustomVariableDropdown}()}.call(this);// A-to-Zee, all copyrights goes to:
var getUserMedia=null,webrtcDetectedBrowser=null,webrtcDetectedVersion=null,webrtcMinimumVersion=null,webrtcUtils=window.webrtcUtils||{};if(webrtcUtils.enableLogs||(webrtcUtils.enableLogs=!0),webrtcUtils.log||(webrtcUtils.log=function(){webrtcUtils.enableLogs&&("undefined"!=typeof module||"function"==typeof require&&"function"==typeof define||console.log.apply(console,arguments))}),webrtcUtils.extractVersion||(webrtcUtils.extractVersion=function(uastring,expr,pos){var match=uastring.match(expr);return match&&match.length>=pos&&parseInt(match[pos],10)}),"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return"mozSrcObject"in this?this.mozSrcObject:this._srcObject},set:function(stream){"mozSrcObject"in this?this.mozSrcObject=stream:(this._srcObject=stream,this.src=stream?URL.createObjectURL(stream):null)}}),getUserMedia=window.navigator&&window.navigator.getUserMedia),"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){if(webrtcDetectedBrowser="firefox",webrtcDetectedVersion=webrtcUtils.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),webrtcMinimumVersion=31,getUserMedia=function(constraints,onSuccess,onError){var constraintsToFF37=function(c){if("object"!=typeof c||c.require)return c;var require=[];return Object.keys(c).forEach(function(key){if("require"!==key&&"advanced"!==key&&"mediaSource"!==key){var r=c[key]="object"==typeof c[key]?c[key]:{ideal:c[key]};if((void 0!==r.min||void 0!==r.max||void 0!==r.exact)&&require.push(key),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:c[key]=r.exact,delete r.exact),void 0!==r.ideal){c.advanced=c.advanced||[];var oc={};oc[key]="number"==typeof r.ideal?{min:r.ideal,max:r.ideal}:r.ideal,c.advanced.push(oc),delete r.ideal,Object.keys(r).length||delete c[key]}}}),require.length&&(c.require=require),c};return 38>webrtcDetectedVersion&&(webrtcUtils.log("spec: "+JSON.stringify(constraints)),constraints.audio&&(constraints.audio=constraintsToFF37(constraints.audio)),constraints.video&&(constraints.video=constraintsToFF37(constraints.video)),webrtcUtils.log("ff37: "+JSON.stringify(constraints))),navigator.mozGetUserMedia(constraints,onSuccess,onError)},navigator.getUserMedia=getUserMedia,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:requestUserMedia,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(resolve){var infos=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];resolve(infos)})},41>webrtcDetectedVersion){var orgEnumerateDevices=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return orgEnumerateDevices().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){webrtcDetectedBrowser="chrome",webrtcDetectedVersion=webrtcUtils.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),webrtcMinimumVersion=38;var constraintsToChrome=function(c){if("object"!=typeof c||c.mandatory||c.optional)return c;var cc={};return Object.keys(c).forEach(function(key){if("require"!==key&&"advanced"!==key&&"mediaSource"!==key){var r="object"==typeof c[key]?c[key]:{ideal:c[key]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var oldname=function(prefix,name){return prefix?prefix+name.charAt(0).toUpperCase()+name.slice(1):"deviceId"===name?"sourceId":name};if(void 0!==r.ideal){cc.optional=cc.optional||[];var oc={};"number"==typeof r.ideal?(oc[oldname("min",key)]=r.ideal,cc.optional.push(oc),oc={},oc[oldname("max",key)]=r.ideal,cc.optional.push(oc)):(oc[oldname("",key)]=r.ideal,cc.optional.push(oc))}void 0!==r.exact&&"number"!=typeof r.exact?(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname("",key)]=r.exact):["min","max"].forEach(function(mix){void 0!==r[mix]&&(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname(mix,key)]=r[mix])})}}),c.advanced&&(cc.optional=(cc.optional||[]).concat(c.advanced)),cc};if(getUserMedia=function(constraints,onSuccess,onError){return constraints.audio&&(constraints.audio=constraintsToChrome(constraints.audio)),constraints.video&&(constraints.video=constraintsToChrome(constraints.video)),webrtcUtils.log("chrome: "+JSON.stringify(constraints)),navigator.webkitGetUserMedia(constraints,onSuccess,onError)},navigator.getUserMedia=getUserMedia,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:requestUserMedia}),navigator.mediaDevices.getUserMedia){var origGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(c){return webrtcUtils.log("spec:   "+JSON.stringify(c)),c.audio=constraintsToChrome(c.audio),c.video=constraintsToChrome(c.video),webrtcUtils.log("chrome: "+JSON.stringify(c)),origGetUserMedia(c)}}else navigator.mediaDevices.getUserMedia=function(constraints){return requestUserMedia(constraints)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){webrtcUtils.log("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){webrtcUtils.log("Dummy mediaDevices.removeEventListener called.")})}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(webrtcUtils.log("This appears to be Edge"),webrtcDetectedBrowser="edge",webrtcDetectedVersion=webrtcUtils.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),webrtcMinimumVersion=12):webrtcUtils.log("Browser does not appear to be WebRTC-capable");else webrtcDetectedBrowser="not a browser";"undefined"!=typeof module?module.exports={getUserMedia:getUserMedia,webrtcDetectedBrowser:webrtcDetectedBrowser,webrtcDetectedVersion:webrtcDetectedVersion,webrtcMinimumVersion:webrtcMinimumVersion,webrtcUtils:webrtcUtils}:"function"==typeof require&&"function"==typeof define&&define([],function(){return{getUserMedia:getUserMedia,webrtcDetectedBrowser:webrtcDetectedBrowser,webrtcDetectedVersion:webrtcDetectedVersion,webrtcMinimumVersion:webrtcMinimumVersion,webrtcUtils:webrtcUtils}}),RecordRTC.getFromDisk=function(type,callback){if(!callback)throw"callback is mandatory.";console.log("Getting recorded "+("all"===type?"blobs":type+" blob ")+" from disk!"),DiskStorage.Fetch(function(dataURL,_type){"all"!==type&&_type===type+"Blob"&&callback&&callback(dataURL),"all"===type&&callback&&callback(dataURL,_type.replace("Blob",""))})},RecordRTC.writeToDisk=function(options){console.log("Writing recorded blob(s) to disk!"),options=options||{},options.audio&&options.video&&options.gif?options.audio.getDataURL(function(audioDataURL){options.video.getDataURL(function(videoDataURL){options.gif.getDataURL(function(gifDataURL){DiskStorage.Store({audioBlob:audioDataURL,videoBlob:videoDataURL,gifBlob:gifDataURL})})})}):options.audio&&options.video?options.audio.getDataURL(function(audioDataURL){options.video.getDataURL(function(videoDataURL){DiskStorage.Store({audioBlob:audioDataURL,videoBlob:videoDataURL})})}):options.audio&&options.gif?options.audio.getDataURL(function(audioDataURL){options.gif.getDataURL(function(gifDataURL){DiskStorage.Store({audioBlob:audioDataURL,gifBlob:gifDataURL})})}):options.video&&options.gif?options.video.getDataURL(function(videoDataURL){options.gif.getDataURL(function(gifDataURL){DiskStorage.Store({videoBlob:videoDataURL,gifBlob:gifDataURL})})}):options.audio?options.audio.getDataURL(function(audioDataURL){DiskStorage.Store({audioBlob:audioDataURL})}):options.video?options.video.getDataURL(function(videoDataURL){DiskStorage.Store({videoBlob:videoDataURL})}):options.gif&&options.gif.getDataURL(function(gifDataURL){DiskStorage.Store({gifBlob:gifDataURL})})},"undefined"!=typeof module&&(module.exports=RecordRTC),"function"==typeof define&&define.amd&&define("RecordRTC",[],function(){return RecordRTC}),MRecordRTC.getFromDisk=RecordRTC.getFromDisk,MRecordRTC.writeToDisk=RecordRTC.writeToDisk;var requestAnimationFrame=window.requestAnimationFrame;"undefined"==typeof requestAnimationFrame&&("undefined"!=typeof webkitRequestAnimationFrame&&(requestAnimationFrame=webkitRequestAnimationFrame),"undefined"!=typeof mozRequestAnimationFrame&&(requestAnimationFrame=mozRequestAnimationFrame));var cancelAnimationFrame=window.cancelAnimationFrame;"undefined"==typeof cancelAnimationFrame&&("undefined"!=typeof webkitCancelAnimationFrame&&(cancelAnimationFrame=webkitCancelAnimationFrame),"undefined"!=typeof mozCancelAnimationFrame&&(cancelAnimationFrame=mozCancelAnimationFrame));var AudioContext=window.AudioContext;"undefined"==typeof AudioContext&&("undefined"!=typeof webkitAudioContext&&(AudioContext=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(AudioContext=mozAudioContext));var URL=window.URL;if("undefined"==typeof URL&&"undefined"!=typeof webkitURL&&(URL=webkitURL),"undefined"==typeof navigator)throw'Please make sure to define a global variable named as "navigator"';"undefined"!=typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!=typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia);var isEdge=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),isOpera=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),isChrome=!isOpera&&!isEdge&&!!navigator.webkitGetUserMedia,MediaStream=window.MediaStream;"undefined"==typeof MediaStream&&"undefined"!=typeof webkitMediaStream&&(MediaStream=webkitMediaStream),"undefined"!=typeof MediaStream&&("getVideoTracks"in MediaStream.prototype||(MediaStream.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var tracks=[];return this.getTracks.forEach(function(track){-1!==track.kind.toString().indexOf("video")&&tracks.push(track)}),tracks},MediaStream.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var tracks=[];return this.getTracks.forEach(function(track){-1!==track.kind.toString().indexOf("audio")&&tracks.push(track)}),tracks}),"stop"in MediaStream.prototype||(MediaStream.prototype.stop=function(){this.getAudioTracks().forEach(function(track){track.stop&&track.stop()}),this.getVideoTracks().forEach(function(track){track.stop&&track.stop()})})),"undefined"!=typeof location&&0===location.href.indexOf("file:")&&console.error("Please load this HTML file on HTTP or HTTPS.");var Storage={};"undefined"!=typeof AudioContext?Storage.AudioContext=AudioContext:"undefined"!=typeof webkitAudioContext&&(Storage.AudioContext=webkitAudioContext);var Whammy=function(){function WhammyVideo(duration){this.frames=[],this.duration=duration||1,this.quality=.8}function processInWebWorker(_function){var blob=URL.createObjectURL(new Blob([_function.toString(),"this.onmessage =  function (e) {"+_function.name+"(e.data);}"],{type:"application/javascript"})),worker=new Worker(blob);return URL.revokeObjectURL(blob),worker}function whammyInWebWorker(frames){function ArrayToWebM(frames){var info=checkFrames(frames);if(!info)return[];for(var clusterMaxDuration=3e4,EBML=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:doubleToString(info.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:info.width,id:176},{data:info.height,id:186}]}]}]}]}],frameNumber=0,clusterTimecode=0;frameNumber<frames.length;){var clusterFrames=[],clusterDuration=0;do clusterFrames.push(frames[frameNumber]),clusterDuration+=frames[frameNumber].duration,frameNumber++;while(frameNumber<frames.length&&clusterMaxDuration>clusterDuration);var clusterCounter=0,cluster={id:524531317,data:getClusterData(clusterTimecode,clusterCounter,clusterFrames)};EBML[1].data.push(cluster),clusterTimecode+=clusterDuration}return generateEBML(EBML)}function getClusterData(clusterTimecode,clusterCounter,clusterFrames){return[{data:clusterTimecode,id:231}].concat(clusterFrames.map(function(webp){var block=makeSimpleBlock({discardable:0,frame:webp.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(clusterCounter)});return clusterCounter+=webp.duration,{data:block,id:163}}))}function checkFrames(frames){if(!frames[0])return postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."}),void 0;for(var width=frames[0].width,height=frames[0].height,duration=frames[0].duration,i=1;i<frames.length;i++)duration+=frames[i].duration;return{duration:duration,width:width,height:height}}function numToBuffer(num){for(var parts=[];num>0;)parts.push(255&num),num>>=8;return new Uint8Array(parts.reverse())}function strToBuffer(str){return new Uint8Array(str.split("").map(function(e){return e.charCodeAt(0)}))}function bitsToBuffer(bits){var data=[],pad=bits.length%8?new Array(9-bits.length%8).join("0"):"";bits=pad+bits;for(var i=0;i<bits.length;i+=8)data.push(parseInt(bits.substr(i,8),2));return new Uint8Array(data)}function generateEBML(json){for(var ebml=[],i=0;i<json.length;i++){var data=json[i].data;"object"==typeof data&&(data=generateEBML(data)),"number"==typeof data&&(data=bitsToBuffer(data.toString(2))),"string"==typeof data&&(data=strToBuffer(data));var len=data.size||data.byteLength||data.length,zeroes=Math.ceil(Math.ceil(Math.log(len)/Math.log(2))/8),sizeToString=len.toString(2),padded=new Array(7*zeroes+7+1-sizeToString.length).join("0")+sizeToString,size=new Array(zeroes).join("0")+"1"+padded;ebml.push(numToBuffer(json[i].id)),ebml.push(bitsToBuffer(size)),ebml.push(data)}return new Blob(ebml,{type:"video/webm"})}function makeSimpleBlock(data){var flags=0;if(data.keyframe&&(flags|=128),data.invisible&&(flags|=8),data.lacing&&(flags|=data.lacing<<1),data.discardable&&(flags|=1),data.trackNum>127)throw"TrackNumber > 127 not supported";var out=[128|data.trackNum,data.timecode>>8,255&data.timecode,flags].map(function(e){return String.fromCharCode(e)}).join("")+data.frame;return out}function parseWebP(riff){for(var VP8=riff.RIFF[0].WEBP[0],frameStart=VP8.indexOf("*"),i=0,c=[];4>i;i++)c[i]=VP8.charCodeAt(frameStart+3+i);var width,height,tmp;return tmp=c[1]<<8|c[0],width=16383&tmp,tmp=c[3]<<8|c[2],height=16383&tmp,{width:width,height:height,data:VP8,riff:riff}}function getStrLength(string,offset){return parseInt(string.substr(offset+4,4).split("").map(function(i){var unpadded=i.charCodeAt(0).toString(2);return new Array(8-unpadded.length+1).join("0")+unpadded}).join(""),2)}function parseRIFF(string){for(var offset=0,chunks={};offset<string.length;){var id=string.substr(offset,4),len=getStrLength(string,offset),data=string.substr(offset+4+4,len);offset+=8+len,chunks[id]=chunks[id]||[],"RIFF"===id||"LIST"===id?chunks[id].push(parseRIFF(data)):chunks[id].push(data)}return chunks}function doubleToString(num){return[].slice.call(new Uint8Array(new Float64Array([num]).buffer),0).map(function(e){return String.fromCharCode(e)}).reverse().join("")}var webm=new ArrayToWebM(frames.map(function(frame){var webp=parseWebP(parseRIFF(atob(frame.image.slice(23))));return webp.duration=frame.duration,webp}));postMessage(webm)}return WhammyVideo.prototype.add=function(frame,duration){if("canvas"in frame&&(frame=frame.canvas),"toDataURL"in frame&&(frame=frame.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(frame))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:frame,duration:duration||this.duration})},WhammyVideo.prototype.compile=function(callback){var webWorker=processInWebWorker(whammyInWebWorker);webWorker.onmessage=function(event){return event.data.error?(console.error(event.data.error),void 0):(callback(event.data),void 0)},webWorker.postMessage(this.frames)},{Video:WhammyVideo}}(),DiskStorage={init:function(){function createObjectStore(dataBase){dataBase.createObjectStore(self.dataStoreName)}function putInDB(){function getFromStore(portionName){transaction.objectStore(self.dataStoreName).get(portionName).onsuccess=function(event){self.callback&&self.callback(event.target.result,portionName)}}var transaction=db.transaction([self.dataStoreName],"readwrite");self.videoBlob&&transaction.objectStore(self.dataStoreName).put(self.videoBlob,"videoBlob"),self.gifBlob&&transaction.objectStore(self.dataStoreName).put(self.gifBlob,"gifBlob"),self.audioBlob&&transaction.objectStore(self.dataStoreName).put(self.audioBlob,"audioBlob"),getFromStore("audioBlob"),getFromStore("videoBlob"),getFromStore("gifBlob")}var self=this;if("undefined"==typeof indexedDB||"undefined"==typeof indexedDB.open)return console.error("IndexedDB API are not available in this browser."),void 0;"undefined"!=typeof webkitIndexedDB&&(indexedDB=webkitIndexedDB),"undefined"!=typeof mozIndexedDB&&(indexedDB=mozIndexedDB),"undefined"!=typeof OIndexedDB&&(indexedDB=OIndexedDB),"undefined"!=typeof msIndexedDB&&(indexedDB=msIndexedDB);var db,dbVersion=1,dbName=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),request=indexedDB.open(dbName,dbVersion);request.onerror=self.onError,request.onsuccess=function(){if(db=request.result,db.onerror=self.onError,db.setVersion)if(db.version!==dbVersion){var setVersion=db.setVersion(dbVersion);setVersion.onsuccess=function(){createObjectStore(db),putInDB()}}else putInDB();else putInDB()},request.onupgradeneeded=function(event){createObjectStore(event.target.result)}},Fetch:function(callback){return this.callback=callback,this.init(),this},Store:function(config){return this.audioBlob=config.audioBlob,this.videoBlob=config.videoBlob,this.gifBlob=config.gifBlob,this.init(),this},onError:function(error){console.error(JSON.stringify(error,null,"	"))},dataStoreName:"recordRTC",dbName:null};window.icons={mapMarker:'<svg aria-hidden="true" class="icon icon-map-markers-plain" height="33px" version="1.1" viewbox="0 0 26 33" width="26px"><path class="action-color" d="M13,0 C5.75466667,0 0,5.56831579 0,12.5816842 C0,19.5915789 10.2301333,33 13,33 C15.132,33 26,19.3866316 26,12.5816842 C26,5.77326316 20.2453333,0 13,0 L13,0 L13,0 Z"></path></svg>',selectAll:'<svg aria-hidden="true" class="icon icon-select-all" height="11px" version="1.1" viewbox="0 0 24 11" width="24px"><path d="M0,2.44 C0,1.094 1.095,0 2.44,0 L8.56,0 C9.906,0 11,1.095 11,2.44 L11,8.56 C11,9.906 9.905,11 8.56,11 L2.44,11 C1.094,11 0,9.905 0,8.56 L0,2.44 L0,2.44 Z M3,4.804 L4.5,6.3 L8,2.8 L9,3.8 L4.5,8.3 L2,5.798 L3,4.804 L3,4.804 Z M13,2.44 C13,1.094 14.095,0 15.44,0 L21.56,0 C22.906,0 24,1.095 24,2.44 L24,8.56 C24,9.906 22.905,11 21.56,11 L15.44,11 C14.094,11 13,9.905 13,8.56 L13,2.44 L13,2.44 Z M16,4.804 L17.5,6.3 L21,2.8 L22,3.8 L17.5,8.3 L15,5.798 L16,4.804 L16,4.804 Z" fill-rule="evenodd"></path></svg>',sort:'<svg aria-hidden="true" class="icon icon-sort" height="4px" version="1.1" viewbox="0 0 7 4" width="7px"><polygon points="0 0.5 1.5 0 3.5 2 5.505 0 7 0.5 3.5 4"></polygon></svg>'},function(){this.Colors={darken:function(hexColor,scalefactor){return this.lighten(hexColor,1/scalefactor)},lighten:function(hexColor,scalefactor){var a,i;if(a=void 0,i=void 0,0>scalefactor||"string"!=typeof hexColor)return hexColor;if(hexColor=hexColor.replace(/[^0-9a-f]+/gi,""),3===hexColor.length)a=hexColor.split("");else{if(6!==hexColor.length)return hexColor;a=hexColor.match(/(\w{2})/g)}for(i=0;i<a.length;)2===a[i].length?a[i]=parseInt(a[i],16):(a[i]=parseInt(a[i],16),a[i]=16*a[i]+a[i]),i++;return this.rgbToHex(a,scalefactor)},rgbToHex:function(rgb,scalefactor){var i;for(i=0;i<rgb.length;)rgb[i]=this._relsizeinv(this._relsize(rgb[i])*scalefactor),rgb[i]=Math.floor(rgb[i]).toString(16),1===rgb[i].length&&(rgb[i]="0"+rgb[i]),i++;return rgb.join("").slice(0,6)},_relsize:function(a){return 255===a?1/0:a/(255-a)},_relsizeinv:function(y){return 1/0===y?255:255*y/(1+y)}}}.call(this),function(){this.currencyFormat=function(value,precision){var regex;return null==precision&&(precision=2),value=value.toString().replace(/\$|,/g,""),regex=0===precision?/(\d)(?=(\d{3})+)/g:/(\d)(?=(\d{3})+\.)/g,"$"+parseFloat(value).toFixed(precision).replace(regex,"$1,")}}.call(this),function(){var Deletion;Deletion=function(){function Deletion(){$(document).on("ajax:success","a[data-remove]",this._removeElement)}return Deletion.prototype._removeElement=function(event){var selector,trigger;return trigger=$(event.target),selector=trigger.data("remove"),trigger.closest(selector).remove()},Deletion}(),new Deletion}.call(this),function(){window.module=function(name,methods){var method,methodName,mod;null==methods&&(methods={}),mod=window[name]=window[name]||{};for(methodName in methods)method=methods[methodName],mod[methodName]=method;return mod},Function.prototype.include=function(mod){var method,methodName,_results;_results=[];for(methodName in mod)method=mod[methodName],_results.push(this.prototype[methodName]=method);return _results},Function.prototype.module=function(name){return this[name]=this[name]||{}},String.prototype.blank=function(){return""===this.strip()},String.prototype.camelCase=function(){var part,parts,result,_i,_len;for(parts=this.split(/[-_\W]/),result=parts.shift(),_i=0,_len=parts.length;_len>_i;_i++)part=parts[_i],result+=part.titleize();return result},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.dasherize=function(){return this.underscore().replace(/_/g,"-")},String.templatePattern=new RegExp("#{([^{}]*)}","g"),String.prototype.evaluate=function(object){return null==object&&(object={}),this.replace(String.templatePattern,function(a,b){var r;return r=object[b],"string"==typeof r||"number"==typeof r?r:""})},String.prototype.pluralize=function(n){var nameParts,reverseName;return n&&1===n?this:this.blank()?"":this._pluralName?this._pluralName:(reverseName=this.reverse(),this._pluralName="y"===reverseName[0]?(nameParts=reverseName.split(""),nameParts.shift(),""+nameParts.reverse().join("")+"ies"):""+this+"s",this._pluralName.replace(/ss$/,"s"))},String.prototype.reverse=function(){return this.split("").reverse().join("")},String.prototype.singularize=function(){var reverseName;return this.blank()?"":this._singularName?this._singularName:(reverseName=this.reverse().toLowerCase(),this._singularName="sei"===reverseName.slice(0,3)?(""+this).replace(/ies/i,"y"):this.slice(0,this.length-1))},String.prototype.strip=function(){return this.replace(/^\s*(.*?)\s*?$/,function(match,m1){return m1})},String.prototype.stripHTML=function(){return this.replace(/\<.*?\>(.*?)\<\/.*?\>/g,"<br>$1<br>").replace(/\<br\>/g,"\n").replace(/\<\/br\>/g,"\n").replace(/\<br\/\>/g,"\n").replace(/\n+/g,"\n").replace(/\&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").strip()},String.prototype.titleize=function(){var s;return s=this.replace(/[-_ ]+/g," "),s.replace(/\b(\w)/g,function(txt){return txt.toUpperCase()})},String.prototype.toUrlParams=function(){var jsonString;return this.blank()?{}:(jsonString='{"'+decodeURI(this).replace(/"/g,'\\"').replace(/&/g,'","').replace(/\=/g,'":"')+'"}',JSON.parse(jsonString))},String.prototype.truncate=function(length,omission){return null==length&&(length=30),null==omission&&(omission="..."),length>=this.length?""+this:this.slice(0,length)+omission},String.prototype.underscore=function(){return this.strip().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},Array.prototype.any=function(){return this.length>0},Array.prototype.clear=function(){for(;this.length>0;)this.pop();return null},Array.prototype.detect=function(callback){var object,result,_i,_len;for(result=null,_i=0,_len=this.length;_len>_i&&(object=this[_i],callback(object)&&(result=object),!result);_i++);return result},Array.prototype.dup=function(){return[].concat(this)},Array.prototype.first=function(){return this[0]},Array.prototype.include=function(item){return-1!==$.inArray(item,this)},Array.prototype.last=function(){return this[this.length-1]},Array.prototype.reject=function(callback){var object,results,_i,_len;for(results=[],_i=0,_len=this.length;_len>_i;_i++)object=this[_i],callback(object)||results.push(object);return results},Array.prototype.remove=function(item){return this.include(item)&&this.splice($.inArray(item,this),1),this},Array.prototype.select=function(callback){var object,results,_i,_len;for(results=[],_i=0,_len=this.length;_len>_i;_i++)object=this[_i],callback(object)&&results.push(object);return results},Array.prototype.uniq=function(){var object,results,_i,_len;for(results=[],_i=0,_len=this.length;_len>_i;_i++)object=this[_i],results.include(object)||results.push(object);return results},RegExp.escape=function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},this.uniqueId=function(){return parseInt(1e6*Math.random($.now()))},this.commaize=function(number){var cents,dollars,result;return dollars=(number+"").split(".")[0],cents=(number+"").split(".")[1],result=dollars.reverse().replace(/\d{3}/g,function(m){return""+m+","}).reverse(),cents&&(1===cents.length&&(cents+="0"),cents=cents.slice(0,2),result+="."+cents),result.replace(/^,/,"")},this.numberToCurrency=function(number){var value;return number=Math.round(100*parseFloat(number))/100,value=this.commaize(number),value.match(/\./)||(value+=".00"),"$"+value},null==window.console&&(this.console={log:function(){}}),this.constructorName=function(object){return null!=object.constructor.name?object.constructor.name:object.constructor.toString().match(/^function\s(.+)\(/)[1]},this.requireGoogleMaps=function(){return"undefined"!=typeof google&&null!==google||"test"===environment?void 0:(document.hideLoader=!0,$.getScript("https://www.google.com/jsapi").done(function(){return google.load("maps","3",{callback:"_googleMapCallback",other_params:"key="+google_maps_api_key}),document.hideLoader=!1}))},this._googleMapCallback=function(){return Observations.trigger("google-maps:available")}}.call(this),function(){var FormHelper,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};FormHelper=function(){function FormHelper(){this._serialize=__bind(this._serialize,this),this._enable=__bind(this._enable,this),this._disable=__bind(this._disable,this),this._change=__bind(this._change,this),this.hide=__bind(this.hide,this),this.invokeChangeHandlers=__bind(this.invokeChangeHandlers,this),this.findTarget=__bind(this.findTarget,this),this.element=$(".form-helper"),this.button=this.element.find(".action-button"),this.formCache={},this.eventHandlers(),this.invokeChangeHandlers()}return FormHelper.prototype.eventHandlers=function(){return $(document).on("pjax:success",this.invokeChangeHandlers),this.button.on("click",this.findTarget)},FormHelper.prototype.findTarget=function(e){var target;return e.preventDefault(),target=$(".content-container .form-helper-target:visible"),target.submit()},FormHelper.prototype.invokeChangeHandlers=function(){var forms,_this=this;return this.hide(),forms=$(".content-container .form-helper-target"),forms.each(function(i,form){return _this._serialize({target:form})}),forms.on("ajax:success",this._serialize),forms.on("ajax:beforeSend",this._disable),forms.on("ajax:complete",this._enable),forms.on("change","input, textarea, select",this._change),forms.on("click","input:checkbox",this._change)},FormHelper.prototype.hide=function(){return this.element.hide()},FormHelper.prototype.show=function(){return this.element.show()},FormHelper.prototype._change=function(event){var form;return form=$(event.target).parents("form"),form.exists()?form.serialize()===this.formCache[form[0]]?this.hide():this.show():void 0},FormHelper.prototype._disable=function(event){return $(event.target).attr("disabled","disabled")},FormHelper.prototype._enable=function(event){return $(event.target).removeAttr("disabled")},FormHelper.prototype._serialize=function(event){return this.formCache[event.target]=$(event.target).serialize(),this._change({target:$(event.target).children().first()})},FormHelper}(),jQuery(function(){return window.formHelper=new FormHelper})}.call(this),function(){var FormSubmission;FormSubmission=function(){function FormSubmission(){this._handleRemoteFormSubmission(),this._handleStandardFormSubmission()}return FormSubmission.prototype._beforeSend=function(event){var form,target;return form=$(event.currentTarget),target=$(event.target),target.is("a[data-remote]")?void 0:form.data("submitted")?(event.stop(),!1):form.data("submitted",!0)},FormSubmission.prototype._complete=function(event){var form;return form=$(event.currentTarget),form.data("submitted",null)},FormSubmission.prototype._handleRemoteFormSubmission=function(){var selector;return selector="form[data-remote]",$(document).on("ajax:beforeSend",selector,this._beforeSend),$(document).on("ajax:complete",selector,this._complete),$(document).on("ajax:error",selector,this._complete)},FormSubmission.prototype._handleStandardFormSubmission=function(){return $(document).on("submit","form:not([data-remote]):not([data-pjax])",this._submit)},FormSubmission.prototype._submit=function(event){var form;return form=$(event.currentTarget),form.data("submitted")&&event.stop(),form.data("submitted",!0)},FormSubmission}(),$(function(){return new FormSubmission})}.call(this),function(){this.image_paths={"map-markers/plain.png":"/images/map-markers/plain.png","map-markers/transparent.png":"/assets/map-markers/transparent-58f7d0829111b0fad06d3d90c20e53fe.png","comps/marker/selected.png":"/assets/comps/marker/selected-f8f407928b1cf63e1da9392e39d702e9.png","comps/marker/normal.png":"/assets/comps/marker/normal-8a436ec3e7b4a9f03ec83b9284dae1f7.png","misc/info-window-close.png":"/assets/misc/info-window-close-de51ad52a7f14f52fca15589de15e648.png","instant_leads/missing.png":"/assets/instant_leads/missing-12e239d78343f326a60c0e2caaccfeea.png"},this.image_path=function(name){return this.image_paths[name]},this.image_url=function(name){return"development"===environment?""+location.protocol+"//"+location.host+image_path(name):image_path(name)}}.call(this),function(){$.fn.exists=function(){return!!this.length},$.fn.inDOM=function(){return this.closest("body").exists()},$._idCounter=0,$.fn.identify=function(){return this.each(function(i,e){return $._idCounter++,""===e.id?$(e).attr("id","anonymous-element-"+$._idCounter):void 0}),this},$.fn.disable=function(){return this.attr("disabled","disabled")},$.fn.enable=function(){return this.removeAttr("disabled")},$.fn.reset=function(){var form,_i,_len,_ref,_results;for(_ref=this.filter("form"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)form=_ref[_i],_results.push(form.reset());return _results},$.fn.check=function(value){var c,checkboxes,method,_i,_j,_len,_len1;if(checkboxes=this.filter("input:checkbox"),checkboxes.exists()){if("mixed"===value){for(_i=0,_len=checkboxes.length;_len>_i;_i++)c=checkboxes[_i],c.checked=!1;return checkboxes.parents("span").removeClass("checked").addClass("mixed")}for(_j=0,_len1=checkboxes.length;_len1>_j;_j++)c=checkboxes[_j],c.checked=value;return method=value?"addClass":"removeClass",isMobile()?checkboxes.prev("span").removeClass("mixed")[method]("checked"):checkboxes.parents("span").removeClass("mixed")[method]("checked")}},$.fn.insertAtCaret=function(myValue){return this.each(function(){var endPos,scrollTop,startPos;return document.selection?(this.focus(),document.selection.createRange().text=myValue,this.focus()):this.selectionStart||"0"===this.selectionStart?(startPos=this.selectionStart,endPos=this.selectionEnd,scrollTop=this.scrollTop,this.value=this.value.substring(0,startPos)+myValue+this.value.substring(endPos,this.value.length),this.focus(),this.selectionStart=startPos+myValue.length,this.selectionEnd=startPos+myValue.length,this.scrollTop=scrollTop):(this.value+=myValue,this.focus())})},navigator.userAgent.match(/MSIE\s(6|7|8)/)||($.fn.ensureCompatability=function(){return this.filter("video,audio").each(function(i,e){var flash,type;return"undefined"!=typeof e.canPlayType&&(type={audio:"audio/mpeg",video:$(e).find("source").attr("type")}[e.tagName.toLowerCase()],flash=$(e).find("object"),flash.exists())?""===e.canPlayType(type)||window.chrome?(flash.detach(),$(e).replaceWith(flash)):flash.detach():void 0})}),$.fn.serializeObject=function(){var a,name,o,pair,value,_i,_len,_ref;for(o={},a=this.serializeArray(),_ref=this.serializeArray(),_i=0,_len=_ref.length;_len>_i;_i++)pair=_ref[_i],name=pair.name,value=pair.value,null!=o[name]?(o[name].push||(o[name]=[o[name]]),o[name].push(value||"")):o[name]=value||"";
return o},$.fn.croppedDataUrl=function(){var canvas,context,copy,cropBottom,cropHeight,cropLeft,cropRight,cropTop,cropWidth,data,e,height,isWhite,scanX,scanY,width;try{return canvas=this.filter("canvas").first(),context=canvas[0].getContext("2d"),height=canvas.height(),width=canvas.width(),data=context.getImageData(0,0,width,height).data,isWhite=function(x,y){var offset;return offset=width*y+x,0===data[4*offset+3]},scanY=function(fromTop){var range,x,y,_k,_l,_len,_ref,_results,_results1;for(range=fromTop?function(){_results=[];for(var _i=0;height>=0?height>_i:_i>height;height>=0?_i++:_i--)_results.push(_i);return _results}.apply(this):function(){_results1=[];for(var _j=_ref=height-1;0>=_ref?0>=_j:_j>=0;0>=_ref?_j++:_j--)_results1.push(_j);return _results1}.apply(this),_k=0,_len=range.length;_len>_k;_k++)for(y=range[_k],x=_l=0;width>=0?width>_l:_l>width;x=width>=0?++_l:--_l)if(!isWhite(x,y))return y},scanX=function(fromLeft){var range,x,y,_k,_l,_len,_ref,_results,_results1;for(range=fromLeft?function(){_results=[];for(var _i=0;width>=0?width>_i:_i>width;width>=0?_i++:_i--)_results.push(_i);return _results}.apply(this):function(){_results1=[];for(var _j=_ref=width-1;0>=_ref?0>=_j:_j>=0;0>=_ref?_j++:_j--)_results1.push(_j);return _results1}.apply(this),_k=0,_len=range.length;_len>_k;_k++)for(x=range[_k],y=_l=0;height>=0?height>_l:_l>height;y=height>=0?++_l:--_l)if(!isWhite(x,y))return x},cropTop=scanY(!0),cropBottom=scanY(!1),cropLeft=scanX(!0),cropRight=scanX(!1),cropWidth=cropRight-cropLeft,cropHeight=cropBottom-cropTop,copy=$("<canvas>").attr({width:cropWidth,height:cropHeight}),copy[0].getContext("2d").drawImage(canvas[0],cropLeft,cropTop,cropWidth,cropHeight,0,0,cropWidth,cropHeight),copy[0].toDataURL()}catch(_error){return e=_error,console.log(e)}},$.equalArrays=function(a,b){return a.length===b.length&&!$(a).not(b).exists()&&!$(b).not(a).exists()},$.replaceDocument=function(content){return document.open("text/html"),document.write(content),document.close()},$.escapeHtml=function(unsafe){return $("<div />").text(unsafe).html()},$.unescapeHtml=function(safe){return $("<div />").html(safe).text()},$.Event.prototype.stop=function(){return this.preventDefault(),this.stopPropagation()}}.call(this),function(){module("Observations",{decommissionSimilarInstances:function(namespace){var eventName,_this=this;return null==namespace&&(namespace=""),eventName=""+namespace+constructorName(this)+":decommission",this._trigger(eventName),this.on(eventName,function(){return _this.stopAllObservations(),null!=_this._afterDecommission?_this._afterDecommission():void 0})},trigger:function(eventName,memo){return this._trigger(eventName,memo)},_trigger:function(eventName,memo){return this._observationElement().trigger(eventName,memo)},observations:function(){return null==this._observations&&(this._observations={}),this._observations},off:function(eventName,handler){return this._observationElement().off(eventName,handler),delete this.observations()[eventName]},on:function(eventName,handler){var _base;return this._observationElement().on(eventName,handler),null==(_base=this.observations())[eventName]&&(_base[eventName]=[]),this.observations()[eventName].push(handler)},stopAllObservations:function(){var eventName,handler,handlers,_ref,_results;_ref=this.observations(),_results=[];for(eventName in _ref)handlers=_ref[eventName],_results.push(function(){var _i,_len,_results1;for(_results1=[],_i=0,_len=handlers.length;_len>_i;_i++)handler=handlers[_i],_results1.push(this.off(eventName,handler));return _results1}.call(this));return _results},_observationElement:function(){return $(document)}})}.call(this),function(){var Timezone,timezone,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Timezone=function(){function Timezone(){this.set=__bind(this.set,this)}return Timezone.prototype.set=function(){return document.cookie="timezone="+this._offset()+"; expires="+this._expires()+"; path=/"},Timezone.prototype._expires=function(){var date;return date=new Date,date.setTime(date.getTime()+864e8),date.toUTCString()},Timezone.prototype._offset=function(){var date;return date=new Date,-60*date.getTimezoneOffset()},Timezone}(),timezone=new Timezone,timezone.set(),$(window).on("unload",timezone.set)}.call(this),function(){var Uniform,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Uniform=function(){function Uniform(){this._resetForm=__bind(this._resetForm,this),this._toggleRadio=__bind(this._toggleRadio,this),this._toggleCheckbox=__bind(this._toggleCheckbox,this),this._fileSelect=__bind(this._fileSelect,this),this._changeSelect=__bind(this._changeSelect,this),this._changeFiles=__bind(this._changeFiles,this),this.refreshStates=__bind(this.refreshStates,this),this.refresh=__bind(this.refresh,this),$(document).on("uniform:refresh",this.refresh),$(document).on("uniform:refreshStates",this.refresh),this.observeElements(),this.refresh()}return Uniform.prototype.refresh=function(){return this.assignElements(),this.applyStates()},Uniform.prototype.refreshStates=function(){return this.applyStates()},Uniform.prototype.assignElements=function(){return this.checkboxes=$(".checker input:checkbox:not([data-uniform])").attr("data-uniform","true"),this.files=$(".uploader input:file:not([data-uniform])").attr("data-uniform","true"),this.radios=$(".radio input:radio:not([data-uniform])").attr("data-uniform","true"),this.selects=$(".selector select:not([data-uniform])").attr("data-uniform","true")},Uniform.prototype.observeElements=function(){return $(document).on("click",".checker input:checkbox",this._toggleCheckbox),$(document).on("click",".uploader",this._fileSelect),$(document).on("change",".uploader input:file",this._changeFiles),$(document).on("change",".radio input:radio",this._toggleRadio),$(document).on("change uniform",".selector select",this._changeSelect),$(document).on("reset","form",this._resetForm),$(document).on("pjax:complete",this.refresh)},Uniform.prototype.applyStates=function(){var checkbox,radio,select,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2,_results;for(_ref=this.checkboxes,_i=0,_len=_ref.length;_len>_i;_i++)checkbox=_ref[_i],this._toggleCheckbox({target:checkbox});for(_ref1=this.selects,_j=0,_len1=_ref1.length;_len1>_j;_j++)select=_ref1[_j],this._changeSelect({target:select});for(_ref2=this.radios,_results=[],_k=0,_len2=_ref2.length;_len2>_k;_k++)radio=_ref2[_k],_results.push(this._toggleRadio({target:radio}));return _results},Uniform.prototype._changeFiles=function(event){var files,input,span,text;return input=$(event.target),files=input[0].files.length,files||(files="No"),span=input.prevAll("span"),span.exists()||(span=input.nextAll("span.filename")),text=1===files?"1 File Selected":""+files+" Files Selected",span.text(text)},Uniform.prototype._changeSelect=function(event){var errors,select,selected,span;return select=$(event.target),span=select.prevAll("span"),span.exists()||(errors=select.parents(".field_with_errors"),errors.exists()&&(span=errors.prevAll("span"))),selected=select.find("option:selected"),span.removeClass("is-placeholder"),""===selected.val()&&span.addClass("is-placeholder"),span.text(select.find("option:selected").text())},Uniform.prototype._fileSelect=function(event){var input;if(!$(event.target).is("input:file"))return input=$(event.currentTarget).find("input:file"),input.click()},Uniform.prototype._toggleCheckbox=function(event){var checkbox,span;return checkbox=$(event.target),span=checkbox.prevAll("span"),span.exists()||(span=checkbox.closest("span")),span.removeClass("mixed"),checkbox.is(":checked")?span.addClass("checked"):span.removeClass("checked")},Uniform.prototype._toggleRadio=function(event){var name,radio,radios,span;return radio=$(event.target),name=radio.attr("name"),span=radio.prevAll("span"),radios=$('input:radio[name="'+name+'"]').not(":checked"),span.exists()?radios.prevAll("span").removeClass("checked"):(span=radio.closest("span"),radios.closest("span").removeClass("checked")),radio.is(":checked")?span.addClass("checked"):void 0},Uniform.prototype._resetForm=function(event){var _this=this;return setTimeout(function(){var checkbox,file,form,radio,select,_i,_j,_k,_l,_len,_len1,_len2,_len3,_ref,_ref1,_ref2,_ref3,_results;for(form=$(event.target),_ref=form.find("input:file"),_i=0,_len=_ref.length;_len>_i;_i++)file=_ref[_i],_this._changeFiles({target:file});for(_ref1=form.find("select"),_j=0,_len1=_ref1.length;_len1>_j;_j++)select=_ref1[_j],_this._changeSelect({target:select});for(_ref2=form.find("input:checkbox"),_k=0,_len2=_ref2.length;_len2>_k;_k++)checkbox=_ref2[_k],_this._toggleCheckbox({target:checkbox});for(_ref3=form.find("input:radio"),_results=[],_l=0,_len3=_ref3.length;_len3>_l;_l++)radio=_ref3[_l],_results.push(_this._toggleRadio({target:radio}));return _results},10)},Uniform}(),$(function(){return new Uniform}),$.uniform=function(){return $(document).trigger("uniform:refresh")},$.uniformState=function(){return $(document).trigger("uniform:refresh")}}.call(this),function(){var accumulator;accumulator=new Object,"undefined"!=typeof pjax&&null!==pjax&&(pjax.on("beforeSend",function(){return accumulator.url=window.location.toString()}),pjax.on("error",function(event,xhr){return xhr&&xhr.responseText&&xhr.responseText.match(/You don't have permission to access/)?(event.preventDefault(),accumulator.url&&pjax.ensureUrl(accumulator.url),delete accumulator.url):void 0}))}.call(this),function(){$(document.body).on("click",".calendar-trigger",function(event){var element,error,input,trigger;trigger=$(event.currentTarget),element=trigger.parent(),input=element.find("input:text");try{return input.datepicker("show")}catch(_error){return error=_error,input.datepicker({showOn:"button"}),element.find("button.ui-datepicker-trigger").hide(),input.datepicker("show")}})}.call(this),function(){var ClipboardItem,createClipboardItems;ClipboardItem=function(){function ClipboardItem(element){var client;client=new ZeroClipboard(element,{moviePath:"/swf/zero-clipboard.swf"}),client.on("complete",this._copyComplete),client.on("mouseover",this._setupTooltip)}return ClipboardItem.prototype._copyComplete=function(){return $(this).find(".tooltip span").html("Copied!")},ClipboardItem.prototype._setupTooltip=function(){return $(this).find(".tooltip span").html("Copy To Clipboard")},ClipboardItem}(),createClipboardItems=function(){var e,elements,_i,_len,_results;if(elements=$("[data-clipboard-text]"),ZeroClipboard.detectFlashSupport()){for(_results=[],_i=0,_len=elements.length;_len>_i;_i++)e=elements[_i],_results.push(new ClipboardItem($(e)));return _results}return elements.hide()},$(createClipboardItems),pjax.on("success",createClipboardItems)}.call(this),function(g,i){var f={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},d:function(a){return a===Object(a)},e:function(a){return Array.prototype.slice.call(a)},c:Object.keys||function(a){var d=[],b="";for(b in a)a.hasOwnProperty(b)&&d.push(b);return d},a:function(a,d){return a===i?d:a}};window.cookie=function(){return cookie.get.apply(cookie,arguments)},cookie.set=function(a,d,b){if(f.d(a))for(var c in a)a.hasOwnProperty(c)&&this.set(c,a[c]);else{b=b||{},c=b.b||"";var e=typeof c,j=b.path?";path="+b.path:"",h=b.domain?";domain="+b.domain:"",b=b.f?";secure":"";"string"===e&&""!==c?c=";expires="+c:"number"==e?(e=new Date,e.setTime(e.getTime()+86400*c),c=";expires="+e.toGMTString()):c.hasOwnProperty("toGMTString")&&(c=";expires="+c.toGMTString()),g.cookie=escape(a)+"="+escape(d)+c+j+h+b}return this},cookie.remove=function(a){for(var a=f.isArray(a)?a:f.e(arguments),d=0,b=a.length;b>d;d++)this.set(a[d],"",{b:-1});return this},cookie.empty=function(){return this.remove(f.c(this.all()))},cookie.get=function(a,d){var d=d||i,b=this.all();if(f.isArray(a)){for(var c={},e=0,g=a.length;g>e;e++){var h=a[e];c[h]=f.a(b[h],d)}return c}return f.a(b[a],d)},cookie.all=function(){if(""===g.cookie)return{};for(var a=g.cookie.split("; "),d={},b=0,c=a.length;c>b;b++){var e=a[b].split("=");d[e[0]]=unescape(e[1])}return d},cookie.enabled=function(){var a="b"===cookie.set("a","b").get("a");return cookie.remove("a"),a}}(document);var Cookie=cookie;(function(){Observations.on("custom-dropdown:updated",function(event,data){var className,e,id,name,options,selects,_i,_len,_results;for(options=data.options,name=data.name,id=name.replace(/\|/g,"_"),className=name.replace(/\|/g,"\\|"),selects=$("select."+className),selects.exists()||(selects=$("select#"+id)),_results=[],_i=0,_len=selects.length;_len>_i;_i++)e=selects[_i],_results.push(CustomDropdown.alterSelect(e,options));return _results}),this.CustomDropdown={alterSelect:function(select,options){var currentValue,option,optionValue,value,_i,_len;for(select=$(select),currentValue=select.val(),option=select.find("option").first(),optionValue=option.attr("value"),select.empty(),optionValue.blank()&&select.append(option),_i=0,_len=options.length;_len>_i;_i++)value=options[_i],option=$("<option>").attr("value",value).text(value),select.append(option);return select.val(currentValue).change()}}}).call(this),function(){$(document).on("change","input[type=file][max_file_size]",function(event){var file,maxSize,maxSizeInMB,target,_i,_len,_ref,_results;if(target=$(event.currentTarget),0!==target[0].files.length){for(maxSize=parseFloat(target.attr("max_file_size")),maxSizeInMB=""+(maxSize/1024/1024).toFixed()+" MB",_ref=target[0].files,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)file=_ref[_i],file.size>maxSize?_results.push(setTimeout(function(){return Message.create().flash("Max file size is "+maxSizeInMB+", please choose a different file.","error"),target.val("").change()},250)):_results.push(void 0);return _results}})}.call(this),function(){this.Form={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Form.Conditional=function(){function Conditional(element,displayOptions,options){this.displayOptions=displayOptions,this.options=null!=options?options:{},this._change=__bind(this._change,this),this.element=$(element),this.currentConditional=this.displayOptions[this.element.val()],this.registerObservers(),this._change()}return Conditional.prototype.registerObservers=function(){return this.element.on("change",this._change)},Conditional.prototype._change=function(){var conditional,v,value,_ref;this.options.before&&this.options.before(this.currentConditional),this.currentConditional=null,value=this.element.val(),_ref=this.displayOptions;for(v in _ref)conditional=_ref[v],v!==value&&this._hideConditional(conditional);return this.currentConditional=this.displayOptions[value]||this.displayOptions._default,this.currentConditional&&this._showConditional(this.currentConditional),$(document).trigger("textareas:expand"),this.options.after?this.options.after(this.currentConditional):void 0},Conditional.prototype._hideConditional=function(conditionalElements){var elements;return elements=$("."+conditionalElements),elements.hide(),elements.find("input,select,textarea").disable()},Conditional.prototype._showConditional=function(conditionalElements){var elements;return elements=$("."+conditionalElements),elements.show(),elements.find("input,select,textarea").enable()},Conditional}(),this.FormConditional=Form.Conditional}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Form.Tooltips=function(){function Tooltips(elements){var e,_i,_len;for(_i=0,_len=elements.length;_len>_i;_i++)e=elements[_i],new Form.Tooltip($(e))}return Tooltips}(),Form.Tooltip=function(){function Tooltip(element){var trigger;this.element=element,this._show=__bind(this._show,this),this._hide=__bind(this._hide,this),trigger=this._triggerElement(),trigger.on("focus",this._show),trigger.on("blur",this._hide)}return Tooltip.prototype._hide=function(){return this.element.hide()},Tooltip.prototype._show=function(){return this.element.show()},Tooltip.prototype._triggerElement=function(){var e;return e=this.element.parents(".input"),e.exists()||(e=this.element.parents(".dropdown")),e.find("input").exists()?e.find("input"):e.find("textarea").exists()?e.find("textarea"):e.find("select").exists()?e.find("select"):this.element.closest("a")},Tooltip}()}.call(this),function(){var __slice=[].slice;this.GCObject=function(){function GCObject(){var args;args=1<=arguments.length?__slice.call(arguments,0):[],this.initialize.apply(this,args),GCObject.instances["new"].push(this)}return GCObject.idCounter=0,GCObject.instances={"new":[],ready:[]},GCObject.collect=function(){var instance,_i,_len,_ref;for(_ref=GCObject.instances.ready,_i=0,_len=_ref.length;_len>_i;_i++)instance=_ref[_i],instance.__gc();return GCObject.instances.ready=[]},GCObject.prepare=function(){return GCObject.instances.ready=GCObject.instances["new"].dup(),GCObject.instances["new"]=[]},GCObject.prototype.trigger=function(eventName,memo){return this._trigger(eventName,memo)},GCObject.prototype._trigger=function(eventName,memo){return this._observationElement().trigger(eventName,memo)},GCObject.prototype.observations=function(){return null==this._observations&&(this._observations={}),this._observations},GCObject.prototype.off=function(eventName,handler){return this._observationElement().off(eventName,handler),delete this.observations()[eventName]},GCObject.prototype.on=function(eventName,handler){var _base;return this._observationElement().on(eventName,handler),null==(_base=this.observations())[eventName]&&(_base[eventName]=[]),this.observations()[eventName].push(handler)},GCObject.prototype.stopAllObservations=function(){var eventName,handler,handlers,_ref,_results;_ref=this.observations(),_results=[];for(eventName in _ref)handlers=_ref[eventName],_results.push(function(){var _i,_len,_results1;for(_results1=[],_i=0,_len=handlers.length;_len>_i;_i++)handler=handlers[_i],_results1.push(this.off(eventName,handler));return _results1}.call(this));return _results},GCObject.prototype._observationElement=function(){return $(document)},GCObject.prototype.__gc=function(){var _this=this;return setTimeout(function(){var name,value;_this.stopAllObservations();for(name in _this)value=_this[name],delete _this[name];return _this._collected=!0},0)},GCObject}.call(this),pjax.on("send",GCObject.prepare),pjax.on("complete",GCObject.collect),pjax.on("popstate",GCObject.prepare),pjax.on("popped",GCObject.collect)}.call(this),function(){var gaJsHost,interval,script;"development"!==environment&&"test"!==environment&&"free"!==layout&&(gaJsHost="https:"===window.location.protocol?"https://ssl.":"http://www.",script=$("<script>").attr({type:"text/javascript",async:"async",src:""+gaJsHost+"google-analytics.com/ga.js"}),interval=setInterval(function(){var e;if("undefined"!=typeof _gat&&null!==_gat){clearInterval(interval);try{return _gat._getTracker("UA-17466830-1")._trackPageview(),pjax.on("success",function(){return window._gaq?_gaq.push(["_trackPageview",window.location.href]):void 0})}catch(_error){if(e=_error,"undefined"!=typeof console&&null!==console)return console.log(e)}}},10),$("body").append(script),$(window).on("load",function(){var endTime,time;if(window._pageLoadStart&&"undefined"!=typeof _gaq&&null!==_gaq)return endTime=$.now(),time=endTime-window._pageLoadStart,_gaq.push(["_trackTiming","Page","Page Load Time",time]),delete window._pageLoadStart}))}.call(this),function(){var Mailto,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Mailto=function(){function Mailto(){this._click=__bind(this._click,this),this._blur=__bind(this._blur,this),$(document).on("click","a[data-mailto]",this._click)}return Mailto.prototype._blur=function(){return clearTimeout(this.timeout),$(window).off("blur",this._blur)},Mailto.prototype._click=function(event){var anchor;return anchor=$(event.target).closest("a"),"test"===environment&&event.stop(),$(window).on("blur",this._blur),this.timeout=setTimeout(this._override(anchor),250)},Mailto.prototype._override=function(anchor){var _this=this;return function(anchor){return function(){return $(window).off("blur",_this._blur),top.modal.open(anchor.data("alternative"))}}(anchor)},Mailto}(),new Mailto}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ManageRows=function(_super){function ManageRows(){return _ref=ManageRows.__super__.constructor.apply(this,arguments)}return __extends(ManageRows,_super),ManageRows.prototype.initialize=function(options){return options=options||{},this.container=$(options.container),this.row=options.row,this.url=options.url,this.rowTemplate=options.rowTemplate,this.options={},this.options.beforeAdd=options.beforeAdd,this.options.afterAdd=options.afterAdd,this.options.afterRemove=options.afterRemove,this.registerEvents(this.container.find(this.row))},ManageRows.prototype.registerEvents=function(rows){var e,row,_i,_len,_results;for(_results=[],_i=0,_len=rows.length;_len>_i;_i++)e=rows[_i],row=$(e),this._addTrigger(row).on("click",this._addRow(row)),_results.push(this._removeTrigger(row).on("click",this._removeRow(row)));return _results},ManageRows.prototype._addRow=function(row){var _this=this;return function(event){var template;return event.stop(),_this.rowTemplate?(template=_this.rowTemplate,_this.options.beforeAdd&&(template=_this.options.beforeAdd(_this.rowTemplate)),_this._addSuccess(row)(template)):$.ajax({url:_this.url,data:defaultParams(),type:"post"}).done(_this._addSuccess(row))}},ManageRows.prototype._addSuccess=function(row){var _this=this;return function(html){var newRow;return row.after(html),newRow=row.next(),_this.registerEvents(newRow),_this.options.afterAdd?_this.options.afterAdd(newRow):void 0}},ManageRows.prototype._removeRow=function(row){var _this=this;return function(event){var input,selects;return event.stop(),_this.container.find(_this.row).length>1?row.remove():(input=_this._input(row),selects=row.find("select"),input.exists()&&input.val(""),selects.exists()&&selects.val("").change()),_this.options.afterRemove?_this.options.afterRemove(row):void 0}},ManageRows.prototype._addTrigger=function(row){return row.find(".add")},ManageRows.prototype._removeTrigger=function(row){return row.find(".remove")},ManageRows.prototype._input=function(row){return row.find("input")},ManageRows}(GCObject)}.call(this),function(){this.GoogleMap={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};GoogleMap.Base=function(){function Base(options){this._hideStreetViewTrigger=__bind(this._hideStreetViewTrigger,this),this.options=$.extend(this._defaultOptions(),options),this.initializeContainer(),this.initializeTriggers(),"undefined"!=typeof google&&null!==google&&(this.initializeMap(),this.observeMap(),this.gatherInitialDimensions(),this.options.skipReset||this.reset())}return Base.prototype.initializeContainer=function(){return this.container=$(this.options.container),this.element=$(this.options.element),this.elementWrapper="object"==typeof this.options.elementWrapper?this.options.elementWrapper:this.element.parents(this.options.elementWrapper)},Base.prototype.initializeMap=function(){return this.coordinates=new google.maps.LatLng(this.options.latitude,this.options.longitude),this.map=new google.maps.Map(this.element[0],{center:this.coordinates,zoom:this.options.zoom,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!0,scrollwheel:this.options.scrollwheel}),this.bounds=new google.maps.LatLngBounds,this.markers=[],this.streetView=this.map.getStreetView(),this.streetView.setPosition(this.coordinates)},Base.prototype.initializeTriggers=function(){return this.mapTrigger=$(this.options.mapTrigger),this.streetViewTrigger=$(this.options.streetViewTrigger)},Base.prototype.addToMap=function(collection){var coordinates,marker,object,_i,_len;for(_i=0,_len=collection.length;_len>_i;_i++)object=collection[_i],coordinates=object.coordinates?object.coordinates():null,coordinates&&(marker=object.mapMarker(this),this.bounds.extend(coordinates),google.maps.event.addListener(marker,"click",object.showMapInfoWindow),object.lastMarker=marker,this.markers.push(marker));return collection.any()?(this._closeLastInfoWindow(),this.map.fitBounds(this.bounds)):void 0},Base.prototype.addProperties=function(properties){return this.addToMap(properties)},Base.prototype.gatherInitialDimensions=function(){return this.originalHeight=this.element.height(),this.originalWidth=this.element.width()},Base.prototype.observeMap=function(){return this.mapTrigger.on("click",this._toggle),this.streetViewTrigger.on("click",this._toggleStreetView),google.maps.event.addListener(this.streetView,"closeclick",this._hideStreetViewTrigger)},Base.prototype.reset=function(){var m,_i,_len,_ref;for(this._closeLastInfoWindow(),null!=this.streetView&&this.streetView.setVisible(!1),"undefined"!=typeof google&&null!==google&&(this.bounds=new google.maps.LatLngBounds),_ref=this.markers,_i=0,_len=_ref.length;_len>_i;_i++)m=_ref[_i],m.setMap(null),m.label&&m.label.setMap(null);return this.markers=[],null!=this.map?this.map.setOptions({center:this.coordinates,zoom:this.options.zoom}):void 0},Base.prototype.showStreetView=function(mappableObject,trigger){var coordinates,streetViewService,_this=this;return streetViewService=new google.maps.StreetViewService,coordinates=mappableObject.coordinates(),streetViewService.getPanoramaByLocation(coordinates,50,function(data,status){return"ZERO_RESULTS"===status?trigger.replaceWith('<span class="no_street_view">Street view unavailable</span>'):(_this.streetView.setPosition(coordinates),_this.streetView.setVisible(!0),_this.streetViewTrigger.show(),_this._observeStreetView(coordinates))})},Base.prototype.staticMapUrl=function(){return new GoogleMap.StaticMapConversion(this).url()},Base.prototype.toggle=function(event){return this._toggle(event)},Base.prototype.toggleStreetView=function(event){return this._toggleStreetView(event)},Base.prototype._bearing=function(endLatLng,startLatLng){var DEGREE_PER_RADIAN,RADIAN_PER_DEGREE,angle,dlat,dlng;return DEGREE_PER_RADIAN=57.2957795,RADIAN_PER_DEGREE=.017453,dlat=endLatLng.lat()-startLatLng.lat(),dlng=endLatLng.lng()-startLatLng.lng(),angle=Math.atan2(dlng*Math.cos(endLatLng.lat()*RADIAN_PER_DEGREE),dlat)*DEGREE_PER_RADIAN,angle>=360&&(angle-=360),0>angle&&(angle+=360),angle},Base.prototype._closeLastInfoWindow=function(){return this.lastInfoWindow?this.lastInfoWindow.close():void 0},Base.prototype._defaultOptions=function(){return{element:"#google_map",elementWrapper:".map",container:null,mapTrigger:null,streetViewTrigger:null,skipReset:!1,hidden:!1,zoom:3,latitude:37.6922222,longitude:-97.3372222,scrollwheel:!0}},Base.prototype._hideStreetViewTrigger=function(){return this.streetViewTrigger.hide()},Base.prototype._observeStreetView=function(coordinates){var _this=this;return null==this.streetViewOriented&&(this.streetViewOriented={}),google.maps.event.addListener(this.streetView,"position_changed",function(){var angle;if(!_this.streetViewOriented[coordinates.toString()])return angle=_this._bearing(coordinates,_this.streetView.getPosition()),_this.streetView.setPov({heading:angle,pitch:0,zoom:1}),_this.streetViewOriented[coordinates.toString()]=!0})},Base.prototype._stopEvent=function(event){return event&&event.stop?event.stop():void 0},Base}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};GoogleMap.Dynamic=function(_super){function Dynamic(options){this._toggleStreetView=__bind(this._toggleStreetView,this),this._toggle=__bind(this._toggle,this),this._resize=__bind(this._resize,this),Dynamic.__super__.constructor.call(this,options),!this.options.hidden&&this.options.allowResize&&this.prepareResize()}return __extends(Dynamic,_super),Dynamic.prototype.openInfoWindow=function(mappableObject){var content;return this._closeLastInfoWindow(),content=mappableObject.infoWindowContent(),"string"!=typeof content&&(content=content[0]),this.lastInfoWindow=new InfoBubble({borderWidth:0,backgroundColor:"rgba(255, 255, 255, 0)",content:content,padding:"1px",position:mappableObject.coordinates(),shadowStyle:0}),this.lastInfoWindowObject=mappableObject,this.lastInfoWindow.open(this.map,mappableObject.lastMarker),mappableObject._obfuscate()},Dynamic.prototype.prepareResize=function(){return this.aspectRatio=this.originalWidth/this.originalHeight/1.3,$(window).on("resize",this._resize),this._resize()},Dynamic.prototype.resizeTo=function(width,height){return this.element.css({height:""+height+"px",width:""+width+"px"}),this.elementWrapper.css({height:""+(height+8)+"px",width:""+(width+8)+"px"}),google.maps.event.trigger(this.map,"resize"),this.bounds.isEmpty()||this.map.fitBounds(this.bounds),this.markers.any()?void 0:this.reset()},Dynamic.prototype._defaultOptions=function(){return $.extend({allowResize:!0},Dynamic.__super__._defaultOptions.call(this))},Dynamic.prototype._resize=function(){return"undefined"!=typeof google&&null!==google?(google.maps.event.trigger(this.map,"resize"),this.bounds.isEmpty()||this.map.fitBounds(this.bounds),this.markers.any()?void 0:this.reset()):void 0},Dynamic.prototype._toggle=function(event){var text;return this._stopEvent(event),text=this.elementWrapper.not(":hidden")?"Show Map":"Hide Map",this.mapTrigger.text(text),this.elementWrapper.slideToggle()},Dynamic.prototype._toggleStreetView=function(event){return this._stopEvent(event),this.streetView.setVisible(!this.streetView.getVisible()),this.streetViewTrigger.hide()},Dynamic}(GoogleMap.Base)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};GoogleMap.Mappable=function(_super){function Mappable(){return this.showStreetView=__bind(this.showStreetView,this),this.showMapInfoWindow=__bind(this.showMapInfoWindow,this),_ref=Mappable.__super__.constructor.apply(this,arguments)}return __extends(Mappable,_super),Mappable.prototype.initialize=function(){},Mappable.prototype.googleMap=function(){},Mappable.prototype._infoWindowHTML=function(){},Mappable.prototype.coordinates=function(){return this.geocoding.latitude&&this.geocoding.longitude?"undefined"==typeof google||null===google?null:new google.maps.LatLng(this.geocoding.latitude,this.geocoding.longitude):null},Mappable.prototype.infoWindowContent=function(){var html;return this.cachedInfoWindowContent?this.cachedInfoWindowContent:(html=this._infoWindowHTML(),html&&(this.cachedInfoWindowContent=html),html)},Mappable.prototype.mapIcon=function(){var location,size,url;return location=window.location,url=image_url("map-markers/transparent.png"),size=new google.maps.Size(32,49),new google.maps.MarkerImage(url,size)},Mappable.prototype.mapMarker=function(googleMap){return new google.maps.Marker({map:googleMap.map,position:this.coordinates(),title:this.full_address,icon:this.mapIcon()})},Mappable.prototype.showMapInfoWindow=function(event){return event&&event.stop&&event.stop(),this.googleMap().openInfoWindow(this)},Mappable.prototype.showStreetView=function(event){return event&&event.stop&&event.stop(),this.googleMap().showStreetView(this,$(event.target))},Mappable.prototype._obfuscate=function(){return!1},Mappable}(GCObject)}.call(this),function(){Observations.on("google-maps:available",function(){return GoogleMap.MarkerLabel=function(map_,marker,label){return this.map_=map_,this.marker=marker,this.label=label,this.marker.label=this,this.setMap(this.map_)},GoogleMap.MarkerLabel.prototype=new google.maps.OverlayView,GoogleMap.MarkerLabel.prototype.onAdd=function(){var pane;return this.div=$('<div class="map-marker-label">').css("display","none"),this.span=$('<span class="map-marker-inner">'),this.div.append(icons.mapMarker),this.div.append(this.span),pane=this.getPanes().markerLayer,pane.appendChild(this.div[0]),this.bindTo("position",this.marker,"position")},GoogleMap.MarkerLabel.prototype.onRemove=function(){return this.div.remove()},GoogleMap.MarkerLabel.prototype.draw=function(){var position,projection;return projection=this.getProjection(),position=projection.fromLatLngToDivPixel(this.get("position")),this.div.css({left:""+position.x+"px",top:""+position.y+"px",display:"block"}),this.span.text(this.label)
}})}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};GoogleMap.Static=function(_super){function Static(){return this._toggleStreetView=__bind(this._toggleStreetView,this),this._toggle=__bind(this._toggle,this),this._closeMap=__bind(this._closeMap,this),_ref=Static.__super__.constructor.apply(this,arguments)}return __extends(Static,_super),Static.prototype.initializeMap=function(){var content,streetViewService,_this=this;return Static.__super__.initializeMap.call(this),this.container.detach(),"undefined"!=typeof pjax&&null!==pjax&&pjax.container.exists()?pjax.container.append(this.container):$(document.body).append(this.container),"(0, 0)"===this.coordinates.toString()?(this.element.addClass("no_map"),this.element.hide(),this.options.noMapView.show()):(streetViewService=new google.maps.StreetViewService,streetViewService.getPanoramaByLocation(this.coordinates,50,function(data,status){return"ZERO_RESULTS"===status?(_this.streetView=null,_this.noStreetView=$(_this.options.noStreetView)):_this._observeStreetView(_this.coordinates)}),content=this.options.infoWindowText,this.marker=new google.maps.Marker({map:this.map,position:this.coordinates}),content&&(this.infoWindow=new InfoBubble({borderWidth:0,backgroundColor:"rgba(255, 255, 255, 0)",content:content,padding:"1px",position:this.coordinates,shadowStyle:0}))),this._positionMap()},Static.prototype.initializeTriggers=function(){return Static.__super__.initializeTriggers.call(this),this.closeMapTrigger=$(this.options.closeMapTrigger)},Static.prototype.observeMap=function(){var _this=this;return Static.__super__.observeMap.call(this),this.closeMapTrigger.on("click",this._closeMap),this._hasMap()?google.maps.event.addListener(this.marker,"click",function(){return _this.infoWindow.open(_this.map,_this.marker)}):void 0},Static.prototype._closeMap=function(event){return this._stopEvent(event),this.container.hide(),this._hasStreetView()?this.streetView.setVisible(!1):void 0},Static.prototype._defaultOptions=function(){return $.extend({closeMapTrigger:null,hidden:!0,infoWindowText:"",noStreetView:null},Static.__super__._defaultOptions.call(this))},Static.prototype._firstTimeShown=function(){return this.firstTimeShowing?!1:(this.firstTimeShowing=!0,!0)},Static.prototype._hasMap=function(){return!this.element.hasClass("no_map")},Static.prototype._hasStreetView=function(){return!!this.streetView},Static.prototype._hideStreetViewTrigger=function(){},Static.prototype._noStreetView=function(){return this.element.hide(),this.noStreetView.show()},Static.prototype._positionMap=function(){var top;return top=($(window).height()-this.elementWrapper.height())/2,this.elementWrapper.css("top",""+top+"px")},Static.prototype._toggle=function(event){return this._stopEvent(event),this.element.show(),this._positionMap(),this.noStreetView&&this.noStreetView.hide(),this._hasMap()||(this.container.addClass("no_map"),this.element.hide(),this.options.noMapView.show()),this._firstTimeShown()?void 0:this._hasMap()&&this._hasStreetView()&&this.streetView.getVisible()?this.streetView.setVisible(!1):this.container.toggle()},Static.prototype._toggleStreetView=function(event){var _this=this;this._stopEvent(event),this.container.show(),this._positionMap(),this._hasMap()?this._hasStreetView()?(this.element.show(),this.streetView.setVisible(!this.streetView.getVisible()),setTimeout(function(){return _this._hasStreetView()?void 0:_this._noStreetView()},1e3)):this._noStreetView():this.element.text("No Street View Available"),this._firstTimeShown()},Static}(GoogleMap.Base)}.call(this),function(){GoogleMap.StaticMapConversion=function(){function StaticMapConversion(map){this.mapObject=map,this.map=this.mapObject.map,this.markers=this.mapObject.markers,this.baseUrl=""+window.location.protocol+"//maps.googleapis.com/maps/api/staticmap?",this.parameters={},this._url=null}return StaticMapConversion.prototype.url=function(){return this._url?this._url:(this._addMapParameters(),this._addMarkerParameters(),this._url=this.baseUrl+this.parameters)},StaticMapConversion.prototype._addMapParameters=function(){var e;return this.parameters.center=this._coordinates(this.map.getCenter()),this.parameters.zoom=this.map.getZoom(),this.parameters.sensor=!1,this.parameters.scale=2,e=this.mapObject.element,this.parameters.size=[e.width(),e.height()].join("x"),this.parameters=$.param(this.parameters)},StaticMapConversion.prototype._addMarkerParameters=function(){var data,icon,icons,marker,params,url,values,_i,_len,_ref,_results;if(this.markers.any()){for(params=[],icons={},_ref=this.markers,_i=0,_len=_ref.length;_len>_i;_i++)marker=_ref[_i],url=this._iconUrlMapping(marker.getIcon().url),url&&(icon=icons[url]||[],icon.push(this._coordinates(marker.getPosition())),icons[url]=icon);_results=[];for(icon in icons)values=icons[icon],data=["icon:"+icon,"shadow:false"].concat(values),_results.push(this.parameters+="&markers="+encodeURIComponent(data.join("|")));return _results}},StaticMapConversion.prototype._iconUrlMapping=function(url){var mainPortion,mapping;return url.match(/normal/)?null:"development"!==environment?url.replace("//","http://"):(mainPortion=url.replace(""+window.location.protocol+"//"+window.location.host+"/assets/",""),mapping={"map-markers/plain.png":"com.freedomsoft.production.s3.amazonaws.com/map-markers/plain.png","comps/marker/selected.png":"com.freedomsoft.production.s3.amazonaws.com/map-markers/selected.png"}[mainPortion]||"com.freedomsoft.production.s3.amazonaws.com/map-markers/plain.png","http://"+mapping)},StaticMapConversion.prototype._coordinates=function(latLng){return latLng.toString().replace(/[\(|\)| ]/g,"")},StaticMapConversion}()}.call(this),window.InfoBubble=InfoBubble,InfoBubble.prototype.ARROW_SIZE_=15,InfoBubble.prototype.ARROW_STYLE_=0,InfoBubble.prototype.SHADOW_STYLE_=1,InfoBubble.prototype.MIN_WIDTH_=50,InfoBubble.prototype.ARROW_POSITION_=50,InfoBubble.prototype.PADDING_=10,InfoBubble.prototype.BORDER_WIDTH_=1,InfoBubble.prototype.BORDER_COLOR_="#ccc",InfoBubble.prototype.BORDER_RADIUS_=10,InfoBubble.prototype.BACKGROUND_COLOR_="#fff",InfoBubble.prototype.extend=function(obj1,obj2){return function(object){for(var property in object.prototype)this.prototype[property]=object.prototype[property];return this}.apply(obj1,[obj2])},InfoBubble.prototype.buildDom_=function(){var bubble=this.bubble_=document.createElement("DIV");bubble.style.position="absolute",bubble.style.zIndex=this.baseZIndex_;var tabsContainer=this.tabsContainer_=document.createElement("DIV");tabsContainer.style.position="relative";var close=this.close_=document.createElement("IMG");close.style.position="absolute",close.style.width=this.px(11),close.style.height=this.px(11),close.style.border=0,close.style.zIndex=this.baseZIndex_+1,close.style.cursor="pointer",close.src=image_url("misc/info-window-close.png");var that=this;google.maps.event.addDomListener(close,"click",function(){that.close(),google.maps.event.trigger(that,"closeclick")});var contentContainer=this.contentContainer_=document.createElement("DIV");contentContainer.style.cursor="default",contentContainer.style.clear="both",contentContainer.style.position="relative";var content=this.content_=document.createElement("DIV");contentContainer.appendChild(content);var arrow=this.arrow_=document.createElement("DIV");arrow.style.position="relative";var arrowOuter=this.arrowOuter_=document.createElement("DIV"),arrowInner=this.arrowInner_=document.createElement("DIV"),arrowSize=this.getArrowSize_();arrowOuter.style.position=arrowInner.style.position="absolute",arrowOuter.style.left=arrowInner.style.left="50%",arrowOuter.style.height=arrowInner.style.height="0",arrowOuter.style.width=arrowInner.style.width="0",arrowOuter.style.marginLeft=this.px(-arrowSize),arrowOuter.style.borderWidth=this.px(arrowSize),arrowOuter.style.borderBottomWidth=0;var bubbleShadow=this.bubbleShadow_=document.createElement("DIV");bubbleShadow.style.position="absolute",bubble.style.display=bubbleShadow.style.display="none",bubble.appendChild(this.tabsContainer_),bubble.appendChild(close),bubble.appendChild(contentContainer);var stylesheet=document.createElement("style");stylesheet.setAttribute("type","text/css"),this.animationName_="_ibani_"+Math.round(1e4*Math.random());var css="."+this.animationName_+"{-webkit-animation-name:"+this.animationName_+";-webkit-animation-duration:0.5s;-webkit-animation-iteration-count:1;}@-webkit-keyframes "+this.animationName_+" {from {-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% {-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}";stylesheet.textContent=css,document.getElementsByTagName("head")[0].appendChild(stylesheet)},InfoBubble.prototype.setBackgroundClassName=function(className){this.set("backgroundClassName",className)},InfoBubble.prototype.setBackgroundClassName=InfoBubble.prototype.setBackgroundClassName,InfoBubble.prototype.backgroundClassName_changed=function(){this.content_.className=this.get("backgroundClassName")},InfoBubble.prototype.backgroundClassName_changed=InfoBubble.prototype.backgroundClassName_changed,InfoBubble.prototype.setTabClassName=function(className){this.set("tabClassName",className)},InfoBubble.prototype.setTabClassName=InfoBubble.prototype.setTabClassName,InfoBubble.prototype.tabClassName_changed=function(){this.updateTabStyles_()},InfoBubble.prototype.tabClassName_changed=InfoBubble.prototype.tabClassName_changed,InfoBubble.prototype.getArrowStyle_=function(){return parseInt(this.get("arrowStyle"),10)||0},InfoBubble.prototype.setArrowStyle=function(style){this.set("arrowStyle",style)},InfoBubble.prototype.setArrowStyle=InfoBubble.prototype.setArrowStyle,InfoBubble.prototype.arrowStyle_changed=function(){this.arrowSize_changed()},InfoBubble.prototype.arrowStyle_changed=InfoBubble.prototype.arrowStyle_changed,InfoBubble.prototype.getArrowSize_=function(){return parseInt(this.get("arrowSize"),10)||0},InfoBubble.prototype.setArrowSize=function(size){this.set("arrowSize",size)},InfoBubble.prototype.setArrowSize=InfoBubble.prototype.setArrowSize,InfoBubble.prototype.arrowSize_changed=function(){this.borderWidth_changed()},InfoBubble.prototype.arrowSize_changed=InfoBubble.prototype.arrowSize_changed,InfoBubble.prototype.setArrowPosition=function(pos){this.set("arrowPosition",pos)},InfoBubble.prototype.setArrowPosition=InfoBubble.prototype.setArrowPosition,InfoBubble.prototype.getArrowPosition_=function(){return parseInt(this.get("arrowPosition"),10)||0},InfoBubble.prototype.arrowPosition_changed=function(){var pos=this.getArrowPosition_();this.arrowOuter_.style.left=this.arrowInner_.style.left=pos+"%",this.redraw_()},InfoBubble.prototype.arrowPosition_changed=InfoBubble.prototype.arrowPosition_changed,InfoBubble.prototype.setZIndex=function(zIndex){this.set("zIndex",zIndex)},InfoBubble.prototype.setZIndex=InfoBubble.prototype.setZIndex,InfoBubble.prototype.getZIndex=function(){return parseInt(this.get("zIndex"),10)||this.baseZIndex_},InfoBubble.prototype.zIndex_changed=function(){var zIndex=this.getZIndex();this.bubble_.style.zIndex=this.baseZIndex_=zIndex,this.close_.style.zIndex=zIndex+1},InfoBubble.prototype.zIndex_changed=InfoBubble.prototype.zIndex_changed,InfoBubble.prototype.setShadowStyle=function(shadowStyle){this.set("shadowStyle",shadowStyle)},InfoBubble.prototype.setShadowStyle=InfoBubble.prototype.setShadowStyle,InfoBubble.prototype.getShadowStyle_=function(){return parseInt(this.get("shadowStyle"),10)||0},InfoBubble.prototype.shadowStyle_changed=function(){var shadowStyle=this.getShadowStyle_(),display="",shadow="",backgroundColor="";switch(shadowStyle){case 0:display="none";break;case 1:shadow="40px 15px 10px rgba(33,33,33,0.3)",backgroundColor="transparent";break;case 2:shadow="0 0 2px rgba(33,33,33,0.3)",backgroundColor="rgba(33,33,33,0.35)"}this.bubbleShadow_.style.boxShadow=this.bubbleShadow_.style.webkitBoxShadow=this.bubbleShadow_.style.MozBoxShadow=shadow,this.bubbleShadow_.style.backgroundColor=backgroundColor,this.isOpen_&&(this.bubbleShadow_.style.display=display,this.draw())},InfoBubble.prototype.shadowStyle_changed=InfoBubble.prototype.shadowStyle_changed,InfoBubble.prototype.showCloseButton=function(){this.set("hideCloseButton",!1)},InfoBubble.prototype.showCloseButton=InfoBubble.prototype.showCloseButton,InfoBubble.prototype.hideCloseButton=function(){this.set("hideCloseButton",!0)},InfoBubble.prototype.hideCloseButton=InfoBubble.prototype.hideCloseButton,InfoBubble.prototype.hideCloseButton_changed=function(){this.close_.style.display=this.get("hideCloseButton")?"none":""},InfoBubble.prototype.hideCloseButton_changed=InfoBubble.prototype.hideCloseButton_changed,InfoBubble.prototype.setBackgroundColor=function(color){},InfoBubble.prototype.setBackgroundColor=InfoBubble.prototype.setBackgroundColor,InfoBubble.prototype.backgroundColor_changed=function(){var backgroundColor=this.get("backgroundColor");this.contentContainer_.style.backgroundColor=backgroundColor,this.arrowInner_.style.borderColor=backgroundColor+" transparent transparent",this.updateTabStyles_()},InfoBubble.prototype.backgroundColor_changed=InfoBubble.prototype.backgroundColor_changed,InfoBubble.prototype.setBorderColor=function(color){},InfoBubble.prototype.setBorderColor=InfoBubble.prototype.setBorderColor,InfoBubble.prototype.borderColor_changed=function(){var borderColor=this.get("borderColor"),contentContainer=this.contentContainer_,arrowOuter=this.arrowOuter_;contentContainer.style.borderColor=borderColor,arrowOuter.style.borderColor=borderColor+" transparent transparent",contentContainer.style.borderStyle=arrowOuter.style.borderStyle=this.arrowInner_.style.borderStyle="solid",this.updateTabStyles_()},InfoBubble.prototype.borderColor_changed=InfoBubble.prototype.borderColor_changed,InfoBubble.prototype.setBorderRadius=function(){},InfoBubble.prototype.setBorderRadius=InfoBubble.prototype.setBorderRadius,InfoBubble.prototype.getBorderRadius_=function(){return parseInt(this.get("borderRadius"),10)||0},InfoBubble.prototype.borderRadius_changed=function(){var borderRadius=this.getBorderRadius_(),borderWidth=this.getBorderWidth_();this.contentContainer_.style.borderRadius=this.contentContainer_.style.MozBorderRadius=this.contentContainer_.style.webkitBorderRadius=this.bubbleShadow_.style.borderRadius=this.bubbleShadow_.style.MozBorderRadius=this.bubbleShadow_.style.webkitBorderRadius=this.px(borderRadius),this.tabsContainer_.style.paddingLeft=this.tabsContainer_.style.paddingRight=this.px(borderRadius+borderWidth),this.redraw_()},InfoBubble.prototype.borderRadius_changed=InfoBubble.prototype.borderRadius_changed,InfoBubble.prototype.getBorderWidth_=function(){return parseInt(this.get("borderWidth"),10)||0},InfoBubble.prototype.setBorderWidth=function(){},InfoBubble.prototype.setBorderWidth=InfoBubble.prototype.setBorderWidth,InfoBubble.prototype.borderWidth_changed=function(){var borderWidth=this.getBorderWidth_();this.contentContainer_.style.borderWidth=this.px(borderWidth),this.tabsContainer_.style.top=this.px(borderWidth),this.updateArrowStyle_(),this.updateTabStyles_(),this.borderRadius_changed(),this.redraw_()},InfoBubble.prototype.borderWidth_changed=InfoBubble.prototype.borderWidth_changed,InfoBubble.prototype.updateArrowStyle_=function(){var borderWidth=this.getBorderWidth_(),arrowSize=this.getArrowSize_(),arrowStyle=this.getArrowStyle_(),arrowOuterSizePx=this.px(arrowSize),arrowInnerSizePx=this.px(Math.max(0,arrowSize-borderWidth)),outer=this.arrowOuter_,inner=this.arrowInner_;this.arrow_.style.marginTop=this.px(-borderWidth),outer.style.borderTopWidth=arrowOuterSizePx,inner.style.borderTopWidth=arrowInnerSizePx,0==arrowStyle||1==arrowStyle?(outer.style.borderLeftWidth=arrowOuterSizePx,inner.style.borderLeftWidth=arrowInnerSizePx):outer.style.borderLeftWidth=inner.style.borderLeftWidth=0,0==arrowStyle||2==arrowStyle?(outer.style.borderRightWidth=arrowOuterSizePx,inner.style.borderRightWidth=arrowInnerSizePx):outer.style.borderRightWidth=inner.style.borderRightWidth=0,2>arrowStyle?(outer.style.marginLeft=this.px(-arrowSize),inner.style.marginLeft=this.px(-(arrowSize-borderWidth))):outer.style.marginLeft=inner.style.marginLeft=0,outer.style.display=0==borderWidth?"none":""},InfoBubble.prototype.setPadding=function(padding){this.set("padding",padding)},InfoBubble.prototype.setPadding=InfoBubble.prototype.setPadding,InfoBubble.prototype.getPadding_=function(){return parseInt(this.get("padding"),10)||0},InfoBubble.prototype.padding_changed=function(){var padding=this.getPadding_();this.contentContainer_.style.padding=this.px(padding),this.updateTabStyles_(),this.redraw_()},InfoBubble.prototype.padding_changed=InfoBubble.prototype.padding_changed,InfoBubble.prototype.px=function(num){return num?num+"px":num},InfoBubble.prototype.addEvents_=function(){var events=["mousedown","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","dblclick","contextmenu","click"],bubble=this.bubble_;this.listeners_=[];for(var event,i=0;event=events[i];i++)this.listeners_.push(google.maps.event.addDomListener(bubble,event,function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}))},InfoBubble.prototype.onAdd=function(){this.bubble_||this.buildDom_(),this.addEvents_();var panes=this.getPanes();panes&&(panes.floatPane.appendChild(this.bubble_),panes.floatShadow.appendChild(this.bubbleShadow_))},InfoBubble.prototype.onAdd=InfoBubble.prototype.onAdd,InfoBubble.prototype.draw=function(){var projection=this.getProjection();if(projection){var latLng=this.get("position");if(!latLng)return this.close(),void 0;var tabHeight=0;this.activeTab_&&(tabHeight=this.activeTab_.offsetHeight);var anchorHeight=this.getAnchorHeight_(),arrowSize=this.getArrowSize_(),arrowPosition=this.getArrowPosition_();arrowPosition/=100;var pos=projection.fromLatLngToDivPixel(latLng),width=this.contentContainer_.offsetWidth,height=this.bubble_.offsetHeight;if(width){var top=pos.y-(height+arrowSize);anchorHeight&&(top-=anchorHeight);var left=pos.x-width*arrowPosition;this.bubble_.style.top=this.px(top),this.bubble_.style.left=this.px(left);var shadowStyle=parseInt(this.get("shadowStyle"),10);switch(shadowStyle){case 1:this.bubbleShadow_.style.top=this.px(top+tabHeight-1),this.bubbleShadow_.style.left=this.px(left),this.bubbleShadow_.style.width=this.px(width),this.bubbleShadow_.style.height=this.px(this.contentContainer_.offsetHeight-arrowSize);break;case 2:width=.8*width,this.bubbleShadow_.style.top=anchorHeight?this.px(pos.y):this.px(pos.y+arrowSize),this.bubbleShadow_.style.left=this.px(pos.x-width*arrowPosition),this.bubbleShadow_.style.width=this.px(width),this.bubbleShadow_.style.height=this.px(2)}}}},InfoBubble.prototype.draw=InfoBubble.prototype.draw,InfoBubble.prototype.onRemove=function(){this.bubble_&&this.bubble_.parentNode&&this.bubble_.parentNode.removeChild(this.bubble_),this.bubbleShadow_&&this.bubbleShadow_.parentNode&&this.bubbleShadow_.parentNode.removeChild(this.bubbleShadow_);for(var listener,i=0;listener=this.listeners_[i];i++)google.maps.event.removeListener(listener)},InfoBubble.prototype.onRemove=InfoBubble.prototype.onRemove,InfoBubble.prototype.isOpen=function(){return this.isOpen_},InfoBubble.prototype.isOpen=InfoBubble.prototype.isOpen,InfoBubble.prototype.close=function(){this.bubble_&&(this.bubble_.style.display="none",this.bubble_.className=this.bubble_.className.replace(this.animationName_,"")),this.bubbleShadow_&&(this.bubbleShadow_.style.display="none",this.bubbleShadow_.className=this.bubbleShadow_.className.replace(this.animationName_,"")),this.isOpen_=!1},InfoBubble.prototype.close=InfoBubble.prototype.close,InfoBubble.prototype.open=function(opt_map,opt_anchor){var that=this;window.setTimeout(function(){that.open_(opt_map,opt_anchor)},0)},InfoBubble.prototype.open_=function(opt_map,opt_anchor){this.updateContent_(),opt_map&&this.setMap(opt_map),opt_anchor&&(this.set("anchor",opt_anchor),this.bindTo("anchorPoint",opt_anchor),this.bindTo("position",opt_anchor)),this.bubble_.style.display=this.bubbleShadow_.style.display="";var animation=!this.get("disableAnimation");animation&&(this.bubble_.className+=" "+this.animationName_,this.bubbleShadow_.className+=" "+this.animationName_),this.redraw_(),this.isOpen_=!0;var pan=!this.get("disableAutoPan");if(pan){var that=this;window.setTimeout(function(){that.panToView()},200)}},InfoBubble.prototype.open=InfoBubble.prototype.open,InfoBubble.prototype.setPosition=function(position){position&&this.set("position",position)},InfoBubble.prototype.setPosition=InfoBubble.prototype.setPosition,InfoBubble.prototype.getPosition=function(){return this.get("position")},InfoBubble.prototype.getPosition=InfoBubble.prototype.getPosition,InfoBubble.prototype.position_changed=function(){this.draw()},InfoBubble.prototype.position_changed=InfoBubble.prototype.position_changed,InfoBubble.prototype.panToView=function(){var projection=this.getProjection();if(projection&&this.bubble_){var anchorHeight=this.getAnchorHeight_(),height=this.bubble_.offsetHeight+anchorHeight,map=this.get("map"),mapDiv=map.getDiv(),mapHeight=mapDiv.offsetHeight,latLng=this.getPosition(),centerPos=projection.fromLatLngToContainerPixel(map.getCenter()),pos=projection.fromLatLngToContainerPixel(latLng),spaceTop=centerPos.y-height,spaceBottom=mapHeight-centerPos.y,needsTop=0>spaceTop,deltaY=0;needsTop&&(spaceTop*=-1,deltaY=(spaceTop+spaceBottom)/2),pos.y-=deltaY,latLng=projection.fromContainerPixelToLatLng(pos),map.getCenter()!=latLng&&map.panTo(latLng)}},InfoBubble.prototype.panToView=InfoBubble.prototype.panToView,InfoBubble.prototype.htmlToDocumentFragment_=function(htmlString){htmlString=htmlString.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var tempDiv=document.createElement("DIV");if(tempDiv.innerHTML=htmlString,1==tempDiv.childNodes.length)return tempDiv.removeChild(tempDiv.firstChild);for(var fragment=document.createDocumentFragment();tempDiv.firstChild;)fragment.appendChild(tempDiv.firstChild);return fragment},InfoBubble.prototype.removeChildren_=function(node){if(node)for(var child;child=node.firstChild;)node.removeChild(child)},InfoBubble.prototype.setContent=function(content){this.set("content",content)},InfoBubble.prototype.setContent=InfoBubble.prototype.setContent,InfoBubble.prototype.getContent=function(){return this.get("content")},InfoBubble.prototype.getContent=InfoBubble.prototype.getContent,InfoBubble.prototype.updateContent_=function(){if(this.content_){this.removeChildren_(this.content_);var content=this.getContent();if(content){"string"==typeof content&&(content=this.htmlToDocumentFragment_(content)),this.content_.appendChild(content);for(var image,that=this,images=this.content_.getElementsByTagName("IMG"),i=0;image=images[i];i++)google.maps.event.addDomListener(image,"load",function(){that.imageLoaded_()});google.maps.event.trigger(this,"domready")}this.redraw_()}},InfoBubble.prototype.imageLoaded_=function(){var pan=!this.get("disableAutoPan");this.redraw_(),!pan||0!=this.tabs_.length&&0!=this.activeTab_.index||this.panToView()},InfoBubble.prototype.updateTabStyles_=function(){if(this.tabs_&&this.tabs_.length){for(var tab,i=0;tab=this.tabs_[i];i++)this.setTabStyle_(tab.tab);this.activeTab_.style.zIndex=this.baseZIndex_;var borderWidth=this.getBorderWidth_(),padding=this.getPadding_()/2;this.activeTab_.style.borderBottomWidth=0,this.activeTab_.style.paddingBottom=this.px(padding+borderWidth)}},InfoBubble.prototype.setTabStyle_=function(tab){var backgroundColor=this.get("backgroundColor"),borderColor=this.get("borderColor"),borderRadius=this.getBorderRadius_(),borderWidth=this.getBorderWidth_(),padding=this.getPadding_(),marginRight=this.px(-Math.max(padding,borderRadius)),borderRadiusPx=this.px(borderRadius),index=this.baseZIndex_;tab.index&&(index-=tab.index);var styles={cssFloat:"left",position:"relative",cursor:"pointer",backgroundColor:backgroundColor,border:this.px(borderWidth)+" solid "+borderColor,padding:this.px(padding/2)+" "+this.px(padding),marginRight:marginRight,whiteSpace:"nowrap",borderRadiusTopLeft:borderRadiusPx,MozBorderRadiusTopleft:borderRadiusPx,webkitBorderTopLeftRadius:borderRadiusPx,borderRadiusTopRight:borderRadiusPx,MozBorderRadiusTopright:borderRadiusPx,webkitBorderTopRightRadius:borderRadiusPx,zIndex:index,display:"inline"};for(var style in styles)tab.style[style]=styles[style];var className=this.get("tabClassName");void 0!=className&&(tab.className+=" "+className)},InfoBubble.prototype.addTabActions_=function(tab){var that=this;tab.listener_=google.maps.event.addDomListener(tab,"click",function(){that.setTabActive_(this)})},InfoBubble.prototype.setTabActive=function(index){var tab=this.tabs_[index-1];tab&&this.setTabActive_(tab.tab)},InfoBubble.prototype.setTabActive=InfoBubble.prototype.setTabActive,InfoBubble.prototype.setTabActive_=function(tab){if(!tab)return this.setContent(""),this.updateContent_(),void 0;var padding=this.getPadding_()/2,borderWidth=this.getBorderWidth_();if(this.activeTab_){var activeTab=this.activeTab_;activeTab.style.zIndex=this.baseZIndex_-activeTab.index,activeTab.style.paddingBottom=this.px(padding),activeTab.style.borderBottomWidth=this.px(borderWidth)}tab.style.zIndex=this.baseZIndex_,tab.style.borderBottomWidth=0,tab.style.marginBottomWidth="-10px",tab.style.paddingBottom=this.px(padding+borderWidth),this.setContent(this.tabs_[tab.index].content),this.updateContent_(),this.activeTab_=tab,this.redraw_()},InfoBubble.prototype.setMaxWidth=function(width){this.set("maxWidth",width)},InfoBubble.prototype.setMaxWidth=InfoBubble.prototype.setMaxWidth,InfoBubble.prototype.maxWidth_changed=function(){this.redraw_()},InfoBubble.prototype.maxWidth_changed=InfoBubble.prototype.maxWidth_changed,InfoBubble.prototype.setMaxHeight=function(height){this.set("maxHeight",height)},InfoBubble.prototype.setMaxHeight=InfoBubble.prototype.setMaxHeight,InfoBubble.prototype.maxHeight_changed=function(){this.redraw_()},InfoBubble.prototype.maxHeight_changed=InfoBubble.prototype.maxHeight_changed,InfoBubble.prototype.setMinWidth=function(width){this.set("minWidth",width)},InfoBubble.prototype.setMinWidth=InfoBubble.prototype.setMinWidth,InfoBubble.prototype.minWidth_changed=function(){this.redraw_()},InfoBubble.prototype.minWidth_changed=InfoBubble.prototype.minWidth_changed,InfoBubble.prototype.setMinHeight=function(height){this.set("minHeight",height)},InfoBubble.prototype.setMinHeight=InfoBubble.prototype.setMinHeight,InfoBubble.prototype.minHeight_changed=function(){this.redraw_()},InfoBubble.prototype.minHeight_changed=InfoBubble.prototype.minHeight_changed,InfoBubble.prototype.addTab=function(label,content){var tab=document.createElement("DIV");tab.innerHTML=label,this.setTabStyle_(tab),this.addTabActions_(tab),this.tabsContainer_.appendChild(tab),this.tabs_.push({label:label,content:content,tab:tab}),tab.index=this.tabs_.length-1,tab.style.zIndex=this.baseZIndex_-tab.index,this.activeTab_||this.setTabActive_(tab),tab.className=tab.className+" "+this.animationName_,this.redraw_()},InfoBubble.prototype.addTab=InfoBubble.prototype.addTab,InfoBubble.prototype.updateTab=function(index,opt_label,opt_content){if(!(!this.tabs_.length||0>index||index>=this.tabs_.length)){var tab=this.tabs_[index];void 0!=opt_label&&(tab.tab.innerHTML=tab.label=opt_label),void 0!=opt_content&&(tab.content=opt_content),this.activeTab_==tab.tab&&(this.setContent(tab.content),this.updateContent_()),this.redraw_()}},InfoBubble.prototype.updateTab=InfoBubble.prototype.updateTab,InfoBubble.prototype.removeTab=function(index){if(!(!this.tabs_.length||0>index||index>=this.tabs_.length)){var tab=this.tabs_[index];tab.tab.parentNode.removeChild(tab.tab),google.maps.event.removeListener(tab.tab.listener_),this.tabs_.splice(index,1),delete tab;for(var t,i=0;t=this.tabs_[i];i++)t.tab.index=i;tab.tab==this.activeTab_&&(this.activeTab_=this.tabs_[index]?this.tabs_[index].tab:this.tabs_[index-1]?this.tabs_[index-1].tab:void 0,this.setTabActive_(this.activeTab_)),this.redraw_()}},InfoBubble.prototype.removeTab=InfoBubble.prototype.removeTab,InfoBubble.prototype.getElementSize_=function(element,opt_maxWidth,opt_maxHeight){var sizer=document.createElement("DIV");sizer.style.display="inline",sizer.style.position="absolute",sizer.style.visibility="hidden","string"==typeof element?sizer.innerHTML=element:sizer.appendChild(element.cloneNode(!0)),document.body.appendChild(sizer);var size=new google.maps.Size(sizer.offsetWidth,sizer.offsetHeight);return opt_maxWidth&&size.width>opt_maxWidth&&(sizer.style.width=this.px(opt_maxWidth),size=new google.maps.Size(sizer.offsetWidth,sizer.offsetHeight)),opt_maxHeight&&size.height>opt_maxHeight&&(sizer.style.height=this.px(opt_maxHeight),size=new google.maps.Size(sizer.offsetWidth,sizer.offsetHeight)),document.body.removeChild(sizer),delete sizer,size},InfoBubble.prototype.redraw_=function(){this.figureOutSize_(),this.positionCloseButton_(),this.draw()},InfoBubble.prototype.figureOutSize_=function(){var map=this.get("map");if(map){var padding=this.getPadding_(),arrowSize=(this.getBorderWidth_(),this.getBorderRadius_(),this.getArrowSize_()),mapDiv=map.getDiv(),gutter=2*arrowSize,mapWidth=mapDiv.offsetWidth-gutter,mapHeight=mapDiv.offsetHeight-gutter-this.getAnchorHeight_(),tabHeight=0,width=this.get("minWidth")||0,height=this.get("minHeight")||0,maxWidth=this.get("maxWidth")||0,maxHeight=this.get("maxHeight")||0;maxWidth=Math.min(mapWidth,maxWidth),maxHeight=Math.min(mapHeight,maxHeight);var tabWidth=0;if(this.tabs_.length)for(var tab,i=0;tab=this.tabs_[i];i++){var tabSize=this.getElementSize_(tab.tab,maxWidth,maxHeight),contentSize=this.getElementSize_(tab.content,maxWidth,maxHeight);width<tabSize.width&&(width=tabSize.width),tabWidth+=tabSize.width,height<tabSize.height&&(height=tabSize.height),tabSize.height>tabHeight&&(tabHeight=tabSize.height),width<contentSize.width&&(width=contentSize.width),height<contentSize.height&&(height=contentSize.height)}else{var content=this.get("content");if("string"==typeof content&&(content=this.htmlToDocumentFragment_(content)),content){var contentSize=this.getElementSize_(content,maxWidth,maxHeight);width<contentSize.width&&(width=contentSize.width),height<contentSize.height&&(height=contentSize.height)}}maxWidth&&(width=Math.min(width,maxWidth)),maxHeight&&(height=Math.min(height,maxHeight)),width=Math.max(width,tabWidth),width==tabWidth&&(width+=2*padding),arrowSize=2*arrowSize,width=Math.max(width,arrowSize),width>mapWidth&&(width=mapWidth),height>mapHeight&&(height=mapHeight-tabHeight),this.tabsContainer_&&(this.tabHeight_=tabHeight,this.tabsContainer_.style.width=this.px(tabWidth)),this.contentContainer_.style.width=this.px(width+10),this.contentContainer_.style.height=this.px(height)}},InfoBubble.prototype.getAnchorHeight_=function(){var anchor=this.get("anchor");if(anchor){var anchorPoint=this.get("anchorPoint");if(anchorPoint)return-1*anchorPoint.y}return 0},InfoBubble.prototype.anchorPoint_changed=function(){this.draw()},InfoBubble.prototype.anchorPoint_changed=InfoBubble.prototype.anchorPoint_changed,InfoBubble.prototype.positionCloseButton_=function(){var bw=(this.getBorderRadius_(),this.getBorderWidth_()),right=2,top=2;this.tabs_.length&&this.tabHeight_&&(top+=this.tabHeight_),top+=bw,right+=bw;var c=this.contentContainer_;c&&c.clientHeight<c.scrollHeight&&(right+=15),this.close_.style.right=this.px(7),this.close_.style.top=this.px(23)},function(){this.hasGoogleMaps=!1,this._googleMapCallback=function(){return this.hasGoogleMaps=!0,Observations.trigger("google-maps:available")},this.onMapsAvailable=function(callback){return this.hasGoogleMaps?callback():Observations.on("google-maps:available",callback)},"undefined"!=typeof google&&null!==google&&google.load("maps","3",{callback:"_googleMapCallback",other_params:"key="+google_maps_api_key})}.call(this),function(){this.MapContent={minHeight:800,wrapper:$("#content-wrapper"),sidebar:$("#sidebar"),clear:function(){return this.wrapper.height("")},resize:function(){var newHeight,sidebarHeight;if($(".map-container").exists())return newHeight="",sidebarHeight=this.sidebar.height(),sidebarHeight>this.minHeight&&(newHeight=sidebarHeight),this.wrapper.height(newHeight)}}}.call(this),function(){var createSelectors,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.MultiCheckboxSelect=function(){function MultiCheckboxSelect(element){this.element=element,this._toggleMenu=__bind(this._toggleMenu,this),this._populateMenu=__bind(this._populateMenu,this),this._hideMenu=__bind(this._hideMenu,this),this.assignElements(),this.observeElements(),this._populateMenu()
}return MultiCheckboxSelect.prototype.assignElements=function(){return this.menu=this.element.find(".menu"),this.values=this.element.find("input:checkbox")},MultiCheckboxSelect.prototype.observeElements=function(){return this.element.on("click",this._toggleMenu),this.values.on("click",this._populateMenu),$(document).on("click",this._hideMenu)},MultiCheckboxSelect.prototype._hideMenu=function(event){return $(event.target).parents(".selector").is(this.element)?void 0:this.menu.hide()},MultiCheckboxSelect.prototype._populateMenu=function(){var checked,value;return checked=this.values.filter(":checked"),value=this.element.find(".value"),checked.exists()?(value.text(""+checked.length+" selected"),value.removeClass("placeholder")):(value.text("Please Select"),value.addClass("placeholder"))},MultiCheckboxSelect.prototype._toggleMenu=function(event){return $(event.target).parents(".menu").exists()?void 0:this.menu.toggle()},MultiCheckboxSelect}(),createSelectors=function(){var selector,_i,_len,_ref,_results;for(_ref=$("div.selector"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)selector=_ref[_i],$(selector).find("select").exists()?_results.push(void 0):_results.push(new MultiCheckboxSelect($(selector)));return _results},$(window).on("load",createSelectors),pjax.on("success",createSelectors)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.Promotion=function(){function Promotion(){var banner,e,_i,_len,_ref;for(_ref=$(".promotion-banner"),_i=0,_len=_ref.length;_len>_i&&(e=_ref[_i],banner=new Promotion.Banner($(e)),!banner.isVisible());_i++);$(".promotion-banner:not(:visible)").remove()}return Promotion}(),Promotion.Banner=function(){function Banner(element){this.element=element,this._hide=__bind(this._hide,this),this.assignElements(),this.observeElements(),this._show()}return Banner.prototype.assignElements=function(){return this.promotionId=this.element.data("promotion-id"),this.cookieName="promotion-"+this.promotionId,this.element.attr("id",this.cookieName)},Banner.prototype.isVisible=function(){return this.element.is(":visible")},Banner.prototype.observeElements=function(){return this.element.find(".hide-promotion").on("click",this._hide)},Banner.prototype._hide=function(event){return event.stop(),this.element.hide(),$.cookie(this.cookieName,"hidden",{expires:3650,domain:!1})},Banner.prototype._show=function(){return"hidden"!==$.cookie(this.cookieName)?this.element.show():void 0},Banner}()}.call(this),// Copyright (c) 2008 Lachie Cox
// The above copyright notice and this permission notice shall be included in
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
String.prototype.score=function(abbreviation,offset){if(offset=offset||0,0==abbreviation.length)return.9;if(abbreviation.length>this.length)return 0;for(var i=abbreviation.length;i>0;i--){var sub_abbreviation=abbreviation.substring(0,i),index=this.indexOf(sub_abbreviation);if(!(0>index||index+abbreviation.length>this.length+offset)){var next_string=this.substring(index+sub_abbreviation.length),next_abbreviation=null;next_abbreviation=i>=abbreviation.length?"":abbreviation.substring(i);var remaining_score=next_string.score(next_abbreviation,offset+index);if(remaining_score>0){var score=this.length-next_string.length;if(0!=index){var j=0,c=this.charCodeAt(index-1);if(32==c||9==c)for(var j=index-2;j>=0;j--)c=this.charCodeAt(j),score-=32==c||9==c?1:.15;else score-=index}return score+=remaining_score*next_string.length,score/=this.length}}}return 0},function(){var Tabs,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Tabs=function(){function Tabs(){this._reactivateSidebarTabs=__bind(this._reactivateSidebarTabs,this),this._reactivateMainTabs=__bind(this._reactivateMainTabs,this),this._reactivate=__bind(this._reactivate,this),this._forceReactivate=__bind(this._forceReactivate,this),this._enable=__bind(this._enable,this),this.assignElements(),this.tabs.main.exists()&&(this.observeElements(),this._reactivate())}return Tabs.prototype.assignElements=function(){return this._assignElements(),this.enabled=!0},Tabs.prototype.observeElements=function(){return $(document).on("click","a:not(.open-overlay)",this._enable),pjax.on("reload",this._enable),pjax.on("complete",this._reactivate),pjax.on("url-ensured",this._forceReactivate),pjax.on("url-loaded",this._forceReactivate),pjax.on("popped",this._forceReactivate)},Tabs.prototype._assignElements=function(){return this.tabs={main:$("a.main-tab"),sidebar:$("a.sidebar-tab")}},Tabs.prototype._enable=function(){return this.enabled=!0},Tabs.prototype._forceReactivate=function(){return this.enabled=!1,this.href=window.location.pathname,this._assignElements(),setTimeout(this._reactivateMainTabs,0),setTimeout(this._reactivateSidebarTabs,0)},Tabs.prototype._reactivate=function(){return this.enabled?this._forceReactivate():void 0},Tabs.prototype._reactivateMainTabs=function(){var element,ignores,matches,tab,_i,_len,_ref,_results;for(this.tabs.main.removeClass("is-active"),_ref=this.tabs.main,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)element=_ref[_i],tab=$(element),matches=tab.data("matches"),ignores=tab.data("ignores"),this.href.match("^("+matches+")")?ignores&&this.href.match(ignores)?_results.push(void 0):_results.push(tab.addClass("is-active")):_results.push(void 0);return _results},Tabs.prototype._reactivateSidebarTabs=function(){var element,ignores,matches,tab,_i,_len,_ref,_results;for(this.tabs.sidebar.removeClass("is-active"),_ref=this.tabs.sidebar,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)element=_ref[_i],tab=$(element),matches=tab.data("matches"),ignores=tab.data("ignores"),this.href.match(matches)?ignores&&this.href.match(ignores)?_results.push(void 0):_results.push(tab.addClass("is-active")):_results.push(void 0);return _results},Tabs}(),new Tabs}.call(this),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){function Plugin(option){return"active"===option?!!this.data("expanding"):(this.filter("textarea").each(function(){var $this=$(this),instance=$this.data("expanding");if(instance&&"destroy"===option)return instance.destroy();if(instance&&"refresh"===option)return instance.setStyles();var visible=this.offsetWidth>0||this.offsetHeight>0;if(visible||_warn("ExpandingTextareas: attempt to initialize an invisible textarea. Call expanding() again once it has been inserted into the page and/or is visible."),!instance&&visible){var options=$.extend({},$.expanding,"object"==typeof option&&option);$this.data("expanding",new Expanding($this,options))}}),this)}function _warn(text){window.console&&console.warn&&console.warn(text)}var Expanding=function($textarea,options){this.$textarea=$textarea,this.$textCopy=$("<span />"),this.$clone=$('<pre class="expanding-clone"><br /></pre>').prepend(this.$textCopy),$textarea.wrap($('<div class="expanding-wrapper" style="position:relative" />')).after(this.$clone),this.attach(),this.setStyles(),this.update(),"function"==typeof options.update&&$textarea.bind("update.expanding",options.update)};Expanding.DEFAULTS={autoInitialize:!0,initialSelector:"textarea.expanding"},$.expanding=$.extend({},Expanding.DEFAULTS,$.expanding||{});var ieVersion=function(){var v=-1;if("Microsoft Internet Explorer"===navigator.appName){var ua=navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");null!==re.exec(ua)&&(v=parseFloat(RegExp.$1))}return v}(),inputSupported="oninput"in document.createElement("input")&&9!==ieVersion;Expanding.prototype={attach:function(){var events="input.expanding change.expanding",_this=this;inputSupported||(events+=" keyup.expanding"),this.$textarea.bind(events,function(){_this.update()})},update:function(){this.$textCopy.text(this.$textarea.val().replace(/\r\n/g,"\n")),this.$textarea.triggerHandler("update.expanding")},destroy:function(){this.$clone.remove(),this.$textarea.unwrap().attr("style",this._oldTextareaStyles||"").removeData("expanding").unbind("input.expanding change.expanding keyup.expanding update.expanding"),delete this._oldTextareaStyles},setStyles:function(){this._resetStyles(),this._setCloneStyles(),this._setTextareaStyles()},_resetStyles:function(){this._oldTextareaStyles=this.$textarea.attr("style"),this.$textarea.add(this.$clone).css({margin:0,webkitBoxSizing:"border-box",mozBoxSizing:"border-box",boxSizing:"border-box",width:"100%"})},_setCloneStyles:function(){var css={display:"block",border:"0 solid",visibility:"hidden",minHeight:this.$textarea.outerHeight()};"off"===this.$textarea.attr("wrap")?css.overflowX="scroll":css.whiteSpace="pre-wrap",this.$clone.css(css),this._copyTextareaStylesToClone()},_copyTextareaStylesToClone:function(){var _this=this,properties=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","maxHeight"];$.each(properties,function(i,property){var val=_this.$textarea.css(property);_this.$clone.css(property)!==val&&(_this.$clone.css(property,val),"maxHeight"===property&&"none"!==val&&_this.$clone.css("overflow","hidden"))})},_setTextareaStyles:function(){this.$textarea.css({position:"absolute",top:0,left:0,height:"100%",resize:"none",overflow:"auto"})}},$.fn.expanding=Plugin,$.fn.expanding.Constructor=Expanding,$(function(){$.expanding.autoInitialize&&$($.expanding.initialSelector).expanding()})}),function(){var ExpandingTextarea,expandTextareas,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};expandTextareas=function(){return setTimeout(function(){var e,textareas,_i,_len,_results;for(textareas=$("textarea:not(#text_editor):not(.no-resize):visible"),_results=[],_i=0,_len=textareas.length;_len>_i;_i++)e=textareas[_i],_results.push(new ExpandingTextarea($(e)));return _results},500)},ExpandingTextarea=function(){function ExpandingTextarea(element){this.element=element,this._update=__bind(this._update,this),this._assignDefaults(),this.element.expanding({update:this._update}),this.element.on("paste",this._update),this.inOverlay&&top.overlay.refreshHeight()}return ExpandingTextarea.prototype._assignDefaults=function(){var windowHeight;return this.inOverlay=this.element.closest(".overlay-body").exists(),this.originalHeight=this.element.height(),this.maxHeight=300,this.inOverlay&&(windowHeight=$(top).height(),this.maxHeight=windowHeight-($("#overlay-frame-inner").height()-this.originalHeight),this.maxHeight>300&&(this.maxHeight=300)),this.element.css({maxHeight:""+this.maxHeight+"px"})},ExpandingTextarea.prototype._update=function(){var newHeight;if(this.inOverlay)return newHeight=this.element.height(),null==this.autoHeight&&(this.autoHeight=newHeight),newHeight!==this.autoHeight?(top.overlay.refreshHeight(),this.autoHeight=newHeight):void 0},ExpandingTextarea}(),$(expandTextareas),pjax.on("success",expandTextareas),$(document).on("textareas:expand",expandTextareas)}.call(this),function(){var Tour,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Tour=function(){function Tour(){this._skip=__bind(this._skip,this),this._show=__bind(this._show,this),this._run=__bind(this._run,this),this._next=__bind(this._next,this),this._escape=__bind(this._escape,this),this.showTour=__bind(this.showTour,this),"test"!==environment&&($(document).on("keydown",this._escape),$(document).on("click",".tour-skip-button",this._skip),$(document).on("click",".tour-next-button",this._next),$(document).on("click",".tour-button",this._show),this.storageTest()&&(pjax.on("complete",this._run),setTimeout(this._run,1e3)))}return Tour.prototype.buildTour=function(){return this.overlayFade=$('<div class="tour-overlay tour-overlay-fade">'),this.overlayBlocker=$('<div class="tour-overlay tour-overlay-blocker">'),this.popup=$('<div class="tour-popup"><div class="tour-popup-content"></div><div class="tour-popup-buttons"><a class="tour-skip-button" href="#">Skip Tour</a><a class="tour-next-button" href="#">Next</a></div></div>'),this.popupContent=this.popup.find(".tour-popup-content"),this.skipButton=this.popup.find(".tour-skip-button"),this.nextButton=this.popup.find(".tour-next-button"),$("body").append(this.overlayFade,this.overlayBlocker,this.popup)},Tour.prototype.getOutline=function(){return $("#jr-outline")},Tour.prototype.markAsDone=function(){return this.outline?(localStorage.setItem(this.storageName(),!0),this.removeTour()):void 0},Tour.prototype.nextStep=function(){return this.removeStepStyling(),this.currentStep+=1,this.currentStep>this.lastStep?this.markAsDone():(this.updateStep(),this.updateButtonText())},Tour.prototype.removeStepStyling=function(){var step,stepElement;return step=this.outlineSteps.eq(this.currentStep),stepElement=$("."+step.data("class")),stepElement.removeClass("tour-current")},Tour.prototype.removeTour=function(){return this.removeStepStyling(),$(".tour-overlay, .tour-popup").remove()},Tour.prototype.showTour=function(){return this.buildTour(),this.outline=this.getOutline(),this.outlineSteps=this.outline.find("li"),this.currentStep=0,this.lastStep=this.outlineSteps.length-1,this.updateStep()},Tour.prototype.storageName=function(){var outline,outlineName;return outline=this.getOutline(),outlineName=outline.data("outline-name"),"fs-tour:"+outlineName},Tour.prototype.storageTest=function(){var e,test;test="test";try{return localStorage.setItem(test,test),localStorage.removeItem(test),!0}catch(_error){return e=_error,!1}},Tour.prototype.updateButtonText=function(){return this.nextButton.text(this.currentStep===this.lastStep?"Done":"Next")},Tour.prototype.updateStep=function(){var offset,offsetLeft,offsetTop,step,stepElement;return step=this.outlineSteps.eq(this.currentStep),stepElement=$("."+step.data("class")),stepElement.addClass("tour-current"),0===stepElement.length?this.nextStep():(offset=stepElement.offset(),offsetLeft=offset.left-(this.popup.width()-stepElement.outerWidth())/2,offsetTop=offset.top+stepElement.outerHeight(),this.popup.css({left:offsetLeft,top:offsetTop}),this.popupContent.html(step.html()))},Tour.prototype._escape=function(event){return 27===event.keyCode?this.markAsDone():void 0},Tour.prototype._next=function(e){return e.preventDefault(),this.nextStep()},Tour.prototype._run=function(){return localStorage.getItem(this.storageName())?void 0:this.showTour()},Tour.prototype._show=function(e){return e.preventDefault(),this.showTour()},Tour.prototype._skip=function(e){return e.preventDefault(),this.markAsDone()},Tour}(),jQuery(function(){return new Tour})}.call(this),function(){var convertLinks;convertLinks=function(){return $(".pagination a").attr("data-pjax",!0)},$(convertLinks),pjax.on("success",convertLinks)}.call(this),function(){this.Details=function(){function Details(options){$.extend(this,options),new Details.Loader(this)}return Details.prototype.assignHelpers=function(){},Details.prototype.observeElements=function(){},Details.prototype.loaded=function(){return this._runCallbacks("before"),this.assignHelpers(),this.observeElements(),this._runCallbacks("after"),new Details.Form.Observer(this.container.find(".details-form"))},Details.prototype._runCallbacks=function(type){var callback,_i,_len,_ref;for(_ref=Details.callbacks[type],_i=0,_len=_ref.length;_len>_i;_i++)callback=_ref[_i],callback(this);return Details.callbacks[type].clear()},Details}(),Details.callbacks={before:[],after:[]},Details.registerCallback=function(callback,type){return null==type&&(type="after"),this.callbacks[type].push(callback)}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Details.Actionbar=function(_super){function Actionbar(){return this._toggleAdditionalMenu=__bind(this._toggleAdditionalMenu,this),this._hideAdditionalMenu=__bind(this._hideAdditionalMenu,this),_ref=Actionbar.__super__.constructor.apply(this,arguments)}return __extends(Actionbar,_super),Actionbar.prototype.initialize=function(details,element){return this.details=details,this.element=element,this.assignElements(),this.observeElements()},Actionbar.prototype.assignElements=function(){return this.message=Message.create(),this.additionalTrigger=this.element.find("#additional-actions"),this.additionalMenu=this.additionalTrigger.find(".button-menu"),this.groups=new Details.Actionbar.Groups(this)},Actionbar.prototype.hideMenu=function(menu){return menu.hide(),setTimeout(function(){return menu.show()},1)},Actionbar.prototype.observeElements=function(){return this.on("click",this._hideAdditionalMenu),this.additionalTrigger.on("click",this._toggleAdditionalMenu),this.groups.observeElements(),new Details.Actionbar.Color(this.element.find("#set-color")),new Details.Actionbar.Rating(this.element.find("#set-rating"))},Actionbar.prototype._hideAdditionalMenu=function(event){var target;if(!(this.additionalMenu.is(":hidden")||(target=$(event.target),target.is(this.additionalTrigger)||target.hasClass("button-menu")||target.parents(".button-menu").exists())))return this.additionalMenu.hide()},Actionbar.prototype._toggleAdditionalMenu=function(){return this.additionalMenu.toggle(),window.getSelection().removeAllRanges()},Actionbar}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Details.Actionbar.Color=function(){function Color(element){this.element=element,this._update=__bind(this._update,this),this.element.exists()&&(this.assignElements(),this.observeElements())}return Color.prototype.assignElements=function(){return this.icon=this.element.find(".icon"),this.menu=this.element.find(".menu"),this.triggers=this.menu.find("a")},Color.prototype.observeElements=function(){return this.triggers.on("ajax:success",this._update)},Color.prototype._update=function(event,data){return this.icon.css({backgroundColor:data.color})},Color}()}.call(this),function(){var _ref,_ref1,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Details.Actionbar.Groups=function(_super){function Groups(){return this._success=__bind(this._success,this),this._populateMenu=__bind(this._populateMenu,this),_ref=Groups.__super__.constructor.apply(this,arguments)}return __extends(Groups,_super),Groups.prototype.initialize=function(actionbar){return this.actionbar=actionbar,this.element=this.actionbar.element,this.hideMenu=this.actionbar.hideMenu,this.details=this.actionbar.details,this.message=this.details.message,this.groups=this.details.groups,this.groupIds=this.details.groupIds,this.dropdownTemplate=this.details.groupsDropdownTemplate,this.helpers=[],this.assignElements(),this.assignHelpers()},Groups.prototype.assignElements=function(){return this.menu=this.element.find("#set-group")},Groups.prototype.assignHelpers=function(){return this.helpers.push(new Details.Actionbar.Groups.Update(this,{trigger:this.element.find(".apply")})),this.helpers.push(new Details.Actionbar.Groups.Manage(this,{trigger:this.element.find(".manage"),template:this.details.groupsManageTemplate})),this.helpers.push(new Details.Actionbar.Groups.Add(this,{trigger:this.element.find(".new-group")}))},Groups.prototype.observeElements=function(){var helper,_i,_len,_ref1;for(this.on("action:success",this._success),this.on("details:groups:registered",this._populateMenu),_ref1=this.helpers,_i=0,_len=_ref1.length;_len>_i;_i++)helper=_ref1[_i],helper.observeElements();return this.registerGroups(this.groups)},Groups.prototype.performAction=function(actionName,data){var _this=this;return this.trigger("action:loading"),$.ajax({url:this.details[""+actionName+"Url"],data:data,type:"post"}).done(function(groupData){return _this.groupIds=_this.selectedGroupIds(),_this.trigger("action:success",groupData)})},Groups.prototype.registerGroups=function(groups){return this.groups=groups,this.trigger("details:groups:registered")},Groups.prototype.selectedGroupIds=function(){var c,ids,_i,_len,_ref1;for(ids=[],_ref1=this.menu.find("input:checkbox:checked"),_i=0,_len=_ref1.length;_len>_i;_i++)c=_ref1[_i],ids.push(parseInt($(c).attr("value"),10));return ids},Groups.prototype._populateMenu=function(){var checkbox,element,group,menu,_i,_len,_ref1;for(menu=this.menu.find(".menu ul").first(),menu.html(""),_ref1=this.groups,_i=0,_len=_ref1.length;_len>_i;_i++)group=_ref1[_i],element=$(this.dropdownTemplate.evaluate(group)),menu.append(element),checkbox=element.find("input:checkbox"),this.groupIds.include(group.id)&&checkbox.check(!0);return this.trigger("groups:rendered")},Groups.prototype._success=function(event,data){return this.trigger("details:groups:success"),data&&data.groups?this.registerGroups(data.groups):void 0},Groups}(GCObject),Details.Actionbar.Groups.Helper=function(_super){function Helper(){return this._performAction=__bind(this._performAction,this),_ref1=Helper.__super__.constructor.apply(this,arguments)}return __extends(Helper,_super),Helper.prototype.initialize=function(owner,options){return this.owner=owner,$.extend(this,options),this.assignHelpers()},Helper.prototype.observeElements=function(){var _this=this;return this.on("group:state:reverted",function(){return _this.trigger.hide()}),this.on("group:state:changed",function(){return _this.trigger.show()}),this.form&&this.form.exists()&&this.form.on("submit",this._performAction),this._observeElements()},Helper.prototype._performAction=function(event){return event.stop(),this.performAction()},Helper.prototype.assignHelpers=function(){},Helper.prototype.performAction=function(){},Helper.prototype._observeElements=function(){},Helper}(GCObject)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Details.Actionbar.Groups.Add=function(_super){function Add(){return _ref=Add.__super__.constructor.apply(this,arguments)}return __extends(Add,_super),Add.prototype.assignHelpers=function(){return this.overlay=new Overlay("#new-group",{openTrigger:this.trigger}),this.form=this.overlay.wrapper.find("form"),this.input=this.form.find("input:text")},Add.prototype.performAction=function(){var data;if(!this.input.val().blank())return data=this.form.serialize(),data+="&"+csrf.param+"="+encodeURIComponent(csrf.token),this.owner.performAction("addGroup",data)},Add.prototype._observeElements=function(){var _this=this;return this.on("group:state:reverted",function(){return _this.trigger.show()}),this.on("group:state:changed",function(){return _this.trigger.hide()}),this.on("action:loading",function(){return _this.overlay.hide()}),this.on("action:success",function(){return _this.input.val("")})},Add}(Details.Actionbar.Groups.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Details.Actionbar.Groups.Manage=function(_super){function Manage(){return this._removeRow=__bind(this._removeRow,this),this._populateContainer=__bind(this._populateContainer,this),this._addRow=__bind(this._addRow,this),_ref=Manage.__super__.constructor.apply(this,arguments)}return __extends(Manage,_super),Manage.prototype.assignHelpers=function(){return this.overlay=new Overlay("#manage-groups",{openTrigger:this.trigger,onHide:this._populateContainer}),this.form=this.overlay.wrapper.find("form"),this.container=this.form.find(".groups"),this.container.identify(),this.addTrigger=$('<a href="#" id="add-group">New Group</a>'),this.overlay.wrapper.find(".overlay-header").append(this.addTrigger),this.container.sortable({handle:".handle",items:"div.group-row"})},Manage.prototype.performAction=function(){var data;return data=this.form.serialize(),data+="&"+csrf.param+"="+encodeURIComponent(csrf.token),this.owner.performAction("manageGroups",data)},Manage.prototype._addRow=function(event){var element;return event&&event.stop(),element=this._groupElement({id:uniqueId()}),this.container.append(element),element.find("input").focus()},Manage.prototype._groupElement=function(group){var html;return html=this.template.evaluate(group),html=html.replace(/g\[/g,"groups["),$(html)},Manage.prototype._observeElements=function(){var _this=this;return this.addTrigger.on("click",this._addRow),this.container.on("click","a.remove",this._removeRow),this.on("details:groups:registered",this._populateContainer),this.on("group:state:reverted",function(){return _this.trigger.show()}),this.on("group:state:changed",function(){return _this.trigger.hide()}),this.on("action:loading",function(){return _this.overlay.hide()})},Manage.prototype._populateContainer=function(){var group,_i,_len,_ref1,_results;if(this.container.html(""),!this.owner.groups.any())return this._addRow();for(_ref1=this.owner.groups,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)group=_ref1[_i],_results.push(this.container.append(this._groupElement(group)));return _results},Manage.prototype._removeRow=function(event){return event.stop(),$(event.target).parents(".group-row").remove()},Manage}(Details.Actionbar.Groups.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Details.Actionbar.Groups.Update=function(_super){function Update(){return this._toggleTriggers=__bind(this._toggleTriggers,this),this._success=__bind(this._success,this),this._assignState=__bind(this._assignState,this),this._hideMenu=__bind(this._hideMenu,this),_ref=Update.__super__.constructor.apply(this,arguments)}return __extends(Update,_super),Update.prototype.assignHelpers=function(){return this.menu=this.owner.menu},Update.prototype._hideMenu=function(){return this.owner.hideMenu(this.menu)},Update.prototype.performAction=function(){var data;return data=defaultParams(),data["group_ids[]"]=this.owner.selectedGroupIds(),this.owner.performAction("updateGroups",data)},Update.prototype._assignState=function(){return this.state=this._state()},Update.prototype._observeElements=function(){return this.menu.on("click","input:checkbox",this._toggleTriggers),this.on("groups:rendered",this._assignState),this.trigger.on("click",this._performAction),this.on("action:loading",this._hideMenu),this.on("action:success",this._success)},Update.prototype._state=function(){var c,states,_i,_len,_ref1,_ref2;for(states=[],_ref1=this.menu.find("input:checkbox"),_i=0,_len=_ref1.length;_len>_i;_i++)c=_ref1[_i],states.push(null!=(_ref2=c.checked)?_ref2:{x:"-"});return states.join("")},Update.prototype._success=function(){return this.state=this._state(),this._trigger("group:state:reverted")},Update.prototype._toggleTriggers=function(){return this._trigger("group:state:"+(this._state()===this.state?"reverted":"changed"))},Update}(Details.Actionbar.Groups.Helper)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Details.Actionbar.Rating=function(){function Rating(element){this.element=element,this._update=__bind(this._update,this),this.element.exists()&&(this.assignElements(),this.observeElements())}return Rating.prototype.assignElements=function(){return this.badge=this.element.find(".badge"),this.menu=this.element.find(".rating-menu"),this.wrapper=this.menu.find(".ajaxful-rating-wrapper"),this.value=this.wrapper.find("li.show-value"),this.triggers=this.menu.find("a")},Rating.prototype.observeElements=function(){return this.triggers.on("ajax:success",this._update)},Rating.prototype._update=function(event,data){var number;return number=parseInt(data.rating,10),this.value.css({width:""+20*number+"%"}),this.badge.text(number),number?this.element.removeClass("not-set"):this.element.addClass("not-set")},Rating}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Details.Associations=function(_super){function Associations(){return this._visitRecordDetails=__bind(this._visitRecordDetails,this),this._updateAssociatedRecord=__bind(this._updateAssociatedRecord,this),this._togglePrimaryContact=__bind(this._togglePrimaryContact,this),this._toggleExtraRecords=__bind(this._toggleExtraRecords,this),this._showForm=__bind(this._showForm,this),this._removeRecord=__bind(this._removeRecord,this),this._hideForm=__bind(this._hideForm,this),this._handleForm=__bind(this._handleForm,this),this._addAssociatedRecord=__bind(this._addAssociatedRecord,this),_ref=Associations.__super__.constructor.apply(this,arguments)}return __extends(Associations,_super),Associations.prototype.initialize=function(details,namespace){return this.details=details,this.namespace=namespace,this.pluralNamespace=this.namespace.pluralize(),this.assignElements(),this.observeElements()},Associations.prototype.assignElements=function(){return this.element=this.details.container.find("#add-"+this.pluralNamespace),this.buttons={add:this.element.find("#add-"+this.namespace),cancel:this.element.find(".return-button")},this.form=this.element.find(".linked-records__record-form"),this.list=this.element.find(".linked-records__list"),this.emptyMessage=this.element.find(".empty"),this.extraTrigger=this.element.find("a.show-more")},Associations.prototype.observeElements=function(){var _ref1;return this.on("associated-"+this.namespace+":added",this._addAssociatedRecord),this.on("associated-"+this.namespace+":updated",this._updateAssociatedRecord),this.on("associated-form:show",this._hideForm),("buyer"===(_ref1=this.namespace)||"contact"===_ref1)&&(this.buttons.add.on("click",this._showForm),this.buttons.cancel.on("click",this._hideForm),this.element.on("click",".edit-button",this._showForm)),this.list.on("ajax:success","a.remove-button",this._removeRecord),this.list.on("click",".linked-record[data-url]",this._visitRecordDetails),this.list.on("click",".linked-record__primary",this._togglePrimaryContact),this.extraTrigger.on("click",this._toggleExtraRecords)},Associations.prototype._addAssociatedRecord=function(event,data){return this.list.prepend(data.html),this.emptyMessage.hide(),this._hideForm()},Associations.prototype._handleForm=function(event){return event.preventDefault(),$.rails.handleRemote($(event.target))},Associations.prototype._hideForm=function(event){return event&&event.preventDefault(),this.list.show(),this.form.hide().html(""),this.buttons.add.show(),this.buttons.cancel.hide()},Associations.prototype._removeRecord=function(event){var rows;return $(event.target).closest(".linked-record").remove(),rows=this.list.find(".linked-record"),rows.exists()?rows.filter(":not(:visible)").first().show():this.emptyMessage.show()},Associations.prototype._showForm=function(event){var url,_this=this;return event.preventDefault(),this.trigger("associated-form:show"),url=$(event.currentTarget).data("url"),$.ajax({url:url,data:{"X-Modal":"content-only"}}).done(function(response){return _this.buttons.add.hide(),_this.list.hide(),_this.buttons.cancel.show(),_this.form.show().html(response),_this.form.find("form").on("submit",_this._handleForm)})},Associations.prototype._toggleExtraRecords=function(event){var e,rows,_i,_len,_ref1;if(event.stop(),rows=this.list.find(".linked-record"),rows.filter(":visible").length>5){for(rows.hide(),_ref1=rows.toArray().slice(0,5),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],$(e).show();return this.extraTrigger.text("Show More")}return rows.show().css({display:"flex"}),this.extraTrigger.text("Show Less")},Associations.prototype._togglePrimaryContact=function(event){var trigger,_this=this;return event.stop(),trigger=$(event.currentTarget).closest(".linked-record__primary"),$.ajax({url:trigger.data("url"),type:"post"}).done(function(data){return _this.list.find(".linked-record").removeClass("is-primary-contact"),_this.list.find("#"+data.id).addClass("is-primary-contact"),_this._updateLeadHeader(data)})},Associations.prototype._updateAssociatedRecord=function(event,data){var element;return element=$(data.html),this.list.find("#"+element.attr("id")).replaceWith(element),this._updateLeadHeader(data)},Associations.prototype._updateLeadHeader=function(data){var existingHeader;return existingHeader=$(".lead-header"),null!=data.header?existingHeader.show().replaceWith(data.header):existingHeader.hide(),this._hideForm()},Associations.prototype._visitRecordDetails=function(event){var anchor,row,target,url;return target=$(event.target),anchor=target.closest("a"),anchor.is("[data-modal],.phone-call-link,.open-overlay,.edit-button,.remove-button")?void 0:(row=target.closest(".linked-record[data-url]"),url=row.data("url"),event.metaKey||event.ctrlKey?window.open(url):pjax.loadUrl(url))},Associations}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Details.Associations.Modal=function(){function Modal(autocompleteUrl){this.autocompleteUrl=autocompleteUrl,this._queueSearch=__bind(this._queueSearch,this),this._performSearch=__bind(this._performSearch,this),this._associateRecord=__bind(this._associateRecord,this),this.assignElements(),this.observeElements()}return Modal.prototype.assignElements=function(){return this.element=$(".linked-records__modal"),this.form=this.element.find(".linked-records__form"),this.formActions=this.element.find(".linked-records__actions"),this.search=this.element.find(".linked-records__search-input"),this.searchResults=this.element.find(".linked-records__search-results"),this.delay="test"===environment?0:500,$(document).trigger("uniform:refresh")},Modal.prototype.observeElements=function(){return this.search.on("input",this._queueSearch),this.searchResults.on("click",".result",this._associateRecord),new Details.MultipleValueFields(this.element),this.element.on("click",".linked-record__button",this._resize)},Modal.prototype._associateRecord=function(event){var record;return record=$(event.target).closest(".result"),$.ajax({url:record.data("url"),type:"post"})},Modal.prototype._performSearch=function(){var term,_this=this;return term=this.search.val(),this.searchResults.addClass("is-loading"),this._resize(),$.ajax({url:this.autocompleteUrl,type:"get",data:{term:term}}).done(function(data){return _this.searchResults.removeClass("is-loading"),_this.searchResults.html(data.html),_this._resize()
})},Modal.prototype._queueSearch=function(){var value;if(clearTimeout(this._searchTimeout),value=this.search.val(),value.blank())this.form.show(),this.formActions.show(),this.searchResults.hide();else{if(value.length<3)return;this._searchTimeout=setTimeout(this._performSearch,this.delay),this.form.hide(),this.formActions.hide(),this.searchResults.show()}return this._resize()},Modal.prototype._resize=function(){return $(document).trigger("modal:resize")},Modal}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Details.Form=function(_super){function Form(){return this._updateLeadCampaign=__bind(this._updateLeadCampaign,this),this._success=__bind(this._success,this),this.save=__bind(this.save,this),_ref=Form.__super__.constructor.apply(this,arguments)}return __extends(Form,_super),Form.prototype.initialize=function(details,element){return this.details=details,this.element=element,this.object=this.details.object,this.assignElements(),this.observeElements()},Form.prototype.assignElements=function(){return this.message=Message.create(),this.url=this.element.attr("action"),this._createHeader(),this._assignLeadCampaignData()},Form.prototype.observeElements=function(){return this.element.on("submit",this.save)},Form.prototype.save=function(event){return event.stop(),$.ajax({url:this.url,data:this.element.serialize(),type:"put",message:"Saving"}).done(this._success)},Form.prototype._assignLeadCampaignData=function(){var campaign,select;return campaign=this.element.find(".lead-campaign-field"),campaign.exists()?(select=campaign.find("select"),this.campaignId={previousValue:select.val(),value:select.val(),select:select,anchor:campaign.find("a.lead-campaign-source")}):void 0},Form.prototype._createHeader=function(){return new Details.Form.Header(this)},Form.prototype._option=function(value,label){return label||(label=value),$('<option value="'+value+'">'+label+"</option>")},Form.prototype._success=function(object){return this.object=object,this.details.object=this.object,this.message.flash(this.details.label.capitalize()+" updated.","notice"),this.trigger("form:updated"),this._updateLeadCampaign()},Form.prototype._updateLeadCampaign=function(){var anchor,value;if(null!=this.campaignId)return value=this.campaignId.select.val(),this.campaignId.previousValue=this.campaignId.value,this.campaignId.value=value,this._updateStatuses(),anchor=this.campaignId.anchor,value.blank()?anchor.hide():anchor.show().attr("href",anchor.data("url").replace("ID",value))},Form.prototype._updateStatuses=function(){var _this=this;if(this.campaignId.previousValue!==this.campaignId.value)return $.ajax({url:""+this.url+"/updated_status",type:"get",message:"no-message"}).done(function(html){var select;return select=_this.element.find("[name*='[status]']"),select.closest(".field").replaceWith(html),$.uniform()})},Form}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Details.Form.Header=function(_super){function Header(){return this._save=__bind(this._save,this),this.save=__bind(this.save,this),this.edit=__bind(this.edit,this),this.cancel=__bind(this.cancel,this),_ref=Header.__super__.constructor.apply(this,arguments)}return __extends(Header,_super),Header.prototype.initialize=function(form){return this.form=form,this.object=this.form.object,this.assignElements(),this.observeElements(),this.display()},Header.prototype.assignElements=function(){return this.element=this.form.element.find("#content-header"),this.sections={display:this.element.find(".display-mode"),contactInfo:this.element.find(".contact-info"),locationInfo:this.element.find(".extra-location-info"),edit:this.element.find(".edit-mode"),empty:this.element.find(".is-empty")},this.fields=this._assignFields(),this.triggers={edit:this.element.find("a.edit-button"),save:this.element.find("a.save-button"),cancel:this.element.find("a.cancel-button"),clipboard:this.element.find("a.clipboard")}},Header.prototype.observeElements=function(){return this.on("form:updated",this._save),this.triggers.edit.exists()?(this.sections.display.on("click",this.edit),this.triggers.cancel.on("click",this.cancel),this.triggers.save.on("click",this.save),this._performAdditionalObservations()):void 0},Header.prototype.cancel=function(event){return event.stop(),this.display(),this._revertEditFields()},Header.prototype.display=function(){return this._updateFields(),this.sections.edit.hide(),this.sections.display.show()},Header.prototype.edit=function(event){return event.preventDefault(),$(event.target).is(".phone-call-link")?void 0:(this.sections.display.hide(),this.sections.edit.show())},Header.prototype.save=function(event){return this.form.save(event)},Header.prototype._save=function(){return this.object=this.form.object,this.display()},Header.prototype._updateFields=function(){return this._updateDisplayFields(),this._updateEditFields()},Header.prototype._assignFields=function(){},Header.prototype._performAdditionalObservations=function(){},Header.prototype._revertEditFields=function(){},Header.prototype._updateDisplayFields=function(){},Header.prototype._updateEditFields=function(){},Header}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Details.Form.Multiple=function(_super){function Multiple(){return this._setHeight=__bind(this._setHeight,this),this._adjustFields=__bind(this._adjustFields,this),this._addInput=__bind(this._addInput,this),_ref=Multiple.__super__.constructor.apply(this,arguments)}return __extends(Multiple,_super),Multiple.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Multiple.prototype.assignElements=function(){return this.button=this.element.find(".add-input")},Multiple.prototype.observeElements=function(){return this.button.on("click",this._addInput),this.on("multiples:new-height",this._setHeight),this.on("multiples:refresh-height",this._adjustFields)},Multiple.prototype.createInput=function(){var clone,e,element,match,n,name,newId,newName,_i,_j,_len,_len1,_ref1,_ref2;for(clone=this.element.find(".details-header__multiple-inputs-row").last().clone(),_ref1=clone.find("select,input"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],$(e).attr("value","").val("");if(name=clone.find("input:text").attr("name"),match=name.match(/\[phone_numbers\]\[(\d+)\]/))for(n=parseInt(match[1]),_ref2=clone.find("[name*='[phone_numbers]["+n+"]']"),_j=0,_len1=_ref2.length;_len1>_j;_j++)e=_ref2[_j],element=$(e),newName=element.attr("name").replace("[phone_numbers]["+n+"]","[phone_numbers]["+(n+1)+"]"),newId=element.attr("id").replace(""+n,""+(n+1)),element.attr({name:newName,id:newId});return clone},Multiple.prototype._addInput=function(){var newInput;if(!this._hasEmptyInputs())return newInput=this.createInput(),newInput.insertAfter(this.element.find(".details-header__multiple-inputs-row").last()),newInput.find("select,input").first().focus(),this._adjustFields(),this.trigger("multiple-field:added",newInput)},Multiple.prototype._adjustFields=function(){var heights,maxHeight;return heights=$(".details-header__multiple-inputs").css({height:"auto"}).map(function(i,e){return $(e).height()}),maxHeight=heights.sort().last(),maxHeight?this.trigger("multiples:new-height",maxHeight-16):void 0},Multiple.prototype._hasEmptyInputs=function(){var e,result,_i,_len,_ref1;for(result=!1,_ref1=this._inputs(),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],""===$(e).val()&&(result=!0);return result},Multiple.prototype._inputs=function(){return this.element.find("input")},Multiple.prototype._setHeight=function(event,height){return this.element.css({height:""+height+"px"})},Multiple}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Details.Form.Observer=function(){function Observer(element){this.element=element,this.__resetData=__bind(this.__resetData,this),this._resetData=__bind(this._resetData,this),this._preventDataLoss=__bind(this._preventDataLoss,this),this._stopObservations=__bind(this._stopObservations,this),this.element.exists()&&(this._resetData(),this.observeElements(),Details.registerCallback(this.__resetData),this.eligibleForPrevention=!1,this._message="Your form contains unsaved changes. Those changes will be lost if you leave this page.")}return Observer.prototype.observeElements=function(){return this.message=Message.create(),$(window).on("load",this.__resetData),$(document).on("details:groups:success",this.__resetData),pjax.on("complete",this.__resetData),this.element.on("submit",this._resetData),pjax.on("beforeSend",this._preventDataLoss),pjax.on("success",this._stopObservations)},Observer.prototype._formattedData=function(){var data;return data=this.element.serialize(),data=data.replace(/authenticity_token=.*?&/,"")},Observer.prototype._stopObservations=function(){return this.eligibleForPrevention?(pjax.off("beforeSend",this._preventPjaxDataLoss),pjax.off("success",this._stopObservations)):void 0},Observer.prototype._preventDataLoss=function(event){return this.element.inDOM()&&(this.eligibleForPrevention=!0,this.data!==this._formattedData())?confirm(this._message)?void 0:event.preventDefault():void 0},Observer.prototype._resetData=function(){return this.data=this._formattedData()},Observer.prototype.__resetData=function(){return setTimeout(this._resetData,100)},Observer}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Details.Loader=function(){function Loader(details){var delay;this.details=details,this._abort=__bind(this._abort,this),this.loadSections=__bind(this.loadSections,this),this.sections=this.details.container.find("[data-details-url]"),this.sectionCount=this.sections.length,this.requests=[],pjax.on("send",this._abort),delay="test"===environment?0:10,setTimeout(this.loadSections,delay)}return Loader.prototype.loadSections=function(){var s,section,_i,_len,_ref,_results;if(0===this.sectionCount)return this._loaded();for(_ref=this.sections,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)s=_ref[_i],section=$(s),_results.push(this.requests.push($.ajax({url:section.data("details-url"),type:"get",message:"no-message"}).done(this._loadSection(section))));return _results},Loader.prototype._abort=function(){var request,_i,_len,_ref;for(_ref=this.requests,_i=0,_len=_ref.length;_len>_i;_i++)request=_ref[_i],request.abort();return pjax.off("send",this._abort)},Loader.prototype._loaded=function(){return this.details.loaded(),pjax.off("send",this._abort)},Loader.prototype._loadSection=function(section){var _this=this;return function(section){return function(html){return section.replaceWith(html),null!=_this.details.url&&pjax.ensureUrl(_this.details.url),$.uniform(),_this.sectionCount--,0===_this.sectionCount?_this._loaded():void 0}}(section)},Loader}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Details.Permissions=function(){function Permissions(details,element){this.details=details,this.element=element,this._toggle=__bind(this._toggle,this),this._submit=__bind(this._submit,this),this.assignElements(),this.observeElements()}return Permissions.prototype.assignElements=function(){return this.tab=this.element.find(".details__permissions-tab"),this.form=this.element.find("form")},Permissions.prototype.observeElements=function(){return this.tab.on("click",this._toggle),this.form.on("click","input:checkbox",this._submit)},Permissions.prototype._submit=function(event){var all,checkbox,count,delay,_this=this;return checkbox=$(event.target).closest(".details__permissions-option").find("input:checkbox"),count=this.form.find(":checked").length,all=this.form.find("input:checkbox#all_users"),all.is(checkbox)?(this.form.find("input:checkbox").not(all).check(!0),all.check(!0)):all.check(0===count),delay="test"===environment?0:100,setTimeout(function(){return _this.form.submit()},delay)},Permissions.prototype._toggle=function(){return this.element.toggleClass("is-expanded")},Permissions}()}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Details.Photos=function(_super){function Photos(){return _ref=Photos.__super__.constructor.apply(this,arguments)}return __extends(Photos,_super),Photos.prototype.initialize=function(details){var e,_i,_len,_ref1,_results;for(this.details=details,_ref1=this.photos(),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],_results.push(new Details.Photos.Photo($(e),this));return _results},Photos.prototype.photos=function(){return this.details.container.find(".photo")},Photos.prototype.refresh=function(){return this.photos().exists()?void 0:pjax.reload()},Photos}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Details.Photos.Photo=function(){function Photo(element,owner){this.element=element,this.owner=owner,this._remove=__bind(this._remove,this),this.assignElements(),this.observeElements()}return Photo.prototype.assignElements=function(){return this.removeTrigger=this.element.find("a.remove")},Photo.prototype.observeElements=function(){return this.removeTrigger.on("ajax:success",this._remove)},Photo.prototype._remove=function(){return this.element.remove(),this.owner.refresh()},Photo}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Details.Photos.Show=function(){function Show(form){this.form=form,this._resizeImage=__bind(this._resizeImage,this),this._openImage=__bind(this._openImage,this),this.assignElements(),this.observeElements(),this._resizeImage()}return Show.prototype.assignElements=function(){return this.img=this.form.find("img"),this.parent=top},Show.prototype.observeElements=function(){var _this=this;return this.img.on("click",this._openImage),this.img.on("load",this._resizeImage),$(this.parent).on("resize",this._resizeImage),$(function(){return setTimeout(_this._resizeImage,50)})},Show.prototype._openImage=function(){return this.parent.open(this.img.attr("src"))},Show.prototype._resizeImage=function(){var difference,heights,newHeight;return heights={max:$(this.parent).height()-30,form:this.form.height(),img:this.img.height()},difference=heights.form-heights.max,newHeight=heights.img-difference,newHeight>heights.img||this.img.css({height:""+newHeight+"px"}),this.parent.overlay.refreshHeight(!0)},Show}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Details.Sidebar=function(){function Sidebar(details,element,cookieName){this.details=details,this.element=element,this.cookieName=cookieName,this.submitSearch=__bind(this.submitSearch,this),this.returnToSearch=__bind(this.returnToSearch,this),this.onNavigationLinkClick=__bind(this.onNavigationLinkClick,this),this.ensureProperCookie=__bind(this.ensureProperCookie,this),this.message=this.details.message,this.cookie=SearchScreen.Cookie.get(this.cookieName),this.assignElements(),this.observeElements()}return Sidebar.prototype.assignElements=function(){return this.form=this.element.find("form").first(),this.input=this.form.find("input:text"),this.returnToSearchTrigger=this.element.find("#quick-return"),this.nextTrigger=this.element.find("#quick-next"),this.previousTrigger=this.element.find("#quick-previous"),this.navigationLinks=this.element.find(".navigation a")},Sidebar.prototype.ensureProperCookie=function(){return SearchScreen.Cookie.set(this.cookieName,this.cookie)},Sidebar.prototype.observeElements=function(){return this.returnToSearchTrigger.on("click",this.returnToSearch),this.form.on("submit",this.submitSearch),this.nextTrigger.on("click",this.ensureProperCookie),this.previousTrigger.on("click",this.ensureProperCookie),this.navigationLinks.on("click",this.onNavigationLinkClick)},Sidebar.prototype.onNavigationLinkClick=function(event){var anchor;return anchor=$(event.target),"#"===anchor.attr("href")||anchor.hasClass("open-overlay")||event.metaKey||event.ctrlKey?void 0:(anchor.hasClass("active")&&event.stop(),$(document).trigger("sidebar:clicked"))},Sidebar.prototype.returnToSearch=function(event){return SearchScreen.Cookie.returnToSearch(this.cookieName,this.cookie),this.onNavigationLinkClick(event)},Sidebar.prototype.submitSearch=function(event){var cookieData,query,url;return event.stop(),query=this.input.val(),query.blank()?void 0:(url=this.form.attr("action"),cookieData=""+url+"?query="+encodeURIComponent(query),SearchScreen.Cookie.returnToSearch(this.cookieName,cookieData),pjax.loadUrl(url))},Sidebar}()}.call(this),function(){}.call(this),function(){this.Account={}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Account.Billing=function(_super){function Billing(){return this._updateCardNumber=__bind(this._updateCardNumber,this),this._loadMore=__bind(this._loadMore,this),_ref=Billing.__super__.constructor.apply(this,arguments)}return __extends(Billing,_super),Billing.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Billing.prototype.assignElements=function(){return this.hiddenInvoices=this.element.find(".invoice:hidden"),this.loadMoreTrigger=this.element.find("a.load-more"),this.cardNumber=this.element.find(".credit-card .value")},Billing.prototype.observeElements=function(){return this.hiddenInvoices.exists()?this.loadMoreTrigger.on("click",this._loadMore):this.loadMoreTrigger.hide(),this.on("credit_card:updated",this._updateCardNumber)},Billing.prototype._loadMore=function(event){var invoice,invoices,_i,_len;for(event.stop(),invoices=this.hiddenInvoices.toArray().splice(0,6),_i=0,_len=invoices.length;_len>_i;_i++)invoice=invoices[_i],$(invoice).show();return this.hiddenInvoices=this.element.find(".invoice:hidden"),this.hiddenInvoices.exists()?void 0:this.loadMoreTrigger.hide()},Billing.prototype._updateCardNumber=function(event,number){return this.cardNumber.text(number)},Billing}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Account.Community=function(_super){function Community(){return this._openDialog=__bind(this._openDialog,this),_ref=Community.__super__.constructor.apply(this,arguments)}return __extends(Community,_super),Community.prototype.initialize=function(element,defaultFrameUrl){return this.element=element,this.defaultFrameUrl=defaultFrameUrl,this.assignElements(),this.observeElements()},Community.prototype.assignElements=function(){return this.section=this.element.find(".photo-section"),this.label=this.section.find("label"),this.field=this.section.find("input:file"),this.avatar=this.section.find(".avatar img")},Community.prototype.observeElements=function(){var _this=this;return this.element.data("message","Saving"),this.label.on("click",this._openDialog),this.avatar.on("click",this._openDialog),this.field.on("change",function(){return _this.element.submit()})},Community.prototype._openDialog=function(event){return event.stop(),this.field.click()},Community}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Account.EmailNotifications=function(){function EmailNotifications(){var e,_i,_len,_ref;for(_ref=$("section.notification"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],new Account.EmailNotifications.Section($(e))}return EmailNotifications}(),Account.EmailNotifications.Section=function(){function Section(element){this.element=element,this._toggleSelections=__bind(this._toggleSelections,this),this._toggleCheckbox=__bind(this._toggleCheckbox,this),this.assignElements(),this.observeElements(),this._isSelected()&&this.checkbox.check(!0)}return Section.prototype.assignElements=function(){return this.checkbox=this.element.find(".select-all input"),this.checkboxes=this.element.find(".field input")},Section.prototype.observeElements=function(){return this.checkbox.on("click",this._toggleSelections),this.checkboxes.on("click",this._toggleCheckbox)},Section.prototype._isSelected=function(){return!this.checkboxes.filter(":not(:checked)").exists()},Section.prototype._toggleCheckbox=function(){return this.checkbox.check(this._isSelected())},Section.prototype._toggleSelections=function(){return this.checkboxes.check(!this._isSelected())},Section}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Account.Emails=function(_super){function Emails(){return this._refreshHeight=__bind(this._refreshHeight,this),this._addNewEmail=__bind(this._addNewEmail,this),_ref=Emails.__super__.constructor.apply(this,arguments)}return __extends(Emails,_super),Emails.prototype.initialize=function(){return this.assignElements(),this.observeElements()},Emails.prototype.assignElements=function(){var e,_i,_len,_ref1,_results;for(this.message=Message.create(),this.newEmailForm=$(".content-header form"),this.emailContainer=$(".content"),_ref1=this.emailContainer.find(".email-account"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],_results.push(new Account.Email($(e)));return _results},Emails.prototype.observeElements=function(){return this.newEmailForm.data("message","Saving"),this.newEmailForm.on("ajax:success",this._addNewEmail),this.on("overlay:refresh-height",this._refreshHeight)},Emails.prototype._addNewEmail=function(event,html){var element;return element=$(html),this.emailContainer.append(element),new Account.Email(element),this.message.flash("Verification email sent."),this.newEmailForm.reset(),this._refreshHeight()},Emails.prototype._refreshHeight=function(){return top.overlay.refreshHeight()},Emails}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Account.Email=function(_super){function Email(){return this._updateDisplay=__bind(this._updateDisplay,this),this._update=__bind(this._update,this),this._remove=__bind(this._remove,this),this._display=__bind(this._display,this),this.edit=__bind(this.edit,this),this.display=__bind(this.display,this),_ref=Email.__super__.constructor.apply(this,arguments)}return __extends(Email,_super),Email.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Email.prototype.assignElements=function(){return this.message=Message.create(),this.sections={display:this.element.find(".display"),edit:this.element.find(".edit")},this.triggers={"delete":this.sections.display.find(".remove-button"),edit:this.sections.display.find(".edit-button"),verification:this.sections.display.find(".resend-button"),save:this.sections.edit.find(".save-button"),cancel:this.sections.edit.find(".cancel-button")},this.form=this.sections.edit.find("form"),this.address=this.sections.display.find(".address")},Email.prototype.display=function(event){return event&&event.stop(),this.sections.edit.hide(),this.sections.display.show(),this.trigger("overlay:refresh-height")},Email.prototype.edit=function(event){return event.stop(),this.trigger("emails:display",this),this.sections.display.hide(),this.sections.edit.show(),this.trigger("overlay:refresh-height")},Email.prototype.observeElements=function(){return this.triggers["delete"].data("message","Deleting"),this.triggers["delete"].on("ajax:success",this._remove),this.triggers.verification.data("message","Resending verification"),this.address.on("click",this.edit),this.triggers.edit.on("click",this.edit),this.triggers.cancel.on("click",this.display),this.triggers.save.on("click",this._update),this.on("emails:display",this._display),this.form.on("submit",this._update)},Email.prototype._display=function(event,email){return email!==this?this.display():void 0},Email.prototype._remove=function(){return this.element.remove(),this.trigger("overlay:refresh-height"),this.stopAllObservations()},Email.prototype._update=function(event){return event.stop(),$.ajax({url:this.form.attr("action"),type:"put",data:this.form.serialize(),message:"Saving"}).done(this._updateDisplay)},Email.prototype._updateDisplay=function(newAddress){return this.message.flash("Email updated."),this.sections.display.find(".address").text(newAddress),this.display()},Email}(GCObject)}.call(this),function(){Account.Form=function(){function Form(element){var e,_i,_len,_ref;for(this.element=element,_ref=this.element.find("section,div.section"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],new Account.Form.Section($(e),this)}return Form.prototype.save=function(section){return $.ajax({url:this.element.attr("action"),type:"post",data:this.element.serialize(),message:"Saving"}).done(this._success(section))},Form.prototype.reset=function(){return this.element.reset(),this.element.select("select").change()},Form.prototype._success=function(section){return function(data){return section.updateDisplayValue(data),section.updateDefaults(),section.display()}},Form}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Account.Form.Section=function(){function Section(element,form){this.element=element,this.form=form,this._save=__bind(this._save,this),this._edit=__bind(this._edit,this),this._display=__bind(this._display,this),this.assignElements(),this.observeElements(),Account.Form.Section.cache.push(this)}return Section.cache=[],Section.displayAll=function(){var section,_i,_len,_ref,_results;for(_ref=this.cache,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)section=_ref[_i],_results.push(section.display());return _results},Section.prototype.assignElements=function(){return this.displayElement=this.element.find(".display"),this.editElement=this.element.find(".edit"),this.editButton=this.element.find(".edit-button"),this.saveButton=this.element.find(".save-button"),this.cancelButton=this.element.find(".cancel-button"),this.label=this.element.find(".label,h3").text().toLowerCase().underscore().replace(/[^a-z0-9]/gi,""),"companyname"===this.label&&(this.oldLabel=this.label,this.label="name"),this.displayValue=this.displayElement.find(".value")},Section.prototype.observeElements=function(){var _this=this;return this.displayElement.on("click",this._edit),this.cancelButton.on("click",this._display),this.saveButton.on("click",this._save),this.element.find("input").on("keyup",function(event){return 13===event.keyCode?_this._save(event):void 0})},Section.prototype.displayAll=function(){return Account.Form.Section.displayAll(),this.form.reset()},Section.prototype.display=function(){return this.editElement.hide(),this.displayElement.show()},Section.prototype.edit=function(){var element;return this.displayAll(),this.displayElement.hide(),this.editElement.show(),element=this.element.find("input,select").first(),element?element.focus():void 0},Section.prototype.updateDefaults=function(){var e,input,_i,_len,_ref,_results;for(_ref=this.element.find("input"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],input=$(e),_results.push(input.attr("value",input.val()));return _results},Section.prototype.updateDisplayValue=function(data){return this.displayValue.text(data[this.label]),"name"!==this.label||this.oldLabel?void 0:$("#user-menu-full-name").text(data[this.label])},Section.prototype._createStrategyInput=function(){return this.form.element.find("input.save-strategy").remove(),this.form.element.append($("<input>").attr({type:"hidden","class":"save-strategy",name:"save_strategy",value:this.saveButton.data("label")}))},Section.prototype._display=function(event){return event.stop(),this.display(),this.form.reset()},Section.prototype._edit=function(event){return event.stop(),this.edit()},Section.prototype._save=function(event){return event.stop(),this._createStrategyInput(),this.form.save(this)},Section}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Account.NavigationHistory=function(){function NavigationHistory(){this._replaceMenu=__bind(this._replaceMenu,this),this._refresh=__bind(this._refresh,this),Observations.on("navigation-history:update",this._refresh)}return NavigationHistory.prototype._refresh=function(event,data){return $.ajax({url:data.url,method:"get",message:"no-message"}).done(this._replaceMenu)},NavigationHistory.prototype._replaceMenu=function(html){return $("nav.account-navigation .nav-item.history").replaceWith(html)},NavigationHistory}(),"test"!==environment&&new Account.NavigationHistory}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Account.ObjectList=function(){function ObjectList(element){this.element=element,this._removeRow=__bind(this._removeRow,this),this.assignElements(),this.observeElements()}return ObjectList.prototype.assignElements=function(){return this.triggers={remove:this.element.find("a.delete-button"),resend:this.element.find("a.pending")}},ObjectList.prototype.observeElements=function(){return this.triggers.remove.on("ajax:success",this._removeRow)},ObjectList.prototype._removeRow=function(event){return $(event.target).parents("tr").remove(),this.element.find("tbody tr").exists()?void 0:setTimeout(function(){return pjax.reload()},0)},ObjectList}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Account.Roles=function(){function Roles(element){this.element=element,this._togglePermissions=__bind(this._togglePermissions,this),this._toggleCampaigns=__bind(this._toggleCampaigns,this),this._showCampaigns=__bind(this._showCampaigns,this),this.assignElements(),this.observeElements()}return Roles.prototype.assignElements=function(){return this.select=this.element.find(".selector select"),this.permissionsContainer=this.element.find(".permissions__fields"),this.campaignSelect={field:this.element.find(".field.campaigns"),element:this.element.find(".multi-selector"),selected:this.element.find(".multi-selector .selected"),optionsContainer:this.element.find(".multi-selector .selector-options")},this._togglePermissions()},Roles.prototype.observeElements=function(){return this.select.on("change",this._togglePermissions),this.campaignSelect.selected.on("click",this._showCampaigns),this.permissionsContainer.on("click",".leads_permission",this._toggleCampaigns)},Roles.prototype._showCampaigns=function(){return this.campaignSelect.optionsContainer.toggle()},Roles.prototype._toggleCampaigns=function(){var checkbox;return checkbox=this.permissionsContainer.find("input.leads_permission"),checkbox.is(":checked")?this.campaignSelect.field.show():this.campaignSelect.field.hide(),top.overlay.refreshHeight(!0)
},Roles.prototype._togglePermissions=function(){var permissions,value;return value=this.select.val(),permissions=this.permissionsContainer.find(".permissions__options"),"manager"===value?(permissions.hide(),this.campaignSelect.field.is(".invitation")?this.campaignSelect.field.hide():this.campaignSelect.field.show()):(permissions.show(),this._toggleCampaigns()),top.overlay.refreshHeight(!0)},Roles}()}.call(this),function(){this.Admin={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Admin.Accounts=function(){function Accounts(){this._planChange=__bind(this._planChange,this),this._billingChange=__bind(this._billingChange,this),this.assignElements(),this.observeElements()}return Accounts.prototype.assignElements=function(){return this.form={billing:$("#account_billing_system"),subscriptionFrequency:$("#account_subscription_frequency"),plan:$("#account_plan"),infusionsoftContact:$("#account_infusion_soft_contact_id")}},Accounts.prototype.observeElements=function(){return this.form.billing.on("change",this._billingChange),this.form.plan.on("change",this._planChange)},Accounts.prototype._hideBillingFields=function(){return this.form.subscriptionFrequency.closest(".field").hide(),this.form.infusionsoftContact.closest(".field").hide()},Accounts.prototype._showBillingFields=function(){return this.form.subscriptionFrequency.closest(".field").show(),this.form.infusionsoftContact.closest(".field").show()},Accounts.prototype._billingChange=function(){return"infusion_soft"===this.form.billing.val()?this._showBillingFields():this._hideBillingFields()},Accounts.prototype._planChange=function(){return"standard"!==this.form.plan.val()?this.form.billing.val("none").change():void 0},Accounts}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Admin.Accounts.Show=function(){function Show(){this._updateRoles=__bind(this._updateRoles,this),this._hideOverlay=__bind(this._hideOverlay,this),this.assignElements(),this.observeElements()}return Show.prototype.assignElements=function(){return this.triggers={role:$("a.edit-role"),clearEmail:$("#clear-email form")}},Show.prototype.observeElements=function(){return this.triggers.role.on("ajax:success",this._updateRoles),this.triggers.clearEmail.on("submit",this._hideOverlay)},Show.prototype._hideOverlay=function(){return Overlay.cache["clear-email"].hide()},Show.prototype._updateRoles=function(event,data){return $(".field.roles .value span").text(data.roles)},Show}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Admin.BillingDecline=function(){function BillingDecline(){this._update=__bind(this._update,this),this.tbody=$("table.grid tbody"),this.tbody.on("click","input:checkbox",this._update),this.tbody.on("change","select",this._update)}return BillingDecline.prototype._success=function(row){var _this=this;return function(){return row.remove(),_this.tbody.find("tr").exists()?void 0:pjax.reload()}},BillingDecline.prototype._update=function(event){var row,select,target;return target=$(event.currentTarget),row=target.closest("tr"),select=row.find("select"),$.ajax({url:row.data("url"),type:"put",data:defaultParams({status:select.val()}),message:"Saving"}).done(this._success(row))},BillingDecline}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Admin.Classroom={},Admin.Classroom.Section=function(){function Section(url){this.url=url,this._update=__bind(this._update,this),this.tables=$("table.items"),this.destination=this.tables.filter(".destination").find("tbody"),$(".destination tbody, .available tbody").sortable({connectWith:".item-sortable"}),this.destination.on("sortupdate",this._update),this._alterEmptyTables()}return Section.prototype._alterEmptyTables=function(){var e,tbody,_i,_len,_ref,_results;for(_ref=this.tables,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],tbody=$(e).find("tbody"),0===tbody.find("tr").length?_results.push(tbody.append('<tr class="empty"><td>&nbsp;</td></tr>')):_results.push(tbody.find("tr.empty").remove());return _results},Section.prototype._update=function(){var data,e,items,_i,_len,_ref;for(this._alterEmptyTables(),items=[],_ref=this.destination.find("tr"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],data=$(e).data(),items.push(""+data.id+"//"+data.type);return $.ajax({url:this.url,type:"put",data:defaultParams({"items[]":items}),message:"Saving"})},Section}(),Admin.Classroom.Downloads=function(){function Downloads(template){var _this=this;this.template=template,$("a.add-download").on("click",function(event){return event.stop(),$(".downloads-list").append(_this.template),$.uniform()})}return Downloads}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Admin.AccountHistory=function(){function AccountHistory(container){this.container=container,this._showNewRecords=__bind(this._showNewRecords,this),this._loadMore=__bind(this._loadMore,this),this.assignElements(),this.observeElements()}return AccountHistory.prototype.assignElements=function(){return this.loading=!1,this.actions=this.container.find(".actions"),this.loadMoreTrigger=this.container.find(".show-button")},AccountHistory.prototype.observeElements=function(){return this.loadMoreTrigger.on("click",this._loadMore)},AccountHistory.prototype._loadMore=function(event){return event.stop(),this.loading?void 0:(this.loading=!0,$.ajax({url:window.location.href,type:"get",data:{page:this.loadMoreTrigger.data("page")},dataType:"text html"}).done(this._showNewRecords))},AccountHistory.prototype._showNewRecords=function(html){var maxPages,page;return this.loadMoreTrigger.closest(".actions").before(html),page=this.loadMoreTrigger.data("page"),maxPages=this.loadMoreTrigger.data("pages"),page>=maxPages?this.actions.hide():this.loadMoreTrigger.data("page",page+1),this.loading=!1},AccountHistory}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Admin.List=function(){function List(element){var e,_i,_len,_ref;if(this.element=element,this._showItem=__bind(this._showItem,this),this.element)this.items=this.element.find("tr"),this.items.filter("[data-url]").on("click",this._showItem);else for(_ref=$("table.grid tbody"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],new Admin.List($(e))}return List.prototype._showItem=function(event){var target;return target=$(event.target),target.is("a")?void 0:pjax.loadUrl(target.closest("tr").data("url"))},List}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Admin.List.Sortable=function(){function Sortable(url){this.url=url,this._update=__bind(this._update,this),this.tbody=$("table.sortable tbody"),this.tbody.sortable({update:this._update})}return Sortable.prototype._update=function(){var className,data,row,tr,_i,_len,_ref;for(data={ids:[]},className="odd",_ref=this.tbody.find("tr"),_i=0,_len=_ref.length;_len>_i;_i++)tr=_ref[_i],row=$(tr),data.ids.push(row.data("id")),row.removeClass("odd even").addClass(className),className="odd"===className?"even":"odd";return $.ajax({url:this.url,type:"put",data:defaultParams(data),message:"Saving"})},Sortable}()}.call(this),function(){Admin.Stats=function(){function Stats(element){var filters,form;form=element.find(".filters form"),filters=element.find(".filters select"),filters.on("change",function(){return form.submit()})}return Stats}()}.call(this),function(){this.Attachments={}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Attachments.List=function(_super){function List(){return this._updateTitle=__bind(this._updateTitle,this),this._showEdit=__bind(this._showEdit,this),this._removeAttachment=__bind(this._removeAttachment,this),this.toggleSelections=__bind(this.toggleSelections,this),_ref=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.prototype.initialize=function(objectId){return this.objectId=objectId,this.assignElements(),this.observeElements()},List.prototype.allAttachmentsSelected=function(){return!this.container.find(".attachment-checkbox input:checkbox:not(:checked)").exists()},List.prototype.assignElements=function(){return this.emptyMessage=$(".attachments-empty"),this.actionbar=$(".attachments-actionbar"),this.message=Message.create(),this.toolbar={element:this.actionbar,selectAll:this.actionbar.find("#button-select-all"),download:this.actionbar.find("#button-download"),email:this.actionbar.find("#button-email"),fax:this.actionbar.find("#button-fax"),sign:this.actionbar.find("#button-sign"),"delete":this.actionbar.find("#button-delete")},this.container=$(".attachments-wrapper"),this.uploadButton=$("input[name=Filedata]"),this.toolbar.element.append(this.uploadButton),new Attachments.Status(".attachment")},List.prototype["delete"]=function(attachments){var parameters,_this=this;return parameters=defaultParams({"ids[]":this._ids(attachments),_method:"delete"}),$.ajax({url:this.toolbar["delete"].attr("href"),type:"post",data:parameters,message:"Deleting"}).done(function(){var a,_i,_len,_results;for(_results=[],_i=0,_len=attachments.length;_len>_i;_i++)a=attachments[_i],_results.push(_this._removeAttachment({target:a}));return _results})},List.prototype.download=function(attachments){var form,id,ids,trigger,_i,_len,_this=this;for(trigger=this.toolbar.download,ids=this._ids(attachments),form=$("<form>").attr({action:trigger.attr("href"),method:"post"}),_i=0,_len=ids.length;_len>_i;_i++)id=ids[_i],form.append($("<input>").attr({type:"hidden",name:"ids[]",value:id}));return form.append($("<input>").attr({type:"hidden",name:csrf.param,value:csrf.token})),this.message.display("Downloading"),setTimeout(function(){return $("body").append(form),form[0].submit(),setTimeout(function(){return _this.message.hide(),form.remove()},3e3)},0)},List.prototype.email=function(attachments,type){var ids,url;return null==type&&(type="email"),url=this.toolbar[type].attr("href"),ids=this._ids(attachments),ids.any()&&(url+="?"),url+=ids.map(function(id){return"ids[]="+id}).join("&"),top.overlay.open(url)},List.prototype.fax=function(attachments){return this.email(attachments,"fax")},List.prototype.observeElements=function(){return this.container.on("ajax:success",".attachment-actions a.delete",this._removeAttachment),this.container.on("ajax:success",".attachment-actions a.move-to-photos",this._removeAttachment),this.container.on("click",".attachment-title .display",this._showEdit),this.container.on("ajax:success",".attachment-title .edit form",this._updateTitle),this.toolbar.selectAll.on("click",this.toggleSelections),this.toolbar["delete"].on("click",this.performAction("delete")),this.toolbar.download.on("click",this.performAction("download")),this.toolbar.email.on("click",this.performAction("email")),this.toolbar.fax.on("click",this.performAction("fax")),this.toolbar.sign.on("click",this.performAction("sign"))},List.prototype.performAction=function(action){var _this=this;return function(event){var attachments;return event.stop(),attachments=_this.selectedAttachments(),attachments.exists()?_this[action](attachments):_this.message.flash("Please select at least one attachment.","error")}},List.prototype.selectedAttachments=function(){return this.container.find(".attachment input:checkbox:checked").closest(".attachment")},List.prototype.sign=function(attachments){var ids,url;return url=this.toolbar.sign.attr("href"),ids=this._ids(attachments.filter(".signable")),ids.any()?top.location=""+url+"&attachment_ids="+ids.join(","):this.message.flash("Please select at least one attachment that can be signed (PDF, Word).","error")},List.prototype.toggleSelections=function(event){return event.stop(),this.container.find(".attachment-checkbox input:checkbox").check(!this.allAttachmentsSelected())},List.prototype._ids=function(attachments){return attachments.filter(".ready").map(function(i,a){return $(a).find("input:checkbox").attr("value")}).toArray()},List.prototype._removeAttachment=function(event){var attachment;return attachment=$(event.target).closest(".attachment"),attachment.remove(),this.container.find(".attachment").exists()?void 0:(this.actionbar.hide(),this.emptyMessage.append(this.uploadButton.parents(".uploadifive-button")),this.emptyMessage.show())},List.prototype._showEdit=function(event){var attachment;return event.stop(),attachment=$(event.target).closest(".attachment"),attachment.find(".attachment-title .display").hide(),attachment.find(".attachment-title .edit").show()},List.prototype._updateTitle=function(event,data){var attachment;return attachment=$(event.target).closest(".attachment"),attachment.find(".attachment-title .edit").hide(),attachment.find(".attachment-title .display").text(data.title).show()},List}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Attachments.Uploading=function(_super){function Uploading(){return this._removeAttachmentOnError=__bind(this._removeAttachmentOnError,this),this._removeAttachment=__bind(this._removeAttachment,this),this._attachmentUploading=__bind(this._attachmentUploading,this),this._attachmentUploaded=__bind(this._attachmentUploaded,this),_ref=Uploading.__super__.constructor.apply(this,arguments)}return __extends(Uploading,_super),Uploading.prototype._attachmentCacheKey=function(attachment){return attachment.file&&!attachment.id?"temporary/"+(attachment.file.id||attachment.file.name):""+attachment.type+"/"+attachment.id},Uploading.prototype._attachmentElement=function(attachment){return $(this.attachmentTemplate.evaluate(attachment))},Uploading.prototype._attachmentUploaded=function(event,attachment){var key;return key=this._attachmentCacheKey({file:attachment.file}),this.attachments.cache[key]&&delete this.attachments.cache[key],this.attachments.cache[this._attachmentCacheKey(attachment)]=attachment,this._renderAttachments()},Uploading.prototype._attachmentUploading=function(event,attachment){return this.attachments.cache[this._attachmentCacheKey(attachment)]=attachment,this._renderAttachments()},Uploading.prototype._captureExistingAttachments=function(){var attachment,e,element,_i,_len,_ref1;if(this.attachments.container){for(_ref1=this.attachments.container.find(".attachment"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],element=$(e),attachment={id:element.data("id"),type:element.data("type"),name:element.data("name"),size:element.data("size")},this.attachments.cache[this._attachmentCacheKey(attachment)]=attachment;return this._renderAttachments()}},Uploading.prototype._removeAttachment=function(event){var attachment,element;return event.stop(),element=$(event.target).parents(".attachment"),attachment={id:element.data("id"),type:element.data("type")},delete this.attachments.cache[this._attachmentCacheKey(attachment)],this._renderAttachments()},Uploading.prototype._removeAttachmentOnError=function(event,attachment){return delete this.attachments.cache[this._attachmentCacheKey(attachment)],this._renderAttachments(),Message.create().flash("One or more of the files could not be attached.","error")},Uploading.prototype._renderAttachments=function(){var attachment,element,key,_ref1;this.attachments.container.html(""),_ref1=this.attachments.cache;for(key in _ref1)attachment=_ref1[key],element=this._attachmentElement(attachment),element.addClass(attachment.id?"completed":"processing"),element.find(".remove").on("click",this._removeAttachment),this.attachments.container.append(element);return""===this.attachments.container.html()?this.attachments.container.hide():this.attachments.container.show(),this.trigger("attachments:rendered")},Uploading}(GCObject)}.call(this),function(){this.Autoresponders={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Autoresponders.Form=function(){function Form(options){this._sendTestEmail=__bind(this._sendTestEmail,this),this._keyup=__bind(this._keyup,this),this._keydown=__bind(this._keydown,this),$.extend(this,options),this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){return this.message=Message.create(),this.delayField=this.element.find("input#email_template_delay"),this.bodyField=this.element.find("#text_editor"),this.testEmailTrigger=this.element.find(".actions .button.test")},Form.prototype.observeElements=function(){return this.delayField.on("keydown",this._keydown),this.delayField.on("keyup",this._keyup),this.testEmailTrigger.on("click",this._sendTestEmail)},Form.prototype._keydown=function(event){return event.metaKey||event.ctrlKey?void 0:([8,9,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105].include(event.keyCode)||event.stop(),this.delayField.val().length>=3&&![8,9,46].include(event.keyCode)?event.stop():void 0)},Form.prototype._keyup=function(){var parsedValue,value;return value=this.delayField.val(),parsedValue=parseInt(value,10),value.blank()?void 0:(isNaN(parsedValue)&&(parsedValue=0),this.delayField.val(parsedValue))},Form.prototype._sendTestEmail=function(event){var data,_this=this;return event.stop(),"undefined"!=typeof xinha_editors&&null!==xinha_editors&&null!=xinha_editors.text_editor&&this.bodyField.val(xinha_editors.text_editor.getHTML()),data=this.element.serializeObject(),delete data._method,$.ajax({url:this.testEmailUrl,type:"post",data:data,message:"Sending test email"}).done(function(){return _this.message.flash("Test email sent.")})},Form}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Autoresponders.List=function(_super){function List(){return this._hideHeaders=__bind(this._hideHeaders,this),_ref=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.prototype.initialize=function(){var e,_i,_len,_ref1,_results;for(this.on("table:hide-headers",this._hideHeaders),_ref1=$(".autoresponder"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],_results.push(new Autoresponders.List.Autoresponder($(e)));return _results},List.prototype._hideHeaders=function(event,t){var table;return table=$(t),table.find("tbody tr").exists()?void 0:table.find("thead th:not(.actions)").css("visibility","hidden")},List}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Autoresponders.List.Autoresponder=function(_super){function Autoresponder(){return this._success=__bind(this._success,this),_ref=Autoresponder.__super__.constructor.apply(this,arguments)}return __extends(Autoresponder,_super),Autoresponder.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements(),this.trigger("table:hide-headers",this.table)},Autoresponder.prototype.assignElements=function(){var e,id,trigger,_i,_len,_ref1,_results;for(this.message=Message.create(),trigger=this.element.find(".remove-button"),id=""+trigger.attr("id")+"_overlay",this.remove={overlay:Overlay.cache[id],trigger:$("#"+id).find(".remove")},this.table=this.element.find("table"),_ref1=this.table.find(".template"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],_results.push(new Autoresponders.List.Template($(e)));return _results},Autoresponder.prototype.observeElements=function(){var _this=this;return this.remove.trigger.data("message","Deleting"),this.remove.trigger.on("ajax:before",function(){return _this.remove.overlay.hide()}),this.remove.trigger.on("ajax:success",this._success)},Autoresponder.prototype._success=function(){return this.message.flash("Autoresponder deleted."),this.element.remove()},Autoresponder}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Autoresponders.List.Template=function(_super){function Template(){return this._success=__bind(this._success,this),_ref=Template.__super__.constructor.apply(this,arguments)}return __extends(Template,_super),Template.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Template.prototype.assignElements=function(){return this.message=Message.create(),this.removeTrigger=this.element.find(".remove-button"),this.table=this.element.closest("table")},Template.prototype.observeElements=function(){return this.removeTrigger.data("message","Deleting"),this.removeTrigger.on("ajax:success",this._success)},Template.prototype._success=function(){return this.message.flash("Email deleted"),this.element.remove(),this.trigger("table:hide-headers",this.table)},Template}(GCObject)}.call(this),function(){this.Broadcast={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Broadcast.Editor=function(_super){function Editor(options){this._updateToSelection=__bind(this._updateToSelection,this),this._toggleTo=__bind(this._toggleTo,this),this._hideToChoices=__bind(this._hideToChoices,this),this._clearLinkedProperty=__bind(this._clearLinkedProperty,this),this._assignLinkedProperty=__bind(this._assignLinkedProperty,this),$.extend(this,options),this.emailEditor=new Email.Editor(options),this.assignElements(),this.observeElements(),this._updateToSelection()}return __extends(Editor,_super),Editor.prototype.assignElements=function(){return this.to={label:this.element.find(".field.to label"),selection:this.element.find(".field.to .input .selection"),choiceContainer:this.element.find(".field.to .input ul.dropdown"),choices:this.element.find(".field.to .input input:checkbox")},this.linkedProperty={container:this.element.find(".linked-property"),label:this.element.find(".linked-property .label"),field:this.element.find(".linked-property .field input"),clear:this.element.find(".linked-property .clear"),overlay:window.overlay}},Editor.prototype.observeElements=function(){return this.to.label.on("click",this._toggleTo),this.to.selection.on("click",this._toggleTo),this.to.choices.on("click",this._updateToSelection),this.on("click",this._hideToChoices),this.linkedProperty.container.exists()?(this.linkedProperty.clear.on("click",this._clearLinkedProperty),this.on("linked-property:selected",this._assignLinkedProperty),this._observeXinhaDropdowns()):void 0},Editor.prototype._assignLinkedProperty=function(event,data){var anchor;return anchor=$("<a>").attr({href:this.propetyUrlTemplate.evaluate(data),target:"_blank"}),anchor.text(data.label),this.linkedProperty.label.html(anchor),this.linkedProperty.field.val(data.id),this.linkedProperty.container.show(),this.linkedProperty.toolbar.show()},Editor.prototype._clearLinkedProperty=function(event){return event.stop(),this.linkedProperty.label.html(""),this.linkedProperty.field.val(""),this.linkedProperty.container.hide(),this.linkedProperty.toolbar.hide(),this.trigger("linked-property:cleared")},Editor.prototype._hideToChoices=function(event){var element;return element=$(event.target),element.hasClass("field")&&element.hasClass("to")||element.parents(".field.to").exists()?void 0:this.to.choiceContainer.hide()},Editor.prototype._observeXinhaDropdowns=function(){var _this=this;return setTimeout(function(){var o,option,options,_i,_len;if(options=$(".toolbarElement select option:first-child"),!options.exists())return _this._observeXinhaDropdowns();for(option=null,_i=0,_len=options.length;_len>_i;_i++)o=options[_i],$(o).text()===keywordsPropertyTitle&&(option=$(o));return option&&(_this.linkedProperty.toolbar=option.parents(".toolbarElement")),_this.linkedProperty.field.val().blank()?_this.linkedProperty.toolbar.hide():void 0},100)},Editor.prototype._toggleTo=function(){return this.to.choiceContainer.toggle()},Editor.prototype._updateToSelection=function(){var chosen,labels;return chosen=this.to.choices.filter(":checked"),labels=chosen.toArray().map(function(c){return $('label[for="'+c.id+'"]').text()}),this.to.selection.text(0===labels.length?"No Recipients":labels.join(", "))},Editor}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Broadcast.PropertyAutocomplete=function(){function PropertyAutocomplete(options){this._selectProperty=__bind(this._selectProperty,this),this._select=__bind(this._select,this),this._returnToSearch=__bind(this._returnToSearch,this),$.extend(this,options),this.assignElements(),this.observeElements()}return PropertyAutocomplete.prototype.assignElements=function(){return this.element=this.container.find("#query"),this.sections={search:this.container.find(".property-search"),confirm:this.container.find(".confirm-equitable-interest")},this.confirmationTemplate=this.sections.confirm.html(),this.overlay=top.overlay},PropertyAutocomplete.prototype.observeElements=function(){return this.element.autocomplete({source:this.url,appendTo:".broadcasts-autocomplete",minLength:3,delay:500,select:this._select}),top.Observations.on("linked-property:confirmed",this._selectProperty)},PropertyAutocomplete.prototype._prepareConfirmation=function(){return this.sections.confirm.html(this.confirmationTemplate.evaluate(this.item)),this.sections.confirm.find("a.cancel-button").on("click",this._returnToSearch),this.sections.search.hide(),this.sections.confirm.show(),this.container.removeClass("searching"),this.overlay.refreshHeight()},PropertyAutocomplete.prototype._returnToSearch=function(event){return event.stop(),this.sections.search.show(),this.sections.confirm.hide(),this.container.addClass("searching"),this.overlay.refreshHeight()},PropertyAutocomplete.prototype._select=function(event,ui){return event.stop(),this.item=ui.item,this.item.id=this.item.value,this.item.eligible?this._selectProperty():this._prepareConfirmation()},PropertyAutocomplete.prototype._selectProperty=function(){return top.Observations.trigger("linked-property:selected",this.item),top.Observations.off("linked-property:confirmed",this._selectProperty),this.overlay.hide()},PropertyAutocomplete}()}.call(this),function(){this.Buyers={}}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Buyers.Details=function(_super){function Details(){return _ref=Details.__super__.constructor.apply(this,arguments)}return __extends(Details,_super),Details.prototype.assignHelpers=function(){return this.message=Message.create(),this.sidebar=new Details.Sidebar(this,this.container.find("#sidebar"),this.name),this.permissions=new Details.Permissions(this,this.container.find(".details__permissions")),this.sidebarOnly?void 0:(this.actionbar=new Details.Actionbar(this,this.container.find("#actionbar")),this.form=new Buyers.Details.Form(this,this.container.find("#buyer-form")),this.properties=new Details.Associations(this,"property"),new CustomFields.Conditions(this.form))},Details}(Details)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Buyers.Details.Form=function(_super){function Form(){return this._updateCounties=__bind(this._updateCounties,this),this._beforeTargetCountyAddition=__bind(this._beforeTargetCountyAddition,this),this._afterTargetCountyAddition=__bind(this._afterTargetCountyAddition,this),_ref=Form.__super__.constructor.apply(this,arguments)}return __extends(Form,_super),Form.prototype.assignElements=function(){return Form.__super__.assignElements.call(this),this.counties=this.details.counties,this.countrySelect=this.element.find("#buyer_country")},Form.prototype.manageRows=function(options){return options.beforeAdd=this._beforeTargetCountyAddition,options.afterAdd=this._afterTargetCountyAddition,new ManageRows(options),this._prepareSelectsForCountyAssignment(options.container)},Form.prototype.observeElements=function(){return Form.__super__.observeElements.call(this),this.element.on("change","#buyer-counties select.state_select",this._updateCounties)},Form.prototype._afterTargetCountyAddition=function(row){return row.is(".buyer-county")?this._prepareSelectsForCountyAssignment(row):void 0},Form.prototype._beforeTargetCountyAddition=function(rowTemplate){var id;return id=rowTemplate.match(/data-template-id="(.*?)"/)[1],rowTemplate.replace(new RegExp(id,"g"),$.now())},Form.prototype._createHeader=function(){return new Buyers.Details.Form.Header(this)},Form.prototype._prepareSelectsForCountyAssignment=function(){},Form.prototype._selectFirstOption=function(select){return select.val(select.find("option:first").val()).change()},Form.prototype._updateCounties=function(event){var counties,countyAndId,countySelect,row,selects,state,stateSelect,_i,_len;if(row=$(event.target).closest("tr.buyer_county"),selects=row.find("select"),stateSelect=$(selects[0]),countySelect=$(selects[1]),state=stateSelect.val(),counties=this.details.counties[state],countySelect.html(this._option(null,"All Counties")),!counties)return this._selectFirstOption(countySelect);for(_i=0,_len=counties.length;_len>_i;_i++)countyAndId=counties[_i],countySelect.append(this._option(countyAndId[1],countyAndId[0]));return this._selectFirstOption(countySelect)},Form}(Details.Form)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Buyers.Details.Form.Header=function(_super){function Header(){return _ref=Header.__super__.constructor.apply(this,arguments)}return __extends(Header,_super),Header.prototype._assignFields=function(){return{display:{fullName:this.sections.display.find(".name"),companyName:this.sections.display.find(".company"),email:this.sections.display.find(".emails"),phone:this.sections.display.find(".numbers")},edit:{firstName:this.sections.edit.find('input[name*="[first_name]"]'),lastName:this.sections.edit.find('input[name*="[last_name]"]'),companyName:this.sections.edit.find('input[name*="[company_name]"]')},multiples:{email:this.sections.edit.find(".details-header__multiple-inputs.email"),phone:this.sections.edit.find(".details-header__multiple-inputs.phone_numbers")}}},Header.prototype._performAdditionalObservations=function(){return new Details.Form.Multiple(this.fields.multiples.email),new Details.Form.Multiple(this.fields.multiples.phone)},Header.prototype._revertEditFields=function(){var field,k,revert,_ref1,_ref2,_results;revert=function(field){var f,_i,_len,_results;for(_results=[],_i=0,_len=field.length;_len>_i;_i++)f=field[_i],_results.push($(f).val($(f).attr("value")).change());return _results},_ref1=this.fields.edit;
for(k in _ref1)field=_ref1[k],revert(field);_ref2=this.fields.multiples,_results=[];for(k in _ref2)field=_ref2[k],_results.push(revert(field.find("input:text")));return _results},Header.prototype._updateDisplayFields=function(){var collection,field,fields,fullName,icon;return fields=this.fields.display,fullName=this.object.full_name||"",fields.fullName.text(fullName),fields.companyName.text(this.object.company_name||""),collection=this.object.email_collection,field=fields.email,icon=field.find(".icon"),collection&&collection.any()?(field.show().html(collection.join(", ")),field.prepend(icon)):field.hide(),collection=this.object.phone_numbers.map(function(n){var link;return link=phoneCallTo(n.formatted_value,{to:n.raw_number,name:fullName,object_type:n.object_type,object_id:n.object_id}),""+n.label+": "+link}),field=fields.phone,icon=field.find(".icon"),collection&&collection.any()?(field.show().html(collection.join(", ")),field.prepend(icon)):field.hide()},Header.prototype._updateEditFields=function(){var collection,fields,inputs;return fields=this.fields.edit,this.object.first_name&&fields.firstName.attr("value",this.object.first_name),this.object.last_name&&fields.lastName.attr("value",this.object.last_name),this.object.company_name&&fields.companyName.attr("value",this.object.company_name),collection=this.object.email_collection,inputs=this.fields.multiples.email.find("input"),collection.any()?inputs.each(function(i,e){return collection[i]?$(e).attr("value",collection[i]):$(e).detach()}):inputs.each(function(i,e){return i>0?$(e).detach():void 0}),this.trigger("multiples:refresh-height")},Header}(Details.Form.Header)}.call(this),function(){this.Classroom={}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Classroom.Object=function(_super){function Object(){return this._switchActiveResource=__bind(this._switchActiveResource,this),_ref=Object.__super__.constructor.apply(this,arguments)}return __extends(Object,_super),Object.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements(),this._selectInitialResource()},Object.prototype.assignElements=function(){return this.resources=this.element.find(this._selector()),this.resources.detach(),this.sidebar=$("#sidebar"),this.triggers=this.sidebar.find(".resource-menu a")},Object.prototype.observeElements=function(){return this.triggers.on("click",this._switchActiveResource),this._detectMediaCompatability()},Object.prototype._activeResource=function(){var trigger;return trigger=this.triggers.filter(".active").first(),trigger.exists()?this.resources.filter("#"+trigger.data("id")).first():$()},Object.prototype._detectMediaCompatability=function(){},Object.prototype._selectInitialResource=function(){var resourceId,trigger;return resourceId=window.location.hash.replace("#",""),trigger=this.triggers.filter('[data-resource-id="'+resourceId+'"]').first(),trigger.exists()||(trigger=this.triggers.first()),this._switchActiveResource({target:trigger,stop:function(){}})},Object.prototype._switchActiveResource=function(event){var trigger;return event.stop(),trigger=$(event.target),trigger.hasClass("active")?void 0:(this._activeResource()&&this._activeResource().detach(),this.triggers.removeClass("active"),trigger.addClass("active"),this.element.prepend(this._activeResource().show()),window.location.hash=trigger.data("resource-id"))},Object}(GCObject)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Classroom.ResourceCategory=function(_super){function ResourceCategory(){return _ref=ResourceCategory.__super__.constructor.apply(this,arguments)}return __extends(ResourceCategory,_super),ResourceCategory.prototype._detectMediaCompatability=function(){return this.resources.find("audio").ensureCompatability()},ResourceCategory.prototype._selector=function(){return".classroom_resource_resource"},ResourceCategory}(Classroom.Object),Classroom.ResourceCategory["30 Days to Freedom"]=function(daysSinceCreation){var anchor,dayNumber,e,_i,_len,_ref1,_results;for(1>daysSinceCreation&&(daysSinceCreation=1),_ref1=$("#sidebar .item a"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],anchor=$(e),dayNumber=parseInt(anchor.text().match(/Day (\d+)/)[1],10),dayNumber>daysSinceCreation?_results.push(anchor.remove()):_results.push(void 0);return _results}}.call(this),function(){var _ref,_ref1,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Classroom.TrainingCourse=function(_super){function TrainingCourse(){return this._restrictVideos=__bind(this._restrictVideos,this),_ref=TrainingCourse.__super__.constructor.apply(this,arguments)}return __extends(TrainingCourse,_super),TrainingCourse.prototype.observeElements=function(){return TrainingCourse.__super__.observeElements.call(this),this.on("course:restrict-videos",this._restrictVideos)},TrainingCourse.prototype._detectMediaCompatability=function(){return this.resources.find("video").ensureCompatability()},TrainingCourse.prototype._restrictVideos=function(event,data){var date,limit,now,triggers;return limit=data.limit,date=new Date(Date.parse(data.expires)),now=new Date((new Date).setHours(0,0,0)),triggers=[],now>date?void 0:(this.triggers.each(function(i,e){return i>=limit?$(e).remove():void 0}),this.triggers=this.sidebar.find(".resource-menu a"))},TrainingCourse.prototype._selector=function(){return".classroom_training_resource"},TrainingCourse}(Classroom.Object),Classroom.PMOD=function(_super){function PMOD(){return _ref1=PMOD.__super__.constructor.apply(this,arguments)}return __extends(PMOD,_super),PMOD.prototype._selector=function(){return".classroom_pmod_resource"},PMOD}(Classroom.TrainingCourse)}.call(this),function(){this.Communications={}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Communications.Fax=function(_super){function Fax(){return this._selectRecipient=__bind(this._selectRecipient,this),this._selectExistingAttachment=__bind(this._selectExistingAttachment,this),this._removeContact=__bind(this._removeContact,this),this._refreshFrameHeight=__bind(this._refreshFrameHeight,this),this._enableForm=__bind(this._enableForm,this),this._disableForm=__bind(this._disableForm,this),this._addAttachment=__bind(this._addAttachment,this),this.addContact=__bind(this.addContact,this),_ref=Fax.__super__.constructor.apply(this,arguments)}return __extends(Fax,_super),Fax.prototype.initialize=function(options){return $.extend(this,options),this.assignElements(),this.observeElements(),this.configureUploads()},Fax.prototype.addContact=function(event){var element;return event.stop(),element=this._contactElement(),this.contacts.container.append(element),this._observeContactRow(element),this._refreshFrameHeight()},Fax.prototype.assignElements=function(){return this.overlay=top.overlay,this.form={element:this.element.find("#new_communication_form"),submit:this.element.find(".communications__fax-actions input:submit")},this.attachments={add:this.element.find(".communications__fax-attachment-add"),existing:this.element.find("#existing-attachments"),container:this.element.find(".communications__fax-attachments"),cache:{}},this._captureExistingAttachments(),this.contacts={container:this.element.find(".communications__fax-recipients"),addTrigger:this.element.find("#new-contact")}},Fax.prototype.configureUploads=function(){return Email.Editor.attachmentClass=this.attachmentClass},Fax.prototype.observeElements=function(){var e,_i,_len,_ref1,_results;for(this.attachments.add.on("click",this._addAttachment),this.attachments.existing.on("change",this._selectExistingAttachment),this.on("email:attachment-uploading",this._attachmentUploading),this.on("email:attachment-uploading",this._disableForm),this.on("email:attachment-uploaded",this._enableForm),this.on("email:attachment-uploaded",this._attachmentUploaded),this.on("email:attachment-error",this._enableForm),this.on("email:attachment-error",this._removeAttachmentOnError),this.on("attachments:rendered",this._refreshFrameHeight),this.contacts.addTrigger.on("click",this.addContact),_ref1=$(".field.communications__fax-recipient"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],_results.push(this._observeContactRow($(e)));return _results},Fax.prototype._addAttachment=function(event){return event.preventDefault(),this.element.find(".uploadifive-button input").trigger("click")},Fax.prototype._contactElement=function(){var id;return id=$.now(),$(this.contactTemplate.evaluate({id:id}))},Fax.prototype._disableForm=function(){return this.formHandler=function(event){return event.stop()},this.form.element.on("submit",this.formHandler),this.form.submit.disable()},Fax.prototype._enableForm=function(){return this.form.element.off("submit",this.formHandler),this.form.submit.enable(),this.formHandler=null},Fax.prototype._observeContactRow=function(element){var removeTrigger,select;return select=element.find("select"),removeTrigger=element.find(".remove-contact"),select.find("option").exists()?select.on("change",this._selectRecipient):select.on("click",function(event){return event.stop()}),removeTrigger.on("click",this._removeContact)},Fax.prototype._refreshFrameHeight=function(){return this.overlay.refreshHeight()},Fax.prototype._removeContact=function(event){return event.stop(),$(event.target).parents(".field").remove(),this._refreshFrameHeight()},Fax.prototype._selectExistingAttachment=function(){var attachment,key,option,select;return select=this.attachments.existing[0],option=$(select.options[select.selectedIndex]),attachment={id:option.data("id"),type:option.data("type"),size:option.data("size"),name:option.data("name")},key=this._attachmentCacheKey(attachment),this.attachments.cache[key]?void 0:(this.attachments.cache[key]=attachment,this._renderAttachments(),option=select.options[0],option.selected=!0,this.attachments.existing.prev(".placeholder").html($(option).html()))},Fax.prototype._selectRecipient=function(event){var container,option,select;return select=$(event.target),option=$(select[0].options[select[0].selectedIndex]),container=select.parents(".communications__fax-recipient"),container.find("input.name").val(option.data("name")),container.find("input.number").val(option.data("number")),select[0].options[0].selected=!0},Fax}(Attachments.Uploading)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Communications.List=function(_super){function List(){return this._deleteCommunications=__bind(this._deleteCommunications,this),_ref=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.prototype.initialize=function(options){return $.extend(this,options),this.assignElements(),this.observeElements()},List.prototype.assignElements=function(){var e,_i,_len,_ref1,_results;for(new Communications.List.Empty(this.element.find(".empty")),new Communications.List.Actionbar(this.element.find(".actionbar")),new Communications.List.Autoresponder(this.element.find(".autoresponder-status")),_ref1=this.element.find(".communication"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],_results.push(new Communications.List.Communication($(e)));return _results},List.prototype.observeElements=function(){return this.on("communications:delete",this._deleteCommunications)},List.prototype._deleteCommunications=function(event,data){var parameters,_this=this;return parameters=defaultParams({"ids[]":data.communications.map(function(c){return c.id})}),$.ajax({url:this.deleteUrl,type:"delete",data:parameters,message:"Deleting"}).done(function(){return _this.trigger("communications:remove")})},List}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Communications.List.Actionbar=function(_super){function Actionbar(){return this._toggleMenu=__bind(this._toggleMenu,this),this._toggleCommunications=__bind(this._toggleCommunications,this),this._selectCommunication=__bind(this._selectCommunication,this),this._removeCommunication=__bind(this._removeCommunication,this),this._registerCommunication=__bind(this._registerCommunication,this),this._hideMenu=__bind(this._hideMenu,this),this._hide=__bind(this._hide,this),this._deselectCommunication=__bind(this._deselectCommunication,this),this._deleteCommunications=__bind(this._deleteCommunications,this),this._applyFilters=__bind(this._applyFilters,this),this._applyFilter=__bind(this._applyFilter,this),_ref=Actionbar.__super__.constructor.apply(this,arguments)}return __extends(Actionbar,_super),Actionbar.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements(),this.element.is(":hidden")?this._notifyOnEmpty():this._applyFilters()},Actionbar.prototype.assignElements=function(){return this.message=Message.create(),this.selectAll=this.element.find(".select-all"),this.deleteTrigger=this.element.find(".delete-selected"),this.newCommunication={element:this.element.find(".action-button"),menu:this.element.find("ul.menu"),trigger:this.element.find(".menu-trigger"),defaultTrigger:this.element.find(".default-trigger"),items:this.element.find("ul.menu li a")},this.filterElement=this.element.find(".filters"),this.filters=this.filterElement.find("input:checkbox"),this.communications={collection:[],selected:[]}},Actionbar.prototype.observeElements=function(){return this.newCommunication.trigger.on("click",this._toggleMenu),this.newCommunication.defaultTrigger.on("click",this._hideMenu),this.newCommunication.items.on("click",this._hideMenu),this.on("click",this._hideMenu),this.selectAll.on("click",this._toggleCommunications),this.deleteTrigger.on("click",this._deleteCommunications),this.filters.on("click",this._applyFilters),this.on("communication:registered",this._registerCommunication),this.on("communication:selected",this._selectCommunication),this.on("communication:deselected",this._deselectCommunication),this.on("communication:removed",this._removeCommunication),this.on("communications:empty",this._hide)},Actionbar.prototype._applyFilter=function(event){var action,checkbox,type;return checkbox=$(event.target),type=checkbox.attr("value"),action=checkbox.is(":checked")?"hide":"show",this.trigger("filter:"+type+":"+action)},Actionbar.prototype._applyFilters=function(){var _this=this;return this.filters.each(function(i,f){return _this._applyFilter({target:f})}),this.filterElement.find("input:checked").exists()?this.filterElement.addClass("active"):this.filterElement.removeClass("active")},Actionbar.prototype._deleteCommunications=function(){return this.communications.selected.any()?this.trigger("communications:delete",{communications:this.communications.selected}):this.message.flash("Select at least one communication","error")},Actionbar.prototype._deselectCommunication=function(event,communication){return this.communications.selected.remove(communication)},Actionbar.prototype._hide=function(){return this.element.hide()},Actionbar.prototype._hideMenu=function(event){return $(event.target).is(this.newCommunication.trigger)?void 0:this.newCommunication.menu.hide()},Actionbar.prototype._notifyOnEmpty=function(){return this.trigger("communications:empty",this.newCommunication.element)},Actionbar.prototype._registerCommunication=function(event,communication){return this.communications.collection.push(communication)},Actionbar.prototype._removeCommunication=function(event,communication){return this.communications.collection.remove(communication),this.communications.selected.remove(communication),this.communications.collection.any()?void 0:this._notifyOnEmpty()},Actionbar.prototype._selectCommunication=function(event,communication){var collection;return collection=this.communications.selected,collection.include(communication)?void 0:collection.push(communication)},Actionbar.prototype._toggleCommunications=function(){return this.communications.selected.length===this.communications.collection.length?this.trigger("communications:deselect"):this.trigger("communications:select")},Actionbar.prototype._toggleMenu=function(event){return event.stop(),this.newCommunication.menu.toggle()},Actionbar}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Communications.List.Autoresponder=function(){function Autoresponder(){this._submit=__bind(this._submit,this)}return Autoresponder.prototype.initialize=function(element){return this.element=element,this.form=this.element.find("form"),this.form.exists()?(this.message=Message.create(),this.form.on("submit",this._submit)):void 0},Autoresponder.prototype._submit=function(event){var _this=this;return event.stop(),this.form.disable(),$.ajax({url:this.form.attr("action"),type:"put",data:this.form.serialize(),message:"Saving"}).always(function(){return _this.form.enable()}).done(function(){return _this.message.flash("Autoresponder settings saved.")})},Autoresponder}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Communications.List.Communication=function(_super){function Communication(){return this._removeIfSelected=__bind(this._removeIfSelected,this),this._toggleSelection=__bind(this._toggleSelection,this),this._show=__bind(this._show,this),this._select=__bind(this._select,this),this._deselect=__bind(this._deselect,this),this.show=__bind(this.show,this),this.hide=__bind(this.hide,this),_ref=Communication.__super__.constructor.apply(this,arguments)}return __extends(Communication,_super),Communication.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements(),this.trigger("communication:registered",this)},Communication.prototype.assignElements=function(){return this.url=this.element.data("url"),this.id=this.element.data("id"),this.type=this.element.data("type"),this.checkbox=this.element.find("td.select input:checkbox")},Communication.prototype.observeElements=function(){return this.element.on("click",this._show),this.checkbox.on("click",this._toggleSelection),this.on("communications:select",this._select),this.on("communications:deselect",this._deselect),this.on("communications:remove",this._removeIfSelected),this.on("filter:"+this.type+":hide",this.hide),this.on("filter:"+this.type+":show",this.show)},Communication.prototype.hide=function(){return this.element.hide()},Communication.prototype.show=function(){return this.element.show()},Communication.prototype.remove=function(){return this.element.remove(),this.trigger("communication:removed",this),this.stopAllObservations()},Communication.prototype._deselect=function(){return this.checkbox.check(!1),this.trigger("communication:deselected",this)},Communication.prototype._select=function(){return this.checkbox.check(!0),this.trigger("communication:selected",this)},Communication.prototype._show=function(event){return $(event.target).parents("td.select").exists()?void 0:top.overlay.open(this.url)},Communication.prototype._toggleSelection=function(){var action;return action=this.checkbox.is(":checked")?"selected":"deselected",this.trigger("communication:"+action,this)},Communication.prototype._removeIfSelected=function(){return this.checkbox.is(":checked")?this.remove():void 0},Communication}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Communications.List.Empty=function(_super){function Empty(){return this._show=__bind(this._show,this),_ref=Empty.__super__.constructor.apply(this,arguments)}return __extends(Empty,_super),Empty.prototype.initialize=function(element){return this.element=element,this.actions=this.element.find(".actions"),this.on("communications:empty",this._show)},Empty.prototype._show=function(event,element){return this.element.show(),this.actions.append(element)},Empty}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Communications.Restrictions=function(){function Restrictions(restricted,container){this.container=null!=container?container:"body",this._promptForUpgrade=__bind(this._promptForUpgrade,this),restricted&&(this.upgradeLink=$("a.communications-upgrade"),$(this.container).find(".communication-section form").on("submit",this._promptForUpgrade),$(this.container).find(".communication-section a.action-button").on("click",this._promptForUpgrade))}return Restrictions.prototype._promptForUpgrade=function(event){return event.stop(),this.upgradeLink.click(),setTimeout(function(){return $(event.target).removeClass("is-loading")},100)},Restrictions}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Communications.Show=function(){function Show(element){this.element=element,this._edit=__bind(this._edit,this),this.assignElements(),this.observeElements()}return Show.prototype.assignElements=function(){return this.displayContainer=this.element.find(".display"),this.edit={container:this.element.find(".edit"),trigger:this.element.find("a.edit-button"),form:this.element.find("form")},this.edit.form.data("message","Saving")},Show.prototype.observeElements=function(){return this.edit.trigger.exists()?this.edit.trigger.on("click",this._edit):void 0},Show.prototype._edit=function(event){return event.stop(),this.displayContainer.hide(),this.edit.container.show(),this.edit.trigger.hide(),top.overlay.refreshHeight()},Show}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Communications.Tabs=function(){function Tabs(options){this.options=null!=options?options:{},this._showTab=__bind(this._showTab,this),this._refresh=__bind(this._refresh,this),this.assignElements(),this.observeElements(),this._refresh()}return Tabs.prototype.assignElements=function(){return new Communications.Restrictions(this.options.restricted),this.tabs=$(".tabs-wrapper .tab"),this.tabSections=$(".communication-section"),new Communications.Tabs.Comments(this.tabSections.filter(".for-comment")),new Communications.Tabs.SMS(this.tabSections.filter(".for-sms"))},Tabs.prototype.observeElements=function(){return this.tabs.on("click",this._showTab),$(window).on("hashchange",this._refresh)},Tabs.prototype._refresh=function(){var _this=this;return setTimeout(function(){var selected;return selected=_this.tabs.filter("[href="+location.hash+"]"),0===selected.length&&(selected=_this.tabs.first()),selected.click()},100)},Tabs.prototype._showTab=function(event){var target,targetSection;return this.options.ignoreAnchor&&event.preventDefault(),target=$(event.target),targetSection=target.attr("href").replace(/(#|-tab)/g,""),this.tabs.removeClass("is-active"),target.addClass("is-active"),this.tabSections.hide(),this.tabSections.filter(".for-"+targetSection).show(),$(document).trigger("communications-tab:"+targetSection+":focus")},Tabs}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Communications.Tabs.Comments=function(){function Comments(element){this.element=element,this._submitOnReturn=__bind(this._submitOnReturn,this),this._formSubmitted=__bind(this._formSubmitted,this),this._focusTextarea=__bind(this._focusTextarea,this),this._ajaxSuccess=__bind(this._ajaxSuccess,this),this._ajaxError=__bind(this._ajaxError,this),this.assignElements=__bind(this.assignElements,this),this.assignElements(),this.observeElements()}return Comments.prototype.assignElements=function(){return this.form=this.element.find("form.new-comment-form"),this.textarea=this.form.find("textarea"),this.list=this.element.find(".communications-list")},Comments.prototype.observeElements=function(){return $(document).on("communications-tab:comment:focus",this._focusTextarea),this.form.on("submit",this._formSubmitted),this.form.on("ajax:success",this._ajaxSuccess),this.form.on("ajax:error",this._ajaxError),this.textarea.on("keydown",this._submitOnReturn)},Comments.prototype.scrollToBottom=function(){return this.list.scrollTop(this.list[0].scrollHeight)},Comments.prototype._ajaxError=function(){return this.form.removeClass("is-loading"),this.textarea.focus()},Comments.prototype._ajaxSuccess=function(xhr,html){return this.form.removeClass("is-loading"),this.list.append(html),this.scrollToBottom(),this.textarea.val("").focus()},Comments.prototype._focusTextarea=function(){var _this=this;return setTimeout(function(){return _this.scrollToBottom(),_this.textarea.focus()},500)},Comments.prototype._formSubmitted=function(){return this.textarea.blur(),this.form.addClass("is-loading")},Comments.prototype._submitOnReturn=function(event){return(event.shiftKey||event.metaKey)&&13===event.keyCode?(event.preventDefault(),this.form.submit()):void 0},Comments}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Communications.Tabs.SMS=function(){function SMS(element){this.element=element,this._submitOnReturn=__bind(this._submitOnReturn,this),this._replaceSection=__bind(this._replaceSection,this),this._refreshSection=__bind(this._refreshSection,this),this._formSubmitted=__bind(this._formSubmitted,this),this._focusTextarea=__bind(this._focusTextarea,this),this._ajaxSuccess=__bind(this._ajaxSuccess,this),this._ajaxError=__bind(this._ajaxError,this),this.assignElements=__bind(this.assignElements,this),this.assignElements(),this.observeElements(),$(document).trigger("counters:refresh")}return SMS.prototype.assignElements=function(){return this.form=this.element.find("form.new-sms-form"),this.textarea=this.form.find("textarea"),this.list=this.element.find(".communications-list")},SMS.prototype.observeElements=function(){var delay;return $(document).on("communications-tab:sms:focus",this._focusTextarea),this.form.on("submit",this._formSubmitted),this.form.on("ajax:success",this._ajaxSuccess),this.form.on("ajax:error",this._ajaxError),this.textarea.on("keydown",this._submitOnReturn),delay="development"===environment?3e5:1e4,this.interval=setInterval(this._refreshSection,delay)},SMS.prototype.scrollToBottom=function(){return this.list.scrollTop(this.list[0].scrollHeight)},SMS.prototype._ajaxError=function(){return this.form.removeClass("is-loading"),this.textarea.focus()},SMS.prototype._ajaxSuccess=function(xhr,html){return this.form.removeClass("is-loading"),this.list.append(html),this.scrollToBottom(),this.textarea.val("").focus()},SMS.prototype._focusTextarea=function(){var _this=this;return setTimeout(function(){return _this.scrollToBottom(),_this.textarea.focus()},500)},SMS.prototype._formSubmitted=function(){return this.textarea.blur(),this.form.addClass("is-loading")},SMS.prototype._refreshSection=function(){return $.contains(document.body,this.list[0])?$.ajax({url:this.list.data("url"),type:"get",message:"no-message"}).done(this._replaceSection):clearInterval(this.interval)},SMS.prototype._replaceSection=function(html){var e,element,existingElement,scrollHeight,scrollToBottom,scrollTop,_i,_len,_ref;for(scrollTop=this.list.scrollTop(),scrollHeight=this.list.prop("scrollHeight"),scrollToBottom=scrollHeight===scrollTop+this.list.height(),_ref=$(html).find(".communication"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],element=$(e),existingElement=this.list.find("#"+element.attr("id")),existingElement.exists()?element.data("updated")>existingElement.data("updated")&&existingElement.replaceWith(element):this.list.append(element);return scrollToBottom&&scrollHeight!==this.list.prop("scrollHeight")?this.list.animate({scrollTop:this.list.prop("scrollHeight")},1e3):void 0},SMS.prototype._submitOnReturn=function(event){return 13===event.keyCode?(event.preventDefault(),this.form.submit()):void 0},SMS}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Communications.Window=function(){function Window(options){this.options=null!=options?options:{},this._showWindow=__bind(this._showWindow,this),this._showReloadedWindow=__bind(this._showReloadedWindow,this),this._reloadWindow=__bind(this._reloadWindow,this),this._openWindow=__bind(this._openWindow,this),this._closeWindow=__bind(this._closeWindow,this),this.assignElements(),this.observeElements()}return Window.prototype.assignElements=function(){return this.openButton=$(".open-communications-window")},Window.prototype.observeElements=function(){return this.openButton.on("click",this._openWindow)},Window.prototype._assignWindow=function(){return this._window=$(".communications-window"),this._window.find("form").append('<input type="hidden" name="windowed" value="true" />'),this._window.on("click",".close-communications-window",this._closeWindow),new Communications.Restrictions(this.options.restricted,this._window)},Window.prototype._closeWindow=function(){return this._window.inDOM()?(this._window.remove(),$(document).off("sidebar:clicked",this._closeWindow),$(document).off("click","a[data-pjax]",this._closeWindow),$(document).off("communications-window:reload",this._reloadWindow)):void 0},Window.prototype._openWindow=function(event){var href,query,url;return event.preventDefault(),href=$(event.currentTarget).data("href"),url=href.split("?")[0],query=href.split("?")[1],query=query?"?"+query:"",this.url=""+url+"/windowed"+query,$.get(this.url,this._showWindow)},Window.prototype._reloadWindow=function(){var section;return section=this._window.find(".communication-section:visible"),this.tab=section.attr("class").match(/for-(\w+)/)[1],$.get(this.url,this._showReloadedWindow)},Window.prototype._showReloadedWindow=function(responseHTML){var _this=this;return this._window.replaceWith(responseHTML),$.uniform(),this._assignWindow(),setTimeout(function(){return _this._window.find("a.tab[href='#"+_this.tab+"-tab']").click(),_this.tab=null},101)},Window.prototype._showWindow=function(responseHTML){return $("body").append(responseHTML),$.uniform(),this._assignWindow(),$(document).on("sidebar:clicked",this._closeWindow),$(document).on("click","a[data-pjax]",this._closeWindow),$(document).on("communications-window:reload",this._reloadWindow)},Window}()}.call(this),function(){this.Community={observeFlags:function(){return $("a.flag-button").each(function(i,e){var a,label;return a=$(e),label="answer",a.parents(".question").exists()&&(label="question"),a.data("message","Flagging "+label)})},securePosts:function(isAdmin){var links;return links=$("a.edit-post"),isAdmin?links.show():links.each(function(i,e){var link,post;return link=$(e),post=link.parents(".answer,.question"),post.exists()&&post.data("user-id")===currentUserId?link.show():link.remove()})}},$(document).on("click",".community-user-link",function(event){return event.stop(),pjax.loadUrl($(event.target).data("url"))
})}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Community.Answers=function(){function Answers(element){var answer,_i,_len,_ref;for(_ref=element.find(".answer"),_i=0,_len=_ref.length;_len>_i;_i++)answer=_ref[_i],new Community.Answer($(answer))}return Answers}(),Community.Answer=function(_super){function Answer(){return this._updateRating=__bind(this._updateRating,this),this._tallyVotes=__bind(this._tallyVotes,this),this._recordVote=__bind(this._recordVote,this),_ref=Answer.__super__.constructor.apply(this,arguments)}return __extends(Answer,_super),Answer.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Answer.prototype.assignElements=function(){var voting;return this.id=this.element.data("id"),this.userId=this.element.data("user-id"),voting=this.element.find(".voting"),this.voting={element:voting,upvote:voting.find("a.up-vote"),downvote:voting.find("a.down-vote"),rating:voting.find(".rating"),disabled:!1}},Answer.prototype.observeElements=function(){return this.voting.upvote.on("click",this._recordVote),this.voting.downvote.on("click",this._recordVote),this.on("votes:available",this._tallyVotes)},Answer.prototype._recordVote=function(event){return event.stop(),this.userId===currentUserId||this.voting.disabled?void 0:(this.voting.disabled=!0,$.ajax({url:$(event.target).data("url"),data:defaultParams(),type:"post"}).done(this._updateRating))},Answer.prototype._tallyVotes=function(event,data){var selected,total,userId,vote,votes,_i,_len;if(votes=data[this.id],!votes)return this.voting.rating.text("0");for(total=0,userId=this.currentUserId,selected=null,_i=0,_len=votes.length;_len>_i;_i++)vote=votes[_i],total+=vote.value,vote.user_id===currentUserId&&(selected=1===vote.value?"upvote":"downvote");return this.voting.rating.text(total),selected?this.voting[selected].addClass("selected"):void 0},Answer.prototype._updateRating=function(data){var success,trigger,type;return this.voting.rating.text(data.rating),this.voting.upvote.removeClass("selected"),this.voting.downvote.removeClass("selected"),type=data.type,trigger=this.voting[type],success=data[type],success&&trigger.addClass("selected"),this.voting.disabled=!1},Answer}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Community.List=function(){function List(element){this.element=element,this._showTopic=__bind(this._showTopic,this),this._showMoreTopics=__bind(this._showMoreTopics,this),this.assignElements(),this.observeElements()}return List.prototype.assignElements=function(){return this.triggers=this.element.find(".header .filters a"),this.topics=this.element.find("div.topics"),this.showMoreTriggers=this.element.find("a.show-more")},List.prototype.observeElements=function(){return this.triggers.on("click",this._showTopic),this.showMoreTriggers.on("click",this._showMoreTopics)},List.prototype._showMoreTopics=function(event){var topic,trigger;return event.stop(),trigger=$(event.target),topic=trigger.parents("div.topics"),$.ajax({url:window.location.href,data:{type:topic.data("type"),page:trigger.data("page")},type:"GET",dataType:"text html"}).done(function(html){return trigger.before(html),trigger.data("page",trigger.data("page")+1),trigger.data("page")>trigger.data("max")?trigger.hide():void 0})},List.prototype._showTopic=function(event){var className,topic,trigger;return event.stop(),trigger=$(event.target),trigger.hasClass("active")?void 0:(className=trigger.text().toLowerCase(),topic=this.topics.filter("."+className),this.triggers.removeClass("active"),trigger.addClass("active"),this.topics.hide(),topic.show())},List}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Community.Profile=function(){function Profile(element){this.element=element,this.showAnswers=__bind(this.showAnswers,this),this.showQuestions=__bind(this.showQuestions,this),this.showProfile=__bind(this.showProfile,this),this.assignElements(),this.observeElements()}return Profile.createMap=function(element,address){return window.onMapsAvailable(function(){var container,geocoder,header;return container=element.parents(".investing-area"),header=container.prev("h3"),geocoder=new google.maps.Geocoder,geocoder.geocode({address:address},function(results,status){return status===google.maps.GeocoderStatus.OK?new google.maps.Map(element[0],{center:results[0].geometry.location,zoom:5,mapTypeId:google.maps.MapTypeId.ROADMAP}):$(container,header).remove()})})},Profile.prototype.assignElements=function(){return this.triggers={profile:this.element.find(".profile-trigger"),questions:this.element.find(".questions-trigger"),answers:this.element.find(".answers-trigger")},this.containers={profile:this.element.find(".profile-container"),questions:this.element.find(".questions-container"),answers:this.element.find(".answers-container")}},Profile.prototype.observeElements=function(){return this.triggers.profile.on("click",this.showProfile),this.triggers.questions.on("click",this.showQuestions),this.triggers.answers.on("click",this.showAnswers)},Profile.prototype.showProfile=function(event){return event.stop(),this.containers.questions.hide(),this.containers.answers.hide(),this.containers.profile.show()},Profile.prototype.showQuestions=function(event){return event.stop(),"0"!==this.triggers.questions.find("strong").text()?(this.containers.profile.hide(),this.containers.answers.hide(),this.containers.questions.show()):void 0},Profile.prototype.showAnswers=function(event){return event.stop(),"0"!==this.triggers.answers.find("strong").text()?(this.containers.profile.hide(),this.containers.questions.hide(),this.containers.answers.show()):void 0},Profile}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Community.Question=function(){function Question(element){this.element=element,this._updateTrigger=__bind(this._updateTrigger,this),this.assignElements(),this.observeElements()}return Question.prototype.assignElements=function(){return this.message=Message.create(),this.trigger=this.element.find("a.subscription-button"),this.trigger.data("type","json")},Question.prototype.observeElements=function(){return this.trigger.on("ajax:success",this._updateTrigger)},Question.prototype._updateTrigger=function(event,info){var anchor,href;return this.message.flash(info.message),anchor=this.trigger,href=anchor.attr("href"),anchor.hasClass("subscribe")?(anchor.text("Unsubscribe"),anchor.attr("href",href.replace("subscribe","unsubscribe")),anchor.removeClass("subscribe").addClass("unsubscribe")):(anchor.text("Subscribe"),anchor.attr("href",href.replace("unsubscribe","subscribe")),anchor.removeClass("unsubscribe").addClass("subscribe"))},Question}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.Comparables=function(){function Comparables(options){this._updateProperties=__bind(this._updateProperties,this),this._toggleMap=__bind(this._toggleMap,this),this.initialize=__bind(this.initialize,this),$.extend(this,options),$.extend(this,$.parseJSON(this.container.attr("data"))),"undefined"!=typeof google&&null!==google&&null!=google.maps&&null!=google.maps.Map||"test"===environment?this.initialize():Observations.on("google-maps:available",this.initialize)}return Comparables.prototype.initialize=function(){return this.assignElements(),this.observeElements(),this.reset(),this.map?(this.map.reset(),this.map.addToMap([this.target]),this.map.addToMap(this.properties)):void 0},Comparables.prototype.assignElements=function(){var e,element,mapElement,options,property,_i,_len,_ref;for(mapElement=this.container.find(".map"),mapElement.exists()&&"undefined"!=typeof google&&null!==google&&(this.map=new GoogleMap.Dynamic({element:mapElement,elementWrapper:this.container.find(".map-canvas"),container:this.container,allowResize:!1,latitude:this.property.lat,longitude:this.property.lng,zoom:16,scrollwheel:!1}),this.toggleMapTrigger=this.container.find(".toggle-map")),options={owner:this,map:this.map,template:this.infoWindowTemplate},this.target=new Comparables.Target($.extend(options,this.property)),this.propertyContainer=this.container.find(".properties"),this.properties=[],_ref=this.propertyContainer.find(".property"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],property=new Comparables.Property({owner:this,element:$(e),map:this.map,template:this.infoWindowTemplate}),this.properties.push(property);return this.sidebar=new Comparables.Sidebar(this),element=this.propertyContainer.find(".properties-section.for-comps"),this.comps={section:element,table:element.find("table")},element=this.propertyContainer.find(".properties-section.for-properties"),this.property={section:element,table:element.find("table")},this._resetTables()},Comparables.prototype.observeElements=function(){return this.propertyContainer&&this.propertyContainer.on("selections:changed",this._updateProperties),this.toggleMapTrigger?this.toggleMapTrigger.on("click",this._toggleMap):void 0},Comparables.prototype.reset=function(){return this.selectedProperties=[],this.sidebar.reset(),this._updateMap()},Comparables.prototype.update=function(){return this.selectedProperties.any()?(this.sidebar.update(),this._updateMap()):this.reset()},Comparables.prototype._resetTables=function(){var object,type,_i,_j,_len,_len1,_ref,_ref1,_results;for(_ref=["comps","property"],_i=0,_len=_ref.length;_len>_i;_i++)type=_ref[_i],object=this[type],object.header=object.table.find("thead").find("th.tablesorter-headerAsc,th.tablesorter-headerDesc"),object.headerClass=object.header.attr("class");for(this.propertyContainer.find("table").trigger("destroy"),this.propertyContainer.find("table").tablesorter({headers:{0:{sorter:!1}}}),_ref1=["comps","property"],_results=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)type=_ref1[_j],object=this[type],object.header.hasClass(object.headerClass)?_results.push(void 0):_results.push(object.header.click());return _results},Comparables.prototype._toggleMap=function(event){var element,text;return event.stop(),this.map.elementWrapper.toggle(),element=this.toggleMapTrigger.find("span"),text=this.map.elementWrapper.is(":hidden")?"Show":"Hide",element.text(""+text+" Map")},Comparables.prototype._updateMap=function(){var p,_i,_len,_ref,_results;if(this.map){for(_ref=this.properties,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)p=_ref[_i],_results.push(p.refreshMarkerIcon());return _results}},Comparables.prototype._updateProperties=function(event,data){var property,selected;return property=data.property,selected=data.selected,selected?(this.selectedProperties.push(property),this.comps.table.append(property.element),this.comps.section.show()):(this.selectedProperties.remove(property),this.property.table.append(property.element),0===this.selectedProperties.length&&this.comps.section.hide()),this._resetTables(),this.update()},Comparables}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Comparables.Packet=function(){function Packet(sidebar){this.sidebar=sidebar,this._download=__bind(this._download,this),this.save=__bind(this.save,this),this.prepare=__bind(this.prepare,this),this.owner=this.sidebar.owner,this.target=this.owner.target}return Packet.prototype.prepare=function(){return $.ajax({url:this.owner.printCompsUrl,type:"post",data:this._parameters(),message:"Preparing packet"}).done(this._download)},Packet.prototype.save=function(){var data;return data=this._parameters(),data.scale=this._scale(),$.ajax({url:this.owner.saveCompsUrl,type:"post",data:this._parameters(),message:"Saving packet"})},Packet.prototype._download=function(data){return window.location.href=""+data.url+"&scale="+this._scale()},Packet.prototype._parameters=function(){var attributes,id,k,key,keys,properties,result,v,_i,_j,_len,_len1,_ref,_ref1;for(result=defaultParams({"property[address]":this.target.address,"property[city]":this.target.city,"property[state]":this.target.state,"property[zip]":this.target.zip,"property[latitude]":this.target.geocoding.latitude,"property[longitude]":this.target.geocoding.longitude}),this.owner.map&&(result["packet[map_url]"]=this.owner.map.staticMapUrl()),properties=this.owner.selectedProperties.map(function(p){return p.packetAttributes()}),_i=0,_len=properties.length;_len>_i;_i++){attributes=properties[_i],id=attributes.id;for(k in attributes)v=attributes[k],result["packet[properties]["+id+"]["+k+"]"]=v}for(keys=["estimate","taxes","zillow","eppraisal"],_j=0,_len1=keys.length;_len1>_j;_j++){key=keys[_j],_ref=this.owner[key];for(k in _ref)v=_ref[k],result["packet["+key+"]["+k+"]"]=v}_ref1=this.sidebar.calculatedAverages;for(k in _ref1)v=_ref1[k],result["packet[averages]["+k+"]"]=v;return result},Packet.prototype._scale=function(){return this.sidebar.container.find("input:radio[name=scale]:checked").val()},Packet}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Comparables.Property=function(_super){function Property(){return this._showMapInfoWindow=__bind(this._showMapInfoWindow,this),this._success=__bind(this._success,this),this._save=__bind(this._save,this),this.notify=__bind(this.notify,this),_ref=Property.__super__.constructor.apply(this,arguments)}return __extends(Property,_super),Property.prototype.initialize=function(options){return $.extend(this,options),this.assignAttributes(),this.assignElements(),this.observeElements()},Property.prototype.assignAttributes=function(){return this.id=this._data("id"),this.address=this._data("street"),this.city=this._data("city"),this.state=this._data("state"),this.zip=this._data("zip"),this.beds=this._parseInt(this._data("bedrooms")),this.baths=this._parseFloat(this._data("bathrooms")),this.livingArea=this._parseInt(this._data("living-area")),this.yearBuilt=this._parseInt(this._data("year-built")),this.price=this._parseInt(this._data("price")),this.dateString=this._data("close-date"),this.date=new Date(Date.parse(this.dateString)),this.distance=this._parseFloat(this._data("distance")),this.latitude=this._parseFloat(this._data("latitude")),this.longitude=this._parseFloat(this._data("longitude")),this.geocoding={latitude:this.latitude,longitude:this.longitude},this.cityStateZip=""+this.city+", "+this.state+" "+this.zip,this.priceDisplay="$"+commaize(this.price),this.bedsDisplay=""+this.beds+" Bed",1!==this.beds&&(this.bedsDisplay+="s"),this.bathsDisplay=""+this.baths+" Bath",1!==this.baths&&(this.bathsDisplay+="s"),this.livingAreaDisplay=""+commaize(this.livingArea)+" sqft"},Property.prototype.assignElements=function(){return this.container=this.element.parents(".properties"),this.checkbox=this.element.find("input:checkbox")},Property.prototype.googleMap=function(){return this.map},Property.prototype.infoWindowElement=function(){return $(this.template.evaluate(this))},Property.prototype.mapIcon=function(){return new google.maps.MarkerImage(this.markerImageUrl(),new google.maps.Size(19,19))},Property.prototype.mapMarker=function(map){return this.marker?this.marker:this.marker=Property.__super__.mapMarker.call(this,map)},Property.prototype.markerImageUrl=function(){return image_url("comps/marker/"+(this.checkbox.is(":checked")?"selected.png":"normal.png"))},Property.prototype.notify=function(){return this.container.trigger("selections:changed",{property:this,selected:this.checkbox.is(":checked")})},Property.prototype.observeElements=function(){return this.checkbox.on("click",this.notify),this.map?this.element.on("click",this._showMapInfoWindow):void 0},Property.prototype.observeInfoWindow=function(element){var saveLink;return element.find("a.street-view").on("click",this.showStreetView),saveLink=element.find("a.save").show(),this.saved?this._modifySaveTrigger(saveLink):saveLink.on("click",this._save)},Property.prototype.packetAttributes=function(){return{id:this.id,address:this.address,baths:this.baths,beds:this.beds,city:this.city,date:this.dateString,distance:this.distance,latitude:this.latitude,longitude:this.longitude,living_area:this.livingArea,last_amount:this.price,state:this.state,year_built:this.yearBuilt,zip:this.zip}},Property.prototype.refreshMarkerIcon=function(){return this.marker&&this.marker.icon.url!==this.markerImageUrl()?this.marker.setIcon(this.mapIcon()):void 0},Property.prototype._data=function(name){return this.element.data(name)},Property.prototype._infoWindowHTML=function(){var element;return element=this.infoWindowElement(),this.observeInfoWindow(element),element},Property.prototype._modifySaveTrigger=function(trigger){var _this=this;return trigger.text("Edit Property Details"),trigger.on("click",function(event){return event.stop(),pjax.loadUrl(_this.propertyUrl)})},Property.prototype._modifySaveTriggers=function(){var t,_i,_len,_ref1,_results;if(this.saved){for(_ref1=$(".info-window a.save"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)t=_ref1[_i],_results.push(this._modifySaveTrigger($(t)));return _results}},Property.prototype._parameters=function(){return defaultParams({"property[address]":this.address,"property[city]":this.city,"property[state]":this.state,"property[zip]":this.zip})},Property.prototype._parseFloat=function(value){return!value||(value+"").blank()?0:parseFloat(value)},Property.prototype._parseInt=function(value){return!value||(value+"").blank()?0:parseInt(value,10)},Property.prototype._save=function(event){return this.saved?void 0:(event.stop(),$.ajax({url:this.owner.saveUrl,type:"post",data:this._parameters(),message:"Saving"}).done(this._success))},Property.prototype._success=function(data){return this.propertyUrl=data.url,this.saved=!0,this._modifySaveTriggers(),Message.create().flash("Property saved.")},Property.prototype._showMapInfoWindow=function(event){var target;return target=$(event.target),target.hasClass(".select")||target.parents("td.select").exists()?void 0:this.showMapInfoWindow(event)},Property}(GoogleMap.Mappable)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Comparables.Sidebar=function(){function Sidebar(owner){this.owner=owner,this._saveCompsPacket=__bind(this._saveCompsPacket,this),this._openbrandingUrl=__bind(this._openbrandingUrl,this),this._downloadCompsPacket=__bind(this._downloadCompsPacket,this),this.container=this.owner.container,this.assignElements(),this.observeElements()}return Sidebar.prototype.assignElements=function(){return this.element=this.container.find("#sidebar"),this.averages={estimate:this.container.find(".calculator .offer-estimate .value"),livingArea:this.container.find(".calculator .living-area .value"),ppsqft:this.container.find(".calculator .price-per-sqft .value")},this.templates={estimate:"$#{value}",livingArea:"#{value} sqft",ppsqft:"$#{value}"},this.offers=this.container.find(".chart").last().find(".entry"),this.printCompsTrigger=this.element.find("a.print-button"),this.saveCompsTrigger=this.element.find("a.save-button"),this.branding=this.element.find(".branding")},Sidebar.prototype.observeElements=function(){return this.printCompsTrigger.on("click",this._downloadCompsPacket),this.saveCompsTrigger.on("click",this._saveCompsPacket),this.branding.on("click","img",this._openbrandingUrl)},Sidebar.prototype.reset=function(){return this.calculatedAverages={},this._applyAverages(),this._updateOffers(this.owner.estimate.average)},Sidebar.prototype.update=function(){return this._applyAverages(),this._applyOffers()},Sidebar.prototype._applyAverages=function(){var collection,collections,key,n,property,sums,value,_i,_j,_len,_len1,_ref,_results;for(collections={estimate:[],livingArea:[],ppsqft:[]},sums={estimate:0,livingArea:0,ppsqft:0},_ref=this.owner.selectedProperties,_i=0,_len=_ref.length;_len>_i;_i++)property=_ref[_i],collections.estimate.push(property.price),property.livingArea&&(collections.livingArea.push(property.livingArea),collections.ppsqft.push(property.price/property.livingArea));_results=[];for(key in collections)if(collection=collections[key],collection.any()){for(_j=0,_len1=collection.length;_len1>_j;_j++)n=collection[_j],sums[key]+=n;this.calculatedAverages[key]=parseInt(sums[key]/collection.length),value=commaize(this.calculatedAverages[key]),_results.push(this.averages[key].text(this.templates[key].evaluate({value:value})))}else this.calculatedAverages[key]=0,_results.push(this.averages[key].text("N/A"));return _results},Sidebar.prototype._applyOffers=function(){return this._updateOffers(this.calculatedAverages.estimate)},Sidebar.prototype._downloadCompsPacket=function(event){return event.stop(),new Comparables.Packet(this).prepare(event)},Sidebar.prototype._openbrandingUrl=function(event){var img;return event.stop(),img=$(event.target),window.open(img.closest("div").data("url"))},Sidebar.prototype._saveCompsPacket=function(event){return event.stop(),new Comparables.Packet(this).save(event)},Sidebar.prototype._updateOffers=function(baseValue){var e,factor,offer,_i,_len,_ref,_results;for(_ref=this.offers,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],offer=$(e),factor=parseFloat(offer.data("factor")),_results.push(offer.find(".value").text("$"+commaize(parseInt(baseValue*factor,10))));return _results},Sidebar}()}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Comparables.Target=function(_super){function Target(){return _ref=Target.__super__.constructor.apply(this,arguments)}return __extends(Target,_super),Target.prototype.assignAttributes=function(){return this.latitude=this.lat,this.longitude=this.lng,this.geocoding={latitude:this.latitude,longitude:this.longitude},this.cityStateZip=""+this.city+", "+this.state+" "+this.zip,this.asking_price&&(this.priceDisplay="$"+commaize(this.asking_price)),this.beds=parseInt(this.beds),this.bedsDisplay=""+this.beds+" Bed",1!==this.beds&&(this.bedsDisplay+="s"),this.beds=parseInt(this.baths),this.bathsDisplay=""+this.baths+" Bath",1!==this.baths&&(this.bathsDisplay+="s"),this.livingArea=parseInt(this.living_space),this.livingAreaDisplay=""+commaize(this.livingArea)+" sqft"},Target.prototype.assignElements=function(){return this.message=Message.create(),this.element=$("<tr>"),this.container=$("<div>"),this.checkbox=$('<input type="checkbox">'),this.saveTrigger=this.owner.container.find(".actions .action-button"),this.saved=!!this.id,this.saved?(this.propertyUrl="/properties/"+this.id+"/edit",this._modifySaveTrigger(this.saveTrigger)):void 0},Target.prototype.mapIcon=function(){return new google.maps.MarkerImage(this.markerImageUrl(),new google.maps.Size(32,49))},Target.prototype.markerImageUrl=function(){return image_url("map-markers/plain.png")},Target.prototype.observeElements=function(){return Target.__super__.observeElements.call(this),this.saveTrigger.on("click",this._save)},Target.prototype.observeInfoWindow=function(element){return Target.__super__.observeInfoWindow.call(this,element),element.find(".price, .details").hide()},Target.prototype._modifySaveTriggers=function(){return Target.__super__._modifySaveTriggers.call(this),this._modifySaveTrigger(this.saveTrigger)},Target}(Comparables.Property)}.call(this),function(){this.Contacts={}}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Contacts.Details=function(_super){function Details(){return _ref=Details.__super__.constructor.apply(this,arguments)}return __extends(Details,_super),Details.prototype.assignHelpers=function(){return this.message=Message.create(),this.sidebar=new Details.Sidebar(this,this.container.find("#sidebar"),this.name),this.sidebarOnly?void 0:(this.actionbar=new Details.Actionbar(this,this.container.find("#actionbar")),this.form=new Contacts.Details.Form(this,this.container.find("#contact-form")),this.properties=new Details.Associations(this,"property"),new CustomFields.Conditions(this.form))},Details}(Details)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Contacts.Details.Form=function(_super){function Form(){return _ref=Form.__super__.constructor.apply(this,arguments)}return __extends(Form,_super),Form.prototype.assignElements=function(){return Form.__super__.assignElements.call(this),this.countrySelect=this.element.find("#contact_country")},Form.prototype._createHeader=function(){return new Buyers.Details.Form.Header(this)},Form}(Details.Form)}.call(this),function(){this.ContractWizard={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};ContractWizard.First=function(){function First(){this._toggleSystemTemplates=__bind(this._toggleSystemTemplates,this),this.assignElements(),this.observeElements()}return First.prototype.assignElements=function(){return this.systemToggle=$(".toggle-system"),this.systemTemplates=$(".radio-field.system")},First.prototype.observeElements=function(){return this.systemToggle.on("click",this._toggleSystemTemplates)},First.prototype._toggleSystemTemplates=function(){var prefix;return this.systemTemplates.toggle(),prefix=this.systemToggle.text().match("Hide")?"Show":"Hide",this.systemToggle.text(""+prefix+" System Templates")},First}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};ContractWizard.List=function(_super){function List(){return this._selectOption=__bind(this._selectOption,this),this._performSearch=__bind(this._performSearch,this),_ref=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements(),this._performSearch()},List.prototype.assignElements=function(){return this.container=this.element.find("#objects"),this.search=this.element.find(".search input:text"),this.empty=this.element.find(".no-matches")},List.prototype.observeElements=function(){return this.search.on("keyup",this._performSearch),this.container.on("click",".option",this._selectOption)},List.prototype.refreshHeight=function(){return clearTimeout(this.heightTimeout),this.heightTimeout=setTimeout(function(){return top.overlay.refreshHeight()},10)},List.prototype._performSearch=function(){var options,query;return this.empty.hide(),options=this.container.find(".option"),query=this.search.val().replace(/[^a-zA-Z0-9.@]/g,"").toLowerCase(),query.blank()?options.show():options.hide().filter("[data-content*='"+query+"']").show(),options.filter(":visible").exists()||this.empty.show(),this.refreshHeight()},List.prototype._selectOption=function(event){var data,option;return option=$(event.target).closest(".option"),data=option.data(),top.Observations.trigger("contract:populate-fields",{label:data.name,value:data.id,associated:option.is(".associated")}),top.overlay.hide()},List}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};ContractWizard.Second=function(_super){function Second(){return this._submitViaPjax=__bind(this._submitViaPjax,this),this._submitViaAjax=__bind(this._submitViaAjax,this),this._setFieldIndex=__bind(this._setFieldIndex,this),this._renderTemplateEditor=__bind(this._renderTemplateEditor,this),this._populateFields=__bind(this._populateFields,this),this._enableInputs=__bind(this._enableInputs,this),_ref=Second.__super__.constructor.apply(this,arguments)}return __extends(Second,_super),Second.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.assignObservers()},Second.prototype.assignElements=function(){var containers,e,element,_i,_j,_len,_len1,_ref1,_ref2;for(this.autocompletes=[],containers=this.element.find(".buyer-fields, .contact-fields, .property-fields"),_ref1=containers.find(".field"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],element=$(e),this.autocompletes.push({container:element,field:element.find(".autocomplete-field"),target:element.find(".autocomplete-target"),cancel:element.find(".cancel-autocomplete"),full:element.find(".full-list"),checkbox:element.find(".checkbox-field")});for(_ref2=this.element.find(".preview"),_j=0,_len1=_ref2.length;_len1>_j;_j++)e=_ref2[_j],new ContractWizard.Second.Preview($(e));return this.buttons={previous:this.element.find("input:submit.previous"),next:this.element.find("input:submit.next")}},Second.prototype.assignObservers=function(){var ac,index,_i,_len,_ref1;for(index=0,_ref1=this.autocompletes,_i=0,_len=_ref1.length;_len>_i;_i++)ac=_ref1[_i],ac.container.data("index",index),ac.field.autocomplete(this._autocompleteOptions(ac)),ac.cancel.on("click",this._cancelSelection(ac)),ac.full.on("click",this._setFieldIndex),ac.target.val().blank()?ac.cancel.click():this._disableInput(ac),index++;return this.buttons.previous.on("click",this._submitViaPjax),this.buttons.next.on("click",this._submitViaAjax),this.element.on("ajax:success",this._renderTemplateEditor),this.element.on("submit",this._enableInputs),this.on("contract:populate-fields",this._populateFields)},Second.prototype._autocompleteOptions=function(ac){return{source:ac.field.data("url"),appendTo:this.autocomplete,minLength:2,delay:500,select:this._autocompleteSelect(ac),open:function(){var top;return top=parseInt($("ul.ui-autocomplete:visible").css("top")),$("ul.ui-autocomplete").css("top",top-1)}}},Second.prototype._autocompleteSelect=function(ac){var _this=this;return function(event,ui){var associated,item;return event.stop(),item=ui.item,associated=!!item.associated,ac.field.val(item.label),ac.target.val(item.value),ac.field.disable(),ac.cancel.show(),ac.full.hide(),!associated&&ac.checkbox.exists()&&(ac.checkbox.show(),ac.checkbox.find("input").attr("value",item.id)),_this._updateVariables()}},Second.prototype._cancelSelection=function(ac){return function(){return ac.target.val(""),ac.field.val(""),ac.field.enable(),ac.field.focus(),ac.cancel.hide(),ac.full.show(),ac.checkbox.hide()}},Second.prototype._disableInput=function(ac){return ac.field.disable(),ac.cancel.show(),ac.full.hide()},Second.prototype._enableInputs=function(){var ac,_i,_len,_ref1,_results;for(_ref1=this.autocompletes,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)ac=_ref1[_i],_results.push(ac.field.enable());return _results},Second.prototype._populateFields=function(event,data){var autocomplete;return autocomplete=this.autocompletes[this.populateTarget],this._autocompleteSelect(autocomplete)(event,{item:data})},Second.prototype._renderTemplateEditor=function(event,html){return $.replaceDocument(html)},Second.prototype._setFieldIndex=function(event){var target;return target=$(event.target).parents(".field"),this.populateTarget=target.data("index")},Second.prototype._submitViaAjax=function(event){return event.stop(),this.element.removeAttr("data-pjax"),this.element.removeAttr("data-push"),this.element.attr("data-remote","true"),this.element.submit()},Second.prototype._submitViaPjax=function(event){return this.submitted?void 0:(this.submitted=!0,event.stop(),this.element.removeAttr("data-remote"),this.element.attr("data-pjax","true"),this.element.attr("data-push","true"),this.buttons.previous.click())
},Second.prototype._updateVariables=function(){var container;return container=this.element.find(".mapped-variables"),$.ajax({url:container.data("url"),type:"post",message:"no-message",data:this.element.serializeArray()}).done(function(html){return container.replaceWith(html)})},Second}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};ContractWizard.Second.Preview=function(_super){function Preview(){return this._preview=__bind(this._preview,this),this._initialize=__bind(this._initialize,this),_ref=Preview.__super__.constructor.apply(this,arguments)}return __extends(Preview,_super),Preview.prototype.initialize=function(element){return this.element=element,this.fragmentId=this.element.data("fragment-id"),this.title=this.element.data("title"),this.pageId=this.element.data("page-id"),this.on("preview:initialize",this._initialize)},Preview.prototype._initialize=function(event,data){var _this=this;return this.overlay=Overlay.cache["fragment-preview"],this.element=this.overlay.wrapper,this.elements={title:this.element.find(".overlay-header h1"),window:this.element.find(".overlay-window"),content:this.element.find(".preview-content"),image:this.element.find("img.page"),fragment:this.element.find(".fragment")},this.fragment=data.fragments.detect(function(f){return f.id===_this.fragmentId}),this.pageUrl=data.pages[this.pageId],this.element.on("click",this._preview)},Preview.prototype._preview=function(event){var halfway,padding,top;return event.stop(),this.elements.title.text(this.title),this.elements.image.attr("src",this.pageUrl),this.elements.window.css({width:""+this.fragment.page_width+"px",height:"500px"}),this.elements.fragment.html(this.fragment.content),this.elements.fragment.css({position:"absolute",top:""+this.fragment.y+"px",left:""+this.fragment.x+"px",padding:"2px 5px",border:"dashed 1px red",fontSize:""+this.fragment.font_size*this.fragment.max_page_height/this.fragment.page_height+"px",fontFamily:this.fragment.font_family}),this.elements.image.css({width:""+this.fragment.page_width+"px"}),this.overlay.show(),padding=this.elements.window.height()-500,this.elements.content.css({height:""+(500-padding-this.elements.title.height())+"px",overflowY:"scroll",position:"relative"}),halfway=this.elements.content.height()/2,top=this.fragment.y+this.elements.fragment.height()/2,this.elements.content.scrollTop(top-halfway)},Preview}(GCObject)}.call(this),function(){this.CSVImport=function(){function CSVImport(options){$.extend(this,options),this.assignElements(),this.observeElements()}return CSVImport.prototype.assignElements=function(){var e,_i,_j,_len,_len1,_ref,_ref1;for(new CSVImport.Template.Editor(this),this.sources=[],_ref=this.element.find("#csv-fields .csv-field"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],this.sources.push(new CSVImport.Source($(e)));for(this.destinations=[],_ref1=this.element.find("#destination-fields .destination-field"),_j=0,_len1=_ref1.length;_len1>_j;_j++)e=_ref1[_j],this.destinations.push(new CSVImport.Destination($(e)));return this.property?new CSVImport.Second(this.element):void 0},CSVImport.prototype.observeElements=function(){var object,_i,_j,_len,_len1,_ref,_ref1,_results;for(_ref=this.sources,_i=0,_len=_ref.length;_len>_i;_i++)object=_ref[_i],object.observeElements();for(_ref1=this.destinations,_results=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)object=_ref1[_j],_results.push(object.observeElements());return _results},CSVImport}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};CSVImport.Associations=function(){function Associations(){this._toggleGroupProperties=__bind(this._toggleGroupProperties,this),this._toggleGroupCheckbox=__bind(this._toggleGroupCheckbox,this),this._toggleGroupCheckboxes=__bind(this._toggleGroupCheckboxes,this),this._save=__bind(this._save,this),this.assignElements(),this.observeElements(),top.overlay.refreshHeight()}return Associations.prototype.assignElements=function(){return this.save=$(".content-actions .action-button"),this.groups={checkboxes:$("section.group h2 input:checkbox"),headers:$("section.group h2"),allCheckboxes:$("section.group ul.properties input:checkbox")},this._parent={trigger:top.$("#properties-trigger"),input:top.$("#properties-input")}},Associations.prototype.observeElements=function(){return this.save.on("click",this._save),this.groups.checkboxes.on("click",this._toggleGroupCheckboxes),this.groups.allCheckboxes.on("click",this._toggleGroupCheckbox),this.groups.headers.on("click",this._toggleGroupProperties)},Associations.prototype._properties=function(){var checkboxes,e,properties,_i,_len;for(checkboxes=$("ul.properties input:checkbox:checked"),properties=[],_i=0,_len=checkboxes.length;_len>_i;_i++)e=checkboxes[_i],properties.push($(e).val());return properties},Associations.prototype._save=function(event){return event.stop(),this._updateParent(),top.overlay.hide()},Associations.prototype._toggleGroupCheckboxes=function(event){var c,checkboxes,checked,target,_i,_len,_results;for(target=$(event.target),checked=target.is(":checked"),checkboxes=target.parents("section.group").find("ul.properties input:checkbox"),_results=[],_i=0,_len=checkboxes.length;_len>_i;_i++)c=checkboxes[_i],_results.push($(c).check(checked));return _results},Associations.prototype._toggleGroupCheckbox=function(event){var checkboxes,checked,mainCheckbox,target;return target=$(event.target),mainCheckbox=target.parents("section.group").find("h2 input:checkbox"),checkboxes=target.parents("section.group").find("ul.properties input:checkbox"),checked=checkboxes.filter(":checked"),checked.length===checkboxes.length?mainCheckbox.check(!0):checked.exists()?mainCheckbox.check("mixed"):mainCheckbox.check(!1)},Associations.prototype._toggleGroupProperties=function(event){var section,span,target;return target=$(event.target),target.is(":checkbox")?void 0:(section=target.parents("section.group"),section.find("ul.properties").toggle(),span=section.find("span.collapsed, span.expanded"),span.toggleClass("collapsed expanded"))},Associations.prototype._updateParent=function(){var properties,text;return properties=this._properties(),text=properties.any()?properties.length:"No",text=1===text?""+text+" Property":""+text+" Properties",this._parent.trigger.text(text),this._parent.input.val(properties.join(","))},Associations}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};CSVImport.Destination=function(_super){function Destination(){return this._removeValue=__bind(this._removeValue,this),this._applySource=__bind(this._applySource,this),this._addValue=__bind(this._addValue,this),_ref=Destination.__super__.constructor.apply(this,arguments)}return __extends(Destination,_super),Destination.prototype.initialize=function(element){return this.element=element,this.match=this.element.find(".matched-field"),this.label=this.match.find(".csv-field"),this.input=this.match.find("input:hidden"),this.removeTrigger=this.match.find(".remove"),this.value=this.input.val(),this.attribute=this.input.attr("name")},Destination.prototype.observeElements=function(){return this.match.droppable({hoverClass:"drag-hover",accept:".csv-field",drop:this._addValue}),this.removeTrigger.on("click",this._removeValue),this.on("destinations:clear",this._removeValue),this.on("destination:"+this.attribute+":apply-source",this._applySource)},Destination.prototype._addValue=function(event,object){var element;return this._removeValue(),element=$(object.draggable[0]),this.value=element.attr("value"),this.input.val(this.value),this.match.removeClass("empty"),this.label.text(element.text()),this.trigger("source:"+this.value+":used")},Destination.prototype._applySource=function(event,source){return this._addValue(event,{draggable:[source]}),this.trigger("destination:"+this.attribute+":source-applied")},Destination.prototype._removeValue=function(event){return event&&"click"===event.type&&event.stop(),this.value.blank()?void 0:(this.trigger("source:"+this.value+":unused"),this.value="",this.input.val(this.value),this.match.addClass("empty"),this.label.text("Empty"))},Destination}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};CSVImport.First=function(){function First(element){this.element=element,this._showExistingGroupField=__bind(this._showExistingGroupField,this),this._showNewGroupField=__bind(this._showNewGroupField,this),this._hideGroupFields=__bind(this._hideGroupFields,this),this.assignElements(),this.observeElements()}return First.prototype.assignElements=function(){return this.group={options:{_new:this.element.find("input:radio[value=new]"),_existing:this.element.find("input:radio[value=existing]"),_none:this.element.find("input:radio[value=none]")},fields:{_new:this.element.find(".group-new"),_existing:this.element.find(".group-existing")}}},First.prototype.observeElements=function(){return this.group.options._new.on("click",this._showNewGroupField),this.group.options._existing.on("click",this._showExistingGroupField),this.group.options._none.on("click",this._hideGroupFields)},First.prototype._hideGroupFields=function(){return this.group.fields._new.hide(),this.group.fields._existing.hide()},First.prototype._showNewGroupField=function(){return this._hideGroupFields(),this.group.fields._new.show()},First.prototype._showExistingGroupField=function(){return this._hideGroupFields(),this.group.fields._existing.show()},First}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};CSVImport.Preview=function(){function Preview(fieldContainer,dataContainer){this.fieldContainer=fieldContainer,this.dataContainer=dataContainer,this._click=__bind(this._click,this),this.assignElements(),this.observeElements()}return Preview.prototype.assignElements=function(){return this.fields=this.fieldContainer.find("tbody tr"),this.data=this.dataContainer.find("dl")},Preview.prototype.observeElements=function(){return this.fields.on("click",this._click)},Preview.prototype._click=function(event){var data,f,field,index,_i,_len,_ref;for(field=$(event.currentTarget),data=null,index=0,_ref=this.fields,_i=0,_len=_ref.length;_len>_i;_i++)f=_ref[_i],$(f).is(field)&&(data=$(this.data[index])),index++;return this.fields.removeClass("active"),this.data.hide(),field.addClass("active"),data.show()},Preview}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};CSVImport.Second=function(){function Second(element){this.element=element,this._activateFields=__bind(this._activateFields,this),this.assignElements(),this.observeElements()}return Second.prototype.assignElements=function(){return this.tabs=this.element.find(".fields-tabs span"),this.fields=this.element.find("#destination-fields .fields-wrapper")},Second.prototype.observeElements=function(){return this.tabs.on("click",this._activateFields)},Second.prototype._activateFields=function(event){var target;return target=$(event.target),this.fields.hide(),this.tabs.removeClass("active"),target.addClass("active"),this.element.find(".fields-wrapper[data-field="+target.data("target")+"]").show()},Second}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};CSVImport.Source=function(_super){function Source(){return this._revert=__bind(this._revert,this),this._markAsUsed=__bind(this._markAsUsed,this),this._markAsUnused=__bind(this._markAsUnused,this),this._applyFromTemplate=__bind(this._applyFromTemplate,this),_ref=Source.__super__.constructor.apply(this,arguments)}return __extends(Source,_super),Source.prototype.initialize=function(element){return this.element=element,this.index=this.element.attr("value"),this.title=this.element.text(),this.recentlyUsed=!1,this.useCount=0},Source.prototype.observeElements=function(){return this.element.draggable({helper:function(){return $(this).clone().appendTo(document.body)},revert:this._revert,revertDuration:200,scroll:!0,start:this._dragStart,stop:this._dragStop}),this.on("source:"+this.index+":used",this._markAsUsed),this.on("source:"+this.index+":unused",this._markAsUnused),this.on("source:index:"+this.index+":apply-template",this._applyFromTemplate),this.on("source:header:"+this.title.underscore()+":apply-template",this._applyFromTemplate)},Source.prototype._applyFromTemplate=function(event,name){return event.stop(),this.trigger("destination:"+name+":apply-source",this.element)},Source.prototype._dragStart=function(){return $(this).addClass("dragging")},Source.prototype._dragStop=function(){return $(this).removeClass("dragging")},Source.prototype._markAsUnused=function(){return this.useCount--,0===this.useCount?this.element.removeClass("in-use"):void 0},Source.prototype._markAsUsed=function(){return this.element.addClass("in-use"),this.recentlyUsed=!0,this.useCount++},Source.prototype._revert=function(){return this.recentlyUsed?(this.element.css({top:0,left:0}),this.recentlyUsed=!1):!0},Source}(GCObject)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};CSVImport.Template=function(_super){function Template(){return _ref=Template.__super__.constructor.apply(this,arguments)}return __extends(Template,_super),Template.prototype.initialize=function(data){return $.extend(this,data),this.assignHelpers()},Template.prototype.assignHelpers=function(){var attribute,index,_ref1,_results;this.message=Message.create(),this.headers=this.data.headers,this.mappings=[],_ref1=this.data.mappings,_results=[];for(attribute in _ref1)index=_ref1[attribute],_results.push(this.mappings.push(new CSVImport.Template.Mapping({attribute:attribute,index:index,isHeader:this.isHeader,header:this.headers[index]})));return _results},Template.prototype.apply=function(){var mapping,_i,_len,_ref1,_results;for(this.trigger("destinations:clear"),_ref1=this.mappings,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)mapping=_ref1[_i],_results.push(mapping.apply());return _results},Template.prototype.remove=function(urlTemplate){var _this=this;return $.ajax({url:urlTemplate.evaluate(this),type:"post",data:defaultParams(),message:"Deleting"}).done(function(){return _this.trigger("template:removed",_this)})},Template}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};CSVImport.Template.Editor=function(_super){function Editor(){return this._save=__bind(this._save,this),this._removeTemplateOption=__bind(this._removeTemplateOption,this),this._removeTemplate=__bind(this._removeTemplate,this),this._notifyOfUnusedFields=__bind(this._notifyOfUnusedFields,this),this._cancel=__bind(this._cancel,this),this._applyTemplate=__bind(this._applyTemplate,this),_ref=Editor.__super__.constructor.apply(this,arguments)}return __extends(Editor,_super),Editor.prototype.initialize=function(_import){return this["import"]=_import,this.assignElements(),this.observeElements()},Editor.prototype.assignElements=function(){var isHeader,_this=this;return this.element=this["import"].element,this.message=Message.create(),this.select=this.element.find("select#import_template"),this.nameInput=this.element.find("input#import_template_name"),this.triggers={save:this.element.find("a.save-import"),cancel:this.element.find("a.cancel-save-import"),remove:this.element.find("a.remove-import")},this.attributes=[],isHeader=this["import"].header,this.templates=this["import"].templates.map(function(template){return template.isHeader=isHeader,null!=template.data.headers?new CSVImport.Template(template):_this.select.find("option[value="+template.id+"]").remove()})},Editor.prototype.observeElements=function(){return this.triggers.save.on("click",this._save),this.triggers.cancel.on("click",this._cancel),this.triggers.remove.on("click",this._removeTemplate),this.select.on("change",this._applyTemplate),this.on("template:removed",this._removeTemplateOption),this.on("templates:mapping-not-applied",this._notifyOfUnusedFields)},Editor.prototype._applyTemplate=function(){var template;return template=this._currentTemplate(),template?(this.triggers.remove.show(),template.apply()):this.triggers.remove.hide()},Editor.prototype._cancel=function(event){return event.stop(),this.select.parents(".selector").show(),this.triggers.save.show(),this.triggers.cancel.hide(),this.nameInput.disable().hide(),this._applyTemplate()},Editor.prototype._currentTemplate=function(){var id;return id=parseInt(this.select.val(),10),this.templates.detect(function(t){return t.id===id})},Editor.prototype._notifyOfUnusedFields=function(){return this.message.flash("Some of the fields for this template could not be matched.")},Editor.prototype._removeTemplate=function(event){var template;return event.stop(),(template=this._currentTemplate())?(this.select.disable(),template.remove(this.triggers.remove.data("url"))):void 0},Editor.prototype._removeTemplateOption=function(event,template){return this.select.find("option[value="+template.id+"]").remove(),this.select.val("").change(),this.select.enable(),this.triggers.remove.hide()},Editor.prototype._save=function(event){return event.stop(),this.select.parents(".selector").hide(),this.triggers.save.hide(),this.triggers.remove.hide(),this.triggers.cancel.show(),this.nameInput.enable().show()},Editor}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};CSVImport.Template.Mapping=function(_super){function Mapping(){return this._markAsNotApplied=__bind(this._markAsNotApplied,this),this._markAsApplied=__bind(this._markAsApplied,this),_ref=Mapping.__super__.constructor.apply(this,arguments)}return __extends(Mapping,_super),Mapping.prototype.initialize=function(options){return $.extend(this,options),this.on("destination:"+this.attribute+":source-applied",this._markAsApplied)},Mapping.prototype.apply=function(){var eventName;return eventName="index:"+this.index,this.isHeader&&(eventName="header:"+this.header.underscore()),this.timeout=setTimeout(this._markAsNotApplied,100),this.trigger("source:"+eventName+":apply-template",this.attribute)},Mapping.prototype._markAsApplied=function(){return clearTimeout(this.timeout)},Mapping.prototype._markAsNotApplied=function(){return this.trigger("templates:mapping-not-applied",this)},Mapping}(GCObject)}.call(this),function(){this.CustomFields={}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};CustomFields.Condition=function(_super){function Condition(){return this._determineVisibility=__bind(this._determineVisibility,this),this._addMultitextField=__bind(this._addMultitextField,this),_ref=Condition.__super__.constructor.apply(this,arguments)}return __extends(Condition,_super),Condition.prototype.initialize=function(field,options){return this.field=field,$.extend(this,options),this.assignElements(),this.observeElements(),this._determineVisibility()},Condition.prototype.assignElements=function(){var nameSelector;return this.form=this.field.form,this.namespace=this.form.namespace,this.config=this.form.conditions.configuration[this.namespace.capitalize()],this.type=this.config[this.target],$.isArray(this.type)&&(this.type=this.type.first()),this.elementTypes={text:["input:text","textarea"],multitext:["input:text"],select:["select"],numeric:["input:text","select"],checkbox:["input:checkbox"],date:["input:text"]}[this.type],nameSelector='[name="'+this.namespace+"["+this.target+("multitext"===this.type?"][":"")+']"]',this.selector=this.elementTypes.map(function(t){return t+nameSelector}).join(","),this.elements=this.form.element.find(this.selector)},Condition.prototype.observeElements=function(){var events,handler,name,_i,_len;for(handler=this._determineVisibility,events=[],["text","multitext","numeric","date"].include(this.type)&&events.push("keyup"),"checkbox"===this.type?events.push("click"):events.push("change"),_i=0,_len=events.length;_len>_i;_i++)name=events[_i],this.elements.on(name,handler);return"multitext"===this.type&&this.on("multiple-field:added",this._addMultitextField),this.handler=handler},Condition.prototype._addMultitextField=function(event,field){return field.match(this.selector)?(this.elements.push(field),field.on("keyup",this.handler),field.on("change",this.handler)):void 0},Condition.prototype._determineVisibility=function(){return this._matches()?this.field.element.show():this.field.element.hide()},Condition.prototype._matches=function(){var values;return values=this.elements.map(function(){return $(this).val()}).toArray(),values=values.map(function(v){return"checkbox"!==this.type?v.strip():void 0}),this["_match"+this.type.capitalize()](values)},Condition.prototype._matchCheckbox=function(values){var checked;return checked=values.include("1"),"is"===this.operator?checked:"is not"===this.operator?!checked:void 0},Condition.prototype._matchDate=function(values){var d,date,dates,v,_i,_len;for(date=new Date(Date.parse(this.value)),dates=[],_i=0,_len=values.length;_len>_i;_i++)v=values[_i],d=new Date(Date.parse(v)),"Invalid Date"!==d&&dates.push(d);return"Invalid Date"!==date&&dates.any()?"="===this.operator?!!dates.detect(function(d){return d.valueOf()===date.valueOf()}):"before"===this.operator?!!dates.detect(function(d){return date>d}):"after"===this.operator?!!dates.detect(function(d){return d>=date}):void 0:!1},Condition.prototype._matchMultitext=function(values){return this._matchText(values)},Condition.prototype._matchNumeric=function(values){var included,number,numbers,_number;return _number=function(v){return parseFloat(v.replace(/[^\d.-]/g,""))},number=_number(this.value),numbers=values.map(_number),included=numbers.include(number),"="===this.operator?included:"!="===this.operator?!included:">"===this.operator?!!numbers.detect(function(n){return n>number}):"<"===this.operator?!!numbers.detect(function(n){return number>n}):">="===this.operator?!!numbers.detect(function(n){return n>=number}):"<="===this.operator?!!numbers.detect(function(n){return number>=n}):void 0},Condition.prototype._matchSelect=function(values){var included;return included=values.include(this.value),"is"===this.operator?included:"is not"===this.operator?!included:void 0},Condition.prototype._matchText=function(values){var content,lowercase;return lowercase=values.map(function(v){return v.toLowerCase()}),"="===this.operator?values.include(this.value)||lowercase.include(this.value.toLowerCase()):"is blank"===this.operator?(values=values.uniq(),1===values.length&&values.first().blank()):"contains"===this.operator?(content=lowercase.join(" "),!!content.match(this.value.toLowerCase())):void 0},Condition}(GCObject)}.call(this),function(){CustomFields.Configuration=function(){function Configuration(options){$.extend(this,options),null==this.left&&(this.left=[]),null==this.right&&(this.right=[]),null==this.sections&&(this.sections=[])}return Configuration}()}.call(this),function(){CustomFields.DefaultField=function(){function DefaultField(element){this.element=element,this.name=this.element.find("label").first().text()}return DefaultField.prototype.remove=function(){return this.element.detach()},DefaultField}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};CustomFields.Field=function(_super){function Field(){return this._removeRow=__bind(this._removeRow,this),this._addRow=__bind(this._addRow,this),_ref=Field.__super__.constructor.apply(this,arguments)}return __extends(Field,_super),Field.prototype.initialize=function(form,options){return this.form=form,$.extend(this,options),this.assignElements(),this.observeElements(),null!=this["_prepare_"+this.category]&&this["_prepare_"+this.category](),this.assignValue()},Field.prototype.assignElements=function(){var template;return this.name="cf|"+this.id,this._id="cf_"+this.id,template=this.form.templates[this.category],this.element=$(template.evaluate(this)),this.input=this.element.find("input[type=text],textarea,select").first()},Field.prototype.assignValue=function(){var _this=this;return this.value=this.form.values.detect(function(v){return v.custom_field_id===_this.id}),"multi_textbox"!==this.category?this.value?(this.input.val(this.value.value),this.input.change()):void 0:void 0},Field.prototype.observeElements=function(){return this.trigger("custom-field:added",this),this.condition?this.condition=new CustomFields.Condition(this,this.condition):void 0},Field.prototype._prepare_custom_dropdown=function(){var dropdownOption,o,option,_i,_len,_ref1,_results,_this=this;if(dropdownOption=this.form.dropdownOptions.detect(function(o){return o.dropdown_type===_this.name})){for(_ref1=dropdownOption.custom_options,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)o=_ref1[_i],option=$("<option>").attr("value",o).text(o),_results.push(this.input.append(option));return _results}},Field.prototype._prepare_multi_textbox=function(){var value,values,_i,_len,_results;for(this.multi={container:this.element.find(".multi-textbox-field"),row:this.element.find(".row").remove()},this.assignValue(),values=[],this.value&&(values=this.value.value),$.isArray(values)||(values=[]),values.any()||values.push(""),_results=[],_i=0,_len=values.length;_len>_i;_i++)value=values[_i],_results.push(this._addRow().find("input:text").val(value));return _results},Field.prototype._addRow=function(event){var newRow;return event&&event.stop(),newRow=this.multi.row.clone(),this._observeMultiTextboxRow(newRow),event?$(event.target).closest(".row").after(newRow):this.multi.container.append(newRow),newRow},Field.prototype._observeMultiTextboxRow=function(row){return row.find("a.add").on("click",this._addRow),row.find("a.remove").on("click",this._removeRow)},Field.prototype._removeRow=function(event){return event.stop(),$(event.target).parents(".row").remove(),this.multi.container.find(".row").exists()?void 0:this._addRow()},Field}(GCObject)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};CustomFields.Form=function(_super){function Form(){return _ref=Form.__super__.constructor.apply(this,arguments)}return __extends(Form,_super),Form.prototype.initialize=function(options){return $.extend(this,options),this.assignHelpers(),this.observeElements()},Form.prototype.assignHelpers=function(){var attributes,fields,name,_i,_j,_len,_len1,_ref1,_ref2;for(this.config=new CustomFields.Configuration(this.config),this.sections=[],_ref1=this.config.sections,_i=0,_len=_ref1.length;_len>_i;_i++)name=_ref1[_i],this.sections.push(new CustomFields.Section(this,name));for(fields=[],_ref2=this.fields,_j=0,_len1=_ref2.length;_len1>_j;_j++)attributes=_ref2[_j],fields.push(new CustomFields.Field(this,attributes));return this.fields=fields},Form.prototype.observeElements=function(){return this.trigger("custom-fields:render")},Form}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};CustomFields.Section=function(_super){function Section(){return this._toggle=__bind(this._toggle,this),this._renderFields=__bind(this._renderFields,this),this._addCustomField=__bind(this._addCustomField,this),_ref=Section.__super__.constructor.apply(this,arguments)}return __extends(Section,_super),Section.prototype.initialize=function(form,name){return this.form=form,this.name=name,this.config=this.form.config,this.assignElements(),this.observeElements()},Section.prototype.assignElements=function(){var element,wrapper,_i,_j,_len,_len1,_ref1,_ref2;for(this.element=this.form.element.find("#"+this.name.underscore()),this.leftColumn=this.element.find(".column.left"),this.rightColumn=this.element.find(".column.right"),this.defaultFields=[],_ref1=this.element.find(".field:not(.state)"),_i=0,_len=_ref1.length;_len>_i;_i++)element=_ref1[_i],this.defaultFields.push(new CustomFields.DefaultField($(element)));for(_ref2=this.element.find(".state-field-wrapper"),_j=0,_len1=_ref2.length;_len1>_j;_j++)wrapper=_ref2[_j],this.defaultFields.push(new CustomFields.StateField($(wrapper)));return this.customFields=[]},Section.prototype.observeElements=function(){return this.on("custom-field:added",this._addCustomField),this.on("custom-fields:render",this._renderFields),this.on("custom-fields:toggle-section",this._toggle)},Section.prototype._addCustomField=function(event,field){return field.section===this.name?(event.stop(),this.customFields.push(field),this.element.show()):void 0},Section.prototype._addFields=function(direction){var collection,column,field,fieldNames,name,_i,_len,_results;for(fieldNames=this.config[direction][this.name]||[],column=this[""+direction+"Column"],_results=[],_i=0,_len=fieldNames.length;_len>_i;_i++)name=fieldNames[_i],collection=name.match(/^cf\|/)?this.customFields:this.defaultFields,field=collection.detect(function(f){return f.name===name}),field?_results.push(column.append(field.element)):_results.push(void 0);return _results},Section.prototype._renderFields=function(){var field,_i,_len,_ref1;for(_ref1=this.defaultFields,_i=0,_len=_ref1.length;_len>_i;_i++)field=_ref1[_i],field.remove();return this._addFields("left"),this._addFields("right"),this.element.is(":hidden")&&this.element.find(".field:not(:hidden)").exists()&&this.element.show(),$.uniform()},Section.prototype._toggle=function(){return"Section2"===this.name&&this.form.isConditional?this.element.find(".field:not(:hidden)").exists()?this.element.show():this.element.hide():void 0},Section}(GCObject)}.call(this),function(){CustomFields.StateField=function(){function StateField(wrapper){this.wrapper=wrapper,this.element=this.wrapper,this.name="State"}return StateField.prototype.remove=function(){return this.wrapper.detach()},StateField}()}.call(this),function(){this.Dashboard=function(){function Dashboard(element){new Dashboard.Sidebar(element.find("#sidebar")),new Dashboard.Properties(element.find("#properties")),new Dashboard.TaskManager(element.find(".task-manager")),new Dashboard.Community(element),new Dashboard.QuickStart($("#quick-start")),new Dashboard.Feedback($("#feedback-overlay"))
}return Dashboard}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Dashboard.Community=function(){function Community(element){this.element=element,this._showCommunity=__bind(this._showCommunity,this),this._hideCommunity=__bind(this._hideCommunity,this),this.assignElements(),this.communityContainer.exists()&&(this.observeElements(),this.determineCookieState())}return Community.prototype.assignElements=function(){return this.communityContainer=this.element.find(".community-dashboard"),this.communityContainer.exists()?(this.communityHiddenContainer=this.element.find(".community-dashboard-hidden"),this.hideCommunityTrigger=this.element.find(".hide-community"),this.showCommunityTrigger=this.element.find(".show-community"),new window.Community.List(this.communityContainer)):void 0},Community.prototype.observeElements=function(){return this.hideCommunityTrigger.on("click",this._hideCommunity),this.showCommunityTrigger.on("click",this._showCommunity)},Community.prototype.determineCookieState=function(){return"hidden"===$.cookie("dashboard-community")?this._hideCommunity():this._showCommunity()},Community.prototype._hideCommunity=function(event){return null!=event&&event.stop(),this.communityContainer.hide(),this.communityHiddenContainer.show(),$.cookie("dashboard-community","hidden",{expires:365})},Community.prototype._showCommunity=function(event){return null!=event&&event.stop(),this.communityContainer.show(),this.communityHiddenContainer.hide(),$.removeCookie("dashboard-community")},Community}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Dashboard.Feedback=function(){function Feedback(element){this.element=element,this._removeOverlay=__bind(this._removeOverlay,this),this._postpone=__bind(this._postpone,this),this._installFormObservers=__bind(this._installFormObservers,this),this.element.exists()&&(this.assignElements(),this.observeElements())}return Feedback.prototype.assignElements=function(){return this.overlay=Overlay.cache[this.element.attr("id")],this.form=this.element.find("form"),this.postponeUrl=this.form.data("postpone-url"),this.dismissTrigger=this.element.find("a.hide-forever")},Feedback.prototype.observeElements=function(){return this.overlay.closeTrigger.on("click",this._postpone),this.form.on("submit",this._installFormObservers),this.dismissTrigger.on("ajax:complete",this._removeOverlay)},Feedback.prototype._installFormObservers=function(){return this.form.on("ajax:success",this._removeOverlay)},Feedback.prototype._postpone=function(){return $.ajax({url:this.postponeUrl,data:defaultParams(),type:"post"}).done(this._removeOverlay)},Feedback.prototype._removeOverlay=function(){var id;return this.overlay.hide(),id=this.element.attr("id"),delete Overlay.cache[id],this.element.remove(),$('script:contains("#'+id+'")').remove()},Feedback}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Dashboard.Properties=function(_super){function Properties(){return this._toggleEmpty=__bind(this._toggleEmpty,this),this._showAddedProperties=__bind(this._showAddedProperties,this),this._showMore=__bind(this._showMore,this),this._addProperty=__bind(this._addProperty,this),_ref=Properties.__super__.constructor.apply(this,arguments)}return __extends(Properties,_super),Properties.prototype.initialize=function(element){return this.element=element,this.element.exists()?(this.assignElements(),this.observeElements()):void 0},Properties.prototype.assignElements=function(){return this.element.find(".property-container").each(function(i,e){return new Dashboard.Properties.Property($(e))}),this.showMoreTrigger=this.element.find("a.more"),this.emptyContainer=this.element.find(".empty")},Properties.prototype.observeElements=function(){return this.showMoreTrigger.exists()&&this.showMoreTrigger.on("click",this._showMore),this.on("property:removed",this._toggleEmpty),this.on("properties:added",this._showAddedProperties)},Properties.prototype._addProperty=function(element){return new Dashboard.Properties.Property(element),top.overlay.registerTrigger(element.find("a.open-overlay"))},Properties.prototype._showMore=function(event){var trigger;return event.stop(),trigger=$(event.target),$.ajax({url:trigger.attr("href"),data:{page:trigger.data("page")},method:"get"}).done(this._showProperties(trigger))},Properties.prototype._showAddedProperties=function(event,html){var trigger,_this=this;return trigger=this.showMoreTrigger,trigger.exists()||(trigger=this.emptyContainer),$(html).filter(".property-container").each(function(i,e){return trigger.before(e),_this._addProperty($(e))}),this._toggleEmpty()},Properties.prototype._showProperties=function(trigger){var _this=this;return function(html){var maxPages,newPage,page;return page=trigger.data("page"),maxPages=trigger.data("max-page"),$(html).filter(".property-container").each(function(i,e){return trigger.before(e),_this._addProperty($(e))}),newPage=page+1,newPage>maxPages?trigger.remove():trigger.attr("data-page",newPage),_this._toggleEmpty()}},Properties.prototype._toggleEmpty=function(){return this.element.find(".property-container").exists()?this.emptyContainer.hide():this.emptyContainer.show()},Properties}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Dashboard.Properties.Search=function(){function Search(element,template){this.element=element,this.template=template,this._showLoading=__bind(this._showLoading,this),this._renderSearchResults=__bind(this._renderSearchResults,this),this._propertiesSelected=__bind(this._propertiesSelected,this),this._performSearch=__bind(this._performSearch,this),this._notifyOfWhiteboardProperties=__bind(this._notifyOfWhiteboardProperties,this),this._hideLoading=__bind(this._hideLoading,this),this.assignElements(),this.observeElements()}return Search.prototype.assignElements=function(){return this.searchForm=this.element.find("form.search-form"),this.searchField=this.element.find("input.search"),this.contentContainer=this.element.find(".content"),this.propertiesContainer=this.element.find(".properties-container"),this.actionsContainer=this.element.find(".content-actions"),this.message=Message.create(),this.addForm=this.element.find("form.add-form"),this.addSubmit=this.addForm.find("input[type=submit]"),this.defaultMessage=this.element.find(".default-message"),this.emptyMessage=this.element.find(".empty-message"),this.query="",this.lastQuery=""},Search.prototype.observeElements=function(){var _this=this;return this.searchField.on("keyup",this._performSearch),this.searchForm.on("ajax:send",this._showLoading),this.searchForm.on("ajax:complete",this._hideLoading),this.searchForm.on("ajax:success",this._renderSearchResults),this.addForm.on("ajax:send",function(){return _this.addSubmit.disable()}),this.addForm.on("ajax:complete",function(){return _this.addSubmit.enable()}),this.addForm.on("ajax:success",this._notifyOfWhiteboardProperties)},Search.prototype._hideLoading=function(){return this.contentContainer.removeClass("loading")},Search.prototype._notifyOfWhiteboardProperties=function(event,data){return window.parent.Observations.trigger("properties:added",data),this.searchField.val(""),this.propertiesContainer.html(""),this.actionsContainer.hide(),this.defaultMessage.show(),this.emptyMessage.hide(),top.overlay.refreshHeight(),top.overlay.hide()},Search.prototype._performSearch=function(){var _this=this;return this.query=this.searchField.val().strip(),this.query.blank()||this.query.length<3||this.query===this.lastQuery?void 0:(this.lastQuery=this.query,clearTimeout(this.timeout),this.timeout=setTimeout(function(){return _this.searchForm.submit()},300))},Search.prototype._propertiesSelected=function(){var selected;return selected=this.propertiesContainer.find("input:checkbox:checked"),selected.length?this.actionsContainer.show():this.actionsContainer.hide(),top.overlay.refreshHeight()},Search.prototype._renderSearchResults=function(event,data){var html,property,_i,_len;for(html="",data.length?this.emptyMessage.hide():this.emptyMessage.show(),_i=0,_len=data.length;_len>_i;_i++)property=data[_i],html+=this.template.evaluate(property);return this.propertiesContainer.html(html),this.propertiesContainer.find("input:checkbox").on("click",this._propertiesSelected)},Search.prototype._showLoading=function(){return this.contentContainer.addClass("loading"),this.actionsContainer.hide(),this.defaultMessage.hide(),this.emptyMessage.hide(),top.overlay.refreshHeight()},Search}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Dashboard.Properties.Property=function(_super){function Property(){return this._update=__bind(this._update,this),this._remove=__bind(this._remove,this),this._onRemove=__bind(this._onRemove,this),_ref=Property.__super__.constructor.apply(this,arguments)}return __extends(Property,_super),Property.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Property.prototype.assignElements=function(){return this.message=Message.create(),this.id=this.element.data("id"),this.estimate=this.element.find("dd.estimate"),this.sellBy=this.element.find("dd.sell_by"),this.removeTrigger=this.element.find("a.remove-button")},Property.prototype.observeElements=function(){return this.on("property:published-to-whiteboard",this._update),this.on("property:whiteboard-data-saved",this._remove),this.removeTrigger.on("ajax:success",this._onRemove)},Property.prototype._onRemove=function(event,data){return this._remove(event,data)},Property.prototype._remove=function(event,data){return this.id===parseInt(data.id,10)?(this.element.remove(),this.trigger("property:removed"),this.stopAllObservations(),this.message.flash("Property removed.")):void 0},Property.prototype._update=function(event,data){return this.id===parseInt(data.id,10)?(this.sellBy.text(data.formatted_user_sell_by),this.estimate.text("$"+commaize(data.est_sale_price)),this.message.flash("Property details updated.")):void 0},Property}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Dashboard.QuickStart=function(){function QuickStart(element){this.element=element,this._initializeOverlay=__bind(this._initializeOverlay,this),this.element.exists()&&(this.assignElements(),this.observeElements())}return QuickStart.prototype.assignElements=function(){return this.overlay=Overlay.cache[this.element.attr("id")],this.trigger=this.element.find("a.hide-forever")},QuickStart.prototype.observeElements=function(){return this.overlay&&this.trigger.on("ajax:success",this.overlay.hide),this.interval=setInterval(this._initializeOverlay,50)},QuickStart.prototype._initializeOverlay=function(){var _this=this;return this.overlay?(clearInterval(this.interval),this.overlay.options.onHide=function(){return _this.element.find(".video").remove()}):this.overlay=Overlay.cache[this.element.attr("id")],this.element.find(".video").exists()?void 0:this.overlay.hide()},QuickStart}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Dashboard.Sidebar=function(_super){function Sidebar(){return this._updateTask=__bind(this._updateTask,this),this._undoLastCompletion=__bind(this._undoLastCompletion,this),this._toggleTaskComplete=__bind(this._toggleTaskComplete,this),this._removeTask=__bind(this._removeTask,this),this._editTask=__bind(this._editTask,this),this._displayUndoMessage=__bind(this._displayUndoMessage,this),this._addNewTask=__bind(this._addNewTask,this),_ref=Sidebar.__super__.constructor.apply(this,arguments)}return __extends(Sidebar,_super),Sidebar.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Sidebar.prototype.assignElements=function(){var _this=this;return this.empty=this.element.find(".tasks-empty"),this.empty.exists()?void 0:(this.message=Message.create(),this.completionMessage=this.element.find(".completion-message"),this.undoTrigger=this.completionMessage.find("a"),this.completionURL=this.element.data("task-completion-url"),this.sections=[],this.element.find(".task-container").each(function(i,e){return _this.sections.push(new Dashboard.Sidebar.Section($(e),_this))}))},Sidebar.prototype.observeElements=function(){var _this=this;return this.on("task:template:provided",function(event,template){return _this.taskTemplate=template}),this.on("task:created",this._addNewTask),this.on("task:deleted",this._removeTask),this.on("task:updated",this._updateTask),this.empty.exists()?void 0:(this.element.on("click",".task",this._editTask),this.element.on("click",".task input:checkbox",this._toggleTaskComplete),this.undoTrigger.on("click",this._undoLastCompletion))},Sidebar.prototype.updateTask=function(data){return this._updateTask(null,data)},Sidebar.prototype._addNewTask=function(event,data){return this.empty.exists()?pjax.reload():(data.type=Dashboard.Sidebar._determineSectionName(data),this.trigger("task:"+data.type+":added",{data:data,template:this.taskTemplate}),this.message.flash("Task added."))},Sidebar.prototype._displayUndoMessage=function(task){return this.lastTask=task,this.completionMessage.show()},Sidebar.prototype._editTask=function(event){var target,task;return target=$(event.target),target.is("input:checkbox")?void 0:(event.stop(),task=target.closest(".task"),top.overlay.open(task.data("edit-url")))},Sidebar.prototype._removeTask=function(event,task){return this.element.find(".task[data-id="+task.id+"]").remove()},Sidebar.prototype._toggleTaskComplete=function(event){var element,id,type,_this=this;return element=$(event.target).closest(".task"),id=element.data("id"),type=element.data("type"),$.ajax({url:this.completionURL.evaluate({id:id}),data:defaultParams(),type:"post"}).done(function(data){var checked;return checked="complete"===data.status,element.find("input:checkbox").check(checked),checked?(element.hide(),_this._displayUndoMessage({id:id}),_this.trigger("task:"+type+":complete")):(element.show(),_this.completionMessage.hide(),_this.trigger("task:"+type+":incomplete")),_this.trigger("task:complete-toggled")})},Sidebar.prototype._undoLastCompletion=function(event){var element;return event.stop(),element=this.element.find(".task[data-id="+this.lastTask.id+"]"),this._toggleTaskComplete({target:element}),this.lastTask=null},Sidebar.prototype._updateTask=function(event,data){var container,date,due,element,name,newSection,oldName,oldSection,today;return element=this.element.find(".task[data-id="+data.id+"]"),element.find("h3").text(data.title),element.find(".body").text(data.description),date=new Date(Date.parse(data.due_date)),today=new Date,due={element:element.find(".due-date"),date:element.find(".due-date .date .value"),time:element.find(".due-date .time")},due.date.text(data.formatted_due_date),data.all_day?due.time.hide():due.time.show().find(".value").text(data.formatted_due_time),today>=date?element.addClass("is-overdue"):element.removeClass("is-overdue"),container=element.closest(".task-container"),oldName=container.data("name"),name=Dashboard.Sidebar._determineSectionName(data),oldName!==name?(oldSection=this.sections.detect(function(s){return s.name===oldName}),newSection=this.sections.detect(function(s){return s.name===name}),oldSection.removeExistingTask(element),newSection.addExistingTask(element)):void 0},Sidebar}(GCObject),Dashboard.Sidebar._determineSectionName=function(data){var d,date,m,multiplier,name,nextMonth,nextWeek,now,tomorrow,y;return date=new Date(Date.parse(data.due_date)),now=new Date,multiplier=864e5,m=now.getMonth()+1,d=now.getDate()+1,y=now.getFullYear(),tomorrow=new Date(Date.parse([m,d,y].join("/"))),nextWeek=new Date(tomorrow.getTime()+7*multiplier),nextMonth=new Date(tomorrow.getTime()+30*multiplier),name=null,date>tomorrow&&nextMonth>date&&(name="upcoming_month"),date>=tomorrow&&nextWeek>date&&(name="upcoming_week"),tomorrow>date&&!data.user_id&&(name="not_mine"),tomorrow>date&&data.user_id===window.currentUserId&&(name="mine"),name}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Dashboard.Sidebar.Section=function(_super){function Section(){return this._showMore=__bind(this._showMore,this),this._addTask=__bind(this._addTask,this),_ref=Section.__super__.constructor.apply(this,arguments)}return __extends(Section,_super),Section.prototype.initialize=function(element,sidebar){return this.element=element,this.sidebar=sidebar,this.assignElements(),this.observeElements()},Section.prototype.assignElements=function(){return this.name=this.element.data("name"),this.showMoreTrigger=this.element.find("a.more")},Section.prototype.observeElements=function(){return this.showMoreTrigger.on("click",this._showMore),this.on("task:"+this.name+":added",this._addTask),this._hideShowMoreTrigger()},Section.prototype.addExistingTask=function(element){return this.element.show().find("h2").after(element)},Section.prototype.removeExistingTask=function(element){return element.detach(),this.element.find(".task").exists()?void 0:this.showMoreTrigger.is(":visible")?this._showMore({stop:$.noop()}):this.element.hide()},Section.prototype._addTask=function(event,info){var data,element,html;return data=info.data,html=info.template.evaluate(data),element=$(html),this.element.show().find("h2").after(element),this.sidebar.updateTask(data)},Section.prototype._hideShowMoreTrigger=function(){return this.showMoreTrigger.data("page")>=this.showMoreTrigger.data("max-pages")?this.showMoreTrigger.hide():void 0},Section.prototype._showMore=function(event){var page,_this=this;return event.stop(),page=this.showMoreTrigger.data("page"),this.showMoreTrigger.data("page",page+1),$.ajax({url:this.showMoreTrigger.attr("href"),data:{page:page+1},type:"get",dataType:"html"}).done(function(html){var e,element,parent,_i,_len,_ref1,_results;for(_this._hideShowMoreTrigger(),parent=$("<div>"),parent.append(html),_ref1=parent.find(".task"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],element=$(e),_this.element.find(".task[data-id="+element.data("id")+"]").exists()?_results.push(void 0):_results.push(_this.showMoreTrigger.before(element));return _results})},Section}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Dashboard.TaskManager=function(_super){function TaskManager(){return this._showTasks=__bind(this._showTasks,this),this._showMore=__bind(this._showMore,this),this._reorder=__bind(this._reorder,this),this._refresh=__bind(this._refresh,this),_ref=TaskManager.__super__.constructor.apply(this,arguments)}return __extends(TaskManager,_super),TaskManager.prototype.initialize=function(element){return this.element=element,this.element.exists()?(this.filters=new Dashboard.TaskManager.Filters(this),this.element.on("click","a.more",this._showMore),this.element.on("click","thead th",this._reorder),this.on("task:created task:updated task:deleted task:complete-toggled",this._refresh)):void 0},TaskManager.prototype.applyFilters=function(){return this._applyFilters()},TaskManager.prototype.moreTrigger=function(){return this.element.find("a.more")},TaskManager.prototype.sort=function(){var header,order,sort;return header=this.element.find("table thead th").filter(".asc,.desc"),sort=header.data("sort"),order=header.hasClass("asc")?"asc":"desc",""+sort+"."+order},TaskManager.prototype._applyFilters=function(){return $.ajax({url:this.filters.url,data:this._data({page:1}),message:"Loading",method:"get"}).done(this.filters.update)},TaskManager.prototype._data=function(updates){var data;return null==updates&&(updates={}),data=this.filters.form.serializeObject(),data.sort=this.sort(),data.page=this.moreTrigger().data("page"),$.extend(data,updates)},TaskManager.prototype._refresh=function(callback){var data,page,perPage,_this=this;return perPage=this.moreTrigger().data("per-page"),page=this.moreTrigger().data("page"),data=this._data({per_page:perPage*(page-1),page:1}),$.ajax({url:this.moreTrigger().attr("href"),data:data,message:"test"===environment?"Loading":"no-message",method:"get"}).done(function(html){return _this.element.find("table tbody").html(html),null!=callback&&$.isFunction(callback)?callback():void 0})},TaskManager.prototype._reorder=function(event){var header,_this=this;return header=$(event.currentTarget),header.filter(".asc,.desc").exists()?header.toggleClass("asc desc"):(this.element.find("table thead th").removeClass("asc desc"),header.addClass("asc")),this._refresh(function(){return _this._resetSort()})},TaskManager.prototype._resetSort=function(){return this.moreTrigger().attr("data-page",2).show()},TaskManager.prototype._showMore=function(event){return event.stop(),$.ajax({url:this.moreTrigger().attr("href"),data:this._data(),method:"get"}).done(this._showTasks)},TaskManager.prototype._showTasks=function(html){var maxPages,newPage,page;return page=this.moreTrigger().data("page"),maxPages=this.moreTrigger().data("max-page"),this.element.find("table tbody").append(html),newPage=page+1,this.moreTrigger().attr("data-page",newPage),this.moreTrigger().data("page",newPage),newPage>maxPages?this.moreTrigger().hide():void 0},TaskManager}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Dashboard.TaskManager.Filters=function(){function Filters(manager){this.manager=manager,this._showFilterWindow=__bind(this._showFilterWindow,this),this._searchUsers=__bind(this._searchUsers,this),this._searchRecords=__bind(this._searchRecords,this),this._removeFilter=__bind(this._removeFilter,this),this._hideFilterWindow=__bind(this._hideFilterWindow,this),this._applyFilter=__bind(this._applyFilter,this),this.update=__bind(this.update,this),this.assignElements(),this.observeElements()}return Filters.prototype.assignElements=function(){var container;return this.element=this.manager.element,this.filters=this.element.find(".task-manager__filter"),this.filterWindows=this.element.find(".task-manager__filter-anchor"),this.dueDateInput=this.element.find(".task-manager__due-date"),container=this.element.find(".task-manager__filters-tags"),this.filterTags={container:container,template:container.find(".template").remove().html(),form:container.find("form")},this.form=this.filterTags.form,this.url=this.filterTags.form.attr("action")},Filters.prototype.observeElements=function(){return this.filters.on("click",this._showFilterWindow),$(document).on("click",this._hideFilterWindow),this.dueDateInput.daterangepicker(this._datePickerOptions()),this.filterWindows.on("change","input:checkbox",this._applyFilter),this.filterWindows.on("change","input#date_range",this._applyFilter),this.filterWindows.on("input","input#filter_records",this._searchRecords),this.filterWindows.on("input","input#filter_users",this._searchUsers),this.filterWindows.on("change","input:radio[name=status]",this._applyFilter),this.filterTags.form.on("submit",function(e){return e.stop()}),this.filterTags.container.on("click",".task-manager__filter-tag .icon",this._removeFilter)},Filters.prototype.update=function(html){return this.element.find(".task-manager__table-container").html(html)},Filters.prototype._applyFilter=function(event){var filter,filterWindow,input;return filterWindow=$(event.delegateTarget),filter=filterWindow.data("filter"),input=$(event.target),this["_apply"+filter.camelCase().capitalize()+"Filter"](input)},Filters.prototype._applyAssignedToFilter=function(input){var hiddenInput,tag;return(tag=this._createOrRemoveTag(input))?(hiddenInput=$('<input type="hidden" name="task_manager[users][]">'),hiddenInput.val(input.attr("value")),tag.append(hiddenInput),this.filterTags.form.append(tag),this._submitFilters()):void 0},Filters.prototype._applyDueDateFilter=function(input){var hiddenInput,tag;return this.filterTags.form.find("[data-id='"+input.attr("id")+"']").remove(),tag=this._tagFromTemplate(input,input.val()),hiddenInput=$('<input type="hidden" name="task_manager[date_range]">'),hiddenInput.val(input.val()),tag.append(hiddenInput),this.filterTags.form.append(tag),this._submitFilters()},Filters.prototype._applyRecordFilter=function(input){var hiddenInput,tag;return(tag=this._createOrRemoveTag(input))?(hiddenInput=$('<input type="hidden" name="task_manager[records][]">'),hiddenInput.val(input.attr("value")),tag.append(hiddenInput),this.filterTags.form.append(tag),this._submitFilters()):void 0},Filters.prototype._applyStatusFilter=function(input){var dateFilter,hiddenInput,status,text;return this.filterTags.form.find('input[name="task_manager[status]"]').remove(),status=input.val(),hiddenInput=$('<input type="hidden" name="task_manager[status]">'),hiddenInput.val(status),this.filterTags.form.append(hiddenInput),dateFilter=this.filters.filter('[data-filter="due_date"]'),text={incomplete:"Filter by Due Date",complete:"Filter by Completion Date",all:"Filter by Date"}[status],dateFilter.find(".tooltip span").text(text),this._submitFilters()},Filters.prototype._createOrRemoveTag=function(input){var label,tag;return label=input.closest(".task-manager__filter-item").find("label").text(),input.is(":checked")?this._tagFromTemplate(input,label):(tag=this.filterTags.form.find("[data-id='"+input.attr("id")+"']"),this._removeFilter({target:tag}),null)},Filters.prototype._datePickerOptions=function(){return{parentEl:this.filterWindows.filter('[data-filter="due_date"]')}},Filters.prototype._hideFilterWindow=function(event){var target;return this.filterWindows.inDOM()?(target=$(event.target),target.closest(".task-manager__filter").exists()||target.closest(".task-manager__filter-anchor").exists()||target.closest("table.table-condensed").exists()?void 0:this.filterWindows.hide()):$(document).off("click",this._hideFilterWindow)},Filters.prototype._highlightFilters=function(){var e,filter,_i,_len,_ref,_results;for(_ref=this.filters,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],filter=$(e),this.filterTags.form.find(".task-manager__filter-tag[data-filter='"+filter.data("filter")+"']").exists()?_results.push(filter.addClass("is-active")):_results.push(filter.removeClass("is-active"));return _results},Filters.prototype._removeFilter=function(event){var input,tag;return tag=$(event.target).closest(".task-manager__filter-tag"),tag.remove(),input=this.element.find("input#"+tag.data("id")),input.is(":checkbox")&&input.check(!1),input.is(":text")&&input.val(""),this._submitFilters()},Filters.prototype._searchRecords=function(event){var delay,input,list,value,window;return input=$(event.target),window=input.closest(".task-manager__filter-anchor"),list=window.find(".task-manager__filter-items"),value=input.val(),value.length<=2?list.html(""):(delay="test"===environment?0:500,clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){return $.ajax({url:window.data("url"),type:"get",data:{term:value}}).done(function(html){return list.html(html)})},delay))},Filters.prototype._searchUsers=function(event){var e,input,pattern,user,users,value,_i,_len,_results;if(input=$(event.target),value=input.val(),pattern=new RegExp(value,"i"),users=this.filterWindows.filter('[data-filter="assigned_to"]').find(".task-manager__filter-item"),value.blank())return users.show();for(_results=[],_i=0,_len=users.length;_len>_i;_i++)e=users[_i],user=$(e),user.text().match(pattern)?_results.push(user.show()):_results.push(user.hide());return _results},Filters.prototype._showFilterWindow=function(event){var filter,target;return target=$(event.currentTarget),filter=target.data("filter"),this.filterWindows.hide(),this.filterWindows.filter("[data-filter="+filter+"]").show(),"due_date"===filter?this.dueDateInput.focus():void 0},Filters.prototype._submitFilters=function(){return this.filterTags.form.find(".task-manager__filter-tag").exists()?this.filterTags.container.show():this.filterTags.container.hide(),this.manager.applyFilters(),this._highlightFilters()},Filters.prototype._tagFromTemplate=function(input,label){return $(this.filterTags.template.evaluate({id:input.attr("id"),filter:input.closest(".task-manager__filter-anchor").data("filter"),label:label}))},Filters}()}.call(this),function(){this.DirectMail={Campaign:{Wizard:{}}}}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};DirectMail.Campaign.Wizard.FourthStep=function(_super){function FourthStep(){return _ref=FourthStep.__super__.constructor.apply(this,arguments)}return __extends(FourthStep,_super),FourthStep.id=0,FourthStep.nextId=function(){return this.id++,this.id},FourthStep.prototype.initialize=function(options){return $.extend(this,options),this.element=$("#shell").find("div[role=main]"),new DirectMail.Campaign.Wizard.FourthStep.Order({element:this.element.find("section.order"),priceTiers:this.priceTiers,discount:this.discount})},FourthStep}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};DirectMail.Campaign.Wizard.FourthStep.List=function(_super){function List(){return this._updateTotal=__bind(this._updateTotal,this),_ref=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements(),this.input.trigger("quantity:query")},List.prototype.assignElements=function(){return this.price=this.element.data("price"),this.input=this.element.find("input:text"),this.subtotal=this.element.find(".subtotal"),this.id=DirectMail.Campaign.Wizard.FourthStep.nextId()},List.prototype.observeElements=function(){return new DirectMail.Campaign.Wizard.FourthStep.QuantityManager(this.input),this.input.on("quantity:changed",this._updateTotal)},List.prototype._updateTotal=function(event,data){var quantity,total,updates,value;return quantity=data.quantity,total=this.price*quantity,value=numberToCurrency(total),this.subtotal.text(value),updates={},updates[this.id]=total,this.trigger("order:recalculate",updates)},List}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};DirectMail.Campaign.Wizard.FourthStep.Order=function(_super){function Order(){return this._recalculate=__bind(this._recalculate,this),_ref=Order.__super__.constructor.apply(this,arguments)}return __extends(Order,_super),Order.prototype.initialize=function(options){return $.extend(this,options),this.assignElements()},Order.prototype.assignElements=function(){var e,_i,_j,_len,_len1,_ref1,_ref2,_results;
for(this.discounts=this.element.find("#discounts .value"),this.total=this.element.find("#grand-total .value"),this.subtotals={},this.on("order:recalculate",this._recalculate),_ref1=this.element.find(".premium-list"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],new DirectMail.Campaign.Wizard.FourthStep.List($(e));for(_ref2=this.element.find(".premium-template"),_results=[],_j=0,_len1=_ref2.length;_len1>_j;_j++)e=_ref2[_j],_results.push(new DirectMail.Campaign.Wizard.FourthStep.Template($(e),this.priceTiers));return _results},Order.prototype._recalculate=function(event,data){var discounts,id,subtotal,total,value,_ref1;$.extend(this.subtotals,data),subtotal=0,_ref1=this.subtotals;for(id in _ref1)value=_ref1[id],subtotal+=value;return discounts=subtotal*this.discount,total=subtotal-discounts,this.discounts.text("-"+numberToCurrency(discounts)),this.total.text(numberToCurrency(total))},Order}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};DirectMail.Campaign.Wizard.FourthStep.QuantityManager=function(){function QuantityManager(element,minimum){var placeholder;this.element=element,this._provideQuantity=__bind(this._provideQuantity,this),this._notify=__bind(this._notify,this),this._keyup=__bind(this._keyup,this),this._keydown=__bind(this._keydown,this),placeholder="Minimum of "+minimum,minimum||(placeholder=minimum=0),this.minimum=minimum,this.element.attr("placeholder",placeholder),this.element.on("keydown",this._keydown),this.element.on("quantity:query",this._provideQuantity)}return QuantityManager.prototype.val=function(newValue){var value;return"undefined"==typeof newValue?(value=this.element.val(),value=value.blank()?this.minimum:parseInt(value,10),value<this.minimum&&(value=this.minimum),value):this.element.val(newValue)},QuantityManager.prototype._keydown=function(event){var currentValue,increment,keyCode;if(keyCode=event.keyCode,currentValue=this.val(),!(event.metaKey||event.ctrlKey||[9,37,39].include(keyCode))){if([38,40].include(keyCode)){if(event.stop(),increment=1,40===keyCode){if(currentValue<=this.minimum)return;increment=-1}return currentValue+=increment,this.val(currentValue),this._provideQuantity(),void 0}return[8,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105].include(keyCode)?(clearTimeout(this.timeout),this.element.on("keyup",this._keyup)):event.stop()}},QuantityManager.prototype._keyup=function(){var setMinimum,value;return value=this.val(),setMinimum=!1,value<this.minimum&&(setMinimum=!0),setMinimum?this.timeout=setTimeout(this._notify,500):this._notify()},QuantityManager.prototype._notify=function(){return this._provideQuantity(),this.element.off("keyup",this._keyup)},QuantityManager.prototype._provideQuantity=function(){return this.element.trigger("quantity:changed",{quantity:this.val()})},QuantityManager}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};DirectMail.Campaign.Wizard.FourthStep.Template=function(_super){function Template(){return this._updateTotal=__bind(this._updateTotal,this),_ref=Template.__super__.constructor.apply(this,arguments)}return __extends(Template,_super),Template.prototype.initialize=function(element,priceTiers){return this.element=element,this.priceTiers=priceTiers,this.assignElements(),this.observeElements(),this.input.trigger("quantity:query")},Template.prototype.assignElements=function(){return this.pricing=this.element.data("pricing"),this.price=this.element.find(".price"),this.input=this.element.find("input:text"),this.subtotal=this.element.find(".subtotal"),this.id=DirectMail.Campaign.Wizard.FourthStep.nextId()},Template.prototype.observeElements=function(){return new DirectMail.Campaign.Wizard.FourthStep.QuantityManager(this.input,250),this.input.on("quantity:changed",this._updateTotal)},Template.prototype._price=function(quantity){return this.pricing[this._priceTier(quantity)]},Template.prototype._priceTier=function(quantity){var currentTier,data,limit,threshold,tier,_ref1;if(0===quantity)return 0;currentTier=null,_ref1=this.priceTiers;for(tier in _ref1)data=_ref1[tier],threshold=data[0],limit=data[1],quantity>=threshold&&(!limit||limit>=quantity)&&(currentTier=tier);return currentTier},Template.prototype._updateTotal=function(event,data){var price,quantity,total,updates;return quantity=data.quantity,price=this._price(quantity),total=price*quantity,this.price.text(numberToCurrency(price)),this.subtotal.text(numberToCurrency(total)),updates={},updates[this.id]=total,this.trigger("order:recalculate",updates)},Template}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};DirectMail.Campaign.Wizard.MailingLists=function(_super){function MailingLists(){return this._toggleListContainers=__bind(this._toggleListContainers,this),this._submit=__bind(this._submit,this),this._changeRecipientCount=__bind(this._changeRecipientCount,this),this._addList=__bind(this._addList,this),_ref=MailingLists.__super__.constructor.apply(this,arguments)}return __extends(MailingLists,_super),MailingLists.prototype.initialize=function(isPremium,countySelectTemplate){return this.isPremium=isPremium,this.countySelectTemplate=countySelectTemplate,this.assignElements(),this.isPremium&&this.preparePremiumCampaign(),this.observeElements()},MailingLists.prototype.assignElements=function(){return this.element=$("#shell").find("div[role=main]"),this.recipientsContainer=this.element.find(".recipients-selected"),this.table=this.element.find(".recipients table"),this.userListContainer=this.element.find(".user-lists")},MailingLists.prototype.observeElements=function(){return this.table.on("click","input:checkbox",this._changeRecipientCount),this.on("list-uploaded",this._addList)},MailingLists.prototype.preparePremiumCampaign=function(){return this.premiumListContainer=this.element.find(".premium-lists"),this.triggers=this.element.find("ul.tabs a"),this.form=this.element.find("form"),this.triggers.on("click",this._toggleListContainers),this.form.on("submit",this._submit),this._assignCountyElements()},MailingLists.prototype._addList=function(event,data){return this.table.find("tbody").prepend(data.html)},MailingLists.prototype._assignCountyElements=function(){var countiesByState,e,_i,_len,_ref1,_results;for(countiesByState=this.element.find("select#counties_by_state"),_ref1=this.element.find("tr.county"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],_results.push(new DirectMail.Campaign.Wizard.MailingLists.CountySelect({element:$(e),dataSelect:countiesByState}));return _results},MailingLists.prototype._changeRecipientCount=function(){var count,e,row,_i,_len,_ref1;for(count=0,_ref1=this.table.find("input:checkbox:checked"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],row=$(e).closest("tr"),count+=parseInt(row.find(".count label").text(),10);return this.recipientsContainer.text(count>0?""+count+" Recipients Selected":"No Recipients Selected")},MailingLists.prototype._submit=function(){var container,_i,_len,_ref1,_results;for(_ref1=[this.premiumListContainer,this.userListContainer],_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)container=_ref1[_i],container.is(":hidden")?_results.push(container.find("input:radio").check(!1)):_results.push(void 0);return _results},MailingLists.prototype._toggleListContainers=function(event){var listType,trigger;return event.stop(),trigger=$(event.target),listType=trigger.data("list"),"premium"===listType?(this.userListContainer.hide(),this.premiumListContainer.show()):(this.userListContainer.show(),this.premiumListContainer.hide()),this.triggers.removeClass("active"),trigger.addClass("active")},MailingLists}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};DirectMail.Campaign.Wizard.MailingLists.CountySelect=function(){function CountySelect(options){this._changeCountySelect=__bind(this._changeCountySelect,this),$.extend(this,options),delete options.element,this.assignElements(),this.observeElements(),options.state&&(this.stateSelect.val(options.state).change(),this._changeCounties(options.state),delete options.state),this.options=options}return CountySelect.prototype.assignElements=function(){return this.stateSelect=this.element.find("select.state-select"),this.countySelect=this.element.find("select.county-select")},CountySelect.prototype.observeElements=function(){return this.stateSelect.on("change",this._changeCountySelect)},CountySelect.prototype._changeCounties=function(state){var optgroup;return optgroup=this.dataSelect.find('optgroup[label="'+state+'"]'),this.countySelect.html(optgroup.html()),this.countySelect.change()},CountySelect.prototype._changeCountySelect=function(event){return this._changeCounties($(event.target).val())},CountySelect}()}.call(this),function(){DirectMail.Campaign.Wizard.Matching=function(){function Matching(){this.assignElements(),this.observeElements()}return Matching.prototype.assignElements=function(){var e,_i,_j,_len,_len1,_ref,_ref1,_results;for(this.sources=[],this.destinations=[],_ref=$("#csv-fields .csv-field"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],this.sources.push(new CSVImport.Source($(e)));for(_ref1=$("#destination-fields .destination-field"),_results=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)e=_ref1[_j],_results.push(this.destinations.push(new CSVImport.Destination($(e))));return _results},Matching.prototype.observeElements=function(){var object,_i,_j,_len,_len1,_ref,_ref1,_results;for(_ref=this.sources,_i=0,_len=_ref.length;_len>_i;_i++)object=_ref[_i],object.observeElements();for(_ref1=this.destinations,_results=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)object=_ref1[_j],_results.push(object.observeElements());return _results},Matching}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};DirectMail.Campaign.Wizard.PhoneSelection=function(){function PhoneSelection(){this._showCustom=__bind(this._showCustom,this),this.inputs={select:$(".input.existing select"),custom:$(".input.custom input:text")},this.inputs.select.on("change",this._showCustom)}return PhoneSelection.prototype._showCustom=function(){return"custom_number"===this.inputs.select.val()?(this.inputs.select.disable().closest(".input").hide(),this.inputs.custom.enable().closest(".input").show(),this.inputs.custom.focus()):void 0},PhoneSelection}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};DirectMail.Campaign.Wizard.Templates=function(_super){function Templates(){return this._changeTemplateCount=__bind(this._changeTemplateCount,this),_ref=Templates.__super__.constructor.apply(this,arguments)}return __extends(Templates,_super),Templates.prototype.initialize=function(){var e,element,_i,_len,_ref1;for(this.element=$("#shell").find("div[role=main]"),this.on("templates:change-count",this._changeTemplateCount),this.templates={container:this.element.find(".templates-selected"),count:0},_ref1=this.element.find(".templates > table > tbody > tr"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],element=$(e),element.hasClass("sequence")?new DirectMail.Campaign.Wizard.Templates.Sequence(element):new DirectMail.Campaign.Wizard.Templates.Template(element);return new DirectMail.Campaign.Wizard.Templates.Preview(this.element,$("#template-preview"))},Templates.prototype._changeTemplateCount=function(event,increase){var noun;return increase?this.templates.count++:this.templates.count--,this.templates.count?(noun="Template",1!==this.templates.count&&(noun="Templates"),this.templates.container.text(""+this.templates.count+" "+noun+" Selected")):this.templates.container.text("No Templates Selected")},Templates}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};DirectMail.Campaign.Wizard.Templates.Preview=function(_super){function Preview(){return this._showPrevious=__bind(this._showPrevious,this),this._showNext=__bind(this._showNext,this),this._preview=__bind(this._preview,this),this._handleTrigger=__bind(this._handleTrigger,this),this._contentPreview=__bind(this._contentPreview,this),_ref=Preview.__super__.constructor.apply(this,arguments)}return __extends(Preview,_super),Preview.prototype.initialize=function(container,element){return this.container=container,this.element=element,this.assignElements(),this.observeElements()},Preview.prototype.assignElements=function(){return this.overlay={element:this.element,object:new Overlay(this.element),fileContainer:this.element.find(".file-based"),img:this.element.find("img"),contentContainer:this.element.find(".content-based"),content:this.element.find(".content")}},Preview.prototype.observeElements=function(){var e,_i,_len,_ref1,_results,_this=this;for(this.container.on("click","a.preview",this._preview),this.overlay.img.on("load",function(){return _this.overlay.object.position()}),this.overlay.element.on("click",".next",this._showNext),this.overlay.element.on("click",".previous",this._showPrevious),_ref1=this.container.find("a.preview"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],_results.push(this._handleTrigger($(e)));return _results},Preview.prototype.overlayFormat=function(format){var overlayWindow;return format=format.replace(".",""),overlayWindow=this.overlay.element.find(".overlay-window"),overlayWindow.removeClass(function(i,classes){return(classes.match(/format-[0-9x\.]+/gi)||[]).join(" ")}),overlayWindow.addClass("format-"+format)},Preview.prototype._contentPreview=function(trigger){var content;return this.overlay.fileContainer.hide(),this.overlay.contentContainer.show(),this.overlayFormat(trigger.data("format")),content=$("#"+trigger.data("id")),this.overlay.content.html(content.html()),this.overlay.object.show()},Preview.prototype._filePreview=function(trigger){var paths;return this.overlay.contentContainer.hide(),this.overlay.fileContainer.show(),this.overlayFormat(trigger.data("format")),paths=trigger.data("image-paths"),this.images=paths.split("|"),this._showImage()},Preview.prototype._handleTrigger=function(trigger){var paths;return paths=trigger.data("image-paths"),null!=paths?setTimeout(function(){var image,img,_i,_len,_ref1,_results;for(_ref1=paths.split("|"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)image=_ref1[_i],img=$("<img>").attr({src:image,style:"position:absolute; top:-10000px; left:-10000px;"}),_results.push($("body").append(img));return _results},100):void 0},Preview.prototype._preview=function(event){var target;return event.preventDefault(),target=$(event.target),target.data("image-paths")?this._filePreview(target):this._contentPreview(target)},Preview.prototype._showImage=function(){return this.overlay.img.attr("src",this.images[0]),this.overlay.object.show()},Preview.prototype._showNext=function(){return this.images.push(this.images.shift()),this._showImage()},Preview.prototype._showPrevious=function(){return this.images.unshift(this.images.pop()),this._showImage()},Preview}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};DirectMail.Campaign.Wizard.Templates.Sequence=function(){function Sequence(element){this.element=element,this._updateChecked=__bind(this._updateChecked,this),this._toggleTemplateShow=__bind(this._toggleTemplateShow,this),this._toggleTemplateSelect=__bind(this._toggleTemplateSelect,this),this.assignElements(),this.observeElements()}return Sequence.prototype.assignElements=function(){return this.checkbox=this.element.find("input:checkbox"),this.trigger=this.element.find(".trigger"),this.children=$("tr[data-parent="+this.element.data("sequence")+"]")},Sequence.prototype.observeElements=function(){return this.checkbox.on("click",this._toggleTemplateSelect),this.trigger.on("click",this._toggleTemplateShow),this.children.on("checkbox:checked",this._updateChecked)},Sequence.prototype._toggleTemplateSelect=function(){var checkbox,checked,child,e,_checked,_i,_len,_ref,_results;for(checked=this.checkbox.is(":checked"),this._updateDisplay(checked),_ref=this.children,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],child=$(e),checkbox=child.find("input:checkbox"),_checked=checkbox.is(":checked"),checked&&!_checked||!checked&&_checked?_results.push(checkbox.click()):_results.push(void 0);return _results},Sequence.prototype._toggleTemplateShow=function(){return this.children.toggle(),this.trigger.toggleClass("expanded collapsed")},Sequence.prototype._updateChecked=function(){var unchecked;return unchecked=this.children.find("input:checkbox:not(:checked)").exists(),this.checkbox.check(!unchecked),this._updateDisplay(!unchecked)},Sequence.prototype._updateDisplay=function(checked){return checked?(this.children.show(),this.trigger.addClass("expanded").removeClass("collapsed")):void 0},Sequence}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};DirectMail.Campaign.Wizard.Templates.Template=function(_super){function Template(){return this._toggleDateSelect=__bind(this._toggleDateSelect,this),this._notifyCheckboxClick=__bind(this._notifyCheckboxClick,this),this._factorInCount=__bind(this._factorInCount,this),_ref=Template.__super__.constructor.apply(this,arguments)}return __extends(Template,_super),Template.prototype.initialize=function(element){return this.element=element,this.checkbox=this.element.find("input:checkbox"),this.dateSelect=this.element.find(".send-date"),this.observeElements(),this._factorInCount(),this._toggleDateSelect(),this._notifyCheckboxClick()},Template.prototype.observeElements=function(){return this.checkbox.on("click",this._factorInCount),this.checkbox.on("click",this._notifyCheckboxClick),this.checkbox.on("click",this._toggleDateSelect)},Template.prototype._factorInCount=function(event){return event||!this.checkbox.not(":checked")?this.trigger("templates:change-count",this.checkbox.is(":checked")):void 0},Template.prototype._notifyCheckboxClick=function(){return this.element.trigger("checkbox:checked")},Template.prototype._toggleDateSelect=function(){var method;return method=this.checkbox.is(":checked")?"show":"hide",this.dateSelect[method]()},Template}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};DirectMail.MailingList=function(){function MailingList(loader){this.loader=loader,this._toggleRow=__bind(this._toggleRow,this),this._toggleColumnSelections=__bind(this._toggleColumnSelections,this),this._toggleAll=__bind(this._toggleAll,this),this._stopLoader=__bind(this._stopLoader,this),this._showSettings=__bind(this._showSettings,this),this._search=__bind(this._search,this),this._queueSearch=__bind(this._queueSearch,this),this._performAction=__bind(this._performAction,this),this._loadPage=__bind(this._loadPage,this),this._countSelectedCheckboxes=__bind(this._countSelectedCheckboxes,this),this._captureAction=__bind(this._captureAction,this),this._cancelSettings=__bind(this._cancelSettings,this),this.assignElements(),this.observeElements(),this._populateSearchableText()}return MailingList.prototype.assignElements=function(){return this.element=$(".direct-mail-list"),this.mailingList=this.element.find(".mailing-list"),this.form=this.element.find("form.list-form"),this.actionbar=this.element.find(".checkbox-selection"),this.searchField=this.element.find(".search-field input:text"),this.settings={button:this.element.find(".settings-button"),wrapper:this.element.find(".column-settings"),selectAll:this.element.find(".column-settings .all-columns input:checkbox"),cancel:this.element.find(".column-settings a.cancel-button"),form:this.element.find(".column-settings form")}},MailingList.prototype.observeElements=function(){return this.loader.on("page:loaded",this._loadPage),this.mailingList.on("click","input:checkbox",this._countSelectedCheckboxes),this.mailingList.on("click","tbody td",this._toggleRow),this.mailingList.on("click","thead .col.checkbox",this._toggleAll),this.form.on("click","input[type=submit]",this._captureAction),this.form.on("ajax:success",this._performAction),this.settings.button.on("click",this._showSettings),this.settings.cancel.on("click",this._cancelSettings),this.settings.selectAll.on("click",this._toggleColumnSelections),this.settings.form.on("ajax:success",this._stopLoader),this.searchField.on("keyup",this._queueSearch)},MailingList.prototype._cancelSettings=function(event){return event.stop(),this._hideSettings(),this.settings.form.reset()},MailingList.prototype._captureAction=function(event){var button;return button=$(event.target),this.lastAction=button.attr("value")},MailingList.prototype._countSelectedCheckboxes=function(){var count,selectionText;return count=this.mailingList.find("input:checkbox:visible:checked").length,selectionText="You have "+count+" list item"+(1===count?"":"s")+" selected.",this.actionbar.find(".info").text(selectionText)},MailingList.prototype._hideSettings=function(){return this.mailingList.show(),this.actionbar.show(),this.settings.button.show(),this.settings.wrapper.hide(),this._countSelectedCheckboxes()},MailingList.prototype._loadPage=function(event,html){return this.mailingList.find("tbody").append(html),$.uniform(),this._populateSearchableText()},MailingList.prototype._pauseSelectedRows=function(){return this._selectedRows().addClass("paused")},MailingList.prototype._performAction=function(){return"Pause Selected"===this.lastAction&&this._pauseSelectedRows(),"Unpause Selected"===this.lastAction&&this._unpauseSelectedRows(),"Remove Selected"===this.lastAction&&this._removeSelectedRows(),this.lastAction=null},MailingList.prototype._populateSearchableText=function(){var _this=this;return setTimeout(function(){var e,row,text,_i,_len,_ref,_results;for(_ref=_this.mailingList.find("tbody tr"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],row=$(e),text=row.children(":visible").text().split("\n").reject(function(s){return s.blank()}).join(" "),_results.push(row.attr("data-text",text.toLowerCase()));return _results},0)},MailingList.prototype._queueSearch=function(){return clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(this._search,250)},MailingList.prototype._removeSelectedRows=function(){return this._selectedRows().remove(),this._countSelectedCheckboxes()},MailingList.prototype._search=function(){var query,rows,text,token,tokens,_i,_len,_results;if(rows=this.mailingList.find("tbody tr"),text=this.searchField.val().strip().toLowerCase(),tokens=text.split(" ").reject(function(s){return s.blank()}),rows.show(),!(text.blank()||text.length<3)){for(_results=[],_i=0,_len=tokens.length;_len>_i;_i++)token=tokens[_i],query="[data-text*='"+token+"']",_results.push(rows.filter(":visible:not("+query+")").hide());return _results}},MailingList.prototype._selectedRows=function(){return this.mailingList.find("input:checkbox:visible:checked").closest("tr")},MailingList.prototype._showSettings=function(event){return event.stop(),this.mailingList.hide(),this.actionbar.hide(),this.settings.button.hide(),this.settings.wrapper.show()},MailingList.prototype._stopLoader=function(){return this.loader.stop()},MailingList.prototype._toggleAll=function(){var checkboxes;return checkboxes=this.mailingList.find("input:checkbox:visible"),checkboxes.filter(":not(:checked)").exists()?checkboxes.check(!0):checkboxes.check(!1),this._countSelectedCheckboxes()},MailingList.prototype._toggleColumnSelections=function(){var checkboxes;return checkboxes=this.settings.wrapper.find('input:checkbox[name*="columns[]"]'),checkboxes.check(this.settings.selectAll.is(":checked"))},MailingList.prototype._toggleRow=function(event){var target;return target=$(event.target),target.is(":checkbox")?void 0:target.closest("tr").find("input:checkbox").click()},MailingList.prototype._unpauseSelectedRows=function(){return this._selectedRows().removeClass("paused")},MailingList}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};DirectMail.MailingList.Loader=function(){function Loader(){return this.trigger=__bind(this.trigger,this),this.on=__bind(this.on,this),this.element=$(".loading-mailing-list"),this.element.exists()?(this._loadPages(),void 0):new DirectMail.MailingList(this)}return Loader.prototype.on=function(a,b,c){return this.element.on(a,b,c)},Loader.prototype.trigger=function(a,b){return this.element.trigger(a,b)},Loader.prototype.stop=function(){return this.currentRequest?this.currentRequest.abort():void 0},Loader.prototype._loadPages=function(){return this.currentPage=this.element.data("page"),this.maxPages=this.element.data("max-pages"),this.perPage=this.element.data("per-page"),this.url=this.element.data("url"),this._loadPage(this.currentPage)},Loader.prototype._loadPage=function(page){var _this=this;return this.currentRequest=$.ajax({url:this.url,type:"get",data:{page:page},dataType:"text",message:"Loading "+this.currentPage+"/"+this.maxPages}).done(function(html){return 1===_this.currentPage?(_this.element.replaceWith(html),$.uniform(),new DirectMail.MailingList(_this)):_this.trigger("page:loaded",html),_this.currentPage++,_this.currentPage>_this.maxPages?void 0:_this._loadPage(_this.currentPage)})},Loader}()}.call(this),function(){this.Email={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Email.Autocompleter=function(){function Autocompleter(data,url){var _this=this;this.url=url,this._validEmail=__bind(this._validEmail,this),this._select=__bind(this._select,this),this._ensureCharacters=__bind(this._ensureCharacters,this),$.extend(this,data),this.regex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i,this.field.autocomplete({source:this.url,appendTo:this.autocomplete,minLength:3,delay:500,search:this._ensureCharacters,select:this._select,focus:function(e){return e.stop()},response:function(){return _this.autocomplete.show()},close:function(){return _this.autocomplete.hide()}})}return Autocompleter.prototype._ensureCharacters=function(event){var emails,term;return emails=this.field.val().split(","),term=emails.pop().strip(),term.length>=3?void 0:event.stop()},Autocompleter.prototype._select=function(event,ui){var emails;return event.stop(),emails=this.field.val().split(","),emails.pop(),emails.push(ui.item.value),emails=emails.map(function(e){return e.strip()}),emails=emails.select(this._validEmail),this.field.val(emails.uniq().join(", ")+", "),this.field.focus()},Autocompleter.prototype._validEmail=function(email){return!!email.match(this.regex)},Autocompleter}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Email.Editor=function(_super){function Editor(){return this._showCCBCC=__bind(this._showCCBCC,this),this._showBCC=__bind(this._showBCC,this),this._showCC=__bind(this._showCC,this),this._sendTestEmail=__bind(this._sendTestEmail,this),this._saveDraft=__bind(this._saveDraft,this),this._populateViaTemplate=__bind(this._populateViaTemplate,this),this._submit=__bind(this._submit,this),this._hideTemplates=__bind(this._hideTemplates,this),this._embedPhotos=__bind(this._embedPhotos,this),this._addAttachment=__bind(this._addAttachment,this),_ref=Editor.__super__.constructor.apply(this,arguments)}return __extends(Editor,_super),Editor.prototype.initialize=function(options){return Email.Editor.instance=this,$.extend(this,options),this.assignElements(),this.observeElements()},Editor.prototype.assignElements=function(){return this.overlay=top.overlay,this.subject=this.element.find(".field.subject input"),this.templates={trigger:this.element.find(".templates-trigger"),list:this.element.find(".templates-container"),choices:this.element.find(".templates-container li"),url:this.templateUrl},this.templates.alwaysShow=this.templates.list.hasClass("always-show"),this.autocompleteFields=["to","cc","bcc"],this.to={container:this.element.find(".field.to"),field:this.element.find(".field.to input"),autocomplete:this.element.find(".field.to.autocompletable .autocomplete")},this.cc={container:this.element.find(".field.cc"),field:this.element.find(".field.cc input"),autocomplete:this.element.find(".field.cc.autocompletable .autocomplete"),trigger:this.element.find(".show-cc")},this.bcc={container:this.element.find(".field.bcc"),field:this.element.find(".field.bcc input"),autocomplete:this.element.find(".field.bcc.autocompletable .autocomplete"),trigger:this.element.find(".show-bcc")},this.ccBcc={trigger:this.element.find("#show-cc-bcc"),fields:this.element.find(".cc-bcc-fields")},this.triggerSeparator=this.element.find(".separator"),this.attachments={possibilities:this.element.find(".add-attachments li[data-id]"),container:this.element.find(".attachments"),cache:{}},this._captureExistingAttachments(),this.sendTestEmailTrigger=this.element.find(".send_test_to_me"),this.saveDraftTrigger=this.element.find(".save_as_draft")},Editor.prototype.observeElements=function(){var f,field,_i,_len,_ref1,_this=this;for(this.on("email:embed-photos",this._embedPhotos),_ref1=this.autocompleteFields,_i=0,_len=_ref1.length;_len>_i;_i++)f=_ref1[_i],field=this[f],field.container&&field.container.hasClass("autocompletable")&&new Email.Autocompleter(field,this.autocompleteUrl);return this.templates.choices.on("click",this._populateViaTemplate),this.templates.alwaysShow||(this.templates.trigger.on("click",function(){return _this.templates.list.toggle()}),this.templates.choices.on("click",function(){return _this.templates.list.hide()}),this.on("click",this._hideTemplates)),this.cc.trigger.on("click",this._showCC),this.bcc.trigger.on("click",this._showBCC),this.ccBcc.trigger.on("click",this._showCCBCC),this.attachments.possibilities.on("click",this._addAttachment),this.on("email:attachment-uploading",this._attachmentUploading),this.on("email:attachment-uploaded",this._attachmentUploaded),this.on("email:attachment-error",this._removeAttachmentOnError),this.sendTestEmailTrigger.on("click",this._sendTestEmail),this.saveDraftTrigger.on("click",this._saveDraft),this.element.on("submit",this._submit)},Editor.prototype._addAttachment=function(event){var attachment,element,key;return event.stop(),element=$(event.target),element=element.closest("li"),attachment={id:element.data("id"),type:element.data("type"),size:element.data("size"),name:element.text()},key=this._attachmentCacheKey(attachment),this.attachments.cache[key]?void 0:(this.attachments.cache[key]=attachment,this._renderAttachments())},Editor.prototype._embedPhotos=function(event,data){var counter,editor,element,html,image,images,linebreak,_i,_len;for(images=data.images,editor=xinha_editors.text_editor,html='<div><table cellpadding="0" cellspacing="0" style="border-collapse:collapse;border-color:white;border-spacing:0;"><tbody><tr>',linebreak=4===images.length?2:3,counter=0,_i=0,_len=images.length;_len>_i;_i++)image=images[_i],0===counter||counter%linebreak||(html+="</tr><tr>"),html+='<td style="padding:5px;"><a href="'+image.url+'"><img src="'+image.src+'" /></a></td>',counter++;
return html+="</tr></tbody></table><p></p></div>",element=$(html),element.find("a").on("click",function(e){return e.preventDefault()}),editor.activateEditor(),editor.focusEditor(),$("body").append(element),editor.insertNodeAtSelection(element[0])},Editor.prototype._hideTemplates=function(event){var _this=this;if(!this.templates.list.is(":hidden")&&!this.templates.trigger.is(event.target)&&!$(event.target).parents("ul").is(this.templates.list))return this.templates.list.hide(),this.templates.alwaysShow?setTimeout(function(){return _this.templates.list.css("display","")},500):void 0},Editor.prototype._submit=function(){var message;if(!this.element.data("quiet"))return message=this.savingDraft?"Saving draft":"Sending email",this.element.data("message",message)},Editor.prototype._populateViaTemplate=function(event){var _this=this;return event.stop(),this._hideTemplates({target:"body"}),$.ajax({url:this.templates.url,type:"get",data:{email_template_id:$(event.target).data("value")}}).done(function(data){return _this.subject.val(data.subject),xinha_editors.text_editor.setHTML(data.content)})},Editor.prototype._saveDraft=function(){return this.savingDraft=!0},Editor.prototype._sendTestEmail=function(event){return event.stop(),"undefined"!=typeof xinha_editors&&null!==xinha_editors&&$(xinha_editors.text_editor._textArea).val(xinha_editors.text_editor.getHTML()),$.ajax({url:this.testEmailUrl,type:"post",data:""+this.element.serialize()+"&_method=post",message:"Sending test email"})},Editor.prototype._showCC=function(){return this.cc.trigger.hide(),this.triggerSeparator.hide(),this.cc.container.show(),this.overlay.refreshHeight()},Editor.prototype._showBCC=function(){return this.bcc.trigger.hide(),this.triggerSeparator.hide(),this.bcc.container.show(),this.overlay.refreshHeight()},Editor.prototype._showCCBCC=function(event){return event.stop(),this.ccBcc.fields.toggle(),this.overlay.refreshHeight()},Editor.attachmentClass="Email::Message::File",Editor.instance=null,Editor.onUploadSuccess=function(file,data){return data?Observations.trigger("email:attachment-uploaded",{id:data,file:file,name:file.name,type:Editor.attachmentClass}):void 0},Editor.onUploadStart=function(file){return Observations.trigger("email:attachment-uploading",{file:file,name:file.name})},Editor.onFlashUploadError=function(file){return Observations.trigger("email:attachment-error",{file:file})},Editor.onHTML5UploadError=function(error,file){return Observations.trigger("email:attachment-error",{file:file})},Editor}.call(this,Attachments.Uploading)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Email.Photos=function(){function Photos(element){this.element=element,this._toggleSelection=__bind(this._toggleSelection,this),this._embedPhotos=__bind(this._embedPhotos,this),this._closeOverlay=__bind(this._closeOverlay,this),this.assignElements(),this.observeElements()}return Photos.prototype.assignElements=function(){return this.photos=this.element.find(".photo"),this.embedTrigger=this.element.find(".content-actions a.embed"),this.cancerTrigger=this.element.find(".content-actions a.cancel"),this.overlay=top.overlay},Photos.prototype.observeElements=function(){return this.photos.on("click",this._toggleSelection),this.embedTrigger.on("click",this._embedPhotos),this.cancerTrigger.on("click",this._closeOverlay)},Photos.prototype._closeOverlay=function(event){return event.stop(),setTimeout(this.overlay.hide,0)},Photos.prototype._embedPhotos=function(event){var e,images,photo,selectedPhotos,_i,_len;for(selectedPhotos=this.photos.filter(".selected"),images=[],_i=0,_len=selectedPhotos.length;_len>_i;_i++)e=selectedPhotos[_i],photo=$(e),images.push({url:photo.data("url"),src:photo.data("src")});return top.Observations.trigger("email:embed-photos",{images:images}),this._closeOverlay(event)},Photos.prototype._toggleSelection=function(event){var photo;return photo=$(event.target),photo.hasClass("photo")||(photo=photo.parents(".photo")),photo.toggleClass("selected")},Photos}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.Footer=function(){function Footer(){this._openInOverlay=__bind(this._openInOverlay,this),this.assignElements(),this.observeElements()}return Footer.prototype.assignElements=function(){return this.element=$(".main-footer"),this.links=this.element.find(".main-footer__link"),this.overlayElement=$("#legal-overlay"),this.frame=this.overlayElement.find("iframe"),this.frameClone=this.frame.clone()},Footer.prototype.observeElements=function(){return this.links.on("click",this._openInOverlay)},Footer.prototype._openInOverlay=function(event){var frame;return event.preventDefault(),this.link=$(event.target),frame=this.frameClone.clone(),this.frame.replaceWith(frame),this.frame=frame,this.frame.attr("src",this.link.attr("href")),this.overlay=new Overlay(this.overlayElement),this.overlay.show()},Footer}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.History=function(){function History(options){this._loadMore=__bind(this._loadMore,this),this._applyFilters=__bind(this._applyFilters,this),$.extend(this,options),this.assignElements(),this.observeElements(),this.loadMore()}return History.prototype.assignElements=function(){var _this=this;return this.element=this.container.find(".history-log"),this.loadMoreTrigger=this.element.find("a.load"),this.filterElement=this.container.find(".filters"),this.filters=this.filterElement.find("input:checkbox"),this._determineAppliedFilters(),this.events=this.events.map(function(data){return new History.Event(_this,data)}),this._reset(),this.perPage=10},History.prototype.loadMore=function(){var event,nextEvents,_i,_len;for(nextEvents=this.availableEvents.splice(0,this.perPage),this.visibleEvents.concat(nextEvents),this.loadMoreTrigger.detach().show(),_i=0,_len=nextEvents.length;_len>_i;_i++)event=nextEvents[_i],this.element.append(event.element());return this.availableEvents.any()?this.element.append(this.loadMoreTrigger):void 0},History.prototype.observeElements=function(){return this.loadMoreTrigger.on("click",this._loadMore),this.filters.on("click",this._applyFilters)},History.prototype._applyFilters=function(){return this._determineAppliedFilters(),this._reset(),this.loadMore(),this._toggleActiveStyle()},History.prototype._determineAppliedFilters=function(){var appliedFilters,f,filter,name,values,_i,_len,_ref;for(appliedFilters={name:[],action:[]},_ref=this.filters,_i=0,_len=_ref.length;_len>_i;_i++)f=_ref[_i],filter=$(f),filter.is(":checked")||(name=filter.attr("name"),values=filter.attr("value").split(","),appliedFilters[name]=appliedFilters[name].concat(values));return this.appliedFilters=appliedFilters},History.prototype._loadMore=function(event){return event.stop(),this.loadMore()},History.prototype._reset=function(){var availableEvents,event,_i,_len,_ref;for(this.visibleEvents=[],availableEvents=[],_ref=this.events,_i=0,_len=_ref.length;_len>_i;_i++)event=_ref[_i],event.isApplicable(this.appliedFilters)&&availableEvents.push(event);return this.availableEvents=availableEvents,this.element.html(this.loadMoreTrigger)},History.prototype._toggleActiveStyle=function(){return this.filterElement.find("input:checked").exists()?this.filterElement.addClass("active"):this.filterElement.removeClass("active")},History}()}.call(this),function(){History.Event=function(){function Event(history,attributes){this.history=history,$.extend(this,attributes),this._formatAttributes()}return Event.prototype.element=function(){return null==this._element&&(this._element=this.history.eventTemplate.evaluate(this)),this._element},Event.prototype.isApplicable=function(filters){return filters.name.include(this.name)&&filters.action.include(this.action)},Event.prototype._formatAttributes=function(){return"add"===this.action&&(this.actionForClass="added"),"associate"===this.action&&(this.actionForClass="associated"),["edit","move"].include(this.action)&&(this.actionForClass="edited"),["delete","remove"].include(this.action)?this.actionForClass="deleted":void 0},Event}()}.call(this),function(){this.Leads={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.Login=function(){function Login(url){this.url=url,this._redirect=__bind(this._redirect,this),this._hideAddressBar=__bind(this._hideAddressBar,this),this._checkMobile=__bind(this._checkMobile,this),this.assignElements(),this.assignObservers(),this._checkMobile(),null!=this.url&&pjax.ensureUrl(this.url)}return Login.prototype.assignElements=function(){return this.mobileField=$("#mobile_device"),this.form=$("#login-form")},Login.prototype.assignObservers=function(){return $(window).on("load",this._hideAddressBar),$(window).on("resize",this._checkMobile),this.form.on("ajax:success",this._redirect)},Login.prototype._checkMobile=function(){return this._setMobileVersion(window.isMobile())},Login.prototype._hideAddressBar=function(){return window.scrollTo(0,0)},Login.prototype._redirect=function(event,data){return window.location=data.url},Login.prototype._setMobileVersion=function(value){return this.mobileField.val(value)},Login}()}.call(this),function(){this.Marketing={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Marketing.Counties=function(){function Counties(){this._change=__bind(this._change,this),this.assignElements(),this.observeElements(),this._change()}return Counties.prototype.assignElements=function(){return this.selects={countyTemplate:$("#counties_by_state"),state:$("#search_state"),county:$("#search_county")}},Counties.prototype.observeElements=function(){return this.selects.state.on("change",this._change)},Counties.prototype._change=function(){var allCounties,optgroup,state;return allCounties=this.selects.countyTemplate.clone(),state=this.selects.state.val(),optgroup=allCounties.find('optgroup[label="'+state+'"]'),optgroup.exists()||(optgroup=allCounties.find('optgroup[label="'+state.toLowerCase()+'"]')),this.selects.county.html(""),optgroup.exists()?(this.selects.county.html(optgroup.html()),this.selects.county.prepend(allCounties.find("option")[0]),this.selects.county.val("")):this.selects.county.html(allCounties.find("option").first()),this.selects.county.change()},Counties}()}.call(this),function(){Marketing.Errors=function(){function Errors(container){this.container=container,this.active=!1,this.messages=[]}return Errors.prototype.any=function(){return this.active},Errors.prototype.clear=function(){return this.container.text(""),this.container.hide(),this.active=!1,this.messages=[]},Errors.prototype.displayMessage=function(message){var element;if(!this.messages.include(message))return element=$("<p>"),element.html(message),this.container.append(element),this.container.show(),this.active=!0,this.messages.push(message)},Errors.prototype.displayMessages=function(messages){var element,message,_i,_len;if(1===messages.length)return this.displayMessage(messages[0]);for(element=$("<ul>"),_i=0,_len=messages.length;_len>_i;_i++)message=messages[_i],element.append("<li>"+message+"</li>");return this.container.append(element),this.container.show()},Errors}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Marketing.Form=function(){function Form(search,element){this.search=search,this.element=element,this._toggleForm=__bind(this._toggleForm,this),this._toggleAdvanced=__bind(this._toggleAdvanced,this),this._success=__bind(this._success,this),this._stop=__bind(this._stop,this),this._showForm=__bind(this._showForm,this),this._hideSummary=__bind(this._hideSummary,this),this._hideForm=__bind(this._hideForm,this),this._failure=__bind(this._failure,this),this._execute=__bind(this._execute,this),this.action=this.element.attr("action"),this.processing=!1,this.executionCount=0,this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){return this.summary=$(".marketing__search-summary"),this.actionsContainer=this.element.find(".form-actions"),this.buttons={submit:this.actionsContainer.find("span.button:first-child"),stop:this.actionsContainer.find("span.button:last-child"),hide:this.summary.find(".hide-search"),show:this.summary.find(".show-search")},this.buttons.stop.hide(),this.advanced={element:this.element.find("#advanced-form"),trigger:this.element.find("#advanced-search")},new Marketing.Counties},Form.prototype.observeElements=function(){return this.element.on("submit",this._execute),this.buttons.stop.on("click",this._stop),this.advanced.trigger.on("click",this._toggleAdvanced),this.buttons.show.on("click",this._showForm),this.buttons.hide.on("click",this._hideForm),this.search.on("records-registered:success",this._hideForm),this.search.on("toggle:list-view-toggled",this._toggleForm),this.search.on("toggle:map-view-toggled",this._toggleForm)},Form.prototype.execute=function(){return this._execute({stop:function(){}})},Form.prototype.hideSpinner=function(){return this._hideSpinner()},Form.prototype.showSpinner=function(){return this._showSpinner()},Form.prototype.stop=function(){return this._stop()},Form.prototype._enableStopping=function(){return this.buttons.submit.hide(),this.buttons.stop.show(),this._showSpinner()},Form.prototype._enableSubmission=function(){return this._hideSpinner(),this.buttons.stop.hide(),this.buttons.submit.show()},Form.prototype._execute=function(event){return event?(event.stop(),this._reset()):this.page++,this.executionCount++,this._serializeParam("search[page]",this.page),this.currentRequest=$.ajax({url:this.action,data:this.params,type:"post",message:"Searching"}).done(this._success).fail(this._failure)},Form.prototype._failure=function(xhr,error){var message;return message="Your search could not be completed. Please try again.","abort"!==error&&this.search.errors.displayMessage(message),this._stop()},Form.prototype._hideForm=function(e){return e&&e.preventDefault(),this.summary.length>0&&"list"!==$(".marketing__toggle-view.is-active").data("view")?(this.element.hide(),this.summary.show(),this.buttons.show.show(),this.buttons.hide.hide(),$(".marketing__default").hide()):void 0},Form.prototype._hideSpinner=function(){return this.actionsContainer.removeClass("processing"),this.processing=!1},Form.prototype._hideSummary=function(){return this.summary.hide()},Form.prototype._reset=function(){return this.page=1,this._serialize(),this._enableStopping(),this.search.reset()},Form.prototype._serialize=function(){return this.params=this.element.serializeArray(),this._serializeParam(csrf.param,csrf.token)},Form.prototype._serializeParam=function(name,value){return this.params.push({name:name,value:value})},Form.prototype._showForm=function(e){return e&&e.preventDefault(),this.element.show(),this.buttons.show.hide(),this.buttons.hide.show()},Form.prototype._showSpinner=function(){return this.actionsContainer.addClass("processing"),this.processing=!0},Form.prototype._stop=function(event){return event&&event.stop(),this.currentRequest?(this.currentRequest.abort(),this._enableSubmission(),this.currentRequest=null):void 0},Form.prototype._success=function(data){var reexecute;return reexecute=this.search.registerRecords(data),reexecute?this._execute():void 0},Form.prototype._toggleAdvanced=function(event){return event.stop(),this.advanced.element.toggle(),this.advanced.element.is(":hidden")?this.advanced.trigger.text("Show Advanced"):this.advanced.trigger.text("Hide Advanced"),MapContent.resize()},Form.prototype._toggleForm=function(){if("map"===$(".marketing__toggle-view.is-active").data("view")){if(!($(".rendered-record").length>0))return;return this._hideForm()}return this._showForm(),this._hideSummary()},Form}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Marketing.ImageGallery=function(){function ImageGallery(container){this.container=container,this._showPrevious=__bind(this._showPrevious,this),this._showNext=__bind(this._showNext,this),this._resize=__bind(this._resize,this),this._close=__bind(this._close,this),this.currentIndex=null,this.assignElements(),this.assignImages(),this.observeElements()}return ImageGallery.prototype.assignElements=function(){return this.element=this.container.find(".overlay-wrapper"),this.element.remove(),$("body").append(this.element),this.window=this.element.find(".overlay-window"),this.imageContainer=this.window.find(".overlay-image"),this.closeTrigger=this.window.find(".close-overlay"),this.nextImageTrigger=this.imageContainer.find(".next"),this.previousImageTrigger=this.imageContainer.find(".previous")},ImageGallery.prototype.assignImages=function(){var element,_i,_len,_ref,_results;for(this.images=[],_ref=this.container.find(".gallery li.photo"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)element=_ref[_i],_results.push(this.images.push(new Marketing.ImageGallery.Image(this,$(element))));return _results},ImageGallery.prototype.exclusivelyEnlargeImage=function(image){return this.currentIndex=this.images.indexOf(image),this._resize(),this.imageContainer.find("img").remove(),this.imageContainer.prepend($("<img>").attr("src",image.src)),this.element.show()},ImageGallery.prototype.observeElements=function(){return this.closeTrigger.on("click",this._close),this.nextImageTrigger.on("click",this._showNext),this.previousImageTrigger.on("click",this._showPrevious),$(window).on("resize",this._resize)},ImageGallery.prototype._close=function(event){return event.stop(),this.element.hide()},ImageGallery.prototype._next=function(){var index;return index=this.currentIndex+1,index>=this.images.length&&(index=0),this.images[index]},ImageGallery.prototype._previous=function(){var index;return index=this.currentIndex-1,0>index&&(index=this.images.length-1),this.images[index]},ImageGallery.prototype._resize=function(){var dimensions,image;return(image=this.images[this.currentIndex])?(dimensions=this._adjustedImageDimensions(image),this.window.css({height:""+dimensions.height+"px",width:""+dimensions.width+"px",top:""+dimensions.top+"px"})):void 0},ImageGallery.prototype._showNext=function(event){return event.stop(),this.exclusivelyEnlargeImage(this._next())},ImageGallery.prototype._showPrevious=function(event){return event.stop(),this.exclusivelyEnlargeImage(this._previous())},ImageGallery.prototype._adjustedImageDimensions=function(image){var actual,adjusted,max,oldWidth,windowDimensions;return windowDimensions={height:$(window).height(),width:$(window).width()},max={height:windowDimensions.height-100,width:windowDimensions.width-100},actual={height:image.height,width:image.width},adjusted=$.extend({},actual),actual.height>max.height&&(adjusted.height=max.height,adjusted.width=Math.ceil(max.height/actual.height*actual.width)),adjusted.width>max.width&&(oldWidth=adjusted.width,adjusted.width=max.width,adjusted.height=Math.ceil(max.width/oldWidth*adjusted.height)),adjusted.top=Math.ceil((windowDimensions.height-adjusted.height-30)/2),adjusted},ImageGallery}(),Marketing.ImageGallery.Image=function(){function Image(gallery,element){this.gallery=gallery,this.element=element,this._load=__bind(this._load,this),this._exclusivelyEnlarge=__bind(this._exclusivelyEnlarge,this),this.container=this.element.parents(".gallery"),this.orginalImg=this.element.find("img"),this.src=this.orginalImg.attr("src"),this.orginalImg.on("load",this._load)}return Image.prototype._exclusivelyEnlarge=function(event){return event.stop(),this.gallery.exclusivelyEnlargeImage(this)},Image.prototype._load=function(){var testImg,_this=this;return testImg=$('<img class="test-img">').attr("src",this.src),this.container.append(testImg),testImg.on("load",function(){return _this.width=testImg.width(),_this.height=testImg.height(),testImg.remove()}),this.element.on("click",this._exclusivelyEnlarge)},Image}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Marketing.Pagination=function(_super){function Pagination(){return this._change=__bind(this._change,this),this._anchorClick=__bind(this._anchorClick,this),_ref=Pagination.__super__.constructor.apply(this,arguments)}return __extends(Pagination,_super),Pagination.prototype.initialize=function(renderer,options){return this.renderer=renderer,options=$.extend(this._defaultOptions(),options),$.extend(this,options),this.itemTemplate='<li class="#{itemClass}"><a href="#" class="#{anchorClass}" page="#{pageNumber}">#{label}</a></li>',this.on("pagination:changed",this._change)},Pagination.prototype.render=function(newRecords){var attributes,endingPage,halfway,item,page,shownPages,startingPage,totalPages,_i;if(newRecords&&(this.records=newRecords),this._createElement(),this.list.html(""),totalPages=this._pages(),this.records.any()||this.element.hide(),!(1>=totalPages)){for(attributes={},item=null,shownPages=5,halfway=Math.ceil(shownPages/2),startingPage=1,endingPage=totalPages,totalPages>shownPages&&(endingPage=shownPages),this.currentPage>halfway&&(startingPage=this.currentPage-(halfway-1),endingPage=this.currentPage+(halfway-1)),endingPage>=totalPages&&(endingPage=totalPages),totalPages>shownPages&&this.currentPage>=totalPages-(halfway-1)&&(startingPage=totalPages-(shownPages-1)),attributes={itemClass:1!==this.currentPage?"previous":"previous disabled",pageNumber:this.currentPage-1,label:"Previous"},this.list.append(this._newItem(attributes)),page=_i=startingPage;endingPage>=startingPage?endingPage>=_i:_i>=endingPage;page=endingPage>=startingPage?++_i:--_i)attributes={itemClass:"page-number",pageNumber:page,label:page,anchorClass:"page"},this.currentPage===page&&(attributes.anchorClass+=" active"),this.list.append(this._newItem(attributes));return attributes={itemClass:this.currentPage<totalPages?"next":"next disabled",pageNumber:this.currentPage+1,label:"Next"},this.list.append(this._newItem(attributes)),this._observeAnchors()}},Pagination.prototype._anchorClick=function(event){return event.stop(),this.renderer.search.freeTrial?$("#activate-free-trial").click():this._pageTo(parseInt($(event.target).attr("page"),10))},Pagination.prototype._change=function(event,page){return this.currentPage=page},Pagination.prototype._createElement=function(){return this.element&&this.element.remove(),this.element=$(this.template.evaluate(this._messageAttributes())),this.list=this.element.find("ul"),this.recordsContainer.prepend(this.element)},Pagination.prototype._defaultOptions=function(){return{direction:"up",perPage:this.renderer.search.perPage,currentPage:1}},Pagination.prototype._messageAttributes=function(){var end,start;return end=this.perPage*this.currentPage,start=end-this.perPage+1,end>this.records.length&&(end=this.records.length),{total:this.records.length,start:start,end:end}},Pagination.prototype._newItem=function(attributes){return this.itemTemplate.evaluate(attributes)},Pagination.prototype._observeAnchors=function(){return this.element.find("li a:not(.active)").on("click",this._anchorClick)},Pagination.prototype._pages=function(){return Math.ceil(this.records.length/this.perPage)},Pagination.prototype._pageTo=function(pageNumber){var pages;return pages=this._pages(),1>pageNumber&&(pageNumber=1),pageNumber>pages&&(pageNumber=pages),this.direction=this.currentPage<pageNumber?"up":"down",this.currentPage=pageNumber,this.trigger("pagination:changed",this.currentPage),this.renderer.rerender()},Pagination}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Marketing.Property=function(_super){function Property(){return this._view=__bind(this._view,this),this._showDetailStreetView=__bind(this._showDetailStreetView,this),this._showDetailMap=__bind(this._showDetailMap,this),this._save=__bind(this._save,this),this._runComps=__bind(this._runComps,this),this._positionMapWindow=__bind(this._positionMapWindow,this),this._expansionToggle=__bind(this._expansionToggle,this),this._clearDetails=__bind(this._clearDetails,this),this.showMapInfoWindow=__bind(this.showMapInfoWindow,this),_ref=Property.__super__.constructor.apply(this,arguments)}return __extends(Property,_super),Property.prototype.initialize=function(search,data){return this.search=search,data=data.property||data,this.initializeAttributes(data),this.detailMapCache=null,this.on("toggle:toggled",this._clearDetails)},Property.prototype.assignSavedPropertyIdFromURL=function(url){var match;return match=url.match(/leads\/(\d+)\/edit/)[1],this.saved_property_id=parseInt(match,10)},Property.prototype.googleMap=function(){return this.detailMapCache&&this.detailMapCache.mapObject?this.detailMapCache.mapObject:this.search.googleMap},Property.prototype.initializeAttributes=function(data){var attribute,value;for(attribute in data)value=data[attribute],this[attribute]=value||"";return this._formatAttributes()},Property.prototype.isMappable=function(){return(this.geocoding.latitude+"").blank()?!1:(this.geocoding.longitude+"").blank()?!1:null===this.coordinates()?!1:!0},Property.prototype.mapMarker=function(googleMap){var marker;return marker=Property.__super__.mapMarker.call(this,googleMap),new GoogleMap.MarkerLabel(googleMap.map,marker,this.markerNumber),marker},Property.prototype.registerDetailsObservers=function(element){var anchor,s,section,_i,_len,_ref1;for(this.registerObservers(element),this._registerDetailMappingObservers(element),_ref1=element.find(".expandable"),_i=0,_len=_ref1.length;_len>_i;_i++)s=_ref1[_i],section=$(s),anchor=$('<a class="expandable-toggle" href="#">Hide</a>'),section.append(anchor),anchor.on("click",this._expansionToggle);return new Marketing.ImageGallery(element)},Property.prototype.registerMappingObservers=function(element,renderer){return this.search.viewedRecord?this.search.viewedRecord!==this?element.on("click",this._view):void 0:this.isMappable()?(element.on("click",this.showMapInfoWindow),element.on("click",renderer.exclusivelyActivate)):(element.on("click",this._view),element.addClass("unmappable"))},Property.prototype.registerObservers=function(element){var link_text,links;return links={view:element.find("a.view"),save:element.find("a.save"),streetView:element.find("a.street-view")},links.view.exists()&&links.view.on("click",this._view),links.save.exists()&&(link_text=links.save.data("save-label"),null==link_text&&(link_text=this.saved?"Saved":this._defaultSaveText()),links.save.text(link_text),links.save.on("click",this._save)),links.streetView.exists()?links.streetView.on("click",this.showStreetView):void 0},Property.prototype.showMapInfoWindow=function(event){return this.search.viewedRecord?void 0:(this.googleMap().streetView.setVisible(!1),Property.__super__.showMapInfoWindow.call(this,event))},Property.prototype.valid=function(){return this.streetAddress&&!this.streetAddress.blank()},Property.prototype._clearDetails=function(){return this.detailMapCache=null},Property.prototype._createDetailGoogleMap=function(){return this.detailMapCache.mapObject?!1:(this.detailMapCache.container.show(),this.detailMapCache.mapObject=new GoogleMap.Static({container:this.detailMapCache.container,elementWrapper:this.detailMapCache.elementWrapper,element:this.detailMapCache.element,mapTrigger:this.detailMapCache.mapTrigger,streetViewTrigger:this.detailMapCache.streetViewTrigger,closeMapTrigger:this.detailMapCache.closeMapTrigger,infoWindowText:this._infoWindowHTML(),noMapView:this.detailMapCache.noMapViewContainer,noStreetView:this.detailMapCache.noStreetViewContainer,latitude:this.latitude,longitude:this.longitude,allowResize:!1,zoom:16}),this.detailMapCache.mapObject._positionMap=this._positionMapWindow,!0)},Property.prototype._defaultSaveText=function(){return"Save Lead"},Property.prototype._expansionToggle=function(event){var anchor,options,section;return event.stop(),anchor=$(event.target),section=anchor.parents(".expandable"),options="Hide"===anchor.text()?["Show","hide"]:["Hide","show"],anchor.text(options[0]),section.find("dl, p, ul")[options[1]]()},Property.prototype._formatAttributes=function(){throw"_formatAttributes not implemented"},Property.prototype._infoWindowHTML=function(){var element;return element=$(this.search.infoWindowTemplate.evaluate(this)),this.registerObservers(element),element},Property.prototype._openLeadEditUrl=function(event){var anchor;return anchor=$(event.target),anchor.attr("href","/leads/"+this.saved_property_id+"/edit"),anchor.attr("target","_blank")},Property.prototype._positionMapWindow=function(){var offset;return offset=Math.ceil(($(window).height()-532)/2),this.detailMapCache.mapObject.elementWrapper.css("top",""+offset+"px")},Property.prototype._registerDetailMappingObservers=function(element){return this.detailMapCache={container:element.find(".details-map-container"),elementWrapper:element.find(".map"),element:element.find(".details-map"),mapTrigger:element.find(".map-view-button"),streetViewTrigger:element.find(".street-view-button"),closeMapTrigger:element.find(".close-map"),noMapViewContainer:element.find(".no-map-view"),noStreetViewContainer:element.find(".no-street-view"),mapObject:null},this.detailMapCache.mapTrigger.on("click",this._showDetailMap),this.detailMapCache.streetViewTrigger.on("click",this._showDetailStreetView)},Property.prototype._runComps=function(event){var form,input,target;return event.stop(),target=$(event.target),target.is("a")||(target=target.closest("a")),form=$('<form target="_blank" method="post">'),form.attr("action",target.attr("href")),form.data("message","Loading comps"),form.hide(),input=function(name,value){return $("<input>").attr({type:"hidden",name:name,value:value})},form.append(input(csrf.param,csrf.token)),form.append(input("property[address]",this.streetAddress)),form.append(input("property[city]",this.city)),form.append(input("property[state]",this.state)),form.append(input("property[zip]",this.zip)),form.hide(),pjax.container.append(form),form.submit()},Property.prototype._save=function(event){return this.saved?this._openLeadEditUrl(event):this.search.saveProperty(this,event)},Property.prototype._showDetailMap=function(event){var mapCreated;return mapCreated=this._createDetailGoogleMap(),mapCreated?this.googleMap().toggle(event):void 0},Property.prototype._showDetailStreetView=function(event){var mapCreated;return mapCreated=this._createDetailGoogleMap(),mapCreated?this.googleMap().toggleStreetView(event):void 0},Property.prototype._view=function(event){return event.stop(),this.search.viewProperty(this)},Property}(GoogleMap.Mappable)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Marketing.Renderer=function(_super){function Renderer(search,container,options){var _this=this;this.search=search,this.container=container,this.exclusivelyActivate=__bind(this.exclusivelyActivate,this),$.extend(this,options),this.template=this.recordTemplate||"",this.pagination=new Marketing.Pagination(this,{element:this.container.find(".pagination"),recordsContainer:this.container,records:this.search.records,template:this.search.paginationTemplate}),this.mappable&&!window.hasGoogleMaps&&this.on("google-maps:available",function(){return _this.clear()&&_this.render()})}return __extends(Renderer,_super),Renderer.prototype.clear=function(clearContainer){return null==clearContainer&&(clearContainer=!0),clearContainer&&this.container.html(""),this._createWrapper(),this.container.append(this.wrapper),this},Renderer.prototype.exclusivelyActivate=function(event){var currentlyActive,element;if(this.mappable&&(element=$(event.currentTarget),!element.hasClass("active")))return currentlyActive=this.container.find(".rendered-record.active"),currentlyActive.removeClass("active"),currentlyActive.find("ul").hide(),element.addClass("active"),MapContent.resize()},Renderer.prototype.mapRecords=function(){return this.mappable?this.search.addPropertiesToMap(this.records()):void 0},Renderer.prototype.records=function(){var startIndex;
return startIndex=(this.pagination.currentPage-1)*this.pagination.perPage,this._allRecords().slice(startIndex,startIndex+this.pagination.perPage)},Renderer.prototype.render=function(){return this._updateWrapper(),this.mapRecords(),this.renderPagination()},Renderer.prototype.renderPagination=function(){return this.pagination.render(this._allRecords())},Renderer.prototype.rerender=function(){return this.search.render()},Renderer.prototype._allRecords=function(){return this.search.records},Renderer.prototype._createWrapper=function(){return this.wrapper=$("<"+(this.wrapperTag||"div")+">"),this.wrapper.addClass(this.wrapperClass||"marketing-wrapper")},Renderer.prototype._emptyResult=function(){var element;return element=$("<"+("ul"===this.wrapperTag?"li":"p")+">"),element.addClass("empty-results"),element.html(this.search.emptyResult),element},Renderer.prototype._performElementUpdates=function(){},Renderer.prototype._recordElement=function(record){var element;return element=$(this.template.evaluate(record)),this._registerObservers(record,element),element},Renderer.prototype._registerObservers=function(record,element){return record.registerObservers(element),this.mappable&&window.hasGoogleMaps?record.registerMappingObservers(element,this):void 0},Renderer.prototype._updateWrapper=function(){var element,index,record,records,_i,_len;if(records=this.records(),this.search.form.executionCount>0&&!records.length)return this.wrapper.append(this._emptyResult());for(index=0,_i=0,_len=records.length;_len>_i;_i++)record=records[_i],element=this._recordElement(record),this._performElementUpdates(element,record,index),this.wrapper.append(element),index++;return MapContent.resize()},Renderer}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Marketing.Search=function(_super){function Search(){return this._viewToggled=__bind(this._viewToggled,this),this.__assignGoogleMap=__bind(this.__assignGoogleMap,this),this._assignGoogleMap=__bind(this._assignGoogleMap,this),_ref=Search.__super__.constructor.apply(this,arguments)}return __extends(Search,_super),Search.prototype.initialize=function(options){return this.records=[],this.invalidRecords=[],this.googleMap=null,null==this.perPage&&(this.perPage=100),$.extend(this,options),this.assignElements(),this.assignClasses(),this.assignHelpers()},Search.prototype.addPropertiesToMap=function(propertiesForMap){return this.googleMap?(this.googleMap.reset(),this.googleMap.addProperties(propertiesForMap)):void 0},Search.prototype.assignClasses=function(){return this.classes={form:Marketing.Form,errors:Marketing.Errors,counties:Marketing.Counties,toggle:Marketing.Toggle,renderer:Marketing.Renderer}},Search.prototype.assignElements=function(){return this.container=$("#shell"),this.listView=$(".marketing__list"),this.mapView=$(".marketing__map"),this.sidebarView=$(".marketing__sidebar-content"),this.propertyDetailsView=$(".marketing__details")},Search.prototype.assignHelpers=function(){return this.form=new this.classes.form(this,$("#main_search_form")),this.errors=new this.classes.errors($(".marketing__search-errors")),this.toggle=new this.classes.toggle(this),this.on("toggle:map-view-toggled",this._assignGoogleMap),this.on("toggle:toggled",this._viewToggled),this.sidebarRenderer=new this.classes.renderer(this,this.sidebarView,{recordTemplate:this.sidebarViewTemplate,mappable:!0,wrapperTag:"div",wrapperClass:"marketing__search-results"}),this.listRenderer=new this.classes.renderer(this,this.listView,{recordTemplate:this.listViewTemplate}),this.renderers=[this.sidebarRenderer,this.listRenderer],this.on("records-registered:error",this._registerRecordsError),this.on("records-registered:success",this._registerRecordsSuccess)},Search.prototype.formatDate=function(date){var day,month;return month=""+(date.getUTCMonth()+1),1===month.length&&(month="0"+month),day=""+date.getUTCDate(),1===day.length&&(day="0"+day),""+month+"/"+day+"/"+date.getUTCFullYear()},Search.prototype.registerRecords=function(data){return this._registerRecords(data),data.complete||(1===this.form.page?this._render():this._renderers("renderPagination")),data.complete&&this._handleNoResults(),!data.complete},Search.prototype.render=function(){return this._render()},Search.prototype.reset=function(){return this.invalidRecords=[],this._loading()},Search.prototype._addToRecords=function(record){var id,identifiers,records,uniquedRecords,_i,_len,_ref1;if(records=null!=record.length?record:[record],this.records=this.records.concat(records),this._shouldDeduplicateRecords()){for(identifiers=[],uniquedRecords=[],_ref1=this.records,_i=0,_len=_ref1.length;_len>_i;_i++)record=_ref1[_i],id=this._recordIdentifier(record),identifiers.include(id)||(identifiers.push(id),uniquedRecords.push(record));this.records=uniquedRecords}return this.results=this.records},Search.prototype._assignGoogleMap=function(){return"undefined"!=typeof google&&null!==google&&null!=google.maps&&null!=google.maps.LatLng?this.__assignGoogleMap():this.mapAssignmentInterval=setInterval(this.__assignGoogleMap,10)},Search.prototype.__assignGoogleMap=function(){var element;return"undefined"!=typeof google&&null!==google&&null!=google.maps&&null!=google.maps.LatLng?(clearInterval(this.mapAssignmentInterval),this.mapAssignmentInterval=null,this.googleMap||(element=$(".marketing__map-content"),element.show(),this.googleMap=new GoogleMap.Dynamic({element:element,elementWrapper:".marketing__map",container:".marketing__content",zoom:4,scrollwheel:this._scrollwheelZoom()})),this._renderers("mapRecords")):void 0},Search.prototype._clearRecords=function(){return this.records=[],this._renderers("clear")},Search.prototype._handleNoResults=function(){return this._render(),this.form.stop()},Search.prototype._initializeRecords=function(data){var record,results,values,_i,_len,_ref1;for(results=[],_ref1=data.results,_i=0,_len=_ref1.length;_len>_i;_i++)values=_ref1[_i],record=this._newRecord(values),record.valid()?results.push(record):this.invalidRecords.push(record);return results},Search.prototype._loading=function(){return this._clearRecords(),this.errors.clear(),this.googleMap?this.googleMap.reset():void 0},Search.prototype._newRecord=function(){throw"_newRecord not implemented"},Search.prototype._recordIdentifier=function(){throw"_recordIdentifier not implemented"},Search.prototype._registerRecords=function(data){return this._addToRecords(this._initializeRecords(data)),data.error_messages.any()?(this.errors.displayMessages(data.error_messages),this.trigger("records-registered:error")):this.trigger("records-registered:success")},Search.prototype._registerRecordsError=function(){},Search.prototype._registerRecordsSuccess=function(){},Search.prototype._render=function(){return this.form.executionCount>0?(this._renderers("clear"),this.viewedRecord||this.propertyDetailsView.html(""),this._renderers("render")):void 0},Search.prototype._renderers=function(command){var renderer,_i,_len,_ref1,_results;for(_ref1=this.renderers,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)renderer=_ref1[_i],_results.push(renderer[command]());return _results},Search.prototype._scrollwheelZoom=function(){return!0},Search.prototype._shouldDeduplicateRecords=function(){return!0},Search.prototype._viewToggled=function(){return this.viewedRecord=null,this._render()},Search}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Marketing.SelectionToolbar=function(_super){function SelectionToolbar(){return this._togglePageSelection=__bind(this._togglePageSelection,this),this._toggleAllSelections=__bind(this._toggleAllSelections,this),this._selectRecord=__bind(this._selectRecord,this),this._hideElement=__bind(this._hideElement,this),this._deselectRecord=__bind(this._deselectRecord,this),this._clearSelections=__bind(this._clearSelections,this),this._afterUpgrade=__bind(this._afterUpgrade,this),_ref=SelectionToolbar.__super__.constructor.apply(this,arguments)}return __extends(SelectionToolbar,_super),SelectionToolbar.prototype.initialize=function(renderer,element){return this.renderer=renderer,this.element=element,this.search=this.renderer.search,this.recordName=this.search.recordName.split(" ").last(),this.assignElements(),this.observeElements(),this.renderer.records().any()?this.element.show():void 0},SelectionToolbar.prototype.assignElements=function(){return this.triggers={thisPage:this.element.find(".select-this-page"),allPages:this.element.find(".select-all-pages")},this._addTriggers(),this.messageContainer=this.element.next(".marketing__toolbar-info")},SelectionToolbar.prototype.observeElements=function(){return this.triggers.thisPage.on("click",this._togglePageSelection),this.triggers.allPages.on("click",this._toggleAllSelections),this.on(""+this.namespace+":selected",this._selectRecord),this.on(""+this.namespace+":deselected",this._deselectRecord),this.on("recordsRegistered:error",this._hideElement),this._addTriggerObservers(),this._updateMessage()},SelectionToolbar.prototype.namespace="change-this",SelectionToolbar.prototype._afterUpgrade=function(){return this.search.permitted=!0,this.search.render(),this.off("upgrade:complete",this.afterUpgrade.handler),this[this.afterUpgrade.action](this.afterUpgrade.event),this.afterUpgrade=null},SelectionToolbar.prototype._addTriggers=function(){},SelectionToolbar.prototype._addTriggerObservers=function(){},SelectionToolbar.prototype._clearSelections=function(event){var record,records,_i,_len;for(event.stop(),records=this.search.selectedRecords.dup(),_i=0,_len=records.length;_len>_i;_i++)record=records[_i],this._deselectRecord(null,record);return this._updateMessage(),this.renderer.container.find("input:checkbox:checked").check(!1)},SelectionToolbar.prototype._deselectRecord=function(event,record){var index,records;return records=this.search.selectedRecords,index=records.indexOf(record),-1!==index&&records.splice(index,1),null!=event?this._updateMessage():void 0},SelectionToolbar.prototype._hasSelections=function(){return this.search.selectedRecords.any()},SelectionToolbar.prototype._hideElement=function(){return this.element.hide(),this.messageContainer.hide()},SelectionToolbar.prototype._promptForUpgrade=function(action,event){return this.afterUpgrade={action:action,event:event,handler:this._afterUpgrade},this.on("upgrade:complete",this.afterUpgrade.handler),top.overlay.open(this.search.upgradeUrl)},SelectionToolbar.prototype._recordsForCurrentPage=function(){var element,record,recordId,records,_i,_len,_ref1;for(records=[],_ref1=this.renderer.container.find(".rendered-record"),_i=0,_len=_ref1.length;_len>_i;_i++)element=_ref1[_i],recordId=""+$(element).attr("record_id"),record=this.search.records.detect(function(r){return""+r.id===recordId}),record&&records.push(record);return records},SelectionToolbar.prototype._selectRecord=function(event,record){var index,records;return records=this.search.selectedRecords,index=records.indexOf(record),-1===index&&records.push(record),null!=event?this._updateMessage():void 0},SelectionToolbar.prototype._toggleAllSelections=function(event){var records;return event.stop(),this.search.freeTrial?$("#activate-free-trial").click():(records=this.search.records,this._toggleSelections(records,null,this.search.selectedRecords.length===records.length))},SelectionToolbar.prototype._togglePageSelection=function(event){var checkboxes,records,selectedCheckboxes;return event.stop(),checkboxes=this.renderer.container.find("input:checkbox"),selectedCheckboxes=checkboxes.filter(":checked"),records=this._recordsForCurrentPage(),this._toggleSelections(records,checkboxes,checkboxes.length===selectedCheckboxes.length)},SelectionToolbar.prototype._toggleSelections=function(records,checkboxes,recordsCurrentlySelected){var record,_i,_j,_len,_len1;if(checkboxes||(checkboxes=this.renderer.container.find("input:checkbox")),recordsCurrentlySelected)for(checkboxes.check(!1),_i=0,_len=records.length;_len>_i;_i++)record=records[_i],this._deselectRecord(null,record);else for(checkboxes.check(!0),_j=0,_len1=records.length;_len1>_j;_j++)record=records[_j],this._selectRecord(null,record);return this._updateMessage()},SelectionToolbar.prototype._updateMessage=function(){var container,html,maxCount,object,recordName,selectedCount,_ref1;return selectedCount=this.search.selectedRecords.length,maxCount=this.search.records.length,recordName=this.search.recordName,container=this.messageContainer,0===selectedCount?container.html("").hide():(html="",object={selectedCount:selectedCount,maxCount:maxCount,noun:null!=(_ref1=1===maxCount)?_ref1:{recordName:recordName+"s"}},html=selectedCount===maxCount?'All <span class="overall-count">#{maxCount}</span> #{noun} selected':'<span class="selected-count">#{selectedCount}</span> of <span class="overall-count">#{maxCount}</span> #{noun} selected',html+=' <a href="#" class="clear-selection">&times;</a>',container.show().html(html.evaluate(object)),container.find("a").on("click",this._clearSelections))},SelectionToolbar}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Marketing.Toggle=function(_super){function Toggle(){return this.__gc=__bind(this.__gc,this),this._toggle=__bind(this._toggle,this),this._mapViewToggle=__bind(this._mapViewToggle,this),this._listViewToggle=__bind(this._listViewToggle,this),this.setActiveView=__bind(this.setActiveView,this),_ref=Toggle.__super__.constructor.apply(this,arguments)}return __extends(Toggle,_super),Toggle.prototype.initialize=function(search){return this.search=search,this.body=$(document.body),this.container=this.search.container,this.triggers=this.container.find(".marketing__toggle-view"),this.triggers.on("click",this._toggle),this._removeClasses(),setTimeout(this.setActiveView,0)},Toggle.prototype.setActiveView=function(){var activate;return activate=$(".marketing__toggle").data("activate"),this.triggers.filter("[data-view="+activate+"]").click()},Toggle.prototype.showPropertyDetails=function(){return this.triggers.removeClass("active"),this.search.listView.hide(),this.search.mapView.hide(),this.search.googleMap&&this.search.googleMap.element.hide(),this.search.sidebarView.show(),this.container.removeClass("map-container").addClass("container"),this.body.removeClass("fullscreen-map"),this.search.propertyDetailsView.show()},Toggle.prototype._listViewToggle=function(){return this.search.googleMap&&this.search.googleMap.element.hide(),this.search.sidebarView.hide(),this.search.propertyDetailsView.hide(),this.search.mapView.hide(),this.search.listView.show(),this.container.removeClass("map-container").addClass("container"),this.body.removeClass("fullscreen-map"),MapContent.clear()},Toggle.prototype._mapViewToggle=function(){return this.search.listView.hide(),this.search.propertyDetailsView.hide(),this.search.mapView.show(),this.search.googleMap&&this.search.googleMap.element.show(),this.search.sidebarView.show(),this.container.removeClass("container").addClass("map-container"),this.body.addClass("fullscreen-map"),MapContent.resize()},Toggle.prototype._removeClasses=function(){return this.container.removeClass("map-container"),this.container.attr("class").blank()&&this.container.addClass("container"),this.body.removeClass("fullscreen-map")},Toggle.prototype._toggle=function(event){var anchor,view;return event.stop(),anchor=$(event.currentTarget),this.triggers.removeClass("is-active"),anchor.addClass("is-active"),view=anchor.data("view"),this["_"+view+"ViewToggle"](anchor),this.trigger("toggle:"+view+"-view-toggled"),this.trigger("toggle:toggled")},Toggle.prototype.__gc=function(){return this._removeClasses(),Toggle.__super__.__gc.call(this)},Toggle}(GCObject)}.call(this),function(){this.Attom={}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Attom.Form=function(_super){function Form(){return this._sortChange=__bind(this._sortChange,this),this._show=__bind(this._show,this),this._hideFromMap=__bind(this._hideFromMap,this),this._hide=__bind(this._hide,this),this._forceShow=__bind(this._forceShow,this),this._changeVisibility=__bind(this._changeVisibility,this),_ref=Form.__super__.constructor.apply(this,arguments)}return __extends(Form,_super),Form.prototype.assignElements=function(){return Form.__super__.assignElements.call(this),this.sortSelect=this.advanced.element.find("select.sort-by"),this.isVisible=!1,this.visibilityTriggers={hide:$('<a href="#" class="hide-search-form">Hide Search</a>').hide(),show:$('<a href="#" class="show-search-form">Return to Search</a>').hide()},this.element.append(this.visibilityTriggers.hide),this.element.after(this.visibilityTriggers.show)},Form.prototype.observeElements=function(){return Form.__super__.observeElements.call(this),this.sortSelect.on("change",this._sortChange),this.visibilityTriggers.hide.on("click",this._hide),this.visibilityTriggers.show.on("click",this._show),this.search.on("toggle:list-view-toggled",this._forceShow),this.search.on("toggle:map-view-toggled",this._changeVisibility),this.search.on("records-registered:success",this._hideFromMap)},Form.prototype.sortBy=function(){return this.sortSelect.val()},Form.prototype._changeVisibility=function(){var methods;return methods=["show","hide","removeClass","show"],this.isVisible&&(methods=["hide","show","addClass","hide"]),this.visibilityTriggers.hide[methods[0]](),this.visibilityTriggers.show[methods[1]](),this.element.parents(".marketing__sidebar")[methods[2]]("no-form"),this.element[methods[3]]()},Form.prototype._forceShow=function(){return this.visibilityTriggers.hide.hide(),this.visibilityTriggers.show.hide(),this.element.show().css("height","auto")},Form.prototype._hide=function(event){return event&&event.stop(),this.isVisible=!0,this._changeVisibility()},Form.prototype._hideFromMap=function(){return this._hide(),"list"===$(".marketing__toggle-view.is-active").data("view")?this._forceShow():void 0},Form.prototype._show=function(event){return event.stop(),this.isVisible=!1,this._changeVisibility()},Form.prototype._sortChange=function(){return 0!==this.search.records.length?this.search.forceSort():void 0},Form}(Marketing.Form)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Attom.Owner=function(_super){function Owner(search,options){this.search=search,this._togglePropertyList=__bind(this._togglePropertyList,this),this._notifySelection=__bind(this._notifySelection,this),this._afterUpgrade=__bind(this._afterUpgrade,this),this.toggleSidebarProperties=__bind(this.toggleSidebarProperties,this),this.toggleListProperties=__bind(this.toggleListProperties,this),this.assignValues(options),this.addProperty(options)}return __extends(Owner,_super),Owner.prototype.addProperty=function(attributes){var property;return property=new Attom.Property(this.search,attributes),property.valid()&&this.properties.push(property),this._updateFormattedValues(),this._preparePropertyHTML()},Owner.prototype.assignValues=function(options){var a,attributes,_i,_len;for(this.isOwner=!0,this.propertiesVisible=!1,this.properties=[],attributes=["id","name","address","city","state","zip"],_i=0,_len=attributes.length;_len>_i;_i++)a=attributes[_i],this[a]=options["owner_"+a];return this.state_abbreviation=this.state},Owner.prototype.attomIds=function(){return this.properties.map(function(p){return p.attom_id})},Owner.prototype.isMappable=function(){return!1},Owner.prototype.registerMappingObservers=function(element,renderer){var e,property,_i,_len,_ref,_results;if(element.on("click",this.toggleSidebarProperties),element.on("click",this._exclusivelyActivate(renderer)),renderer.mappable){for(_ref=element.find(".buyer-property"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],e=$(e),property=this.properties.detect(function(p){return e.hasClass("property-"+p.id)}),property&&property.isMappable()?_results.push(e.on("click",property.scrollAndShowMapInfoWindow)):_results.push(e.addClass("unmappable"));return _results}},Owner.prototype.registerObservers=function(element){var e,_i,_len,_ref,_results;if(element.find(".property-toggle").on("click",this.toggleListProperties),element.find("input:checkbox").on("click",this._notifySelection),!this.search.permitted){for(_ref=element.find(".buyer-properties, .buyer-details"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],_results.push(this._obfuscate($(e)));return _results}},Owner.prototype.toggleListProperties=function(event,_list){var list,verb;return this.search.permitted?(event.preventDefault(),list=this._togglePropertyList(event,_list),verb=list.is(":hidden")?"Show":"Hide",$(event.target).text(""+verb+" Properties")):this._promptForUpgrade(event)},Owner.prototype.toggleSidebarProperties=function(event,_list){var list,target;return target=$(event.target),target.parents(".buyer-properties").exists()||target.is(":checkbox")?void 0:(list=this._togglePropertyList(event,_list),list.is(":hidden")?void 0:this.search.addPropertiesToMap(this))},Owner.prototype.valid=function(){return this.properties.any()},Owner.prototype._afterUpgrade=function(){return this.search.permitted=!0,this.search.render(),this.off("upgrade:complete",this.afterUpgrade.handler),this.afterUpgrade=null},Owner.prototype._exclusivelyActivate=function(renderer){var _this=this;return function(event){return $(event.target).is(":checkbox")?void 0:(renderer&&renderer.exclusivelyActivate(event),_this.search.activeRecord=_this)}},Owner.prototype._notifySelection=function(event){var eventName;return eventName=$(event.target).is(":checked")?"person:selected":"person:deselected",this.trigger(eventName,this)},Owner.prototype._obfuscate=function(element){return element.find("h1").addClass("obfuscate heavy"),element.find(".address-1").addClass("obfuscate"),element.find(".address-2").addClass("obfuscate")},Owner.prototype._preparePropertyHTML=function(){var property,_i,_len,_ref,_results;for(this.cityStateZip=""+this.city+", "+this.state_abbreviation+" "+this.zip,this.propertySidebarViewHTML="",this.propertyListViewHTML="",_ref=this.properties,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)property=_ref[_i],this.propertySidebarViewHTML+=this.search.sidebarViewPropertyTemplate.evaluate(property),_results.push(this.propertyListViewHTML+=this.search.listViewPropertyTemplate.evaluate(property));return _results},Owner.prototype._promptForUpgrade=function(event){return this.afterUpgrade={event:event,handler:this._afterUpgrade},this.on("upgrade:complete",this.afterUpgrade.handler),top.overlay.open(this.search.upgradeUrl)},Owner.prototype._togglePropertyList=function(event,list){return null==list&&(list=$(event.target).parents(".rendered-record").find(".buyer-properties").first()),list.toggle(),this.propertiesVisible=!list.is(":hidden"),list},Owner.prototype._updateFormattedValues=function(){var p,prices,totalPrice,_i,_len,_ref;for(this.propertyCount=this.properties.length,this.mostRecentDate=this.properties.map(function(p){return p.date}).sort()[0],this.formatted_most_recent_date=this.search.formatDate(this.mostRecentDate),prices=[],totalPrice=0,_ref=this.properties,_i=0,_len=_ref.length;_len>_i;_i++)p=_ref[_i],p.price&&(prices.push(p.price),totalPrice+=p.price);return this.averagePrice=totalPrice/prices.length,this.formatted_average_price=this.averagePrice?(this.averagePrice=parseInt(this.averagePrice,10),"$"+commaize(this.averagePrice)):"N/A"},Owner}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Attom.Property=function(_super){function Property(){return this.scrollAndShowMapInfoWindow=__bind(this.scrollAndShowMapInfoWindow,this),_ref=Property.__super__.constructor.apply(this,arguments)}return __extends(Property,_super),Property.prototype.scrollAndShowMapInfoWindow=function(event){var newTop;return newTop=this.search.googleMap.element.offset().top,$(document.body).animate({scrollTop:newTop},300),this.showMapInfoWindow(event)},Property.prototype._formatAttributes=function(){return this.id=this.attom_id,this.streetAddress=this.address,this.state_abbreviation=this.state,this.cityStateZip=""+this.city+", "+this.state_abbreviation+" "+this.zip,this.originalPrice=this.last_sale_value,this.price=parseFloat(this.originalPrice),this.formatted_price=this.price?"$"+commaize(this.originalPrice):"N/A",this.originalDate=this.last_sale_date,this.date=new Date(Date.parse(this.originalDate)),this.formatted_date=this.search.formatDate(this.date),this.geocoding={latitude:this.latitude,longitude:this.longitude}},Property}(Marketing.Property)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Attom.Renderer=function(_super){function Renderer(){return _ref=Renderer.__super__.constructor.apply(this,arguments)}return __extends(Renderer,_super),Renderer.prototype._advancedResult=function(){var element,message,values;return element=$("<"+("ul"===this.wrapperTag?"li":"p")+' class="warning">'),values=this.search.dayAdvancement,message="We couldn't find any results within the last "+values.initial+" days, "+("but this is what we found within "+values.current+" days."),element.text(message)},Renderer.prototype._createWrapper=function(){return this.search.selectionToolbarHTML&&(this.container.prepend(this.search.selectionToolbarHTML),new Attom.SelectionToolbar(this,this.container.find(".marketing__toolbar"))),Renderer.__super__._createWrapper.call(this)},Renderer.prototype._updateWrapper=function(){return Renderer.__super__._updateWrapper.call(this),this.search.dayAdvanced?this.wrapper.prepend(this._advancedResult()):void 0},Renderer.prototype._performElementUpdates=function(element,record,index){var counter,event,list,property,spans,_i,_len,_ref1;if(this.mappable&&record.properties.any())for(index=0,counter=1,spans=element.find(".buyer-property .count"),_ref1=record.properties,_i=0,_len=_ref1.length;_len>_i;_i++)property=_ref1[_i],property.isMappable()&&($(spans[index]).text(counter),property.markerNumber=counter,counter++),index++;return this.search.activeRecord===record&&(element.addClass("active"),record.propertiesVisible&&(event={preventDefault:function(){}},list=element.find(".buyer-properties"),this.mappable?(event.target=element.find("div").first(),record.toggleSidebarProperties(event)):(event.target=element.find(".property-toggle"),record.toggleListProperties(event)))),this.search.selectedRecords.include(record)?element.find("input:checkbox").not(":checked").check(!0):void 0},Renderer}(Marketing.Renderer)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Attom.Search=function(_super){function Search(){return this._afterUpgrade=__bind(this._afterUpgrade,this),_ref=Search.__super__.constructor.apply(this,arguments)}return __extends(Search,_super),Search.prototype.initialize=function(options){return this.owners={},Search.__super__.initialize.call(this,options)},Search.prototype.assignClasses=function(){return Search.__super__.assignClasses.call(this),this.classes.form=Attom.Form,this.classes.renderer=Attom.Renderer},Search.prototype.assignHelpers=function(){return this.selectedRecords=[],Search.__super__.assignHelpers.call(this),this.on("upgrade:complete",this._afterUpgrade)},Search.prototype.addPropertiesToMap=function(owner){if(this.googleMap&&owner.isOwner){if(this.mappedOwner===owner)return;return this.googleMap.reset(),this.googleMap.addProperties(owner.properties),this.mappedOwner=owner}},Search.prototype.forceSort=function(){var scrollTop;if(this.records.any())return this._sortRecords(),scrollTop=document.body.scrollTop,this.render(),document.body.scrollTop=scrollTop},Search.prototype.reset=function(){return Search.__super__.reset.call(this),this.dayAdvanced=!1},Search.prototype._addToRecords=function(record){return Search.__super__._addToRecords.call(this,record),this.forceSort()},Search.prototype._afterUpgrade=function(){return this.permitted=!0,$(".obfuscate").removeClass("obfuscate"),$("#upgrade-banner a").hide(),$(".empty .locked-container").hide(),$(".empty .normal-container").show()},Search.prototype._clearRecords=function(){return this.owners={},Search.__super__._clearRecords.call(this)},Search.prototype._handleNoResults=function(){var currentValue,daySelect,days,nextDay,option,_i,_len,_ref1;for(daySelect=this.form.element.find("#search_days"),currentValue=daySelect.val(),days=[],_ref1=daySelect.find("option"),_i=0,_len=_ref1.length;_len>_i;_i++)option=_ref1[_i],days.push($(option).attr("value"));return nextDay=days[days.indexOf(currentValue)+1],!nextDay||this.errors.any()||this.records.any()?(this.records.any()||(this.dayAdvanced=!1,this.dayAdvancement=null),Search.__super__._handleNoResults.call(this)):(this.dayAdvancement||(this.dayAdvancement={initial:currentValue}),this.dayAdvancement.current=nextDay,daySelect.val(nextDay).change(),this.form.execute(),this.dayAdvanced=!0)},Search.prototype._initializeRecords=function(data){var owner,record,results,values,_i,_len,_ref1;for(results=[],_ref1=data.results,_i=0,_len=_ref1.length;_len>_i;_i++)values=_ref1[_i],(owner=this.owners[values.owner_id])?owner.addProperty(values):(record=this._newRecord(values),this.owners[record.id]=record,results.push(record));return results},Search.prototype._newRecord=function(values){return new Attom.Owner(this,values)},Search.prototype._recordIdentifier=function(record){return record.id},Search.prototype._scrollwheelZoom=function(){return!1},Search.prototype._shouldDeduplicateRecords=function(){return!1},Search.prototype._sortRecords=function(){var attribute,sortBy,sortFunction;return sortBy=this.form.sortBy(),sortFunction=function(){},"name"===sortBy?sortFunction=function(a,b){var valueA,valueB;return valueA=a.name.toLowerCase(),valueB=b.name.toLowerCase(),valueB>valueA?-1:valueA>valueB?1:0}:(attribute={properties:"propertyCount","last-date":"mostRecentDate","avg-price":"averagePrice"}[sortBy],sortFunction=function(a,b){return b[attribute]-a[attribute]}),this.records.sort(sortFunction)},Search}(Marketing.Search)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Attom.SelectionToolbar=function(_super){function SelectionToolbar(){return this._performExport=__bind(this._performExport,this),this._initiateDirectMailCampaign=__bind(this._initiateDirectMailCampaign,this),this._initiateCSVExport=__bind(this._initiateCSVExport,this),_ref=SelectionToolbar.__super__.constructor.apply(this,arguments)
}return __extends(SelectionToolbar,_super),SelectionToolbar.prototype.namespace="person",SelectionToolbar.prototype._addTriggers=function(){return this.triggers.exportToCSV=this.element.find(".export-csv"),this.triggers.directMail=this.element.find(".direct-mail"),this.exportOverlay=$("#export-csv-overlay"),this.exportOverlay.exists()?new Overlay(this.exportOverlay,{openTrigger:this.triggers.exportToCSV}):void 0},SelectionToolbar.prototype._addTriggerObservers=function(){return this.triggers.exportToCSV.on("click",this._initiateCSVExport),this.exportOverlay.find("#csv-export-trigger").on("click",this._performExport),this.triggers.directMail.on("click",this._initiateDirectMailCampaign)},SelectionToolbar.prototype._initiateCSVExport=function(event){var message,overlayId;return event.stop(),this.search.errors.clear(),overlayId=this.exportOverlay.attr("id"),this.search.permitted?this.search.userExportPermitted?this._hasSelections()?(this.search.targetedSelectionToolbar=this,Overlay.show(overlayId)):(this.search.errors.displayMessage("Exporting a CSV requires at least 1 "+this.recordName+" to be selected"),Overlay.hide(overlayId)):(message="You don't have permission to access Exports.<br/>",message+="Please contact your account manager if you feel this is incorrect.",this.search.errors.displayMessage(message)):(Overlay.hide(overlayId),this._promptForUpgrade("initiateCSVExport",event))},SelectionToolbar.prototype._initiateDirectMailCampaign=function(event){var list,message;return event.stop(),this.search.errors.clear(),this.search.permitted?this.search.userDirectMailPermitted?this._hasSelections()?(list=new Attom.DirectMailingList({trigger:this.triggers.directMail,records:this.search.selectedRecords}),list.process()):(message="Direct mail campaigns requires at least 1 "+this.recordName+" to be selected",this.search.errors.displayMessage(message)):(message="You don't have permission to access "+app_t("direct_mail")+".<br/>",message+="Please contact your account manager if you feel this is incorrect.",this.search.errors.displayMessage(message)):this._promptForUpgrade("initiateDirectMailCampaign",event)},SelectionToolbar.prototype._performExport=function(event){var csvExport;return event.preventDefault(),this.search.targetedSelectionToolbar===this?(Overlay.hide(this.exportOverlay.attr("id")),csvExport=new Attom.CsvExport({trigger:this.triggers.exportToCSV,records:this.search.selectedRecords,radio:this.exportOverlay.find("input:radio:checked")}),csvExport.process()):void 0},SelectionToolbar}(Marketing.SelectionToolbar)}.call(this),function(){Attom.SelectionToolbar.Action=function(){function Action(options){this.options=options,$.extend(this,this.options),this.url=this.trigger.attr("href"),this.attomIds=[]}return Action.prototype.process=function(){var owner,_i,_len,_ref;for(_ref=this.records,_i=0,_len=_ref.length;_len>_i;_i++)owner=_ref[_i],this.attomIds=this.attomIds.concat(owner.attomIds());return this._submit(defaultParams({attom_ids:this.attomIds})),this.attomIds=[]},Action.prototype._submit=function(){throw"Not Implemented"},Action}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Attom.CsvExport=function(_super){function CsvExport(){return this._fetchCSV=__bind(this._fetchCSV,this),_ref=CsvExport.__super__.constructor.apply(this,arguments)}return __extends(CsvExport,_super),CsvExport.prototype._fetchCSV=function(data){var _this=this;return setTimeout(function(){return window.location=""+_this.url+"?id="+data.id},10)},CsvExport.prototype._submit=function(parameters){return parameters[this.radio.attr("name")]=this.radio.val(),$.ajax({url:this.url.replace(".csv",""),type:"post",data:parameters,message:"Exporting",dataType:"json"}).done(this._fetchCSV)},CsvExport}(Attom.SelectionToolbar.Action)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Attom.DirectMailingList=function(_super){function DirectMailingList(){return this._createNewCampaign=__bind(this._createNewCampaign,this),_ref=DirectMailingList.__super__.constructor.apply(this,arguments)}return __extends(DirectMailingList,_super),DirectMailingList.prototype._createNewCampaign=function(url){return pjax.loadUrl(url)},DirectMailingList.prototype._submit=function(parameters){return $.ajax({url:this.url,type:"post",data:parameters,message:"Building Campaign"}).done(this._createNewCampaign)},DirectMailingList}(Attom.SelectionToolbar.Action)}.call(this),function(){this.InstantLeads={}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};InstantLeads.Listhub=function(_super){function Listhub(){return this._onLoad=__bind(this._onLoad,this),_ref=Listhub.__super__.constructor.apply(this,arguments)}return __extends(Listhub,_super),Listhub.instance=null,Listhub.require=function(callback){return null==this.instance?this.instance=new InstantLeads.Listhub(callback):null!=callback?callback():void 0},Listhub.prototype.initialize=function(callback){return this.callback=callback,this.metricsProviderId="M-1701",this.url="//tracking.listhub.net/scripts/la.js",this.isTest="production"!==window.environment,$.getScript(this.url).done(this._onLoad)},Listhub.prototype._registerObservers=function(){return this.on("listhub:property:viewed",this._recordMetric("viewed")),this.on("listhub:property:email-clicked",this._recordMetric("email"))},Listhub.prototype._mappings=function(metric){return{viewed:"DETAIL_PAGE_VIEWED",email:"AGENT_EMAIL_CLICKED"}[metric]},Listhub.prototype._onLoad=function(){return"undefined"!=typeof ListHubTracker&&null!==ListHubTracker&&(this.client=new ListHubTracker({provider:this.metricsProviderId,test:this.isTest}),this._registerObservers(),this.callback)?this.callback():void 0},Listhub.prototype._recordMetric=function(metric){var _this=this;return function(event,property){return property["mls?"]?_this.client.submit(_this._mappings(metric),property.listing_key):void 0}},Listhub.prototype.__gc=function(){},Listhub}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};InstantLeads.Property=function(_super){function Property(){return this._trackEmailClick=__bind(this._trackEmailClick,this),_ref=Property.__super__.constructor.apply(this,arguments)}return __extends(Property,_super),Property.prototype.registerDetailsObservers=function(element){return Property.__super__.registerDetailsObservers.call(this,element),element.find("a.send-email").on("click",this._trackEmailClick),element.find("a.run-comps-button").on("click",this._runComps)},Property.prototype.viewed=function(){return this.trigger("listhub:property:viewed",this)},Property.prototype._formatAttributes=function(){return this.id=this.listing_key,this.streetAddress=this.address,this.cityStateZip=""+this.city+", "+this.state+"  "+this.zip,this.address=this.full_address,this.imageUrls=this.image_urls||[],this.firstImageUrl=this.imageUrls.any()?this.imageUrls[0]:image_url("instant_leads/missing.png"),this.numberOfImageUrls=this.imageUrls.length,"string"==typeof this.asking_price&&(this.asking_price=this.asking_price.replace(/,/g,"")),this.price=parseFloat(this.asking_price),isNaN(this.price)&&(this.price=0),this.priceDisplay="$"+commaize(this.price),this.beds=parseInt(this.beds,10),isNaN(this.beds)&&(this.beds=0),this.bedsDisplay=""+this.beds+" Bed",1!==this.beds&&(this.bedsDisplay+="s"),this.baths=parseFloat(this.baths),isNaN(this.baths)&&(this.baths=0),this.bathsDisplay=""+this.baths+" Bath",1!==this.baths&&(this.bathsDisplay+="s"),this.living_area=parseFloat(this.living_area),isNaN(this.living_area)&&(this.living_area=0),this.livingAreaDisplay=""+commaize(this.living_area)+" sqft",this.geocoding={latitude:this.latitude,longitude:this.longitude},this.estimated_value&&(this.estimated_value=parseInt(this.estimated_value,10),this.estimated_equity=this.estimated_value-this.price),this.saved=this["saved?"]},Property.prototype._trackEmailClick=function(){return this.trigger("listhub:property:email-clicked",this)},Property.prototype._obfuscate=function(){return this.search.permitted?void 0:(this.cachedInfoWindowContent.find(".address, .city-state-zip, .price").addClass("obfuscate"),this.cachedInfoWindowContent.find(".address").addClass("heavy"))},Property}(Marketing.Property)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};InstantLeads.Renderer=function(_super){function Renderer(){return _ref=Renderer.__super__.constructor.apply(this,arguments)}return __extends(Renderer,_super),Renderer.prototype._obfuscate=function(element){return element.find(".property-main .street-address, h2.address, .price").addClass("obfuscate"),element.find(".property-main .street-address, .property-meta .price").addClass("heavy")},Renderer.prototype._performElementUpdates=function(element,record,index){var number;return this.mappable&&window.hasGoogleMaps&&record.isMappable()&&(number=index+1,element.find(".count").text(number),record.markerNumber=number),this.search.viewedRecord===record&&element.addClass("active"),this.search.permitted?void 0:this._obfuscate(element)},Renderer}(Marketing.Renderer)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};InstantLeads.Search=function(_super){function Search(){return this._registerRecordsSuccess=__bind(this._registerRecordsSuccess,this),this._afterUpgradeForHeader=__bind(this._afterUpgradeForHeader,this),this._afterUpgrade=__bind(this._afterUpgrade,this),_ref=Search.__super__.constructor.apply(this,arguments)}return __extends(Search,_super),Search.prototype.initialize=function(options){return Search.__super__.initialize.call(this,options),this._registerFeaturedProperties()},Search.prototype.assignClasses=function(){return Search.__super__.assignClasses.call(this),this.classes.renderer=InstantLeads.Renderer},Search.prototype.assignHelpers=function(){return Search.__super__.assignHelpers.call(this),InstantLeads.Listhub.require(),this.on("upgrade:complete",this._afterUpgradeForHeader)},Search.prototype.saveProperty=function(property,event){var spinnerAlreadyVisible,url,_this=this;return event.stop(),this.permitted?(spinnerAlreadyVisible=this.form.processing,url=this.saveUrlTemplate.evaluate(property),this.form.showSpinner(),$.ajax({url:url,data:defaultParams(),type:"post"}).always(function(){return spinnerAlreadyVisible?void 0:_this.form.hideSpinner()}).done(function(text){return property.assignSavedPropertyIdFromURL(text),property.saved=!0,$(event.target).text("Saved")}).fail(function(){return _this.errors.displayMessage("This property could not be saved.")})):this._promptForUpgrade("saveProperty",property,event)},Search.prototype.viewProperty=function(property){var spinnerAlreadyVisible,url,_this=this;return this.permitted?(spinnerAlreadyVisible=this.form.processing,url=this.viewUrlTemplate.evaluate(property),this.form.showSpinner(),$.ajax({url:url,type:"get"}).always(function(){return spinnerAlreadyVisible?void 0:_this.form.hideSpinner()}).done(this._showDetails(property))):this._promptForUpgrade("viewProperty",property)},Search.prototype._afterUpgrade=function(){return this.permitted=!0,this.off("upgrade:complete",this.afterUpgrade.handler),this[this.afterUpgrade.action](this.afterUpgrade.property,this.afterUpgrade.event),this.afterUpgrade=null},Search.prototype._afterUpgradeForHeader=function(){return this.permitted=!0,$(".obfuscate").removeClass("obfuscate"),$("#upgrade-banner a").hide()},Search.prototype._newRecord=function(values){return new InstantLeads.Property(this,values)},Search.prototype._promptForUpgrade=function(action,property,event){return this.afterUpgrade={action:action,property:property,event:event,handler:this._afterUpgrade},this.on("upgrade:complete",this.afterUpgrade.handler),top.overlay.open(this.upgradeUrl)},Search.prototype._recordIdentifier=function(record){return record.listing_key},Search.prototype._registerFeaturedProperties=function(){return this.featuredProperties?(this.registerRecords(this.featuredProperties),this.listRenderer.container.find(".rendered-record").remove(),this.listRenderer.clear(!1),this.sidebarRenderer.clear(),this._renderers("render")):void 0},Search.prototype._registerRecordsSuccess=function(){var id,identifiers,record,uniquedRecords,_i,_len,_ref1;for(identifiers=[],uniquedRecords=[],_ref1=this.records,_i=0,_len=_ref1.length;_len>_i;_i++)record=_ref1[_i],id=record.mls_number,identifiers.include(id)||(identifiers.push(id),uniquedRecords.push(record));return this.records=uniquedRecords},Search.prototype._showDetails=function(property){var _this=this;return function(detailsContent){return _this.viewedRecord=property,property.viewed(),_this.propertyDetailsView.html(detailsContent),property.registerDetailsObservers(_this.propertyDetailsView),_this.toggle.showPropertyDetails(),_this.sidebarRenderer.clear().render()}},Search}(Marketing.Search)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};InstantLeads.Solo=function(_super){function Solo(){return _ref=Solo.__super__.constructor.apply(this,arguments)}return __extends(Solo,_super),Solo.prototype.initialize=function(options){var _this=this;return $.extend(this,options),this.property=new InstantLeads.Property(this,this.data),this.property.registerDetailsObservers(this.element),this.element.find(".gallery img").trigger("load"),InstantLeads.Listhub.require(function(){return _this.trigger("property:viewed",_this.property)})},Solo}(GCObject)}.call(this),function(){this.VacantHouses={}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};VacantHouses.Form=function(_super){function Form(){return this._lastSaleDateChange=__bind(this._lastSaleDateChange,this),this._disallowClashingOwnerSearches=__bind(this._disallowClashingOwnerSearches,this),_ref=Form.__super__.constructor.apply(this,arguments)}return __extends(Form,_super),Form.prototype.assignElements=function(){return Form.__super__.assignElements.call(this),this.lastSaleDateSelector=this.element.find("#last_sale_date"),this.lastSaleDateFields=this.element.find(".last-sale-date-field"),this.ownerCheckboxes=this.element.find("input:checkbox")},Form.prototype.observeElements=function(){return this.lastSaleDateSelector.on("change",this._lastSaleDateChange),this._lastSaleDateChange(),this.ownerCheckboxes.on("click",this._disallowClashingOwnerSearches),this.search.permitted?Form.__super__.observeElements.call(this):this.element.on("submit",function(e){return e.stop()})},Form.prototype._disallowClashingOwnerSearches=function(event){var checkbox,ownerOccupied;return checkbox=$(event.target),ownerOccupied=this.ownerCheckboxes.filter('[name*="[owner_occupied]"]'),checkbox.is(ownerOccupied)&&checkbox.is(":checked")?this.ownerCheckboxes.not(ownerOccupied).check(!1):ownerOccupied.check(!1)},Form.prototype._lastSaleDateChange=function(){var value;return value=this.lastSaleDateSelector.val(),this.lastSaleDateFields.hide().find("input").disable(),this.lastSaleDateFields.filter("[data-option="+value+"]").show().find("input").enable()},Form}(Marketing.Form)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};VacantHouses.Property=function(_super){function Property(){return this._save=__bind(this._save,this),this._notifySelection=__bind(this._notifySelection,this),this._modal=__bind(this._modal,this),this._markAsSaved=__bind(this._markAsSaved,this),_ref=Property.__super__.constructor.apply(this,arguments)}return __extends(Property,_super),Property.prototype.initialize=function(search,data){return this.search=search,Property.__super__.initialize.call(this,this.search,data),this.on("vacant-house:"+this.attom_id+":campaign-created",this._markAsSaved)},Property.prototype.markAsSaved=function(){return this._markAsSaved()},Property.prototype.registerDetailsObservers=function(element){return Property.__super__.registerDetailsObservers.call(this,element),element.find("a.run-comps-button").on("click",this._runComps)},Property.prototype.registerObservers=function(element){var anchor;return Property.__super__.registerObservers.call(this,element),anchor=element.find("a.add-to-campaign"),anchor.attr("data-attom-id",this.attom_id),anchor.on("click",this._modal),element.find("input:checkbox").on("click",this._notifySelection)},Property.prototype._defaultSaveText=function(){return"Add to Lead Campaign"},Property.prototype._formatAttributes=function(){var m,_i,_len,_ref1;for(this.id=this.attom_id,this["vacant?"]=!0,_ref1=["vacant","absentee_owner","out_of_state_owner"],_i=0,_len=_ref1.length;_len>_i;_i++)m=_ref1[_i],this[""+m+"_status"]=this[""+m+"?"]?"yes":"no",this[""+m+"_status_display"]=this[""+m+"_status"].toUpperCase();return this.streetAddress=this.address,this.cityStateZip=""+this.city+", "+this.state+"  "+this.zip,this.address=""+this.streetAddress+" "+this.cityStateZip,this.originalPrice=this.last_sale_value,this.price=parseFloat(this.originalPrice),this.formatted_price=this.price?"$"+commaize(this.originalPrice):"N/A",this.originalDate=this.last_sale_date,this.date=new Date(Date.parse(this.originalDate)),this.formatted_date=this.search.formatDate(this.date),this.geocoding={latitude:this.latitude,longitude:this.longitude},this.saved=this["saved?"]},Property.prototype._markAsSaved=function(event){var anchors;return this.saved=!0,anchors=$("a.add-to-campaign[data-attom-id='"+this.attom_id+"']"),anchors.text("Saved"),null!=event?(modal.close(),overlay.hide()):void 0},Property.prototype._modal=function(event){var _this=this;if("Saved"!==$(event.target).text())return event.stop(),modal.open(event.target.href,{},function(modalElement){return modalElement.find("a.vacant-houses__campaign").on("ajax:success",_this._markAsSaved)})},Property.prototype._notifySelection=function(event){var eventName;return eventName=$(event.target).is(":checked")?"selected":"deselected",this.trigger("vacant-house:"+eventName,this)},Property.prototype._openLeadEditUrl=function(event){var anchor;return anchor=$(event.target),anchor.attr("href",this.search.leadEditUrlTemplate.evaluate({id:this.attom_id})),anchor.attr("target","_blank")},Property.prototype._save=function(event){return this.saved?this._openLeadEditUrl(event):void 0},Property}(Marketing.Property)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};VacantHouses.Renderer=function(_super){function Renderer(){return _ref=Renderer.__super__.constructor.apply(this,arguments)}return __extends(Renderer,_super),Renderer.prototype._createWrapper=function(){return this.currentToolbar&&this.currentToolbar.stopAllObservations(),this.search.selectionToolbarHTML&&(this.container.prepend(this.search.selectionToolbarHTML),this.currentToolbar=new VacantHouses.SelectionToolbar(this,this.container.find(".marketing__toolbar"))),Renderer.__super__._createWrapper.call(this)},Renderer.prototype._performElementUpdates=function(element,record,index){var number;return this.mappable&&window.hasGoogleMaps&&record.isMappable()&&(number=index+1,element.find(".count").text(number),record.markerNumber=number),this.search.viewedRecord===record?element.addClass("active"):void 0},Renderer}(Marketing.Renderer)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};VacantHouses.Search=function(_super){function Search(){return _ref=Search.__super__.constructor.apply(this,arguments)}return __extends(Search,_super),Search.prototype.assignClasses=function(){return Search.__super__.assignClasses.call(this),this.classes.renderer=VacantHouses.Renderer,this.classes.form=VacantHouses.Form},Search.prototype.assignHelpers=function(){var _this=this;return this.selectedRecords=[],Search.__super__.assignHelpers.call(this),this.permitted?void 0:(this.upgradeOverlay=Overlay.cache["vacant-houses-upgrade"],this.upgradeOverlay?this.upgradeOverlay.wrapper.find("a.action-button").on("click",function(){return _this.upgradeOverlay.hide()}):void 0)},Search.prototype.viewProperty=function(property){var spinnerAlreadyVisible,url,_this=this;return spinnerAlreadyVisible=this.form.processing,url=this.viewUrlTemplate.evaluate(property),this.form.showSpinner(),$.ajax({url:url,type:"get"}).always(function(){return spinnerAlreadyVisible?void 0:_this.form.hideSpinner()}).done(this._showDetails(property))},Search.prototype._newRecord=function(values){return new VacantHouses.Property(this,values)},Search.prototype._recordIdentifier=function(record){return record.attom_id},Search.prototype._showDetails=function(property){var _this=this;return function(detailsContent){return _this.viewedRecord=property,_this.propertyDetailsView.html(detailsContent),property.registerDetailsObservers(_this.propertyDetailsView),_this.toggle.showPropertyDetails(),_this.sidebarRenderer.clear().render()}},Search}(Marketing.Search)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};VacantHouses.SelectionToolbar=function(_super){function SelectionToolbar(){return this._savedSelectedLeads=__bind(this._savedSelectedLeads,this),this._saveMultipleSelectedLeads=__bind(this._saveMultipleSelectedLeads,this),this._openModal=__bind(this._openModal,this),this._observeCampaignSaveEvent=__bind(this._observeCampaignSaveEvent,this),this._markSelectedAsSaved=__bind(this._markSelectedAsSaved,this),_ref=SelectionToolbar.__super__.constructor.apply(this,arguments)}return __extends(SelectionToolbar,_super),SelectionToolbar.prototype.namespace="vacant-house",SelectionToolbar.prototype._addTriggers=function(){return this.triggers.addToCampaign=this.element.find(".add-to-lead-campaign")},SelectionToolbar.prototype._addTriggerObservers=function(){return this.triggers.addToCampaign.on("click",this._openModal)},SelectionToolbar.prototype._attomPropertyIds=function(){return this.search.selectedRecords.map(function(r){return r.attom_id}).join(",")},SelectionToolbar.prototype._markSelectedAsSaved=function(){var record,_i,_len,_ref1;for(_ref1=this.search.selectedRecords,_i=0,_len=_ref1.length;_len>_i;_i++)record=_ref1[_i],record.markAsSaved();return modal.close(),overlay.hide()},SelectionToolbar.prototype._observeCampaignSaveEvent=function(){return this.stopAllObservations(),this.on("vacant-house:all-selected:campaign-created",this._saveMultipleSelectedLeads)},SelectionToolbar.prototype._openModal=function(event){var message,_this=this;return event.stop(),this._hasSelections()?modal.open(event.target.href,{},function(modalElement){return modalElement.find("a.vacant-houses__campaign").on("click",_this._savedSelectedLeads),modalElement.find("a.vacant-houses__new-campaign").on("click",_this._observeCampaignSaveEvent)}):(message="Adding to a lead campaign requires at least 1 "+this.recordName+" to be selected",this.search.errors.displayMessage(message))},SelectionToolbar.prototype._saveMultipleSelectedLeads=function(event,data){var url;return url=this.search.leadSaveMultipleUrlTemplate.evaluate({id:data.campaign_id}),$.ajax({url:url,type:"post",data:{attom_property_ids:this._attomPropertyIds()}}).done(this._markSelectedAsSaved)},SelectionToolbar.prototype._savedSelectedLeads=function(event){var anchor;return event.stop(),anchor=$(event.target),$.ajax({url:anchor.attr("href"),type:"post",data:{attom_property_ids:this._attomPropertyIds()}}).done(this._markSelectedAsSaved)},SelectionToolbar}(Marketing.SelectionToolbar)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.Message=function(){function Message(){this._show=__bind(this._show,this),this._hide=__bind(this._hide,this),this._successAjaxMessage=__bind(this._successAjaxMessage,this),this._stopAjaxMessage=__bind(this._stopAjaxMessage,this),this._sendAjaxMessage=__bind(this._sendAjaxMessage,this),this._notFoundAjaxMessage=__bind(this._notFoundAjaxMessage,this),this._initialAjaxMessage=__bind(this._initialAjaxMessage,this),this._errorAjaxMessage=__bind(this._errorAjaxMessage,this),this._display=__bind(this._display,this),this.createElement(),this.observeElements()}return Message.instance=null,Message.create=function(){return this.instance?this.instance:this.instance=new Message},Message.prototype.createElement=function(){var element;return element=$("body .main-message"),element.exists()||(element=$('<div class="main-message">'),element.hide(),$("body").append(element)),this.element=element,this.defaultMessage=null,this.flashing=!1},Message.prototype.observeElements=function(){var element;return element=$(document),element.on("ajax:send",this._initialAjaxMessage),element.on("pjax:send",this._initialAjaxMessage),element.ajaxSend(this._sendAjaxMessage),element.ajaxError(this._errorAjaxMessage),element.ajaxSuccess(this._successAjaxMessage),element.ajaxStop(this._stopAjaxMessage)},Message.prototype.display=function(text){return this._display(text)},Message.prototype.flash=function(text,type){var _this=this;return null==type&&(type="notice"),text?(this.flashing=!0,setTimeout(function(){var time;return _this._display(text,""),_this.element.addClass(type),time=50*text.length,3e3>time&&(time=3e3),setTimeout(function(){return _this.element.fadeOut(500,function(){return _this.flashing=!1,$('script:contains("'+text+'")').remove()})},time)},5)):void 0},Message.prototype.hide=function(){return this._hide()},Message.prototype._addClassName=function(className){return this.classNames.push(className),this.element.addClass(className)},Message.prototype._animate=function(text){var _this=this;return this.animationInterval=setInterval(function(){var n,prefix,_i,_ref;for("..."===_this.addition?_this.addition="":_this.addition+=".",prefix="",n=_i=0,_ref=_this.addition.length;_ref>=0?_ref>=_i:_i>=_ref;n=_ref>=0?++_i:--_i)prefix+="&nbsp;";return _this._update(""+prefix+text+_this.addition)},250)},Message.prototype._display=function(text,addition){var update;return this.addition=null!=addition?addition:"...",clearInterval(this.animationInterval),this.element.attr("class","main-message"),update=""+text+this.addition,"..."===this.addition&&(update="&nbsp;&nbsp;&nbsp;&nbsp;"+update,this._animate(text)),this._update(update),this._show(),this.showing=!0},Message.prototype._errorAjaxMessage=function(event,xhr,options,error){var text;return"abort"===error?this._hide():200===xhr.status?this._successAjaxMessage(event,xhr,options):404===xhr.status?this._notFoundAjaxMessage(event,xhr,options):(text=xhr.responseText,text&&text.length>500&&"development"!==environment&&(text="Oh no! Something went wrong. We've been notified of this problem and are doing our best to resolve the issue."),this.flash(text,"error"))},Message.prototype._initialAjaxMessage=function(event){return this.defaultMessage="pjax:send"===event.type?$(event.relatedTarget).data("message"):$(event.target).data("message")},Message.prototype._notFoundAjaxMessage=function(){var text;return text="The page or action you were trying to perform could not be found. Try reloading this page to resolve the issue.",this.flash(text,"error")},Message.prototype._sendAjaxMessage=function(event,xhr,options){var _this=this;if(!options.noMessage)return clearTimeout(this.stopTimeout),setTimeout(function(){var message;return message=_this.defaultMessage,null==message&&(message=options.message),"POST"===options.type&&null==message&&(message="Saving"),"DELETE"===options.type&&null==message&&(message="Removing"),null==message&&(message="Loading"),"no-message"!==message&&_this._display(message),_this.defaultMessage=null},1)},Message.prototype._stopAjaxMessage=function(){var _this=this;return this.stopTimeout=setTimeout(function(){return _this.flashing?void 0:_this._hide()},100)},Message.prototype._successAjaxMessage=function(event,xhr){return xhr.responseJSON&&xhr.responseJSON.message?this.flash(xhr.responseJSON.message):void 0},Message.prototype._hide=function(){return this.element.hide(),clearInterval(this.animationInterval)},Message.prototype._show=function(){return this.element.show()},Message.prototype._update=function(content){return this.element.html(content)},Message}(),Message.create()}.call(this),function(){this.Messages={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Messages.Message=function(){function Message(element){this.element=element,this._delete=__bind(this._delete,this),this._archive=__bind(this._archive,this),this.assignElements(),this.observeElements()}return Message.prototype.assignElements=function(){return this.triggers={back:this.element.find(".action-inbox"),archive:this.element.find(".action-archive"),"delete":this.element.find(".action-delete")}},Message.prototype.observeElements=function(){return this.triggers.archive.on("ajax:success",this._archive),this.triggers["delete"].on("ajax:success",this._delete)},Message.prototype._archive=function(){return this.triggers.archive.hide(),this.triggers["delete"].show()},Message.prototype._delete=function(){return this.triggers["delete"].hide(),this.triggers.archive.show()},Message}()}.call(this),function(){this.Numbers={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Numbers.EditForm=function(){function EditForm(){this._submit=__bind(this._submit,this),this._showExtraFields=__bind(this._showExtraFields,this),this.assignElements(),this.observeElements(),new Numbers.Record(this.element)}return EditForm.prototype.assignElements=function(){return this.element=$(".edit-number-form"),this.form=this.element.closest("form"),this.voicemailSelect=this.element.find(".voicemail-select"),this.voicemailFields=this.element.find(".voicemail-field")
},EditForm.prototype.observeElements=function(){return this.voicemailSelect.on("change",this._showExtraFields),this.form.on("submit",this._submit)},EditForm.prototype._showExtraFields=function(){var field,target;return target=this.voicemailSelect.val(),this.voicemailFields.hide().find("input").disable(),field=this.voicemailFields.filter(".for-"+target),field.show().find("input").enable()},EditForm.prototype._submit=function(event){return event.stop(),$.ajax({url:this.form.attr("action"),type:"put",data:new FormData(this.form[0]),cache:!1,contentType:!1,processData:!1}).done(function(js){return $(document.body).append(js)})},EditForm}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Numbers.Form=function(){function Form(){this.element=$(".new-number-form"),new Numbers.Form.StepOne(this.element)}return Form}(),Numbers.Form.StepOne=function(){function StepOne(element){var _this=this;this.element=element,this._updatePlaceholder=__bind(this._updatePlaceholder,this),this._showStepTwo=__bind(this._showStepTwo,this),this._showAvailableNumbers=__bind(this._showAvailableNumbers,this),this.form=this.element.find("#search-form"),this.form.on("ajax:success",this._showAvailableNumbers),this.element.on("ajax:success","form.select-number",this._showStepTwo),this.element.find(".search-commit").on("click",function(){return _this.form.submit()}),this.form.on("change","input:radio",this._updatePlaceholder),this.results=this.element.find(".search-results"),this.resultsEmpty=this.element.find(".search-results-empty")}return StepOne.prototype._showAvailableNumbers=function(event,html){return html.blank()?(this.results.hide(),this.resultsEmpty.show()):(this.resultsEmpty.hide(),this.results.show().html(html))},StepOne.prototype._showStepTwo=function(event,html){var stepTwo;return stepTwo=this.element.find(".step-2"),stepTwo.html(html),this.element.find(".step-1").hide(),stepTwo.show(),new Numbers.Form.StepTwo(this.element)},StepOne.prototype._updatePlaceholder=function(){var placeholder,value;return value=this.form.find("input:radio:checked").val(),placeholder={local:"Find a number by area code (eg. 555)",toll_free:"Find a number by toll-free code (eg. 833, 844, 855)"}[value],this.form.find("#search").attr("placeholder",placeholder)},StepOne}(),Numbers.Form.StepTwo=function(){function StepTwo(element){this.element=element,this._showStepThree=__bind(this._showStepThree,this),this._changePaymentInfo=__bind(this._changePaymentInfo,this),this.element.on("ajax:success","form.purchase-number",this._showStepThree),this.element.on("click","#change-payment",this._changePaymentInfo)}return StepTwo.prototype._changePaymentInfo=function(event){return event.stop(),this.element.find(".payment-info").hide(),this.element.find(".payment-fields").show(),this.element.find("#change-payment").hide()},StepTwo.prototype._showStepThree=function(event,html){var stepThree;return stepThree=this.element.find(".step-3"),stepThree.html(html),this.element.find(".step-2").hide(),stepThree.show(),$.uniform(),new Numbers.EditForm},StepTwo}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Numbers.Record=function(){function Record(container){this.container=container,this._streamError=__bind(this._streamError,this),this._stopRecording=__bind(this._stopRecording,this),this._startRecording=__bind(this._startRecording,this),this._reRecord=__bind(this._reRecord,this),this._performRecord=__bind(this._performRecord,this),this._captureStream=__bind(this._captureStream,this),this.assignElements(),navigator.mediaDevices?this.observeElements():this.element.text("Your broswer does not support native audio recording. Try uploading an audio file instead.")}return Record.prototype.assignElements=function(){return this.element=this.container.find(".voicemail-field.for-record .recording"),this.dataField=this.container.find("input[type=hidden]"),this.captureContainer=this.element.find(".capture"),this.previewContainer=this.element.find(".preview").remove()},Record.prototype.observeElements=function(){return this.element.on("click","a.try-again",this._reRecord),this.element.on("click","a.start",this._startRecording),this.element.on("click","a.stop",this._stopRecording),this.element.on("click","a.re-record",this._reRecord)},Record.prototype._captureStream=function(stream){return this.stream=stream,this.recorder=RecordRTC(stream,{type:"audio"}),this.element.html(this.captureContainer),this._performRecord()},Record.prototype._performRecord=function(){return this.element.addClass("currently-recording"),this.recorder.clearRecordedData(),this.recorder.startRecording()},Record.prototype._reRecord=function(event){return event.stop(),this.element.html(this.captureContainer)},Record.prototype._startRecording=function(event){return event.stop(),null!=this.recorder?this._performRecord():navigator.mediaDevices.getUserMedia({audio:!0}).then(this._captureStream)["catch"](this._streamError)},Record.prototype._stopRecording=function(event){var _this=this;return event.stop(),this.element.removeClass("currently-recording"),this.recorder.stopRecording(function(audioUrl){return _this.element.html(_this.previewContainer),_this.element.find(".preview audio").attr("src",audioUrl),_this.recorder.getDataURL(function(dataUrl){return _this.dataField.val(dataUrl)})})},Record.prototype._streamError=function(error){var element;return console.log("stream error",error),element=$("<div>"),"PermissionDeniedError"===error.name?(element.html("It appears that you have denied access to the microphone. Please change your microphone settings if you wish to&nbsp;"),element.append($('<a class="try-again" href="#">').text("try again"))):(element.html("Another application appears to be using your microphone. Try quitting that application, then&nbsp;"),element.append($('<a class="try-again" href="#">').text("click here to try again"))),this.element.html(element)},Record}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Numbers.Recordings=function(){function Recordings(){this._updateRecordings=__bind(this._updateRecordings,this),this._toggleRecordCallsNotice=__bind(this._toggleRecordCallsNotice,this),this._submitQuery=__bind(this._submitQuery,this),this._stopPlayback=__bind(this._stopPlayback,this),this._search=__bind(this._search,this),this._playOrPause=__bind(this._playOrPause,this),this._loadNewPage=__bind(this._loadNewPage,this),this.assignElements(),this.observeElements()}return Recordings.prototype.assignElements=function(){return this.forms={recordCalls:$("form#toggle_call_recording"),search:$("form#search_recordings")},this.search={container:this.forms.search.find(".recordings__search"),input:this.forms.search.find("input#query")},this.timeframe={container:this.forms.search.find(".recordings__filter"),input:this.forms.search.find("input#timeframe"),applied:!1},this.list=$(".recordings__list")},Recordings.prototype.observeElements=function(){var _this=this;return this.forms.recordCalls.on("change","input:checkbox",function(){return _this.forms.recordCalls.submit()}),this.forms.recordCalls.on("ajax:success",this._toggleRecordCallsNotice),this.search.container.on("click",this._focus("search")),this.search.input.on("blur",this._blur("search")),this.search.input.on("keyup",this._submitQuery),this.timeframe.container.on("click",this._focus("timeframe")),this.timeframe.input.daterangepicker({parentEl:this.timeframe.container}),this.timeframe.input.on("hide.daterangepicker",this._blur("timeframe")),this.timeframe.input.on("apply.daterangepicker",function(){return _this.timeframe.applied=!0,_this._search()}),this.timeframe.input.val(""),this.forms.search.on("ajax:success",this._updateRecordings),this.list.on("click",".recording__controls",this._playOrPause),this._observeAudioPlayback(),this.list.on("click",".pagination a",this._loadNewPage)},Recordings.prototype._blur=function(type){var _this=this;return function(type){return function(){return _this[type].container.removeClass("is-expanded")}}(type)},Recordings.prototype._focus=function(type){var _this=this;return function(type){return function(){return $(event.target).closest(".daterangepicker").exists()?void 0:(_this[type].container.addClass("is-expanded"),_this[type].input.focus())}}(type)},Recordings.prototype._loadNewPage=function(event){var url,_this=this;return event.stop(),url=$(event.target).closest("a").attr("href"),$.ajax({url:url,type:"get",dataType:"json"}).done(function(data){return _this._updateRecordings(null,data)})},Recordings.prototype._observeAudioPlayback=function(){return this.list.find("audio").on("ended",this._stopPlayback)},Recordings.prototype._playOrPause=function(event){var a,audio,container,element,_i,_len,_ref;for(element=$(event.target),container=element.closest(".recordings__recording"),audio=container.find("audio")[0],this.list.find(".recordings__recording").removeClass("is-playing"),_ref=this.list.find("audio"),_i=0,_len=_ref.length;_len>_i;_i++)a=_ref[_i],a!==audio&&(a.pause(),a.currentTime=0);return audio.paused?(container.addClass("is-playing"),audio.play()):audio.pause()},Recordings.prototype._search=function(){return this.timeframe.applied||this.timeframe.input.val(""),this.forms.search.submit()},Recordings.prototype._stopPlayback=function(event){var audio,container;return audio=event.target,audio.currentTime=0,container=$(audio).closest(".recordings__recording"),container.removeClass("is-playing")},Recordings.prototype._submitQuery=function(event){return 13===event.keyCode?this._search():void 0},Recordings.prototype._toggleRecordCallsNotice=function(){var checkbox,notice;return checkbox=this.forms.recordCalls.find("input:checkbox"),notice=$(".recordings__legal-notice"),checkbox.is(":checked")?notice.show():notice.hide()},Recordings.prototype._updateRecordings=function(event,data){return this.list.find(".recordings__recordings-container").replaceWith(data.html),this._observeAudioPlayback()},Recordings}()}.call(this),function(){this.Offerbot={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Offerbot.Property=function(){function Property(element){this.element=element,this._viewProperty=__bind(this._viewProperty,this),this._preventDuplicates=__bind(this._preventDuplicates,this),this._changeAnchor=__bind(this._changeAnchor,this),this.assignElements(),this.observeElements()}return Property.prototype.assignElements=function(){return this.anchor=this.element.find("a.action-button"),this.saving=!1},Property.prototype.observeElements=function(){return"Save To Leads"===this.anchor.text()&&(this.anchor.data("message","Saving"),this.anchor.on("ajax:before",this._preventDuplicates),this.anchor.on("ajax:success",this._changeAnchor)),"View Saved Lead"===this.anchor.text()?this.anchor.on("click",this._viewProperty):void 0},Property.prototype._changeAnchor=function(event,data){var anchor;return anchor=$("<a>").addClass("action-button").attr({href:data.url}),anchor.text("View Saved Lead"),this.anchor.replaceWith(anchor),this.anchor=anchor,this.anchor.on("click",this._viewProperty),this.saving=!1},Property.prototype._preventDuplicates=function(event){return this.saving&&event.stop(),this.saving=!0},Property.prototype._viewProperty=function(event){return event.stop(),top.overlay.hide(),window.parent.pjax.loadUrl(this.anchor.attr("href"))},Property}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Offerbot.Show=function(){function Show(){this._toggleTriggers=__bind(this._toggleTriggers,this),this._toggleOffers=__bind(this._toggleOffers,this),this.assignElements(),this.observeElements()}return Show.prototype.assignElements=function(){return this.propertyContainer=$("section.properties"),new Offerbot.Show.More(this.propertyContainer),this.triggers={resume:$("a.resume-button"),pause:$("a.pause-button"),all:$(".status a.icon-button")},this.status=$(".status .current")},Show.prototype.observeElements=function(){return this.propertyContainer.on("click",this._toggleOffers),this.triggers.all.on("ajax:success",this._toggleTriggers)},Show.prototype._collapseOffers=function(element){var id,offers;return id=element.data("target"),offers=$('.property-offers[data-owner="'+id+'"]'),offers.hide(),element.removeClass("collapse")},Show.prototype._expandOffers=function(element){var id,offers;return id=element.data("target"),offers=$('.property-offers[data-owner="'+id+'"]'),offers.show(),element.addClass("collapse")},Show.prototype._toggleOffers=function(event){var element,expand,previousElement;return element=$(event.target),element.hasClass("expand")?(event.stop(),expand=!element.hasClass("collapse"),previousElement=$(".expand.collapse").first(),expand?(previousElement&&this._collapseOffers(previousElement),this._expandOffers(element)):this._collapseOffers(element)):void 0},Show.prototype._toggleTriggers=function(event,data){var status;return status=data.status,"paused"===status&&(this.triggers.resume.show(),this.triggers.pause.hide()),["active","running"].include(status)&&(this.triggers.resume.hide(),this.triggers.pause.show()),this.status.text("This campaign is "+status+".")},Show}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Offerbot.Show.More=function(){function More(propertyContainer){this.propertyContainer=propertyContainer,this._showMore=__bind(this._showMore,this),this._loadMore=__bind(this._loadMore,this),this.assignElements(),this.observeElements()}return More.prototype.assignElements=function(){return this.container=this.propertyContainer.find("table tbody"),this.trigger=this.propertyContainer.find("a.load"),this.overlay=window.overlay,this.currentPage=1,this.nextPage=parseInt(this.trigger.data("next-page"),10),this.perPage=parseInt(this.trigger.data("per-page"),10),this.total=parseInt(this.trigger.data("total"),10)},More.prototype.observeElements=function(){return this._propertyCount()<this.total?(this.trigger.on("click",this._loadMore),this.trigger.show()):this.trigger.hide()},More.prototype._loadMore=function(event){return event.stop(),$.ajax({url:""+window.location.href+".js",type:"get",data:{page:this.nextPage},dataType:"text html"}).done(this._showMore)},More.prototype._propertyCount=function(){return this.container.find(".property").length},More.prototype._showMore=function(html){return this.container.append(html),this.nextPage++,this._propertyCount()===this.total?this.trigger.hide():void 0},More}()}.call(this),function(){Offerbot.Wizard=function(stepNumber){var klass,klassName,suffix;return new Offerbot.Wizard.Form,suffix={1:"One",2:"Two",3:"Three",4:"Four"}[stepNumber],klassName=suffix?"Step"+suffix:"ErrorReview",klass=Offerbot.Wizard[klassName],new klass}}.call(this),function(){Offerbot.Wizard.ErrorReview=function(){function ErrorReview(){$("ul.staircase li.step").removeClass("active"),$(".wizard-navigation .return, .wizard-navigation .next").hide()}return ErrorReview}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Offerbot.Wizard.Form=function(){function Form(){this._submit=__bind(this._submit,this),this._goBack=__bind(this._goBack,this),this.element=$(".wizard-navigation").parents("form"),this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){var actionParts;return this.submissionTriggers=this.element.find(".wizard-navigation ul.staircase li a"),this.previousTrigger=this.element.find(".wizard-navigation .previous"),actionParts=this.element.attr("action").split("/"),actionParts.pop(),this.baseAction=actionParts.join("/")},Form.prototype.observeElements=function(){return this.submissionTriggers.on("click",this._submit),this.previousTrigger.on("click",this._goBack)},Form.prototype._goBack=function(event){var li;return event.stop(),li=this.element.find(".wizard-navigation ul.staircase li.active").prev(),li.exists()?this._submit({target:li.find("a")[0],stop:function(){}}):void 0},Form.prototype._submit=function(event){var step;return event.stop(),step=this._triggerMapping($.inArray(event.target,this.submissionTriggers.toArray())),this.element.attr("action",""+this.baseAction+"/"+step),this.element.submit()},Form.prototype._triggerMapping=function(index){return{0:"first",1:"second",2:"third",3:"fourth"}[index]},Form}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Offerbot.Wizard.StepFour=function(_super){function StepFour(){return this._saveActiveState=__bind(this._saveActiveState,this),this._populateEmailForm=__bind(this._populateEmailForm,this),this._addOfferbotVariables=__bind(this._addOfferbotVariables,this),_ref=StepFour.__super__.constructor.apply(this,arguments)}return __extends(StepFour,_super),StepFour.prototype.initialize=function(){return this.assignElements(),this.observeElements(),this._setActiveState(),$("#text_editor").val(this._activeFields().find(".body").val())},StepFour.prototype.assignElements=function(){return this.email={triggers:$("#sidebar ul li a"),fields:$("#email-fields .fields"),form:{element:$("#campaign_form"),submit:$("#content .actions .action-button"),to:$("#content .field.to"),from:$("#content .field.from select"),bcc:$("#content .field.bcc select"),subject:$("#content .field.subject input")}}},StepFour.prototype.observeElements=function(){var form,_this=this;return this.email.triggers.on("click",this._populateEmailForm),form=this.email.form,form.submit.hide(),form.to.hide(),form.element.on("submit",this._saveActiveState),form.from.on("change",this._saveActiveState),form.bcc.on("change",this._saveActiveState),form.subject.on("change",this._saveActiveState),setInterval(function(){var e;try{return _this._activeFields().find(".body").val(_this._getEmailContent()),_this._setActiveValidity()}catch(_error){e=_error}},1e3),this.on("offerbot:add-variables",this._addOfferbotVariables)},StepFour.prototype._activeFields=function(){var trigger;return trigger=this._activeTrigger(),this.email.fields.filter("#"+trigger.attr("id")+"_fields")},StepFour.prototype._activeOption=function(type){var select;return select=this.email.form[type][0],$(select.options[select.selectedIndex])},StepFour.prototype._activeTrigger=function(){return this.email.triggers.filter(".active").first()},StepFour.prototype._addOfferbotVariables=function(){var additions;return"object"==typeof xinha_keywords3?(delete xinha_keywords3[keywordsPropertyTitle],additions={},additions[keywordsPropertyTitle]="",additions["OfferBot Offer Price"]="{!property_offer_price}",additions["OfferBot Deposit"]="{!property_deposit}",additions["OfferBot Balance"]="{!property_balance}",window.xinha_keywords3=$.extend(additions,xinha_keywords3)):void 0},StepFour.prototype._getEmailContent=function(){return"test"===environment?$("#text_editor").val():this._hasXinha()?xinha_editors.text_editor.getHTML():void 0},StepFour.prototype._hasXinha=function(){return"test"===environment?!1:"undefined"!=typeof xinha_editors&&null!==xinha_editors&&xinha_editors.text_editor},StepFour.prototype._isActiveValid=function(){var body,fields,from,subject;return fields=this._activeFields(),from=fields.find(".from"),subject=fields.find(".subject"),body=fields.find(".body"),from.val().blank()?!1:subject.val().blank()?!1:body.val().blank()?!1:!0},StepFour.prototype._populateEmailForm=function(event){var anchor;return event.stop(),anchor=$(event.target),anchor.find("a").exists()&&(anchor=anchor.find("a")),this._saveActiveState(),this.email.triggers.removeClass("active"),anchor.addClass("active"),this._setActiveState()},StepFour.prototype._saveActiveState=function(){var bcc,body,fields,form,from,subject;if(!this.settingActiveState)return fields=this._activeFields(),from=fields.find(".from"),bcc=fields.find(".bcc"),subject=fields.find(".subject"),body=fields.find(".body"),form=this.email.form,from.val(this._activeOption("from").text()),form.bcc.val().blank()?bcc.val(""):bcc.val(this._activeOption("bcc").text()),subject.val(form.subject.val()),body.val(this._getEmailContent()),this._setActiveValidity()},StepFour.prototype._selectOption=function(type,value){var e,option,select,_i,_len,_ref1,_results;for(select=this.email.form[type],_ref1=select.find("option"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++){if(e=_ref1[_i],option=$(e),option.attr("value")===value||option.text()===value){e.selected=!0,select.change();break}_results.push(void 0)}return _results},StepFour.prototype._setActiveState=function(){var bcc,body,fields,form,from,subject;return this.settingActiveState=!0,fields=this._activeFields(),from=fields.find(".from"),bcc=fields.find(".bcc"),subject=fields.find(".subject"),body=fields.find(".body"),form=this.email.form,this._selectOption("from",from.val()),this._selectOption("bcc",bcc.val()),form.subject.val(subject.val()),this._setEmailContent(body.val()),this.settingActiveState=!1},StepFour.prototype._setActiveValidity=function(){return this._isActiveValid()?this._activeTrigger().addClass("valid"):this._activeTrigger().removeClass("valid")},StepFour.prototype._setEmailContent=function(value){return"test"===environment?$("#text_editor").val(value):this._hasXinha()?xinha_editors.text_editor.setHTML(value):void 0},StepFour}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Offerbot.Wizard.StepOne=function(_super){function StepOne(){return this._toggleSelections=__bind(this._toggleSelections,this),this._toggleProperties=__bind(this._toggleProperties,this),this._checkCheckbox=__bind(this._checkCheckbox,this),_ref=StepOne.__super__.constructor.apply(this,arguments)}return __extends(StepOne,_super),StepOne.prototype.initialize=function(){return this.importTrigger=$("a.import-trigger"),this.importTrigger.exists()?this.prepareForImport():this.observeElements()},StepOne.prototype.observeElements=function(){var section,_i,_len,_ref1,_results;for($(document).on("click","section.group .expand",this._toggleProperties),$(document).on("click","section.group input.selector:checkbox",this._toggleSelections),$(document).on("click","section.group input:checkbox:not(.selector)",this._checkCheckbox),_ref1=$("section.group"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)section=_ref1[_i],_results.push(this._conditionallyCheck($(section)));return _results},StepOne.prototype.prepareForImport=function(){return new Offerbot.Wizard.StepOne.PropertyStatus(this.importTrigger)},StepOne.prototype.stopAllObservations=function(){return $(document).off("click","section.group .expand",this._toggleProperties),$(document).off("click","section.group input.selector:checkbox",this._toggleSelections),$(document).off("click","section.group input:checkbox:not(.selector)",this._checkCheckbox)},StepOne.prototype._checkCheckbox=function(event){var checkbox;return checkbox=$(event.target),checkbox.is(":checkbox")||(checkbox=checkbox.find("input:checkbox")),checkbox.check(checkbox.is(":checked")),this._conditionallyCheck(checkbox.closest("section.group"))},StepOne.prototype._conditionallyCheck=function(section){return setTimeout(function(){var checkbox,propertiesContainer,unchecked;return checkbox=section.find("input.selector:checkbox"),propertiesContainer=section.find(".properties"),unchecked=propertiesContainer.find("input:checkbox:not(:checked)"),checkbox.check(0===unchecked.length)},10)},StepOne.prototype._toggleProperties=function(event){var expansionTrigger,propertiesContainer,section;return expansionTrigger=$(event.target),section=expansionTrigger.closest("section.group"),propertiesContainer=section.find(".properties"),expansionTrigger.hasClass("closed")?(propertiesContainer.show(),expansionTrigger.removeClass("closed").addClass("opened")):(propertiesContainer.hide(),expansionTrigger.addClass("closed").removeClass("opened"))},StepOne.prototype._toggleSelections=function(event){var checkbox,propertiesContainer,section;return checkbox=$(event.target),section=checkbox.closest("section.group"),propertiesContainer=section.find(".properties"),setTimeout(function(){return checkbox.is(":checked")?propertiesContainer.find("input:checkbox:not(:checked)").check(!0):propertiesContainer.find("input:checkbox:checked").check(!1)},0)},StepOne}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Offerbot.Wizard.StepOne.PropertyStatus=function(){function PropertyStatus(trigger){var _this=this;this.trigger=trigger,this._success=__bind(this._success,this),this.url=this.trigger.attr("property_status_url"),this.interval=setInterval(function(){return $.ajax({url:_this.url,type:"get"}).done(_this._success)},2e4)}return PropertyStatus.prototype._success=function(data){return"available"===data.status?(clearInterval(this.interval),pjax.reload()):void 0},PropertyStatus}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Offerbot.Wizard.StepThree=function(){function StepThree(){this._templateChange=__bind(this._templateChange,this),this._preview=__bind(this._preview,this),this.assignElements(),this.observeElements()}return StepThree.prototype.assignElements=function(){return this.select=$("#campaign_contract_template"),this.emptyTemplate=$(".template-empty"),this.previewButton=$(".preview-document-button"),this.variablePool=$("#variable-pool"),this.currentTemplate=null},StepThree.prototype.observeElements=function(){return this.select.on("change",this._templateChange),this.previewButton.on("click",this._preview),this._templateChange()},StepThree.prototype._preview=function(event){var newWindow,url;return this.currentTemplate||event.stop(),url=this.currentTemplate.data("preview-url"),newWindow=window.open(url),newWindow?event.stop():(this.previewButton.attr("href",url),this.previewButton.attr("target","_blank"))},StepThree.prototype._templateChange=function(){var column,e,field,value,variable,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2;for($(".template-fields").hide(),_ref=$(".field.custom"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],this.variablePool.append($(e));if(this.emptyTemplate.hide(),value=this.select.val(),!value||value.blank())return this.previewButton.hide(),this.emptyTemplate.show(),this.currentTemplate=null,void 0;for(this.currentTemplate=$('.template-fields[data-id="'+value+'"]'),_ref1=this.currentTemplate.find(".column"),_j=0,_len1=_ref1.length;_len1>_j;_j++)for(e=_ref1[_j],column=$(e),_ref2=column.data("variables"),_k=0,_len2=_ref2.length;_len2>_k;_k++)variable=_ref2[_k],field=$('.field.custom[data-value="'+variable+'"]'),field.exists()&&column.append(field);return this.currentTemplate.show(),this.previewButton.show()},StepThree}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Offerbot.Wizard.StepTwo=function(){function StepTwo(){this._followupChange=__bind(this._followupChange,this),this._acceptNumbers=__bind(this._acceptNumbers,this),this.assignElements(),this.observeElements(),this._followupChange()}return StepTwo.prototype.assignElements=function(){return this.offerPercentage=$("#campaign_offer_percentage"),this.deposit=$("#campaign_deposit"),this.followup={count:$("#campaign_followup_count"),details:$("#followup-details"),percent:$("#campaign_followup_percent")}},StepTwo.prototype.observeElements=function(){return this.offerPercentage.on("keydown",this._acceptNumbers),this.deposit.on("keydown",this._acceptNumbers),this.followup.percent.on("keydown",this._acceptNumbers),this.offerPercentage.on("keydown",this._enforceLimit(100)),this.followup.percent.on("keydown",this._enforceLimit(100)),this.followup.count.on("change",this._followupChange)},StepTwo.prototype._acceptNumbers=function(event){var acceptable,numbers;if(!event.metaKey&&!event.ctrlKey&&(numbers=[48,49,50,51,52,53,54,55,56,57,93,94,95,96,97,98,99,100,101,102,103,104,105],acceptable=[8,9,13,37,39,46].concat(numbers),!acceptable.include(event.keyCode)))return event.stop()},StepTwo.prototype._enforceLimit=function(limit){return function(event){var addition,current,value;return current=$(event.target).val(),addition=String.fromCharCode(event.keyCode),value=parseInt(current+addition,10),value>limit?event.stop():void 0}},StepTwo.prototype._followupChange=function(){return"0"===this.followup.count.val()?this.followup.details.hide():this.followup.details.show()},StepTwo}()}.call(this),function(){this.Optin=function(){function Optin(){}return Optin}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Optin.Disclaimer=function(){function Disclaimer(){this._toggleDisclaimer=__bind(this._toggleDisclaimer,this),this.assignElements(),this.observeElements()}return Disclaimer.prototype.assignElements=function(){return this.element=$(".optin-section"),this.disclaimer=this.element.find(".optin-disclaimer"),this.radioButtons=this.element.find('input[type="radio"]')},Disclaimer.prototype.observeElements=function(){return this.radioButtons.on("click",this._toggleDisclaimer)},Disclaimer.prototype._toggleDisclaimer=function(e){return this.disclaimer.hide(),"true"===$(e.target).val()?this.disclaimer.show():void 0},Disclaimer}()}.call(this),function(){module("OverlayEscapeHandling",{_addEscapeHandler:function(){var _this=this;if(!this.escapeHandler)return this.escapeHandler=function(event){return 27===event.keyCode?_this.hide(event):void 0},$(document).on("keyup",this.escapeHandler)},_removeEscapeHandler:function(){return this.escapeHandler?($(document).off("keyup",this.escapeHandler),this.escapeHandler=null):void 0}})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.Overlay=function(){function Overlay(element,options){this.options=null!=options?options:{},this.toggle=__bind(this.toggle,this),this.show=__bind(this.show,this),this.position=__bind(this.position,this),this.hide=__bind(this.hide,this),this.wrapper=$(element),this.wrapper.exists()||(this.wrapper=$(".overlay-wrapper")),this.window=this.wrapper.find(".overlay-window"),this.openTrigger=$(this.options.openTrigger),this.closeTrigger=this.window.find(".close-overlay"),Overlay.cache[this.wrapper.attr("id")]=this,this.registerObservers()}return Overlay.include(OverlayEscapeHandling),Overlay.prototype.find=function(selector){return this.wrapper.find(selector)},Overlay.prototype.hide=function(event){return this.wrapper.hide(),event&&event.preventDefault(),this._removeEscapeHandler(),this.options.onHide?this.options.onHide():void 0},Overlay.prototype.position=function(){var top;return top=Math.floor(($(window).height()-this.window.height())/2),this.window.css({top:""+top+"px"})},Overlay.prototype.registerObservers=function(){return this.closeTrigger.on("click",this.hide),this.registerTrigger(this.openTrigger),this.window.find("a.close").on("click",this.hide),$(window).on("resize",this.position)},Overlay.prototype.registerTrigger=function(trigger){return trigger?$(trigger).on("click",this.show):void 0},Overlay.prototype.show=function(event){return this.options.onShow&&this.options.onShow(),this.wrapper.show(),this.position(),event&&event.stop(),this._addEscapeHandler()},Overlay.prototype.toggle=function(event){return this.wrapper.is(":hidden")?this.show(event):this.hide(event)},Overlay}(),$.extend(Overlay,{cache:{},toggle:function(id){return this.cache[id]?this.cache[id].toggle():void 0},show:function(id){return this.cache[id]?this.cache[id].show():void 0},hide:function(id){return this.cache[id]?this.cache[id].hide():void 0},hideAll:function(){var id,_i,_len,_ref,_results;for(_ref=this.cache,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)id=_ref[_i],_results.push(this.hide(id));return _results}})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Overlay.Frame=function(){function Frame(triggerSelector){this.triggerSelector=triggerSelector,this.showLoader=__bind(this.showLoader,this),this.show=__bind(this.show,this),this.position=__bind(this.position,this),this.hide=__bind(this.hide,this),this.wrapper=$("#overlay-frame"),this.window=this.wrapper.find(".overlay-window"),this.frame=this.wrapper.find("iframe"),this.frameTemplate=this.frame.clone(),this.closeTrigger=this.window.find(".close-overlay"),this.defaultOptions={width:"600px"},this.customOptions={},this.src="",this.oldSrc="",this.registerObservers()
}return Frame.include(OverlayEscapeHandling),Frame.prototype.disableClose=function(){return this.closeTrigger.hide()},Frame.prototype.enableClose=function(){return this.closeTrigger.show()},Frame.prototype.on=function(eventName,handler){return this.frame.on(eventName,handler)},Frame.prototype.trigger=function(eventName,memo){return this.frame.trigger(eventName,memo)},Frame.prototype.getFrameHeight=function(){var element,height;return element=this.frame.contents().find("#overlay-frame-inner"),height=element.height(),height>this.customOptions.frame_max_height?this.customOptions.frame_max_height:height},Frame.prototype.getFrameURL=function(){return this.frame[0].contentDocument.location.href},Frame.prototype.hide=function(event){return event&&event.stop(),this.wrapper.hide(),this._removeEscapeHandler(),this.oldSrc=this.src},Frame.prototype.open=function(url){var event;return event={target:{href:url},findElement:function(){},stop:function(){}},this.showLoader(event)},Frame.prototype.position=function(){var offsetElement,top;return offsetElement=this.frame,this.window.hasClass("loading")&&(offsetElement=this.window),top=Math.floor(($(window).height()-offsetElement.height())/2),this.window.css({top:""+top+"px"})},Frame.prototype.refreshHeight=function(){var height,maxHeight;return height=this.getFrameHeight(),maxHeight=$(window).height()-30,height>=maxHeight&&(height=maxHeight),this.window.css({height:null}),this.frame.css({height:""+height+"px"}),this.position()},Frame.prototype.registerObservers=function(){return $(document).on("click",this.triggerSelector,this.showLoader),this.closeTrigger.on("click",this.hide),this.frame.on("load",this.show),$(window).on("resize",this.position)},Frame.prototype.registerTrigger=function(trigger){return trigger?$(trigger).on("click",this.showLoader):void 0},Frame.prototype.resetLoader=function(){return this.window.addClass("loading")},Frame.prototype.resetOptions=function(){var url;return url=this.getFrameURL(),this.window.removeClass("loading"),this.window.css(this.defaultOptions),this.customOptions[url]&&this.window.css(this.customOptions[url].style),this.customOptions.disableClose?this.disableClose():this.enableClose()},Frame.prototype.setOptions=function(options){return this.customOptions[this.getFrameURL()]=options},Frame.prototype.show=function(){var e;try{return this.src=this.frame.attr("src"),this.resetOptions(),this.refreshHeight(),this._addEscapeHandler()}catch(_error){e=_error}},Frame.prototype.showLoader=function(event){var href,newFrame,parts,target;return target=$(event.target).closest("a")[0]||event.target,newFrame=this.frameTemplate.clone(),this.frame.replaceWith(newFrame),this.frame=newFrame,this.frame.on("load",this.show),href=target.href,parts=href.split("?"),href+=2===parts.length?"&":"?",this.frame.attr("src",""+href+"overlay=frame"),this.resetLoader(),this.wrapper.show(),this.position(),event?event.stop():void 0},Frame}()}.call(this),function(){this.Phone={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Phone.Call=function(){function Call(options){return this._twilioReady=__bind(this._twilioReady,this),this._twilioOffline=__bind(this._twilioOffline,this),this._twilioError=__bind(this._twilioError,this),this._twilioDisconnect=__bind(this._twilioDisconnect,this),this._twilioConnect=__bind(this._twilioConnect,this),this._toggleKeypad=__bind(this._toggleKeypad,this),this._startCall=__bind(this._startCall,this),this._sendKeyPress=__bind(this._sendKeyPress,this),this._sendDigits=__bind(this._sendDigits,this),this._endCall=__bind(this._endCall,this),this._connected=__bind(this._connected,this),this._close=__bind(this._close,this),this.updateTimer=__bind(this.updateTimer,this),this.formatPhoneNumber=__bind(this.formatPhoneNumber,this),$.extend(this,options),this.assignElements(),this._isAvailable()?(this._fetchFromNumber(),this._loadTwilio(),this.observeElements(),this.phoneToInput.val()||this.phoneToInput.focus(),void 0):this._unavailable()}return Call.prototype.assignElements=function(){return this.element=$(".phone-call-modal"),this.activeCallElement=$(".phone-call"),this.modalClose=this.element.find(".modal-close"),this.controlsContainer=this.element.find(".phone-call-controls"),this.startCallButton=this.element.find(".start-call-button"),this.endCallButton=this.activeCallElement.find('[data-action="end-call"]'),this.showKeypadButton=this.activeCallElement.find('[data-action="show-keypad"]'),this.keypadButtons=this.activeCallElement.find(".phone-call__keypad .phone-call__button"),this.setupContainer=this.element.find(".phone-call-setup"),this.phoneToInput=this.element.find(".calling-to-input"),this.keypadContainer=this.activeCallElement.find(".phone-call__keypad"),this.statusContainer=this.activeCallElement.find(".phone-call__status"),this.statusMessage=this.activeCallElement.find(".status-message"),this.statusLoader=this.activeCallElement.find(".loader"),this.statusTimer=this.activeCallElement.find(".timer"),this.unavailableMessage=this.element.find(".phone-calling-unavailable"),this.allowTokenRenewal=!0},Call.prototype.observeElements=function(){return this.modalClose.on("click",this._close),this.startCallButton.on("click",this._startCall),this.endCallButton.on("click",this._endCall),this.phoneToInput.on("keyup",this.formatPhoneNumber),this.showKeypadButton.on("click",this._toggleKeypad),this.keypadButtons.on("click",this._sendDigits),this.activeCallElement.on("keyup",this._sendKeyPress)},Call.prototype.endTimer=function(){return delete this._timerStart,clearTimeout(this._timerInterval)},Call.prototype.formatPhoneNumber=function(event){var formatted,phone;if(8!==event.keyCode)return phone=this.phoneToInput.val().replace(/-/g,"").replace(/[^0-9]/g,""),formatted=phone.substr(0,3)+"-"+phone.substr(3,3)+"-"+phone.substr(6,4),formatted=formatted.replace(/-+$/,""),this.phoneToInput.val(formatted)},Call.prototype.formatTimer=function(total){var hours,minutes,seconds;return total=parseInt(total),hours=Math.floor(total/3600%24),minutes=Math.floor(total/60%60),hours>0&&(minutes=("00"+minutes).slice(-2)),seconds=("00"+Math.floor(total%60)).slice(-2),hours>0?hours+":"+minutes+":"+seconds:minutes+":"+seconds},Call.prototype.updateTimer=function(){var timeElapsed;return null==this._timerStart&&(this._timerStart=(new Date).getTime()),timeElapsed=Math.floor(((new Date).getTime()-this._timerStart)/1e3),this.statusTimer.text(this.formatTimer(timeElapsed)),this._timerInterval=setTimeout(this.updateTimer,1e3)},Call.prototype._close=function(){var _this=this;return this.endTimer(),this.element.remove(),this.activeCallElement.addClass("is-hidden"),setTimeout(function(){return _this.activeCallElement.remove()},1e3)},Call.prototype._connected=function(){return this.statusLoader.hide(),this.statusTimer.show(),this.updateTimer(),this.statusMessage.text("Connected"),this.statusMessage.addClass("connected")},Call.prototype._endCall=function(){return Twilio.Device.disconnectAll(),this.twilioConnection=null,this.endTimer()},Call.prototype._fetchFromNumber=function(){var select,_this=this;return select=$('select[name*="[lead_campaign_id]"]'),select.exists()&&!select.val().blank()?$.ajax({url:this.campaignNumberUrl,type:"get",data:{id:select.val()},message:"no-message"}).done(function(data){var from;return from=_this.element.find("#calling_from"),from.val(data.number).change()}):void 0},Call.prototype._isAvailable=function(){return"test"===environment?!0:navigator.mediaDevices},Call.prototype._loadTwilio=function(){var script,_this=this;return"undefined"!=typeof Twilio&&null!==Twilio?this._setupTwilio():(script=$("<script>"),script.attr("type","text/javascript"),script.attr("src","//media.twiliocdn.com/sdk/js/client/v1.4/twilio.min.js"),$("body").append(script),this.twilioSetupInterval=setInterval(function(){return"undefined"!=typeof Twilio&&null!==Twilio?(clearInterval(_this.twilioSetupInterval),_this._setupTwilio()):void 0},100))},Call.prototype._sendDigits=function(event){var digit;if(this.twilioConnection)return digit=$(event.target).closest(".phone-call__button").data("digit"),this.twilioConnection.sendDigits(""+digit)},Call.prototype._sendKeyPress=function(event){var button,key;return key=event.key.toLowerCase(),button=this.keypadButtons.filter("[data-matches*='"+key+"']"),button.exists()?this.twilioConnection.sendDigits(""+button.data("digit")):void 0},Call.prototype._setupTwilio=function(){return null==Twilio.Device.instance&&Twilio.Device.setup(this.capabilityToken,{debug:"development"===environment}),Twilio.Device.connect(this._twilioConnect),Twilio.Device.disconnect(this._twilioDisconnect),Twilio.Device.offline(this._twilioOffline),Twilio.Device.error(this._twilioError),Twilio.Device.ready(this._twilioReady)},Call.prototype._startCall=function(){var from,to;return from=this.element.find("#calling_from").val(),to=this.element.find("#calling_to").val(),from.blank()||to.blank()?void 0:(this.element.hide(),this.activeCallElement.removeClass("is-hidden"),this.fromNumber=from,this.toNumber=to,this.twilioConnection=Twilio.Device.connect({from:this.fromNumber,to:this.toNumber,user_id:currentUserId,object_type:this.objectType,object_id:this.objectId}))},Call.prototype._toggleKeypad=function(){return this.keypadContainer.toggleClass("is-hidden"),this.keypadContainer.is(".is-hidden")?this.activeCallElement.blur():this.activeCallElement.focus()},Call.prototype._twilioConnect=function(){return this._connected()},Call.prototype._twilioDisconnect=function(){return this._close()},Call.prototype._twilioError=function(error){return console.log("error:",error)},Call.prototype._twilioOffline=function(){var _this=this;if(this.allowTokenRenewal)return this.allowTokenRenewal=!1,setTimeout(function(){return _this.allowTokenRenewal=!0},3e6),$.ajax({url:this.renewTokenUrl,type:"get"}).done(function(data){return _this.capabilityToken=data.token,Twilio.Device.setup(_this.capabilityToken)})},Call.prototype._twilioReady=function(){return this.startCallButton.enable()},Call.prototype._unavailable=function(){return this.setupContainer.hide(),this.controlsContainer.hide(),this.statusContainer.hide(),this.unavailableMessage.show()},Call}()}.call(this),function(){var phoneHelper,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Phone.Helper=function(){function Helper(url){this.url=url,this._openModal=__bind(this._openModal,this),$(document).on("click","a.phone-call-link",this._openModal)}return Helper.prototype.linkTo=function(number,options){var content,name,value;content="<a href='#' class='phone-call-link'";for(name in options)value=options[name],content+=" data-"+name+"='"+value+"'";return content+=">"+number+"</a>"},Helper.prototype._openModal=function(event){var data,link;return event.stop(),link=$(event.currentTarget),data=link.data(),top.modal.open(this.url,data)},Helper}(),phoneHelper=new Phone.Helper("/phone/call"),this.phoneCallTo=function(number,options){return phoneHelper.linkTo(number,options)}}.call(this),function(){this.Projects={}}.call(this),function(){this.Properties={}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Properties.Financials=function(_super){function Financials(){return this._success=__bind(this._success,this),this._save=__bind(this._save,this),this._keyup=__bind(this._keyup,this),_ref=Financials.__super__.constructor.apply(this,arguments)}return __extends(Financials,_super),Financials.prototype.initialize=function(categoryTemplate){return this.categoryTemplate=categoryTemplate,this.assignElements(),this.observeElements()},Financials.prototype.assignElements=function(){var overlay;return this.form=$("#"+this.namespace+"-form"),overlay=Overlay.cache[""+this.namespace+"-category"],this.overlay={object:overlay,window:overlay.window,input:overlay.window.find("input:text"),actionName:"_addCategory"}},Financials.prototype.observeElements=function(){return this.form.on("click",".edit-button",this._edit),this.form.on("click",".cancel-button",this._cancelEdit),this.form.on("click",".save-button",this._save),this.form.on("keyup","input:text",this._keyup),this.form.on("ajax:success",this._success),this._observeOverlay(this.overlay)},Financials.prototype._afterReplace=function(){},Financials.prototype._beforeReplace=function(){},Financials.prototype._addCategory=function(overlay){var _this=this;return function(event){var category,name;return event.stop(),name=overlay.input.val(),name.blank()?overlay.input.focus():(category=_this.categoryTemplate.evaluate({category:name}),_this.form.find(_this.containerSelector).append(category),_this.form.submit(),overlay.object.hide(),overlay.input.val(""))}},Financials.prototype._keyup=function(event){return 27===event.keyCode?this._cancelEdit(event):13===event.keyCode?this._save(event):void 0},Financials.prototype._observeOverlay=function(overlay){return overlay.object.options.onShow=this._overlayShow(overlay),overlay.window.find("input:text").on("keyup",this._overlayKeyup(overlay)),overlay.window.find(".cancel-button").on("click",overlay.object.hide),overlay.window.find(".commit-button").on("click",this[overlay.actionName](overlay))},Financials.prototype._overlayShow=function(overlay){return function(){return setTimeout(function(){return overlay.input.focus()},10)}},Financials.prototype._overlayKeyup=function(overlay){var _this=this;return function(event){return 13===event.keyCode?_this[overlay.actionName](overlay)(event):27===event.keyCode?(overlay.object.hide(event),overlay.input.val("")):void 0}},Financials.prototype._resetVisibleTextFields=function(){return this.form.find(".on-display:hidden").show(),this.form.find(".on-edit:visible").hide(),this.form.reset()},Financials.prototype._save=function(event){return event.stop(),this.form.submit()},Financials.prototype._success=function(event,data){return this.form.is(event.target)?(this._beforeReplace(),this.form.find("."+this.namespace+"-wrapper").html(data),this.overlay.object.registerTrigger(this.form.find("a.open-overlay")),this._afterReplace()):void 0},Financials}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Projects.Budget=function(_super){function Budget(){return this._toggleCategory=__bind(this._toggleCategory,this),this._showPrintOverlay=__bind(this._showPrintOverlay,this),this._removeNewItem=__bind(this._removeNewItem,this),this._remove=__bind(this._remove,this),this._payInFull=__bind(this._payInFull,this),this._getPrintoutOption=__bind(this._getPrintoutOption,this),this._edit=__bind(this._edit,this),this._captureCustomDropdownOptions=__bind(this._captureCustomDropdownOptions,this),this._cancelEdit=__bind(this._cancelEdit,this),this._addBudgetItem=__bind(this._addBudgetItem,this),_ref=Budget.__super__.constructor.apply(this,arguments)}return __extends(Budget,_super),Budget.prototype.namespace="budget",Budget.prototype.containerSelector=".budget-categories",Budget.prototype.categorySelector=".budget-category",Budget.prototype.itemSelector=".budget-item",Budget.prototype.displaySelector=".budget-item",Budget.prototype.initialize=function(categoryTemplate,itemTemplate){return this.categoryTemplate=categoryTemplate,this.itemTemplate=itemTemplate,Budget.__super__.initialize.call(this,this.categoryTemplate),this.budgetId=$(".budget-view").data("id"),this._readCookie()},Budget.prototype.observeElements=function(){var _this=this;return Budget.__super__.observeElements.call(this),this.form.sortable({items:this.categorySelector,containment:this.containerSelector,handle:".handle",update:function(){return _this.form.submit()}}),this.form.on("click",".collapse-expand-button",this._toggleCategory),this.form.on("click",".add-budget-item",this._addBudgetItem),this.form.on("click",".budget-item.template .cancel-button",this._removeNewItem),this.form.on("click",".remove-button",this._remove),this.form.on("click","input:checkbox",this._payInFull),this.on("custom-dropdown:updated",this._captureCustomDropdownOptions),this._setupPrintOverlay()},Budget.prototype._addBudgetItem=function(event){var category,marker,newItem,target;return event.stop(),this.form.find(".budget-item.template").exists()?void 0:(this._resetVisibleTextFields(),target=$(event.target),category=target.closest(".budget-category"),marker=target.closest(".budget-payment-options"),newItem=$(this.itemTemplate.evaluate({categoryId:category.data("id")})),this._alterCustomDropdownSelects(newItem),marker.before(newItem),$.uniform(),newItem.find("input:text").first().focus())},Budget.prototype._alterCustomDropdownSelects=function(newItem){return this.itemTypeOptions&&CustomDropdown.alterSelect(newItem.find("select.edit-item-type"),this.itemTypeOptions),this.itemMethodOptions?CustomDropdown.alterSelect(newItem.find("select.edit-item-method"),this.itemMethodOptions):void 0},Budget.prototype._afterReplace=function(){return this._readCookie(),$.uniform()},Budget.prototype._beforeReplace=function(){var c,element,field,input,_i,_len,_ref1;for(_ref1=this.form.find(this.categorySelector),_i=0,_len=_ref1.length;_len>_i;_i++)c=_ref1[_i],element=$(c),input=element.find(".summary .on-edit .column.c-name input:text"),field=element.find(".summary .on-display .column.c-name"),field.text(input.val());return this.paidCheckbox&&this.paidCheckbox.closest(this.categorySelector).addClass("is-collapsed"),this.paidCheckbox=null,this._writeCookie()},Budget.prototype._cancelEdit=function(event){var element,target;return event.stop(),target=$(event.target),element=target.closest(this.displaySelector),element.exists()||(element=target.closest(".summary")),element.find(".on-display").show(),element.find(".on-edit").hide(),this.form.reset()},Budget.prototype._captureCustomDropdownOptions=function(event,data){return"project_budget_item_type"===data.name&&(this.itemTypeOptions=data.options),"project_budget_item_method"===data.name?this.itemMethodOptions=data.options:void 0},Budget.prototype._cookieKey=function(){return"budget-"+this.budgetId+"-expanded-categories"},Budget.prototype._edit=function(event){var element,target;return event.stop(),this._resetVisibleTextFields(),target=$(event.target),element=target.closest(this.displaySelector),element.exists()||(element=target.closest(".summary")),element.find(".on-display").hide(),element.find(".on-edit").show().find("input:text").first().focus()},Budget.prototype._getPrintoutOption=function(event){var href,selected,target;return target=$(event.target),selected=this.prinoutOptions.filter(":checked"),href=target.attr("href"),target.attr("href",href.split("?")[0]+("?printout="+selected.val())),this.printOverlay.hide()},Budget.prototype._payInFull=function(event){var target;return target=$(event.target),target.is(":checked")&&(this.paidCheckbox=target),this.form.submit()},Budget.prototype._readCookie=function(){var c,cookieData,element,names,_i,_len,_ref1,_results;for(cookieData=cookie(this._cookieKey(),"[]"),names=JSON.parse(cookieData),_ref1=this.form.find(this.categorySelector),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)c=_ref1[_i],element=$(c),names.include(element.find(".summary .on-display .column.c-name").text())?_results.push(element.removeClass("is-collapsed")):_results.push(void 0);return _results},Budget.prototype._remove=function(event){var element,target;return event.stop(),target=$(event.target),element=target.closest(this.itemSelector),element.exists()||(element=target.closest(this.categorySelector)),element.remove(),this.form.submit()},Budget.prototype._removeNewItem=function(event){return event.stop(),$(event.target).closest(".budget-item.template").remove()},Budget.prototype._setupPrintOverlay=function(){return this.printOverlay=Overlay.cache["budget-printout-options"],this.printButton=this.form.find(".print-button"),this.printoutButton=this.printOverlay.wrapper.find(".printout-button"),this.prinoutOptions=this.printOverlay.wrapper.find("input"),this.printButton.on("click",this._showPrintOverlay),this.printoutButton.on("click",this._getPrintoutOption)},Budget.prototype._showPrintOverlay=function(event){return event.stop(),this.printOverlay.show()},Budget.prototype._toggleCategory=function(event){var category;return category=$(event.target).closest(this.categorySelector),category.toggleClass("is-collapsed"),this._writeCookie()},Budget.prototype._writeCookie=function(){var c,names,_i,_len,_ref1;for(names=[],_ref1=this.form.find(this.categorySelector).not(".is-collapsed"),_i=0,_len=_ref1.length;_len>_i;_i++)c=_ref1[_i],names.push($(c).find(".summary .on-display .column.c-name").text());return cookie.set(this._cookieKey(),JSON.stringify(names),{path:"/"})},Budget}(Properties.Financials)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Projects.EmailToApp=function(){function EmailToApp(){this._showOverlay=__bind(this._showOverlay,this),this.assignElements(),this.observeElements()}return EmailToApp.prototype.assignElements=function(){return this.button=$(".email-to-app-button"),this.overlay=Overlay.cache["email-to-project"],this.clipboard=$("#email-to-project [data-clipboard-text], .email-to-app-notice [data-clipboard-text]")},EmailToApp.prototype.observeElements=function(){return this.button.on("click",this._showOverlay),this._setupClipboard()},EmailToApp.prototype._setupClipboard=function(){return this.overlay?$("#global-zeroclipboard-html-bridge").css({position:"fixed"}):void 0},EmailToApp.prototype._showOverlay=function(event){return event.preventDefault(),this.overlay.show()},EmailToApp}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Projects.Manager=function(_super){function Manager(){return this._toggleSequence=__bind(this._toggleSequence,this),this._toggleReminderText=__bind(this._toggleReminderText,this),this._toggleReminderComplete=__bind(this._toggleReminderComplete,this),this._submitReminderForm=__bind(this._submitReminderForm,this),this._showReminderOverlay=__bind(this._showReminderOverlay,this),this._noteCurrentReminder=__bind(this._noteCurrentReminder,this),this._openSequenceOverlay=__bind(this._openSequenceOverlay,this),this._modifyTaskAnchor=__bind(this._modifyTaskAnchor,this),this._completeSequence=__bind(this._completeSequence,this),this._addReminder=__bind(this._addReminder,this),_ref=Manager.__super__.constructor.apply(this,arguments)}return __extends(Manager,_super),Manager.prototype.initialize=function(readOnly){return this.readOnly=null!=readOnly?readOnly:!1,this.assignElements(),this.observeElements()},Manager.prototype.assignElements=function(){return this.sequences=$(".section.sequence"),this.addReminderButtons=this.sequences.find(".add-reminder-button"),this.overlay=Overlay.cache["complete-sequence-modal"],this.reminderOverlay=Overlay.cache["add-reminder-modal"]},Manager.prototype.observeElements=function(){var selector,_i,_len,_ref1;if(this.sequences.on("click",".sequence-item > .title, .status-check",this._toggleSequence),this.sequences.on("click",".sequence-task .collapse-trigger, .sequence-task .expand-trigger",this._toggleReminderText),!this.readOnly){for(this.sequences.on("ajax:success","a.status",this._toggleReminderComplete),this.sequences.on("click","a.complete-button",this._openSequenceOverlay),_ref1=["mark-complete","move"],_i=0,_len=_ref1.length;_len>_i;_i++)selector=_ref1[_i],this.overlay.window.on("ajax:success","a."+selector+"-button",this._completeSequence),this.overlay.window.on("ajax:send","a."+selector+"-button",this.overlay.hide);return this.sequences.on("click",".task-action",this._noteCurrentReminder),this.on("task:created",this._modifyTaskAnchor),this.on("task:deleted",this._modifyTaskAnchor),this.sequences.on("click",".add-reminder-button",this._showReminderOverlay),this.reminderOverlay.find(".cancel-button").on("click",this.reminderOverlay.hide),this.reminderOverlay.find(".submit-button").on("click",this._submitReminderForm),this.reminderOverlay.find("form").on("ajax:success",this._addReminder)}},Manager.prototype._addReminder=function(event,html){return this.reminderOverlay.hide(),this.reminderOverlay.find("form").reset(),this.sequences.html(html)},Manager.prototype._completeSequence=function(event,html){return this.sequences.html(html),$(document.body).animate({scrollTop:this.sequences.find(".sequence-item.is-active").offset().top-10})},Manager.prototype._modifyTaskAnchor=function(event,data){var anchor,tooltip,url;return anchor=this.currentReminder.find(".description a.task-action"),tooltip=anchor.find(".tooltip span"),url=anchor.data("new-task-url"),"task:deleted"===event.type&&(tooltip.text("Create Task"),anchor.attr("href",url)),"task:created"===event.type?(tooltip.text("View Task"),anchor.attr("href",url.replace("/new","/"+data.id+"/edit"))):void 0},Manager.prototype._openSequenceOverlay=function(event){var button,incompleteReminders,selector,sequence,_i,_len,_ref1;for(event.stop(),sequence=$(event.target).closest(".sequence-item"),incompleteReminders=sequence.find(".is-incomplete").length,this.overlay.window.find(".unfinished").text(incompleteReminders),_ref1=["mark-complete","move"],_i=0,_len=_ref1.length;_len>_i;_i++)selector=_ref1[_i],button=this.overlay.window.find("a."+selector+"-button"),button.attr("href",button.data("url").evaluate({id:sequence.data("id")}));return this.overlay.show()},Manager.prototype._noteCurrentReminder=function(event){return this.currentReminder=$(event.target).closest(".sequence-task")},Manager.prototype._showReminderOverlay=function(event){var form,target;return event.stop(),target=$(event.target),form=this.reminderOverlay.find("form"),form.find("input:hidden[name=id]").val(target.data("sequence-id")),this.reminderOverlay.show()},Manager.prototype._submitReminderForm=function(event){return event.stop(),this.reminderOverlay.find("form").submit()},Manager.prototype._toggleReminderComplete=function(event,data){var reminder;return null==data.status?this._completeSequence(event,data):(reminder=$(event.target).closest(".sequence-task"),data.status&&(reminder.removeClass("is-incomplete is-complete"),reminder.addClass("is-"+data.status),"complete"===data.status&&reminder.removeClass("is-expanded")),null!=data.percent?this._updatePercentComplete(data.percent):void 0)},Manager.prototype._toggleReminderText=function(event){return event.stop(),$(event.target).closest(".sequence-task").toggleClass("is-expanded")},Manager.prototype._toggleSequence=function(event){var className,sequence;return event.stop(),sequence=$(event.target).closest(".sequence-item"),className="is-open",this.sequences.find(".sequence-item").not(sequence).removeClass(className),sequence.toggleClass(className)},Manager.prototype._updatePercentComplete=function(percent){return this.sequences.find(".summary-bar .percent").text(""+percent+"% complete")},Manager}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Projects.Sharing=function(){function Sharing(url,itemTemplate){this.url=url,this.itemTemplate=itemTemplate,this._showNewRecord=__bind(this._showNewRecord,this),this._selectNewRecord=__bind(this._selectNewRecord,this),this._select=__bind(this._select,this),this._search=__bind(this._search,this),this._reloadPage=__bind(this._reloadPage,this),this._prepareResults=__bind(this._prepareResults,this),this._clearSearch=__bind(this._clearSearch,this),this._autocompleteItem=__bind(this._autocompleteItem,this),this.assignElements(),this.observeElements()}return Sharing.prototype.assignElements=function(){var e;return this.element=$(".sharing-invite"),this.form={wrapper:this.element.find(".sharing-invite-form"),element:this.element.find("form")},this.search={element:this.element.find(".sharing-invite-search"),input:this.element.find(".search-field input"),results:this.element.find(".search-results")},e=this.element.find(".new-record"),this.newRecord={element:e,name:e.find("input:text[name=name]"),email:e.find("input:text[name=email]"),createButton:e.find(".action-button"),button:this.element.find(".new-record-button")}},Sharing.prototype.observeElements=function(){return this.search.input.on("keyup",this._showNewRecord),this.search.input.autocomplete({source:this.url,appendTo:this.search.results.find(".menu"),minLength:3,delay:500,search:this._search,response:this._prepareResults,select:this._select}),this.search.input.data("ui-autocomplete")._renderItem=this._autocompleteItem,this.form.element.on("ajax:success",this._reloadPage),this.newRecord.createButton.on("click",this._selectNewRecord),this.newRecord.button.on("click",this._clearSearch)},Sharing.prototype._autocompleteItem=function(menu,item){return $(this.itemTemplate.evaluate(item.value)).appendTo(menu)},Sharing.prototype._clearSearch=function(){return this.search.input.val(""),this.newRecord.element.show(),this.search.results.hide()},Sharing.prototype._prepareResults=function(){return this.search.results.removeClass("is-searching")},Sharing.prototype._reloadPage=function(){return modal.close(),this.form.element.data("reload")?pjax.reload():void 0},Sharing.prototype._search=function(){return this.newRecord.element.hide(),this.search.results.show().addClass("is-searching")},Sharing.prototype._select=function(event,ui){return event.stop(),this.form.element.find("input:hidden[name*=contact_id]").val(ui.item.value.id),this.form.element.find("input:text[name*=password]").val(ui.item.value.password),this.form.element.find("input:submit").val("Invite "+ui.item.label),this.search.element.hide(),this.form.wrapper.show()},Sharing.prototype._selectNewRecord=function(event){var email,message,name;return event.stop(),name=this.newRecord.name.val(),email=this.newRecord.email.val(),message=Message.create(),name.blank()?message.flash("Name can't be blank","error"):email.blank()?message.flash("Email can't be blank","error"):(this.form.element.find("input:hidden[name*=name]").val(name),this.form.element.find("input:hidden[name*=email]").val(email),this.form.element.find("input:submit").val("Invite "+name),this.search.element.hide(),this.newRecord.element.hide(),this.form.wrapper.show())},Sharing.prototype._showNewRecord=function(){return""===this.search.input.val()?(this.newRecord.element.show(),this.search.results.hide()):void 0},Sharing}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Properties.BuyerMatches=function(_super){function BuyerMatches(){return this._updateMatches=__bind(this._updateMatches,this),this._showNewBuyers=__bind(this._showNewBuyers,this),this._showBuyer=__bind(this._showBuyer,this),this._sendBroadcast=__bind(this._sendBroadcast,this),this._loadMore=__bind(this._loadMore,this),_ref=BuyerMatches.__super__.constructor.apply(this,arguments)}return __extends(BuyerMatches,_super),BuyerMatches.prototype.initialize=function(container){return this.container=container,this.assignElements(),this.observeElements(),this._determineVisibility()},BuyerMatches.prototype.assignElements=function(){var maxPages;return this.url=window.location.href,this.message=Message.create(),this.table=this.container.find("table.buyer-matching tbody"),this.emptyMessage=this.container.find(".buyer-matches-empty"),this.sendBroadcastTrigger=this.container.find("a.send-broadcast"),this.noSubscribersMessage=this.container.find(".no-subscribed"),this.loading=!1,this.loadMore={trigger:this.container.find(".load-more"),total:this.container.find(".load-more .total"),label:this.container.find(".load-more .label")},maxPages=parseInt(this.loadMore.trigger.data("pages"),10),1===maxPages&&this.loadMore.label.html("&nbsp;"),this.filters=new Properties.BuyerMatches.Filters(this.container.find(".filters"))
},BuyerMatches.prototype.observeElements=function(){return this.loadMore.trigger.on("click",this._loadMore),this.sendBroadcastTrigger.on("click",this._sendBroadcast),this.table.on("click",this._showBuyer),this.on("matches:updated",this._updateMatches)},BuyerMatches.prototype._determineVisibility=function(){var table;return table=this.table.parents("table"),this.table.find("tr").exists()?(this.emptyMessage.hide(),table.show(),this.sendBroadcastTrigger.show(),this.noSubscribersMessage.hide(),0===this.sendBroadcastTrigger.data("count")?(this.sendBroadcastTrigger.hide(),this.noSubscribersMessage.show()):void 0):(this.emptyMessage.show(),table.hide(),this.sendBroadcastTrigger.hide(),this.noSubscribersMessage.hide())},BuyerMatches.prototype._loadMore=function(event){return event.stop(),this.loading?void 0:(this.loading=!0,$.ajax({url:this.url,type:"get",data:{page:this.loadMore.trigger.data("page")}}).done(this._showNewBuyers))},BuyerMatches.prototype._sendBroadcast=function(event){var count,message;return count=parseInt(this.sendBroadcastTrigger.data("count"),10),0===count?(event.stop(),message="None of the matching "+app_t("buyer_object").toLowerCase().pluralize()+" are subscribed to an autoresponder, so a broadcast cannot be sent to any of them.",this.message.flash(message,"error")):void 0},BuyerMatches.prototype._showBuyer=function(event){var tr;return event.stop(),tr=$(event.target).parents("tr"),window.open(tr.data("url"))},BuyerMatches.prototype._showNewBuyers=function(html){var maxPages,page;return this.table.append(html),page=parseInt(this.loadMore.trigger.data("page"),10),maxPages=parseInt(this.loadMore.trigger.data("pages"),10),page>=maxPages?this.loadMore.label.html("&nbsp;"):(this.loadMore.label.text("Load More"),this.loadMore.trigger.data("page",page+1)),this.loading=!1},BuyerMatches.prototype._updateMatches=function(event,data){var count,text;return this.table.html(""),this.loadMore.trigger.data("pages",data.total_pages),this.loadMore.trigger.data("page",1),count=data.total,text=""+count+" match",1!==count&&(text+="es"),this.loadMore.total.text(text),count=data.subscribed_count,this.sendBroadcastTrigger.data("count",count),this.sendBroadcastTrigger.text("Send Broadcast to "+count+" Subscribed "+app_t("buyer_object")+(1===count?"":"s")),this._showNewBuyers(data.html),this._determineVisibility()},BuyerMatches}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Properties.BuyerMatches.Filters=function(_super){function Filters(){return this._toggleApplyTrigger=__bind(this._toggleApplyTrigger,this),this._success=__bind(this._success,this),this._submit=__bind(this._submit,this),_ref=Filters.__super__.constructor.apply(this,arguments)}return __extends(Filters,_super),Filters.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements(),this._assignFilters()},Filters.prototype.assignElements=function(){return this.form=this.element.find("form"),this.checkboxes=this.form.find("input:checkbox"),this.applyTrigger=this.form.find("li.apply"),this.list=this.element.find("ul"),this.updateUrl=this.form.attr("action")},Filters.prototype.observeElements=function(){return this.checkboxes.on("change",this._toggleApplyTrigger),this.applyTrigger.on("click",this._submit)},Filters.prototype._assignFilters=function(){return this.filters=this._currentFilters()},Filters.prototype._currentFilters=function(){return this.checkboxes.toArray().map(function(c){return""+c.checked}).join("")},Filters.prototype._submit=function(event){return event.stop(),this.list.hide(),$.ajax({url:this.updateUrl,type:"post",data:this.form.serialize()}).done(this._success)},Filters.prototype._success=function(data){return this._assignFilters(),this.applyTrigger.hide(),this.list.css({display:""}),this.trigger("matches:updated",data)},Filters.prototype._toggleApplyTrigger=function(){return this._currentFilters()===this.filters?this.applyTrigger.hide():this.applyTrigger.show()},Filters}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Properties.Confirmation=function(){function Confirmation(url){this.url=url,this._hideOverlay=__bind(this._hideOverlay,this),this.assignElements(),this.observeElements(),this._autoConfirmFromCookies()}return Confirmation.prototype.assignElements=function(){return this.overlay=Overlay.cache["confirm-eligibility"],this.element=this.overlay.wrapper,this.form=this.element.find("form"),this.checkbox=this.form.find("input:checkbox"),this.cancel=this.form.find(".cancel-button")},Confirmation.prototype.observeElements=function(){var _this=this;return this.form.on("ajax:success",function(){return _this.overlay.hide()}),this.cancel.on("click",this._hideOverlay)},Confirmation.prototype._autoConfirmFromCookies=function(){var cookieData;return cookieData=JSON.parse($.cookie("confirmed-properties"))||{},cookieData[this.checkbox.data("id")]?(this.checkbox.not(":checked")&&this.checkbox.click(),this.form.submit()):void 0},Confirmation.prototype._hideOverlay=function(event){return event.stop(),this.overlay.hide(),pjax.loadUrl(this.url)},Confirmation}()}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Properties.Details=function(_super){function Details(){return _ref=Details.__super__.constructor.apply(this,arguments)}return __extends(Details,_super),Details.prototype.assignHelpers=function(){return this.message=Message.create(),this.sidebar=new Details.Sidebar(this,this.container.find("#sidebar"),this.name),this.permissions=new Details.Permissions(this,this.container.find(".details__permissions")),this.map=new Properties.Details.Map(this,$(".details-map-container").first()),this.photos&&(this.photos=new Details.Photos(this),this.sidebarOnly=!0),this.sidebarOnly?void 0:(this.actionbar=new Details.Actionbar(this,this.container.find("#actionbar")),this.form=new Properties.Details.Form(this,this.container.find("#property-form")),this.contacts=new Details.Associations(this,"contact"),this.buyers=new Details.Associations(this,"buyer"),this.properties=new Details.Associations(this,"property"),new Properties.Details.Convert(this.form.element),new CustomFields.Conditions(this.form))},Details}(Details)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Properties.Details.Convert=function(){function Convert(form){var trigger,_i,_len,_ref;for(_ref=$("#additional-actions a[data-convert-to]"),_i=0,_len=_ref.length;_len>_i;_i++)trigger=_ref[_i],new Properties.Details.Conversion(form,$(trigger))}return Convert}(),Properties.Details.Conversion=function(_super){function Conversion(form,trigger){this.form=form,this.trigger=trigger,this._triggerConversion=__bind(this._triggerConversion,this),this._trackStatus=__bind(this._trackStatus,this),this._redirect=__bind(this._redirect,this),this._prepareProjectConversionForm=__bind(this._prepareProjectConversionForm,this),this._openOverlay=__bind(this._openOverlay,this),this._closeOverlay=__bind(this._closeOverlay,this),this._checkStatus=__bind(this._checkStatus,this),this.assignElements(),this.observeElements()}return __extends(Conversion,_super),Conversion.prototype.assignElements=function(){var overlay,select;return this.convert={from:this.trigger.data("convert-from"),to:this.trigger.data("convert-to")},overlay=Overlay.cache["conversion-prompt"],this.overlay={object:overlay,element:overlay.wrapper,close:overlay.wrapper.find(".close-overlay, .button-cancel"),convert:overlay.wrapper.find(".button-commit"),status:overlay.wrapper.find(".status")},select=this.form.find("#property_status"),this.status={select:select,value:select.val(),oldValue:select.val()},this.isProjectConversion="property"===this.convert.from&&"project"===this.convert.to},Conversion.prototype.observeElements=function(){return this.status.select.on("change",this._trackStatus),this.on("form:updated",this._checkStatus),this.trigger.on("ajax:success",this._redirect),this.overlay.close.on("click",this._closeOverlay),this.overlay.convert.on("click",this._triggerConversion),this.isProjectConversion?(this.trigger.on("click",this._prepareProjectConversionForm),this.overlay.element.find("form.save-project").on("ajax:success",this._redirect)):void 0},Conversion.prototype._checkStatus=function(){return this.status.value!==this.status.oldValue?(this._statusValues().include(this.status.value)&&this._openOverlay(),this.status.oldValue=this.status.value):void 0},Conversion.prototype._closeOverlay=function(event){return event.stop(),this.overlay.object.hide()},Conversion.prototype._openOverlay=function(){return this.overlay.status.html(this.status.value),this.overlay.object.show(),this.overlay.element.find(".convert-from").text(this.convert.from.titleize()),this.overlay.element.find(".convert-to").text(this.convert.to.titleize())},Conversion.prototype._prepareProjectConversionForm=function(event){var form,k,v,_ref;event.stop(),this.overlay.element.find(".convert-to-"+this.convert.to).show(),this.overlay.element.find(".conversion-dialog").hide(),form=this.overlay.element.find("form.save-project"),form.attr("action",this.trigger.attr("href")),_ref=this.trigger.data();for(k in _ref)v=_ref[k],form.attr("data-"+k.dasherize(),v);return this._openOverlay()},Conversion.prototype._redirect=function(event,data){return pjax.loadUrl(data.url)},Conversion.prototype._statusValues=function(){return"lead"===this.convert.from?["CONTRACT PENDING","UNDER CONTRACT"]:"property"===this.convert.from&&"lead"===this.convert.to?["NEW","FOLLOW UP"]:this.isProjectConversion?["CLOSED"]:[]},Conversion.prototype._trackStatus=function(){return this.status.value=this.status.select.val()},Conversion.prototype._triggerConversion=function(event){return event.preventDefault(),this.overlay.element.find(".convert-to").first().text().toLowerCase()===this.convert.to?this.isProjectConversion?this._prepareProjectConversionForm(event):(this.overlay.object.hide(),this.trigger.click()):void 0},Conversion}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Properties.Details.Form=function(_super){function Form(){return this._updateRevenue=__bind(this._updateRevenue,this),this._manageRows=__bind(this._manageRows,this),this._addConditional=__bind(this._addConditional,this),_ref=Form.__super__.constructor.apply(this,arguments)}return __extends(Form,_super),Form.prototype.observeElements=function(){return Form.__super__.observeElements.call(this),this.details.container.exists()?(this.on("form:add-conditional",this._addConditional),this.on("form:manage-rows",this._manageRows),this.on("form:updated",this._updateRevenue),this.on("property:published-to-whiteboard",this._displayWhiteboardMessage("published")),this.on("property:whiteboard-data-saved",this._displayWhiteboardMessage("saved"))):void 0},Form.prototype._addConditional=function(event,options){var id,type;return type=options.type.underscore().dasherize().capitalize().camelCase(),id=options.id,this["_add"+type+"Conditional"](id)},Form.prototype._addPropertyTypeConditional=function(id){return new FormConditional(id,{_default:"single_family_conditional","Multi Family":"multi_family_conditional",Commercial:"commercial_conditional",Land:"land_conditional"},{after:function(conditional){var previous,select,selectedText;return select=$(id),select.exists()&&(selectedText=select[0].options[select[0].selectedIndex].text,$('select[name="property[property_type]"]').val(select.val()),previous=$("."+conditional).first().find(".property_property_type").first().prev(),previous.exists())?previous.text(selectedText):void 0}})},Form.prototype._createHeader=function(){return new Properties.Details.Form.Header(this)},Form.prototype._displayWhiteboardMessage=function(type){var _this=this;return function(){return"published"===type&&_this.message.flash("Property published to dashboard."),"saved"===type?_this.message.flash("Whiteboard details saved."):void 0}},Form.prototype._manageRows=function(event,options){return null==options.row&&(options.row="tr"),new ManageRows(options)},Form.prototype._updateRevenue=function(){return this.element.find(".field.estimated_revenue_price .value").text(this.object.estimated_revenue_price||"$0")},Form}(Details.Form)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Properties.Details.Form.Header=function(_super){function Header(){return this.edit=__bind(this.edit,this),_ref=Header.__super__.constructor.apply(this,arguments)}return __extends(Header,_super),Header.prototype.display=function(){return this._updateFields(),this.fields.actions.show(),this.sections.edit.hide(),this.sections.display.show()},Header.prototype.edit=function(event){return event.stop(),this.fields.actions.hide(),this.sections.display.hide(),this.sections.edit.show()},Header.prototype._assignFields=function(){return{display:{address:this.sections.display.find(".address"),cityState:this.sections.display.find(".city-state"),zip:this.sections.display.find(".zip-code"),county:this.sections.display.find(".county"),country:this.sections.display.find(".country")},edit:{address:this.sections.edit.find("#property_address"),city:this.sections.edit.find("#property_city"),zip:this.sections.edit.find("#property_zip"),state:this.sections.edit.find("#property_state"),county:this.sections.edit.find("#property_county"),country:this.sections.edit.find("#property_country")},actions:this.element.find(".show-actions")}},Header.prototype._performAdditionalObservations=function(){return new CountyUpdate(this.fields.edit.county,this.fields.edit.state)},Header.prototype._revertEditFields=function(){var fields;return fields=this.fields.edit,fields.address.val(fields.address.attr("value")),fields.city.val(fields.city.attr("value")),fields.zip.val(fields.zip.attr("value")),fields.address.change(),fields.city.change(),fields.zip.change()},Header.prototype._updateDisplayFields=function(){var attr,field,fields,separator,value,_i,_j,_len,_len1,_ref1,_ref2,_results;for(this.object.full_address.blank()?(this.sections.empty.show(),this.triggers.clipboard.hide()):(this.sections.empty.hide(),this.triggers.clipboard.show()),fields=this.fields.display,fields.address.text(this.object.address||""),separator=this.object.city&&this.object.state?", ":"",fields.cityState.text([this.object.city,this.object.state].join(separator)),_ref1=["zip","county","country"],_i=0,_len=_ref1.length;_len>_i;_i++)attr=_ref1[_i],value=this.object[attr],field=fields[attr],value&&!value.blank()?field.show().text(value):field.hide();for(_ref2=["county","country"],_results=[],_j=0,_len1=_ref2.length;_len1>_j;_j++)attr=_ref2[_j],field=fields[attr],field.is(":hidden")?field[0].parentNode?_results.push(field.remove()):_results.push(void 0):_results.push(this.sections.locationInfo.append(field));return _results},Header.prototype._updateEditFields=function(){var fields;return fields=this.fields.edit,fields.address.attr("value",this.object.address),fields.city.attr("value",this.object.city),fields.state.attr("value",this.object.state),fields.zip.attr("value",this.object.zip)},Header}(Details.Form.Header)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Properties.Details.Map=function(){function Map(details,container){this.details=details,this.container=container,this._positionMapWindow=__bind(this._positionMapWindow,this),this._createDetailGoogleMap=__bind(this._createDetailGoogleMap,this),this.latitude=this.details.object.lat,this.longitude=this.details.object.lng,this.detailMap={container:this.container,elementWrapper:this.container.find(".map"),element:this.container.find(".details-map"),mapTrigger:$("#show-map"),streetViewTrigger:$("#show-street-view"),closeMapTrigger:this.container.find(".close-map"),noMapViewContainer:this.container.find(".no-map-view"),noStreetViewContainer:this.container.find(".no-street-view"),mapObject:null},this.registerObservers()}return Map.prototype.registerObservers=function(){return this.detailMap.mapTrigger.on("click",this._createDetailGoogleMap),this.detailMap.streetViewTrigger.on("click",this._createDetailGoogleMap),$(window).on("resize",this._positionMapWindow)},Map.prototype._createDetailGoogleMap=function(event){var mapObject;return this.detailMap.mapObject?setTimeout(this._positionMapWindow,10):(event&&event.stop(),this.detailMap.container.show(),mapObject=new GoogleMap.Static({container:this.detailMap.container,elementWrapper:this.detailMap.elementWrapper,element:this.detailMap.element,mapTrigger:this.detailMap.mapTrigger,streetViewTrigger:this.detailMap.streetViewTrigger,closeMapTrigger:this.detailMap.closeMapTrigger,latitude:this.latitude,longitude:this.longitude,noMapView:this.detailMap.noMapViewContainer,noStreetView:this.detailMap.noStreetViewContainer,zoom:16,allowResize:!1}),mapObject.positionMap=this._positionMapWindow,mapObject.firstTimeShowing=!0,$(event.currentTarget).is(this.detailMap.streetViewTrigger)&&mapObject.toggleStreetView(),this.detailMap.mapObject=mapObject)},Map.prototype._positionMapWindow=function(){var offset;return offset=Math.ceil(($(window).height()-532)/2),this.detailMap.elementWrapper.css({top:""+offset+"px"})},Map}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Properties.Estimate=function(_super){function Estimate(){return this._setBudget=__bind(this._setBudget,this),this._edit=__bind(this._edit,this),this._cancelEdit=__bind(this._cancelEdit,this),this._blur=__bind(this._blur,this),_ref=Estimate.__super__.constructor.apply(this,arguments)}return __extends(Estimate,_super),Estimate.prototype.namespace="estimate",Estimate.prototype.containerSelector=".estimate-items",Estimate.prototype.categorySelector=".estimate-item",Estimate.prototype.displaySelector=".column",Estimate.prototype.observeElements=function(){var _this=this;return Estimate.__super__.observeElements.call(this),this.form.sortable({items:this.categorySelector,containment:this.containerSelector,update:function(){return _this.form.submit()}}),this.form.on("click",".set-budget-button",this._setBudget),this.on("click",this._blur)},Estimate.prototype._blur=function(event){var target;return target=$(event.target),target.is(".save-button, .edit-button")||target.is(".estimate-item input:text")?void 0:this._resetVisibleTextFields()},Estimate.prototype._cancelEdit=function(event){var target;return null!=event.stop&&event.stop(),target=$(event.target).closest(this.displaySelector),target.find(".on-display").show(),target.find(".on-edit").hide(),this.form.reset()},Estimate.prototype._edit=function(event){var input,target;return event.stop(),this._resetVisibleTextFields(),target=$(event.target).closest(this.displaySelector),target.find(".on-display").hide(),target.find(".on-edit").show(),input=target.find(".on-edit input:text"),input.range(1)},Estimate.prototype._setBudget=function(event){var element,input,item,target,type,_i,_len,_ref1;for(target=$(event.target),type=target.data("type"),_ref1=this.form.find(this.categorySelector),_i=0,_len=_ref1.length;_len>_i;_i++)element=_ref1[_i],item=$(element),input=item.find(".c-"+type+" .on-edit input:text"),item.find(".c-budget input:text").val(input.val());return this._save(event)},Estimate}(Properties.Financials)}.call(this),function(){Properties.Leads={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Properties.Leads.Campaign=function(){function Campaign(chartData){this.chartData=chartData,this._updateWebforms=__bind(this._updateWebforms,this),this._updateWorkflows=__bind(this._updateWorkflows,this),this._updatePermissions=__bind(this._updatePermissions,this),this._updateAutoresponderLink=__bind(this._updateAutoresponderLink,this),this._toggleSection=__bind(this._toggleSection,this),this._submitWorkflows=__bind(this._submitWorkflows,this),this._submitWebforms=__bind(this._submitWebforms,this),this._submitPermissions=__bind(this._submitPermissions,this),this.assignElements(),this.observeElements()}return Campaign.prototype.assignElements=function(){return new Leads.StatusChart,new Properties.Leads.Chart($(".ct-chart"),$(".leads-campaign-stats section.campaign__overview-section form"),this.chartData),new Properties.Leads.Campaign.CapturePage($(".campaign-subdomain-setup")),new Properties.Leads.Campaign.Collpasable,this.delay="test"===environment?0:100,this.settings=$(".lead-campaign-settings"),this.twilio={form:$("section.twilio form"),select:$("section.twilio form select")},this.autoresponder={element:$("section.autoresponder"),form:$("section.autoresponder form"),select:$("section.autoresponder form select"),link:$("section.autoresponder .settings")},this.webforms={element:$("section.webforms"),form:$("section.webforms form"),selected:$("section.webforms .multi-selector .selected"),options:$("section.webforms .multi-selector .selector-option"),optionsContainer:$("section.webforms .multi-selector .selector-options")},this.workflows={element:$("section.workflows"),form:$("section.workflows form"),selected:$("section.workflows .multi-selector .selected"),options:$("section.workflows .multi-selector .selector-option"),optionsContainer:$("section.workflows .multi-selector .selector-options")},this.permissions={element:$("section.permissions"),form:$("section.permissions form"),selected:$("section.permissions .multi-selector .selected"),options:$("section.permissions .multi-selector .selector-option"),optionsContainer:$("section.permissions .multi-selector .selector-options"),all:$("section.permissions .multi-selector .selector-option #all_users")}},Campaign.prototype.observeElements=function(){var type,_fn,_i,_j,_len,_len1,_ref,_ref1,_results,_this=this;for(this.settings.on("click",".campaign-settings-header",this._toggleSection),this.twilio.select.on("change",function(){return _this.twilio.form.submit()}),_ref=["autoresponder"],_fn=function(type){var object;return object=_this[type],object.select.on("change",function(){return object.form.submit()}),object.form.on("ajax:success",_this["_update"+type.capitalize()+"Link"]),_this["_update"+type.capitalize()+"Link"]()},_i=0,_len=_ref.length;_len>_i;_i++)type=_ref[_i],_fn(type);for(_ref1=["workflows","webforms","permissions"],_results=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)type=_ref1[_j],_results.push(function(type){var object;return object=_this[type],object.selected.on("click",function(){return object.optionsContainer.toggle()}),object.options.on("click",_this["_submit"+type.capitalize()]),object.form.on("ajax:success",_this["_update"+type.capitalize()]),_this["_update"+type.capitalize()]()}(type));return _results},Campaign.prototype._submitPermissions=function(event){var checkbox,count,_this=this;return checkbox=$(event.target).closest(".selector-option").find("input:checkbox"),count=this.permissions.optionsContainer.find(":checked").length,this.permissions.all.is(checkbox)?(this.permissions.options.find("input:checkbox").check(!0),this.permissions.all.check(!0)):this.permissions.all.check(0===count),setTimeout(function(){return _this.permissions.form.submit()},this.delay)},Campaign.prototype._submitWebforms=function(){var _this=this;return setTimeout(function(){return _this.webforms.form.submit()},this.delay)},Campaign.prototype._submitWorkflows=function(){var _this=this;return setTimeout(function(){return _this.workflows.form.submit()},this.delay)},Campaign.prototype._toggleSection=function(event){return $(event.currentTarget).parent(".campaign-settings-section").toggleClass("expanded")},Campaign.prototype._updateAutoresponderLink=function(){var anchor,id,object,template;return object=this.autoresponder,id=object.select.val(),object.select.exists()?id.blank()?object.element.addClass("is-blank"):(anchor=object.link,template=anchor.data("url"),anchor.attr("href",template.evaluate({id:id})),object.element.removeClass("is-blank")):void 0},Campaign.prototype._updatePermissions=function(){var count,text;return count=this.permissions.optionsContainer.find(":checked").length,text=count>0?""+count+" Selected":"Nothing Selected",this.permissions.all.is(":checked")&&(text="Available to everyone"),this.permissions.selected.text(text)},Campaign.prototype._updateWorkflows=function(){var count,text;return count=this.workflows.optionsContainer.find(":checked").length,text=count>0?""+count+" Selected":"Nothing Selected",this.workflows.selected.text(text)},Campaign.prototype._updateWebforms=function(){var count,text;return count=this.webforms.optionsContainer.find(":checked").length,text=count>0?""+count+" Selected":"Nothing Selected",this.webforms.selected.text(text)},Campaign}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Properties.Leads.Campaign.CapturePage=function(){function CapturePage(element){this.element=element,this._displayAvailability=__bind(this._displayAvailability,this),this._delayCheck=__bind(this._delayCheck,this),this._check=__bind(this._check,this),this.assignElements(),this.observeElements()}return CapturePage.prototype.assignElements=function(){return this.messages=this.element.find(".is-hidden"),this.form=this.element.find("form"),this.fields={text:this.element.find("input:text"),hidden:this.element.find("input:hidden")},this.delay="test"===environment?0:1e3},CapturePage.prototype.observeElements=function(){return this.fields.text.on("keyup",this._delayCheck)},CapturePage.prototype._check=function(){var value;return value=this.fields.text.val(),value&&!value.blank()?$.ajax({url:this.fields.text.closest(".input").data("url"),data:{subdomain:value},method:"get"}).done(this._displayAvailability):void 0},CapturePage.prototype._delayCheck=function(){return this.messages.addClass("is-hidden"),clearTimeout(this.checkTimeout),this.checkTimeout=setTimeout(this._check,this.delay)},CapturePage.prototype._displayAvailability=function(status){var value;return this.messages.addClass("is-hidden"),this.messages.filter("."+status).removeClass("is-hidden"),value="available"===status?this.fields.text.val():"",this.fields.hidden.val(value)},CapturePage}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Properties.Leads.Campaign.Collpasable=function(){function Collpasable(){this._toggleSection=__bind(this._toggleSection,this),this.assignElements(),this.observeElements()}return Collpasable.prototype.assignElements=function(){return this.sections=$(".leads-dashboard__section[data-collapsable]"),this.headers=this.sections.find(".leads-dashboard__section-header")},Collpasable.prototype.observeElements=function(){return this.headers.on("click",this._toggleSection)},Collpasable.prototype._toggleSection=function(e){return $(e.currentTarget).parent().toggleClass("is-expanded")},Collpasable}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Properties.Leads.Campaign.Compare=function(){function Compare(chartData){this.chartData=chartData,this._toggleChart=__bind(this._toggleChart,this),this.assignElements(),this.observeElements()}return Compare.prototype.assignElements=function(){return this.table=$(".compare-list table"),this.checkboxes=$(".compare-list input:checkbox"),this.chart=new Properties.Leads.Chart($(".ct-chart"),$(".chart-container form"),this.chartData)},Compare.prototype.observeElements=function(){return this.checkboxes.on("click",this._toggleChart),this.table.tablesorter({cssAsc:"sort-asc",cssDesc:"sort-desc",headers:{0:{sorter:!1}}}),this.table.find("th").eq(1).click()},Compare.prototype._toggleChart=function(event){var target;return target=$(event.currentTarget),this.chart.toggleSeries(target.val())},Compare}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Properties.Leads.Campaign.Input=function(){function Input(form){this.form=form,this._success=__bind(this._success,this),this._enable=__bind(this._enable,this),this._disable=__bind(this._disable,this),this.submit=this.form.find(".actions input:submit"),this.form.on("ajax:send",this._disable),this.form.on("ajax:error",this._enable),this.form.on("ajax:success",this._success)}return Input.prototype._disable=function(){return this.submit.disable()},Input.prototype._enable=function(){return this.submit.enable()},Input.prototype._success=function(){return this._enable(),this.form[0].reset()},Input}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Properties.Leads.Swiper=function(){function Swiper(){this._toggleSections=__bind(this._toggleSections,this),this.assignElements(),this.observeElements()}return Swiper.prototype.assignElements=function(){return this.element=$(".leads-swiper-setup"),this.typeSection=this.element.find("section.type"),this.querySection=this.element.find("section.queries"),this.actionSection=this.element.find("section.actions"),this.querySelectors=this.querySection.find(".input")},Swiper.prototype.observeElements=function(){return this.element.on("change","select",this._toggleSections)},Swiper.prototype._query=function(){var section;return section=this.querySelectors.filter(":visible"),section.exists()?section.find("select option:selected").val():""},Swiper.prototype._toggleActions=function(){return this._query().blank()?this.actionSection.hide():this.actionSection.show()},Swiper.prototype._toggleQueries=function(){var selector,type;return type=this._type(),type.blank()?this.querySection.hide():(this.querySection.show(),this.querySelectors.hide(),this.querySelectors.find("select").disable(),selector=this.querySelectors.filter("[data-swiper-type='"+type+"']"),selector.show().find("select").enable())},Swiper.prototype._toggleSections=function(){return this._toggleQueries(),this._toggleActions()},Swiper.prototype._type=function(){return this.typeSection.find("select").val()},Swiper}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Properties.Leads.Chart=function(){function Chart(element,form,data){this.element=element,this.form=form,this.data=data,this._update=__bind(this._update,this),this._showTooltip=__bind(this._showTooltip,this),this._hoverCircle=__bind(this._hoverCircle,this),this._hideTooltip=__bind(this._hideTooltip,this),this._findCircle=__bind(this._findCircle,this),this._draw=__bind(this._draw,this),this._checkSelection=__bind(this._checkSelection,this),this._applyDatePicker=__bind(this._applyDatePicker,this),this.createChart(),this.assignElements(),this.observeElements()}return Chart.prototype.assignElements=function(){var n,_i,_ref;if(this.circleRadius=5,this.select=this.form.find("select"),this.timeframe=this.form.find("#hidden-timeframe"),this.dateInput=this.form.find(".date-range-input"),this.tooltip=$('<div class="chart-tooltip"><div class="date"></div></div>'),this._isMultiple())for(n=_i=1,_ref=this.data.series.length;_ref>=1?_ref>=_i:_i>=_ref;n=_ref>=1?++_i:--_i)this.tooltip.append("<div class='chart-item chart-item-"+n+"'><div class='color'></div><span></span></div>");
else this.tooltip.append("<span>");return this.tooltip.append('<div class="tail"></div>'),this.element.append(this.tooltip),this.tooltip.hide(),this.element.attr("data-timeframe",this.select.val())},Chart.prototype.createChart=function(){return this.element.exists()?this.object=new Chartist.Line(this.element[0],this.data,this._options()):void 0},Chart.prototype.observeElements=function(){var _this=this;return this.object&&this.object.on("draw",this._draw),this.element.on("mousemove",this._findCircle),this.element.on("mouseleave",function(){return _this._hideTooltip()}),this._observeDatepicker(),this.select.on("change",this._checkSelection),this.form.on("ajax:success",this._update)},Chart.prototype.toggleSeries=function(index){return this.element.find(".ct-series").eq(index).toggle(),this.tooltip.find(".chart-item").eq(index).toggle()},Chart.prototype._applyDatePicker=function(){var range;return range=this.dateInput.val(),range.blank()?void 0:this.form.submit()},Chart.prototype._checkSelection=function(){return this.timeframe.val(this.select.val()),"daterange"===this.select.val()?(this.select.val(null),this.dateInput.show(),this.dateInput.focus()):(this.dateInput.hide(),this.form.submit())},Chart.prototype._draw=function(data){var circle;if("point"===data.type)return circle=new Chartist.Svg("circle",{cx:[data.x],cy:[data.y],r:[this.circleRadius],"data-value":data.value.y,"data-index":data.index},"ct-circle"),data.element.replace(circle)},Chart.prototype._findCircle=function(event){var cPosition,circle,circles,cy,e,hovered,i,index,items,length,lineOffset,lineSpace,lowestCy,offset,position,width,_i,_len;if(position=event.clientX-this.element.offset().left,length=this.element.find(".ct-series:first .ct-circle").length,width=this.element.width()-2*this._options().chartPadding,lineSpace=width/(length-1),lineOffset=lineSpace/2,10>position||position>this.element.width()-10)return this._hideTooltip();if(hovered=10+lineOffset>position?0:position>this.element.width()-10-lineOffset?length-1:Math.floor(position/lineSpace),this._hoverCircle(hovered),circle=this.element.find(".ct-circle").eq(hovered),cPosition=circle.position(),index=circle.data("index"),this.tooltip.find(".date").html(this.data.dates[index]),this._isMultiple())for(lowestCy=1e3,circles=this.element.find("circle[data-index="+index+"]"),items=this.tooltip.find(".chart-item"),i=_i=0,_len=circles.length;_len>_i;i=++_i)e=circles[i],items.eq(i).find("span").text(""+$(e).data("value")+" Leads"),cy=parseFloat(circles.eq(i).attr("cy")),lowestCy>cy&&(cPosition=circles.eq(i).position(),lowestCy=cy);else this.tooltip.find("span").html(""+circle.data("value")+" Leads");return cPosition?(offset=this.element.offset(),this.tooltip.css({top:Math.floor(cPosition.top-offset.top-this.tooltip.height()-16),left:Math.floor(cPosition.left-offset.left-this.tooltip.width()/2-3)}),this.tooltip.show()):void 0},Chart.prototype._hideTooltip=function(){return this._hoverCircle(),this.tooltip.hide()},Chart.prototype._hoverCircle=function(index){var circles,cx,hoverRadius,hovered;return hoverRadius=this.circleRadius+2,circles=this.element.find(".ct-circle"),circles.filter("[r="+hoverRadius+"]").attr("r",this.circleRadius).each(function(i,el){var cx;return el=$(el),cx=parseFloat(el.attr("cx")),el.attr("cx",cx+1)}),hovered=this.element.find(".ct-circle[data-index="+index+"]"),cx=parseFloat(hovered.attr("cx")),hovered.attr("r",hoverRadius),hovered.attr("cx",cx-1)},Chart.prototype._isMultiple=function(){return this.data.series.length>1},Chart.prototype._observeDatepicker=function(){var dateString,options,start;if(this.dateInput.exists())return options={parentEl:".chart-timeframe",maxDate:new Date},dateString=this.dateInput.data("start-date"),dateString.blank()?options.startDate=new Date:(start=new Date(Date.parse(dateString)),$.extend(options,{startDate:start,endDate:start,minDate:start})),this.dateInput.daterangepicker(options),this.dateInput.on("apply.daterangepicker",this._applyDatePicker)},Chart.prototype._options=function(){return{axisX:{offset:0,showLabel:!1,showGrid:!1},axisY:{offset:0,showLabel:!1,showGrid:!1},chartPadding:15,lineSmooth:!1,fullWidth:!0,showArea:!this._isMultiple()}},Chart.prototype._showTooltip=function(){return this.tooltip.show()},Chart.prototype._update=function(event,data){var size;return size=5,data.labels.length>30&&(size=4),data.labels.length>60&&(size=0),this.circleRadius=size,this.object.update(data),this.data=data,this.element.attr("data-timeframe",this.select.val())},Chart}()}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Properties.Leads.Dashboard=function(_super){function Dashboard(){return _ref=Dashboard.__super__.constructor.apply(this,arguments)}return __extends(Dashboard,_super),Dashboard.prototype.initialize=function(chartData){return this.chartData=chartData,new Properties.Leads.Chart($(".ct-chart"),$(".leads-dashboard form.chart-timeframe"),this.chartData)},Dashboard}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Properties.Leads.FindOwner=function(){function FindOwner(){this._confirmAddress=__bind(this._confirmAddress,this),this.assignElements(),this.observeElements()}return FindOwner.prototype.assignElements=function(){return this.element=$(".find-owner"),this.step1=this.element.find(".find-owner__step-1"),this.step2=this.element.find(".find-owner__step-2")},FindOwner.prototype.observeElements=function(){return this.element.on("click","a.find-owner__address",this._confirmAddress)},FindOwner.prototype._confirmAddress=function(event){var anchor;return event.stop(),anchor=$(event.currentTarget),this.step1.hide(),this.step2.filter("[data-id='"+anchor.data("id")+"']").show(),modal.resize()},FindOwner}()}.call(this),function(){this.Syndication={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Syndication.Craigslist=function(){function Craigslist(){this._showSection=__bind(this._showSection,this),this.assignElements(),this.observeElements()}return Craigslist.prototype.assignElements=function(){return this.element=$(".syndication__craigslist"),this.sections=this.element.find("section"),this.sectionTitles=this.sections.find(".syndication__section-title")},Craigslist.prototype.observeElements=function(){return this.sectionTitles.on("click",this._showSection)},Craigslist.prototype._showSection=function(e){var currentSection,isExpanded;return currentSection=$(e.currentTarget).parent(),isExpanded=currentSection.hasClass("is-expanded"),this.sections.removeClass("is-expanded"),isExpanded?void 0:currentSection.addClass("is-expanded")},Craigslist}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Syndication.Edit=function(_super){function Edit(){return this._backToSyndication=__bind(this._backToSyndication,this),this._activateTab=__bind(this._activateTab,this),_ref=Edit.__super__.constructor.apply(this,arguments)}return __extends(Edit,_super),Edit.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements(),this._determineInitialView()},Edit.prototype.assignElements=function(){return this.tabs=this.element.find(".section-tabs a"),this.tabContainers=this.element.find(".tab-container")},Edit.prototype.observeElements=function(){return this.tabs.on("click",this._activateTab),this.element.on("click",".content-header",this._backToSyndication)},Edit.prototype._activateTab=function(event){var className,target;return event.stop(),target=$(event.target),className=target.attr("href").replace("#",""),this.tabs.removeClass("active"),this.tabContainers.hide(),target.addClass("active"),$("."+className).first().show(),window.location.hash=className,this.trigger("textareas:expand")},Edit.prototype._backToSyndication=function(event){var target;return event.stop(),target=$(event.target).closest(".content-header"),pjax.loadUrl(target.data("url"))},Edit.prototype._determineInitialView=function(){var _this=this;return setTimeout(function(){var hash,tab;return hash=window.location.hash,tab=_this.tabs.filter('[href="'+hash+'"]'),tab.exists()||(tab=_this.tabs.first()),_this._activateTab({target:tab,stop:function(){}})},0)},Edit}(GCObject)}.call(this),function(){Syndication.Files=function(){function Files(){var triggers;triggers=$(".syndication_property_file a"),triggers.data("message","Deleting"),triggers.on("ajax:success",function(event){return $(event.target).parents(".syndication_property_file").remove()})}return Files}()}.call(this),function(){var _ref,_ref1,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Syndication.Photos=function(_super){function Photos(){return this._notifyPrimaryPhoto=__bind(this._notifyPrimaryPhoto,this),_ref=Photos.__super__.constructor.apply(this,arguments)}return __extends(Photos,_super),Photos.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements(),this._notifyPrimaryPhoto()},Photos.prototype.assignElements=function(){var e,_i,_len,_ref1,_results;for(this.element.identify(),this.photos=[],_ref1=this.element.find(".photo"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],_results.push(new Syndication.Photo($(e)));return _results},Photos.prototype.observeElements=function(){var sortable;return sortable=this.element.sortable({items:"div.photo",containment:this.element,handle:".reorder",axis:"y"}),sortable.on("sortstop",this._notifyPrimaryPhoto),this.on("primary:update",this._notifyPrimaryPhoto)},Photos.prototype._notifyPrimaryPhoto=function(){var checkbox;return checkbox=this.element.find("input:checkbox:checked").first(),this.trigger("primary:changed",checkbox.parents(".photo"))},Photos}(GCObject),Syndication.Photo=function(_super){function Photo(){return this._togglePrimaryLabel=__bind(this._togglePrimaryLabel,this),_ref1=Photo.__super__.constructor.apply(this,arguments)}return __extends(Photo,_super),Photo.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Photo.prototype.assignElements=function(){return this.element.identify(),this.primaryLabel=this.element.find(".primary-label"),this.checkbox=this.element.find("input:checkbox")},Photo.prototype.observeElements=function(){var _this=this;return this.checkbox.on("click",function(){return _this.trigger("primary:update")}),this.on("primary:changed",this._togglePrimaryLabel)},Photo.prototype._togglePrimaryLabel=function(event,element){return this.element.is(element)?this.element.addClass("primary"):this.element.removeClass("primary")},Photo}(GCObject)}.call(this),function(){Syndication.Summary=function(){function Summary(options){$.extend(this,options),this.assignElements(),this.observeElements(),pjax.ensureUrl(this.reloadUrl)}return Summary.prototype.assignElements=function(){var _this=this;return this.websites={container:$("#websites"),collection:$("#websites .syndication").toArray().map(function(e){return new Syndication.Summary.Website($(e),_this)}),addTrigger:$("#websites a.add-button"),addContainer:$("#websites .add-entry"),form:$("#websites .add-entry form"),available:this.availableWebsites},this.listings={container:$("#listings"),collection:$("#listings .syndication").toArray().map(function(e){return new Syndication.Summary.Listing($(e),_this)}),addTrigger:$("#listings a.add-button"),addContainer:$("#listings .add-entry"),form:$("#listings .add-entry form"),available:this.availableServices}},Summary.prototype.determineAdditionStatus=function(type){var _this=this;return function(){var allChoices,choice,newChoices,object,option,options,placeholderOption,select,usedChoices,_i,_j,_len,_len1;for(object=_this[type],allChoices=object.available,usedChoices=object.collection.map(function(choice){return choice.id}),newChoices=[],options=[],select=object.form.find("select"),placeholderOption=select.find("option").first(),_i=0,_len=allChoices.length;_len>_i;_i++)choice=allChoices[_i],usedChoices.include(choice.id)||newChoices.push(choice);if(select.html(placeholderOption),newChoices.any()){for(_j=0,_len1=newChoices.length;_len1>_j;_j++)choice=newChoices[_j],option=$("<option>").attr({value:choice.id}),option.text(choice.name),select.append(option);object.addTrigger.show()}else object.addTrigger.hide();return select.parents(".selector").exists()?select.prev("span").text(placeholderOption.text()):void 0}},Summary.prototype.observeElements=function(){var item,object,type,_i,_j,_len,_len1,_ref,_ref1,_results;for(_ref=["websites","listings"],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)if(type=_ref[_i],object=this[type],object.container.exists()){for(_ref1=object.collection,_j=0,_len1=_ref1.length;_len1>_j;_j++)item=_ref1[_j],item.observeElements();object.addTrigger.on("click",this.showAdditionContainer(type)),object.container.on("choices:changed",this.determineAdditionStatus(type)),object.form.on("submit",this.submitForm(type)),_results.push(this.determineAdditionStatus(type)())}else _results.push(void 0);return _results},Summary.prototype.onAddition=function(type){var _this=this;return function(html){var element,item,klass,object;return object=_this[type],element=$(html),object.addContainer.before(element),klass=Syndication.Summary[{websites:"Website",listings:"Listing"}[type]],item=new klass(element,_this),item.observeElements(),object.collection.push(item),object.addContainer.hide(),_this.determineAdditionStatus(type)()}},Summary.prototype.removeFromCollection=function(object,collectionName){var collection;return collection=this[collectionName].collection,this[collectionName].collection.remove(object)},Summary.prototype.showAdditionContainer=function(type){var _this=this;return function(event){return event.stop(),_this[type].addContainer.show()}},Summary.prototype.submitForm=function(type){var _this=this;return function(event){var form,object;return event.stop(),object=_this[type],form=object.form,$.ajax({url:form.attr("action"),type:"post",data:form.serialize()}).done(_this.onAddition(type))}},Summary}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Syndication.Summary.Base=function(){function Base(element,summary){this.element=element,this.summary=summary,this._remove=__bind(this._remove,this),this.assignElements()}return Base.prototype.assignElements=function(){return this.id=this.element.data("id"),this.name=this.element.data("name"),this.deleteTrigger=this.element.find("a.delete"),this.deleteTrigger.data("message","Deleting")},Base.prototype.observeElements=function(){return this.deleteTrigger.on("ajax:success",this._remove)},Base.prototype._remove=function(){return this.element.remove(),this.summary.removeFromCollection(this,this.collectionName),this.summary[this.collectionName].container.trigger("choices:changed")},Base}()}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Syndication.Summary.Listing=function(_super){function Listing(){return _ref=Listing.__super__.constructor.apply(this,arguments)}return __extends(Listing,_super),Listing.prototype.collectionName="listings",Listing}(Syndication.Summary.Base)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Syndication.Summary.Website=function(_super){function Website(){return this._remove=__bind(this._remove,this),_ref=Website.__super__.constructor.apply(this,arguments)}return __extends(Website,_super),Website.prototype.collectionName="websites",Website.prototype._remove=function(){return Website.__super__._remove.call(this),this.summary.websites.collection.any()?void 0:pjax.loadUrl(this.summary.reloadUrl)},Website}(Syndication.Summary.Base)}.call(this),function(){Syndication.Wizard=function(stepName){var klass;return new Syndication.Wizard.Form,klass={first:Syndication.Wizard.StepOne,third:Syndication.Wizard.StepThree,fourth:Syndication.Wizard.StepFour}[stepName],klass?new klass:void 0}}.call(this),function(){Syndication.Wizard.ErrorReview=function(){function ErrorReview(){$(".wizard-navigation input[name=commit]").hide()}return ErrorReview}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Syndication.Wizard.Form=function(){function Form(){this._submit=__bind(this._submit,this),this._goBack=__bind(this._goBack,this),this.element=$(".wizard-navigation").parents("form"),this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){var actionParts;return this.submissionTriggers=this.element.find(".wizard-navigation ul.staircase li a"),this.previousTrigger=this.element.find(".wizard-navigation .previous"),actionParts=this.element.attr("action").split("/"),actionParts.pop(),this.baseAction=actionParts.join("/")},Form.prototype.observeElements=function(){return this.submissionTriggers.on("click",this._submit),this.previousTrigger.on("click",this._goBack)},Form.prototype._goBack=function(event){var li;return event.stop(),li=this.element.find(".wizard-navigation ul.staircase li.active").prev("li"),li.exists()?this._submit({target:li.find("a"),stop:function(){}}):void 0},Form.prototype._submit=function(event){var index,step,t,target,_i,_len,_ref;if(event.stop(),target=$(event.target),!target.parents("li.active").exists()){for(index=0,step=null,_ref=this.submissionTriggers,_i=0,_len=_ref.length;_len>_i;_i++)t=_ref[_i],target.is(t)&&(step=this._triggerMapping(index)),index++;return this.element.attr("action",""+this.baseAction+"/"+step),this.element.submit()}},Form.prototype._triggerMapping=function(index){return["first","second","third","fourth"][index]},Form}()}.call(this),function(){var _ref,_ref1,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Syndication.Wizard.StepFour=function(_super){function StepFour(){return this._updateNextService=__bind(this._updateNextService,this),_ref=StepFour.__super__.constructor.apply(this,arguments)}return __extends(StepFour,_super),StepFour.prototype.initialize=function(){var e,_i,_len,_ref1;if($("#errors").exists())return new Syndication.Wizard.ErrorReview;for(this.services=[],_ref1=$(".service.social-media"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],this.services.push(new Syndication.Wizard.StepFour.Service($(e)));return this.on("social-media:syndicate",this._updateNextService),this._updateNextService()},StepFour.prototype._updateNextService=function(){var service;return service=this.services.shift(),service?service.updateStatus():void 0},StepFour}(GCObject),Syndication.Wizard.StepFour.Service=function(_super){function Service(){return this._success=__bind(this._success,this),this._failure=__bind(this._failure,this),this._always=__bind(this._always,this),_ref1=Service.__super__.constructor.apply(this,arguments)}return __extends(Service,_super),Service.prototype.initialize=function(element){return this.element=element,this.url=this.element.data("url")},Service.prototype.updateStatus=function(){return $.ajax({url:this.url,type:"post",data:defaultParams()}).always(this._always).fail(this._failure).done(this._success)},Service.prototype._always=function(){return this.trigger("social-media:syndicate")},Service.prototype._failure=function(){return this.element.removeClass("progress-waiting").addClass("progress-error")},Service.prototype._success=function(data){return this.element.removeClass("progress-waiting").addClass("progress-"+data.text)},Service}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Syndication.Wizard.StepOne=function(_super){function StepOne(){return this._toggleSelectAllState=__bind(this._toggleSelectAllState,this),this._toggleAll=__bind(this._toggleAll,this),this._populateContactFields=__bind(this._populateContactFields,this),_ref=StepOne.__super__.constructor.apply(this,arguments)}return __extends(StepOne,_super),StepOne.prototype.initialize=function(){return this.assignElements(),this.observeElements()},StepOne.prototype.assignElements=function(){var container;return this.selectAll=$("#select_all"),this.checkboxes=$("section.features .feature-field input:checkbox"),container=$("section.contact-info"),this.contact={container:container,select:container.find("select"),name:container.find("input#syndication_property_contact_name"),email:container.find("input#syndication_property_contact_email"),phone:container.find("input#syndication_property_contact_phone"),fax:container.find("input#syndication_property_contact_fax")}},StepOne.prototype.observeElements=function(){return this.selectAll.on("click",this._toggleAll),this.checkboxes.on("click",this._toggleSelectAllState),this.contact.select.on("change",this._populateContactFields),this._populateContactFields(),this._toggleSelectAllState()},StepOne.prototype._allFeaturesSelected=function(){return!this.checkboxes.filter(":not(:checked)").exists()},StepOne.prototype._populateContactFields=function(){var email,fax,name,phone,userId,userInfo;return userId=this.contact.select.val(),userInfo=this.contact.container.find(".user-details[data-id="+userId+"]"),name="",email="",phone="",fax="",userInfo.exists()&&(name=userInfo.data("name"),email=userInfo.data("email"),phone=userInfo.data("phone"),fax=userInfo.data("fax")),this.contact.name.val(name),this.contact.email.val(email),this.contact.phone.val(phone),this.contact.fax.val(fax)},StepOne.prototype._toggleAll=function(){return this.checkboxes.check(this.selectAll.is(":checked"))},StepOne.prototype._toggleSelectAllState=function(){return this.selectAll.check(this._allFeaturesSelected())},StepOne}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Syndication.Wizard.StepThree=function(_super){function StepThree(){return this._updateUrlMessage=__bind(this._updateUrlMessage,this),this._includeWebsite=__bind(this._includeWebsite,this),this._enableThirdPartySites=__bind(this._enableThirdPartySites,this),this._disallowIfPrimary=__bind(this._disallowIfPrimary,this),this._disableThirdPartySites=__bind(this._disableThirdPartySites,this),_ref=StepThree.__super__.constructor.apply(this,arguments)}return __extends(StepThree,_super),StepThree.prototype.initialize=function(){return this.assignElements(),this.observeElements()},StepThree.prototype.assignElements=function(){return this.form=$("form"),this.url=this.form.find("#syndication_property_url")},StepThree.prototype.observeElements=function(){return this.form.on("click",".website input:radio",this._includeWebsite),this.form.on("click",".website input:checkbox",this._disallowIfPrimary),this.url.on("input",this._updateUrlMessage),this.on("syndication:disabled",this._disableThirdPartySites),this.on("upgrade:complete",this._enableThirdPartySites)},StepThree.prototype._disableThirdPartySites=function(){var container,_i,_len,_ref1,_results;for(_ref1=$("section.social-media, section.third-party-sites"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)container=_ref1[_i],_results.push($(container).addClass("disabled").find("input,textarea").disable());return _results},StepThree.prototype._disallowIfPrimary=function(){var website;return website=$(event.target).closest(".website"),website.find("input:radio").is(":checked")?setTimeout(function(){return website.find("input:checkbox").check(!0)},0):void 0},StepThree.prototype._enableThirdPartySites=function(){var container,_i,_len,_ref1;for(_ref1=$("section.social-media, section.third-party-sites"),_i=0,_len=_ref1.length;_len>_i;_i++)container=_ref1[_i],$(container).removeClass("disabled").find("input,textarea").enable();return $(".upgrade-explanation").hide()},StepThree.prototype._includeWebsite=function(event){var checkbox,website;return website=$(event.target).closest(".website"),checkbox=website.find("input:checkbox").check(!0),$(".website").removeClass("selected"),website.addClass("selected"),this._updateUrls(website.attr("url"))},StepThree.prototype._updateUrlMessage=function(){var url;return url=this.url.val(),url.blank()&&(url="[Your&nbsp;URL&nbsp;here]"),this.form.find(".message span.url").html(url)},StepThree.prototype._updateUrls=function(newUrl){return this.form.find(".message span.url").text(newUrl),this.url.val(newUrl)},StepThree}(GCObject)}.call(this),function(){this.Reports={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Reports.Phone=function(){function Phone(){this._submit=__bind(this._submit,this),this._showTooltips=__bind(this._showTooltips,this),this._showSectionFilters=__bind(this._showSectionFilters,this),this._showFilterWindow=__bind(this._showFilterWindow,this),this._showChart=__bind(this._showChart,this),this._show=__bind(this._show,this),this._hideTooltips=__bind(this._hideTooltips,this),this._hideFilterWindow=__bind(this._hideFilterWindow,this),this._draw=__bind(this._draw,this),this._displayNewData=__bind(this._displayNewData,this),this._applyFilters=__bind(this._applyFilters,this),this._alterTimeframe=__bind(this._alterTimeframe,this),this._initialize()}return Phone.prototype.assignElements=function(){return this.element=$(".reports"),this.sections=this.element.find(".reports__section"),this.tabs=this.element.find(".reports__tab"),this.charts=this.element.find(".reports__chart"),this.form=this.element.find("form"),this.timeframe=this.form.find("select#timeframe"),this.customTimeframe={input:this.form.find("input#custom_timeframe"),container:this.form.find(".custom-timeframe")},this.filters={triggers:this.form.find(".reports__filter"),windows:this.form.find(".reports__filter-anchor"),inputs:this.form.find(".reports__filter-anchor input:checkbox")},this.chartOptions={axisX:{offset:0,showLabel:!1,showGrid:!1},axisY:{offset:0,showLabel:!1,showGrid:!1},chartPadding:15,lineSmooth:!1,fullWidth:!0},this.chartToggles=this.element.find(".reports__chart-toggle a")},Phone.prototype.observeElements=function(){var _this=this;return this.tabs.on("click",this._show),this.timeframe.on("change",this._alterTimeframe),this.form.on("submit",this._submit),this.customTimeframe.input.daterangepicker({parentEl:this.customTimeframe.container}),this.customTimeframe.input.on("change",function(){return _this.form.submit()}),this.filters.triggers.on("click",this._showFilterWindow),$(document).on("click",this._hideFilterWindow),this.filters.inputs.on("click",this._applyFilters),this.charts.on("mousemove",this._showTooltips),this.charts.on("mouseout",this._hideTooltips),this.chartToggles.on("click",this._showChart)},Phone.prototype._alterTimeframe=function(){return"custom"===this.timeframe.val()?(this.customTimeframe.container.show(),this.customTimeframe.input.focus()):(this.customTimeframe.container.hide(),this.form.submit())},Phone.prototype._applyFilters=function(event){var allCheckbox,allCheckboxes,allChecked,anchor,chartContainer,chartLine,charts,checkbox,checkboxes,container,e,id,numberIds,row,rowNumberIds,rowUserIds,seriesIndex,shouldShow,userIds,_i,_j,_k,_len,_len1,_len2,_ref,_results;for(null!=event&&(checkbox=$(event.target),anchor=checkbox.closest(".reports__filter-anchor"),checkbox.is("[value=all]")?(checkboxes=anchor.find("input:checkbox").not(checkbox),checkboxes.check(checkbox.is(":checked"))):(allCheckbox=anchor.find("input:checkbox[value=all]"),allCheckboxes=anchor.find("input:checkbox").not(allCheckbox),allChecked=allCheckboxes.length===allCheckboxes.filter(":checked").length,allCheckbox.check(allChecked))),userIds=this.filters.inputs.filter(':checked[name="user_ids[]"]').map(function(i,e){return parseInt(e.value)}).toArray(),numberIds=this.filters.inputs.filter(':checked[name="number_ids[]"]').map(function(i,e){return parseInt(e.value)}).toArray(),_ref=this.element.find(".row[data-user-ids],.row[data-number-ids]"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++){if(e=_ref[_i],row=$(e),rowUserIds=row.data("userIds")||[],rowNumberIds=row.data("numberIds")||[],shouldShow=!0,rowUserIds.any())for(_j=0,_len1=rowUserIds.length;_len1>_j;_j++)id=rowUserIds[_j],shouldShow&&(shouldShow=userIds.include(id));if(rowNumberIds.any())for(_k=0,_len2=rowNumberIds.length;_len2>_k;_k++)id=rowNumberIds[_k],shouldShow&&(shouldShow=numberIds.include(id));shouldShow?row.show():row.hide(),row.is("[data-series-index]")?(container=row.closest(".reports__table-container"),chartContainer=this.element.find(".reports__chart-container[data-type='"+container.data("type")+"']"),charts=chartContainer.find(".reports__chart"),seriesIndex=row.data("seriesIndex"),chartLine=charts.find(".ct-series-"+seriesIndex),row.is(":visible")?_results.push(chartLine.show()):_results.push(chartLine.hide())):_results.push(void 0)}return _results},Phone.prototype._createCharts=function(){var charts,_this=this;return charts=this.charts.filter(":visible"),charts.each(function(i,el){var chart,data,element;return element=$(el),element.find(".ct-chart-line").exists()?void 0:(data=element.data("chart"),chart=new Chartist.Line(el,data,_this.chartOptions),chart.on("draw",_this._draw))}),this._applyFilters()},Phone.prototype._createTooltips=function(chart){var circle,date,dates,el,label,seriesIndex,tooltip,value,x,y,_i,_len,_ref,_results;if(!chart.find(".ct-tooltip").exists()){for(label={sms:" SMS",calls:" Calls",call_time:" min"}[chart.data("type")]||"",dates=chart.data("chart").dates,_ref=chart.find("circle"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)el=_ref[_i],circle=$(el),value=circle.data("value"),seriesIndex=circle.data("series-index"),date=dates[circle.data("index")],x=parseInt(circle.attr("cx")),y=parseInt(circle.attr("cy")),tooltip=$('<div class="ct-tooltip hide"></div>'),tooltip.html('<div class="ct-tooltip-date">'+date+'</div><div class="ct-tooltip-data">'+value+label+"</div>"),tooltip.attr("data-series-index",seriesIndex),tooltip.css({left:x,top:y}),_results.push(chart.append(tooltip));return _results}},Phone.prototype._displayNewData=function(html){return this.element.replaceWith(html),$.uniform(),this._initialize()},Phone.prototype._draw=function(data){var circle,seriesIndex;if("point"===data.type)return seriesIndex=String.fromCharCode(97+data.seriesIndex),circle=new Chartist.Svg("circle",{cx:[data.x],cy:[data.y],r:[5],"data-value":data.value.y,"data-index":data.index,"data-series-index":seriesIndex},"ct-circle"),data.element.replace(circle),clearTimeout(this.drawTimeout),this.drawTimeout=setTimeout(this._applyFilters,4)},Phone.prototype._hideFilterWindow=function(){var target;return this.filters.windows.inDOM()?(target=$(event.target),target.closest(".reports__filter").exists()||target.closest(".reports__filter-anchor").exists()?void 0:this.filters.windows.hide()):$(document).off("click",this._hideFilterWindow)
},Phone.prototype._hideTooltips=function(){return this.charts.removeClass("is-faded"),this.charts.find(".ct-series").attr("data-focus",!1),this.charts.find(".ct-tooltip").hide()},Phone.prototype._initialize=function(){return this.assignElements(),this.observeElements(),this._createCharts()},Phone.prototype._show=function(e){var section,target;return e.stop(),target=$(e.target),section=target.data("section"),this.tabs.removeClass("is-active"),target.addClass("is-active"),this.sections.hide(),this.sections.filter("[data-section='"+section+"']").show(),this.form.find("input:hidden[name=section]").val(section),this._createCharts(),this._showSectionFilters(section)},Phone.prototype._showChart=function(e){var chartType,section,sectionCharts,target;return e.stop(),target=$(e.target),chartType=target.data("type"),section=target.parents(".reports__section"),sectionCharts=section.find(".reports__chart"),section.find(".reports__chart-toggle a").removeClass("is-active"),target.addClass("is-active"),sectionCharts.hide(),sectionCharts.filter("[data-type="+chartType+"]").show(),this._createCharts()},Phone.prototype._showFilterWindow=function(event){var filter,target;return target=$(event.currentTarget),filter=target.data("filter"),this.filters.windows.hide(),this.filters.windows.filter("[data-filter="+filter+"]").show()},Phone.prototype._showSectionFilters=function(section){var userFilter;return userFilter=this.filters.triggers.filter("[data-filter=user]"),"inbound"===section?userFilter.hide():userFilter.show()},Phone.prototype._showTooltips=function(event){var chart,series,seriesIndex,target;return this._hideTooltips(),target=$(event.target),target.is("path")||target.is("circle")?(chart=target.parents(".reports__chart"),chart.addClass("is-faded"),series=target.parents(".ct-series"),series.attr("data-focus",!0),this._createTooltips(chart),seriesIndex=series.attr("class").match(/ct-series-([a-z])/)[1],chart.find(".ct-tooltip").filter("[data-series-index="+seriesIndex+"]").show()):void 0},Phone.prototype._submit=function(event){return event.stop(),$.ajax({url:this.form.attr("action"),type:"get",data:this.form.serialize(),dataType:"text html"}).done(this._displayNewData)},Phone}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.SearchScreen=function(_super){function SearchScreen(){return this._reload=__bind(this._reload,this),this._registerLoadedRecords=__bind(this._registerLoadedRecords,this),this._prepareExportUrl=__bind(this._prepareExportUrl,this),this._prepareDirectMailExportUrl=__bind(this._prepareDirectMailExportUrl,this),this._overwriteRecords=__bind(this._overwriteRecords,this),this._loadNewPage=__bind(this._loadNewPage,this),this._clearSelectedRecords=__bind(this._clearSelectedRecords,this),_ref=SearchScreen.__super__.constructor.apply(this,arguments)}return __extends(SearchScreen,_super),SearchScreen.prototype.initialize=function(options){return $.extend(this,options),this.assignClasses(),this.assignHelpers(),this.observeElements(),this.initialRecords&&this._registerRecords(this.initialRecords),this.initialRecords=null,pjax.ensureUrl(this.url)},SearchScreen.prototype.activeGroup=function(){return this.sidebar.activeGroup},SearchScreen.prototype.addToRecords=function(record){var deselectedRecord,detection,existingRecord,selectedRecord;return detection=function(r){return r.id===record.id},existingRecord=this.records.detect(detection),!existingRecord&&(this.records.push(record),this.recordsByPage[this.pagination.page]||(this.recordsByPage[this.pagination.page]=[]),this.recordsByPage[this.pagination.page].push(record),(selectedRecord=this.selectedRecords.detect(detection))&&this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRecord),1,record),deselectedRecord=this.deselectedRecords.detect(detection))?this.deselectedRecords.splice(this.deselectedRecords.indexOf(deselectedRecord),1,record):void 0},SearchScreen.prototype.assignClasses=function(){return this.classes={groupManager:SearchScreen.Group.Manager,pagination:SearchScreen.Pagination,sidebar:SearchScreen.Sidebar,toolbar:SearchScreen.Toolbar,search:SearchScreen.Search,table:SearchScreen.Table},"contact"===this.name&&(this.classes.sidebar=SearchScreen.Sidebar.Contact),["lead","property","project"].include(this.name)&&(this.classes.toolbar=SearchScreen.Toolbar.Property),"campaign"===this.name&&"/leads/campaigns"===this.url?this.classes.toolbar=SearchScreen.Toolbar.LeadCampaign:void 0},SearchScreen.prototype.assignHelpers=function(){return this.message=Message.create(),this.cookieName=null,this.initialRecords&&(this.cookieName=this.initialRecords.cookie_name),null==this.cookieName&&(this.cookieName=this.pluralName()),this.groupLabel=this.pluralName().titleize(),this.groupManager=new this.classes.groupManager(this),this.pagination=new this.classes.pagination(this.container.find(".pagination-wrapper"),this),this.sidebar=new this.classes.sidebar(this.container.find("#sidebar"),this),this.toolbar=new this.classes.toolbar(this.container.find(".toolbar.for-inbox"),this),this.search=new this.classes.search(this.container.find(".toolbar-search"),this),this.table=new this.classes.table(this.container.find("table"),this),this.message=Message.create(),this.records=[],this.recordsByPage={},this.selectedRecords=[],this.deselectedRecords=[],this.allRecordsSelected=!1,this.baseURL=this.url,this.urlCache=[],this.registrationCount=0,this.emptyContainer=this.container.find(".empty"),this.unmoveableDefaultGroups=["All","Draft","Subscribed","Unsubscribed","Confirmed","Unconfirmed"],this._readCookie()},SearchScreen.prototype.clearSelectedRecords=function(){return this._clearSelectedRecords()},SearchScreen.prototype.deselectRecord=function(record,triggerChange){return null==triggerChange&&(triggerChange=!0),this._splice(this.selectedRecords,record),this._push(this.deselectedRecords,record),triggerChange?this.trigger("selections:changed"):void 0},SearchScreen.prototype.deselectRecords=function(records){var record,_i,_len;for(_i=0,_len=records.length;_len>_i;_i++)record=records[_i],this.deselectRecord(record,!1);return this.trigger("selections:changed")},SearchScreen.prototype.fieldTitleFromName=function(name){var customField;return name.match(/cf\|\d+/)&&(customField=this.customFields.detect(function(cf){return name==="cf|"+cf.id}))?customField.name.titleize():(["lead","property"].include(this.name)&&name.match(/^primary_contact_/)&&(name=name.replace(/primary_/g,"")),"updated_at"===name?"Last Updated":name.titleize())},SearchScreen.prototype.hasSelections=function(){return this.allRecordsSelected||this.selectedRecords.any()},SearchScreen.prototype.isRecordSelected=function(record){return this.allRecordsSelected?!this.deselectedRecords.include(record):this.selectedRecords.include(record)},SearchScreen.prototype.observeElements=function(){return this.on("pagination:changed",this._loadNewPage),this.on("sidebar:changed",this._overwriteRecords),this.on("table:sorted",this._overwriteRecords),this.on("configuration:changed",this._reload),this.on("search:basic:changed",this._overwriteRecords),this.on("search:advanced:changed",this._overwriteRecords),this.on("search:displayed",this._clearSelectedRecords),this.on("action:performed",this._reload),this.on("action:export:prepare",this._prepareExportUrl),this.on("action:direct-mail:export:prepare",this._prepareDirectMailExportUrl),this.on("action:performed:delete",this._clearSelectedRecords),this.on("action:performed:move-to-group",this._clearSelectedRecords),this.on("action:performed:archive",this._clearSelectedRecords),this.on("groups:managed",this._reload),this.on("group:added",this._reload),$("#content-header ul.switch a.active").on("click",function(event){return event.stop()})},SearchScreen.prototype.pluralName=function(n){var name;return name=this.name.replace("offerbot_",""),name.pluralize(n)},SearchScreen.prototype.selectAllRecords=function(){return this.allRecordsSelected=!0,this.selectedRecords=[],this.deselectedRecords=[],this.trigger("selections:changed")},SearchScreen.prototype.selectRecord=function(record,triggerChange){return null==triggerChange&&(triggerChange=!0),this._push(this.selectedRecords,record),this._splice(this.deselectedRecords,record),triggerChange?this.trigger("selections:changed"):void 0},SearchScreen.prototype.selectRecords=function(records){var record,_i,_len;for(_i=0,_len=records.length;_len>_i;_i++)record=records[_i],this.selectRecord(record,!1);return this.trigger("selections:changed")},SearchScreen.prototype.selectedRecordCount=function(){return this.allRecordsSelected?this.totalEntries-this.deselectedRecords.length:this.selectedRecords.length},SearchScreen.prototype.selectionStats=function(){var stats;return stats={count:this.selectedRecordCount(),maxCount:this.totalEntries},stats.scope=this.search.isApplied()?"matching this search":'in "'+this.sidebar.view()+'"',stats.name=this.pluralName(stats.count),stats.maxName=this.pluralName(stats.maxCount),stats},SearchScreen.prototype.showDetails=function(record,openNewWindow){var newWindow,url,_this=this;if(this.detailsURL)return url=this.detailsURL.evaluate(record),this.detailsOverlay?top.overlay.open(url):(this._writeCookie(),openNewWindow?(this.message.display("Loading"),newWindow=window.open(url),newWindow.onload=function(){return _this.message.hide()}):pjax.loadUrl(url))},SearchScreen.prototype.visibleRecords=function(){return this.recordsByPage[this.pagination.page]||[]},SearchScreen.prototype._cacheCurrentURL=function(){return this.urlCache.push(this.url)},SearchScreen.prototype._clearRecords=function(){return this.records=[],this.recordsByPage={},this.urlCache=[]},SearchScreen.prototype._clearSelectedRecords=function(){return this.allRecordsSelected=!1,this.selectedRecords=[],this.deselectedRecords=[],this.trigger("selections:changed"),this.trigger("selections:cleared")},SearchScreen.prototype._loadNewPage=function(){return this._updateUrl(),this.urlCache.include(this.url)?this._render():this._loadRecords()},SearchScreen.prototype._loadRecords=function(){return $.ajax({url:this.baseURL,type:"put",data:this._urlParamData()}).done(this._registerLoadedRecords)},SearchScreen.prototype._newRecord=function(data){return new SearchScreen.Record(data,this)},SearchScreen.prototype._overwriteRecords=function(event,object){return this.pagination.reset(),object===this.sidebar&&this.search.reset(),this._updateUrl(),object===this.sidebar&&this.urlCache.include(this.url)?this._render():(this._clearRecords(),this._loadRecords())},SearchScreen.prototype._prepareDirectMailExportUrl=function(){return this._updateUrl(),this.trigger("direct-mail:export:url:prepared",{url:this.url,data:this._urlParamData()})},SearchScreen.prototype._prepareExportUrl=function(){return this._updateUrl(),this.trigger("export:url:prepared",{url:this.url,data:this._urlParamData()})},SearchScreen.prototype._push=function(collection,object){return collection.include(object)?void 0:collection.push(object)},SearchScreen.prototype._readCookie=function(){var originalUrl,queryParams;return queryParams=SearchScreen.Cookie.queryParams(this.cookieName),originalUrl=""+this.url,queryParams.assign_from_cookies?(this.url=queryParams.url,queryParams.page&&(this.pagination.page=queryParams.page),queryParams.sort&&(this.table.sort=queryParams.sort),queryParams.group_id&&(this.sidebar.groupId=queryParams.group_id),queryParams.query&&(this.search.input.val(queryParams.query),this.search.simulateSubmission()),null!=this.search.advanced&&this.search.advanced.simulateSubmission(queryParams),this.url=originalUrl):void 0},SearchScreen.prototype._registerGroups=function(data){var d,_i,_len;for(this.groups=[],_i=0,_len=data.length;_len>_i;_i++)d=data[_i],this.groups.push(new SearchScreen.Group(d,this));return this.trigger("search-screen:groups:registered")},SearchScreen.prototype._registerLoadedRecords=function(data){return"string"==typeof data&&(data=$.parseJSON(data)),this.urlCache.push(this.url),this._registerRecords(data),null!=data.error_message&&this.message.flash(data.error_message,"error"),this.trigger("request:complete",data)},SearchScreen.prototype._registerRecords=function(data){var d,_i,_len,_ref1;for(_ref1=data.records,_i=0,_len=_ref1.length;_len>_i;_i++)d=_ref1[_i],this.addToRecords(this._newRecord(d));return this.totalEntries=data.total_entries,data.max_count&&(this.maxCount=data.max_count),data.groups&&this._registerGroups(data.groups),data.config&&(this.configuration=data.config,this.configuration.remove("_campaign_id"),this.registrationCount?this.trigger("configuration:changed"):this.trigger("configuration:initialized")),0===this.registrationCount&&this.emptyContainer.exists()&&!this.records.any()&&0===data.max_count?this._showEmptyContainer():(this._showSearchContainers(),this._render()),this.registrationCount++},SearchScreen.prototype._reload=function(event,data){return data&&data.refresh_groups&&(this.forceGroupReload=!0),this._updateUrl(),this._clearRecords(),this._loadRecords()},SearchScreen.prototype._render=function(){return this.pagination.totalEntries=this.totalEntries,this.pagination.render(),this.table.render()},SearchScreen.prototype._showEmptyContainer=function(){return this.emptyContainer.show(),this.container.find("#sidebar,#content").hide()},SearchScreen.prototype._showSearchContainers=function(){return this.emptyContainer.hide(),this.container.find("#sidebar,#content").show()},SearchScreen.prototype._splice=function(collection,object){var index;return index=collection.indexOf(object),-1!==index?collection.splice(index,1):void 0},SearchScreen.prototype._updatedUrl=function(omissions){var allParams,param,params,value;null==omissions&&(omissions=[]),allParams=this._urlParams(),params=[];for(param in allParams)value=allParams[param],omissions.include(param)||value&&("advancedSearch"===param?params.push($.param(value)):["config","action","groups"].include(param)?params.push(value):params.push(""+param.underscore()+"="+encodeURIComponent(value)));return""+this.baseURL+"?"+params.join("&")},SearchScreen.prototype._updateUrl=function(){return this.url=this._updatedUrl()},SearchScreen.prototype._urlParamData=function(){var allParams,data,param,value;data={},allParams=this._urlParams();for(param in allParams)value=allParams[param],value&&(["advancedSearch","action","groups","config"].include(param)?$.extend(data,value):data[param.underscore()]=value);return this.forceGroupReload&&(data.force_group_refresh=!0,this.forceGroupReload=!1),data},SearchScreen.prototype._urlParams=function(){var result;return result={page:this.pagination.page,groupId:this.sidebar.groupId,query:this.search.query,advancedSearch:this.search.advanced.data,config:this.table.manager.configParams,action:this.toolbar.actionParamData,groups:this.groupManager.data,sort:this.table.sort},1===result.page&&delete result.page,result.groupId.blank()&&delete result.groupId,result.query.blank()&&delete result.query,$.isEmptyObject(result.advancedSearch)&&delete result.advancedSearch,$.isEmptyObject(result.config)&&delete result.config,$.isEmptyObject(result.action)&&delete result.action,$.isEmptyObject(result.groups)&&delete result.groups,result},SearchScreen.prototype._writeCookie=function(){return SearchScreen.Cookie.set(this.cookieName,this._updatedUrl(["config","action","groups"]))},SearchScreen}(GCObject)}.call(this),function(){SearchScreen.Cookie={get:function(name){return cookie(this._name(name))},queryParams:function(name){var data,result,urlParts;return(data=this.get(name))?(urlParts=data.split("?"),urlParts.shift(),data=data.replace("&assign_from_cookies=true",""),this.set(name,data),result=urlParts.join("").toUrlParams(),result.url=data,result):{}},returnToSearch:function(name,data){return this.set(name,""+data+"&assign_from_cookies=true")},set:function(name,data){return cookie.set(this._name(name),data,{path:"/"})},_name:function(name){return"search_screen_"+name}}}.call(this),function(){SearchScreen.Group=function(){function Group(options,screen){this.screen=screen,$.extend(this,options),this.moveable=!this.screen.unmoveableDefaultGroups.include(this.name),this._formatAttributes()}return Group.prototype._formatAttributes=function(){return this.id||(this.id=uniqueId()),this.id=this.id+"",this["default"]=!this.custom,this.title=this.name.titleize(),this.object_count?this.objectCount=" ("+this.object_count+")":void 0},Group}()}.call(this),function(){var _ref,_ref1,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};SearchScreen.Group.Manager=function(_super){function Manager(){return _ref=Manager.__super__.constructor.apply(this,arguments)}return __extends(Manager,_super),Manager.prototype.initialize=function(screen){return this.screen=screen,new SearchScreen.Group.Manager.Manage($("#manage-groups"),this),new SearchScreen.Group.Manager.Add($("#new-group"),this)},Manager}(GCObject),SearchScreen.Group.Manager.Base=function(_super){function Base(){return this._findOrCreateOverlay=__bind(this._findOrCreateOverlay,this),_ref1=Base.__super__.constructor.apply(this,arguments)}return __extends(Base,_super),Base.prototype.initialize=function(element,manager){return this.element=element,this.manager=manager,this.screen=this.manager.screen,this.name=constructorName(this).toLowerCase(),this.assignElements(),this.observeElements(),this.manageOverlay()},Base.prototype.assignElements=function(){},Base.prototype.observeElements=function(){},Base.prototype.manageOverlay=function(){return this.on("groups:"+this.name+":overlay-required",this._findOrCreateOverlay)},Base.prototype._findOrCreateOverlay=function(event,trigger){return null==this.overlay&&(this.overlay=new Overlay(this.element)),this.overlay.registerTrigger(trigger)},Base}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Group.Manager.Add=function(_super){function Add(){return this._reset=__bind(this._reset,this),this._submit=__bind(this._submit,this),_ref=Add.__super__.constructor.apply(this,arguments)}return __extends(Add,_super),Add.prototype.assignElements=function(){return this.form=this.element.find("form"),this.input=this.form.find("input:text")},Add.prototype.observeElements=function(){return this.on("search-screen:groups:registered",this._reset),this.form.on("submit",this._submit)},Add.prototype._submit=function(event){var groupName;return event.stop(),groupName=this.input.val(),groupName.blank()?void 0:(this.manager.data={g:{new_group:groupName}},this.trigger("group:added"))},Add.prototype._reset=function(){return this.element.hide(),this.input.val(""),this.manager.data=""},Add}(SearchScreen.Group.Manager.Base)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Group.Manager.Manage=function(_super){function Manage(){return this._updateRows=__bind(this._updateRows,this),this._submit=__bind(this._submit,this),this._removeRow=__bind(this._removeRow,this),this._addNewGroup=__bind(this._addNewGroup,this),_ref=Manage.__super__.constructor.apply(this,arguments)}return __extends(Manage,_super),Manage.prototype.initialize=function(element,manager){return this.element=element,this.manager=manager,Manage.__super__.initialize.call(this,this.element,this.manager),this._addNewGroup()},Manage.prototype.assignElements=function(){return this.template=this.screen.manageGroupTemplate,this.container=this.element.find(".groups"),this.container.identify(),this.form=this.element.find("form"),this.addGroupTrigger=$('<a id="add-group" href="#">New Group</a>'),this.element.find(".overlay-header").append(this.addGroupTrigger),this.container.sortable({items:"div.group-row",handle:".handle",axis:"y"})},Manage.prototype.observeElements=function(){return this.on("search-screen:groups:registered",this._updateRows),this.addGroupTrigger.on("click",this._addNewGroup),this.form.on("submit",this._submit)},Manage.prototype._addNewGroup=function(event){var element;return event&&event.stop(),element=$(this.template.evaluate({id:uniqueId()})),this.container.append(element),this.container.css("scrollTop",element.offset().top),this._observeGroupRow(element),element.find("input:text").focus()},Manage.prototype._observeGroupRow=function(element){return element.find("a.remove").on("click",this._removeRow)},Manage.prototype._removeRow=function(event){return event.stop(),$(event.target).parents(".group-row").remove()},Manage.prototype._submit=function(event){var queryParams;return event.stop(),queryParams=this.form.serializeObject(),delete queryParams.commit,this.manager.data=queryParams,$.isEmptyObject(this.manager.data)&&(this.manager.data={g:""}),this.trigger("groups:managed")},Manage.prototype._updateRows=function(){var customGroups,element,group,_i,_len,_results;if(this.container.html(""),this.element.hide(),this.manager.data={},customGroups=this.screen.groups.select(function(g){return g.custom}),!customGroups.any())return this._addNewGroup();for(_results=[],_i=0,_len=customGroups.length;_len>_i;_i++)group=customGroups[_i],element=$(this.template.evaluate(group)),this._observeGroupRow(element),_results.push(this.container.append(element));return _results},Manage}(SearchScreen.Group.Manager.Base)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Pagination=function(_super){function Pagination(element,screen){this.element=element,this.screen=screen,this._anchorClick=__bind(this._anchorClick,this),this.page=this.screen.page||1,this.perPage=this.screen.perPage||30,this.totalEntries=this.screen.totalEntries,this.messageTemplate="Showing #{start}-#{end} of #{total} #{noun}",this.itemTemplate='<li class="#{itemClass}"><a href="#" class="#{anchorClass}" page="#{pageNumber}">#{label}</a></li>',this.assignElements()}return __extends(Pagination,_super),Pagination.prototype.assignElements=function(){return this.list=this.element.find("ul"),this.messageContainer=this.element.find(".pagination-info")},Pagination.prototype.render=function(){return this._render()},Pagination.prototype.reset=function(){return this.page=1},Pagination.prototype._anchorClick=function(event){return event.stop(),this._pageTo(parseInt($(event.target).attr("page"),10))},Pagination.prototype._messageAttributes=function(){var end,noun,start;return end=this.perPage*this.page,start=end-this.perPage+1,end>this.totalEntries&&(end=this.screen.records.length),noun=this.screen.pluralName(this.totalEntries),{total:this.totalEntries,start:start,end:end,noun:noun}},Pagination.prototype._newItem=function(attributes){return this.itemTemplate.evaluate(attributes)},Pagination.prototype._observeAnchors=function(){return this.element.find("li a:not(.active)").on("click",this._anchorClick)},Pagination.prototype._pages=function(){return Math.ceil(this.totalEntries/this.perPage)},Pagination.prototype._pageTo=function(pageNumber){var pages;return pages=this._pages(),1>pageNumber&&(pageNumber=1),pageNumber>pages&&(pageNumber=pages),this.direction=this.page<pageNumber?"up":"down",this.page=pageNumber,this.trigger("pagination:changed",this.page),this._render()},Pagination.prototype._render=function(){var attributes,endingPage,halfway,item,page,pages,shownPages,startingPage,totalPages,_i;if(this.list.html(""),this._updateMessage(),pages=this._pages(),this.totalEntries?this.element.show():this.element.hide(),!(1>=pages)){for(attributes={},item=null,totalPages=pages,shownPages=7,halfway=Math.ceil(shownPages/2),startingPage=1,endingPage=totalPages,totalPages>shownPages&&(endingPage=shownPages),this.page>halfway&&(startingPage=this.page-(halfway-1),endingPage=this.page+(halfway-1)),endingPage>=totalPages&&(endingPage=totalPages),totalPages>shownPages&&this.page>=totalPages-(halfway-1)&&(startingPage=totalPages-(shownPages-1)),1!==this.page&&(attributes={itemClass:"previous",pageNumber:this.page-1,label:"Previous"},this.list.append(this._newItem(attributes))),page=_i=startingPage;endingPage>=startingPage?endingPage>=_i:_i>=endingPage;page=endingPage>=startingPage?++_i:--_i)attributes={pageNumber:page,label:page,anchorClass:"page"},this.page===page&&(attributes.anchorClass+=" active"),this.list.append(this._newItem(attributes));return this.page<totalPages&&(attributes={itemClass:"next",pageNumber:this.page+1,label:"Next"},this.list.append(this._newItem(attributes))),this._observeAnchors()}},Pagination.prototype._updateMessage=function(){return this.totalEntries?this.messageContainer.text(this.messageTemplate.evaluate(this._messageAttributes())):void 0},Pagination}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Record=function(_super){function Record(){return this._toggleSelection=__bind(this._toggleSelection,this),this._formatGroups=__bind(this._formatGroups,this),this.openDetails=__bind(this.openDetails,this),_ref=Record.__super__.constructor.apply(this,arguments)}return __extends(Record,_super),Record.prototype.initialize=function(data,screen){return this.screen=screen,$.extend(this,data),this._formatValues(),this.on("search-screen:groups:registered",this._formatGroups),this._formatGroups()},Record.prototype.deselect=function(){return this.screen.deselectRecord(this)},Record.prototype.openDetails=function(event){var firstColumn,row,target;return target=$(event.target),target.is("input:checkbox")||(event&&event.stop(),row=target,row.parents("tr").exists()&&(row=row.parents("tr")),firstColumn=row.find("td").first(),target.is(firstColumn||target.parents("td").is(firstColumn)))?void 0:this.screen.showDetails(this,event.ctrlKey||event.metaKey)},Record.prototype.registerObservers=function(element){var anchors,checkbox,url;return checkbox=element.find("input:checkbox"),checkbox.on("click",this._toggleSelection),this.screen.isRecordSelected(this)&&checkbox.check(!0),element.on("click",this.openDetails),url=this.screen.detailsURL.evaluate(this),anchors=element.find("a[href=placeholder]"),anchors.attr("href",url),anchors.on("click",this.openDetails),new SearchScreen.Record.Drag(this,element),new SearchScreen.Record.Drop(this,element),"offerbot_property"===this.screen.name?this._registerOfferbotPropertyObservers(element):void 0},Record.prototype.select=function(){return this.screen.selectRecord(this)},Record.prototype._formatGroups=function(){var currentGroup,displayedTitles,group,id,titles,_i,_len,_ref1;if(this.screen.groups&&this.groups&&"string"!=typeof this.groups){for(this.groupIds=this.groups,titles=[],currentGroup=this.screen.activeGroup()||{id:"0"},_ref1=this.groups,_i=0,_len=_ref1.length;_len>_i;_i++)id=_ref1[_i],id!==currentGroup.id&&(group=this.screen.groups.detect(function(g){return g.id===id}),group&&titles.push(group.title));return this.groups=titles.length>2?(displayedTitles=titles.splice(0,2),""+displayedTitles.join(", ")+", and "+titles.length+" other"+(1===titles.length?"":"s")):titles.join(", ")}},Record.prototype._formatValues=function(){var date,dateString,method,_i,_len,_ref1,_results;for(this.id=this.id+"",_ref1=["created_at","updated_at"],_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)method=_ref1[_i],dateString=this[method],dateString?(date=new Date(Date.parse(dateString)),this[""+method+"Date"]=date,_results.push(this["formatted_"+method]=this._formatDate(date))):_results.push(void 0);return _results},Record.prototype._formatDate=function(date){var day,hours,meridianSign,minutes,month,monthIndex,time,year;return day=date.getDate(),meridianSign="AM",hours=date.getHours(),minutes=date.getMinutes(),monthIndex=date.getMonth(),year=date.getFullYear(),month=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][monthIndex],10>minutes&&(minutes="0"+minutes),hours>12&&(hours-=12,12!==hours&&(meridianSign="PM")),0===hours&&(hours=12),(new Date).getFullYear()===year?(time=""+hours+":"+minutes+meridianSign,""+month+" "+day+" - "+time):""+month+" "+day+", "+year},Record.prototype._registerOfferbotPropertyObservers=function(element){var title;return title=this.screen.campaignMappings[this._campaign_id],title&&"Unassigned"!==this._status&&"Completed"!==this._status?element.addClass("unavailable"):(element.addClass("available"),title="Available"),element.find(".icon").attr("title",title)},Record.prototype._toggleSelection=function(event){return event.target.checked?this.select():this.deselect()},Record}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};SearchScreen.Record.Drag=function(){function Drag(record,original){this.record=record,this.original=original,this._updateText=__bind(this._updateText,this),this._start=__bind(this._start,this),this._selectRecord=__bind(this._selectRecord,this),this._helperElement=__bind(this._helperElement,this),this.screen=this.record.screen,this.initializeElement(),this.observeElement()}return Drag.prototype.initializeElement=function(){return this.original.addClass("draggable-record"),this.element=$('<span class="record-drag">'),this.handle=this.original.find(".handle")},Drag.prototype.observeElement=function(){return this.original.draggable({addClasses:!1,appendTo:"body",revert:"invalid",handle:this.handle,helper:this._helperElement,start:this._start})},Drag.prototype._helperElement=function(){return this.element.show()},Drag.prototype._selectRecord=function(){var checkbox;return this.screen.isRecordSelected(this.record)?void 0:(checkbox=this.original.find("input:checkbox"),checkbox.check(!0),this.record.select())},Drag.prototype._start=function(){return this.element.addClass("dragging"),this._selectRecord(),this._updateText()},Drag.prototype._updateText=function(){var count;return count=this.screen.selectedRecordCount(),this.element.text("Group "+count+" "+this.screen.pluralName(count))},Drag}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};SearchScreen.Record.Drop=function(){function Drop(record,element){this.record=record,this.element=element,this._drop=__bind(this._drop,this),this.element.droppable({addClasses:!1,accept:".draggable-sidebar-trigger",hoverClass:"drag-hover",drop:this._drop})}return Drop.prototype._drop=function(event,ui){var checkbox;return checkbox=this.element.find("input:checkbox"),checkbox.check(!0),this.record.select(),this.record.trigger("drag-drop:group",ui.draggable)},Drop}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Search=function(_super){function Search(){return this._submit=__bind(this._submit,this),this._performCallbacks=__bind(this._performCallbacks,this),this._markAsApplied=__bind(this._markAsApplied,this),this._checkForEscape=__bind(this._checkForEscape,this),_ref=Search.__super__.constructor.apply(this,arguments)}return __extends(Search,_super),Search.prototype.initialize=function(element,screen){return this.element=element,this.screen=screen,this.assignElements(),this.observeElements()
},Search.prototype.assignElements=function(){var element;return this.form=this.element,this.input=this.form.find("input:text"),this.button=this.form.find(".search-submit"),this.query=this.input.val()||"",element=this.screen.container.find("#search-options"),this.advanced=new SearchScreen.Search.Advanced(element,this)},Search.prototype.observeElements=function(){return this.button.on("click",this._submit),this.form.on("submit",this._submit),this.input.on("keyup",this._checkForEscape),this.on("search:applied",this._markAsApplied),this.on("request:complete",this._performCallbacks)},Search.prototype.isApplied=function(){return!this.query.blank()||!this.advanced.blank()},Search.prototype.reset=function(){return this.input.val(""),this.query="",this.advanced.reset(),this.trigger("search:removed")},Search.prototype.simulateSubmission=function(){var _this=this;return this.trigger("search:applied"),this.trigger("search:basic:changed",this),setTimeout(function(){return _this.trigger("search:displayed")},10),this.applied=!1},Search.prototype._checkForEscape=function(event){return 27===event.keyCode?(this.input.val(""),this._submit(event)):void 0},Search.prototype._markAsApplied=function(){return this.applied=!0},Search.prototype._performCallbacks=function(){return this.applied&&this.trigger("search:displayed"),this.applied=!1},Search.prototype._submit=function(event){return event.stop(),this.query=this.input.val(),this.query.blank()&&this.reset(),this.trigger("search:applied"),this.trigger("search:basic:changed",this),this.query.blank()?this.trigger("search:removed"):void 0},Search}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Search.Advanced=function(_super){function Advanced(){return this._show=__bind(this._show,this),this._reset=__bind(this._reset,this),this._loadRecords=__bind(this._loadRecords,this),this._hide=__bind(this._hide,this),_ref=Advanced.__super__.constructor.apply(this,arguments)}return __extends(Advanced,_super),Advanced.prototype.initialize=function(element,search){return this.element=element,this.search=search,this.screen=this.search.screen,this.element.exists()?(this.assignElements(),this.observeElements(),this._initializeForm()):this._resetData()},Advanced.prototype.assignElements=function(){return this.triggers={internal:this.element.find("#hide-search-options"),external:this.search.element.find(".search-options"),cancel:this.element.find(".actions a.cancel")},this.form=this.element.find("form"),this._resetData()},Advanced.prototype.blank=function(){return $.isEmptyObject(this.data)},Advanced.prototype.observeElements=function(){return this.triggers.external.on("click",this._show),this.triggers.internal.on("click",this._hide),this.triggers.cancel.on("click",this._reset),this.form.on("submit",this._loadRecords)},Advanced.prototype.reset=function(){return this._resetData(),this.element.exists()?(this.form[0].reset(),this.hide(),this.trigger("search:removed")):void 0},Advanced.prototype.hide=function(){return this.element.hide()},Advanced.prototype.show=function(){return this.element.show()},Advanced.prototype._hide=function(event){return event.stop(),this.hide()},Advanced.prototype._initializeForm=function(){var data,field,hasFormData,name,value;data=location.search.replace(/^\?/,"").toUrlParams(),hasFormData=!1;for(name in data)value=data[name],field=this.form.find("[name='"+name+"']"),field.exists()&&(field.val(decodeURIComponent(value.replace(/\+/g," "))),hasFormData=!0);return hasFormData?(this.data=this.form.serializeObject(),this.trigger("search:applied"),this.trigger("search:advanced:changed",this)):void 0},Advanced.prototype._loadRecords=function(event){return event.stop(),this.data=this.form.serializeObject(),this.trigger("search:applied"),this.trigger("search:advanced:changed",this)},Advanced.prototype._resetData=function(){return this.data={}},Advanced.prototype._reset=function(){var triggerChange;return triggerChange=!this.blank(),this.reset(),triggerChange?this.trigger("search:advanced:changed",this):void 0},Advanced.prototype._show=function(event){return event.stop(),this.show()},Advanced.prototype.simulateSubmission=function(data){var afterSubmission,beforeSubmission,field,fieldName,match,name,value;beforeSubmission=this.form.serializeObject();for(name in data)value=data[name],match=name.match(/as\[(.*?)\]/),match&&(fieldName=match[1],field=this.form.find("[name*='["+fieldName+"]']"),field.exists()&&(value=decodeURIComponent(value),field.is("select")&&(field.find("option[value='"+value+"']").exists()||(value=value.replace(/\+/g," "))),field.val(value)));return afterSubmission=this.form.serializeObject(),afterSubmission!==beforeSubmission?this.data=afterSubmission:void 0},Advanced}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Sidebar=function(_super){function Sidebar(){return this._triggerSelect=__bind(this._triggerSelect,this),this._removeActiveVisiblity=__bind(this._removeActiveVisiblity,this),this._enableTriggerSelect=__bind(this._enableTriggerSelect,this),this._disableTriggerSelect=__bind(this._disableTriggerSelect,this),this._createTriggers=__bind(this._createTriggers,this),this._applyActiveVisiblity=__bind(this._applyActiveVisiblity,this),_ref=Sidebar.__super__.constructor.apply(this,arguments)}return __extends(Sidebar,_super),Sidebar.prototype.initialize=function(element,screen){return this.element=element,this.screen=screen,this.assignElements(),this.observeElements()},Sidebar.prototype.assignElements=function(){return this.groupTemplate=this.screen.sidebarGroupTemplate,this.defaultGroupList=this.element.find("section.default ul.views"),this.customGroupList=this.element.find("section.groups ul.views"),this.groupId=top.location.search.substr(1).toUrlParams().group_id||"",this.activeGroup=null,this.allowTriggerSelection=!0,this.overlayTrigger=this.element.find("#manage-groups-trigger"),new SearchScreen.Sidebar.ImportStatus(this)},Sidebar.prototype.customGroups=function(){return this.groups.select(function(g){return g.custom})},Sidebar.prototype.defaultGroups=function(){var defaults,group,name,names,ordered,_i,_len;for(defaults=this.groups.select(function(g){return g["default"]}),ordered=[],names=["Inbox","Sent","Archive","Draft","Subscribed","Unsubscribed","Confirmed","Unconfirmed","All","Trash"],_i=0,_len=names.length;_len>_i;_i++)name=names[_i],group=defaults.detect(function(g){return g.name===name}),group&&ordered.push(group);return ordered},Sidebar.prototype.observeElements=function(){return this.on("trigger:selected",this._triggerSelect),this.on("triggers:disable",this._disableTriggerSelect),this.on("triggers:enable",this._enableTriggerSelect),this.on("search-screen:groups:registered",this._createTriggers),this.on("search:applied",this._removeActiveVisiblity),this.on("search:removed",this._applyActiveVisiblity),this.trigger("groups:manage:overlay-required",this.overlayTrigger)},Sidebar.prototype.view=function(){var label;return label=this.element.find(".active").first().text(),label=label.replace(/\s+\(\d+\)$/g,"")},Sidebar.prototype._activeClass=function(group){return group.id===this.groupId?"active":""},Sidebar.prototype._addAllGroup=function(){var all,attributes,trash;return attributes={id:"0",name:"All",custom:!1,object_count:this._allCount()},all=new SearchScreen.Group(attributes,this.screen),trash=this.groups.detect(function(g){return"Trash"===g.name}),this.groups.splice(this.groups.indexOf(trash),0,all)},Sidebar.prototype._allCount=function(){var archive,groups,trash;return this.screen.maxCount?(groups=this.defaultGroups(),archive=groups.detect(function(g){return"Archive"===g.name}),trash=groups.detect(function(g){return"Trash"===g.name}),this.screen.maxCount?(archive||(archive={object_count:0}),this.screen.maxCount-archive.object_count-trash.object_count):0):0},Sidebar.prototype._applyActiveVisiblity=function(){return this.element.removeClass("active-ambiguous")},Sidebar.prototype._createCustomTriggers=function(){var group,_i,_len,_ref1,_results;for(this.customGroupList.html(""),this.customGroupList.append(this._customHeading("Groups")),_ref1=this.customGroups(),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)group=_ref1[_i],_results.push(this._createCustomTrigger(group));return _results},Sidebar.prototype._createCustomTrigger=function(group,list){var data,element,trigger;return null==list&&(list=this.customGroupList),data=$.extend({anchorClass:this._activeClass(group)},group),element=$(this.groupTemplate.evaluate(data)),trigger=new SearchScreen.Sidebar.Trigger(element,this,group),list.append(element),this.triggers.push(trigger),this._drag(trigger),this._drop(trigger)},Sidebar.prototype._createDefaultTriggers=function(){var data,element,group,name,trigger,_i,_len,_ref1,_results;for(this.defaultGroupList.html(""),_ref1=this.defaultGroups(),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)group=_ref1[_i],data={anchorClass:this._activeClass(group)},name=group.name,["Inbox","Draft","Trash"].include(name)?(group.groupClasses="views-heading","Draft"===name&&(name+="s")):("Archive"===name&&(name+="d"),name+=" "+this.screen.groupLabel),data=$.extend(data,group),data.name=name,element=$(this.groupTemplate.evaluate(data)),trigger=new SearchScreen.Sidebar.Trigger(element,this,group),this.defaultGroupList.append(element),this.triggers.push(trigger),group.moveable&&this._drag(trigger),group.moveable?_results.push(this._drop(trigger)):_results.push(void 0);return _results},Sidebar.prototype._createTriggers=function(){return this.triggers=[],this.groups=this.screen.groups.dup(),this._addAllGroup(),this.activeGroup||(""===this.groupId?(this.activeGroup=this.defaultGroups().detect(function(g){return"Inbox"===g.name}),this.groupId=this.activeGroup.id):this.activeGroup=this.groups.detect(function(g){return g.id===this.groupId})),this._createDefaultTriggers(),this._createCustomTriggers()},Sidebar.prototype._customHeading=function(label){var heading;return heading=$('<li id="groups=heading" class="views-heading">'),heading.text(label),heading},Sidebar.prototype._disableTriggerSelect=function(){return this.allowTriggerSelection=!1},Sidebar.prototype._drag=function(trigger){return new SearchScreen.Sidebar.Drag(trigger.element)},Sidebar.prototype._drop=function(trigger){return new SearchScreen.Sidebar.Drop(trigger.element)},Sidebar.prototype._enableTriggerSelect=function(){return this.allowTriggerSelection=!0},Sidebar.prototype._removeActiveVisiblity=function(){return this.element.addClass("active-ambiguous")},Sidebar.prototype._triggerSelect=function(event,trigger){var t,_i,_len,_ref1;if(this.allowTriggerSelection){for(_ref1=this.triggers,_i=0,_len=_ref1.length;_len>_i;_i++)t=_ref1[_i],t.removeClass("active");return trigger.addClass("active"),this.groupId=trigger.groupId,this.activeGroup=trigger.group,this.trigger("sidebar:changed",this)}},Sidebar}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Sidebar.Contact=function(_super){function Contact(){return this._toggleGroups=__bind(this._toggleGroups,this),_ref=Contact.__super__.constructor.apply(this,arguments)}return __extends(Contact,_super),Contact.prototype.customGroups=function(){return this.groups.select(function(g){return g.custom&&!g.contact_type})},Contact.prototype.contactTypeGroups=function(){return this.groups.select(function(g){return g.contact_type})},Contact.prototype._createCustomTriggers=function(){var group,_i,_j,_len,_len1,_ref1,_ref2,_results;for(this.contactTypeList||(this.contactTypeList=this.element.find("section.contact-type ul.views")),this.contactTypeList.html(""),this.customGroupList.html(""),this.contactTypeList.append(this._customHeading("Contact Type")),this.customGroupList.append(this._customHeading("Groups")),_ref1=this.contactTypeGroups(),_i=0,_len=_ref1.length;_len>_i;_i++)group=_ref1[_i],this._createCustomTrigger(group,this.contactTypeList);for(_ref2=this.customGroups(),_results=[],_j=0,_len1=_ref2.length;_len1>_j;_j++)group=_ref2[_j],_results.push(this._createCustomTrigger(group));return _results},Contact.prototype._customHeading=function(label){var heading;return heading=Contact.__super__._customHeading.call(this,label),heading.on("click",this._toggleGroups),heading},Contact.prototype._toggleGroups=function(event){var heading,items,list;return heading=$(event.target),list=heading.parent("ul"),items=list.find("li:not(.views-heading)"),list.hasClass("collapsed")?items.show():items.hide(),list.toggleClass("collapsed")},Contact}(SearchScreen.Sidebar)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Sidebar.Drag=function(_super){function Drag(){return this._stop=__bind(this._stop,this),this._start=__bind(this._start,this),this._helperElement=__bind(this._helperElement,this),_ref=Drag.__super__.constructor.apply(this,arguments)}return __extends(Drag,_super),Drag.prototype.initialize=function(original){return this.original=original,this.initializeElement(),this.observeElement()},Drag.prototype.initializeElement=function(){return this.original.addClass("draggable-sidebar-trigger"),this.element=$('<span class="sidebar-drag"></span>'),this.element.text(this.original.text().replace(/\(\d+\)/g,"").strip())},Drag.prototype.observeElement=function(){return this.original.draggable({addClasses:!1,appendTo:"body",revert:"invalid",helper:this._helperElement,start:this._start,stop:this._stop})},Drag.prototype._helperElement=function(){return this.element},Drag.prototype._start=function(){return this.trigger("triggers:disable")},Drag.prototype._stop=function(){return this.trigger("triggers:enable")},Drag}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Sidebar.Drop=function(_super){function Drop(){return this._drop=__bind(this._drop,this),_ref=Drop.__super__.constructor.apply(this,arguments)}return __extends(Drop,_super),Drop.prototype.initialize=function(element){return this.element=element,this.element.droppable({addClasses:!1,accept:".draggable-record",hoverClass:"drag-hover",drop:this._drop})},Drop.prototype._drop=function(){return this.trigger("drag-drop:move",this.element)},Drop}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};SearchScreen.Sidebar.ImportStatus=function(){function ImportStatus(sidebar){this.sidebar=sidebar,this._toggleTooltip=__bind(this._toggleTooltip,this),this._update=__bind(this._update,this),this._success=__bind(this._success,this),this.screen=this.sidebar.screen,this.screen.importStatusUrl&&"test"!==environment&&(this.assignElements(),this.assignHelpers(),this.observeElements(),this._beginInterval())}return ImportStatus.prototype.assignElements=function(){var element;return this.container=$('<div id="import-status">').hide(),this.messageContainer=$('<div class="import-message">'),this.container.append(this.messageContainer),element=this.sidebar.element.find("section .actions"),element.exists()||(element=this.sidebar.element.find("section .standalone-sections")),element.before(this.container),this.tooltip={outerContainer:$('<div class="import-tooltip">').hide(),innerContainer:$("<span>"),container:$("<ul>")},this.tooltip.outerContainer.append(this.tooltip.innerContainer),this.tooltip.innerContainer.append(this.tooltip.container),this.container.append(this.tooltip.outerContainer)},ImportStatus.prototype.assignHelpers=function(){return this.url=this.screen.importStatusUrl,this.imports=[],this.intervalTime=2e4},ImportStatus.prototype.message=function(){var count,i,message,messages,status,_i,_len,_ref;if(!this.imports.any())return"";for(messages={pending:0,"in-progress":0,complete:0},message=[],_ref=this.imports,_i=0,_len=_ref.length;_len>_i;_i++)i=_ref[_i],messages[i.status]+=1;for(status in messages)count=messages[status],count&&message.push(""+count+" "+status.titleize());return"Imports: "+message.join(", ")},ImportStatus.prototype.observeElements=function(){return this.container.on("click",this._toggleTooltip)},ImportStatus.prototype._beginInterval=function(){return setTimeout(this._update,1e3)},ImportStatus.prototype._resolveImports=function(newImports){var i,ids,imports,newImport,_i,_j,_len,_len1,_ref;for(ids=newImports.map(function(i){return i.id}),imports=[],_ref=this.imports,_i=0,_len=_ref.length;_len>_i;_i++)i=_ref[_i],ids.include(i.id)?(newImport=newImports.detect(function(ni){return ni.id===i.id}),i.status=newImport.status,i.percent=newImport.percent):i.status="complete",imports.push(i);for(ids=this.imports.map(function(i){return i.id}),_j=0,_len1=newImports.length;_len1>_j;_j++)i=newImports[_j],ids.include(i.id)||imports.push(i);return this.imports=imports},ImportStatus.prototype._setInterval=function(){return clearInterval(this.interval),this.interval=setInterval(this._update,this.intervalTime)},ImportStatus.prototype._success=function(json){var imports;return imports=json.map(function(data){return new SearchScreen.Sidebar.ImportStatus.Import(data)}),this._updateContainer(imports)},ImportStatus.prototype._update=function(){return this.sidebar.element?$.ajax({url:this.url,type:"get",noMessage:!0}).done(this._success):clearInterval(this.interval)},ImportStatus.prototype._updateContainer=function(imports){var message;return this.messageContainer.html(""),this.container.hide(),this.intervalTime=imports.any()?2e4:2e5,this._resolveImports(imports),this._updateTooltip(),this._setInterval(),message=this.message(),message.blank()?void 0:(this.messageContainer.text(message),this.container.show())},ImportStatus.prototype._toggleTooltip=function(){return this.tooltip.outerContainer.toggle()},ImportStatus.prototype._updateTooltip=function(){var i,_i,_len,_ref,_results;for(this.tooltip.container.html(""),_ref=this.imports,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)i=_ref[_i],_results.push(this.tooltip.container.append(i.tooltipElement()));return _results},ImportStatus}(),SearchScreen.Sidebar.ImportStatus.Import=function(){function Import(data){$.extend(this,data)}return Import.prototype.tooltipElement=function(){var content,element;return element=$("<li>"),content="<b>"+this.filename+"</b>",this.started_at&&element.attr("title","Started at "+this.started_at),"pending"===this.status&&(content+=": Pending"),"in-progress"===this.status&&(content+=": In Progress ("+this.percent+"%)"),"complete"===this.status&&(content+=": Complete",pjax.reload()),element.html(content),element},Import}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Sidebar.Trigger=function(_super){function Trigger(){return this._click=__bind(this._click,this),_ref=Trigger.__super__.constructor.apply(this,arguments)}return __extends(Trigger,_super),Trigger.prototype.initialize=function(element,sidebar,group){return this.element=element,this.sidebar=sidebar,this.group=group,this.screen=this.sidebar.screen,this.groupId=this.group.id,this.anchor=this.element.find("a"),this.anchor.on("click",this._click)},Trigger.prototype.addClass=function(c){return this.anchor.addClass(c)},Trigger.prototype.isActive=function(){return this.anchor.hasClass("active")},Trigger.prototype.removeClass=function(c){return this.anchor.removeClass(c)},Trigger.prototype._click=function(event){return event.preventDefault(),this.trigger("trigger:selected",this)},Trigger}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Table=function(_super){function Table(){return this._updateSelectionMessage=__bind(this._updateSelectionMessage,this),this._uncheckAllCheckboxes=__bind(this._uncheckAllCheckboxes,this),this._togglePageSelection=__bind(this._togglePageSelection,this),this._sort=__bind(this._sort,this),this._selectAllRecords=__bind(this._selectAllRecords,this),this._suspendActions=__bind(this._suspendActions,this),this._resumeActions=__bind(this._resumeActions,this),this._resize=__bind(this._resize,this),this._renderTable=__bind(this._renderTable,this),this._renderNoRecordsMessage=__bind(this._renderNoRecordsMessage,this),this._clearSelectedRecords=__bind(this._clearSelectedRecords,this),_ref=Table.__super__.constructor.apply(this,arguments)}return __extends(Table,_super),Table.prototype.initialize=function(element,screen){return this.element=element,this.screen=screen,this.sort=this.screen.sort,this.column=this.sort.split(".")[0]||this._defaultColumn(),this.direction=this.sort.split(".")[1]||"desc",this.id=uniqueId(),this.assignHelpers(),this.assignElements(),this.observeElements()},Table.prototype.assignElements=function(){return this.head=this.element.find("thead"),this.body=this.element.find("tbody")},Table.prototype.assignHelpers=function(){return this.manager=new SearchScreen.Table.Manager($("#manage-columns-wrapper"),this),this.rowTemplate=this.screen.rowTemplate,this.headerTemplate='<th class="#{classes}" name="#{column}"><span name="#{column}">#{title}</span>'+icons.sort+"</th>",this.performActions=!0},Table.prototype.observeElements=function(){return this.on("configuration:started",this._suspendActions),this.on("configuration:complete",this._resumeActions),this.on("selections:changed",this._updateSelectionMessage),this.on("selections:cleared",this._uncheckAllCheckboxes),this.on("sidebar:changed",this._clearSelectedRecords),this.on("request:complete",this._resize),this.on("table:simulate-selection-toggle",this._togglePageSelection),this.on("records:available",this._renderTable),this.on("records:unavailable",this._renderNoRecordsMessage),$(window).on("resize",this._resize)},Table.prototype.render=function(){var eventName;return eventName=this._records().any()?"available":"unavailable",this.trigger("records:"+eventName)},Table.prototype.stopAllObservations=function(){var shell,undoResizing;return shell=$("#shell"),undoResizing=shell.data("current-table")===this.id,Table.__super__.stopAllObservations.call(this),$(window).off("resize",this._resize),undoResizing?($("#shell, #shell #content").width(""),$("#shell").removeClass("inbox-container").addClass("container"),shell.data("current-table",null)):void 0},Table.prototype.updateHeadForManagement=function(configuration){return this._updateHead(configuration),this._resize()},Table.prototype._clearSelectedRecords=function(event){return event.stop(),this._uncheckAllCheckboxes(),this.screen.clearSelectedRecords()},Table.prototype._defaultColumn=function(){return"created_at"},Table.prototype._isSortableColumn=function(column){return column.match(/^cf\|/)?!1:!["groups","_groups","summary","campaign_name","_properties","offers_sent","start_date","last_sent","_status","timeframe","_recipients","mailings","primary_contact_email","primary_contact_fax","primary_contact_name","primary_contact_phone","last_offer","last_offer_date","budget_status","phone","fax"].include(column)},Table.prototype._oppositeDirection=function(isActive){return isActive?"desc"===this.direction?"asc":"desc":"asc"},Table.prototype._records=function(){return this.screen.visibleRecords()},Table.prototype._recordsForCurrentPage=function(){var element,id,record,records,_i,_len,_ref1;for(records=[],_ref1=this.body.find("tr"),_i=0,_len=_ref1.length;_len>_i;_i++)element=_ref1[_i],id=$(element).attr("record-id"),record=this.screen.records.detect(function(r){return r.id===id}),record&&records.push(record);return records},Table.prototype._renderNoRecordsMessage=function(){var _this=this;return this.head.html(""),setTimeout(function(){var html,template;if(!_this._collected)return template='<tr class="no-records"><td><p>There are no #{name} #{scope}.</p><p>You can view a different group from the sidebar on the left.</p></td></tr>',html=template.evaluate(_this.screen.selectionStats()),_this.body.html(html)},10)},Table.prototype._renderTable=function(){return this._updateHead(),this._updateBody(),this._resize()},Table.prototype._resize=function(){var content,contentWidth,defaultWidth,shell,sidebarWidth,viewportWidth;return this.element.css("width","auto"),shell=$("#shell"),shell.exists()?(shell.data("current-table",this.id),content=shell.find("#content"),defaultWidth=759,sidebarWidth=201,viewportWidth=$(window).width(),contentWidth=this.element.width(),contentWidth+sidebarWidth>viewportWidth&&(contentWidth=viewportWidth-sidebarWidth),contentWidth>defaultWidth?shell.removeClass("container").addClass("inbox-container"):(shell.removeClass("inbox-container").addClass("container"),contentWidth=defaultWidth),this.element.css({width:""+contentWidth+"px"}),shell.css({width:""+(contentWidth+sidebarWidth)+"px"}),content.css({width:""+contentWidth+"px"})):void 0},Table.prototype._resumeActions=function(){return this.performActions=!0},Table.prototype._suspendActions=function(){return this.performActions=!1},Table.prototype._selectAllRecords=function(event){return event.stop(),this.body.find("input:checkbox").check(!0),this.screen.selectAllRecords()},Table.prototype._sort=function(event){var element,isActive;if(this.performActions)return element=$(event.currentTarget),isActive=element.hasClass("is-active"),this.column=element.attr("name"),this.direction=this._oppositeDirection(isActive),this.sort=""+this.column+"."+this.direction,this.trigger("table:sorted")},Table.prototype._togglePageSelection=function(event){var checkboxes,records,selectedCheckboxes;return event.stop(),this.performActions?(checkboxes=this.body.find("input:checkbox"),selectedCheckboxes=checkboxes.filter(":checked"),records=this._recordsForCurrentPage(),checkboxes.length===selectedCheckboxes.length?(checkboxes.check(!1),this.screen.deselectRecords(records)):(checkboxes.check(!0),this.screen.selectRecords(records))):void 0},Table.prototype._uncheckAllCheckboxes=function(){return this.body.find("input:checkbox").check(!1)},Table.prototype._updateBody=function(){var column,config,record,records,row,rowHTML,_i,_j,_len,_len1,_ref1,_ref2;for(this.body.html(""),records=this._records(),config=this.screen.configuration,_ref1=this._records(),_i=0,_len=_ref1.length;_len>_i;_i++){for(record=_ref1[_i],rowHTML=this.rowTemplate.evaluate(record).replace("</tr>",""),_ref2=this.screen.configuration,_j=0,_len1=_ref2.length;_len1>_j;_j++)column=_ref2[_j],rowHTML+='<td><a href="placeholder">',rowHTML+=record["formatted_"+column]||record[column],rowHTML+="</a></td>";rowHTML+="</tr>",row=$(rowHTML),this.body.append(row),record.registerObservers(row)}return this.trigger("uniform:refresh")},Table.prototype._updateHead=function(configuration){var classes,column,content,html,isActive,_i,_len;for(null==configuration&&(configuration=this.screen.configuration),html='<tr><th><div class="select-all">'+icons.selectAll+"</div></th>",_i=0,_len=configuration.length;_len>_i;_i++)column=configuration[_i],isActive=this.column===column,classes=[],this._isSortableColumn(column)&&(classes.push("sortable"),isActive?classes=classes.concat(["sort-"+this.direction,"is-active"]):classes.push("sort-asc")),content=this.headerTemplate.evaluate({title:this.screen.fieldTitleFromName(column),classes:classes.join(" "),column:column}),html+=content;return html+="</tr>",this.head.html(html),this.selectPageTrigger=this.head.find(".select-all"),this.selectPageTrigger.on("click",this._togglePageSelection),this.head.find(".sortable").on("click",this._sort),this._updateSelectionMessage(),this.trigger("head:rendered")},Table.prototype._updateSelectionMessage=function(){var allRecordsSelected,content,headerRow,row,stats,template,text,trs;return trs=this.head.find("tr").toArray(),headerRow=$(trs.shift()),$(trs).remove(),this.screen.hasSelections()?(stats=this.screen.selectionStats(),content="",allRecordsSelected=this.screen.allRecordsSelected&&!this.screen.deselectedRecords.any()||stats.count===stats.maxCount,allRecordsSelected&&(content="All "),content+=""+stats.count+" "+stats.name+" "+stats.scope+" selected. ",allRecordsSelected||(text="Select all "+stats.maxCount+" "+stats.maxName+" "+stats.scope,content+='<a href="#" id="select-all-records">'+text+"</a>"),content+=' <a href="#" id="clear-selected-records">Clear selections</a>',template='<tr class="selection-message"><th class="selected-info" colspan="#{colspan}">#{content}</th></tr>',row=template.evaluate({colspan:headerRow.find("th").length,content:content}),this.head.append(row),this.head.find("#select-all-records").on("click",this._selectAllRecords),this.head.find("#clear-selected-records").on("click",this._clearSelectedRecords)):void 0},Table}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};SearchScreen.Table.ColumnChoice=function(){function ColumnChoice(name,manager){this.name=name,this.manager=manager,this.dragStart=__bind(this.dragStart,this),this.dragStop=__bind(this.dragStop,this),this.drag=__bind(this.drag,this),this.screen=this.manager.screen}return ColumnChoice.prototype.isVisible=function(){return this.manager.isChoiceVisible(this)},ColumnChoice.prototype.drag=function(event,ui){var className,dragOffset,dropOffset,droppable,overlap;return(droppable=this.element.draggable("option","droppable"))?(className="hover ",dragOffset=ui.offset.left-this.width/2,dropOffset=droppable.offset().left-this.element.draggable("option","droppable-width")/2,overlap=dragOffset/dropOffset,className+=1>=overlap?"before":"after",this.manager.clearHeadHoverClasses(),this.manager.clearIndicator(),droppable.addClass(className),droppable.append(this.manager.indicator())):void 0},ColumnChoice.prototype.dragStop=function(){return this.element.removeClass("dragging"),this.manager.clearHeadHoverClasses(),this.manager.clearIndicator()},ColumnChoice.prototype.dragStart=function(){return this.element.addClass("dragging"),this.width=this.element.width()},ColumnChoice.prototype.updateElement=function(container){var e;if(this.element)try{this.element.remove()}catch(_error){e=_error}return this.element=$('<div class="inbox-column draggable" name="'+this.name+'">'),this.element.text(this._title()),container.append(this.element),this.manager.enableChoiceDragging(this),this.isVisible()?this.element.show():this.element.hide()},ColumnChoice.prototype._title=function(){return this.screen.fieldTitleFromName(this.name)},ColumnChoice}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Table.Manager=function(_super){function Manager(){return this._headerDrop=__bind(this._headerDrop,this),this._headerDragStop=__bind(this._headerDragStop,this),this._headerDragStart=__bind(this._headerDragStart,this),this.enableHeaderDragging=__bind(this.enableHeaderDragging,this),this._choiceOver=__bind(this._choiceOver,this),this._choiceOut=__bind(this._choiceOut,this),this._choiceDrop=__bind(this._choiceDrop,this),this.enableChoiceDropping=__bind(this.enableChoiceDropping,this),this.enableChoiceDragging=__bind(this.enableChoiceDragging,this),this._updateConfiguration=__bind(this._updateConfiguration,this),this._show=__bind(this._show,this),this._renderChoices=__bind(this._renderChoices,this),this._refresh=__bind(this._refresh,this),this._close=__bind(this._close,this),this.saveConfiguration=__bind(this.saveConfiguration,this),this.revertConfiguration=__bind(this.revertConfiguration,this),_ref=Manager.__super__.constructor.apply(this,arguments)
}return __extends(Manager,_super),Manager.prototype.initialize=function(element,table){return this.element=element,this.table=table,this.screen=this.table.screen,this.element.exists()?(this.assignHelpers(),this.assignElements(),this.observeElements()):this._revertConfiguration()},Manager.prototype.assignElements=function(){return this.triggers={external:this.element.prev(".table-settings"),internal:this.element.find(".manage-columns-close"),save:this.element.find("#columns-save"),revert:this.element.find("#columns-revert")},this.choiceContainer=this.element.find(".manage-columns"),this._renderChoices()},Manager.prototype.assignHelpers=function(){var _this=this;return this.visible=!1,this._revertConfiguration(),this.choices=this.screen.completeConfiguration.map(function(columnName){return new SearchScreen.Table.ColumnChoice(columnName,_this)})},Manager.prototype.clearHeadHoverClasses=function(){return this.table.head.find("th.hover").removeClass("hover before after")},Manager.prototype.clearIndicator=function(){return this.table.head.find("span.drop-indicator").remove()},Manager.prototype.indicator=function(){return'<span class="drop-indicator"></span>'},Manager.prototype.isChoiceVisible=function(choice){return!this.configuration.include(choice.name)},Manager.prototype.observeElements=function(){var _this=this;return this.triggers.external.on("click",this._show),this.triggers.internal.on("click",this._close),this.triggers.revert.on("click",this.revertConfiguration),this.triggers.save.on("click",this.saveConfiguration),this.on("records:available",function(){return _this.triggers.external.show()}),this.on("records:unavailable",function(){return _this.triggers.external.hide()}),this.on("head:rendered",this._refresh),this.enableHeaderDropping(),this.on("configuration:initialized",this._updateConfiguration),this.on("configuration:changed",this._updateConfiguration)},Manager.prototype.revertConfiguration=function(event){return event.stop(),this._revertConfiguration(),this._renderTableHead()},Manager.prototype.saveConfiguration=function(event){return event.stop(),this._configurationChanged()?(this.configParams={"config[]":this.configuration},this.trigger("configuration:changed",this),this.trigger("configuration:complete")):(this.visible=!1,this.element.hide())},Manager.prototype._close=function(event){return this.visible=!1,this.revertConfiguration(event),this._renderTableHead(),this.element.hide(),this.trigger("configuration:complete")},Manager.prototype._configurationChanged=function(){return JSON.stringify(this.screen.configuration)!==JSON.stringify(this.configuration)},Manager.prototype._refresh=function(){return this.enableChoiceDropping(),this.enableHeaderDragging(),this._renderChoices()},Manager.prototype._renderChoices=function(){var choice,_i,_len,_ref1,_results;for(this.choiceContainer.html(""),_ref1=this.choices,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)choice=_ref1[_i],_results.push(choice.updateElement(this.choiceContainer));return _results},Manager.prototype._renderTableHead=function(){return this.table.updateHeadForManagement(this.configuration)},Manager.prototype._revertConfiguration=function(){return this.configuration=(this.screen.configuration||[]).dup(),this.configParams={}},Manager.prototype._show=function(event){return event.stop(),this.element.show(),this.visible=!0,this.trigger("configuration:started"),this.revertConfiguration(event),this.enableHeaderDragging()},Manager.prototype._updateConfiguration=function(){var _this=this;return setTimeout(function(){return _this._collected?void 0:(_this.element.addClass("initialized"),_this.visible=!1,_this._revertConfiguration(),_this.element.hide())},100)},Manager.prototype.enableChoiceDragging=function(columnChoice){return columnChoice.element.draggable({addClasses:!1,helper:function(){return $(this).clone().appendTo(document.body).addClass("clone-dragging")},revert:"invalid",start:columnChoice.dragStart,drag:columnChoice.drag,stop:columnChoice.dragStop,zIndex:1e3})},Manager.prototype.enableChoiceDropping=function(){return this.table.head.find("th").droppable({accept:".inbox-column",tolerance:"pointer",over:this._choiceOver,out:this._choiceOut,drop:this._choiceDrop})},Manager.prototype._choiceDrop=function(event,ui){var droppable,existingColumnName,insertIndex,newColumnName,position,removeIndex;return ui.draggable.hide(),droppable=$(event.target),position=droppable.hasClass("before")?"before":"after",existingColumnName=droppable.attr("name"),newColumnName=ui.draggable.attr("name"),insertIndex=this.configuration.indexOf(existingColumnName),removeIndex=this.configuration.indexOf(newColumnName),-1!==removeIndex&&(this.configuration.splice(removeIndex,1),insertIndex=this.configuration.indexOf(existingColumnName)),"after"===position&&insertIndex++,this.configuration.splice(insertIndex,0,newColumnName),this._renderTableHead()},Manager.prototype._choiceOut=function(event,ui){var droppable;return droppable=ui.draggable.draggable("option","droppable"),droppable&&droppable.is($(event.target))?ui.draggable.draggable("option","droppable",null):void 0},Manager.prototype._choiceOver=function(event,ui){var droppable;return droppable=$(event.target),ui.draggable.draggable("option","droppable",droppable),ui.draggable.draggable("option","droppable-width",droppable.width())},Manager.prototype.enableHeaderDragging=function(){var element,name,th,_i,_len,_ref1,_results;if(this.visible){for(_ref1=this.table.head.find("th"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)th=_ref1[_i],element=$(th),name=element.attr("name"),name?(element.addClass("draggable-header-column header-column column"),_results.push(element.draggable({helper:this._headerHelperElement(element),appendTo:"#inbox",revert:"invalid",start:this._headerDragStart,stop:this._headerDragStop}))):_results.push(void 0);return _results}},Manager.prototype.enableHeaderDropping=function(){return this.choiceContainer.droppable({accept:".draggable-header-column",hoverClass:"header-hover",drop:this._headerDrop})},Manager.prototype._headerDragStart=function(event,ui){return ui.helper.addClass("dragging")},Manager.prototype._headerDragStop=function(event,ui){return ui.helper.removeClass("dragging")},Manager.prototype._headerDrop=function(event,ui){var existingColumnName,index;return ui.draggable.hide(),existingColumnName=ui.draggable.attr("name"),index=this.configuration.indexOf(existingColumnName),this.configuration.splice(index,1),this._renderTableHead()},Manager.prototype._headerHelperElement=function(element){return function(){var helper,span;return span=$("<span>"),span.text(element.text()),helper=$('<div class="header-column column">'),helper.append(span),helper}},Manager}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Toolbar=function(_super){function Toolbar(){return this._toggleGroupMenuActions=__bind(this._toggleGroupMenuActions,this),this._toggleCampaignApply=__bind(this._toggleCampaignApply,this),this._temporarilyHideMenus=__bind(this._temporarilyHideMenus,this),this._simulateTableSelection=__bind(this._simulateTableSelection,this),this._promptForDeleteAction=__bind(this._promptForDeleteAction,this),this._populateMoveMenu=__bind(this._populateMoveMenu,this),this._populateGroupMenu=__bind(this._populateGroupMenu,this),this._performLastActionCallbacks=__bind(this._performLastActionCallbacks,this),this._openSubscriptionModal=__bind(this._openSubscriptionModal,this),this._openStatusModal=__bind(this._openStatusModal,this),this._openPermissionsModal=__bind(this._openPermissionsModal,this),this._openConfirmationModal=__bind(this._openConfirmationModal,this),this._moveObjectsToGroup=__bind(this._moveObjectsToGroup,this),this._modifyForSelectedGroup=__bind(this._modifyForSelectedGroup,this),this._initiateExport=__bind(this._initiateExport,this),this._initiateDirectMailExport=__bind(this._initiateDirectMailExport,this),this._groupObjects=__bind(this._groupObjects,this),this._confirmAction=__bind(this._confirmAction,this),this._clearParams=__bind(this._clearParams,this),this._applyGroupings=__bind(this._applyGroupings,this),this._applyCampaignSelections=__bind(this._applyCampaignSelections,this),_ref=Toolbar.__super__.constructor.apply(this,arguments)}return __extends(Toolbar,_super),Toolbar.prototype.initialize=function(element,screen){return this.element=element,this.screen=screen,this.assignElements(),this.assignHelpers(),this.observeElements(),this._modifyForSelectedGroup()},Toolbar.prototype.assignElements=function(){var element;return this.message=Message.create(),this.triggers={archive:this._actionTrigger("archive"),"delete":this._actionTrigger("delete"),markAsRead:this._actionTrigger("mark-as-read"),markAsUnread:this._actionTrigger("mark-as-unread"),"export":this._actionTrigger("export"),exportToDirectMail:this._actionTrigger("export-to-direct-mail"),resendConfirmation:this._actionTrigger("resend-confirmation"),pause:this._actionTrigger("pause"),resume:this._actionTrigger("resume"),confirm:this._actionTrigger("confirm"),subscribe:this._actionTrigger("subscribe"),updatePermissions:this._actionTrigger("update-permissions"),updateStatus:this._actionTrigger("update-status")},element=this.element.find(".dropdown-menu.for-move-to"),this.moveMenu={element:element,defaultGroups:element.find(".menu-section.for-default-groups"),customGroups:element.find(".menu-section.for-custom-groups")},element=this.element.find(".dropdown-menu.for-group"),this.groupMenu={element:element,labels:element.find(".menu-section.for-group-labels"),actions:element.find(".menu-section.for-group-actions")},element=this.element.find(".dropdown-menu.for-campaign"),this.campaignMenu={element:element,actions:element.find(".menu-section.for-campaign-actions")},this.moreMenu=this.element.find(".dropdown-menu.for-more"),this.selectionTrigger=this.element.find(".select-all"),this.menus=[this.moveMenu.element,this.groupMenu.element,this.campaignMenu.element,this.moreMenu],"offerbot_campaign"===this.screen.name?this._assignOfferbotCampaignElements():void 0},Toolbar.prototype.assignHelpers=function(){var message;return this._clearParams(),this.moveMenu.template='<a group_id="#{id}" href="#">#{title}</a>',this.groupMenu.template='<label class="group-label" for="group__#{id}"><span group_id="#{id}">#{title}</span><div class="checker"><span><input id="group__#{id}" type="checkbox" value="#{id}" /></span></div></label>',this.groupMenu.actionTemplate='<a class="group-action for-#{class}" href="#">#{title}</a>',message='<div class="trash-notice hide">'+(""+this.screen.groupLabel+" placed in the Trash are never removed so you can easily recover them. They have no effect on stats anywhere else in the app.")+"</div>",this.element.after(message),this.trashMessage=this.element.next(".trash-notice"),this.applyUniform=!1,this.lastAction=""},Toolbar.prototype.observeElements=function(){var action,trigger,_ref1;this.element.find("a").on("click",this._preventDefaultAnchorBehavior),_ref1=this.triggers;for(action in _ref1)trigger=_ref1[action],this._queueAction(action,trigger);return this.selectionTrigger.on("click",this._simulateTableSelection),this.on("action:performed:confirm",this._openConfirmationModal),this.on("action:performed:subscribe",this._openSubscriptionModal),this.on("action:performed:update-status",this._openStatusModal),this.on("action:performed:update-permissions",this._openPermissionsModal),this.on("search-screen:groups:registered",this._populateMoveMenu),this.on("search-screen:groups:registered",this._populateGroupMenu),this.on("selections:changed",this._populateGroupMenu),this.on("request:complete",this._populateMoveMenu),this.on("request:complete",this._populateGroupMenu),this.on("request:complete",this._clearParams),this.on("request:complete",this._performLastActionCallbacks),this.on("sidebar:changed",this._modifyForSelectedGroup),this.on("export:url:prepared",this._initiateExport),this.on("direct-mail:export:url:prepared",this._initiateDirectMailExport),this.on("drag-drop:move",this._moveObjectsToGroup),this.on("drag-drop:group",this._groupObjects),"offerbot_campaign"===this.screen.name&&this._observeOfferbotCampaignElements(),this._observeCampaignElements()},Toolbar.prototype._actionTrigger=function(actionName){return this.element.find('[action="'+actionName+'"]')},Toolbar.prototype._addExtraParams=function(action,params){return"moveToGroup"===action&&(params["a[group_id]"]=this.moveToGroupId),"groupObjects"===action&&(this.groupIds.add.any()&&(params["a[group_ids][add][]"]=this.groupIds.add),this.groupIds.remove.any()&&(params["a[group_ids][remove][]"]=this.groupIds.remove)),this.campaignIds.any()?params["a[campaign_ids][]"]=this.campaignIds:void 0},Toolbar.prototype._applyCampaignSelections=function(event){var c,_i,_len,_ref1;for(this.campaignIds=[],_ref1=this.campaignMenu.element.find("input:checked"),_i=0,_len=_ref1.length;_len>_i;_i++)c=_ref1[_i],this.campaignIds.push($(c).attr("value"));return this._performAction("addToCampaigns")(event)},Toolbar.prototype._applyGroupings=function(event){var c,checkbox,_i,_len,_ref1;for(this.groupIds={add:[],remove:[]},_ref1=this.groupMenu.element.find("input"),_i=0,_len=_ref1.length;_len>_i;_i++)c=_ref1[_i],checkbox=$(c),checkbox.is(":checked")?this.groupIds.add.push(checkbox.attr("value")):checkbox.parents("span.mixed").exists()||this.groupIds.remove.push(checkbox.attr("value"));return this._performAction("groupObjects")(event)},Toolbar.prototype._assignOfferbotCampaignElements=function(){var e,trigger,_i,_len,_ref1,_results,_this=this;for(this.deleteTrigger=this.triggers["delete"],delete this.triggers["delete"],this.deleteOverlay=new Overlay("#delete-with-properties"),_ref1=this.deleteOverlay.wrapper.find("a[action]"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],trigger=$(e),this._queueAction(trigger.attr("action"),trigger),_results.push(trigger.on("click",function(){return _this.deleteOverlay.hide()}));return _results},Toolbar.prototype._assignParams=function(action){var params;return params={"a[name]":action.underscore()},this.screen.allRecordsSelected?$.extend(params,{"a[all]":"yes","a[deselected_ids][]":this._deselectedIds()}):params["a[ids][]"]=this._selectedIds(),this._addExtraParams(action,params),this.actionParamData=params,this.actionParams=$.param(params)},Toolbar.prototype._clearParams=function(){return this.actionParamData={},this.actionParams="",this.moveToGroupId="",this.groupIds={add:[],remove:[]},this.campaignIds=[]},Toolbar.prototype._confirmAction=function(action){var group,message,stats;return"delete"!==action?!0:(stats=this.screen.selectionStats(),group=this.screen.activeGroup(),message="Are you sure you want to send "+stats.count+" "+stats.name+" to the Trash?",group&&"Trash"===group.name&&(message="Are you sure you want to permanently delete "+stats.count+" "+stats.name+"? This action cannot be undone."),confirm(message))},Toolbar.prototype._deselectedIds=function(){return this.screen.deselectedRecords.map(function(r){return r.id})},Toolbar.prototype._determineGroupMenuState=function(){var checkboxes,states;return checkboxes=this.groupMenu.element.find("input:checkbox"),states=checkboxes.toArray().map(function(c){var span;return span=$(c).parents("span"),span.exists()?c.checked&&span.hasClass("checked")?"checked":span.hasClass("mixed")?"mixed":"unchecked":"unchecked"}),states.join()},Toolbar.prototype._displayNoSelectionMessage=function(){return this.message.flash("Please select one or more "+this.screen.pluralName()+".","error")},Toolbar.prototype._groupObjects=function(event,target){return null==target&&(target=event.target),this.groupIds={add:[$(target).attr("group_id")],remove:[]},this._performAction("groupObjects")(event)},Toolbar.prototype._initiateDirectMailExport=function(event,exportData){var _this=this;return $.ajax({url:exportData.url,type:"get",data:exportData.data,dataType:"json"}).done(function(data){return _this._clearParams(),top.pjax.loadUrl(data.url)})},Toolbar.prototype._initiateExport=function(event,exportData){var _this=this;return $.ajax({url:exportData.url,type:"get",data:exportData.data,dataType:"json"}).done(function(data){return _this._clearParams(),window.location=""+_this.screen.baseURL+data.url})},Toolbar.prototype._modifyForSelectedGroup=function(){var group,trigger;return group=this.screen.activeGroup(),group&&"Trash"===group.name?(this.triggers["delete"].find(".t-label").text("Delete Forever"),this.trashMessage.show()):(this.triggers["delete"].find(".t-label").text("Delete Multiple"),this.trashMessage.hide()),trigger=this._actionTrigger("subscribe"),group&&group.name.match(/Confirmed/)?trigger.show():trigger.hide()},Toolbar.prototype._moveObjectsToGroup=function(event,target){var group,_this=this;return null==target&&(target=event.target),this.moveToGroupId=$(target).attr("group_id"),group=this.screen.sidebar.groups.detect(function(g){return g.id===_this.moveToGroupId}),group&&"Trash"===group.name?this._confirmAction("delete")?this._performAction("moveToGroup")(event):void 0:this._performAction("moveToGroup")(event)},Toolbar.prototype._observeCampaignElements=function(){return this.campaignMenu.element.exists()?(this.campaignMenu.element.on("click","input:checkbox",this._toggleCampaignApply),this.campaignMenu.actions.on("click","a.for-apply",this._applyCampaignSelections),this._toggleCampaignApply()):void 0},Toolbar.prototype._observeOfferbotCampaignElements=function(){return this.triggers["delete"]=this.deleteTrigger,this.deleteTrigger.on("click",this._promptForDeleteAction)},Toolbar.prototype._openConfirmationModal=function(event,data){return data.enforceLimit=!0,this._openModal("confirm",event,data)},Toolbar.prototype._openPermissionsModal=function(event,data){return this._openModal("updatePermissions",event,data)},Toolbar.prototype._openStatusModal=function(event,data){return this._openModal("updateStatus",event,data)},Toolbar.prototype._openSubscriptionModal=function(event,data){return data.enforceLimit=!0,this._openModal("subscribe",event,data)},Toolbar.prototype._openModal=function(type,event,data){var count,ids,message;return ids=data.ids,ids.any()?(count=ids.length,data.enforceLimit&&count>1e3?(message="Please choose 1000 or fewer "+this.screen.pluralName(count)+" to "+type+".",this.message.flash(message,"error")):top.modal.open(this.triggers[type].attr("url"),{},function(container){return container.find("#ids").val(ids.join(","))})):void 0},Toolbar.prototype._performAction=function(action){var _this=this;return function(event){var eventName;return event.stop(),_this.screen.hasSelections()?_this._confirmAction(action)?(_this._assignParams(action),_this.lastAction=action,eventName="performed","export"===action&&(eventName="export:prepare"),"exportToDirectMail"===action&&(eventName="direct-mail:export:prepare"),_this.trigger("action:"+eventName),_this._temporarilyHideMenus()):void 0:_this._displayNoSelectionMessage()}},Toolbar.prototype._performLastActionCallbacks=function(event,object){return"delete_with_properties"===this.lastAction&&(this.lastAction="delete"),this.trigger("action:performed:"+this.lastAction.dasherize(),object),this.lastAction=""},Toolbar.prototype._populateGroupMenu=function(){var applicableRecords,applyTrigger,checkbox,className,customGroups,element,group,groups,manageGroupsTrigger,newGroupTrigger,record,selectedRecordLength,_i,_j,_len,_len1,_ref1;for(groups=this.screen.groups,customGroups=groups.select(function(g){return g.custom}),selectedRecordLength=this.screen.selectedRecords.length,this.groupMenu.labels.html(""),this.groupMenu.actions.html(""),_i=0,_len=customGroups.length;_len>_i;_i++){for(group=customGroups[_i],element=$(this.groupMenu.template.evaluate(group)),checkbox=element.find("input:checkbox"),this.applyUniform&&this.trigger("uniform:refresh"),checkbox.on("click",this._toggleGroupMenuActions),this.groupMenu.labels.append(element),applicableRecords=[],className="",_ref1=this.screen.selectedRecords,_j=0,_len1=_ref1.length;_len1>_j;_j++)record=_ref1[_j],record.groupIds&&record.groupIds.include(group.id)&&applicableRecords.push(record);applicableRecords.length>0&&(className=applicableRecords.length===this.screen.selectedRecords.length?"checked":"mixed"),checkbox.parents("span").addClass(className),"checked"===className&&(checkbox[0].checked=!0)}return this.applyUniform=!0,this.groupMenu.state=this._determineGroupMenuState(),newGroupTrigger=$(this.groupMenu.actionTemplate.evaluate({title:"New Group","class":"new"})),manageGroupsTrigger=$(this.groupMenu.actionTemplate.evaluate({title:"Manage Groups","class":"manage"})),applyTrigger=$(this.groupMenu.actionTemplate.evaluate({title:"Apply","class":"apply"})),applyTrigger.hide(),this.groupMenu.actions.append(newGroupTrigger),this.groupMenu.actions.append(manageGroupsTrigger),this.groupMenu.actions.append(applyTrigger),newGroupTrigger.on("click",this._temporarilyHideMenus),manageGroupsTrigger.on("click",this._temporarilyHideMenus),this.trigger("groups:add:overlay-required",newGroupTrigger),this.trigger("groups:manage:overlay-required",manageGroupsTrigger),applyTrigger.on("click",this._temporarilyHideMenus),applyTrigger.on("click",this._applyGroupings)},Toolbar.prototype._populateMoveMenu=function(){var customGroups,defaultGroups,g,groups,_i,_j,_len,_len1,_results;for(groups=this.screen.groups,defaultGroups=groups.select(function(g){return g["default"]}),customGroups=groups.select(function(g){return g.custom}),this.moveMenu.defaultGroups.html(""),this.moveMenu.customGroups.html(""),this.moveMenu.customGroups.hide(),defaultGroups=defaultGroups.select(function(g){return g.moveable}),_i=0,_len=defaultGroups.length;_len>_i;_i++)g=defaultGroups[_i],this._populateMoveMenuSection(g);for(customGroups.any()&&this.moveMenu.customGroups.show(),_results=[],_j=0,_len1=customGroups.length;_len1>_j;_j++)g=customGroups[_j],_results.push(this._populateMoveMenuSection(g));return _results},Toolbar.prototype._populateMoveMenuSection=function(group){var activeGroup,element;return activeGroup=this.screen.activeGroup(),activeGroup&&group.id===activeGroup.id?void 0:(element=$(this.moveMenu.template.evaluate(group)),element.on("click",this._moveObjectsToGroup),group.custom?this.moveMenu.customGroups.append(element):this.moveMenu.defaultGroups.append(element))},Toolbar.prototype._preventDefaultAnchorBehavior=function(event){return event.preventDefault()},Toolbar.prototype._promptForDeleteAction=function(event){var campaign,count,_i,_len,_ref1;if(event.stop(),!this.screen.hasSelections())return this._displayNoSelectionMessage();for(count=0,_ref1=this.screen.selectedRecords,_i=0,_len=_ref1.length;_len>_i;_i++)campaign=_ref1[_i],count+=parseInt(campaign._properties,10);return count>0?this.deleteOverlay.show():this._performAction(this.deleteTrigger.attr("action"))(event)},Toolbar.prototype._queueAction=function(action,trigger){return trigger.on("click",this._performAction(action))},Toolbar.prototype._selectedIds=function(){return this.screen.selectedRecords.map(function(r){return r.id})},Toolbar.prototype._simulateTableSelection=function(){return this.trigger("table:simulate-selection-toggle")},Toolbar.prototype._temporarilyHideMenus=function(){var menu,_i,_len,_ref1,_results;for(_ref1=this.menus,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)menu=_ref1[_i],menu.exists()?(menu.addClass("hide"),_results.push(setTimeout(function(){return menu.removeClass("hide")},100))):_results.push(void 0);return _results},Toolbar.prototype._toggleCampaignApply=function(){var container;return container=this.campaignMenu.element.find(".apply-container"),this.campaignMenu.element.find("input:checkbox:checked").exists()?container.show():container.hide()},Toolbar.prototype._toggleGroupMenuActions=function(){var _this=this;return setTimeout(function(){return _this.groupMenu.element.find(".group-action").hide(),_this.groupMenu.state===_this._determineGroupMenuState()?_this.groupMenu.element.find(".for-new, .for-manage").show():_this.groupMenu.element.find(".for-apply").show()},10)},Toolbar}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Toolbar.LeadCampaign=function(_super){function LeadCampaign(){return this._compare=__bind(this._compare,this),_ref=LeadCampaign.__super__.constructor.apply(this,arguments)}return __extends(LeadCampaign,_super),LeadCampaign.prototype.assignElements=function(){return LeadCampaign.__super__.assignElements.call(this),this.compare=this._actionTrigger("compare")},LeadCampaign.prototype.observeElements=function(){return LeadCampaign.__super__.observeElements.call(this),this.compare.on("click",this._compare)},LeadCampaign.prototype._compare=function(event){var ids,message,record,records,url,_i,_len,_ref1;if(event.stop(),message=null,this.screen.selectedRecordCount()<2&&(message="two or more"),this.screen.selectedRecordCount()>5&&(message="five or less"),message)return this.message.flash("Please select "+message+" "+this.screen.pluralName()+" to compare.","error"),void 0;for(records=[],_ref1=this.screen.records,_i=0,_len=_ref1.length;_len>_i;_i++)record=_ref1[_i],this.screen.isRecordSelected(record)&&records.push(record);return ids=records.map(function(r){return r.id}),url=""+this.compare.data("url")+"?ids="+ids.join(","),pjax.loadUrl(url)},LeadCampaign}(SearchScreen.Toolbar)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SearchScreen.Toolbar.Property=function(_super){function Property(){return this._selectContactToShare=__bind(this._selectContactToShare,this),this._redirectToPrint=__bind(this._redirectToPrint,this),this._editWhiteboardDetails=__bind(this._editWhiteboardDetails,this),this._createPrintWindow=__bind(this._createPrintWindow,this),this._createOutsourceEmail=__bind(this._createOutsourceEmail,this),this._clearParams=__bind(this._clearParams,this),this._changeColor=__bind(this._changeColor,this),_ref=Property.__super__.constructor.apply(this,arguments)}return __extends(Property,_super),Property.prototype.assignElements=function(){return Property.__super__.assignElements.call(this),$.extend(this.triggers,{print:this._actionTrigger("print"),addToWhiteboard:this._actionTrigger("add-to-whiteboard"),outsource:this._actionTrigger("outsource"),share:this._actionTrigger("share")}),this.colorMenu=this.element.find(".dropdown-menu.for-colors")},Property.prototype.observeElements=function(){return Property.__super__.observeElements.call(this),this.colorMenu.find(".color-option").on("click",this._changeColor),this.triggers.print.on("click",this._createPrintWindow),this.on("action:performed:print",this._redirectToPrint),this.on("action:performed:add-to-whiteboard",this._editWhiteboardDetails),this.on("property:published-to-whiteboard",this._flash("Whiteboard details saved.")),this.on("property:whiteboard-data-saved",this._flash("Whiteboard details saved.")),this.on("action:performed:outsource",this._createOutsourceEmail),this.on("action:performed:share",this._selectContactToShare)},Property.prototype._addExtraParams=function(action,params){return Property.__super__._addExtraParams.call(this,action,params),"color"===action?params["a[color]"]=this.color:void 0},Property.prototype._changeColor=function(event){return this.color=$(event.target).attr("color"),this._performAction("color")(event)},Property.prototype._clearParams=function(){return Property.__super__._clearParams.call(this),this.color=""},Property.prototype._createOutsourceEmail=function(event,data){var ids,url;return ids=data.ids,ids.any()?(url=""+this.triggers.outsource.attr("url")+"?ids="+ids.join(","),top.overlay.open(url)):void 0},Property.prototype._createPrintWindow=function(){return this.screen.hasSelections()?(this.printWindow=window.open(),this.printWindow.document.write("<p>Leadsheets loading...</p>")):void 0},Property.prototype._editWhiteboardDetails=function(){var count,message,record,url;return count=this.screen.selectedRecordCount(),message=""+this.screen.pluralName(count).titleize()+" added to whiteboard.",setTimeout(this._flash(message),0),1===count?(record=this.screen.selectedRecords[0],url=this.triggers.addToWhiteboard.attr("url").evaluate(record),top.overlay.open(url)):void 0},Property.prototype._flash=function(message){var _this=this;return function(){return _this.message.flash(message,"notice")}},Property.prototype._redirectToPrint=function(event,data){var ids,url;return ids=data.ids,ids.any()?(url=""+this.triggers.print.attr("url")+"?ids="+ids.join(","),this.printWindow.location=url,this.printWindow.focus(),this.printWindow=null):void 0},Property.prototype._selectContactToShare=function(event,data){var ids,url;return ids=data.ids,ids.any()?(url=""+this.triggers.share.attr("url")+"?ids="+ids.join(","),modal.open(url)):void 0},Property}(SearchScreen.Toolbar)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.Shortcut=function(){function Shortcut(){this._determineMatch=__bind(this._determineMatch,this),this.bindings=[],this._register("back",function(){return window.history.back()}),$(document).on("keydown",this._determineMatch),pjax.on("complete",this.enable)}return Shortcut.initialize=function(){return this.instance=new Shortcut},Shortcut.map=function(mappings){return this.instance.map(mappings)},Shortcut.prototype.map=function(mappings){var handler,key,_results;_results=[];for(key in mappings)handler=mappings[key],_results.push(this._register(key,handler));return _results},Shortcut.prototype._determineMatch=function(event){var binding,tagName,_i,_len,_ref,_results;if(!event.ctrlKey&&!event.metaKey&&(tagName=event.target.tagName.toLowerCase(),"input"!==tagName&&"select"!==tagName&&"textarea"!==tagName&&!$(event.target).is("[contenteditable]"))){for(_ref=this.bindings.sort(this.sortFunction),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)binding=_ref[_i],_results.push(binding.determineMatch(event));return _results}},Shortcut.prototype._register=function(keyCombo,urlOrHandler,useOverlay){var binding,existingBinding,h,handler,key,_i,_len,_ref;if(handler=urlOrHandler,"overlay"!==keyCombo){for(existingBinding=null,_ref=this.bindings,_i=0,_len=_ref.length;_len>_i;_i++)binding=_ref[_i],binding.keyCombo===keyCombo&&(existingBinding=binding);if(!existingBinding)return"string"==typeof urlOrHandler&&(handler=useOverlay?function(){return top.overlay.open(urlOrHandler)}:function(){return window.location.href!==urlOrHandler?pjax.loadUrl(urlOrHandler):void 0}),this.bindings.push(new Shortcut.Binding(keyCombo,handler,this))}else for(key in handler)h=handler[key],this._register(key,h,!0)},Shortcut.prototype.sortFunction=function(a,b){return b.currentMatches.length-a.currentMatches.length},Shortcut}()}.call(this),function(){Shortcut.Binding=function(){function Binding(keyCombo,handler,shortcut){this.keyCombo=keyCombo,this.handler=handler,this.shortcut=shortcut,this._reset()}return Binding.prototype.determineMatch=function(event){var characterToMatch,enteredCharacter,lastMatched;return lastMatched=this.currentMatches[this.currentMatches.length-1],enteredCharacter=String.fromCharCode(event.keyCode).toLowerCase(),enteredCharacter!==lastMatched?(characterToMatch=this.availableMatches.shift(),enteredCharacter===characterToMatch?(this.currentMatches.push(characterToMatch),this.currentMatches.join("")===this.keyCombo&&this.handler(),void 0):this._reset()):void 0},Binding.prototype._reset=function(){return this.keyMatches=this.keyCombo.split(""),this.availableMatches=this.keyMatches.dup(),this.currentMatches=[]},Binding}(),Shortcut.initialize()}.call(this),function(){this.Signature={}}.call(this);/*
 * Copyright (c) 2009 Simo Kinnunen.
 * Licensed under the MIT license.
 *
 * @version 1.09i
 */
var Cufon=function(){function s(D){var C=this.face=D.face,B={" ":1,"":1,"":1};this.glyphs=D.glyphs,this.w=D.w,this.baseSize=parseInt(C["units-per-em"],10),this.family=C["font-family"].toLowerCase(),this.weight=C["font-weight"],this.style=C["font-style"]||"normal",this.viewBox=function(){var F=C.bbox.split(/\s+/),E={minX:parseInt(F[0],10),minY:parseInt(F[1],10),maxX:parseInt(F[2],10),maxY:parseInt(F[3],10)};return E.width=E.maxX-E.minX,E.height=E.maxY-E.minY,E.toString=function(){return[this.minX,this.minY,this.width,this.height].join(" ")},E}(),this.ascent=-parseInt(C.ascent,10),this.descent=-parseInt(C.descent,10),this.height=-this.ascent+this.descent,this.spacing=function(L,N,E){for(var M,K,G,H,O=this.glyphs,P=[],F=0,J=-1,I=-1;H=L[++J];)M=O[H]||this.missingGlyph,M&&(K&&(F-=G=K[H]||0,P[I]-=G),F+=P[++I]=~~(M.w||this.w)+N+(B[H]?E:0),K=M.k);return P.total=F,P}}function f(){var C={},B={oblique:"italic",italic:"oblique"};this.add=function(D){(C[D.style]||(C[D.style]={}))[D.weight]=D},this.get=function(H,I){var G=C[H]||C[B[H]]||C.normal||C.italic||C.oblique;if(!G)return null;if(I={normal:400,bold:700}[I]||parseInt(I,10),G[I])return G[I];var F,D,E={1:1,99:0}[I%100],K=[];void 0===E&&(E=I>400),500==I&&(I=400);for(var J in G)k(G,J)&&(J=parseInt(J,10),(!F||F>J)&&(F=J),(!D||J>D)&&(D=J),K.push(J));return F>I&&(I=F),I>D&&(I=D),K.sort(function(M,L){return(E?M>=I&&L>=I?L>M:M>L:I>=M&&I>=L?M>L:L>M)?-1:1}),G[K[0]]}}function r(){function D(F,G){return F.contains?F.contains(G):16&F.compareDocumentPosition(G)}function B(G){var F=G.relatedTarget;F&&!D(this,F)&&C(this,"mouseover"==G.type)}function E(F){C(this,"mouseenter"==F.type)}function C(F,G){setTimeout(function(){var H=d.get(F).options;m.replace(F,G?h(H,H.hover):H,!0)},10)}this.attach=function(F){void 0===F.onmouseenter?(q(F,"mouseover",B),q(F,"mouseout",B)):(q(F,"mouseenter",E),q(F,"mouseleave",E))}}function u(){function B(H){for(var G,E=[],F=0;G=H[F];++F)E[F]=C[D[G]];return E}var C=[],D={};this.add=function(F,E){D[F]=C.push(E)-1},this.repeat=function(){for(var F,E=arguments.length?B(arguments):C,G=0;F=E[G++];)m.replace(F[0],F[1],!0)}}function A(){function C(E){return E.cufid||(E.cufid=++B)}var D={},B=0;this.get=function(E){var F=C(E);return D[F]||(D[F]={})}}function a(B){var D={},C={};this.extend=function(E){for(var F in E)k(E,F)&&(D[F]=E[F]);return this},this.get=function(E){return void 0!=D[E]?D[E]:B[E]},this.getSize=function(F,E){return C[F]||(C[F]=new n.Size(this.get(F),E))},this.isUsable=function(){return!!B}}function q(C,B,D){C.addEventListener?C.addEventListener(B,D,!1):C.attachEvent&&C.attachEvent("on"+B,function(){return D.call(C,window.event)})}function v(C,B){var D=d.get(C);return D.options?C:(B.hover&&B.hoverables[C.nodeName.toLowerCase()]&&b.attach(C),D.options=B,C)}function j(B){var C={};return function(D){return k(C,D)||(C[D]=B.apply(null,arguments)),C[D]}}function c(F,E){for(var D,B=n.quotedList(E.get("fontFamily").toLowerCase()),C=0;D=B[C];++C)if(i[D])return i[D].get(E.get("fontStyle"),E.get("fontWeight"));return null}function g(B){return document.getElementsByTagName(B)}function k(C,B){return C.hasOwnProperty(B)}function h(){for(var B,F,C={},E=0,D=arguments.length;B=arguments[E],D>E;++E)for(F in B)k(B,F)&&(C[F]=B[F]);return C}function o(E,M,C,N,F,D){var H,K=document.createDocumentFragment();if(""===M)return K;var L=N.separate,I=M.split(p[L]),B="words"==L;B&&t&&(/^\s/.test(M)&&I.unshift(""),/\s$/.test(M)&&I.push(""));for(var J=0,G=I.length;G>J;++J)H=z[N.engine](E,B?n.textAlign(I[J],C,J,G):I[J],C,N,F,D,G-1>J),H&&K.appendChild(H);return K}function l(D,M){var C=D.nodeName.toLowerCase();if(!M.ignore[C]){var G,K,I,H,J,E=!M.textless[C],B=n.getStyle(v(D,M)).extend(M),F=c(D,B);if(F)for(G=D.firstChild;G;G=I)K=G.nodeType,I=G.nextSibling,E&&3==K&&(H?(H.appendData(G.data),D.removeChild(G)):H=G,I)||(H&&(D.replaceChild(o(F,n.whiteSpace(H.data,B,H,J),B,M,G,D),H),H=null),1==K&&(G.firstChild&&("cufon"==G.nodeName.toLowerCase()?z[M.engine](F,null,B,M,G,D):arguments.callee(G,M)),J=G))}}var m=function(){return m.replace.apply(null,arguments)},x=m.DOM={ready:function(){var C=!1,E={loaded:1,complete:1},B=[],D=function(){if(!C){C=!0;for(var F;F=B.shift();F());}};return document.addEventListener&&(document.addEventListener("DOMContentLoaded",D,!1),window.addEventListener("pageshow",D,!1)),!window.opera&&document.readyState&&!function(){E[document.readyState]?D():setTimeout(arguments.callee,10)}(),document.readyState&&document.createStyleSheet&&!function(){try{document.body.doScroll("left"),D()}catch(F){setTimeout(arguments.callee,1)}}(),q(window,"load",D),function(F){arguments.length?C?F():B.push(F):D()}}(),root:function(){return document.documentElement||document.body}},n=m.CSS={Size:function(C,B){this.value=parseFloat(C),this.unit=String(C).match(/[a-z%]*$/)[0]||"px",this.convert=function(D){return D/B*this.value},this.convertFrom=function(D){return D/this.value*B},this.toString=function(){return this.value+this.unit}},addClass:function(C,B){var D=C.className;return C.className=D+(D&&" ")+B,C},color:j(function(C){var B={};return B.color=C.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(E,D,F){return B.opacity=parseFloat(F),"rgb("+D+")"}),B}),fontStretch:j(function(B){return"number"==typeof B?B:/%$/.test(B)?parseFloat(B)/100:{"ultra-condensed":.5,"extra-condensed":.625,condensed:.75,"semi-condensed":.875,"semi-expanded":1.125,expanded:1.25,"extra-expanded":1.5,"ultra-expanded":2}[B]||1}),getStyle:function(C){var B=document.defaultView;return B&&B.getComputedStyle?new a(B.getComputedStyle(C,null)):C.currentStyle?new a(C.currentStyle):new a(C.style)},gradient:j(function(F){for(var D,G={id:F,type:F.match(/^-([a-z]+)-gradient\(/)[1],stops:[]},C=F.substr(F.indexOf("(")).match(/([\d.]+=)?(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)/gi),E=0,B=C.length;B>E;++E)D=C[E].split("=",2).reverse(),G.stops.push([D[1]||E/(B-1),D[0]]);return G}),quotedList:j(function(E){for(var B,D=[],C=/\s*((["'])([\s\S]*?[^\\])\2|[^,]+)\s*/g;B=C.exec(E);)D.push(B[3]||B[1]);return D}),recognizesMedia:j(function(G){var D,C,B,E=document.createElement("style");E.type="text/css",E.media=G;try{E.appendChild(document.createTextNode("/**/"))}catch(F){}return C=g("head")[0],C.insertBefore(E,C.firstChild),D=E.sheet||E.styleSheet,B=D&&!D.disabled,C.removeChild(E),B}),removeClass:function(D,C){var B=RegExp("(?:^|\\s+)"+C+"(?=\\s|$)","g");return D.className=D.className.replace(B,""),D},supports:function(D,C){var B=document.createElement("span").style;return void 0===B[D]?!1:(B[D]=C,B[D]===C)},textAlign:function(E,D,B,C){return"right"==D.get("textAlign")?B>0&&(E=" "+E):C-1>B&&(E+=" "),E},textShadow:j(function(F){if("none"==F)return null;for(var B,E=[],G={},C=0,D=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/gi;B=D.exec(F);)","==B[0]?(E.push(G),G={},C=0):B[1]?G.color=B[1]:G[["offX","offY","blur"][C++]]=B[2];return E.push(G),E}),textTransform:function(){var B={uppercase:function(C){return C.toUpperCase()},lowercase:function(C){return C.toLowerCase()},capitalize:function(C){return C.replace(/\b./g,function(D){return D.toUpperCase()})}};return function(E,D){var C=B[D.get("textTransform")];return C?C(E):E}}(),whiteSpace:function(){var D={inline:1,"inline-block":1,"run-in":1},C=/^\s+/,B=/\s+$/;return function(H,F,G,E){return E&&"br"==E.nodeName.toLowerCase()&&(H=H.replace(C,"")),D[F.get("display")]?H:(G.previousSibling||(H=H.replace(C,"")),G.nextSibling||(H=H.replace(B,"")),H)}}()};n.ready=function(){function C(K){return K.disabled||G(K.sheet,K.media||"screen")}function G(M,P){if(!n.recognizesMedia(P||"all"))return!0;if(!M||M.disabled)return!1;try{var O,Q=M.cssRules;if(Q)search:for(var L=0,K=Q.length;O=Q[L],K>L;++L)switch(O.type){case 2:break;case 3:if(!G(O.styleSheet,O.media.mediaText))return!1;break;default:break search}}catch(N){}return!0}function F(){if(document.createStyleSheet)return!0;var L,K;for(K=0;L=I[K];++K)if("stylesheet"==L.rel.toLowerCase()&&!C(L))return!1;for(K=0;L=J[K];++K)if(!C(L))return!1;return!0}var B=!n.recognizesMedia("all"),E=!1,D=[],H=function(){B=!0;for(var K;K=D.shift();K());},I=g("link"),J=g("style");return x.ready(function(){E||(E=n.getStyle(document.body).isUsable()),B||E&&F()?H():setTimeout(arguments.callee,10)}),function(K){B?K():D.push(K)}}();var t=0==" ".split(/\s+/).length,d=new A,b=new r,y=new u,e=!1,z={},i={},w={autoDetect:!1,engine:null,forceHitArea:!1,hover:!1,hoverables:{a:!0},ignore:{applet:1,canvas:1,col:1,colgroup:1,head:1,iframe:1,map:1,optgroup:1,option:1,script:1,select:1,style:1,textarea:1,title:1,pre:1},printable:!0,selector:window.Sizzle||window.jQuery&&function(B){return jQuery(B)}||window.dojo&&dojo.query||window.Ext&&Ext.query||window.YAHOO&&YAHOO.util&&YAHOO.util.Selector&&YAHOO.util.Selector.query||window.$$&&function(B){return $$(B)}||window.$&&function(B){return $(B)}||document.querySelectorAll&&function(B){return document.querySelectorAll(B)}||g,separate:"words",textless:{dl:1,html:1,ol:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,ul:1},textShadow:"none"},p={words:/\s/.test("")?/[^\S\u00a0]+/:/\s+/,characters:"",none:/^/};return m.now=function(){return x.ready(),m},m.refresh=function(){return y.repeat.apply(y,arguments),m},m.registerEngine=function(C,B){return B?(z[C]=B,m.set("engine",C)):m},m.registerFont=function(D){if(!D)return m;var B=new s(D),C=B.family;return i[C]||(i[C]=new f),i[C].add(B),m.set("fontFamily",'"'+C+'"')},m.replace=function(D,C,B){return C=h(w,C),C.engine?(e||(n.addClass(x.root(),"cufon-active cufon-loading"),n.ready(function(){n.addClass(n.removeClass(x.root(),"cufon-loading"),"cufon-ready")}),e=!0),C.hover&&(C.forceHitArea=!0),C.autoDetect&&delete C.fontFamily,"string"==typeof C.textShadow&&(C.textShadow=n.textShadow(C.textShadow)),"string"==typeof C.color&&/^-/.test(C.color)?C.textGradient=n.gradient(C.color):delete C.textGradient,B||y.add(D,arguments),(D.nodeType||"string"==typeof D)&&(D=[D]),n.ready(function(){for(var F=0,E=D.length;E>F;++F){var G=D[F];"string"==typeof G?m.replace(C.selector(G),C,!0):l(G,C)}}),m):m},m.set=function(B,C){return w[B]=C,m},m}();Cufon.registerEngine("vml",function(){function c(i,j){return a(i,/(?:em|ex|%)$|^[a-z-]+$/i.test(j)?"1em":j)}function a(l,m){if("0"===m)return 0;if(/px$/i.test(m))return parseFloat(m);var k=l.style.left,j=l.runtimeStyle.left;l.runtimeStyle.left=l.currentStyle.left,l.style.left=m.replace("%","em");var i=l.style.pixelLeft;return l.style.left=k,l.runtimeStyle.left=j,i}function f(l,k,j,n){var i="computed"+n,m=k[i];return isNaN(m)&&(m=k.get(n),k[i]=m="normal"==m?0:~~j.convertFrom(a(l,m))),m}function d(p){var q=p.id;if(!g[q]){var n=p.stops,o=document.createElement("cvml:fill"),i=[];o.type="gradient",o.angle=180,o.focus="0",o.method="sigma",o.color=n[0][1];for(var m=1,l=n.length-1;l>m;++m)i.push(100*n[m][0]+"% "+n[m][1]);o.colors=i.join(","),o.color2=n[l][1],g[q]=o}return g[q]}var e=document.namespaces;if(e){e.add("cvml","urn:schemas-microsoft-com:vml"),e=null;var b=document.createElement("cvml:shape");if(b.style.behavior="url(#default#VML)",b.coordsize){b=null;var h=(document.documentMode||0)<8;document.write(('<style type="text/css">cufoncanvas{text-indent:0;}@media screen{cvml\\:shape,cvml\\:rect,cvml\\:fill,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute;}cufoncanvas{position:absolute;text-align:left;}cufon{display:inline-block;position:relative;vertical-align:'+(h?"middle":"text-bottom")+";}cufon cufontext{position:absolute;left:-10000in;font-size:1px;}a cufon{cursor:pointer}}@media print{cufon cufoncanvas{display:none;}}</style>").replace(/;/g,"!important;"));var g={};return function(ac,G,Y,C,K,ad,W){var n=null===G;n&&(G=K.alt);var y,q,I=ac.viewBox,p=Y.computedFontSize||(Y.computedFontSize=new Cufon.CSS.Size(c(ad,Y.get("fontSize"))+"px",ac.baseSize));if(n)y=K,q=K.firstChild;else{if(y=document.createElement("cufon"),y.className="cufon cufon-vml",y.alt=G,q=document.createElement("cufoncanvas"),y.appendChild(q),C.printable){var Z=document.createElement("cufontext");Z.appendChild(document.createTextNode(G)),y.appendChild(Z)}W||y.appendChild(document.createElement("cvml:shape"))}var ai=y.style,R=q.style,l=p.convert(I.height),af=Math.ceil(l),V=af/l,P=V*Cufon.CSS.fontStretch(Y.get("fontStretch")),U=I.minX,T=I.minY;R.height=af,R.top=Math.round(p.convert(T-ac.ascent)),R.left=Math.round(p.convert(U)),ai.height=p.convert(ac.height)+"px";var F=Y.get("color"),ag=Cufon.CSS.textTransform(G,Y).split(""),L=ac.spacing(ag,f(ad,Y,p,"letterSpacing"),f(ad,Y,p,"wordSpacing"));if(!L.length)return null;for(var m,w,k=L.total,x=-U+k+(I.width-L[L.length-1]),ah=p.convert(x*P),X=Math.round(ah),O=x+","+I.height,J="r"+O+"ns",u=C.textGradient&&d(C.textGradient),o=ac.glyphs,S=0,H=C.textShadow,ab=-1,aa=0;w=ag[++ab];){var v,D=o[ag[ab]]||ac.missingGlyph;if(D){if(n)for(v=q.childNodes[aa];v.firstChild;)v.removeChild(v.firstChild);else v=document.createElement("cvml:shape"),q.appendChild(v);v.stroked="f",v.coordsize=O,v.coordorigin=m=U-S+","+T,v.path=(D.d?"m"+D.d+"xe":"")+"m"+m+J,v.fillcolor=F,u&&v.appendChild(u.cloneNode(!1));var ae=v.style;if(ae.width=X,ae.height=af,H){var z,s=H[0],r=H[1],B=Cufon.CSS.color(s.color),N=document.createElement("cvml:shadow");N.on="t",N.color=B.color,N.offset=s.offX+","+s.offY,r&&(z=Cufon.CSS.color(r.color),N.type="double",N.color2=z.color,N.offset2=r.offX+","+r.offY),N.opacity=B.opacity||z&&z.opacity||1,v.appendChild(N)}S+=L[aa++]}}var t,A,M=v.nextSibling;if(C.forceHitArea?(M||(M=document.createElement("cvml:rect"),M.stroked="f",M.className="cufon-vml-cover",t=document.createElement("cvml:fill"),t.opacity=0,M.appendChild(t),q.appendChild(M)),A=M.style,A.width=X,A.height=af):M&&q.removeChild(M),ai.width=Math.max(Math.ceil(p.convert(k*P)),0),h){var Q=Y.computedYAdjust;if(void 0===Q){var E=Y.get("lineHeight");"normal"==E?E="1em":isNaN(E)||(E+="em"),Y.computedYAdjust=Q=.5*(a(ad,E)-parseFloat(ai.height))}Q&&(ai.marginTop=Math.ceil(Q)+"px",ai.marginBottom=Q+"px")}return y}}}}()),Cufon.registerEngine("canvas",function(){function d(p,h){var k,n=0,m=0,g=[],o=/([mrvxe])([^a-z]*)/g;generate:for(var j=0;k=o.exec(p);++j){var l=k[2].split(",");switch(k[1]){case"v":g[j]={m:"bezierCurveTo",a:[n+~~l[0],m+~~l[1],n+~~l[2],m+~~l[3],n+=~~l[4],m+=~~l[5]]};break;case"r":g[j]={m:"lineTo",a:[n+=~~l[0],m+=~~l[1]]};break;case"m":g[j]={m:"moveTo",a:[n=~~l[0],m=~~l[1]]};break;case"x":g[j]={m:"closePath"};break;case"e":break generate}h[g[j].m].apply(h,g[j].a)}return g}function c(m,k){for(var j=0,h=m.length;h>j;++j){var g=m[j];k[g.m].apply(k,g.a)}}var b=document.createElement("canvas");if(b&&b.getContext&&b.getContext.apply){b=null;var a=Cufon.CSS.supports("display","inline-block"),e=!a&&("BackCompat"==document.compatMode||/frameset|transitional/i.test(document.doctype.publicId)),f=document.createElement("style");return f.type="text/css",f.appendChild(document.createTextNode(("cufon{text-indent:0;}@media screen,projection{cufon{display:inline;display:inline-block;position:relative;vertical-align:middle;"+(e?"":"font-size:1px;line-height:1px;")+"}cufon cufontext{display:-moz-inline-box;display:inline-block;width:0;height:0;overflow:hidden;text-indent:-10000in;}"+(a?"cufon canvas{position:relative;}":"cufon canvas{position:absolute;}")+"}@media print{cufon{padding:0;}cufon canvas{display:none;}}").replace(/;/g,"!important;"))),document.getElementsByTagName("head")[0].appendChild(f),function(V,w,P,t,C){function T(){var ab,y,x=V.glyphs,l=-1,g=-1;for(X.scale(G,1);y=Z[++l];){var ab=x[Z[l]]||V.missingGlyph;ab&&(ab.d&&(X.beginPath(),ab.code?c(ab.code,X):ab.code=d("m"+ab.d,X),X.fill()),X.translate(E[++g],0))}X.restore()}var k=null===w;k&&(w=C.getAttribute("alt"));var A=V.viewBox,m=P.getSize("fontSize",V.baseSize),B=0,O=0,N=0,u=0,z=t.textShadow,L=[];if(z)for(var U=z.length;U--;){var F=z[U],K=m.convertFrom(parseFloat(F.offX)),I=m.convertFrom(parseFloat(F.offY));L[U]=[K,I],B>I&&(B=I),K>O&&(O=K),I>N&&(N=I),u>K&&(u=K)}var Z=Cufon.CSS.textTransform(w,P).split(""),E=V.spacing(Z,~~m.convertFrom(parseFloat(P.get("letterSpacing"))||0),~~m.convertFrom(parseFloat(P.get("wordSpacing"))||0));if(!E.length)return null;var h=E.total;O+=A.width-E[E.length-1],u+=A.minX;var s,n;if(k)s=C,n=C.firstChild;else if(s=document.createElement("cufon"),s.className="cufon cufon-canvas",s.setAttribute("alt",w),n=document.createElement("canvas"),s.appendChild(n),t.printable){var S=document.createElement("cufontext");S.appendChild(document.createTextNode(w)),s.appendChild(S)}var aa=s.style,H=n.style,j=m.convert(A.height),Y=Math.ceil(j),M=Y/j,G=M*Cufon.CSS.fontStretch(P.get("fontStretch")),J=h*G,Q=Math.ceil(m.convert(J+O-u)),o=Math.ceil(m.convert(A.height-B+N));n.width=Q,n.height=o,H.width=Q+"px",H.height=o+"px",B+=A.minY,H.top=Math.round(m.convert(B-V.ascent))+"px",H.left=Math.round(m.convert(u))+"px";var r=Math.max(Math.ceil(m.convert(J)),0)+"px";a?(aa.width=r,aa.height=m.convert(V.height)+"px"):(aa.paddingLeft=r,aa.paddingBottom=m.convert(V.height)-1+"px");var X=n.getContext("2d"),D=j/A.height;if(X.scale(D,D*M),X.translate(-u,-B),X.save(),z)for(var U=z.length;U--;){var F=z[U];X.save(),X.fillStyle=F.color,X.translate.apply(X,L[U]),T()}var q=t.textGradient;if(q){for(var v=q.stops,p=X.createLinearGradient(0,A.minY,0,A.maxY),U=0,R=v.length;R>U;++U)p.addColorStop.apply(p,v[U]);X.fillStyle=p}else X.fillStyle=P.get("color");return T(),s}}}()),Cufon.registerFont({w:119,face:{"font-family":"Brush SCI","font-weight":400,"font-style":"italic","font-stretch":"normal","units-per-em":"360","panose-1":"3 6 8 2 4 4 6 7 3 4",ascent:"288",descent:"-72","cap-height":"7",bbox:"-60 -243.341 352 104","underline-thickness":"17.9297","underline-position":"-27.0703",slope:"-37","unicode-range":"U+0020-U+007E"},glyphs:{" ":{w:101,k:{T:23,A:9}},"!":{d:"60,-64v-33,-16,1,-54,12,-72r53,-89v13,-4,26,4,31,13r-88,132v2,0,4,2,4,4v1,3,-9,13,-12,12xm41,-58v28,4,15,54,-3,57v-27,-2,-12,-53,3,-57",w:123},'"':{d:"44,-130v-3,-28,-6,-57,-5,-89r26,0v1,32,-2,61,-5,89r-16,0xm91,-130v-4,-28,-7,-56,-6,-89r27,0v1,32,-2,61,-5,89r-16,0",w:108},"#":{d:"20,-135r0,-23r51,0r14,-64r22,0r-13,64r64,0r13,-64r23,0r-13,64r30,0r0,23r-35,0r-11,56r46,0r0,23r-51,0r-13,63r-24,0r14,-63r-64,0r-14,63r-23,0r14,-63r-30,0r0,-23r35,0r11,-56r-46,0xm153,-135r-64,0r-12,56r65,0",w:218},$:{d:"69,-114v-51,3,-33,-56,-4,-67v8,-3,19,-7,33,-10v3,-10,11,-32,23,-23r-8,20r22,-3v5,-14,12,-32,27,-27r-11,27v19,1,31,1,32,18v1,18,-21,26,-36,25v3,-4,14,-7,3,-10v-3,-1,-7,-1,-12,-1r-14,38v55,2,44,63,10,77v-10,5,-23,10,-38,13v-5,12,-6,30,-15,39v-11,-5,-6,-25,-2,-37v-6,0,-13,1,-22,1r-11,35v-8,-9,-10,-19,-3,-38v-31,-2,-36,-28,-11,-46v8,7,12,10,23,13xm87,-162v-20,3,-49,24,-10,27xm124,-166r-23,2r-11,30r21,4xm107,-73v23,-5,46,-29,11,-36xm105,-111r-23,-2r-14,45v9,0,16,0,23,-2",w:168},"%":{d:"54,-142v2,-35,31,-73,69,-65v5,8,18,10,16,25v-3,33,-25,70,-59,72v-17,1,-27,-14,-26,-32xm106,-191v-19,3,-48,46,-23,60v24,-2,43,-27,45,-50v2,-17,-15,-5,-22,-10xm188,-90v11,4,24,9,23,28v-1,32,-29,63,-54,70v-46,-15,-15,-99,31,-98xm191,-75v-22,4,-54,33,-39,61v24,4,39,-31,44,-53v0,-6,-1,-8,-5,-8xm48,17v-12,-11,-13,-31,3,-48r83,-88r92,-78v11,1,5,11,-2,20r-116,121v-21,24,-36,52,-60,73",w:247},"&":{d:"127,-33v-21,14,-38,29,-63,32v-30,-2,-50,-28,-50,-60v0,-41,34,-57,68,-78v-9,-56,29,-93,76,-98v16,-2,32,9,31,24v0,44,-49,59,-74,78v4,15,10,30,18,45v22,-12,31,-30,48,-42v11,31,-12,56,-29,72r11,13v2,-2,6,-8,10,-9v2,-1,5,2,4,4v2,8,-19,44,-27,42v-11,-2,-16,-17,-23,-23xm157,-224v-23,7,-47,31,-45,63v24,-12,47,-33,53,-55v0,-5,-3,-8,-8,-8xm88,-115v-19,13,-40,31,-45,55v8,31,50,0,65,-9",w:176},"'":{d:"53,-130v-4,-28,-7,-56,-6,-89r26,0v1,32,-1,61,-4,89r-16,0",w:78},"(":{d:"127,-240v12,9,3,22,-10,35v-35,37,-71,117,-40,179v3,-4,5,-8,6,-2v6,25,-20,37,-31,14v-40,-83,16,-196,75,-226",k:{y:5,j:14,g:5,f:5,J:5}},")":{d:"17,-12v27,-57,67,-106,58,-187v-1,-16,-9,-3,-9,-12v-1,-12,7,-23,17,-23v46,26,16,117,-2,154v-18,36,-29,66,-55,79v-5,-1,-9,-6,-9,-11"},"*":{d:"57,-165v-2,15,16,43,-4,44v-36,2,-9,-20,-12,-44v-16,11,-41,39,-54,8v9,-12,34,-10,47,-20v-9,-7,-43,-5,-47,-16v-1,-2,11,-22,15,-20v13,3,25,12,40,21v2,-12,-8,-35,-9,-42v10,-12,39,-2,26,21v-2,8,-3,15,-3,22v14,-6,19,-30,35,-34v8,2,13,18,15,26v-2,15,-33,10,-42,19v10,5,38,4,41,15v1,6,-10,21,-16,20v-8,-3,-22,-14,-32,-20",w:116},"+":{d:"30,-96r0,-28r82,0r0,-83r28,0r0,83r83,0r0,28r-83,0r0,82r-28,0r0,-82r-82,0",w:240},",":{d:"24,18r8,-14v-6,-2,-8,-2,-9,-7v2,-12,18,-30,30,-32v18,12,-16,53,-29,53"},"-":{d:"43,-80v9,-31,71,-29,104,-20v-14,19,-45,26,-84,24v-10,0,-18,2,-20,-4",w:183},"":{d:"43,-80v9,-31,71,-29,104,-20v-14,19,-45,26,-84,24v-10,0,-18,2,-20,-4",w:183},".":{d:"46,-40v18,8,-5,40,-18,41v-18,-9,4,-40,18,-41"},"/":{d:"26,24r-25,0r74,-267r26,0",w:101},0:{d:"51,0v-53,-4,-60,-76,-34,-120v26,-44,64,-100,126,-98v8,2,12,6,13,14v12,5,17,18,16,37v-4,81,-55,150,-121,167xm155,-168v-1,-28,-28,-16,-40,-2r7,-12v-47,23,-95,71,-95,130v0,15,4,22,14,22v58,-17,104,-72,114,-138",w:157},1:{d:"42,-1v-57,-8,-21,-86,-3,-119r38,-70v-13,6,-27,13,-42,22v0,-31,28,-31,44,-49v6,-4,13,-7,20,-11v22,31,-5,65,-15,90v-19,50,-44,82,-39,132v0,3,-1,5,-3,5",w:97},2:{d:"158,-178v-21,-28,-83,7,-103,23v17,3,29,0,34,9v-8,10,-33,8,-48,13v-16,-23,8,-73,40,-76v17,-6,47,-13,68,-13v32,0,30,54,19,77v-32,43,-112,69,-148,109v22,-2,87,-15,117,-23v3,0,4,2,4,5v-8,46,-42,50,-105,54v-27,2,-30,-17,-34,-36v15,-76,137,-87,156,-142",w:157},3:{d:"136,-75v-4,-27,-63,-21,-93,-17v-6,-18,2,-43,34,-42v36,-7,69,-11,94,-29v15,-17,6,-26,-27,-26v-24,1,-54,2,-66,12v1,8,12,4,15,12v0,3,-13,5,-37,4v-7,-4,-9,-7,-9,-18v7,-33,51,-36,93,-40v56,-5,76,56,33,79v-9,6,-40,14,-92,25v39,3,74,7,77,45v-7,48,-60,73,-117,74v-25,0,-48,-7,-50,-26v2,-12,15,-36,27,-30r-4,8v3,8,16,11,30,11v40,-2,80,-13,92,-42",w:183},4:{d:"2,-82v24,-69,95,-110,162,-137v10,1,9,9,5,19v17,42,-38,68,-47,108v45,-12,45,1,22,31r-37,8v-4,11,-9,28,-3,39v-2,6,-38,39,-37,8v0,-14,1,-28,5,-41r-36,2v-28,4,-32,-17,-34,-37xm147,-174v11,-14,21,-19,11,-23v-48,25,-110,64,-132,116v23,-1,44,-3,62,-5v16,-36,37,-61,59,-88",w:153},5:{d:"129,-95v-16,-46,-97,32,-102,-33v7,-25,28,-54,61,-85r91,1v-17,26,-7,46,-58,40r-40,0v-13,11,-23,25,-31,42v47,-21,94,-16,94,36v0,63,-62,97,-127,99v-23,0,-31,-5,-32,-25v0,-26,33,-37,54,-34v-10,6,-28,12,-25,15v0,3,4,5,14,5v42,-1,91,-30,101,-61",w:153},6:{d:"4,-60v0,-74,68,-122,128,-151v18,2,57,0,21,17v-44,21,-84,54,-112,97v21,-19,33,-38,65,-39v22,0,39,15,37,38v-4,47,-42,102,-90,102v-30,0,-49,-32,-49,-64xm104,-117v-23,7,-86,44,-68,88v2,3,5,5,10,5v29,-8,66,-43,69,-78v0,-10,-4,-15,-11,-15",w:150},7:{d:"168,-221v23,-3,23,34,12,44v-44,41,-89,83,-106,150v-1,11,11,-1,13,6v-15,12,-29,22,-46,25v-10,0,-14,-7,-15,-17v15,-71,71,-123,126,-167v-41,-7,-87,-5,-111,14v-15,-11,16,-39,24,-49v21,-7,71,-8,103,-6",w:157},8:{d:"175,-185v-12,26,-51,46,-65,68v35,46,8,119,-53,117v-16,0,-42,-11,-39,-27v6,-37,36,-59,60,-86v-17,-20,-26,-38,-26,-55v3,-57,55,-67,116,-67v18,0,31,-3,33,9v-6,12,-9,33,-29,33v2,4,3,6,3,8xm165,-192v-27,-13,-104,-1,-79,42v3,6,8,12,13,18xm60,-20v36,0,52,-49,30,-77v-21,23,-41,44,-50,66v0,8,7,11,20,11",w:161},9:{d:"59,3v-15,-7,7,-42,19,-40r62,-91v-26,19,-43,38,-75,45v-92,-53,15,-156,83,-156v17,0,31,16,33,30v-4,12,-25,34,-37,33v0,-1,4,-5,11,-12v4,-5,7,-10,3,-12v-40,13,-99,37,-99,84v0,6,4,8,10,8v45,-3,71,-53,104,-64v17,4,10,9,-1,26v-30,46,-57,100,-94,139v-7,7,-13,10,-19,10",w:164},":":{d:"60,-33v-2,13,-15,32,-29,34v-6,0,-9,-3,-9,-9v2,-14,18,-29,32,-31v4,0,6,2,6,6xm96,-110v0,16,-30,51,-39,25v2,-14,18,-31,31,-33v5,-1,8,3,8,8"},";":{d:"96,-107v0,17,-29,51,-39,25v1,-15,18,-30,31,-34v4,0,9,4,8,9xm22,18r10,-15v-7,0,-11,-3,-11,-9v0,-13,17,-29,31,-31v5,0,7,2,7,8v-3,15,-21,49,-37,47"},"<":{d:"223,-47r0,30r-193,-81r0,-25r193,-80r0,30r-155,62",w:240},"=":{d:"30,-138r0,-28r193,0r0,28r-193,0xm30,-55r0,-28r193,0r0,28r-193,0",w:240},">":{d:"30,-173r0,-30r193,80r0,25r-193,81r0,-30r155,-63",w:240},"?":{d:"127,-187v-2,-30,-61,-15,-74,-5v1,6,18,7,13,15v-9,-7,-35,3,-34,-13v2,-36,37,-49,73,-49v22,0,34,13,34,36v0,65,-64,83,-71,138v0,5,-1,8,-5,8v-19,-9,-18,-37,-1,-57v11,-13,44,-42,61,-60v3,-3,4,-8,4,-13xm39,-56v24,5,14,49,-3,55v-24,-4,-14,-48,3,-55",w:116},"@":{d:"86,-59v0,-58,35,-112,92,-112v25,0,42,15,53,32r6,-27r31,0r-30,146v0,7,5,12,12,11v38,-6,70,-50,68,-97v-3,-71,-52,-111,-126,-111v-92,0,-147,61,-147,151v0,93,60,134,153,135v55,1,100,-21,123,-52r31,0v-28,48,-77,79,-155,78v-107,-1,-177,-52,-177,-158v0,-109,61,-180,173,-180v89,0,151,49,151,135v0,70,-41,123,-105,129v-24,2,-33,-9,-35,-30v-13,14,-28,29,-53,29v-42,0,-65,-36,-65,-79xm180,-145v-39,0,-61,47,-61,88v0,28,12,51,39,51v40,0,63,-44,63,-88v0,-29,-15,-51,-41,-51",w:363},A:{d:"181,-12v-13,22,-63,25,-48,-13v7,-20,10,-21,24,-47r-73,0v-34,29,-58,69,-100,90v-4,0,-6,-2,-6,-6v6,-18,30,-55,52,-49r34,-36v-10,-3,-35,4,-34,-9v7,-15,26,-44,62,-38v-13,2,-21,4,-24,12r31,-1v50,-50,95,-88,158,-123v4,5,5,10,5,16v-8,39,-36,65,-52,102v9,2,36,-4,26,9r-23,29r-25,3v-14,26,-21,40,-21,43v9,16,13,3,38,-8v-2,18,-19,20,-24,26xm123,-112r57,-1r55,-91v-41,25,-79,58,-112,92",w:228,k:{y:-4,w:-4,v:-4,u:-4}},B:{d:"47,-211v50,-16,174,-51,187,18v-11,56,-73,65,-135,74r-9,11v41,3,93,13,97,47v-10,44,-66,63,-116,67v-31,2,-56,-12,-56,-37v0,-28,19,-45,37,-69v-20,3,-36,-16,-18,-23v13,-5,23,-3,43,-6v23,-25,36,-47,72,-49v-10,16,-23,26,-38,44v42,-8,86,-8,97,-41v-2,-19,-22,-22,-47,-22v-35,0,-73,9,-95,21v4,3,11,5,10,6v-4,3,-65,31,-68,13v1,-12,28,-51,39,-54xm51,-53v12,42,100,17,106,-15v-7,-25,-48,-21,-77,-28v-9,15,-25,24,-29,43",w:198,k:{".":-4}},C:{d:"93,22v54,0,90,-40,129,-78r0,11v-44,46,-76,92,-148,99v-69,6,-71,-86,-41,-132v42,-65,89,-138,178,-157v38,3,32,51,15,79v-22,37,-60,82,-99,99v-7,0,-15,-7,-15,-14v0,-23,34,-56,50,-62v-1,4,-5,9,-3,12v19,-12,53,-54,56,-83v-1,-5,-2,-12,-9,-10v-55,17,-105,84,-133,134v-23,38,-30,102,20,102",w:217,k:{".":-13,",":-9}},D:{d:"107,-184v-31,4,-68,15,-88,29v4,6,29,-4,39,-3r-56,21v-6,0,-9,-4,-9,-12v4,-70,78,-81,144,-81v56,0,90,28,90,84v0,98,-96,145,-197,153v-27,2,-18,-34,-11,-50v17,-37,46,-84,88,-141xm208,-136v4,-45,-47,-54,-96,-49v5,22,-8,27,-19,47v-18,35,-41,65,-56,103v1,8,9,8,19,8v73,0,146,-39,152,-109",w:232,k:{".":32,",":36}},E:{d:"197,-243v36,-3,43,14,34,43v-20,9,-39,18,-56,30v8,-13,14,-15,26,-25v-47,-13,-113,15,-129,46v12,21,61,10,96,13v43,-8,30,30,6,33v-48,6,-88,25,-116,49v-24,21,-12,41,24,41v42,0,84,-19,127,-56v2,76,-73,89,-141,95v-29,2,-59,-16,-56,-43v6,-65,74,-79,133,-97v-34,-8,-105,4,-99,-44v8,-63,79,-79,151,-85",w:221},F:{d:"62,-49v-18,4,-16,-8,-10,-18v18,-16,56,-21,91,-21v20,-29,40,-56,47,-84v-32,-24,-126,8,-161,22v10,0,33,-2,36,3r-55,17v-21,-7,1,-40,9,-51v26,-38,108,-43,169,-43v20,0,36,2,36,23v-10,44,-37,77,-59,113r27,0v-13,15,-14,41,-50,35v-32,39,-75,90,-122,108v-21,-11,12,-38,21,-47v9,-7,20,-11,32,-12v15,-14,30,-34,42,-47",w:202,k:{r:5,o:5,i:5,e:5,a:5,".":9,",":14}},G:{d:"38,-55v9,31,45,0,58,-10r83,-71v7,-16,30,-16,32,2r-31,58r-39,64v14,-7,35,-22,65,-44r0,9v-31,27,-52,39,-87,67v-25,20,-36,57,-69,70v-21,-5,-11,-29,3,-43v10,-11,24,-22,43,-33r67,-111v-33,22,-78,71,-115,80v-61,-12,-26,-113,4,-134v37,-43,97,-78,164,-87v13,-2,19,10,18,24v-3,25,-44,42,-63,47v6,-9,25,-18,26,-30v-71,25,-137,69,-159,142",w:202,k:{".":-9,",":-4}},H:{d:"145,-204v-36,4,-83,24,-111,39v-1,6,18,2,12,8v-18,8,-36,21,-55,27v-21,-3,-6,-40,1,-49v37,-28,101,-52,164,-55v53,-2,24,65,4,84v-12,12,-11,12,-41,46r51,-6r74,-102v4,-6,9,-4,8,4v-2,32,-24,48,-39,70r-19,28v13,0,26,2,39,5r-32,43v-9,-1,-20,-2,-34,-2v-9,18,-19,29,-12,51v-3,9,-35,29,-35,7v0,-14,7,-32,21,-56v-19,2,-40,4,-64,8r-40,58v-8,8,-19,-2,-17,-13v2,-13,19,-28,26,-40v-14,0,-32,1,-32,-11v0,-14,11,-33,27,-25r46,-12v33,-37,59,-63,75,-95v0,-9,-8,-12,-17,-12",w:232},I:{d:"159,-198v-6,59,-38,112,-73,167v3,17,-11,27,-18,38v-41,-14,19,-64,23,-84v14,-28,49,-85,49,-113v0,-8,-3,-13,-10,-13v-34,11,-75,38,-83,76v3,10,16,-6,22,-1v0,2,-29,28,-33,26v-7,1,-28,-17,-25,-26v18,-53,60,-98,121,-106v18,-2,29,16,27,36",w:157,k:{x:14,w:18,v:18,t:9,s:23,r:14,p:23,o:18,n:18,m:18,l:5,k:14,g:18,d:18,c:18,a:18}},J:{d:"137,-230v49,8,13,78,4,107v-10,34,-21,53,-39,88r35,-19r0,11r-46,26v-10,17,-20,34,-31,50v-20,29,-35,55,-62,70v-8,1,-12,-7,-12,-13v0,-48,45,-78,89,-108v29,-58,53,-110,65,-177v0,-5,-2,-8,-6,-8v-49,22,-85,79,-86,145v6,-9,14,-23,25,-22v-13,13,-26,50,-50,50v-10,0,-8,-9,-8,-20v0,-89,48,-161,122,-180",w:135,k:{";":-9,":":-9,".":-13,",":-9}},K:{d:"263,-209v11,10,-20,45,-34,38r-112,55r-15,23r107,73v10,5,16,36,4,40v-46,-26,-87,-58,-131,-86r-28,37v-3,19,-21,30,-35,34v-9,-2,-7,-11,-1,-18r51,-64v-11,-35,11,-37,41,-54v24,-32,36,-50,36,-54v0,-3,-1,-4,-4,-4v-46,10,-87,36,-134,55v-13,-2,-8,-18,-4,-27v4,-24,22,-42,46,-46v-5,3,-11,10,-16,17v51,-17,71,-29,115,-33v10,2,27,24,15,36r-28,43",w:236,k:{y:5,w:5,v:5,u:5,o:5,e:5,a:5}},L:{d:"213,-234v8,1,13,4,13,13v0,14,-12,44,-37,88r5,5v-14,16,-24,31,-41,35v-25,-21,52,-91,39,-107v-36,22,-95,115,-119,149v43,3,85,22,124,27v-15,11,-20,40,-48,34v-36,-7,-71,-20,-111,-21v-19,-1,-35,12,-50,14v-5,0,-7,-2,-7,-6v11,-32,28,-49,73,-48v19,-29,36,-56,54,-78v33,-42,57,-88,105,-105",w:213,k:{y:14,w:9}},M:{d:"228,-34v15,38,56,-14,76,-22r0,12v-27,24,-48,47,-84,57v-18,-1,-30,-16,-30,-35v2,-59,51,-93,76,-131v-5,-8,-11,1,-24,12v-42,35,-88,94,-127,142v-3,2,-4,4,-6,4v-37,-52,38,-96,58,-143v6,-15,21,-28,13,-42v-57,33,-99,112,-141,173v-3,4,-6,6,-9,6v-8,0,-21,-30,-15,-40v30,-47,72,-87,87,-146v-3,-13,-14,-6,-26,0v-28,14,-53,37,-86,45v-15,-1,1,-34,2,-42v1,-5,31,-33,37,-29v-6,7,-14,11,-17,20v29,-18,62,-36,93,-40v44,29,-4,93,-16,123v36,-41,65,-91,119,-113v33,15,4,54,-10,78r-34,58v37,-36,69,-77,111,-109v10,-8,18,-21,33,-23v5,-2,20,21,19,24v-32,47,-91,94,-99,161",w:299},N:{d:"13,-25v27,-52,75,-113,88,-162v0,-4,-3,-7,-7,-7v-33,8,-77,35,-107,49v-13,-10,0,-25,12,-42v11,-15,30,-32,49,-38v-6,7,-14,11,-19,21v38,-17,50,-29,84,-34v44,3,12,51,0,73r-65,111v23,-28,44,-54,63,-75v37,-39,61,-74,107,-92v7,3,14,16,14,27v-14,64,-80,105,-87,162v0,8,5,12,13,12v23,0,37,-23,52,-37r1,14v-26,25,-47,52,-84,63v-12,-1,-21,-9,-20,-23v7,-65,59,-114,82,-164v-16,-11,-36,17,-76,59v-26,27,-50,63,-73,93v-8,18,-24,-3,-27,-10",w:206,k:{".":-13,",":-9}},O:{d:"66,5v-57,0,-63,-83,-36,-128v27,-44,72,-94,128,-104v21,1,23,14,31,32v-24,1,-36,5,-53,15v25,-12,64,-5,61,28v-8,80,-53,157,-131,157xm63,-13v50,-12,111,-78,111,-137v0,-29,-26,-21,-45,-10v-24,14,-35,26,-55,57v2,-11,7,-25,17,-42v-21,25,-53,67,-53,106v0,17,9,26,25,26",w:206,k:{".":18,",":18}},P:{d:"41,-51v-19,-6,-22,-27,-4,-39v8,-6,20,-10,36,-14r54,-80v-43,2,-85,18,-115,31v-9,-3,-1,-5,4,-20v5,-11,13,-22,20,-34v77,-29,200,-45,200,45v0,88,-81,124,-175,115v-4,12,-19,23,-13,35v-5,17,-17,33,-29,42v-6,-1,-9,-4,-8,-12v3,-25,16,-42,30,-69xm82,-83v70,6,126,-18,135,-73v-5,-31,-43,-27,-80,-29v-1,31,-28,53,-40,77v8,1,22,-7,26,0v-6,6,-22,5,-31,8",w:225,k:{o:9,e:9,a:9,".":32,",":36}},Q:{d:"117,-133v-15,9,-42,15,-59,22v-16,-1,-9,-36,-5,-49v28,-31,86,-58,141,-61v29,-1,47,13,48,40v0,38,-50,84,-150,138v39,6,87,23,128,10v-15,27,-11,48,-41,48v-50,0,-93,-18,-142,-19v-7,4,-24,17,-27,2v5,-28,21,-45,58,-43v64,-38,119,-67,149,-135v-21,-19,-66,5,-89,15v-14,6,-30,17,-48,29v10,-1,34,-3,37,3",w:232,k:{j:9,g:5,".":5,",":9}},R:{d:"218,-23v11,7,10,60,-10,44r-138,-70v-30,35,-20,49,-48,65v-6,0,-9,-2,-9,-7v7,-19,25,-44,40,-66v-10,-5,-15,-1,-15,-11v8,-19,17,-31,47,-31r56,-74v-33,3,-45,8,-69,12v-3,2,-5,6,1,6v6,0,31,1,17,5r-53,3v-5,0,-10,-3,-9,-9v10,-56,80,-64,143,-64v45,0,100,5,100,50v0,84,-101,80,-185,89v43,19,94,34,132,58xm249,-158v-9,-24,-65,-19,-97,-17v-2,34,-31,50,-43,72v53,-11,98,-17,132,-40v6,-5,8,-10,8,-15",w:236,k:{")":-9}},S:{d:"46,-36v-2,7,-13,2,-13,9v45,7,131,5,152,-24v-24,-40,-95,-26,-128,-60v-16,-76,64,-100,138,-100v25,0,51,0,53,16v5,43,-46,36,-66,56v-7,-9,26,-22,30,-28v-39,-7,-90,5,-115,19v-30,17,-12,29,20,37v40,9,84,22,90,62v-5,61,-73,70,-135,70v-32,0,-64,-2,-68,-24v2,-17,21,-41,42,-33",w:232,k:{".":5,",":9}},T:{d:"22,-156v0,-86,121,-87,192,-73v17,13,25,52,4,68v-32,41,-63,103,-74,126r5,4v-8,17,-23,48,-38,49v-7,1,-14,-7,-12,-14v16,-76,69,-126,111,-186v-53,-9,-132,6,-165,26v6,5,48,8,20,11v-18,-2,-43,7,-43,-11",w:206,k:{z:5,y:14,w:9,u:9,s:14,r:9,o:9,m:9,i:9,h:5,e:9,c:9,a:5,"-":9}},U:{d:"248,-193v-17,49,-85,98,-85,157v0,9,4,13,12,13v8,0,26,-11,54,-33r0,12v-33,34,-57,51,-72,51v-41,0,-30,-44,-11,-77v12,-21,28,-48,51,-81r-67,72r-69,67v-15,19,-51,11,-47,-20v9,-62,78,-106,98,-150v0,-2,0,-3,-2,-3v-40,8,-73,47,-116,54v-3,0,-9,-2,-8,-7v12,-63,74,-88,142,-96v28,-3,23,31,17,45v-22,48,-72,91,-92,139v0,9,12,7,16,2r57,-51r100,-111v13,-15,23,-2,22,17",w:225,k:{".":-13,",":-9}},V:{d:"43,-207v30,-16,80,-38,84,8r-58,101v-13,28,-23,42,-26,69v0,6,3,12,9,16v40,-32,65,-82,93,-128v-2,-27,12,-45,32,-58v12,5,6,17,0,33v-21,55,-60,105,-95,154v-16,21,-28,32,-35,32v-74,-48,11,-154,38,-201v0,-2,-2,-3,-4,-3v-31,5,-62,35,-87,56v7,6,28,-5,34,3v-12,12,-49,15,-64,24v-23,-55,43,-86,79,-106",w:153,k:{y:5,u:5,o:5,i:5,e:5,a:5,";":9,":":5,".":14,"-":5,",":14}},W:{d:"36,7v-47,-23,3,-86,21,-105v27,-29,45,-45,56,-71v0,-6,-7,-10,-14,-9v-34,1,-83,39,-108,48v-13,-34,18,-70,53,-80r1,6v30,-12,100,-32,94,24v-6,57,-81,111,-90,141v11,11,26,-9,35,-19r65,-71v20,-23,38,-56,66,-69v26,21,-8,54,-18,71v-21,35,-40,64,-49,95v15,21,43,-21,54,-33v21,-23,36,-55,51,-84v-14,-16,15,-40,21,-46v4,0,9,10,8,16v-19,78,-60,163,-130,190v-55,-18,-16,-87,4,-123v-34,41,-60,71,-79,90v-19,19,-32,29,-41,29",w:251,k:{r:-4,o:-4,i:-4,h:-9,e:-4,d:-4,a:-4}},X:{d:"140,23v-29,-7,-9,-62,-13,-101v-40,34,-53,81,-102,101v-15,-25,20,-55,44,-66r58,-64r2,-79v-35,7,-71,23,-89,44v4,6,18,-4,22,2v-12,8,-37,13,-47,17v-2,0,-3,-1,-3,-4v9,-64,69,-92,136,-98v33,-3,10,51,14,80r60,-65v4,-3,12,-4,12,3v0,3,-8,37,-27,37r-47,54r-6,95v0,5,2,10,8,9v15,-2,23,-13,40,-20v2,0,3,1,3,3v-8,19,-39,50,-65,52",w:217},Y:{d:"94,-180v-18,-16,-43,19,-60,31r-56,39v-4,-21,5,-53,22,-65v28,-20,86,-62,111,-58v20,-1,18,18,11,32r-70,131v-9,14,5,24,15,14v39,-33,78,-91,111,-130v10,-13,20,9,23,17v-30,60,-64,111,-87,179v34,-24,42,-36,68,-45v11,15,-21,33,-30,47v-22,20,-45,43,-61,71v-8,14,-28,7,-25,-8v16,-79,67,-160,103,-220v-42,50,-80,106,-130,147v-12,10,-29,-3,-29,-16v13,-58,77,-140,84,-166",w:198,k:{v:18,u:18,q:18,p:9,o:23,i:23,e:18,d:23,a:18,"-":5}},Z:{d:"127,-89v34,2,43,12,47,44r23,-10r0,13r-24,11v-19,67,-70,118,-137,135v-10,-1,-19,-12,-20,-21v24,-55,81,-88,136,-118v-3,-17,-7,-22,-24,-22v-28,0,-70,27,-90,44v-16,-54,65,-69,98,-96v19,-14,39,-28,45,-46v0,-5,-4,-7,-13,-7v-63,6,-106,40,-151,72v0,-58,19,-76,58,-96v36,-19,64,-30,88,-30v29,0,48,14,48,41v0,52,-45,65,-84,86xm148,-17v-43,20,-85,55,-106,94v40,4,92,-54,106,-94",w:195},"[":{d:"44,90v-15,-12,-45,-6,-62,-1v-14,-2,-11,-34,-4,-49v41,-98,113,-184,158,-279v21,3,39,2,64,0v-11,28,-20,50,-60,37v-41,77,-98,149,-127,236v23,-9,39,-10,59,1v-14,22,-21,30,-28,55",w:105},"\\":{d:"101,24r-26,0r-74,-267r25,0",w:101},"]":{d:"68,-186v14,-22,20,-31,28,-55v18,25,77,-23,72,20v-11,91,-79,159,-118,228r-46,81v-22,-1,-42,-3,-64,0v10,-31,23,-48,60,-37r107,-184v11,-21,18,-30,21,-52v-21,8,-39,10,-60,-1",w:131},"^":{d:"84,-198r-42,105r-33,0r63,-141r25,0r62,141r-32,0",w:168},_:{d:"-2,45r0,-18r184,0r0,18r-184,0",w:180},"`":{d:"67,-217v23,-1,34,36,32,54v-19,9,-38,-33,-43,-47v0,-5,3,-7,11,-7"},a:{d:"25,0v-27,-13,-33,-71,-2,-87v26,-23,57,-44,91,-48v8,0,13,11,14,17v-1,5,-6,6,-11,8v20,25,-17,40,-17,65v8,28,28,7,50,-10r0,11v-30,33,-50,49,-63,49v-24,-7,-11,-33,-3,-58v-26,26,-33,44,-59,53xm23,-41v0,10,4,17,14,11v31,-19,46,-43,71,-76v-42,22,-76,28,-85,65",w:146},b:{d:"90,-53v8,8,18,5,29,-2r0,11v-18,11,-24,15,-41,10v-17,20,-26,35,-50,39v-40,-11,-29,-75,-10,-110v27,-49,69,-105,117,-128v5,0,7,4,7,11v0,31,-39,84,-118,160v-2,22,4,48,23,33v3,-3,9,-8,16,-16v-15,-28,18,-54,36,-62v5,0,8,3,8,10v-2,16,-10,30,-17,44xm30,-81v34,-37,72,-78,92,-125v-26,2,-63,72,-77,91v-7,9,-11,22,-15,34",w:116,k:{y:5,w:5,v:5,".":9,",":14}},c:{d:"21,-45v11,46,66,9,88,-10v1,24,-21,26,-31,40v-13,11,-24,22,-42,22v-29,0,-46,-48,-30,-75v13,-23,47,-57,78,-61v8,-1,16,7,15,15v-2,15,-18,37,-30,42v-8,1,-2,-10,-6,-12v-23,13,-35,17,-42,39",w:105,k:{",":5}},d:{d:"94,7v-23,0,-15,-39,-11,-62v-20,21,-35,43,-58,54v-15,-5,-24,-29,-24,-49v0,-37,52,-75,86,-75v6,0,11,4,17,11v18,-34,32,-75,58,-93v18,7,9,22,-3,43v-21,38,-53,72,-58,123v0,11,3,16,10,16v17,-4,25,-16,42,-30r0,12v-25,33,-45,50,-59,50xm24,-37v4,13,15,4,22,-4v18,-18,43,-28,50,-57v-25,13,-73,23,-72,61",w:150},e:{d:"106,-114v-6,38,-41,49,-75,65v0,15,4,27,18,26v28,-3,40,-16,59,-32r0,10v-21,25,-39,50,-73,50v-23,0,-34,-21,-34,-46v0,-48,42,-81,87,-88v11,-2,17,5,18,15xm33,-60v22,-9,42,-25,49,-45v-16,-11,-46,21,-49,45",w:105,k:{x:5,v:5,p:5,".":5,",":9}},f:{d:"41,-59v11,11,18,14,24,28v15,-5,24,-16,36,-24r0,12v-13,13,-16,17,-31,25v1,55,-28,92,-65,108v-13,-1,-19,-23,-18,-39v1,-33,11,-49,22,-80v-15,-17,-10,-39,9,-44v8,-13,17,-24,27,-35v14,-35,34,-72,52,-104v2,-3,5,-4,7,-4v23,57,-48,108,-63,157xm20,63v20,-10,29,-41,28,-75v-11,1,-20,-1,-26,-6v-9,22,-13,41,-13,55v0,11,3,25,11,26",w:97,k:{k:5,i:5,e:5,a:5,"?":-9,",":5," ":-18}},g:{d:"122,-107v13,5,7,18,1,33v-4,10,-12,27,-23,50r43,-31r0,11r-59,48v-23,38,-43,72,-75,85v-18,-31,40,-73,61,-91v12,-24,20,-42,25,-55v-23,22,-37,47,-70,52v-13,2,-26,-29,-24,-44v5,-45,61,-75,99,-84v8,0,11,2,11,8v-14,31,-84,40,-87,84v-1,6,4,11,8,11v37,-8,57,-62,90,-77",w:138,k:{r:5,p:5,".":5,",":9}},h:{d:"126,-102v-10,25,-33,34,-37,61v0,6,3,8,8,8v6,0,18,-7,37,-22v1,22,-18,23,-26,36v-10,10,-21,17,-34,20v-22,-2,-14,-30,-5,-46v6,-11,14,-25,25,-40v-35,17,-51,59,-80,80v-15,2,-19,-40,-11,-58v23,-57,73,-117,107,-155v15,-16,21,-20,33,-8v-31,63,-75,113,-119,163r0,22v27,-25,51,-64,88,-77v7,-1,14,10,14,16",w:131},i:{d:"98,-160v1,16,-31,40,-35,14v-2,-16,30,-41,35,-14xm26,-45v10,30,44,6,61,-10r0,12v-16,22,-32,42,-57,45v-21,2,-29,-27,-29,-48v0,-35,39,-76,58,-75v7,0,11,2,11,8v-2,30,-42,43,-44,68",w:82},j:{d:"89,-152v0,-9,9,-36,26,-34v7,0,11,2,11,8v-3,13,-6,37,-22,36v-10,0,-15,-3,-15,-10xm70,-93v-5,-4,-76,49,-57,6r5,-14v20,-8,58,-28,75,-28v21,5,4,27,-2,41r-32,68v17,-12,30,-20,46,-36r0,13v-22,19,-43,39,-62,58v-17,31,-29,56,-51,68v-16,-32,21,-62,41,-82v20,-41,33,-59,41,-90v0,-3,-2,-4,-4,-4",w:101},k:{d:"71,-39v19,31,45,2,64,-16r0,11v-19,21,-32,41,-55,47v-26,-3,-30,-23,-41,-44v-12,13,-19,28,-31,37v-34,-72,46,-141,82,-186v12,-15,23,-28,41,-31v6,0,8,2,8,7v-24,45,-71,97,-121,157r0,15v40,-38,60,-71,102,-84v9,0,11,11,11,21v0,35,-31,45,-60,66xm66,-46v14,-10,37,-31,41,-50v-16,-8,-45,28,-58,43v4,0,10,3,17,7",w:131,k:{l:-4}},l:{d:"45,-25v22,-10,19,-11,42,-32r0,13v-24,32,-45,48,-60,48v-20,-1,-30,-25,-27,-49v8,-70,47,-138,97,-167v6,1,6,6,6,15v-5,50,-40,96,-75,132v-5,19,-1,39,17,40xm34,-89v21,-21,43,-51,50,-84v0,-6,-4,-4,-7,-2v-16,14,-38,58,-43,86",w:82,k:{y:5,w:5}},m:{d:"97,-110v18,-20,43,-5,28,18v-13,19,-25,39,-42,61r96,-84v6,-2,12,17,12,21v-4,14,-33,33,-34,51v9,25,31,-1,46,-13r0,12v-21,18,-37,39,-65,46v-33,-19,12,-61,20,-83v-27,22,-47,44,-68,68v-10,11,-27,19,-27,-2v0,-20,21,-39,27,-58v-3,-7,-9,-3,-15,3v-9,10,-40,44,-51,62v-2,2,-5,3,-7,3v-38,-24,-3,-107,33,-107v6,0,11,2,12,7v-6,18,-32,33,-38,53v4,11,8,2,19,-7",w:198},n:{d:"129,-99v-11,19,-45,52,-39,60v0,5,3,7,7,7v16,-3,20,-13,38,-24r0,12v-25,22,-33,40,-60,46v-26,-4,-6,-43,2,-58r14,-25v-29,14,-48,59,-75,75v-35,-29,0,-100,34,-106v7,1,12,1,12,8v-7,22,-51,48,-33,59v29,-24,50,-65,92,-77v5,1,8,16,8,23",w:131},o:{d:"92,-109v25,8,6,48,-3,62v12,7,16,-1,27,-9r0,12v-15,12,-16,17,-39,17v-28,44,-75,28,-76,-22v7,-39,37,-72,77,-77v14,-2,24,7,14,17xm80,-102v-26,14,-56,33,-57,66v5,19,25,13,42,-1v-9,-27,4,-46,15,-65",w:112,k:{x:5}},p:{d:"27,-11v-15,24,-19,67,-43,82v-24,-30,20,-77,35,-101v19,-32,33,-59,43,-81v-27,33,-47,56,-61,70r0,-12v35,-35,55,-75,89,-107v9,-9,37,-7,21,10v-21,23,-37,45,-54,77v23,-16,40,-40,73,-46v6,0,7,3,8,9v-5,40,-30,57,-55,82v26,9,37,-6,67,-29v2,23,-16,25,-26,36v-18,20,-49,30,-76,14v-12,3,-11,0,-21,-4xm72,-32v16,-17,30,-31,35,-51v-7,-13,-18,-3,-32,8v-11,10,-21,23,-32,39v18,-1,17,-3,29,4",w:146,k:{".":5,",":9}},q:{d:"26,-3v-25,-4,-33,-53,-14,-72v27,-27,61,-55,109,-57v10,-1,13,15,7,21v15,17,-1,28,-13,46r-21,32r8,6v14,-9,27,-19,37,-30v5,30,-33,28,-27,53v-4,40,-52,84,-84,96v-17,-4,-15,-29,-3,-47r76,-110v-50,46,-32,42,-75,62xm117,-110v-36,13,-89,30,-96,73v0,3,2,5,6,5v39,-11,69,-49,91,-76v0,-1,0,-2,-1,-2xm78,-9v-8,14,-39,57,-35,71v24,-7,48,-38,52,-68v-7,1,-13,0,-17,-3",w:135},r:{d:"85,-20v-14,20,-52,30,-50,-7v2,-25,20,-43,32,-61r-34,7v-7,15,-18,27,-32,39v-2,-16,12,-23,14,-30v-26,-14,8,-57,27,-60v6,4,3,8,-2,16v38,-4,55,-18,58,14v-9,18,-34,37,-37,60v0,6,3,8,10,8v7,0,20,-7,38,-22v2,22,-16,24,-24,36",w:105,k:{j:5}},s:{d:"91,-132v18,44,-1,88,-38,104v31,4,44,-14,63,-28r0,12v-23,21,-41,40,-71,45v-26,-2,-47,-22,-43,-56v45,-48,46,-48,63,-67v2,-18,16,-28,27,-16v0,1,-1,3,-1,6xm43,-35v27,-5,28,-38,22,-68v-7,8,-23,24,-47,47v16,4,16,8,25,21",w:112,k:{",":5}},t:{d:"13,-105v5,-27,22,-46,59,-42v9,-18,25,-38,44,-26v-1,4,-16,22,-19,27v7,1,9,2,18,2v-7,12,-15,26,-25,39v-8,-1,-15,-2,-24,-2v-13,22,-26,40,-29,68v0,8,4,12,10,12v18,-4,28,-16,46,-29r0,12v-32,34,-55,52,-70,52v-29,-7,-16,-42,-5,-65r-17,15r0,-12v12,-10,28,-28,45,-54v-12,-2,-25,0,-33,3",w:90},u:{d:"105,-33v17,-3,21,-10,38,-23v1,24,-21,27,-31,40v-11,14,-45,30,-45,-1v0,-19,9,-30,19,-50v-25,30,-34,52,-61,62v-31,-5,-30,-64,-8,-80v13,-15,29,-48,58,-31v-7,22,-31,39,-49,54v-7,34,9,23,26,6v29,-19,48,-61,79,-75v25,27,-32,55,-33,89v0,6,2,9,7,9",w:138},v:{d:"0,-44v0,-20,33,-92,65,-66v-2,18,-25,44,-39,55v-1,10,-10,29,4,31v5,0,18,-10,37,-30v1,-25,24,-56,42,-64v5,0,7,3,7,10v-2,23,-13,41,-26,56v8,16,20,4,30,-3r0,11v-14,10,-25,20,-43,9v-18,18,-29,32,-48,38v-17,0,-29,-28,-29,-47",w:116},w:{d:"127,-113v-5,18,-30,56,-32,78v0,5,2,8,6,8v5,0,14,-9,27,-26v-4,-26,21,-56,39,-64v15,15,-1,51,-14,63v8,9,17,10,27,-2v0,27,-27,33,-42,20v-22,26,-38,39,-49,39v-20,-6,-14,-18,-11,-50v-17,15,-26,40,-51,47v-30,-10,-35,-61,-9,-86v17,-16,33,-56,59,-34v-6,29,-30,47,-50,66v-4,12,-7,22,1,27v29,-16,52,-52,82,-91v4,-4,17,-1,17,5",w:176,k:{".":5,",":9}},x:{d:"-1,2v-7,-8,10,-37,19,-35r19,-22r0,-42v-12,2,-23,18,-33,22v-5,-20,34,-51,50,-58v15,4,6,31,8,50v26,-28,41,-42,46,-42v2,0,5,3,4,6v-1,7,-16,37,-29,29r-22,28v-1,22,7,40,24,25r23,-19r0,12v-24,33,-41,50,-51,50v-17,0,-18,-19,-19,-40v-12,10,-23,31,-39,36",w:105},y:{d:"35,80v-7,-2,-13,-20,-8,-30v9,-19,28,-52,57,-99v-15,12,-47,44,-61,47v-11,0,-23,-31,-22,-44v5,-40,36,-65,62,-82v24,8,9,31,-6,45v-7,11,-32,19,-34,42v5,10,13,0,28,-8v26,-15,52,-50,75,-72v11,1,12,19,5,28v-22,34,-44,64,-62,102r70,-65r0,12",w:135,k:{",":5}},z:{d:"47,-6v2,-23,-24,-16,-29,-31v0,-5,21,-23,65,-53v-15,2,-34,8,-51,9v-9,13,-20,31,-31,41v-2,-22,13,-23,20,-41v-7,-1,-10,-4,-10,-8v2,-15,22,-35,36,-37v12,-2,-1,12,6,12v9,1,34,-6,40,-7v8,-1,8,31,9,30v-13,20,-37,24,-55,43v13,6,17,11,21,27r44,-35r0,12r-44,36v-9,45,-42,82,-80,97v-30,-20,10,-60,27,-72xm46,10v-19,13,-43,35,-54,53v21,11,48,-29,54,-53",w:108},"{":{d:"38,-82v82,-2,-16,-173,102,-155r0,27v-39,-6,-37,25,-36,62v0,42,-7,68,-37,80v37,12,38,54,37,105v-1,29,8,37,36,36r0,28v-118,16,-20,-154,-102,-155r0,-28",w:150},"|":{d:"93,90r0,-333r28,0r0,333r-28,0",w:195},"}":{d:"131,-54v-81,1,18,170,-101,155r0,-28v39,6,35,-25,35,-62v0,-44,7,-66,37,-79v-36,-12,-39,-55,-37,-105v1,-29,-7,-39,-35,-37r0,-27v48,-4,65,20,65,64v0,52,-6,86,36,91r0,28",w:150},"~":{d:"175,-82v-38,0,-67,-32,-104,-32v-17,0,-26,11,-30,32r-10,0v1,-33,16,-56,45,-57v39,-1,69,29,104,32v19,1,31,-14,32,-32r10,0v0,32,-18,57,-47,57",w:240},"":{w:101,k:{T:23,A:9}}}}),Cufon.registerFont({w:160,face:{"font-family":"Cursive Handwriting","font-weight":400,"font-stretch":"normal","units-per-em":"360","panose-1":"0 0 4 0 0 0 0 0 0 0",ascent:"288",descent:"-72","x-height":"1",bbox:"-23.028 -272.426 861 142.278","underline-thickness":"4.23529","underline-position":"-82.5882","unicode-range":"U+0020-U+007E"},glyphs:{" ":{w:97},"!":{w:146},'"':{w:104},"#":{d:"856,-220v0,1,2,8,-2,7v-16,0,-7,-24,-9,-37v-5,1,-6,-2,-5,-6v9,2,0,-12,10,-14v1,6,-3,17,6,14v1,4,0,7,-5,6v2,10,-6,28,5,30xm828,-214v-2,-14,5,-37,-7,-37v-14,0,-6,24,-8,37r-6,0r0,-42v5,-1,5,1,6,6v4,-10,21,-8,21,6r0,30r-6,0xm768,-235v0,-12,6,-22,15,-22v11,0,17,8,17,22v0,12,-6,22,-15,22v-11,0,-17,-10,-17,-22xm749,-256v11,-1,1,-22,19,-15v2,9,-11,1,-8,15v5,-1,7,1,6,6r-6,0r0,36r-6,0r0,-36v-5,1,-6,-2,-5,-6xm729,-220v1,2,2,8,-3,7v-16,0,-7,-24,-9,-37v-5,1,-4,-2,-4,-6v9,0,-1,-12,10,-14v1,6,-3,17,6,14v1,5,-1,7,-6,6v3,10,-7,29,6,30xm842,-123r-6,0v-2,-12,6,-34,-6,-36v-14,0,-6,24,-8,36r-6,0v-2,-12,7,-36,-7,-36v-12,0,-7,23,-8,36r-5,0r0,-41v4,0,6,0,5,5v4,-8,16,-8,20,1v3,-10,21,-9,21,4r0,31xm677,-234v0,-27,34,-30,32,-3r0,4v-8,1,-21,-3,-26,2v0,10,17,19,20,4v1,0,3,1,6,1v0,6,-9,14,-15,13v-11,0,-17,-7,-17,-21xm757,-143v0,-12,5,-22,15,-22v11,0,17,7,17,21v0,11,-6,22,-16,22v-10,0,-16,-10,-16,-21xm651,-244v2,5,24,6,21,17v0,9,-5,14,-14,14v-8,0,-13,-4,-14,-13v0,0,2,0,6,-1v0,10,16,10,16,1v0,-7,-24,-8,-21,-19v0,-8,4,-12,13,-12v8,-2,21,12,8,13v-1,-5,-3,-7,-8,-7v-5,0,-7,2,-7,7xm861,-31r-5,0v-2,-12,6,-34,-6,-37v-15,1,-7,23,-9,37r-6,0v-2,-13,6,-35,-7,-37v-12,1,-5,25,-7,37r-6,0r0,-41v4,0,7,-1,6,5v4,-8,16,-9,19,1v3,-10,21,-10,21,3r0,32xm740,-159v-6,-1,-11,8,-10,15v-1,19,16,24,18,6v1,0,3,1,6,1v0,6,-9,15,-14,16v-9,0,-16,-12,-16,-22v0,-26,26,-29,29,-9v-1,0,-2,1,-5,1v-1,-6,-3,-8,-8,-8xm620,-257v4,0,6,4,3,9v-5,-4,-10,-1,-10,8r0,26r-6,0r0,-42v4,-1,6,0,5,6v1,-5,4,-7,8,-7xm777,-51v0,-12,5,-22,15,-22v11,0,17,7,17,21v0,11,-6,22,-16,22v-10,0,-16,-9,-16,-21xm716,-130v1,5,0,8,-6,7v-1,-5,0,-8,6,-7xm685,-127v12,0,7,-23,8,-37r6,0r0,41v-4,1,-6,-1,-5,-5v-6,10,-23,9,-22,-6r0,-30r5,0v2,13,-6,37,8,37xm584,-257v11,0,17,12,16,24v-8,1,-22,-3,-26,2v-1,11,17,18,20,4v1,0,3,1,6,1v0,6,-9,14,-15,13v-11,0,-17,-7,-17,-21v0,-11,6,-23,16,-23xm759,-68v-5,0,-10,9,-9,15v-2,18,16,24,18,7v1,0,3,1,6,1v0,6,-8,15,-14,15v-10,1,-16,-11,-16,-21v0,-25,25,-29,29,-10v-1,0,-3,0,-6,1v-1,-6,-3,-8,-8,-8xm565,-220v1,2,2,8,-3,7v-16,0,-7,-24,-9,-37v-5,1,-4,-2,-4,-6v9,2,0,-12,10,-14v1,6,-3,17,6,14v1,5,-1,7,-6,6v2,10,-6,29,6,30xm656,-123v-2,-13,5,-35,-7,-36v-14,0,-6,24,-8,36r-6,0r0,-41v4,-1,5,1,6,5v4,-10,21,-8,21,6r0,30r-6,0xm736,-39v1,5,0,10,-6,8v-1,-5,0,-10,6,-8xm533,-251v-13,1,-13,33,0,32v8,2,4,-13,14,-9v1,7,-8,15,-14,15v-10,1,-16,-12,-16,-22v0,-26,27,-29,30,-9v-1,0,-3,1,-6,1v-1,-5,-3,-8,-8,-8xm699,-61v2,5,24,6,22,17v0,9,-6,14,-15,14v-8,0,-13,-4,-14,-13v0,0,2,0,6,-1v0,9,17,11,17,1v-1,-7,-25,-8,-22,-19v0,-8,4,-11,13,-11v8,0,13,3,14,11v-7,3,-17,-16,-21,1xm612,-165v11,0,18,11,16,24v-8,1,-22,-2,-26,1v0,12,17,19,20,4v1,0,3,1,6,1v0,6,-9,14,-15,13v-11,0,-17,-7,-17,-21v0,-10,7,-22,16,-22xm690,-36v0,1,3,8,-3,6v-16,0,-6,-24,-9,-37v-4,1,-5,-1,-4,-5v9,0,-1,-12,10,-15v1,7,-4,16,6,15v1,5,-2,6,-6,5v2,10,-5,29,6,31xm482,-225v-4,-16,24,-11,24,-19v0,-5,-3,-7,-9,-7v-10,-1,-5,11,-15,7v5,-19,32,-18,30,8r1,22v-6,0,-7,0,-8,-6v-7,9,-24,11,-23,-5xm590,-123r-6,0v-2,-12,6,-34,-6,-36v-14,0,-6,24,-8,36r-6,0v-2,-12,7,-36,-7,-36v-12,0,-6,24,-7,36r-6,0r0,-41v4,0,6,0,5,5v5,-8,16,-8,20,1v3,-10,21,-10,21,4r0,31xm662,-31v5,-18,-6,-54,-16,-27r0,27r-6,0r0,-41v4,0,7,-1,6,5v5,-9,22,-8,22,6r0,30r-6,0xm474,-257v4,0,6,4,3,9v-5,-4,-10,-1,-10,8r0,26r-6,0r0,-42v4,-1,6,0,5,6v1,-5,4,-7,8,-7xm539,-128v0,3,1,7,-3,6v-16,0,-6,-23,-9,-36v-2,0,-5,-2,-4,-6v8,1,0,-13,10,-14v1,6,-3,15,6,14v1,5,-2,6,-6,5v2,10,-5,29,6,31xm423,-225v-4,-15,25,-10,24,-19v0,-5,-2,-7,-8,-7v-10,0,-7,10,-15,7v1,-9,6,-13,15,-13v18,-2,13,27,15,43v-6,0,-6,0,-7,-6v-7,9,-24,11,-24,-5xm602,-51v0,-12,5,-22,15,-22v11,0,17,7,17,21v0,11,-6,22,-16,22v-10,0,-16,-9,-16,-21xm587,-72v0,-9,3,-21,15,-16v1,7,-12,3,-9,15v2,0,9,0,7,6r-7,0r0,36r-6,0r0,-36v-4,1,-6,-1,-5,-5r5,0xm511,-123v-1,-13,5,-35,-8,-36v-14,0,-6,24,-8,36r-6,0r0,-41v4,-1,5,1,6,5v4,-10,21,-8,21,6r0,30r-5,0xm415,-214r-5,0v-2,-13,7,-37,-8,-37v-14,0,-6,24,-8,37r-6,0r0,-57r6,0r0,20v6,-10,22,-8,21,6r0,31xm577,-31r-6,0v-2,-12,6,-36,-7,-37v-15,-1,-7,24,-9,37r-6,0r0,-57r6,0r0,20v7,-9,23,-6,22,7r0,30xm450,-143v0,-11,5,-22,15,-22v11,0,17,7,17,21v0,12,-5,22,-15,22v-11,0,-17,-10,-17,-21xm368,-251v-6,0,-10,9,-9,15v-2,19,16,23,18,7v1,0,3,1,6,1v0,6,-8,15,-14,15v-10,1,-16,-12,-16,-22v0,-26,26,-29,29,-9v-1,0,-3,1,-6,1v-1,-5,-3,-8,-8,-8xm624,30v9,-14,25,-1,25,12v0,13,-5,20,-15,20v-10,0,-16,-9,-16,-27v0,-33,22,-43,30,-18v-8,5,-8,-10,-14,-8v-8,-1,-10,9,-10,21xm436,-164v-1,-10,2,-19,15,-16v1,9,-11,1,-9,15v2,0,8,1,6,6r-6,0r0,36r-6,0r0,-35v-4,0,-6,-1,-5,-6r5,0xm530,-68v-12,1,-14,33,0,32v8,2,4,-13,14,-9v1,7,-8,15,-14,15v-10,1,-16,-11,-16,-21v0,-25,26,-30,30,-10v-1,0,-3,0,-6,1v-1,-6,-3,-8,-8,-8xm328,-214r-6,0r0,-57r6,0r0,57xm603,61r-6,0r0,-45v-5,2,-12,14,-11,2v9,-3,10,-13,17,-15r0,58xm511,-36v0,0,3,8,-2,6v-16,0,-6,-24,-9,-37v-4,1,-6,-1,-5,-5v9,1,1,-12,10,-15v1,7,-4,16,6,15v1,5,-2,6,-6,5v2,10,-5,29,6,31xm313,-214r-6,0r0,-57r6,0r0,57xm424,-130v1,5,0,8,-6,7v-1,-5,0,-8,6,-7xm416,-164r-10,41r-6,0r-7,-31r-8,31r-6,0r-10,-41r6,0v2,9,4,21,7,33r7,-33r7,0r7,32v3,-10,5,-21,7,-32r6,0xm561,3v30,6,5,40,-9,51r24,0r0,7r-31,0v-2,-14,44,-43,16,-52v-10,-3,-5,15,-16,11v0,-9,7,-17,16,-17xm460,-42v-4,-15,25,-12,25,-18v0,-5,-3,-8,-9,-8v-9,-2,-5,10,-15,8v5,-18,32,-19,30,7v0,7,-1,18,1,22v-6,1,-7,0,-8,-5v-7,9,-25,9,-24,-6xm284,-219v13,-1,8,-22,9,-37r5,0r0,42v-5,1,-6,-2,-5,-6v-6,11,-23,9,-22,-6r0,-30r6,0v1,13,-5,35,7,37xm264,-272v5,0,5,1,4,6v-7,-1,-9,3,-8,10v5,-1,8,0,7,6r-7,0r0,36r-5,0r0,-36v-5,1,-7,-1,-6,-6v11,2,0,-19,15,-16xm517,26v11,-9,23,4,23,16v0,20,-30,27,-32,4v1,0,3,-1,6,-1v2,7,5,11,10,11v5,0,10,-9,10,-15v1,-10,-14,-18,-19,-6v-2,-1,-4,-1,-6,-1r5,-30r23,0r0,7r-18,0v-1,5,-2,10,-2,15xm369,-164r-10,41r-7,0r-7,-31r-7,31r-6,0r-10,-41r6,0v2,9,4,21,7,33r7,-33r7,0r7,32v3,-10,5,-21,7,-32r6,0xm453,-31r-6,0v-2,-12,5,-33,-5,-37v-15,1,-7,23,-9,37r-6,0v-2,-13,6,-35,-7,-37v-12,1,-5,25,-7,37r-6,0r0,-41r6,0v-1,1,-1,3,0,5v4,-8,16,-9,19,1v3,-10,21,-10,21,3r0,32xm503,43r-17,0r0,-7r17,0r0,7xm212,-257v11,0,18,14,15,24v-8,1,-21,-3,-25,2v-1,11,17,18,20,4v1,0,2,1,5,1v0,5,-8,14,-14,13v-11,0,-17,-7,-17,-21v-1,-13,6,-23,16,-23xm322,-164r-10,41r-7,0r-7,-31r-7,31r-6,0r-10,-41r6,0v2,9,4,21,7,33r7,-33r6,0r7,32v3,-10,6,-21,8,-32r6,0xm466,3v12,1,19,20,6,26v15,6,10,35,-7,33v-17,2,-20,-30,-6,-33v-13,-7,-7,-27,7,-26xm397,-39v1,5,0,10,-6,8v-1,-5,0,-10,6,-8xm168,-251v5,-11,22,-5,21,6r0,31r-6,0v-2,-12,6,-37,-7,-37v-14,0,-6,24,-8,37r-6,0r0,-57r6,0r0,20xm388,-72r-9,41r-7,0r-7,-32r-7,32r-6,0r-10,-41r6,0v2,9,4,20,7,32r7,-32r6,0r7,32v3,-11,5,-21,7,-32r6,0xm274,-180r-13,58r-5,0r14,-58r4,0xm256,-180r-13,58r-5,0r14,-58r4,0xm429,3v12,0,21,20,7,26v14,6,9,34,-7,33v-17,2,-22,-30,-7,-33v-13,-7,-7,-27,7,-26xm156,-220v0,1,2,8,-2,7v-16,0,-7,-24,-9,-37v-5,1,-6,-2,-5,-6v9,2,0,-12,10,-14v1,6,-3,17,6,14v1,4,0,7,-5,6v2,10,-6,28,5,30xm233,-156r-7,0r0,-8r7,0r0,8xm341,-72r-9,41r-7,0r-7,-32r-7,32r-6,0r-10,-41r6,0v2,9,4,20,7,32r7,-32r6,0r7,32v3,-11,5,-21,7,-32r6,0xm378,18v0,-7,6,-15,13,-15v14,-2,19,20,8,26v15,6,9,33,-7,33v-8,2,-23,-15,-10,-17v3,15,21,15,20,-1v0,-9,-7,-12,-14,-11v-1,-9,14,-4,12,-16v-2,-12,-16,-9,-17,2v-1,0,-2,-1,-5,-1xm233,-123r-7,0r0,-7r7,0r0,7xm120,-220v0,1,2,8,-2,7v-17,0,-8,-23,-10,-37v-5,1,-4,-2,-4,-6v9,1,1,-12,10,-14v1,6,-3,17,6,14v1,5,-1,7,-6,6v3,10,-7,29,6,30xm217,-144v0,20,-12,27,-23,18r0,19r-6,0r0,-57v4,-1,5,1,6,5v9,-12,23,-5,23,15xm183,-128v0,0,3,8,-3,6v-16,0,-6,-23,-9,-36v-2,0,-5,-2,-4,-6v9,1,-1,-13,10,-14v1,6,-3,15,6,14v1,5,-2,6,-6,5v2,10,-5,29,6,31xm294,-72r-9,41r-7,0r-7,-32r-7,32r-6,0r-10,-41r6,0v2,9,4,20,7,32r7,-32r6,0r7,32v3,-11,5,-21,7,-32r6,0xm358,3v16,24,16,51,0,75r-4,0v13,-25,13,-50,0,-75r4,0xm84,-257v11,0,17,11,16,24v-8,1,-21,-3,-25,2v-1,11,16,18,19,4v1,0,3,1,6,1v0,6,-9,14,-15,13v-11,0,-16,-7,-16,-21v0,-12,5,-23,15,-23xm165,-128v0,1,3,8,-3,6v-16,0,-6,-23,-9,-36v-2,0,-5,-2,-4,-6v9,0,-1,-12,10,-14v1,6,-3,15,6,14v1,5,-2,6,-6,5v2,10,-5,29,6,31xm349,33v-1,15,-1,27,-15,29v-10,1,-16,-10,-16,-30v0,-19,5,-29,15,-29v11,0,16,10,16,30xm247,-89r-13,59r-5,0r14,-59r4,0xm42,-266v-10,-1,-17,11,-17,21v0,26,19,33,31,19r0,-10v-7,0,-17,3,-14,-7r20,0r0,21v-16,19,-45,6,-43,-20v-5,-27,36,-45,42,-13v-1,0,-2,0,-5,1v0,-7,-7,-12,-14,-12xm143,-123r-6,0v-2,-12,6,-35,-7,-36v-15,0,-7,23,-9,36r-6,0r0,-57r6,0r0,21v6,-9,23,-8,22,6r0,30xm229,-89r-13,59r-5,0r14,-59r4,0xm205,-72v1,5,0,8,-6,7v-1,-5,0,-8,6,-7xm303,61r-6,0r0,-45v-4,3,-7,6,-11,8v0,-12,14,-13,14,-21r3,0r0,58xm205,-39v1,5,0,10,-6,8v-1,-5,0,-10,6,-8xm246,18v-1,-7,7,-15,13,-15v15,-2,20,21,8,26v16,6,8,32,-7,33v-7,0,-24,-17,-9,-17v2,15,20,14,19,-1v0,-8,-6,-12,-13,-11v-1,-9,13,-5,11,-16v-2,-12,-16,-10,-16,2v-1,0,-3,-1,-6,-1xm190,-53v0,19,-13,30,-23,18r0,20r-6,0r0,-57v4,0,6,0,5,5v8,-12,24,-6,24,14xm155,-36v-1,1,3,7,-2,6v-16,0,-6,-24,-9,-37v-4,1,-5,-1,-4,-5v7,0,0,-13,10,-15v1,6,-4,16,5,15v1,4,-1,6,-5,5v1,10,-4,29,5,31xm60,-175v-15,1,-24,17,-25,32v-3,32,34,40,50,20r5,0v-12,29,-66,20,-60,-18v-5,-44,58,-54,59,-10v0,14,-17,42,-26,22v-8,15,-21,3,-21,-11v0,-15,17,-36,26,-18v-1,-3,2,-8,7,-6v1,5,-10,26,-3,35v18,-8,15,-48,-12,-46xm240,78r-4,0v-14,-24,-15,-51,0,-75r4,0v-13,25,-13,50,0,75xm137,-36v0,0,3,8,-2,6v-16,0,-6,-24,-9,-37v-4,1,-5,-1,-4,-5v7,0,0,-12,10,-15v1,6,-4,16,5,15v1,4,-1,6,-5,5v1,10,-4,29,5,31xm94,-68v7,-10,22,-4,22,7r0,30r-6,0v-2,-13,7,-37,-8,-37v-14,0,-6,24,-8,37r-6,0r0,-57r6,0r0,20xm61,-73v5,1,5,2,3,8v-6,-3,-10,0,-10,9r0,25r-6,0r0,-41v4,-1,6,1,5,6v1,-5,4,-7,8,-7xm9,-51v0,-12,5,-22,15,-22v11,0,17,7,17,21v0,12,-5,22,-15,22v-10,0,-17,-10,-17,-21xm786,-219v10,0,12,-32,-2,-32v-7,0,-10,5,-10,16v0,10,4,16,12,16xm703,-239v1,-10,-11,-17,-16,-8v-2,3,-3,5,-3,8r19,0xm775,-127v9,-2,12,-32,-2,-32v-7,0,-10,5,-10,16v0,10,4,16,12,16xm795,-36v11,0,12,-32,-3,-32v-7,0,-10,6,-10,17v0,10,5,15,13,15xm594,-239v0,-9,-11,-17,-17,-8v-2,3,-2,5,-2,8r19,0xm622,-147v0,-9,-11,-17,-17,-8v-2,3,-2,5,-2,8r19,0xm494,-219v8,0,12,-6,11,-16v-11,1,-27,11,-11,16xm620,-36v10,-1,12,-32,-2,-32v-7,0,-11,6,-11,17v0,10,5,15,13,15xm429,-226v-1,3,2,8,7,7v8,0,12,-6,11,-16v-6,2,-18,2,-18,9xm468,-127v9,-2,12,-32,-2,-32v-7,0,-10,5,-10,16v0,10,4,16,12,16xm624,42v0,19,20,16,19,0v0,-8,-3,-12,-9,-12v-6,0,-10,4,-10,12xm466,-43v0,3,2,8,7,7v8,0,12,-6,11,-16v-6,2,-18,3,-18,9xm222,-239v0,-9,-11,-17,-17,-8v-2,3,-3,5,-3,8r20,0xm473,18v0,-6,-3,-9,-8,-9v-5,0,-7,2,-7,8v0,6,2,10,7,10v5,0,8,-3,8,-9xm466,56v5,0,10,-7,9,-12v0,-7,-3,-12,-9,-12v-7,0,-10,4,-10,11v0,8,3,13,10,13xm436,18v0,-6,-2,-9,-7,-9v-5,0,-8,2,-8,8v0,6,3,10,8,10v5,0,7,-3,7,-9xm430,56v9,-1,12,-25,-1,-24v-7,0,-10,4,-10,11v0,8,4,13,11,13xm193,-144v0,24,18,18,19,1v0,-11,-4,-16,-10,-16v-6,0,-9,5,-9,15xm94,-239v1,-10,-11,-17,-16,-8v-2,3,-3,5,-3,8r19,0xm334,9v-15,0,-14,46,0,47v9,2,9,-18,9,-30v0,-12,-3,-17,-9,-17xm176,-36v11,-1,11,-32,-1,-32v-6,0,-9,6,-9,16v0,11,4,16,10,16xm54,-129v8,1,12,-11,12,-18v0,-8,-3,-12,-9,-12v-8,1,-14,28,-3,30xm27,-36v11,0,12,-32,-2,-32v-7,0,-10,6,-10,17v0,10,4,15,12,15",w:889},$:{w:170},"%":{w:180},"&":{w:218},"'":{w:43},"(":{w:97},")":{w:139},"*":{},"+":{},",":{w:120},"-":{},"":{},".":{w:49},"/":{w:169},0:{d:"168,-141v-2,70,-50,136,-111,141v-36,3,-58,-32,-56,-71v2,-71,49,-142,111,-142v36,0,57,33,56,72xm59,-10v55,0,96,-66,98,-129v0,-33,-18,-64,-48,-64v-54,0,-96,65,-97,130v-1,33,17,63,47,63",w:156},1:{d:"77,-209r-53,205v-1,4,-3,5,-7,5v-4,0,-4,-1,-3,-5r52,-205v1,-4,3,-6,7,-6v4,0,5,2,4,6",w:72},2:{d:"68,-196v39,-36,118,-14,97,45v-23,64,-102,95,-148,141r102,0v3,0,4,1,4,4v0,5,-2,7,-7,7r-114,0v-6,0,-6,-6,-2,-9r126,-104v19,-19,28,-28,30,-53v-11,-71,-101,-30,-107,14v-1,4,-3,5,-7,5v-4,0,-5,-1,-4,-5v5,-18,15,-31,30,-45",w:155},3:{d:"134,-175v0,30,-16,47,-40,61v62,28,8,116,-50,116v-26,0,-42,-16,-46,-38v-1,-5,2,-7,7,-7v2,0,4,1,4,3v1,18,18,33,38,32v41,0,83,-51,54,-88v-8,-10,-22,-12,-38,-10v-3,0,-4,-1,-4,-4v-1,-9,10,-5,18,-8v23,-7,46,-26,46,-54v0,-43,-60,-39,-80,-12v-3,0,-5,-1,-5,-4v20,-39,96,-38,96,13",w:124},4:{d:"155,-109v-4,11,-28,3,-41,5r-27,105v-1,3,-2,4,-5,4v-5,0,-6,-2,-5,-6r26,-103r-90,0v-5,0,-6,-3,-5,-7r27,-101v1,-3,1,-4,4,-4v5,0,6,3,5,7r-25,94r87,0r25,-97v1,-3,2,-4,5,-4v5,0,6,3,5,7r-24,94v12,3,34,-5,38,6",w:144},5:{d:"141,-82v-2,-52,-65,-53,-100,-27v-2,0,-3,-4,-3,-6r26,-96v1,-4,2,-5,6,-5r85,0v3,0,4,1,4,4v0,5,-2,6,-7,6r-79,0r-23,82v45,-26,100,-13,102,39v3,71,-114,126,-142,48v-2,-3,3,-9,7,-8v2,0,4,1,4,3v22,65,122,21,120,-40",w:151},6:{d:"42,1v-33,0,-58,-38,-37,-66r116,-151v4,0,5,2,5,6v0,1,-27,36,-80,106v32,-14,67,3,67,36v0,35,-37,69,-71,69xm45,-10v47,0,86,-83,23,-89v-27,-2,-60,28,-58,56v0,20,15,33,35,33",w:117},7:{d:"180,-211r-174,208v-5,6,-12,0,-7,-6r164,-195r-109,0v-3,0,-4,-1,-4,-4v0,-5,2,-7,7,-7r118,0v3,0,5,2,5,4",w:167},8:{d:"46,-121v-42,-35,10,-98,55,-96v12,0,25,7,39,21v3,3,2,5,-1,8r-77,65v10,7,65,30,58,58v2,31,-42,66,-73,66v-26,0,-47,-20,-46,-45v1,-33,11,-40,45,-77xm128,-193v-37,-43,-115,23,-75,64v21,-20,46,-41,75,-64xm47,-10v33,0,85,-45,53,-77v-3,-7,-43,-26,-45,-28v-33,35,-43,42,-44,71v-1,20,15,34,36,34",w:152},9:{d:"-6,-139v-2,-44,67,-80,114,-78v3,0,5,3,5,7v-37,134,-57,202,-58,205v0,6,-10,7,-10,0v0,-1,12,-43,36,-127v-21,18,-39,27,-54,27v-18,1,-33,-17,-33,-34xm5,-140v5,51,67,7,81,-10r15,-56v-41,1,-100,29,-96,66",w:105},":":{w:113},";":{w:107},"<":{w:131},"=":{w:145},">":{w:106},"?":{w:123},"@":{d:"137,-10v14,7,37,-44,45,-25v-8,28,-68,58,-73,7v-22,20,-40,30,-56,30v-17,1,-35,-16,-33,-33v6,-54,59,-75,114,-79v4,0,5,2,5,5r-20,75v0,8,10,21,18,20xm31,-33v8,50,66,8,80,-10r16,-56v-50,3,-87,23,-96,66xm40,-58v0,1,-1,2,-1,2",w:144},A:{d:"187,-10v15,7,36,-44,45,-25v-10,29,-72,59,-73,2v-40,22,-73,34,-100,34v-34,1,-59,-21,-56,-54v7,-94,88,-159,186,-163v17,0,25,2,25,6r-45,179v-1,9,9,22,18,21xm13,-54v0,27,18,45,46,44v26,0,61,-12,103,-36r40,-159v-102,-1,-189,60,-189,151",w:194},B:{d:"68,-201v43,-32,116,-28,116,29v0,34,-30,55,-60,64v73,26,20,110,-38,110v-21,0,-43,-8,-64,-23v-2,9,-6,36,-16,21r57,-222v1,-3,2,-4,5,-4v11,5,2,6,0,25xm86,-115v42,0,88,-20,88,-57v0,-52,-68,-45,-109,-14r-40,154v30,7,52,2,75,-11v4,0,5,2,5,6v-11,15,-32,19,-58,18v42,25,101,-1,102,-44v2,-28,-32,-40,-69,-40v-11,0,-18,-1,-18,-5v2,-8,10,-7,24,-7",w:159},C:{d:"135,-211v39,0,61,27,69,60v1,6,-9,9,-11,3v-6,-30,-28,-53,-61,-53v-56,0,-111,67,-111,123v0,72,109,92,145,42v3,-4,11,-6,11,0v-30,64,-167,47,-167,-39v0,-64,63,-136,125,-136",w:137},D:{d:"269,-182v20,-3,34,-18,53,-28v4,0,5,1,5,5v-8,18,-30,24,-51,32v47,77,-7,172,-95,174v-17,0,-43,-6,-80,-18v-15,14,-33,22,-58,22v-20,0,-30,-4,-30,-11v0,-38,44,-40,85,-23v23,-50,37,-116,50,-172v-1,-11,31,-20,47,-19v30,0,55,13,74,38xm159,-202v9,19,65,25,99,22v-23,-30,-65,-37,-99,-22xm109,-25v112,55,214,-45,156,-146v-39,8,-85,0,-108,-18r-40,146v-2,6,-4,13,-8,18xm90,-20v-31,-9,-56,-17,-66,12v23,5,51,0,66,-12",w:268},E:{d:"69,-115v-39,-31,-12,-112,46,-106v28,3,49,16,58,49v0,7,-8,6,-10,1v-5,-21,-25,-39,-48,-39v-35,0,-54,21,-54,57v0,27,21,37,54,35r0,10v-55,-3,-98,15,-100,62v-2,36,42,37,81,37v29,0,42,-12,59,-30v3,0,5,2,5,6v-14,24,-34,33,-73,33v-53,1,-82,-5,-82,-46v0,-38,21,-61,64,-69",w:126},F:{d:"72,-184v42,-54,137,-24,203,-18v17,2,33,-6,47,-13v4,0,5,2,5,6v-25,30,-89,13,-128,6r-24,92v11,2,31,-5,33,5v-3,10,-25,4,-36,6v-11,48,-22,101,-82,99v-39,-1,-71,-23,-79,-58v17,-7,63,18,89,-1v3,0,5,2,5,6v-11,15,-57,14,-79,6v17,48,114,50,123,-6r12,-46v-15,-3,-40,5,-46,-6v6,-12,34,-2,49,-5r25,-94v-47,-7,-76,4,-111,26v-4,0,-6,-1,-6,-5",w:179},G:{d:"136,-128v53,28,94,-10,128,-50v3,0,5,1,5,5v-11,62,-65,172,-119,172v-33,0,-61,-13,-85,-39v-9,5,-48,48,-55,29v10,-13,36,-25,48,-36v-12,-19,-24,-29,-12,-37r38,12v13,-14,25,-32,38,-53v-35,-28,-2,-93,30,-100v10,0,14,13,15,23v0,14,-10,38,-31,74xm151,-214v-20,9,-48,57,-24,80v19,-34,30,-57,30,-68v0,-8,-2,-12,-6,-12xm159,-67v-12,14,-47,9,-71,6v-5,5,-10,9,-15,14v47,49,107,52,144,-18v12,-24,25,-52,35,-86v-38,44,-73,51,-122,32v-12,20,-23,36,-35,49v20,4,41,-1,60,-3v3,0,4,2,4,6xm76,-64v-5,-2,-12,-4,-20,-7v3,6,6,11,10,16v4,-3,7,-6,10,-9",w:243},H:{d:"179,-77r62,-17v7,-1,6,8,2,10v-3,2,-25,7,-67,18r-16,62v-1,6,-10,6,-10,-1v1,-19,2,-39,-3,-55v-31,4,-68,-2,-83,-16r-19,72v-1,3,-2,4,-5,4v-5,0,-5,-3,-5,-7r48,-191v0,-9,-3,-13,-11,-13v-17,-1,-40,16,-52,36v-2,4,-11,2,-10,-3v9,-20,37,-42,62,-43v21,-1,25,18,20,37r-21,79v30,-17,75,-1,83,33v4,-1,8,-1,13,-2r37,-142v1,-3,2,-4,5,-4v4,0,5,2,5,5xm164,-63v-12,1,-6,9,-5,21xm70,-87v3,14,53,21,74,17v-7,-30,-59,-45,-74,-17",w:201},I:{d:"222,-10v19,-1,27,-17,41,-30v4,0,6,2,6,5v-16,40,-68,47,-95,14v-63,53,-137,-13,-162,-66v0,-3,2,-4,5,-4v43,17,78,27,117,14v3,0,5,2,5,6v-25,19,-73,10,-107,-3v41,57,80,81,137,44v-33,-63,0,-178,63,-185v8,0,12,7,12,21v0,56,-30,143,-62,166v10,12,23,18,40,18xm176,-37v29,-25,60,-111,56,-167v-54,7,-82,110,-56,167",w:232},J:{d:"12,-136v1,-47,29,-76,72,-81v54,6,38,66,21,115r-26,74v8,7,15,24,26,9v6,-6,14,-17,20,-21v4,0,5,1,5,5v-5,15,-20,23,-29,29v7,7,16,12,22,20v-8,15,-14,0,-31,-14r-22,2v-15,42,-14,98,-41,127v-16,18,-42,11,-41,-21v1,-57,32,-100,75,-117r5,-16v-37,-42,-56,-79,-56,-111xm86,-206v-37,-1,-63,32,-63,70v0,29,16,62,49,100v13,-37,38,-96,39,-136v0,-23,-9,-34,-25,-34xm81,-10v-4,-4,-7,-7,-8,1xm60,4v-34,14,-63,58,-63,105v0,13,5,19,12,19v12,0,20,-11,26,-31",w:94},K:{d:"9,-162v11,-24,38,-52,61,-55v40,9,4,68,1,96r140,-100v5,0,5,8,1,9r-139,100v30,17,39,95,78,103v17,0,25,-15,40,-24v3,0,4,1,4,4v-10,20,-33,30,-46,30v-42,1,-52,-83,-83,-104r-26,98v0,8,-12,5,-10,0r49,-191v-7,-21,-25,-7,-39,8v-4,3,-13,21,-26,31v-4,0,-5,-1,-5,-5"},L:{d:"109,-32v59,29,97,30,128,-9v3,0,5,2,5,6v-29,45,-76,43,-138,11v-20,42,-85,21,-94,-9v-1,-13,21,-20,35,-20v12,0,30,6,55,17v16,-35,23,-77,36,-115v-32,-3,-57,-5,-71,-18v0,-5,6,-7,7,-5v24,8,46,12,67,13v13,-37,32,-56,57,-56v14,0,28,9,27,23v-5,34,-35,44,-77,43v-13,40,-20,83,-37,119xm213,-198v-25,-21,-51,1,-63,37v37,0,58,-12,63,-37xm20,-33v12,18,59,38,75,5v-34,-14,-52,-24,-75,-5",w:202},M:{d:"224,-10v14,7,39,-43,45,-25v-12,28,-75,60,-72,0v1,-34,31,-113,36,-151v-3,-34,-73,-19,-79,6r-43,175v0,6,-11,8,-11,1v5,-45,42,-143,45,-182v-7,-37,-69,-15,-76,11r-42,170v0,6,-11,8,-11,1r50,-198v-21,-9,-42,25,-57,38v-4,0,-6,-2,-6,-5v9,-23,35,-44,60,-46v9,0,13,4,13,13v15,-16,70,-22,78,3v16,-23,90,-26,90,10v0,33,-32,118,-37,154v-2,11,5,26,17,25",w:231},N:{d:"148,-10v15,7,36,-44,45,-25v-9,16,-29,34,-48,35v-18,1,-25,-17,-25,-35v0,-34,34,-108,34,-150v0,-36,-65,-19,-79,-5r-47,185v0,6,-11,8,-11,1r50,-198v-20,-9,-43,27,-57,38v-4,0,-5,-2,-5,-5v7,-23,35,-44,59,-46v9,0,14,4,14,13v12,-23,93,-21,90,13v-3,34,-33,116,-38,154v-2,12,6,26,18,25",w:155},O:{d:"202,-144v26,-5,44,-20,61,-32v6,-1,8,5,4,8v-14,16,-34,27,-64,34v1,62,-65,133,-128,133v-44,0,-73,-33,-73,-77v0,-63,65,-137,128,-137v42,0,71,30,72,71xm104,-185v0,36,43,52,87,43v-1,-35,-27,-62,-62,-62v-16,0,-25,6,-25,19xm12,-81v0,39,27,69,65,70v56,2,116,-66,115,-121v-54,13,-108,-15,-95,-67v-43,13,-84,66,-85,118",w:177},P:{d:"64,-204v29,-19,110,-19,107,31v-3,57,-83,85,-129,54r-30,114v0,7,-11,7,-11,1r54,-207v0,-5,10,-7,11,-2v0,0,-1,3,-2,9xm44,-130v37,30,116,10,116,-41v0,-46,-90,-39,-101,-17",w:78},Q:{d:"204,-10v29,0,44,-21,59,-33v4,0,5,2,5,6v-16,40,-82,46,-125,25v-35,15,-130,23,-135,-11v11,-67,103,-22,136,-1v56,-15,80,-69,80,-130v0,-87,-97,-37,-128,3v-4,2,-11,1,-10,-4v27,-44,148,-102,148,1v0,61,-25,118,-77,136v12,5,27,8,47,8xm54,-49v-18,-1,-37,10,-36,26v6,19,86,14,111,4v-21,-12,-52,-29,-75,-30",w:227},R:{d:"51,-109v33,29,53,137,114,85v4,0,5,1,5,5v-8,14,-29,20,-39,20v-45,0,-61,-86,-94,-109r-27,103v-1,3,-2,5,-6,5v-3,0,-5,-2,-4,-5r53,-206v1,-3,4,-5,7,-5v8,0,3,8,2,12v29,-19,112,-19,107,31v-5,54,-55,70,-118,64xm40,-119v58,3,115,1,118,-52v3,-45,-82,-40,-101,-17",w:146},S:{d:"164,-218v44,5,41,49,15,85v42,65,21,135,-60,132v-18,0,-35,-8,-53,-25v-11,2,-55,35,-60,18v11,-11,36,-15,52,-26v-4,-8,-46,-46,-29,-53v22,8,50,21,74,23v27,-21,49,-44,64,-69v-17,-34,-26,-56,-26,-64v0,-12,11,-22,23,-21xm187,-184v5,-23,-31,-31,-36,-14v0,7,7,25,22,54v9,-17,14,-30,14,-40xm75,-32v35,40,116,21,115,-33v0,-14,-5,-33,-17,-57v-14,21,-32,41,-54,59v9,1,26,-8,28,3v-3,11,-24,6,-40,7v-10,8,-21,14,-32,21xm92,-55v-13,-3,-30,-8,-50,-16v8,12,16,22,25,31v8,-5,17,-9,25,-15",w:211},T:{d:"72,-184v40,-54,138,-24,203,-18v16,1,32,-6,47,-13v4,0,5,2,5,6v-24,30,-90,13,-128,6r-40,151v-6,30,-34,51,-69,51v-39,-1,-71,-23,-79,-58v18,-7,63,18,89,-1v3,0,5,2,5,6v-11,15,-57,14,-79,6v17,48,109,48,123,-6r40,-151v-49,-7,-79,5,-111,26v-4,0,-6,-1,-6,-5",w:191},U:{d:"216,-10v12,6,34,-44,41,-25v1,10,-31,37,-42,35v-15,0,-24,-16,-27,-49v-20,61,-151,66,-130,-22r27,-116v0,-12,-7,-18,-19,-18v-22,-2,-42,28,-63,58v-5,0,-5,-3,-5,-8v21,-40,44,-58,68,-60v21,-1,33,17,28,38r-28,121v10,81,109,33,121,-15r36,-141v0,-6,12,-8,11,0r-37,141v0,41,6,61,19,61",w:221},V:{d:"324,-210v-23,27,-70,35,-95,10r-67,151v-10,24,-35,48,-65,48v-84,0,-12,-125,-12,-186v0,-12,-5,-18,-17,-18v-24,0,-48,35,-65,58v-5,0,-5,-3,-5,-8v13,-26,40,-59,70,-61v19,0,32,20,26,39v-11,40,-27,75,-31,120v-2,26,14,45,37,46v23,0,43,-21,61,-61r61,-138v2,-4,3,-6,6,-6v4,0,5,1,4,4v22,27,59,15,87,-3v3,0,5,1,5,5",w:218},W:{d:"322,-213v20,29,57,16,86,-2v3,0,5,1,5,5v-22,27,-69,35,-95,10v-25,77,-24,199,-110,199v-29,0,-43,-15,-43,-45v-12,22,-38,45,-67,45v-82,0,-13,-125,-13,-186v0,-12,-7,-18,-19,-18v-21,-4,-46,37,-63,58v-5,0,-5,-3,-5,-8v14,-28,39,-59,70,-61v19,-1,31,19,26,39r-28,121v-3,45,51,58,76,25v36,-46,37,-121,58,-181v0,-6,12,-8,11,0v-12,52,-32,99,-38,155v-5,47,50,61,76,25v34,-47,41,-119,62,-178v0,-7,9,-8,11,-3",w:316},X:{d:"44,-204v-20,-2,-17,19,-30,28v-5,0,-7,-4,-5,-7v15,-47,58,-39,75,4r23,61v27,-32,50,-70,80,-99v6,-1,6,5,4,9r-79,100v15,39,34,130,85,86v4,0,6,2,6,6v-24,30,-60,19,-74,-21r-24,-62v-27,32,-50,70,-80,99v-6,1,-8,-5,-4,-8r79,-101v-12,-28,-28,-94,-56,-95",w:182},Y:{d:"79,-71v-16,55,54,77,91,42v45,-42,41,-121,64,-183v0,-5,10,-8,11,-2r-57,222v19,-9,36,-30,54,-41v6,-1,8,6,4,9v-12,17,-33,32,-62,45v-17,41,-8,110,-57,119v-34,-2,-18,-74,-4,-90v11,-13,28,-25,53,-36r12,-48v-35,55,-136,37,-119,-37r27,-116v0,-12,-6,-18,-18,-18v-23,0,-47,35,-64,58v-6,0,-7,-4,-5,-8v13,-26,40,-59,69,-61v19,0,32,18,27,39xm172,26v-36,16,-54,38,-55,85v0,13,4,19,11,19v33,0,32,-72,44,-104",w:217},Z:{d:"104,8v18,-8,35,-27,56,-43v6,-1,8,6,4,9v-12,15,-31,30,-60,46v-4,54,-20,111,-65,122v-12,0,-18,-9,-18,-29v0,-59,25,-75,73,-99v7,-38,-20,-25,-43,-18v-8,2,-22,18,-26,4v8,-11,10,-7,28,-18v65,-40,99,-81,99,-126v0,-36,-18,-62,-56,-62v-28,0,-60,31,-75,65v-2,5,-11,3,-10,-2v13,-33,47,-73,85,-74v44,-2,67,32,67,73v0,44,-27,83,-82,121v21,1,23,7,23,31xm93,26v-41,21,-58,37,-62,89v0,11,3,16,8,16v34,-5,51,-64,54,-105",w:132},"[":{d:"95,-195v6,-37,40,-26,39,5v-2,39,-33,85,-58,113v-8,29,-12,44,-12,46v-1,10,9,22,18,21v10,5,37,-29,40,-30v4,0,5,1,5,5v-5,17,-29,34,-47,35v-17,0,-26,-12,-26,-35xm124,-191v0,-25,-14,-22,-19,-1v-7,30,-8,30,-23,91v28,-36,42,-66,42,-90",w:90},"\\":{d:"275,-40v0,39,70,37,81,8v5,0,6,5,4,9v-16,42,-115,25,-92,-34v-17,4,-44,-24,-53,-26v5,46,-17,83,-60,84v-15,0,-24,-6,-28,-18v-18,29,-72,21,-63,-19r11,-43v-38,49,-60,73,-65,73v-6,1,-6,-6,-3,-9v25,-25,51,-61,75,-90v1,-7,11,-7,10,0r-19,76v5,35,48,14,54,-7r18,-69v0,-7,11,-7,10,0r-19,77v0,12,8,18,23,18v41,0,50,-41,45,-80v17,-14,47,28,68,22v8,-21,27,-43,53,-43v12,0,18,6,18,17v0,28,-33,41,-64,36v-3,6,-4,12,-4,18xm281,-67v27,2,52,-4,52,-27v-19,-18,-46,3,-52,27",w:333},"]":{d:"62,-32v8,34,70,24,79,0v5,0,6,5,4,9v-7,16,-22,24,-48,24v-28,0,-46,-16,-46,-43v-1,-31,28,-70,59,-69v12,0,18,6,18,17v-1,28,-39,52,-66,62xm59,-43v23,-7,58,-29,59,-51v0,-5,-3,-7,-8,-7v-29,0,-47,31,-51,58",w:119},"^":{d:"135,-10v15,7,36,-44,45,-25v-7,17,-27,34,-47,35v-33,0,-30,-56,-15,-83r-36,-15v-3,15,-17,7,-11,-1v7,-16,8,-9,33,-1v44,14,13,47,13,61v0,20,6,29,18,29",w:143},_:{d:"271,-11v3,0,5,0,5,3v0,5,-2,7,-7,7r-235,0v-3,0,-4,-1,-4,-4v0,-5,2,-6,7,-6r234,0",w:292},"`":{d:"24,-217v12,11,21,26,32,38v1,6,-7,9,-10,5v-9,-12,-21,-22,-29,-36v0,-4,2,-7,7,-7",w:52},a:{d:"150,-10v11,4,35,-29,39,-30v4,0,5,1,5,5v-8,28,-68,58,-72,7v-22,20,-42,30,-57,30v-17,1,-31,-15,-32,-31v-11,16,-19,23,-24,23v-6,1,-6,-6,-3,-9v27,-26,42,-67,82,-82v18,-7,39,-10,58,-13v4,0,5,2,5,5r-19,75v-1,10,9,21,18,20xm43,-33v2,28,32,30,54,12r27,-22r15,-56v-50,3,-87,23,-96,66xm53,-58v0,1,-2,2,-2,2",w:157},b:{d:"184,-99v-13,13,-27,10,-48,4v2,47,-18,94,-56,96v-21,1,-31,-21,-27,-45v-13,12,-22,25,-38,33v-6,1,-6,-7,-3,-9v15,-13,30,-28,45,-45v15,-48,22,-105,43,-147v16,-17,29,-7,29,25v0,36,-21,78,-63,127v-6,19,-7,53,15,51v32,-3,49,-52,45,-93v11,-13,32,11,53,-2v3,0,5,1,5,5xm73,-84v35,-49,53,-79,41,-125v-6,-1,-13,15,-14,21",w:101},c:{d:"150,-35v-12,42,-110,58,-110,-4v-15,23,-26,33,-31,33v-6,1,-6,-6,-3,-9v35,-26,46,-94,103,-93v16,0,30,5,35,18v-6,18,-24,-13,-38,-8v-26,-1,-55,27,-55,54v0,23,12,38,34,38v26,1,45,-20,59,-34v4,0,6,2,6,5",w:112},d:{d:"150,-10v10,5,37,-29,40,-30v4,0,5,1,5,5v-2,26,-71,60,-73,7v-22,20,-41,30,-56,30v-19,0,-31,-15,-33,-32v-11,16,-19,24,-24,24v-6,1,-6,-6,-3,-9v21,-19,43,-66,80,-80v20,-7,37,-13,56,-14r28,-104v1,-3,2,-4,5,-4v13,10,3,16,-5,47r-37,137v0,11,6,23,17,23xm44,-33v5,51,68,6,81,-10r14,-56v-41,1,-99,30,-95,66",w:159},e:{d:"38,-32v7,34,68,24,78,0v5,0,7,5,5,9v-9,31,-84,34,-92,-2v-14,15,-24,23,-31,23v-13,-13,30,-18,29,-40v-1,-31,28,-70,59,-69v12,0,18,6,18,17v-1,28,-39,52,-66,62xm35,-43v23,-8,58,-29,59,-51v0,-5,-3,-7,-8,-7v-29,-1,-48,30,-51,58",w:95},f:{d:"77,2v34,50,10,130,-44,138v-16,2,-20,-19,-15,-36r34,-148v-21,22,-33,33,-37,33v-6,1,-6,-5,-4,-9v10,-9,26,-25,46,-45v14,-47,22,-101,41,-144v5,-7,9,-11,15,-11v10,0,16,11,16,34v0,36,-21,78,-63,126r-39,178v0,8,2,12,7,12v44,-13,62,-101,24,-138v2,-8,15,-1,22,-1v10,5,33,-36,38,-16v0,8,-31,30,-41,27xm72,-84v35,-48,54,-78,42,-125v-6,2,-11,8,-14,21",w:88},g:{d:"123,0v14,-8,29,-27,47,-42v6,-1,8,5,4,8v-11,15,-29,31,-55,49v-14,35,-11,85,-41,92v-12,0,-21,-12,-21,-26v0,-25,18,-50,53,-72r9,-34v-21,18,-38,27,-53,27v-17,1,-32,-15,-33,-31v-11,16,-19,23,-24,23v-6,1,-6,-6,-3,-9v24,-21,41,-66,80,-81v20,-8,40,-14,60,-14v3,0,5,2,5,7v0,2,-9,36,-28,103xm44,-33v6,45,55,22,80,-10r15,-56v-41,1,-100,29,-95,66xm106,24v-16,11,-38,35,-38,57v0,10,3,15,9,15v6,0,10,-7,14,-20v0,-1,6,-18,15,-52",w:138},h:{d:"160,-10v14,7,37,-44,45,-25v-4,16,-30,35,-48,35v-55,0,14,-99,-43,-99v-46,0,-55,55,-65,95v0,6,-10,7,-10,1v0,-1,3,-16,11,-47v-20,26,-31,39,-34,39v-6,1,-6,-5,-4,-9r45,-57r17,-69v16,-47,12,-65,29,-70v19,4,14,58,4,77v-5,10,-12,23,-23,40v25,-19,69,-10,67,24v-2,21,-22,62,9,65xm75,-104v21,-31,37,-59,28,-101v-5,10,-21,78,-28,101",w:168},i:{d:"63,-153v-1,-10,19,-18,20,-5v1,10,-19,18,-20,5xm65,-10v14,7,37,-44,45,-25v-7,30,-72,55,-73,5r0,-5v-11,14,-16,24,-27,29v-6,1,-8,-6,-4,-9v25,-21,43,-55,50,-94v0,-6,10,-7,10,-1v2,24,-43,96,-1,100",w:73},j:{d:"84,-153v-1,-10,19,-18,20,-5v1,9,-19,19,-20,5xm58,8v13,-5,33,-23,54,-41v6,-1,8,6,4,9v-13,17,-33,32,-61,45v-13,37,-12,86,-37,111v-16,17,-42,11,-41,-21v2,-58,23,-77,69,-97r20,-80v-6,10,-48,61,-57,60v-6,1,-6,-6,-3,-9v31,-32,55,-61,70,-89v3,-6,10,-9,11,-2v-2,21,-21,86,-29,114xm43,26v-36,16,-55,37,-56,85v0,13,4,19,11,19v33,0,32,-73,45,-104",w:87},k:{d:"93,-99v25,-23,74,-17,79,14v-2,29,-55,23,-84,13v24,71,61,78,100,34v4,0,6,1,6,5v-40,57,-89,40,-115,-33r-16,61v-1,3,-2,4,-5,4v-4,0,-5,-2,-5,-5v0,-1,5,-21,15,-61v-7,9,-50,58,-56,59v-5,1,-6,-5,-4,-9r35,-37v13,-14,24,-27,32,-38r22,-89v6,-25,16,-37,29,-37v10,0,17,10,17,20v0,20,-38,82,-50,99xm92,-117v9,-14,41,-67,41,-82v0,-6,-2,-8,-6,-8v-23,6,-26,64,-35,90xm161,-86v-12,-26,-50,-20,-71,4v18,5,34,8,46,8v17,0,25,-4,25,-12",w:157},l:{d:"103,-195v6,-38,40,-26,39,5v-2,39,-33,85,-58,113v-8,30,-12,45,-12,46v0,8,9,22,18,21v14,7,37,-44,45,-25v-5,17,-29,35,-48,35v-26,0,-31,-28,-19,-60v-33,34,-51,51,-55,51v-6,1,-6,-6,-3,-9v15,-14,36,-35,64,-64xm132,-191v0,-25,-14,-22,-19,-1v-7,30,-8,30,-23,91v28,-36,42,-66,42,-90",w:100},m:{d:"244,-10v10,5,37,-29,40,-30v7,-1,5,6,3,9v-12,25,-74,54,-71,-4v1,-19,27,-67,-10,-65v-43,2,-37,60,-50,95v0,6,-11,8,-11,1v-2,-16,21,-61,19,-76v-6,-40,-52,-12,-58,11r-16,64v0,6,-11,8,-11,1r23,-93v-9,-9,-20,3,-30,17v-38,50,-26,39,-56,69v-4,2,-10,2,-9,-4v31,-27,51,-84,92,-95v8,0,13,4,14,13v17,-17,52,-21,60,4v16,-25,65,-25,65,10v0,20,-26,68,6,73",w:251},n:{d:"186,-10v14,7,38,-43,45,-25v-13,28,-73,60,-73,0v0,-21,27,-64,-10,-65v-50,-1,-45,58,-58,95v0,6,-11,8,-11,1v-2,-2,13,-50,24,-93v-35,-6,-54,76,-91,87v-4,0,-5,-1,-5,-5v23,-16,53,-86,93,-95v9,0,13,4,13,13v15,-20,70,-21,67,14v-2,20,-26,68,6,73",w:192},o:{d:"212,-93v-11,15,-43,10,-64,5v17,46,-26,88,-67,89v-23,0,-42,-16,-42,-39v-11,14,-16,24,-30,32v-6,1,-6,-6,-3,-9v35,-27,43,-94,104,-94v33,0,62,23,97,11v3,0,5,1,5,5xm84,-10v49,0,85,-89,23,-89v-29,0,-57,25,-57,56v0,20,14,33,34,33",w:134},p:{d:"203,-33v-13,25,-35,38,-67,26v-27,14,-64,7,-69,-22r-34,129v-1,4,-2,5,-6,5v-4,0,-5,-1,-4,-5r45,-176v-32,42,-42,63,-58,70v-6,1,-6,-6,-3,-9v15,-11,51,-65,68,-89v1,-4,3,-5,7,-5v11,3,-2,20,-2,28v23,-40,99,-42,99,12v0,28,-13,43,-33,57v28,10,37,-15,51,-27v4,0,6,2,6,6xm111,-11v28,-1,57,-24,57,-55v0,-20,-13,-35,-34,-34v-30,1,-58,26,-58,56v0,20,15,33,35,33",w:167},q:{d:"134,-14v18,9,46,5,54,-8v4,0,6,1,6,5v-9,16,-29,25,-50,17v8,30,12,52,12,67v-1,41,-6,69,-35,75v-56,-21,-11,-121,-1,-168v-21,18,-39,28,-54,28v-18,0,-32,-15,-33,-32v-12,16,-19,24,-23,24v-6,1,-8,-6,-4,-9v30,-27,39,-65,83,-82v20,-8,39,-13,58,-13v14,8,-6,35,-7,50r-23,89v-9,33,-13,55,-13,66v-1,15,5,36,17,36v18,0,25,-40,25,-64v0,-26,-10,-54,-15,-77v0,-2,1,-4,3,-4xm44,-33v3,28,30,30,53,12r28,-22r15,-56v-46,5,-89,23,-96,66",w:173},r:{d:"132,-10v11,4,35,-29,39,-30v4,0,5,1,5,5v-7,17,-27,35,-47,35v-34,0,-30,-57,-14,-83r-37,-15v-8,16,-55,92,-67,92v-6,1,-6,-6,-3,-9v20,-19,45,-57,63,-92v8,-8,9,1,29,7v44,13,13,28,14,61v0,20,6,29,18,29",w:138},s:{d:"97,-11v23,-2,34,-16,48,-29v4,0,5,1,5,5v-12,37,-106,52,-119,8v-11,14,-18,21,-21,21v-4,0,-6,-1,-6,-5v13,-13,49,-68,78,-103v8,0,4,9,4,12v5,21,37,66,11,91xm79,-10v29,-12,12,-63,-2,-83v-11,20,-33,37,-37,58v-3,13,23,26,39,25",w:111},t:{d:"38,-35v-9,14,-15,24,-27,29v-6,1,-6,-6,-3,-9v13,-11,27,-33,38,-48r12,-48v-11,-2,-31,5,-35,-4v1,-14,25,-4,37,-7r14,-56v0,-6,11,-8,11,-1r-15,57r45,0v3,0,4,1,4,4v-4,15,-35,3,-51,7v-13,52,-20,78,-20,79v3,24,27,30,43,7v5,-4,15,-22,20,-10v-8,29,-70,54,-74,8v0,-2,0,-5,1,-8",w:74},u:{d:"177,-10v11,5,36,-28,39,-30v4,0,5,1,5,5v-8,29,-71,59,-72,4v-26,53,-121,30,-91,-35v-22,32,-33,52,-48,60v-6,1,-6,-6,-3,-9v13,-10,52,-70,61,-88v0,-5,10,-8,11,-2v1,8,-16,55,-15,63v5,44,66,37,81,-2v4,-10,12,-29,20,-59v0,-5,10,-8,11,-2r-17,70v0,12,6,26,18,25",w:184},v:{d:"158,-100v20,-9,64,15,89,2v4,0,6,2,6,6v-20,16,-52,9,-83,0v5,44,-36,91,-74,90v-49,-2,-4,-67,-3,-88v0,-5,-3,-7,-10,-7v-19,9,-51,85,-73,91v-6,2,-6,-6,-3,-9v15,-12,45,-58,58,-81v9,-17,38,-14,38,6v0,11,-21,55,-20,65v0,9,5,13,14,13v33,-1,76,-48,61,-88",w:169},w:{d:"203,-104v21,-10,64,15,89,2v4,0,5,2,5,6v-20,16,-53,8,-83,0v6,46,-11,99,-59,97v-15,0,-24,-6,-28,-18v-18,29,-72,21,-63,-19r11,-43v-38,49,-60,73,-65,73v-6,1,-6,-6,-3,-9v21,-20,54,-63,75,-90v1,-7,11,-7,10,0r-19,76v5,35,48,14,54,-7r18,-69v0,-7,11,-7,10,0r-19,77v0,12,8,18,23,18v45,1,49,-57,44,-94",w:211},x:{d:"169,-28v19,38,48,1,61,-12v4,0,5,1,5,5v-5,16,-24,33,-42,34v-24,-4,-32,-20,-49,-46v-37,32,-56,48,-57,48v-4,0,-6,-1,-6,-5v3,-8,44,-41,57,-52v-10,-13,-19,-42,-38,-42v-36,0,-60,76,-90,92v-4,0,-5,-1,-5,-5v21,-23,70,-104,95,-98v28,7,22,13,46,46v37,-32,56,-48,57,-48v4,0,6,2,6,6v-3,7,-44,40,-57,51v16,26,17,25,17,26",w:200},y:{d:"179,9v11,-4,31,-23,55,-41v5,0,6,6,4,9v-12,17,-33,32,-62,45v-13,37,-12,86,-37,111v-16,17,-42,11,-41,-21v2,-58,23,-77,69,-97r11,-39v-24,33,-92,34,-94,-16v-1,-21,19,-43,9,-59v-16,-4,-72,96,-82,93v-4,0,-5,-1,-5,-5v15,-15,66,-100,88,-98v27,9,-2,44,1,67v7,56,83,24,88,-12v2,-12,7,-28,13,-49v2,-6,11,-9,12,-2v-7,42,-13,52,-29,114xm164,28v-37,15,-56,36,-56,84v0,13,4,19,11,19v33,0,32,-72,45,-103",w:209},z:{d:"133,8v23,-11,35,-25,57,-43v6,-1,6,5,4,9v-12,16,-33,31,-61,46v-3,55,-19,111,-64,122v-12,0,-19,-9,-19,-29v0,-59,25,-74,73,-99v-2,-19,5,-25,-10,-26v-17,-1,-38,9,-53,18v-8,-1,-5,-11,1,-13v24,-15,59,-43,59,-73v0,-26,-35,-18,-47,-3v-20,25,-36,61,-63,77v-6,1,-6,-6,-3,-9v27,-20,51,-98,95,-93v47,5,28,60,-5,87v23,-5,39,-1,36,29xm123,26v-41,21,-60,35,-62,89v0,11,2,16,7,16v34,-6,52,-63,55,-105",w:162},"{":{d:"97,-2v-48,3,-34,-49,-30,-84v2,-18,-13,-14,-19,-21v0,-5,2,-7,7,-7v24,8,45,-77,48,-75v11,-18,28,-27,49,-27v3,0,4,1,4,4v0,5,-2,7,-7,7v-51,-5,-45,76,-77,96v20,26,-25,98,28,97v3,0,4,1,4,4v0,5,-2,6,-7,6",w:145},"|":{d:"93,-210r-53,205v-1,4,-3,5,-7,5v-4,0,-5,-1,-4,-5r53,-205v1,-4,3,-6,7,-6v4,0,5,2,4,6",w:86},"}":{d:"129,-114v-41,-11,25,-107,-45,-102v-5,0,-6,2,-6,7v0,3,1,4,4,4v52,-1,6,69,28,96v-32,21,-27,101,-78,97v-5,0,-7,1,-7,6v0,3,1,4,4,4v48,-7,48,-19,69,-75v7,-18,17,-26,28,-26v7,2,10,-11,3,-11",w:124},"~":{w:360},"":{w:97}}}),Cufon.registerFont({w:123,face:{"font-family":"Free SCPT","font-weight":400,"font-stretch":"normal","units-per-em":"360","panose-1":"3 8 4 2 3 2 5 11 4 4",ascent:"246",descent:"-114",bbox:"-96.1175 -259.01 252.014 99.6563","underline-thickness":"17.9297","underline-position":"-25.8398","unicode-range":"U+0020-U+007E"},glyphs:{" ":{w:90},"!":{d:"42,-64v-6,11,-20,33,-25,10v28,-59,62,-105,96,-173v4,-10,17,-10,17,1v-21,60,-67,122,-88,162xm-9,1v-2,-15,20,-42,26,-18v2,15,-20,41,-26,18",w:94},'"':{d:"106,-235v1,1,-22,62,-37,67v-22,-6,22,-61,16,-60v5,-15,17,-21,21,-7xm103,-176v5,-17,21,-59,36,-67v5,0,8,4,8,8v1,1,-22,62,-38,67v-4,0,-6,-2,-6,-8",w:85},"#":{d:"97,-213v14,10,6,18,-6,35v-13,20,-22,35,-28,46r34,-8v16,-28,30,-58,46,-73v25,17,-23,51,-28,71v9,2,13,5,13,11v1,11,-11,5,-22,6r-14,29v14,-1,17,15,7,18r-15,-2r-35,73v-5,4,-11,-2,-11,-7v0,-4,9,-25,26,-62r-32,7r-30,62v-24,-4,-4,-19,10,-59v-18,4,-22,-15,-8,-18r16,1v6,-13,7,-13,15,-29v-20,5,-23,-19,-4,-17r13,1v19,-33,32,-68,53,-85xm87,-122v-17,7,-34,1,-40,21v-2,7,-3,7,-7,15v20,-5,20,-3,32,-8"},$:{d:"49,-91v-37,-47,5,-100,59,-98v4,-7,15,-26,21,-12v0,4,-3,9,-5,12v41,8,29,48,-5,63v-13,6,-27,11,-42,13r-10,17v43,38,14,105,-52,97v-3,7,-13,23,-18,10r5,-14v-42,-11,-22,-64,10,-68v4,0,6,1,6,5v-10,10,-32,34,-7,46xm88,-132v19,-3,45,-17,47,-32v1,-9,-10,-11,-21,-10xm97,-171v-29,5,-57,34,-38,63v7,-9,-4,-22,13,-23xm23,-16v37,9,67,-40,35,-64"},"%":{d:"28,-125v1,-35,32,-70,61,-81v4,0,6,2,6,7v35,28,-20,99,-48,99v-12,0,-19,-11,-19,-25xm52,-114v23,-5,47,-46,36,-72v-2,-2,-4,-3,-8,-3v-16,12,-36,39,-36,63v1,7,1,12,8,12xm46,-6v-4,11,-16,12,-18,2v31,-71,118,-134,159,-202v5,-7,14,-4,15,4v-10,36,-138,143,-156,196xm114,-29v1,-35,31,-70,60,-81v4,0,6,2,6,7v37,27,-20,100,-48,99v-12,0,-18,-12,-18,-25xm137,-18v24,-5,48,-46,37,-72v-2,-2,-5,-3,-9,-3v-16,12,-36,38,-35,63v1,7,1,12,7,12",w:214},"&":{d:"159,-196v-2,33,-24,48,-52,64v4,40,4,39,13,77v12,-18,20,-33,22,-46v-19,4,-31,-17,-12,-20v21,2,45,-3,71,-5v16,-1,21,16,10,19v-21,-4,-24,-3,-54,3v-4,20,-20,54,-31,66v7,19,27,26,52,19v4,0,7,2,7,6v-14,25,-60,20,-73,-8v-34,40,-94,21,-94,-32v0,-47,28,-66,69,-85v-6,-45,8,-83,47,-85v15,-1,26,12,25,27xm129,-203v-21,1,-28,29,-24,57v16,-9,35,-25,36,-42v0,-7,-5,-15,-12,-15xm38,-59v0,39,43,51,68,21v-9,-20,-14,-56,-17,-85v-26,10,-51,37,-51,64",w:225},"'":{d:"106,-235v1,1,-22,62,-37,67v-22,-6,22,-61,16,-60v5,-15,17,-21,21,-7",w:45},"(":{d:"14,67v7,-132,68,-260,154,-325v14,8,0,18,-10,29v-69,74,-115,168,-130,301v-3,8,-16,7,-14,-5",w:128},")":{d:"-23,67v-11,15,-28,9,-15,-5v70,-73,130,-181,141,-315v3,-8,16,-7,14,5v-7,125,-62,245,-140,315",w:128},"*":{d:"106,-220v-2,-19,15,-23,18,-9v0,6,-2,17,-7,32v22,1,33,-18,41,-4v0,11,-24,20,-39,16v4,16,15,16,21,32v2,4,-3,7,-6,7v-11,-1,-23,-18,-28,-32v-13,4,-24,46,-36,23v2,-12,13,-25,25,-35v-11,-13,-24,-11,-29,-25v8,-14,21,-2,37,12v2,-7,3,-13,3,-17"},"+":{d:"9,-96v3,-15,18,-9,44,-11v10,-18,14,-42,32,-46v3,0,4,1,4,4v-2,11,-11,26,-18,42v21,3,34,-4,38,10v-4,17,-20,4,-46,7v-9,15,-10,48,-27,53v-5,1,-8,-2,-7,-6v0,-5,5,-20,16,-46v-20,-2,-31,9,-36,-7"},",":{d:"-31,52v-8,-2,-10,-12,0,-19v19,-15,20,-39,30,-57v7,-5,16,-1,15,9v-1,20,-24,58,-45,67",w:74},"-":{d:"-12,-73v-1,-22,46,-8,71,-12v19,-3,20,17,9,20v-20,-3,-54,-1,-72,2v-4,0,-8,-5,-8,-10",w:87},".":{d:"-11,1v-2,-15,20,-42,26,-18v2,15,-20,41,-26,18",w:74},"/":{d:"174,-253v6,-6,12,-6,13,2v-32,45,-51,58,-106,133r-149,204v-2,7,-12,8,-13,1v44,-83,204,-282,255,-340",w:120},0:{d:"-3,-47v0,-53,54,-119,95,-136v5,0,8,4,8,12v13,4,19,15,19,33v0,46,-54,131,-94,131v-18,0,-28,-19,-28,-40xm100,-133v0,-13,-9,-27,-22,-25v-28,21,-60,67,-60,109v0,12,5,25,15,23v36,-7,65,-63,67,-107"},1:{d:"39,-29v-6,15,-15,27,-22,10v2,-18,57,-121,69,-135v-12,9,-35,23,-47,25v-7,-2,-8,-18,3,-19v12,-2,47,-29,65,-34v11,4,10,12,2,24v-35,54,-58,98,-70,129"},2:{d:"95,-179v38,2,36,45,10,67v-25,20,-95,70,-103,84v20,-6,37,-9,54,-9v10,0,22,4,21,13v-2,17,-28,-1,-44,7v-19,1,-53,24,-58,-3v23,-41,80,-73,114,-101v16,-13,23,-36,0,-40v-13,-2,-37,19,-49,26v-2,-1,-8,-3,-7,-7v4,-15,44,-38,62,-37"},3:{d:"94,-152v-8,-22,-34,-2,-50,4v-4,0,-6,-2,-6,-6v11,-28,78,-42,78,-1v0,20,-15,33,-35,41v12,5,18,11,18,27v0,34,-40,81,-74,81v-16,0,-33,-16,-32,-34v-4,-17,18,-24,23,-12v-3,14,2,27,14,27v19,1,48,-37,48,-59v0,-18,-14,-23,-30,-18v-3,0,-5,-1,-5,-6v5,-26,50,-14,51,-44"},4:{d:"112,-93v-1,16,-18,10,-36,12r-31,74v-6,5,-18,0,-16,-8v0,-9,8,-30,24,-64v-21,2,-34,7,-48,11v-10,-1,-8,-17,-2,-23v27,-29,74,-83,114,-96v5,0,11,4,10,9v-8,23,-32,52,-42,78v14,-1,25,-4,27,7xm62,-98v13,-25,26,-45,37,-62v-20,10,-59,48,-75,68v17,-4,29,-6,38,-6"},5:{d:"110,-181v19,-4,32,13,15,18v-16,0,-32,0,-44,3v-20,17,-32,32,-38,44v27,-13,59,-9,59,22v0,35,-47,91,-81,88v-28,5,-43,-55,-13,-62v13,2,4,11,4,22v0,11,6,22,16,22v23,1,54,-41,52,-64v-2,-30,-34,-15,-52,-6v-30,-15,14,-51,29,-67v-3,-4,-4,-6,-4,-8v2,-13,44,-9,57,-12"},6:{d:"-6,-45v0,-63,56,-109,111,-131v9,1,7,11,-1,15v-24,12,-46,31,-65,53v33,-14,63,-17,66,17v4,35,-42,85,-77,85v-19,0,-34,-18,-34,-39xm84,-88v-3,-29,-46,-8,-60,1v-14,21,-17,58,9,63v28,-2,48,-34,51,-64"},7:{d:"17,-9v-5,7,-16,6,-16,-2v18,-51,71,-111,107,-150v-32,7,-53,10,-66,10v-18,0,-15,-18,-4,-19v26,4,62,-6,83,-10v14,1,11,17,2,26v-47,49,-77,94,-106,145"},8:{d:"-12,-39v-3,-30,43,-65,68,-78v-36,-24,-2,-74,37,-69v51,6,23,59,-9,71v44,39,-7,107,-61,107v-18,0,-34,-14,-35,-31xm87,-171v-25,-1,-34,29,-14,44v12,-6,26,-17,27,-31v0,-8,-5,-13,-13,-13xm32,-25v38,-1,67,-53,36,-80v-24,11,-56,35,-56,61v-1,13,8,19,20,19"},9:{d:"28,-7v-10,-2,-8,-10,0,-16v23,-17,40,-40,53,-63v-31,18,-64,18,-66,-19v-2,-35,42,-86,77,-84v18,0,31,15,31,34v1,53,-59,128,-95,148xm34,-110v0,33,47,12,57,3v8,-17,12,-30,12,-41v0,-15,-4,-24,-17,-24v-23,-1,-52,38,-52,62"},":":{d:"-11,1v-2,-15,20,-42,26,-18v2,15,-20,41,-26,18xm24,-87v0,-9,8,-27,17,-27v5,0,9,4,8,9v1,11,-7,28,-17,27v-5,0,-8,-3,-8,-9",w:74},";":{d:"-31,52v-8,-2,-10,-12,0,-19v19,-15,20,-39,30,-57v7,-5,16,-1,15,9v-1,20,-24,58,-45,67xm33,-78v-17,-3,-4,-36,8,-36v5,0,9,4,9,9v0,10,-7,29,-17,27",w:74},"<":{d:"178,-211r0,23r-139,65r139,67r0,23r-166,-80r0,-21",w:180},"=":{d:"12,-115v1,-21,54,-6,81,-10v18,-2,25,13,11,17v-27,-1,-62,-2,-84,2v-4,0,-8,-3,-8,-9xm4,-76v5,-21,51,-7,82,-11v18,-3,24,12,11,18v-13,-3,-66,-3,-84,1v-4,0,-8,-4,-9,-8"},">":{d:"13,-211r165,81r0,20r-165,77r0,-23r138,-64r-138,-68r0,-23",w:180},"?":{d:"144,-177v16,-14,23,-43,-6,-43v-19,-5,-52,32,-72,43v-4,0,-6,-3,-6,-7v3,-22,52,-51,77,-51v38,0,48,43,19,67v-23,29,-84,55,-94,96v-2,10,-18,14,-20,2v7,-45,72,-83,102,-107xm33,10v-17,-4,-4,-37,8,-37v18,4,5,36,-8,37",w:131},"@":{d:"170,-186v13,-1,23,14,14,24v11,22,-43,69,-3,85v63,-9,74,-154,-4,-150v-69,3,-124,63,-126,138v0,39,21,74,60,74v25,0,49,-17,73,-26v3,0,7,3,7,7v-9,22,-49,37,-82,37v-49,0,-77,-40,-77,-89v0,-85,64,-157,147,-157v100,0,84,175,0,181v-17,1,-35,-17,-27,-37v-7,11,-21,29,-33,29v-12,0,-20,-13,-19,-26v3,-40,33,-85,70,-90xm118,-100v2,14,12,9,20,-1v12,-14,22,-43,35,-59v-2,-4,-4,-7,-9,-7v-20,1,-48,50,-46,67",w:245},A:{d:"111,4v-8,0,-12,-8,-12,-18v0,-20,11,-74,15,-97v-27,5,-49,12,-67,19r-52,86v-6,11,-16,13,-20,2v4,-19,32,-58,44,-78r-26,9v-8,1,-10,-13,-3,-16v7,-5,36,-13,46,-18v20,-30,69,-89,103,-121v9,-9,17,-14,22,-14v5,0,12,5,10,11r-30,97v10,0,24,-2,23,8v1,13,-19,10,-28,12v-3,4,-17,88,-18,105v0,8,-2,13,-7,13xm64,-115r55,-15r27,-78v-32,22,-70,72,-82,93",w:160},B:{d:"178,-208v1,34,-44,60,-77,70v80,32,20,144,-55,139v-12,0,-24,-3,-38,-9v-2,7,-4,15,-9,15v-15,-5,-13,-19,-4,-40v30,-77,57,-114,97,-179v-13,2,-36,26,-42,6v8,-22,66,-33,86,-34v22,-1,42,12,42,32xm161,-207v0,-21,-35,-18,-51,-11v8,22,-29,46,-36,69v32,-5,87,-30,87,-58xm63,-130v-16,25,-38,68,-50,107v49,30,108,-24,108,-71v0,-24,-24,-37,-51,-30v-3,0,-5,-2,-7,-6",w:161},C:{d:"-2,-39v6,-74,78,-188,150,-201v14,-3,23,11,23,25v-1,32,-26,71,-51,82v-4,0,-10,-6,-10,-10v12,-20,51,-42,48,-71v-2,-21,-22,-10,-37,3v-44,37,-96,100,-101,171v7,43,46,33,73,0v11,-9,25,-37,37,-47v3,0,4,2,4,4v-10,30,-55,89,-97,90v-22,1,-41,-21,-39,-46",w:150},D:{d:"19,10v-30,-7,-22,-24,-9,-58v23,-58,36,-88,72,-152v-9,6,-25,20,-28,4v19,-41,132,-62,127,12v-6,86,-79,180,-162,194xm151,-138v14,-32,23,-77,-18,-79v-10,0,-21,3,-34,9v4,2,5,4,5,6v-28,53,-70,134,-83,186v7,16,22,4,37,-5v34,-20,75,-75,93,-117",w:165},E:{d:"211,-235v-8,23,-66,7,-96,20v8,8,-11,22,-15,31v-12,18,-20,31,-25,40r61,-8v7,0,11,3,11,9v0,8,-5,8,-14,9v-30,2,-54,6,-70,11v-9,14,-36,66,-43,92v24,-7,47,-17,77,-17v15,-4,24,11,13,17v-39,1,-71,12,-102,26v-19,-9,-12,-17,-1,-46v21,-54,53,-107,89,-161v-9,-1,-9,-14,-1,-17v19,-8,78,-15,101,-14v10,0,15,3,15,8",w:141},F:{d:"187,-243v23,-2,28,17,11,20v-24,-3,-57,3,-78,9v-11,12,-39,56,-46,71v25,-5,43,-8,53,-8v9,0,14,2,15,8v1,11,-11,12,-23,11v-12,0,-31,3,-58,11v-17,29,-33,65,-45,106v-5,16,-20,8,-20,-4v17,-64,62,-135,97,-190v-12,-7,-4,-16,11,-20v23,-6,59,-12,83,-14",w:141},G:{d:"52,68v-4,7,-18,5,-17,-6v1,-28,27,-70,44,-102v-26,25,-78,33,-78,-16v0,-59,59,-129,99,-161v21,-17,40,-26,55,-26v13,0,22,13,24,27v4,27,-41,87,-65,89v-4,0,-8,-5,-8,-8v17,-24,59,-55,60,-85v0,-5,-5,-9,-10,-8v-64,25,-121,97,-136,172v-2,9,8,20,18,19v28,-2,59,-38,76,-48v11,2,9,14,2,23v-23,29,-51,90,-64,130",w:143},H:{d:"91,1v-5,0,-12,-9,-12,-15v0,-11,15,-47,44,-108v-24,5,-50,13,-76,23v-14,33,-30,64,-35,94v-1,7,-4,10,-8,10v-24,-6,0,-45,3,-60r15,-36v-4,1,-21,12,-20,-3v1,-14,23,-13,32,-20v15,-31,53,-93,62,-114v8,-17,6,-22,18,-25v6,0,9,3,9,8v7,7,-42,82,-63,123r74,-21v14,-27,37,-59,56,-92v6,-11,17,-9,17,2v0,23,-46,73,-49,87v8,-2,22,-2,21,6v-1,13,-15,12,-31,13v-25,44,-41,84,-49,117v-2,8,-4,11,-8,11",w:165},I:{d:"18,-19v-3,18,-18,15,-19,1v13,-68,68,-152,111,-210v5,-7,10,-10,13,-10v8,2,9,12,3,21v-44,56,-100,144,-108,198",w:81},J:{d:"195,-242v22,-5,36,21,13,20r-29,-1v-34,84,-61,152,-111,199v-28,27,-71,21,-71,-21v0,-41,25,-88,56,-105v4,0,6,2,6,6v-15,24,-46,67,-41,92v-1,14,6,28,19,27v12,0,25,-11,40,-32v25,-35,62,-112,81,-163v-28,4,-39,10,-56,14v-12,-1,-12,-16,1,-20v28,-9,59,-16,92,-16",w:152},K:{d:"110,-242v3,-7,16,-4,14,3v0,10,-10,35,-32,74v25,-16,72,-46,113,-60v14,6,7,19,-8,21v-38,15,-68,33,-93,54v-8,29,-14,73,-14,102v-1,10,2,18,9,19v5,5,30,-31,46,-47v16,15,-38,73,-51,67v-49,-12,-11,-115,-6,-150v-24,41,-69,110,-76,150v-2,15,-18,14,-19,0v14,-75,95,-174,117,-233",w:166},L:{d:"97,-207v7,-8,25,-40,33,-18v-31,52,-103,133,-120,197v22,-9,54,-15,65,-15v17,0,16,19,4,20v-30,-7,-53,14,-80,18v-17,-5,-13,-19,-5,-37v27,-57,75,-127,103,-165",w:111},M:{d:"127,-232v19,-20,31,2,18,21v-24,34,-51,96,-59,142r82,-117v21,-25,32,-51,59,-61v6,0,11,4,11,10v-29,74,-92,142,-92,227v0,6,-5,15,-11,14v-7,0,-11,-9,-11,-18v0,-33,28,-99,83,-196v-33,32,-75,107,-115,159v-9,12,-26,7,-26,-9v0,-29,17,-75,52,-138v-49,52,-83,123,-114,192v-5,13,-11,19,-18,19v-11,-3,-5,-10,0,-24v36,-87,83,-160,141,-221",w:204},N:{d:"135,-231v-14,49,-37,130,-33,191v24,-71,64,-141,103,-201v5,-6,16,-9,18,-1v-4,10,-7,12,-17,30v-45,73,-63,112,-88,184v-4,15,-13,27,-26,29v-10,-1,-10,-12,-10,-27v-1,-48,14,-127,23,-166v-27,31,-83,133,-98,187v-3,9,-17,11,-18,1v21,-77,78,-166,129,-228v4,-3,7,-5,11,-5v4,0,6,2,6,6",w:179},O:{d:"27,4v-46,-11,-29,-71,-7,-113v20,-39,51,-75,90,-109v-11,-2,-39,25,-45,6v7,-20,43,-27,67,-27v63,0,53,74,21,123v-28,43,-73,111,-126,120xm158,-190v0,-20,-14,-34,-39,-30v2,2,3,4,3,6v-46,59,-95,94,-104,176v7,37,35,16,59,-8v35,-35,78,-90,81,-144",w:160},P:{d:"192,-195v0,57,-65,106,-133,97v-13,29,-29,57,-37,89v-4,16,-20,14,-20,1v0,-10,13,-42,39,-96v-11,-6,-7,-19,3,-20v2,0,3,1,6,2v19,-36,31,-60,34,-70v-5,4,-25,18,-25,2v0,-20,41,-23,41,-46v5,-5,16,-2,14,7v35,-15,78,-5,78,34xm178,-196v-2,-32,-52,-19,-70,-9v-5,18,-36,81,-39,88v51,8,100,-35,109,-79",w:158},Q:{d:"130,-239v64,0,54,70,25,120v-20,35,-45,66,-73,93v9,43,28,79,68,53v3,0,5,5,6,7v-2,12,-22,25,-37,23v-34,-5,-39,-22,-54,-68v-24,22,-70,19,-67,-21v6,-79,53,-131,110,-185v-10,-1,-39,26,-44,5v9,-17,41,-27,66,-27xm24,-69v23,-14,49,-4,53,23v33,-33,77,-85,81,-145v1,-19,-17,-34,-39,-28v5,8,1,9,-7,18v-47,50,-77,94,-88,132xm19,-39v-3,30,30,22,41,8v-2,-14,-6,-27,-20,-28v-11,0,-23,6,-21,20",w:160},R:{d:"110,-7v-2,9,-16,14,-20,0v-13,-24,-24,-43,-41,-84v-19,38,-28,61,-39,89v-6,5,-16,1,-16,-6v0,-25,30,-74,46,-103v-8,-12,0,-28,13,-21v10,-15,33,-58,36,-68v-6,2,-17,10,-17,-2v-1,-16,32,-17,32,-34v4,-8,14,-5,18,2v31,-12,74,-3,71,33v-5,57,-64,95,-131,90v10,36,29,63,48,104xm177,-200v-1,-29,-47,-21,-64,-10v-7,16,-33,66,-42,81v51,2,97,-25,106,-71",w:158},S:{d:"42,-6v-55,0,-67,-71,-15,-76v6,0,9,3,9,8v-2,11,-28,13,-24,28v0,15,12,24,28,23v22,0,52,-11,52,-35v0,-35,-39,-52,-39,-89v0,-46,52,-93,103,-93v14,0,28,9,27,23v-3,34,-43,68,-79,75v-12,-2,-13,-14,2,-18v23,-6,57,-32,59,-53v0,-5,-5,-11,-12,-10v-39,5,-82,34,-82,74v0,37,39,57,41,93v2,27,-37,50,-70,50",w:141},T:{d:"246,-234v-5,23,-87,5,-102,17v9,4,5,8,-1,17v-35,51,-81,130,-98,195v-5,17,-19,10,-20,-2v11,-55,73,-158,104,-207v-27,4,-51,11,-75,16v-13,-2,-9,-16,3,-19v42,-12,111,-26,164,-25v14,1,22,-1,25,8",w:162},U:{d:"123,0v-19,-6,-11,-25,-6,-49v8,-32,30,-74,46,-104v-25,19,-87,141,-139,155v-11,0,-21,-13,-20,-27v5,-66,57,-144,100,-192v16,-17,24,-30,33,-13v-36,51,-103,116,-114,199v4,18,14,9,27,-5v29,-30,107,-139,157,-194v6,-5,17,-3,17,5v-36,62,-95,140,-95,210v0,10,0,14,-6,15",w:187},V:{d:"78,-233v4,-6,18,-8,18,2v-23,63,-58,143,-56,219v47,-84,81,-140,134,-208v9,-11,20,-19,24,-7v-41,64,-87,122,-140,220v-6,12,-7,20,-19,20v-12,0,-18,-11,-18,-33v2,-59,31,-166,57,-213",w:149},W:{d:"31,8v-9,9,-25,2,-23,-12v-6,-32,58,-184,75,-230v5,-6,18,-6,18,3v-12,55,-66,159,-71,211v20,-24,55,-90,79,-124v7,-11,18,-19,24,-8v-10,32,-35,83,-26,131v42,-69,68,-150,120,-212v8,-10,13,-15,18,-15v12,4,7,13,-3,26v-47,56,-80,138,-120,214v-13,25,-37,14,-37,-18v0,-17,2,-38,8,-63v-22,27,-39,71,-62,97",w:200},X:{d:"-29,-4v27,-50,75,-93,108,-132v0,-24,-4,-83,-13,-103v0,-9,15,-12,19,-1v7,19,8,56,13,85v37,-36,70,-69,99,-85v10,2,8,16,-1,23v-36,28,-58,47,-97,88v0,67,10,105,20,142v0,11,-17,14,-21,1v-7,-26,-15,-89,-17,-125v-41,42,-72,76,-90,105v-7,11,-17,13,-20,2",w:154},Y:{d:"182,-234v10,-13,19,-17,23,-2v-63,94,-107,146,-142,246v-4,6,-17,5,-16,-4v5,-40,49,-107,64,-134v-19,16,-42,49,-73,54v-10,2,-18,-12,-18,-23v3,-54,60,-123,102,-139v13,5,3,17,-5,21v-33,18,-70,72,-77,111v13,24,51,-26,62,-33v36,-38,55,-64,80,-97",w:148},Z:{d:"74,-240v31,9,75,-7,112,-7v17,0,18,14,6,22v-59,46,-151,135,-192,204v30,-2,79,-27,104,-30v15,5,9,20,-6,20v-30,-1,-105,57,-118,11v0,-7,5,-16,14,-28v68,-85,89,-108,172,-180r-77,9v-17,3,-33,-16,-15,-21",w:138},"[":{d:"213,-248v-5,15,-28,3,-48,8v-64,96,-124,208,-145,317v16,5,41,-10,46,6v-3,14,-64,19,-64,-3v0,-105,96,-242,147,-326v9,-15,60,-18,64,-2",w:152},"\\":{d:"59,-216v-1,-21,-7,-36,7,-40v14,41,17,113,25,151v20,87,29,142,37,165v13,18,-3,48,-13,17v-15,-47,-53,-243,-56,-293",w:120},"]":{d:"-42,77v4,0,9,-1,17,-1v66,-95,123,-209,146,-317v-16,-5,-42,10,-46,-6v4,-14,65,-19,63,3v-11,105,-95,242,-146,326v-19,31,-106,-7,-34,-5",w:152},"^":{d:"47,-136r-21,0r66,-104r24,0r66,104r-20,0r-58,-90",w:180},_:{d:"14,26r180,0r0,17r-180,0r0,-17",w:180},"`":{d:"140,-147v-15,-10,-42,-39,-33,-45v17,-7,31,27,38,38v0,4,-1,7,-5,7",w:180},a:{d:"63,-5v-15,0,-25,-17,-22,-38v-6,14,-19,31,-33,31v-10,0,-19,-10,-18,-22v4,-41,29,-93,70,-93v13,0,21,13,13,25v9,17,-21,43,-18,65v-2,14,30,21,8,32xm7,-41v6,17,16,7,27,-9v10,-17,17,-36,29,-51v-1,-5,-5,-6,-9,-7v-19,-2,-48,49,-47,67",w:93},b:{d:"85,-219v6,-9,15,-4,16,4v-12,33,-53,85,-61,109v17,-16,40,-18,44,6v-4,37,-31,83,-68,89v-14,-1,-18,-12,-23,3v-4,5,-12,-2,-12,-7v19,-59,71,-150,104,-204xm65,-94v-3,-14,-16,-4,-26,4v-13,11,-24,38,-34,55v24,24,56,-31,60,-59",w:100},c:{d:"-15,-35v0,-36,34,-80,68,-88v9,0,14,5,14,15v0,12,-19,49,-28,30v-1,-10,21,-17,11,-27v-21,6,-45,45,-47,68v0,7,5,11,11,11v21,-2,42,-33,56,-44v2,0,5,3,5,5v-3,16,-48,62,-65,55v-15,1,-25,-11,-25,-25",w:98},d:{d:"-15,-38v-1,-34,38,-100,76,-78r53,-98v6,-9,17,-10,19,0v-22,54,-86,122,-74,187v5,1,12,17,-1,18v-14,-4,-18,-17,-19,-35v-12,22,-24,33,-35,33v-10,0,-20,-14,-19,-27xm8,-32v22,-10,34,-47,47,-70v-29,-15,-55,38,-54,61v0,4,3,9,7,9",w:94},e:{d:"66,-109v-6,30,-32,54,-62,62v-1,12,6,15,16,16v17,3,40,-24,59,-40v2,0,6,2,5,5v-8,20,-43,52,-73,52v-15,0,-26,-9,-26,-26v0,-31,41,-80,68,-82v7,0,13,6,13,13xm7,-61v21,-7,35,-19,42,-39v-3,-7,-9,-1,-16,4v-10,8,-19,20,-26,35",w:98},f:{d:"-35,57v0,-31,23,-87,39,-125v-4,0,-7,0,-7,-5v0,-6,7,-14,22,-24v25,-56,49,-95,81,-130v7,-8,16,-12,20,-2v-24,38,-56,71,-77,118v19,-7,33,-11,40,-11v14,-3,26,19,10,22v-17,-9,-39,-6,-61,10v15,7,21,21,21,41v0,46,-24,125,-70,133v-12,2,-19,-13,-18,-27xm-10,64v22,-11,75,-110,35,-138v-11,19,-44,96,-43,126v-1,6,4,11,8,12",w:91},g:{d:"62,-129v18,0,18,19,10,35v10,12,-7,15,-13,33v-6,10,-12,21,-17,32v26,-15,36,-40,53,-56v9,3,3,11,-2,20v-13,23,-34,42,-62,59v-22,45,-40,87,-75,93v-12,2,-19,-9,-19,-21v7,-39,33,-54,81,-79v8,-16,8,-17,12,-26v-12,13,-22,20,-30,20v-8,0,-16,-10,-15,-19v6,-39,38,-91,77,-91xm3,-42v4,12,14,4,23,-6v6,-8,17,-16,13,-25v5,-11,29,-26,17,-38v-22,8,-48,42,-53,69xm-46,62v-1,5,4,7,7,7v17,-1,38,-46,47,-62v-21,11,-48,27,-54,55",w:109},h:{d:"79,-208v6,-12,16,-23,22,-7v-16,36,-57,95,-68,129v15,-12,45,-49,58,-25v-8,22,-33,46,-36,69v0,3,2,4,5,4v6,5,26,-29,40,-40v2,0,4,1,4,4v-6,17,-30,56,-54,58v-23,-5,-11,-33,-2,-51v2,-3,7,-12,16,-27v-24,12,-45,38,-61,78v-4,11,-14,7,-15,-1v24,-70,58,-132,91,-191",w:112},i:{d:"-4,-17v-3,12,-15,11,-16,1v4,-28,29,-76,49,-100v14,-7,16,4,8,14v-21,33,-31,51,-41,85xm48,-159v-2,-11,23,-38,29,-17v1,11,-24,38,-29,17",w:47},j:{d:"-59,88v-15,8,-39,4,-37,-15v3,-41,44,-70,84,-85r43,-89v9,-16,18,-26,26,-12v-7,14,-19,29,-30,53v-7,14,-13,25,-16,33v22,-12,31,-34,50,-49v10,3,3,13,-3,22v-12,17,-31,33,-57,48v-15,32,-32,77,-60,94xm-79,68v1,12,15,7,22,-1v9,-9,21,-29,35,-60v-18,5,-58,41,-57,61xm60,-159v-2,-11,25,-37,29,-16v1,12,-24,39,-29,16",w:79},k:{d:"91,-116v9,1,7,12,-2,14v-9,2,-18,7,-27,13v-8,19,-12,33,-12,43v0,10,5,18,13,18v21,0,38,-34,53,-44v3,0,4,1,4,4v-3,16,-43,66,-62,59v-25,-2,-29,-33,-20,-61v-9,2,-27,44,-45,57v-4,1,-7,-4,-7,-7v32,-75,74,-184,147,-214v21,10,8,30,-5,51v-15,23,-64,71,-95,88v-2,5,-2,5,-13,27v26,-28,36,-38,71,-48xm47,-119v29,-21,65,-52,79,-90v-10,-12,-20,5,-38,26v-14,16,-27,38,-41,64",w:127},l:{d:"117,-236v8,0,12,6,12,13v-3,40,-72,120,-110,151v-5,12,-9,24,-11,34v0,3,1,4,4,4v15,-1,24,-29,38,-39v3,0,5,2,5,5v1,11,-36,59,-51,54v-19,-2,-16,-23,-8,-42v18,-50,53,-114,80,-147v17,-22,30,-33,41,-33xm31,-100v29,-24,69,-71,80,-112v0,-3,-1,-4,-3,-4v-24,13,-60,77,-77,116",w:77},m:{d:"-19,-13v7,-30,31,-90,55,-105v18,7,-20,38,-16,46v14,-15,34,-35,49,-38v20,8,-14,30,-13,38v27,-28,47,-41,57,-41v3,0,8,3,8,7v-16,29,-60,58,-33,87v4,5,-1,13,-7,12v-29,-10,-15,-61,3,-75v-19,14,-39,36,-50,60v-4,8,-13,12,-15,2v1,-12,15,-44,24,-57v-20,15,-37,37,-46,63v-4,11,-15,11,-16,1",w:127},n:{d:"33,-112v17,9,-10,29,-11,38v21,-19,47,-43,54,-40v5,0,7,2,7,7v-19,38,-58,69,-32,107v0,3,-5,7,-8,6v-28,-14,-17,-56,1,-82v-16,10,-30,28,-44,54v-5,11,-17,12,-19,1v3,-11,32,-85,52,-91",w:92},o:{d:"-12,-32v3,-40,31,-95,70,-95v10,0,14,5,14,17v2,27,-40,102,-67,99v-10,-1,-18,-9,-17,-21xm5,-40v3,16,17,8,25,-4v5,-6,12,-17,5,-22v7,-11,33,-35,16,-42v-21,9,-45,41,-46,68",w:83},p:{d:"-49,80v-5,14,-14,15,-16,3v16,-59,74,-165,100,-211v6,-11,16,-17,18,-4v0,8,-11,21,-13,25v14,-11,41,-17,41,8v0,39,-35,80,-71,86v-5,0,-11,-2,-16,-6v-16,32,-32,65,-43,99xm62,-95v-4,-13,-16,-2,-26,6v-10,9,-30,46,-35,55v26,17,56,-32,61,-61",w:94},q:{d:"-2,88v-3,15,-16,15,-18,3v3,-19,36,-99,48,-124v-11,14,-21,21,-29,21v-9,0,-17,-9,-16,-20v5,-41,33,-89,72,-95v12,-2,20,11,16,24v7,3,6,5,2,13v-16,30,-65,135,-75,178xm7,-31v9,-1,31,-22,29,-34v4,-11,29,-32,13,-45v-16,3,-46,46,-49,71v0,4,3,8,7,8",w:91},r:{d:"40,-117v8,0,8,8,3,13v-1,2,-19,24,-21,32v17,-17,38,-38,63,-50v22,12,-34,32,-14,42v5,4,28,-23,36,-10v-1,9,-32,30,-44,28v-12,1,-18,-11,-11,-22v-17,14,-41,43,-54,70v-3,8,-15,12,-17,2v10,-31,30,-95,59,-105",w:110},s:{d:"12,-86v-1,-24,33,-44,58,-44v13,0,23,3,22,15v0,23,-21,35,-43,38v-10,1,-10,-10,-3,-13v7,-1,29,-6,28,-18v0,-5,-1,-7,-8,-7v-15,0,-38,14,-37,30v-2,13,20,36,20,48v0,16,-15,31,-33,30v-34,5,-44,-53,-15,-62v11,5,-5,16,-2,26v-1,19,33,29,33,5v1,-13,-23,-35,-20,-48",w:91},t:{d:"106,-145v-1,7,-3,7,-12,7v-1,-1,-31,8,-40,11v-14,19,-34,65,-35,87v0,5,3,9,8,9v16,-1,28,-35,42,-43v4,-1,5,2,5,5v-1,11,-39,61,-54,56v-29,-9,-18,-46,-6,-73v2,-5,7,-16,16,-34v-12,5,-24,-8,-12,-14v34,4,41,-42,63,-54v12,5,7,13,-3,26v-4,6,-8,10,-10,14v19,-4,33,-11,38,3",w:87},u:{d:"64,-6v-17,-1,-25,-15,-25,-35v-9,12,-20,28,-34,29v-10,0,-16,-10,-16,-21v0,-25,24,-71,48,-79v4,0,5,3,6,6v-9,22,-46,52,-33,75v23,-4,35,-65,57,-77v23,6,-17,43,-13,61v-2,17,14,21,19,33v1,4,-4,9,-9,8",w:93},v:{d:"62,-75v16,6,30,-25,36,-7v-1,15,-26,30,-43,20v-12,21,-33,48,-50,50v-8,1,-15,-10,-14,-20v5,-27,22,-70,40,-85v25,12,-39,68,-19,84v10,-3,35,-27,35,-49v0,-17,8,-35,22,-35v4,0,6,2,6,7v0,8,-5,20,-13,35",w:99},w:{d:"126,-118v5,23,-49,110,-71,106v-22,-4,-12,-32,-4,-51v-19,25,-26,40,-52,49v-39,-18,26,-95,42,-100v3,-1,7,3,7,7v-8,19,-47,45,-38,67v9,8,47,-61,69,-67v3,0,7,3,7,5v-2,16,-41,61,-24,68v21,-10,39,-43,44,-73v2,-14,17,-24,20,-11",w:136},x:{d:"-28,-17v14,-27,53,-36,42,-84v-4,-19,17,-27,17,-11v0,9,-2,17,0,26v5,-3,37,-53,43,-30v-13,25,-51,33,-43,73v1,5,3,7,6,7v16,-4,25,-35,38,-40v9,15,-26,60,-46,63v-13,-1,-15,-16,-15,-33v-4,4,-32,41,-37,38v-4,0,-5,-3,-5,-9",w:90},y:{d:"-33,94v-13,1,-22,-11,-22,-24v-1,-35,52,-68,86,-85v4,-14,16,-35,22,-48v-17,19,-35,42,-56,45v-8,0,-12,-5,-12,-13v-4,-18,42,-84,56,-83v3,0,6,3,6,7v-6,21,-39,40,-41,63v0,2,1,3,3,3v29,-8,55,-61,80,-78v19,12,-12,39,-15,52v-7,13,-13,26,-17,36v19,-10,36,-36,46,-47v13,7,0,19,-11,33v-12,15,-27,27,-46,37v-17,41,-42,99,-79,102xm-37,67v0,5,4,9,9,9v22,-3,35,-42,49,-70v-19,9,-58,36,-58,61",w:121},z:{d:"12,-119v25,9,58,-15,67,6v-25,30,-61,49,-76,79v20,-14,68,-1,40,13v-25,-12,-54,21,-66,1v10,-27,50,-67,72,-84v-21,2,-39,6,-43,-8v0,-4,2,-7,6,-7",w:78},"{":{d:"197,-258v21,0,20,19,5,19v-37,0,-50,18,-66,43v-14,22,-30,55,-52,98v-5,10,-13,18,-25,23v16,39,-34,83,-34,135v0,16,19,18,33,15v6,0,9,2,9,7v0,8,-9,11,-27,11v-22,0,-33,-13,-33,-33v0,-40,28,-83,38,-121v0,-11,-17,-10,-18,-21v-1,-11,21,-8,28,-11v5,-2,11,-8,17,-19v45,-81,48,-107,95,-140v8,-3,19,-6,30,-6",w:152},"|":{d:"95,-240r18,0r0,300r-18,0r0,-300",w:180},"}":{d:"-73,85v5,-19,38,-1,49,-18v37,-35,47,-72,81,-133v5,-10,13,-18,25,-23v-16,-39,34,-84,34,-135v-1,-16,-18,-19,-34,-15v-6,0,-8,-2,-8,-7v0,-8,9,-12,27,-12v22,1,33,14,33,34v0,41,-30,82,-38,121v-2,12,16,9,17,20v1,11,-18,10,-27,11v-5,2,-11,9,-17,20v-45,80,-49,107,-96,140v-10,4,-44,11,-46,-3",w:152},"~":{d:"173,-232v20,-1,27,-12,36,-27r12,7v-21,49,-61,40,-99,19v-31,-17,-43,-10,-62,20r-12,-7v11,-20,24,-36,48,-38v18,-1,56,28,77,26",w:239},"":{w:90}}}),Cufon.registerFont({w:242,face:{"font-family":"Left Hand","font-weight":400,"font-style":"italic","font-stretch":"normal","units-per-em":"360","panose-1":"3 1 1 1 1 1 1 1 1 1",ascent:"288",descent:"-72","x-height":"4","cap-height":"4",bbox:"-60 -309.02 482 117.263","underline-thickness":"17.5781","underline-position":"-26.3672",slope:"-11.25","unicode-range":"U+0020-U+007E"},glyphs:{" ":{w:121},"!":{d:"131,-123v-12,24,10,56,-18,55v-28,-1,-11,-35,-8,-55v7,-48,15,-89,12,-131v20,-9,36,-9,38,12v2,12,-19,94,-24,119xm81,-42v23,-8,57,-9,45,26v5,17,-25,16,-31,17v-22,1,-4,-32,-14,-43",w:138},'"':{d:"165,-216v-43,10,-13,-73,-33,-86v58,-13,27,47,33,86xm104,-216v-43,10,-14,-71,-33,-86v59,-14,25,50,33,86",w:146},"#":{d:"243,-116v-3,32,-26,39,-64,38v-8,30,-16,53,-7,77v-16,12,-33,13,-32,-15v0,-14,6,-34,16,-62r-50,0v-12,23,-22,43,-18,65v-26,7,-34,-6,-21,-33v7,-15,10,-22,15,-32v-21,0,-37,3,-52,12v4,-34,24,-35,62,-34r28,-58v-26,0,-49,2,-62,10v5,-33,31,-32,72,-31v14,-39,26,-56,19,-86v13,-4,28,-3,28,15v0,12,-11,44,-23,71r44,0v16,-32,21,-71,68,-63v-11,9,-25,30,-42,63v16,0,30,-3,43,-8v-4,26,-22,28,-53,29r-26,58v24,1,42,-4,55,-16xm116,-100r48,0r25,-58r-45,0"},$:{d:"121,0v-50,3,-104,-42,-53,-76v7,32,26,51,58,55r19,-97v-42,-27,-79,-71,-33,-113v14,-13,34,-22,59,-27v1,-11,2,-25,0,-37v24,-7,27,16,19,37v47,0,57,17,38,45v-8,-16,-22,-24,-41,-27r-19,95v25,18,59,44,55,64v0,41,-28,68,-84,80v-3,22,-5,30,-3,48v-30,-3,-19,-20,-15,-47xm169,-241v-25,5,-45,21,-46,48v0,11,10,24,29,38xm143,-21v56,-13,68,-55,17,-86"},"%":{d:"110,-146v28,0,43,-35,38,-68v-31,-13,-34,-24,-11,-45v26,44,114,27,146,-3v12,-12,17,-11,28,1v-37,27,-168,184,-206,240v-15,22,-23,41,-25,56v-13,-6,-20,-14,-20,-25v2,-38,176,-221,190,-236v-26,12,-45,19,-76,15v2,44,-28,81,-68,82v-28,1,-51,-19,-51,-47v0,-28,35,-86,58,-54v-34,7,-50,84,-3,84xm226,0v-48,0,-63,-67,-31,-96v12,-12,28,-19,48,-22v5,-6,9,-9,15,-9v19,-1,37,33,37,54v0,39,-32,73,-69,73xm232,-18v38,0,52,-63,21,-85v-28,-6,-50,25,-50,51v0,23,10,34,29,34",w:299},"&":{d:"333,-145v-7,28,-25,36,-59,32v-19,59,-33,97,-12,142v-12,12,-38,21,-37,-7v0,-14,3,-36,9,-67v-32,35,-70,52,-112,52v-50,0,-88,-26,-89,-72v0,-43,28,-74,84,-92v-65,-39,-6,-110,60,-110v33,0,74,19,44,45v-17,-42,-100,-33,-100,15v0,14,8,27,24,39v18,-3,32,-5,48,0v-9,27,-31,34,-58,23v-34,11,-66,39,-66,78v0,33,30,51,66,51v40,0,108,-44,107,-79v3,-18,-26,-18,-28,-33v0,-5,2,-13,7,-22v24,11,78,14,112,5",w:310},"'":{d:"104,-209v-40,18,-19,-77,-41,-86v21,-13,62,-12,45,23v-1,21,-13,45,-4,63",w:93},"(":{d:"78,-76v0,-98,84,-206,173,-232v6,0,10,5,14,13v-78,27,-152,121,-153,221v0,55,34,104,85,106v-60,62,-119,-37,-119,-108",w:233},")":{d:"204,-179v0,97,-85,205,-173,231v-6,0,-10,-5,-14,-13v78,-26,152,-121,152,-221v0,-56,-33,-104,-84,-106v61,-62,119,38,119,109",w:192},"*":{d:"140,-222v19,11,45,29,49,48v0,6,-5,9,-17,11v-6,-15,-19,-32,-38,-50v-2,22,-1,48,4,66v-40,-4,-25,-25,-19,-64v-19,14,-30,26,-34,36v-31,-23,-8,-25,32,-51v-35,-20,-55,-29,-30,-52v7,13,19,26,37,40v3,-34,-3,-68,37,-66v-9,20,-16,42,-22,66v24,-15,40,-22,48,-22v7,0,11,7,12,22v-19,-9,-33,4,-59,16",w:174},"+":{d:"243,-130v-4,47,-35,35,-91,38v-5,29,-13,58,-1,80v-16,3,-39,5,-37,-14v1,-17,10,-49,12,-66v-33,-1,-67,2,-84,12v3,-49,36,-35,90,-38v3,-27,16,-63,-3,-81v54,-9,38,39,29,81v34,1,75,-2,85,-12"},",":{d:"110,-20v1,32,-31,76,-61,75v-8,0,-13,-6,-15,-18v42,9,55,-54,18,-72v22,-17,57,-22,58,15",w:125},"-":{d:"88,-91v7,-51,61,-16,91,-36v-3,60,-55,18,-91,36",w:173},".":{d:"56,-42v22,-8,55,-10,45,26v1,19,-44,27,-44,4v0,-10,5,-23,-1,-30",w:118},"/":{d:"55,52v-19,-6,-28,-15,-28,-25v-2,-33,125,-277,150,-309v16,-20,34,-30,60,-24v-48,31,-180,265,-182,358",w:164},0:{d:"253,-170v0,86,-59,177,-139,177v-49,-1,-75,-43,-75,-96v0,-86,58,-178,137,-178v51,0,77,41,77,97xm162,-247v-52,0,-85,86,-85,148v0,57,18,86,52,86v53,0,86,-85,86,-148v0,-57,-18,-86,-53,-86"},1:{d:"195,-267r-47,240v38,-3,72,-9,68,33v-38,-16,-92,4,-138,6v-13,0,-20,-11,-22,-33v17,8,37,3,56,0r39,-196v-35,17,-72,27,-71,-23v34,26,66,-8,115,-27"},2:{d:"73,-208v3,-60,154,-90,154,-9v0,43,-49,105,-144,184v55,-5,103,-16,138,0v6,6,9,18,11,38v-44,-21,-125,-10,-178,-3v-13,2,-15,-15,-11,-29v58,-37,145,-110,145,-180v0,-23,-13,-34,-38,-34v-28,0,-53,17,-75,49v-1,-7,-2,-12,-2,-16"},3:{d:"54,-42v36,44,135,33,134,-32v-1,-32,-20,-38,-51,-47v-18,5,-34,4,-47,-5v10,-23,26,-31,51,-23v36,-11,54,-32,54,-60v-1,-46,-70,-48,-91,-13v-3,-35,26,-45,61,-45v36,0,65,18,65,52v0,30,-20,53,-60,72v36,10,53,32,53,64v1,51,-49,87,-103,86v-51,-1,-72,-12,-66,-49"},4:{d:"187,-95v-5,30,-20,70,-7,95v-18,9,-45,13,-40,-14r14,-81v-24,1,-76,13,-100,13v-18,0,-13,-13,-11,-30v36,-49,61,-101,75,-156v15,-3,31,-9,35,2v-10,39,-60,116,-87,154v34,-6,65,-11,94,-13v5,-37,20,-72,17,-110v32,-12,37,6,30,42r-14,68v43,-2,61,0,61,45v-14,-8,-37,-13,-67,-15"},5:{d:"192,-86v0,-51,-53,-68,-106,-56r26,-123v41,9,94,5,128,-6v-7,44,-62,43,-110,37r-17,61v63,-15,113,25,113,83v0,54,-48,99,-103,97v-49,-2,-68,-12,-65,-49v42,49,134,27,134,-44"},6:{d:"182,-267v30,0,61,10,51,41v-36,-27,-82,-21,-109,15v-16,22,-27,49,-32,83v33,-60,138,-40,138,35v0,51,-45,100,-96,100v-50,0,-82,-44,-82,-97v0,-90,50,-176,130,-177xm138,-11v57,3,89,-127,15,-127v-29,0,-51,15,-66,45v-2,48,15,80,51,82"},7:{d:"217,-227v-53,-9,-157,31,-133,-42v39,16,109,6,168,9r-7,33v-61,57,-137,141,-125,244v-23,4,-46,-3,-44,-22v14,-90,84,-178,141,-222"},8:{d:"163,-267v38,0,73,19,73,54v0,31,-19,55,-58,71v27,20,51,48,51,72v0,47,-45,77,-96,77v-46,0,-85,-23,-86,-65v0,-32,24,-61,72,-87v-64,-42,-31,-122,44,-122xm158,-249v-21,0,-40,16,-39,37v-3,17,25,43,44,59v25,-13,38,-31,38,-55v0,-24,-18,-41,-43,-41xm141,-11v29,0,51,-24,53,-51v2,-20,-32,-51,-61,-71v-34,20,-51,44,-51,72v0,27,30,50,59,50"},9:{d:"112,7v-30,0,-60,-11,-50,-42v35,28,81,23,109,-14v16,-22,27,-50,32,-84v-33,60,-139,40,-139,-34v0,-52,46,-100,97,-100v50,0,82,43,82,96v0,91,-50,177,-131,178xm157,-249v-57,-4,-90,126,-15,126v29,0,51,-15,66,-45v2,-48,-16,-79,-51,-81"},":":{d:"56,-42v22,-8,55,-10,45,26v1,19,-44,27,-44,4v0,-10,5,-23,-1,-30xm88,-203v23,-8,55,-10,45,26v1,17,-44,27,-44,4v0,-10,5,-23,-1,-30",w:118},";":{d:"110,-20v1,32,-31,76,-61,75v-8,0,-13,-6,-15,-18v42,9,55,-54,18,-72v22,-17,57,-22,58,15xm82,-203v23,-9,56,-9,44,26v5,16,-26,15,-31,17v-22,1,-4,-30,-13,-43",w:125},"<":{d:"95,-102v43,15,74,29,92,41v23,17,34,30,24,56v-23,-33,-103,-67,-158,-90v-4,-3,-8,-9,-12,-17v71,-17,168,-58,215,-96v-1,24,-10,41,-25,50v-31,18,-76,37,-136,56"},"=":{d:"241,-159v0,68,-144,20,-184,49v2,-51,53,-36,102,-37v40,0,67,-4,82,-12xm236,-97v0,74,-142,12,-201,49v10,-40,13,-36,66,-38v42,-1,116,4,135,-11"},">":{d:"85,-205v31,37,108,77,165,94v-48,43,-168,65,-212,107v2,-22,12,-39,27,-49v15,-10,58,-27,129,-52v-41,-25,-120,-32,-109,-100"},"?":{d:"92,-213v4,-54,141,-85,139,-4v10,50,-115,88,-88,148v-12,8,-39,4,-36,-14v-5,-38,88,-87,88,-126v0,-22,-12,-33,-36,-33v-24,0,-45,14,-63,43v-2,-4,-4,-9,-4,-14xm101,-42v23,-9,56,-9,44,26v5,17,-25,16,-31,17v-22,1,-5,-31,-13,-43",w:199},"@":{d:"66,-95v0,106,126,142,197,70v-2,46,-47,54,-92,55v-76,2,-131,-47,-131,-121v0,-95,92,-184,188,-184v65,0,120,48,120,112v0,50,-34,97,-81,97v-29,0,-39,-29,-34,-65v-32,50,-61,76,-87,76v-22,0,-32,-15,-32,-44v0,-71,65,-135,133,-93v5,-8,20,-8,34,-8v-15,22,-23,50,-23,83v0,18,6,27,19,27v30,1,53,-40,53,-73v0,-54,-47,-94,-102,-94v-85,0,-162,77,-162,162xm239,-169v-44,-46,-101,6,-97,60v3,45,27,29,51,1v16,-18,31,-37,46,-61",w:335},A:{d:"233,-268v-11,86,-5,208,40,258v-11,11,-20,17,-28,17v-19,0,-33,-32,-43,-96v-34,4,-70,3,-107,3v-15,33,-35,59,-20,83v-7,2,-44,22,-45,-2v-1,-16,18,-55,36,-84v-22,-1,-41,2,-53,9v6,-27,33,-33,66,-29r5,-7v19,-28,74,-107,113,-141v6,-4,18,-8,36,-11xm108,-107v28,1,71,2,91,-2v-5,-41,-8,-75,-8,-102r0,-13v-21,24,-71,89,-83,117",w:274},B:{d:"136,-126v5,-28,17,-32,49,-31v25,-18,37,-36,37,-54v0,-21,-16,-32,-48,-32v-52,0,-99,25,-140,75v-24,-66,88,-99,152,-99v37,0,73,14,73,46v0,25,-17,48,-53,70v34,9,66,28,66,64v0,63,-85,105,-158,102v-50,-3,-52,-18,-43,-64r28,-146v0,-4,-2,-8,-5,-11v15,-6,27,-9,33,-9v18,7,10,15,5,44r-27,141v0,15,14,22,42,22v56,0,111,-57,71,-102v-11,-13,-45,-21,-71,-14v-3,0,-6,-1,-11,-2",w:271},C:{d:"81,-101v0,47,26,81,71,81v37,0,70,-17,101,-52v21,46,-72,80,-116,79v-59,0,-97,-38,-97,-98v0,-91,72,-176,160,-176v42,0,87,28,48,60v-14,-28,-35,-42,-61,-42v-61,-1,-106,81,-106,148",w:254},D:{d:"174,-244v-65,0,-112,35,-140,78v-22,-69,85,-101,153,-101v78,-1,139,35,139,107v0,103,-110,176,-221,176v-49,0,-42,-27,-33,-75r26,-136v0,-4,-2,-8,-5,-11v16,-6,27,-9,33,-9v18,7,10,15,5,44r-26,142v1,17,13,18,34,18v80,2,151,-58,150,-135v0,-61,-50,-99,-115,-98",w:311},E:{d:"215,-162v-14,41,-48,30,-102,32v-3,43,-46,108,31,108v30,0,56,-5,79,-16v-6,45,-63,42,-107,45v-93,7,-41,-85,-42,-137v-12,0,-24,3,-35,8v12,-22,12,-31,42,-30r17,-87v-26,-1,-44,6,-65,21v18,-46,23,-42,97,-42v46,0,102,2,133,-10v-21,31,-20,30,-71,31r-57,0r-18,87v35,1,76,0,98,-10",w:223},F:{d:"226,-141v-10,38,-53,28,-101,30r-28,144v0,3,1,6,3,10v-12,6,-23,9,-33,9v-16,0,-8,-11,-5,-29r26,-134v-14,0,-24,3,-37,8v12,-21,12,-30,41,-29r21,-105v-28,0,-48,5,-64,20v15,-47,23,-43,97,-43v46,0,100,1,133,-9v-15,43,-74,30,-129,32r-21,105v35,0,75,1,97,-9",w:220},G:{d:"77,-106v0,70,73,109,119,61v16,-15,25,-38,30,-65v-36,0,-65,5,-87,15v6,-55,82,-27,131,-48v-13,47,-35,150,-53,176v-5,8,-22,11,-47,13v13,-17,27,-44,41,-82v-59,69,-171,31,-171,-60v0,-89,96,-171,187,-171v62,0,55,26,27,53v-8,-19,-26,-29,-51,-29v-67,-1,-126,68,-126,137",w:258},H:{d:"30,-111v10,-30,24,-37,65,-36r18,-92v-34,8,-59,3,-62,-34v26,19,61,9,104,5r-24,121r93,0v16,-65,24,-107,53,-137v6,-6,26,-6,42,-8v-28,32,-47,81,-59,145v13,1,21,-4,37,-13v-4,26,-16,36,-42,34v-7,36,-13,113,26,109v9,0,19,-4,29,-11v-2,23,-17,35,-46,35v-52,0,-57,-79,-44,-133r-93,0r-25,134v0,2,1,5,2,9v-15,6,-35,16,-42,2r28,-145v-23,-1,-39,4,-60,15",w:311},I:{d:"162,-242r-43,219v43,-4,67,-16,70,27v-46,-17,-111,21,-152,0v-4,-5,-6,-14,-7,-26v17,9,28,8,51,4r43,-218v-30,5,-58,8,-57,-26v31,15,89,-10,126,-10v16,0,26,11,28,32v-17,-8,-38,-5,-59,-2",w:196},J:{d:"-18,6v-4,51,74,57,94,20v31,-57,44,-183,63,-262v-37,7,-50,11,-57,-23v38,17,109,-29,149,-3v5,5,9,15,11,29v-19,-12,-38,-13,-65,-8v-29,124,-32,304,-162,315v-41,3,-84,-45,-33,-68",w:194},K:{d:"294,-23v3,24,-33,45,-54,46v-30,0,-74,-50,-130,-150r-22,114v0,3,1,7,3,11v-15,6,-37,17,-42,1r46,-236v-35,6,-57,2,-62,-35v27,19,60,9,105,5r-26,128v67,-46,107,-88,119,-129v17,9,25,17,25,27v-12,26,-81,80,-112,101v21,40,42,74,63,99v36,43,48,50,87,18",w:265},L:{d:"234,-38v-8,44,-69,45,-121,45v-57,0,-60,-26,-50,-79r37,-194v0,-4,-1,-9,-4,-12v16,-6,26,-8,32,-8v19,7,10,14,5,43r-37,200v0,15,17,22,49,22v29,0,58,-5,89,-17",w:220},M:{d:"182,-56v-41,-9,-60,-64,-74,-115r-23,116v-4,27,-9,43,7,56v-21,7,-45,13,-48,-9v7,-64,35,-144,49,-206v-6,-23,-20,-64,-31,-68v20,-11,36,-18,47,5v12,24,51,189,81,183v30,1,106,-130,102,-166v23,-7,49,-15,46,12r-23,216v0,23,5,37,14,43v-29,21,-52,20,-51,-31v1,-63,12,-126,17,-187v-19,61,-60,140,-113,151",w:337},N:{d:"233,-38v28,-23,57,-181,15,-216v23,-18,53,-22,52,21v-1,42,-19,140,-30,177v-20,72,-45,83,-81,29v-18,-25,-58,-114,-79,-168v-9,50,-29,109,-29,161v0,16,5,27,14,34v-19,9,-49,13,-49,-12v0,-31,36,-168,47,-219v-6,-19,-18,-44,-31,-47v29,-12,37,-22,52,-2v5,6,20,48,51,120v34,81,57,122,68,122",w:293},O:{d:"150,7v-101,0,-140,-131,-73,-198v24,-24,52,-37,85,-39v47,-72,159,-30,159,61v0,85,-89,176,-171,176xm169,-129v-44,-2,-34,-50,-21,-82v-41,9,-67,47,-67,97v0,54,35,98,87,98v63,0,116,-75,116,-143v0,-39,-24,-78,-60,-78v-48,-1,-82,62,-55,108",w:311},P:{d:"274,-205v-2,67,-79,118,-156,113r-19,99v0,3,1,6,3,10v-12,6,-23,9,-33,9v-16,0,-10,-11,-6,-29r19,-92v-34,-10,-51,-16,-43,-40v13,10,28,17,46,22v2,-31,20,-65,11,-93v16,-6,27,-9,33,-9v18,7,11,15,5,44r-13,61v62,2,114,-32,115,-88v1,-31,-28,-48,-61,-48v-55,0,-99,23,-132,69v-23,-62,87,-90,146,-90v56,0,85,21,85,62",w:247},Q:{d:"182,2v-114,37,-184,-114,-104,-193v24,-23,50,-37,84,-39v20,-24,44,-37,73,-37v52,0,89,46,87,101v-1,77,-56,133,-117,160v35,30,74,51,118,61v-52,51,-102,-21,-141,-53xm284,-159v0,-58,-58,-99,-100,-59v-12,13,-19,27,-16,46v-22,-2,-25,-21,-16,-39v-68,5,-93,115,-48,166v15,17,37,27,63,29v-27,-29,-38,-40,-13,-66v6,22,18,43,37,63v50,-13,93,-77,93,-140",w:310},R:{d:"179,-244v-60,0,-120,36,-142,77v-33,-62,87,-101,148,-100v58,0,87,19,87,56v0,52,-36,62,-84,85v28,64,53,96,73,96v11,0,22,-8,34,-23v8,25,-30,53,-50,53v-27,0,-57,-37,-88,-112v-9,2,-16,3,-24,1v5,-27,21,-38,46,-31v38,-13,58,-34,58,-64v0,-25,-30,-38,-58,-38xm100,17v-15,6,-35,16,-42,2r41,-214v0,-4,-1,-8,-4,-11v16,-6,26,-9,32,-9v19,7,11,14,6,44r-35,179v0,2,1,5,2,9",w:288},S:{d:"93,21v-53,0,-100,-51,-46,-82v1,37,21,61,59,61v29,0,61,-22,61,-49v0,-37,-96,-94,-96,-140v0,-46,44,-78,93,-78v35,0,65,19,39,48v-23,-56,-124,-23,-96,37v19,22,97,81,90,116v0,52,-49,87,-104,87",w:201},T:{d:"287,-295v23,53,-40,67,-108,62r-43,220v0,3,1,7,3,11v-23,11,-47,19,-39,-21r42,-210v-35,-1,-71,1,-96,8v10,-34,16,-33,59,-35v68,-4,162,19,182,-35",w:238},U:{d:"311,-32v7,23,-25,38,-45,39v-40,2,-52,-39,-45,-85v-35,51,-70,76,-104,76v-37,0,-63,-32,-63,-71v0,-41,16,-97,48,-165v-35,8,-60,1,-62,-34v36,21,43,8,114,4v-41,81,-62,143,-62,186v0,56,57,66,90,27v15,-17,36,-39,46,-71v27,-86,3,-117,76,-125v-23,25,-47,146,-47,197v0,45,28,44,54,22",w:306},V:{d:"90,7v12,-75,-11,-182,-35,-249v-4,-11,-13,-18,-23,-24v40,-40,52,-15,72,52v19,62,26,120,26,174v74,-98,111,-166,111,-202v0,-5,-1,-10,-4,-15v14,-10,42,-18,44,4v-16,81,-99,184,-154,246v-8,6,-20,11,-37,14",w:241},W:{d:"231,0v-52,-11,-33,-95,-34,-167v-28,49,-49,89,-65,121v-16,32,-15,52,-60,53v14,-91,-7,-223,-35,-284v49,-13,45,10,56,59v9,41,15,98,19,170v39,-81,71,-144,96,-190v12,-3,29,-3,28,12r-9,127v0,44,7,65,20,65v56,-15,97,-159,58,-229v31,-10,53,-2,53,37v0,70,-41,163,-85,204v-16,15,-30,22,-42,22",w:341},X:{d:"125,-106v-2,-6,-4,-9,-9,-3v-39,44,-60,82,-62,116v-33,-20,-36,-31,-5,-70v19,-24,41,-46,63,-67v-13,-23,-40,-83,-43,-111v-2,-14,16,-22,31,-27v4,31,27,91,42,116v30,-20,64,-59,60,-106v10,-7,37,-18,37,2v0,48,-52,92,-88,120v15,35,48,80,77,101v11,8,26,9,42,4v-53,91,-117,-31,-145,-75",w:246},Y:{d:"135,-139v31,-27,76,-73,86,-108v0,-5,-1,-9,-5,-13v17,-8,37,-13,38,9v-10,40,-75,102,-113,129v-5,40,-20,80,-18,120v-15,6,-37,17,-42,1r23,-121v-11,-53,-41,-119,-76,-142v12,-9,22,-13,28,-13v22,0,49,46,79,138",w:210},Z:{d:"213,-243r-112,7v-33,0,-42,-14,-39,-44v20,28,140,21,185,14v-6,28,-5,29,-22,46v-25,24,-145,159,-164,186v79,3,175,-23,164,54v-41,-27,-122,-28,-189,-20v-19,-2,-16,-11,-12,-31v37,-53,117,-135,189,-212",w:230},"[":{d:"170,35v-6,20,-12,23,-37,23v-55,0,-59,-32,-49,-84r56,-278v29,0,77,1,94,-5v-5,31,-32,25,-67,26r-52,262v-8,39,-14,59,30,61v9,0,17,-2,25,-5",w:195},"\\":{d:"140,55v14,-88,-60,-312,-93,-360v32,-10,42,6,54,43v22,67,68,189,68,279v0,15,-10,28,-29,38",w:177},"]":{d:"101,-285v6,-20,12,-24,37,-24v55,-1,59,35,49,85r-55,277v-29,0,-77,-1,-94,5v6,-32,32,-25,67,-25r52,-262v7,-39,14,-60,-30,-61v-8,0,-17,2,-26,5",w:195},"^":{d:"32,-68v43,-38,114,-136,133,-192v24,6,20,27,28,56v15,53,29,99,51,136v-19,0,-32,-8,-42,-25v-10,-17,-22,-54,-36,-111v-22,42,-59,102,-97,129v-8,6,-21,7,-37,7"},_:{d:"15,-3v42,11,159,-14,153,38v-33,-24,-143,17,-153,-38",w:180},"`":{d:"219,-226v-25,10,-60,-32,-65,-46v0,-6,9,-12,29,-17v7,25,19,46,36,63"},a:{d:"380,-144v-31,56,-84,127,-146,135v-35,4,-42,-51,-37,-98v-21,45,-64,111,-113,111v-28,0,-41,-29,-41,-60v-1,-87,81,-177,168,-123v2,-12,21,-17,44,-16v-16,27,-22,70,-23,115v0,26,6,39,18,39v45,-11,88,-68,117,-113xm144,-173v-41,1,-67,60,-65,108v0,24,8,36,23,36v15,6,60,-57,103,-120v-25,-16,-45,-24,-61,-24",w:284},b:{d:"135,-14v50,0,79,-66,61,-120v-27,-9,-63,-26,-46,-58v32,2,55,16,72,41v34,16,69,15,101,-5r9,15v-28,21,-65,29,-102,18v17,65,-41,128,-101,127v-65,-1,-75,-55,-61,-125r29,-149v-31,7,-53,-6,-52,-38v24,18,58,12,95,0r-42,208v-11,41,-1,86,37,86",w:236},c:{d:"152,-176v-67,0,-108,158,-17,158v43,0,93,-45,151,-134r15,8v-42,72,-97,147,-179,154v-46,4,-76,-36,-76,-84v0,-63,58,-121,122,-121v46,0,65,46,13,56v4,-22,-6,-37,-29,-37",w:205},d:{d:"379,-143v-28,54,-95,139,-153,147v-39,6,-39,-66,-31,-107v-27,48,-60,107,-111,107v-29,0,-41,-29,-41,-60v-2,-88,81,-178,167,-122r19,-95v-34,8,-56,1,-60,-32v25,15,73,9,102,-3r-38,193v-6,32,-17,79,10,85v36,-10,101,-85,122,-122xm144,-173v-41,0,-65,61,-65,108v0,24,8,36,23,36v15,7,62,-58,103,-120v-24,-16,-45,-24,-61,-24",w:283},e:{d:"207,-153v-1,47,-70,82,-125,80v0,34,15,51,44,51v71,0,129,-73,165,-131r15,9v-35,68,-110,144,-194,148v-44,2,-68,-31,-68,-76v0,-64,51,-123,113,-123v29,0,50,16,50,42xm83,-90v41,0,92,-27,90,-65v-2,-40,-48,-21,-64,3v-12,18,-23,38,-26,62",w:210},f:{d:"235,-166v-17,30,-21,24,-75,26r-53,0v-11,62,-29,122,-34,189v0,7,2,13,5,19v-21,6,-42,13,-42,-11v0,-64,26,-135,37,-197v-20,0,-36,3,-50,13v7,-33,16,-34,54,-35v11,-76,41,-145,114,-146v17,-1,36,9,37,24v0,7,-8,14,-23,23v-4,-18,-14,-26,-29,-26v-36,-8,-57,72,-64,125v38,0,97,2,123,-4",w:130},g:{d:"103,117v-48,4,-79,-45,-45,-78v29,-28,77,-46,126,-76r6,-69v-15,36,-65,87,-107,89v-26,1,-43,-21,-43,-47v-1,-76,84,-166,165,-118v7,-27,11,-24,45,-29v-10,15,-23,86,-29,150v50,-30,90,-61,117,-93r14,9v-26,34,-70,70,-132,110v1,93,-39,146,-117,152xm199,-151v-52,-65,-127,12,-122,77v4,47,40,23,69,-5v21,-21,38,-44,53,-72xm80,71v0,17,18,27,35,27v45,0,67,-37,67,-111v-33,17,-108,59,-102,84",w:256},h:{d:"183,-165v-26,-15,-109,144,-106,156v0,3,1,6,3,9v-10,6,-39,7,-36,-9r52,-263v-30,10,-60,2,-58,-36v26,21,68,13,99,0r-28,145r-21,86v35,-79,71,-118,107,-118v44,0,40,49,41,98v0,37,6,55,17,56v36,-13,73,-70,98,-111r14,8v-26,53,-73,122,-123,134v-42,-3,-40,-50,-41,-102v0,-35,-6,-53,-18,-53",w:269},i:{d:"111,-22v52,-12,97,-79,129,-130r15,8v-40,67,-81,148,-153,148v-83,0,-12,-122,-34,-166v27,-6,42,-13,42,13v0,27,-15,80,-17,106v0,15,6,21,18,21xm169,-267v-4,27,-52,65,-67,65v-12,0,-8,-26,-1,-30v19,-1,58,-24,68,-35",w:159},j:{d:"-20,117v-17,1,-40,-10,-40,-24v0,-8,9,-17,24,-28v0,48,50,43,65,1v13,-37,37,-159,43,-211v0,-7,-2,-13,-6,-17v27,-6,39,-13,42,13v-20,103,-22,259,-128,266xm170,-267v-4,26,-52,65,-68,65v-12,0,-8,-26,-1,-30v19,-1,58,-24,69,-35",w:102},k:{d:"200,-13v-38,-4,-86,-54,-102,-87v-5,29,-21,70,-8,98v-21,6,-40,13,-42,-10v11,-86,34,-175,49,-259v-30,14,-59,2,-45,-35v25,23,53,12,87,-2r-39,198v24,-30,72,-77,106,-85v6,0,12,7,19,23v-27,5,-78,36,-96,56v30,47,55,70,77,70v51,0,82,-71,108,-107r15,9v-31,56,-73,119,-129,131",w:233},l:{d:"168,-35v-42,52,-111,53,-111,-18v0,-72,29,-147,41,-217v-32,5,-56,-7,-53,-37v27,16,69,17,94,-1r-46,251v1,45,44,31,64,6v13,-16,38,-50,70,-102r15,10v-24,46,-52,80,-74,108",w:146},m:{d:"209,-2v-3,11,-35,10,-32,-9v4,-29,24,-106,25,-133v0,-8,-3,-12,-9,-12v-13,0,-33,22,-56,68v-26,51,-43,69,-34,88v-42,9,-37,-8,-31,-66v4,-34,16,-81,-2,-105v46,-19,50,1,40,59r-5,50v42,-89,80,-133,112,-133v14,0,21,9,21,30v0,19,-14,85,-20,113v21,-43,43,-78,65,-104v22,-26,41,-39,57,-39v58,0,6,99,9,147v0,14,5,21,15,21v22,0,56,-42,103,-126r15,9v-51,99,-95,148,-133,148v-63,0,-24,-105,-20,-153v0,-5,-2,-7,-7,-7v-13,0,-35,25,-68,75v-30,46,-45,72,-45,79",w:386},n:{d:"70,-171v13,-4,43,-19,43,12v0,27,-5,68,-8,96v42,-88,79,-132,112,-132v32,0,39,47,39,98v0,36,-3,59,18,66v10,0,21,-8,34,-24v13,-16,34,-48,63,-97r15,8v-26,49,-50,85,-70,109v-20,24,-38,35,-54,35v-45,0,-39,-54,-41,-112v-2,-28,1,-46,-17,-52v-19,-6,-90,107,-104,156v0,3,0,5,2,8v-42,11,-30,-12,-30,-66v0,-35,15,-79,-2,-105",w:290},o:{d:"41,-77v0,-56,50,-111,109,-99v-7,-11,-7,-21,1,-30v29,2,53,17,72,44v34,22,69,28,105,6r9,15v-33,22,-61,25,-102,11v8,69,-51,134,-115,134v-47,0,-79,-34,-79,-81xm127,-15v51,-1,86,-73,68,-129v-14,-3,-23,-16,-42,-16v-41,0,-76,46,-76,88v0,31,19,58,50,57",w:241},p:{d:"238,-121v0,77,-82,149,-158,110v-5,38,-26,85,-12,122v-21,6,-41,14,-42,-10v14,-100,39,-203,57,-301v-34,9,-56,1,-60,-31v26,15,73,9,102,-3r-14,68v45,-53,127,-28,127,45xm204,-107v0,-62,-60,-79,-98,-32r-20,101v45,53,118,-4,118,-69",w:220},q:{d:"43,-57v-1,-86,80,-176,167,-122v2,-12,22,-17,45,-16v-33,83,-61,188,-61,287v0,7,2,13,5,19v-20,6,-41,14,-41,-10v0,-68,26,-139,37,-204v-40,72,-77,107,-111,107v-29,0,-41,-28,-41,-61xm144,-173v-41,0,-65,61,-65,108v0,24,8,36,23,36v15,6,60,-57,103,-120v-24,-16,-45,-24,-61,-24",w:228},r:{d:"199,-157v-43,0,-103,103,-110,156v-15,8,-40,8,-37,-10r23,-142v0,-7,-1,-12,-5,-17v19,-6,42,-16,42,9v0,16,-15,77,-19,102v34,-62,67,-123,128,-136v34,5,29,32,-3,52v-4,-9,-11,-14,-19,-14",w:194},s:{d:"142,-77v48,-28,58,-37,94,-78r14,8v-25,34,-58,62,-99,85v23,49,-23,93,-69,92v-21,0,-42,-12,-43,-31v9,-33,37,-40,75,-61v-31,-49,-70,-108,-1,-141v40,15,25,42,-7,61xm91,11v28,2,42,-31,30,-57v-34,19,-51,33,-51,43v0,10,7,14,21,14",w:154},t:{d:"121,-28v22,0,52,-25,59,-42v24,37,-48,73,-78,74v-31,1,-47,-33,-47,-67v0,-26,15,-88,25,-124v-21,0,-46,-2,-59,6v12,-29,26,-29,66,-28v10,-35,20,-66,65,-59v-9,12,-18,31,-28,59v43,-2,99,6,130,-7v-6,52,-88,21,-138,29v-14,43,-25,94,-24,118v0,27,9,41,29,41",w:158},u:{d:"242,-195v35,3,1,40,3,65v-7,29,-14,93,12,93v27,0,63,-39,105,-116r15,9v-48,92,-92,139,-132,139v-37,0,-46,-55,-39,-103v-23,48,-59,104,-108,112v-78,-13,-29,-103,-19,-176v0,-4,-2,-7,-4,-11v16,1,41,-5,40,12v-1,20,-24,90,-24,118v0,17,6,26,18,26v29,8,122,-126,109,-164v10,-3,17,-4,24,-4",w:281},v:{d:"134,-32v34,-40,66,-97,74,-152v45,22,27,32,1,78v-20,37,-48,80,-79,104v-6,5,-18,6,-33,7v16,-70,-25,-164,-58,-202v39,-18,47,-5,67,43v14,34,22,74,28,122",w:203},w:{d:"319,-159v0,49,-47,166,-99,166v-40,0,-43,-61,-39,-109v-24,47,-41,103,-100,106v15,-65,-9,-165,-37,-202v36,-16,44,-5,58,37v10,29,16,71,19,124v25,-35,59,-87,61,-136v17,-7,36,-11,39,6v-4,32,-12,58,-11,96v0,33,8,49,23,49v36,0,53,-72,52,-118v0,-22,-6,-36,-17,-40v23,-18,51,-19,51,21",w:301},x:{d:"327,-144v-42,69,-66,133,-139,133v-27,0,-50,-16,-70,-48v-24,33,-38,64,-44,95v-14,-9,-21,-17,-21,-26v0,-18,18,-47,55,-86v-13,-19,-34,-69,-35,-95v0,-10,12,-17,35,-21v-4,29,8,52,26,92v31,-37,46,-62,46,-86v12,-2,31,-1,31,10v0,17,-23,47,-68,92v17,27,36,41,56,41v35,0,73,-37,113,-110",w:231},y:{d:"120,-1v-8,-57,-37,-132,-68,-164v39,-27,54,6,66,43v12,34,22,64,28,91v40,-63,61,-117,64,-164v58,13,27,38,3,90v-31,67,-83,135,-133,176v-24,19,-46,29,-63,29v-25,1,-27,-20,-19,-39v51,19,83,-11,122,-62",w:207},z:{d:"71,-125v5,-50,23,-53,78,-53v23,0,39,-3,48,-11v11,19,7,29,-9,48r-64,82v29,-5,47,0,67,15v44,-30,82,-67,114,-110r14,9v-26,41,-65,81,-117,118v26,67,-37,144,-97,144v-27,1,-53,-16,-53,-41v0,-24,36,-57,108,-100v-28,-11,-55,-6,-84,7v-3,-17,2,-32,15,-36v16,-24,59,-73,81,-101v-32,12,-84,7,-101,29xm110,100v41,-1,92,-66,64,-110v-61,39,-92,69,-92,87v0,12,13,24,28,23",w:223},"{":{d:"77,-141v41,22,56,-26,68,-74v15,-62,41,-93,80,-93v15,0,24,7,25,20v-77,-19,-60,103,-98,139v-12,12,-28,24,-48,30v70,17,31,85,19,131v-5,20,30,26,53,20v-14,39,-97,16,-87,-22v0,-42,62,-102,2,-120v-15,-8,-17,-14,-14,-31",w:201},"|":{d:"90,-282v44,4,26,34,20,66r-44,223v-4,21,-5,28,-3,45v-36,-5,-29,-11,-23,-45r45,-225v6,-33,10,-43,5,-64",w:108},"}":{d:"181,-156v-1,33,-35,24,-47,46v-8,15,-18,53,-24,78v-14,56,-40,84,-80,84v-14,0,-21,-6,-22,-18v75,16,63,-99,92,-136v10,-12,22,-25,41,-37v-77,-6,-12,-90,-7,-127v2,-23,-32,-29,-54,-20v11,-43,99,-17,88,20v2,17,-30,82,-30,98v0,16,28,18,43,12",w:153},"~":{d:"120,-98v-29,-22,-56,-12,-57,23v-11,-3,-17,-10,-17,-21v0,-39,51,-52,90,-25v30,21,81,45,83,-13v11,4,17,12,17,22v0,43,-61,56,-99,24"},"":{w:121}}}),Cufon.registerFont({w:180,face:{"font-family":"Mistral","font-weight":400,"font-stretch":"normal","units-per-em":"360","panose-1":"3 9 7 2 3 4 7 2 4 3",ascent:"288",descent:"-72",bbox:"-18 -268 248 114","underline-thickness":"26.3672","underline-position":"-24.9609","unicode-range":"U+0020-U+007E"},glyphs:{" ":{w:90},"":{w:90},"!":{d:"34,2v-20,-8,0,-35,15,-35v20,0,10,14,10,28v-3,8,-16,5,-25,7xm38,-46r11,-131v-3,2,-6,-1,-6,-4v8,-15,-1,-49,18,-55v9,-6,14,-15,26,-16v9,52,-21,128,-25,189v0,3,-18,23,-24,17",w:108},'"':{d:"88,-240v-16,35,-5,103,-42,111v-1,-34,3,-67,8,-97v11,-8,19,-15,29,-19v3,0,6,1,5,5xm148,-240v-3,29,-17,51,-17,79v-3,14,-11,32,-25,32v0,-38,2,-69,11,-98v12,-8,15,-16,27,-18v2,0,5,2,4,5",w:168},"#":{d:"26,-154v44,-2,22,-64,55,-79v5,-1,13,-12,15,-3v-6,30,-8,44,-18,75v9,-2,17,-2,26,-1v12,-21,3,-62,29,-70v5,-2,11,-11,16,-6v-3,26,-9,45,-17,73v9,1,24,-7,28,0v-7,12,-19,21,-36,22r-10,33v10,0,26,-8,32,-1v-8,13,-20,20,-39,22v-8,28,-19,54,-20,87v-12,6,-15,-10,-13,-23r11,-61v-54,-3,-38,32,-51,85v-13,5,-15,-14,-12,-27r8,-51v-8,0,-22,7,-28,1v4,-18,15,-29,36,-30v2,-8,8,-20,3,-26v-8,0,-21,7,-25,1xm99,-140v-18,5,-33,-3,-34,16v-2,5,-4,11,-6,18v9,-3,21,-2,32,-2",w:163},$:{d:"52,-42v23,-72,-68,-76,-35,-143v12,-24,52,-33,43,-69v-3,-12,14,-14,21,-7v2,8,-3,18,0,21v14,-6,23,-9,29,-9v26,19,-13,46,-30,54v-11,15,-1,51,-7,76v13,15,30,27,31,52v20,27,-44,33,-45,69v-1,16,-3,19,-12,13v0,-6,2,-14,0,-19v-9,4,-17,11,-30,11v-19,0,-22,-18,-4,-26v7,-6,27,-13,39,-23xm55,-199v-21,11,-16,47,0,59v-2,-13,1,-45,0,-59xm63,-44v15,2,21,-22,6,-31v-5,6,0,24,-6,31",w:128},"%":{d:"6,-119v-5,-45,12,-83,25,-117v7,-3,14,-9,20,-2v30,-20,43,20,37,52v-8,38,-17,75,-50,88v-16,-2,-27,-8,-32,-21xm70,-184v0,-17,-3,-30,-18,-29v-15,6,-27,19,-21,43v-3,12,-12,51,11,46v19,-12,28,-31,28,-60xm77,-104v38,-44,40,-133,96,-153v-24,105,-88,164,-122,257v-1,9,-9,16,-16,18v-13,-41,31,-82,42,-122xm161,-2v-54,18,-47,-59,-33,-95v11,-13,10,-55,36,-41v29,-21,43,19,37,51v-7,35,-17,66,-40,85xm142,-84v1,24,-11,78,23,53v12,-16,25,-48,14,-75v-13,-19,-38,4,-37,22",w:214},"&":{d:"76,-66v-35,-36,-69,-78,-57,-150v8,-44,69,-20,78,6v9,10,12,24,22,34r39,-48v7,0,17,-3,19,3v-13,35,-36,64,-49,101v5,22,-14,59,27,46v12,8,35,-16,43,-12v-7,36,-50,38,-83,42v-13,13,-12,39,-41,36v-17,-11,4,-39,2,-58xm92,-126v-5,-16,20,-26,9,-42v-8,-24,-19,-52,-46,-56v-28,3,-10,47,-14,65v8,25,25,49,45,61v7,-8,18,-27,16,-37v-4,2,-7,7,-10,9",w:215},"'":{d:"88,-240v-16,35,-5,103,-42,111v-1,-34,3,-67,8,-97v11,-8,19,-15,29,-19v3,0,6,1,5,5",w:108},"(":{d:"77,2v3,17,-16,19,-25,10v-58,-56,-24,-196,14,-242v8,-10,18,-20,24,-12v-15,61,-64,131,-34,202v6,14,10,32,21,42",w:94},")":{d:"61,-137v0,-39,-5,-79,-31,-95v0,-20,30,-14,36,-4v32,55,19,155,-13,204v-10,16,-18,55,-42,47v21,-46,50,-92,50,-152",w:100},"*":{d:"119,-173v-6,25,-36,-13,-43,-5v0,18,9,51,-13,36v-2,-8,2,-30,-3,-36v-11,7,-29,25,-40,10r36,-23v-7,-12,-52,-23,-30,-43v12,8,24,30,37,29v2,-16,-9,-44,9,-45v17,3,-1,38,4,46v13,-6,23,-20,32,-30v6,-1,11,3,10,9v0,4,-12,15,-36,33v9,6,21,13,34,15v2,0,3,2,3,4",w:116},"+":{d:"72,-27v-1,-22,4,-48,5,-71v-27,0,-42,7,-69,-1v-4,-37,36,-15,71,-21v3,-19,3,-39,5,-61v-2,-10,10,-8,16,-9v12,-1,8,10,7,19r-5,51v22,-1,47,2,65,-1v9,2,4,11,4,19v-3,14,-30,0,-44,7v-8,-3,-16,-1,-28,-2v-2,23,0,54,-7,71v-6,-3,-12,-1,-20,-1"},",":{d:"55,-14v-12,22,-17,74,-48,60v0,-12,21,-53,14,-70v0,-10,4,-17,12,-17v17,0,19,12,22,27",w:79},"-":{d:"17,-60v-25,8,-13,-19,-8,-20v16,-4,35,-1,61,-2v7,-1,9,4,9,10v1,24,-41,11,-62,12",w:90},"":{d:"17,-60v-25,8,-13,-19,-8,-20v16,-4,35,-1,61,-2v7,-1,9,4,9,10v1,24,-41,11,-62,12",w:90},".":{d:"30,-40v21,0,29,36,10,43v-16,-1,-23,-19,-19,-32v1,-4,1,-12,9,-11",w:79},"/":{d:"83,-167v22,-30,15,-104,64,-93v-25,105,-89,162,-117,256v0,9,-10,16,-19,12v1,-70,50,-117,72,-175",w:136},0:{d:"36,-201v5,-13,11,-42,28,-32r-2,13v12,-10,22,-29,43,-26v59,9,49,118,28,169v-16,39,-27,83,-80,79v-65,-28,-37,-147,-17,-203xm54,-172v-11,43,-19,121,14,143v38,-14,51,-62,58,-110v9,-58,-49,-85,-74,-39v1,4,1,4,2,6",w:161},1:{d:"53,26v13,-57,27,-128,26,-191v-28,20,-44,42,-68,65v-13,-27,20,-44,31,-65r52,-58v51,-2,11,91,13,131v-11,46,-12,103,-49,123v-4,0,-5,-1,-5,-5",w:139},2:{d:"17,-150v-32,-34,4,-88,58,-71v44,-1,71,38,49,81v-20,40,-58,81,-80,119v19,12,63,6,91,3v13,9,-3,25,-17,27v-34,13,-142,25,-108,-30v27,-44,80,-83,94,-137v-4,-33,-76,-34,-79,-1v1,3,-6,9,-8,9",w:143},3:{d:"129,-54v-10,33,-66,81,-113,76v-13,6,-31,-1,-16,-12v31,-22,71,-36,94,-66v-12,-21,-74,-8,-61,-48v20,-27,41,-51,57,-82v-20,-15,-57,5,-76,10v-23,-32,30,-55,77,-55v26,0,46,22,29,45v-17,22,-44,58,-55,81v19,18,64,15,64,51",w:139},4:{d:"114,-72v5,16,33,-19,33,4r0,6v-17,13,-44,19,-43,48v1,15,-9,33,-5,47v1,3,-14,16,-17,15v-14,-14,0,-51,0,-73v-3,-12,-25,-1,-36,-1v-38,0,-41,-23,-41,-59v0,-40,9,-71,19,-100v-11,-24,23,-63,46,-52v-6,51,-38,101,-43,159v3,22,39,18,57,14v6,-33,1,-74,15,-100v7,-13,36,-3,31,12v-6,21,-12,57,-16,80",w:141},5:{d:"32,-213v23,-12,96,-16,110,-2v-7,53,-127,6,-104,89v25,30,65,42,88,71v22,58,-56,81,-112,67v-8,-2,-17,-8,-13,-18v36,-5,67,-13,95,-26v3,-34,-57,-46,-73,-74v-33,-24,-7,-88,9,-107",w:144},6:{d:"1,-79v0,-94,65,-131,126,-171v25,6,3,18,-5,27v-27,29,-54,59,-74,97r5,-2v34,27,75,47,77,105v2,50,-78,47,-99,15v-13,-20,-30,-38,-30,-71xm80,-13v37,-4,6,-50,-4,-65r-30,-44v-10,11,-20,40,-20,59v0,33,26,44,54,50",w:140},7:{d:"32,19v9,-71,36,-126,50,-193v-9,-23,-44,-19,-71,-26v-22,1,-27,-20,-29,-37v24,-24,87,16,113,30v50,67,-25,146,-36,216v-6,8,-19,23,-27,10",w:125},8:{d:"77,-116v24,-23,47,-59,54,-92v-16,-30,-72,-1,-92,8v-19,-18,20,-50,47,-52v31,-12,69,16,69,57v0,49,-40,73,-51,105v19,15,30,57,5,73v-15,26,-94,41,-88,-15v0,-9,13,-31,40,-65v-13,-17,-40,-24,-40,-51v0,-18,13,-56,30,-41v-13,31,9,57,26,73xm54,-16v37,13,62,-40,29,-56v-10,14,-43,36,-29,56",w:159},9:{d:"26,-101v-34,3,-24,-40,-11,-60v25,-37,50,-74,92,-94v19,1,42,18,19,29v-40,18,-85,60,-93,102v44,-16,64,-53,100,-77v25,4,3,43,0,62v-10,54,-31,110,-54,153v-5,2,-18,8,-20,1v20,-47,32,-104,42,-163v-23,16,-39,44,-75,47",w:151},":":{d:"30,-40v21,0,29,36,10,43v-16,-1,-23,-19,-19,-32v1,-4,1,-12,9,-11xm40,-113v18,-1,31,35,11,43v-19,0,-24,-22,-18,-37v0,-4,2,-7,7,-6",w:79},";":{d:"55,-14v-12,22,-17,74,-48,60v5,-22,25,-47,14,-70v0,-10,4,-17,12,-17v17,0,19,12,22,27xm53,-70v-21,2,-28,-35,-11,-43v20,0,30,36,11,43",w:79},"":{d:"55,-14v-12,22,-17,74,-48,60v5,-22,25,-47,14,-70v0,-10,4,-17,12,-17v17,0,19,12,22,27xm53,-70v-21,2,-28,-35,-11,-43v20,0,30,36,11,43",w:79},"<":{d:"77,-57v-21,-17,-85,-28,-49,-57v41,-33,95,-81,138,-102v7,10,8,46,-12,43v-40,14,-67,47,-103,66v36,29,80,50,117,78v6,5,-3,21,-11,16"},"=":{d:"13,-117v-6,-10,1,-33,23,-26r135,-4v1,0,3,2,3,3v0,4,-9,24,-13,23v-55,-1,-105,-1,-148,4xm116,-93v22,0,67,-4,51,27r-158,-6v-6,-42,68,-21,107,-21"},">":{d:"18,-11v-6,-10,-7,-45,12,-43v37,-12,69,-45,104,-66v-29,-25,-83,-53,-118,-77v-6,-15,13,-22,23,-13v37,30,90,47,130,76v0,21,-6,20,-26,35v-39,30,-81,67,-125,88"},"?":{d:"35,-235v38,-3,109,36,86,91v-11,26,-27,55,-39,81v-2,8,-19,11,-24,4v14,-39,57,-101,8,-130v-4,-3,-10,-6,-16,-10r4,15v0,2,-1,5,-4,4v-22,-1,-36,-42,-15,-55xm22,-9v2,-9,38,-46,49,-20v-2,21,-21,29,-43,31v-5,0,-6,-4,-6,-11",w:142},"@":{d:"219,-33v-28,56,-146,42,-176,-3v-13,-20,-30,-48,-30,-79v0,-78,48,-129,125,-129v59,0,105,32,110,89v-5,41,-32,83,-73,83v-17,0,-21,-17,-26,-33v-8,2,-72,81,-80,31v3,-70,59,-83,96,-117v8,-1,20,-3,19,7v-19,34,-62,54,-78,89v26,-9,36,-41,65,-47v16,3,-2,48,22,43v24,-5,35,-29,36,-56v3,-72,-104,-92,-156,-51v-26,21,-41,49,-40,91v3,58,38,98,93,103v41,4,58,-14,81,-30v7,0,12,2,12,9",w:260},A:{d:"4,-56v-8,-1,-10,-4,-10,-18v0,-24,28,-19,30,-44v10,-22,19,-73,36,-92v-11,-8,0,-18,10,-18v9,-8,18,-24,34,-28v22,3,-10,27,3,34r21,11v14,28,2,68,9,98v16,7,-10,16,-1,28v-1,22,-9,46,-7,63v-5,11,-3,29,-17,31v-13,-11,3,-54,-4,-77v5,-3,3,-16,0,-21v-25,6,-49,15,-73,22v-12,15,-17,39,-24,61v-3,10,-4,28,-19,27v-16,-19,9,-54,12,-77xm72,-164v-11,19,-18,39,-27,63v18,0,42,-3,60,-7v9,-24,5,-75,-19,-79v-8,2,-11,12,-14,23",w:158},B:{d:"44,7v-1,15,-20,17,-23,3v-8,4,-19,3,-21,-7v8,-12,26,-12,23,-37v-3,-22,4,-33,2,-51v3,-14,-29,-16,-12,-29v3,-2,8,-5,14,-8v7,-32,-1,-70,25,-86v3,-3,0,-6,-3,-6v-10,-2,-35,14,-43,6v0,-8,5,-12,8,-18v33,-20,76,-21,117,-18v18,5,39,10,38,35v0,14,-7,25,-15,33v-23,19,-66,42,-91,62v19,29,94,19,94,65v0,10,-9,20,-28,29v-19,9,-47,19,-85,27xm122,-54v-13,-18,-41,-22,-63,-31v-11,10,-12,50,-11,66v23,-5,59,-15,74,-35xm66,-139v24,-15,96,-47,52,-72v-26,-14,-56,-5,-49,34v-3,9,-11,31,-3,38",w:164},C:{d:"45,-58v5,45,77,51,102,19v8,-3,12,-8,18,-13v12,20,6,16,-6,25v-24,18,-71,48,-107,25v-81,-30,-41,-172,5,-203v20,-22,57,-49,97,-33v29,27,6,107,-12,135v-7,1,-17,7,-22,1v-2,-38,12,-69,24,-94v1,-16,-21,-19,-34,-17v-50,11,-64,65,-73,118v7,13,-4,26,8,37",w:171},D:{d:"153,-89v-9,18,-25,38,-44,58v17,-9,45,-9,60,-21v3,6,4,11,6,16v-14,12,-38,16,-63,18v-25,18,-42,30,-79,34v-18,-6,1,-22,7,-27v50,-13,77,-53,98,-96v10,-52,-33,-74,-69,-92v-14,50,-23,115,-34,166v-6,11,-16,34,-21,15v4,-31,3,-75,11,-105v-2,-30,4,-72,28,-82v-9,-9,-45,-5,-40,-29v-2,-5,-5,-11,1,-12v95,3,186,62,139,157",w:174},E:{d:"145,-211v-11,-7,-43,-12,-57,-1v-30,-2,-24,59,-37,85v0,3,2,4,4,5v14,-17,53,-24,78,-20v12,11,3,43,-13,28v-44,1,-90,5,-81,56r-3,29v47,1,81,-9,111,-23r7,16v-25,17,-59,28,-92,38v-12,-6,-42,12,-40,-11v-20,0,-9,-32,-9,-48v0,-100,20,-203,128,-194v18,1,18,36,4,40",w:152},F:{d:"106,-210v-53,-4,-44,46,-54,83v20,2,73,-26,87,0v-1,9,-2,19,-6,25v-26,-9,-57,1,-80,2v-20,26,-7,89,-21,124v-29,1,-10,-50,-16,-78v2,-12,6,-30,1,-41v-4,0,-12,8,-13,1v5,-14,21,-15,20,-37v0,-70,29,-119,94,-115v28,-6,25,28,14,42v-9,-2,-17,-11,-26,-6",w:151},G:{d:"123,-42v-26,26,-103,68,-114,2v-16,-94,28,-177,100,-200v45,-15,63,24,71,57v2,6,-18,25,-25,24v-4,-1,-7,-2,-6,-8v-1,-38,-37,-69,-65,-36v-25,29,-40,71,-45,122v-4,42,35,70,60,35v17,-14,27,-33,43,-48v28,-11,23,18,19,41v-5,27,-14,52,-19,78v-2,9,-7,13,-15,16v-1,11,-14,10,-13,-1v3,-27,13,-57,9,-82",w:178},H:{d:"9,-97v18,-27,18,-83,22,-120v-3,-20,33,-39,36,-13v-9,28,-12,69,-19,102v9,14,46,-9,72,1r19,-5v3,-23,19,-62,7,-81v9,-15,15,-25,30,-33v16,12,-7,46,2,66r-41,177v-3,13,-6,25,-16,27v-11,-4,-2,-24,-3,-35v-2,-28,17,-71,14,-102v-12,2,-21,8,-37,4v-24,11,-56,10,-51,52v1,11,-1,21,5,23v7,0,8,-10,14,-8v-6,19,-13,36,-34,40v-10,-6,-10,-29,-10,-51v0,-20,-7,-29,-10,-44",w:183},I:{d:"49,-13v-3,11,-31,25,-29,-1v-8,-47,9,-96,5,-137v-12,-23,7,-66,18,-85v10,-1,29,-19,32,-2r-30,193v1,12,0,23,4,32",w:76},J:{d:"73,-203v1,-10,-28,-7,-14,-18v13,-10,25,-20,40,-28v9,1,9,13,9,25v0,84,-33,140,-51,209v-6,8,-18,13,-31,14v-32,-11,-26,-53,-39,-84v0,-11,1,-20,7,-23v25,-1,27,27,34,44v-11,7,-7,28,5,31v24,-44,33,-108,40,-170",w:108},K:{d:"115,-42v13,16,30,-3,41,-10v5,10,7,15,7,16v-16,17,-62,49,-74,10v-19,-16,-31,-47,-46,-67v-9,20,-10,51,-10,77v0,12,-10,7,-18,9v-12,-24,10,-79,5,-110v9,-43,-3,-104,38,-118v26,32,-19,79,-11,118v28,-22,69,-72,84,-107v-9,-9,-6,-22,11,-23v6,-5,16,-4,23,-9v15,32,-14,52,-29,74v-17,25,-42,42,-59,68v13,23,23,54,38,72",w:161},L:{d:"40,-43v5,28,58,3,67,-9v5,10,7,15,7,16v-14,27,-50,40,-88,38v-30,-9,-7,-60,-7,-85v0,-19,12,-44,2,-56v7,-41,14,-78,31,-106v17,-15,32,2,22,25r-25,119v-3,21,-8,40,-9,58",w:112},M:{d:"14,-50v5,-50,6,-104,17,-154v-11,-27,14,-45,34,-52v12,10,0,31,4,55v5,30,10,67,35,73v46,-17,60,-79,101,-101v10,3,4,25,5,36v-11,58,-29,112,-41,169v-8,1,-17,24,-23,12v11,-45,16,-101,26,-149v-21,12,-34,44,-55,52v-16,25,-55,6,-57,-16v-3,-3,-3,-7,-7,-9v-6,28,-15,83,-18,113v2,14,-16,18,-24,14",w:213},N:{d:"1,5r34,-200v-12,-20,14,-42,29,-26v6,-6,16,-24,24,-10v-6,23,-20,41,-6,67v20,39,30,86,52,122v13,-40,22,-96,19,-147v8,-24,5,-59,31,-64v-10,82,-6,179,-35,242r-23,9v-35,-32,-40,-91,-69,-133r-39,137v-1,9,-20,19,-17,3",w:188},O:{d:"69,-238v16,6,-4,23,0,32v18,-17,42,-42,73,-28v56,25,53,144,5,175v-19,28,-45,53,-85,58v-56,8,-46,-65,-43,-105v-4,3,-4,9,-9,9v-11,-34,32,-67,35,-107v5,-13,11,-28,24,-34xm74,-28v68,0,104,-109,62,-164v-42,-27,-86,14,-86,68v0,36,-14,96,24,96",w:190},P:{d:"23,20v-21,-7,-5,-41,-7,-59v-4,-4,-13,-4,-14,-12v5,-5,25,-12,15,-28v3,-21,9,-47,8,-67r11,-55v-6,-18,-31,-30,-7,-47v45,-32,94,32,114,68v18,33,4,85,-24,96v-21,14,-51,26,-79,34v-1,17,-8,37,5,46v-6,9,-11,22,-22,24xm116,-113v13,-53,-27,-94,-67,-109v6,14,23,27,20,34v-8,31,-22,78,-24,115v24,5,56,-23,71,-40",w:159},Q:{d:"81,-10v-33,26,-93,-9,-81,-58v1,-16,4,-48,20,-37v-4,30,9,87,43,75v-48,-47,-57,-152,2,-192v15,-12,29,-26,54,-26v97,0,53,161,12,195v-7,11,-28,25,-10,34v12,20,38,28,53,46v-5,5,-7,12,-18,12v-34,-9,-49,-30,-75,-49xm129,-79v25,-36,42,-134,-22,-134v-34,0,-58,28,-58,62v0,50,22,83,48,108v15,-4,21,-20,32,-36",w:182},R:{d:"59,-246v54,0,124,27,102,85v-23,27,-71,42,-100,62v24,38,71,61,106,89v5,4,12,23,4,28v-45,-18,-87,-52,-126,-76v-8,18,-5,47,-16,61v-29,-5,-6,-46,-7,-68v2,-8,-14,-18,-14,-23v0,-18,21,-9,17,-33v5,-53,-20,-125,34,-125xm62,-211v-19,-3,-30,15,-19,28v6,-10,22,-10,22,4v0,20,-14,44,-10,61v31,-16,66,-26,80,-58v-7,-23,-45,-31,-73,-35",w:166},S:{d:"60,-41v19,6,-16,13,-6,19v3,-1,23,-14,17,-21v32,-48,-97,-77,-51,-147v19,-31,56,-53,95,-65v15,-1,14,24,8,32v-20,14,-34,28,-51,34v-4,0,-5,-3,-6,-6v-3,-6,19,-16,15,-20v-32,13,-45,48,-20,77v22,24,50,41,50,87v11,-3,10,8,14,15v-7,3,-20,4,-32,6v-20,19,-42,34,-70,42v-9,-2,-20,-6,-22,-15v9,-23,40,-24,59,-38",w:124},T:{d:"-12,-203v-9,-22,11,-53,42,-46v24,-9,58,1,74,0v10,2,8,25,3,32v-16,1,-31,-10,-42,0v32,57,-27,132,-11,206v-5,14,-26,17,-21,-4v-9,-45,4,-101,4,-144v3,-15,10,-42,4,-57v-17,0,-35,10,-53,13",w:100},U:{d:"70,-15v-76,-7,-47,-133,-47,-213v0,-9,3,-16,11,-17v28,13,20,60,12,91v5,40,-4,111,39,107v43,-45,43,-123,66,-185v4,-11,5,-32,23,-31v6,1,6,8,6,17v-2,72,-37,142,-34,214v11,12,-9,29,-22,31v-20,-14,0,-44,-6,-64v-15,18,-22,44,-48,50",w:181},V:{d:"69,-54v29,-41,48,-98,59,-154v5,-9,13,-8,22,-13v8,65,-38,131,-61,184v9,18,-17,23,-24,37v-23,15,-28,-16,-15,-22v-18,-38,-31,-92,-31,-142v-7,-29,-16,-89,18,-94v9,-9,16,1,15,14v-4,68,-6,142,17,190",w:151},W:{d:"143,-52v24,-42,39,-100,53,-152v-4,-12,6,-37,19,-34v-2,87,-28,152,-59,214v-13,11,-39,13,-39,-12v-1,-21,-3,-37,-7,-56v-22,26,-19,78,-55,91v-30,-33,-16,-104,-40,-146v-2,-37,3,-78,13,-109v30,-13,34,30,27,62v1,49,0,105,11,144v33,-40,37,-102,57,-159v4,-11,31,-21,31,-1v0,47,-21,102,-11,158",w:215},X:{d:"97,-150v11,41,64,126,7,151v-13,-9,-19,-27,-10,-45v-3,-27,-11,-48,-19,-71v-13,21,-42,47,-44,72r8,-4v9,0,4,10,1,14v-1,2,-8,8,-21,19v-13,11,-21,16,-23,16v-14,-1,-9,-17,-9,-30v11,-47,62,-79,76,-118v-8,-34,-31,-60,-45,-89v33,-18,49,39,68,60v21,-28,37,-67,61,-93v7,0,3,15,3,22v-14,35,-35,63,-53,96",w:145},Y:{d:"15,-235v16,-4,35,-10,32,22v-4,40,3,78,19,106v26,-42,42,-106,76,-142v6,0,7,5,8,10v-5,62,-32,96,-57,137v-7,29,-24,50,-27,82v10,13,-11,30,-29,24v-21,-7,7,-34,2,-44r14,-36v-26,-26,-38,-74,-41,-120v-5,-8,-10,-36,3,-39",w:132},Z:{d:"33,-37v33,8,81,-7,113,-15r7,16v-44,16,-88,39,-140,39v-42,0,-11,-50,1,-63v38,-40,76,-86,99,-139v-19,-25,-66,-13,-95,-17v-4,-23,15,-47,43,-36v72,-15,115,60,56,103v-26,41,-60,70,-84,112",w:151},"[":{d:"128,-255v6,0,9,2,9,7v-1,24,-50,5,-50,30v-18,52,-26,135,-30,201v-2,26,37,5,51,11v-2,31,-50,24,-74,15v-4,-76,19,-153,26,-221v4,-35,35,-40,68,-43",w:127},"\\":{d:"23,-249v25,89,76,151,104,242v-1,1,1,13,-5,16v-31,-8,-17,-53,-43,-80r-81,-157v0,-11,-12,-28,-4,-35v11,3,26,1,29,14",w:136},"]":{d:"24,-231v-2,-34,64,-29,78,-10v-1,29,-25,225,-38,240v-13,10,-38,16,-60,18v-10,1,-12,-12,-5,-17v11,-6,38,-6,43,-13v14,-19,35,-168,33,-220v-15,-4,-36,0,-51,2",w:127},"^":{d:"60,-199v19,-19,17,-56,51,-48v26,36,65,86,79,129v-5,9,-51,20,-41,-9v-13,-37,-32,-55,-47,-88r-95,132v-4,9,-26,4,-20,-5v28,-37,48,-72,73,-111"},_:{d:"20,32v51,8,136,-12,155,9v0,17,-28,7,-43,10v-41,-2,-90,4,-127,-2v-1,-5,11,-17,15,-17"},"`":{d:"86,-194v5,23,42,31,33,54v-21,-13,-75,-31,-48,-60v10,-4,8,6,15,6"},a:{d:"27,-37v27,-5,40,-41,68,-46v12,7,3,65,34,31r7,16v-12,19,-59,38,-61,-3v-5,-14,-13,6,-21,8v-15,16,-24,25,-45,33v-20,2,-19,-26,-8,-35v-1,-12,-12,-17,-2,-27v34,-21,57,-63,100,-73v25,17,-22,31,-29,49v-14,14,-30,30,-43,47",w:135},b:{d:"86,-247v35,1,7,57,1,74v-14,42,-41,70,-58,110v-1,22,3,55,25,41v3,-2,5,-5,7,-10v-13,-1,-10,-15,-6,-24v10,-19,16,-31,42,-30v16,6,-8,31,-2,36v6,-5,8,9,11,14v-10,7,-15,19,-30,15v-12,13,-25,37,-48,34v-20,-3,-20,-31,-23,-51v-24,-10,12,-34,7,-58v14,-59,25,-110,56,-143xm39,-111v14,-23,30,-59,35,-87v-10,26,-35,54,-35,87",w:105},c:{d:"0,-19v-1,-26,-11,-43,15,-53v24,-17,42,-39,75,-48v31,41,-82,44,-56,98v28,12,52,-15,71,-30v12,21,4,17,-6,27v-21,21,-82,52,-99,6",w:110},d:{d:"141,-52r7,16v-9,4,-12,20,-29,18v-29,2,-30,-25,-39,-43v-23,23,-34,57,-67,67v-34,-1,0,-42,-19,-58v31,-26,56,-58,92,-80v16,-35,25,-74,49,-102v7,-4,15,-1,14,8v-4,38,-16,68,-31,95v-2,25,-25,74,9,86v6,-1,10,-2,14,-7xm30,-31v19,-15,51,-45,51,-74v-21,19,-39,43,-53,71v0,1,1,2,2,3",w:146},e:{d:"89,-36v-14,15,-25,19,-48,23v-26,5,-22,-38,-40,-23r-7,-16v25,-28,21,-84,66,-92v30,5,14,42,2,55v-11,12,-43,40,-9,47v13,0,21,-4,29,-10xm50,-110v-4,0,-22,24,-15,27v7,-7,21,-16,15,-27",w:88},f:{d:"5,-32v-23,-23,8,-40,11,-64v7,-47,20,-98,45,-133v11,-15,25,-3,23,17v-4,39,-18,86,-34,118v-17,35,-30,108,-20,156v24,-30,24,-87,49,-114v13,18,-3,34,-7,54v-9,42,-20,77,-43,102v-42,6,-22,-64,-29,-99xm54,-140v4,-7,14,-22,9,-31v-4,6,-9,22,-9,31",w:84},g:{d:"1,-36v-16,-28,20,-38,25,-66v19,-17,28,-46,57,-52v38,41,-92,79,-23,135v11,-10,16,-16,31,-33r6,16v-7,10,-17,21,-24,33v8,14,18,27,18,50v0,25,-42,61,-68,61v-24,0,-27,-13,-25,-36v3,-28,29,-42,39,-65v-11,-15,-24,-29,-28,-51xm22,89v27,1,61,-48,29,-68v-14,16,-29,38,-37,62v1,4,2,7,8,6",w:96},h:{d:"72,-86v36,-15,10,53,51,34v14,21,-8,30,-31,30v-12,4,-18,-19,-24,-20v-14,13,-23,42,-44,50v-25,2,-15,-34,-19,-48r-4,4v-15,-22,12,-25,12,-49v20,-71,47,-131,103,-163v40,50,-39,118,-63,160v-14,12,-29,44,-20,66v16,-15,25,-47,39,-64xm47,-110v26,-21,50,-64,63,-104v-30,17,-49,68,-63,104",w:129},i:{d:"63,-11v-33,6,-25,-24,-43,-40v-9,0,-12,9,-19,15v-2,-7,-8,-12,-6,-19v10,-10,29,-33,42,-40v28,1,10,50,33,57v12,0,17,-10,24,-14r7,16v-10,9,-23,22,-38,25xm36,-144v-14,-20,15,-51,38,-45v3,21,-10,51,-38,45",w:100},j:{d:"1,-36v-16,-30,25,-36,37,-61v13,-11,20,-29,38,-36v14,-1,8,17,8,28v0,24,-8,50,-10,75v10,-7,18,-15,26,-22v17,21,-5,21,-23,44v-32,26,-29,92,-65,113v-43,-45,54,-96,39,-170v5,-8,0,-20,-8,-12xm69,-182v0,-11,35,-48,44,-26v-2,21,-13,44,-36,40v-8,1,-7,-7,-8,-14",w:105},k:{d:"1,-36v-16,-25,14,-32,20,-53v18,-34,32,-73,47,-108v6,-12,7,-26,18,-32v21,7,14,32,6,54v-16,41,-51,103,-53,153v22,-11,11,-54,40,-59v12,-10,21,-42,36,-54v7,0,7,4,8,10v3,13,-31,53,-30,62v0,5,14,24,21,23v8,-1,12,-9,19,-12r7,16v-12,8,-19,24,-38,25v-5,3,-29,-21,-31,-21v-18,14,-24,35,-45,44v-30,-6,-3,-50,-6,-71v-8,7,-13,13,-19,23",w:138},l:{d:"59,-10v-30,3,-39,-15,-45,-39r-13,13v-18,-21,12,-27,12,-44v0,-66,30,-120,61,-162v10,-14,31,-7,29,12v-7,70,-38,111,-67,158v-5,39,41,42,57,20r7,16v-12,9,-21,24,-41,26xm39,-108v17,-11,38,-59,37,-83v-23,20,-26,53,-37,83",w:99},m:{d:"1,-36v-18,-34,32,-49,46,-75v18,-13,29,7,21,29v0,4,-6,10,-1,12v18,-12,37,-47,61,-53v24,5,0,49,4,62v11,-12,30,-36,48,-29v17,6,16,41,36,38v3,6,5,11,7,16v-7,4,-13,9,-20,10v-14,3,-35,-32,-45,-32v-15,-7,-47,69,-66,52v-3,-22,18,-50,9,-70v-28,16,-45,50,-70,67v-6,0,-10,0,-10,-5v-2,-8,19,-49,9,-52v-12,6,-20,20,-29,30",w:221},n:{d:"41,-68v-15,-6,-29,22,-40,32v-16,-32,22,-39,34,-62v5,-11,43,-39,45,-7v1,20,-16,43,-16,62v19,-16,34,-55,67,-45v15,5,9,48,31,36r7,16v-8,6,-15,17,-27,17v-26,0,-23,-53,-50,-29v-23,13,-29,44,-60,52v-10,0,-7,-9,-9,-15",w:168},o:{d:"1,-36v-18,-31,28,-38,40,-62v11,-8,23,-32,40,-20v-1,3,-5,7,-3,10v23,-14,48,-1,43,32v-1,11,-18,33,0,24r7,16v-8,7,-29,27,-38,9v-14,24,-70,39,-73,-3v0,-7,8,-19,1,-22v-5,4,-12,8,-17,16xm56,-26v25,-4,48,-32,35,-56v-19,-10,-19,13,-33,17v-8,6,-21,37,-2,39",w:127},p:{d:"1,-36r-7,-16v29,-30,47,-73,68,-111v7,-6,14,2,12,10v-12,52,-41,119,-48,184v13,-40,23,-82,42,-117v26,-25,33,23,49,34r7,16v-23,9,-36,-9,-48,-18v-24,27,-29,77,-45,113v1,21,-28,47,-28,10v0,-43,12,-80,14,-122v-5,3,-11,11,-16,17",w:122},q:{d:"118,-110v-22,20,-71,36,-73,69v19,-6,42,-32,64,-41v18,5,6,32,17,46v-30,34,-30,100,-55,138v-11,6,-17,-2,-11,-14v4,-39,33,-93,26,-135v-21,12,-36,34,-63,37v-21,3,-10,-26,-9,-38v-5,3,-10,7,-13,12v-19,-32,26,-35,43,-55v24,-11,60,-49,74,-19",w:125},r:{d:"56,-123v41,5,37,60,25,91v12,2,21,-18,30,-20v18,31,-29,36,-48,52v-9,0,-14,-1,-15,-9v6,-21,23,-46,13,-72v-2,-3,-5,-5,-9,-5v-19,15,-35,32,-51,50r-7,-16v10,-19,41,-30,36,-55v3,-4,19,-16,26,-16",w:117},s:{d:"-6,-52v24,-27,53,-48,76,-75v19,-7,28,7,23,29v-6,28,-9,39,-18,66v11,2,20,-18,29,-20v16,29,-25,32,-37,50v-9,4,-13,12,-24,13v-13,-12,-14,-72,10,-50v3,-9,13,-41,2,-47v-14,11,-38,28,-54,50",w:110},t:{d:"92,-204v21,5,-4,29,9,41v1,16,-2,25,-16,24v-4,32,-28,74,-20,107v8,-4,15,-11,26,-20r7,16v-19,11,-27,36,-51,42v-33,-6,-4,-64,-4,-86v-14,15,-30,27,-42,44v-16,-26,15,-35,24,-54v8,-14,29,-35,29,-52v-17,-1,-43,7,-49,-7v-5,-36,29,-17,54,-23v16,13,21,-35,33,-32",w:97},u:{d:"1,-36v-17,-30,24,-43,34,-68v4,-9,25,-27,30,-11v-4,25,-24,56,-12,83v21,-11,33,-37,47,-55v5,-6,17,-5,21,0v3,15,-3,42,19,35r7,16v-22,20,-49,12,-55,-14v-16,15,-24,42,-51,45v-24,2,-17,-33,-24,-50v-6,6,-12,11,-16,19",w:146},v:{d:"115,-127v-2,44,-25,74,-40,107v-10,9,-15,23,-30,27v-27,0,-17,-44,-23,-65r-21,22r-7,-16v12,-18,27,-33,34,-55v0,-1,16,-11,17,-11v12,17,-4,72,9,91v24,-17,37,-67,49,-96v2,-4,8,-7,12,-4",w:115},w:{d:"105,-1v-16,0,-12,-37,-13,-52v-17,14,-18,71,-48,57r-13,-69r-30,29v-17,-26,25,-33,30,-60v7,-14,12,-24,27,-26v14,12,-6,53,8,75v6,3,52,-123,58,-63v-9,18,-10,52,-4,72v18,-13,29,-52,41,-77v-7,-11,9,-40,16,-22v-4,54,-29,88,-52,124v-5,6,-11,12,-20,12",w:177},x:{d:"78,-51v6,23,41,12,51,-1v18,27,-30,45,-54,38v-12,-13,-25,-24,-34,-4v-6,5,-19,15,-25,9v-2,-10,48,-33,29,-48v-14,-24,-28,16,-44,21r-7,-16v12,-10,33,-17,39,-30v-9,-14,-9,-41,10,-46v10,2,7,23,14,28v22,-9,32,-39,60,-42v10,0,10,12,12,20v-2,36,-41,50,-51,71xm67,-70v9,5,41,-41,28,-45v-13,11,-44,22,-28,45",w:135},y:{d:"49,-97v27,4,-14,48,2,57v26,-18,45,-43,69,-63v17,-8,23,7,14,22v-3,17,-18,37,-18,55v9,-7,20,-16,30,-26v18,27,-27,35,-34,50v-39,34,-44,93,-97,106v-16,-37,57,-70,67,-113v4,-11,14,-31,10,-46v-14,9,-22,26,-38,32v-4,13,-33,24,-36,4v1,-11,3,-38,-9,-24v-4,3,-3,3,-8,7v-17,-28,24,-33,34,-55v4,-3,8,-6,14,-6",w:151},z:{d:"36,18v-21,-35,43,-67,7,-90v-18,7,-29,23,-42,36v-16,-24,11,-30,24,-45v8,-6,13,-25,29,-26v22,-2,29,17,29,40v6,22,-38,46,-22,64v20,-13,35,-30,53,-49r7,16v-18,17,-39,31,-55,50v24,46,-15,100,-64,100v-14,0,-19,-6,-20,-19v6,-35,37,-52,54,-77xm7,95v21,-1,53,-36,35,-58v-4,1,-55,52,-35,58",w:119},"{":{d:"126,-232v-62,-18,-34,87,-76,108v31,19,6,73,8,107v2,26,43,-1,51,11v-3,17,-24,21,-44,22v-56,2,-24,-61,-24,-105v0,-23,-16,-25,-28,-34v10,-19,38,-19,38,-53v0,-45,20,-77,68,-80v22,-1,22,18,7,24",w:127},"|":{d:"100,16v0,28,9,54,-22,42r1,-295v1,-9,22,-3,24,1v-5,59,-5,176,-3,252"},"}":{d:"63,-256v109,-11,-6,113,60,131v14,4,2,17,-7,21v-43,20,-7,126,-92,120v-15,9,-25,-13,-13,-20v71,9,41,-87,82,-112v-31,-17,-4,-73,-7,-107v-2,-25,-39,1,-52,-11v2,-15,17,-18,29,-22",w:127},"~":{d:"142,-76v19,-3,32,-23,45,-5v-11,15,-31,35,-53,30v-11,-2,-18,-11,-29,-12v-16,-4,-39,29,-46,7v12,-33,47,-45,83,-20",w:239}}}),Cufon.registerFont({w:143,face:{"font-family":"Pristina","font-weight":400,"font-stretch":"normal","units-per-em":"360","panose-1":"3 6 4 2 4 4 6 8 2 4",ascent:"288",descent:"-72","x-height":"5",bbox:"-153 -293.093 374.661 161","underline-thickness":"21.0938","underline-position":"-45.8789","unicode-range":"U+0020-U+007E"},glyphs:{" ":{w:64},"!":{d:"83,-230v3,-20,31,-2,32,1v-29,36,-46,91,-65,154v-5,8,5,15,-2,17v-7,-1,-22,-11,-16,-21v8,-36,38,-121,51,-151xm33,4v-24,7,-22,-27,-10,-37v25,9,16,11,10,37",w:86},'"':{d:"79,-166v11,-21,9,-53,18,-74v1,0,6,4,13,13v11,13,-10,69,-20,74v-6,-4,-10,-8,-11,-13xm55,-240v15,9,23,34,8,62v-8,31,-17,30,-26,12v11,-21,11,-51,18,-74",w:99},"#":{d:"135,-117v-11,0,-29,0,-54,-1r-16,45v20,2,37,2,53,1v3,-6,9,-21,17,-45xm140,-131v6,-16,14,-34,7,-51v5,-6,30,-6,24,12r-14,38v16,2,21,-15,30,-7v-4,7,-1,26,-17,22r-19,0r-16,45v24,1,29,-12,40,-8v-4,10,2,24,-16,22v-13,2,-32,-4,-32,10v-6,20,-10,30,-6,46v-4,9,-25,0,-24,-9r16,-46v-1,0,-18,-1,-53,-2v-5,17,-17,42,-10,57v-7,9,-28,0,-22,-15r16,-43v-19,-3,-28,11,-34,3v5,-16,11,-23,39,-18r16,-44v-24,-5,-32,5,-44,4v6,-8,2,-25,21,-20v7,-2,31,8,31,-6v5,-16,8,-28,3,-41v5,-6,30,-5,24,12r-14,38v19,2,35,3,54,1",w:189},$:{d:"43,38v-16,-7,-12,-27,-6,-41v-26,-9,-50,-28,-26,-52v7,11,10,20,33,29v8,-27,18,-55,28,-84v-29,-54,-36,-79,13,-108v3,0,4,1,4,4v-18,21,-21,43,-6,72v10,-29,20,-54,30,-76v-5,3,-14,5,-16,0v3,-8,12,-9,23,-14v7,-11,11,-43,32,-38v10,9,-13,17,-15,32v12,-10,22,12,32,12v3,2,4,4,4,7v-7,25,-21,73,-47,43v7,-5,31,-39,14,-49v-2,0,-6,1,-10,2v-12,26,-25,58,-40,97v23,35,53,90,0,116v-10,15,-22,17,-41,11v-5,9,1,35,-6,37xm98,-46v-1,-11,-7,-28,-19,-50v-11,32,-19,56,-24,74v23,10,45,6,43,-24",w:139},"%":{d:"120,-215v-10,32,-15,70,-51,70v-19,0,-36,-10,-35,-25v3,-26,22,-93,52,-62v20,-16,30,1,34,17xm148,-195v16,-24,23,-33,19,-51v4,-6,21,3,22,13v0,3,0,6,-3,10r-125,179v-17,28,-28,36,-22,54v-4,6,-22,-1,-22,-14v38,-68,89,-126,131,-191xm177,-65v-10,33,-13,69,-50,69v-20,0,-37,-10,-35,-25v3,-26,22,-94,52,-62v21,-15,29,2,33,18xm65,-152v20,0,38,-46,37,-74v-5,-6,-23,5,-29,3v-10,13,-18,32,-19,55v0,11,4,16,11,16xm131,-74v-9,13,-17,33,-20,55v5,29,25,17,35,-6v6,-13,21,-41,9,-53v-5,0,-20,5,-24,4",w:203},"&":{d:"249,19v-2,12,-30,32,-39,35v-16,0,-44,-44,-86,-131v-13,3,-17,-4,-6,-13v-3,-6,-6,-14,-9,-20v-51,39,-79,68,-82,89v-2,10,8,11,17,10v22,-4,56,-17,70,-40v10,-5,15,-9,16,3v2,29,-23,22,-43,38v-34,14,-49,27,-67,2v-11,-8,-16,-16,-16,-22v0,-31,65,-76,98,-98v-11,-28,-16,-51,-16,-68v0,-5,7,-8,22,-8v8,0,26,-1,25,7v22,2,35,2,39,16v-1,33,-18,40,-47,60r9,20v41,0,89,5,96,-15v0,-4,10,-5,9,1v-4,24,1,34,-39,35r-55,1v20,40,46,91,73,106v8,4,24,-18,31,-8xm118,-139v12,-13,60,-33,22,-46v-38,-17,-38,12,-22,46",w:256},"'":{d:"55,-243v15,8,23,34,8,62v-8,29,-17,32,-26,12v11,-21,11,-52,18,-74",w:57},"(":{d:"134,-255v9,0,33,8,43,22v-4,11,-26,-6,-30,-3v-40,18,-85,160,-89,226v-1,23,22,20,33,36v1,4,-3,4,-5,4v-33,-8,-52,-11,-50,-46v3,-58,57,-239,98,-239"},")":{d:"105,-200v6,-32,-15,-36,-32,-50v0,-4,3,-6,7,-5v32,8,52,13,49,47v-4,58,-55,238,-99,239v-11,0,-30,-8,-41,-21v4,-11,27,5,32,2v12,0,27,-22,45,-67v19,-46,30,-95,39,-145"},"*":{d:"84,-216v9,-1,23,-15,27,-2v4,13,-14,11,-23,14r15,19v-8,14,-18,6,-25,-11v-4,6,-8,16,-14,20v-2,0,-12,-6,-11,-9r15,-19v0,0,-21,-3,-24,-7v0,-3,2,-15,6,-13r22,9v1,-5,-8,-27,6,-27v12,0,7,19,6,26",w:95},"+":{d:"81,-141v25,-5,18,30,11,49v15,0,39,1,44,-5v7,5,-2,26,-14,22v-13,-1,-24,-2,-34,-2v-7,16,-3,42,-10,50v-1,-2,-17,-4,-16,-12r10,-38v-13,-1,-42,-2,-46,4v-11,-30,25,-20,50,-20v2,-8,13,-41,5,-48",w:152},",":{d:"43,-40v-6,21,-23,46,-28,68v3,6,-9,11,-15,9v-6,-21,13,-84,43,-77",w:72},"-":{d:"22,-82v40,6,71,25,88,3v3,2,3,30,-8,27v-18,1,-47,-6,-75,-11v-4,-3,-10,14,-12,3v1,0,2,-22,7,-22",w:130},".":{d:"15,-38v2,0,19,2,17,9v-2,8,-11,48,-35,30v10,-16,10,-32,18,-39",w:72},"/":{d:"170,-223r-118,179v-16,28,-26,36,-22,53v-3,15,-19,0,-24,-4v-6,-5,-5,-12,0,-19r120,-181v13,-24,23,-31,17,-49v5,-11,28,2,30,11v0,3,-1,6,-3,10"},0:{d:"99,-168v20,-3,49,-8,49,17v0,76,-36,199,-116,144v-54,-37,9,-135,31,-164v15,-11,13,-6,36,3xm66,-6v42,-10,56,-81,59,-132v1,-26,-21,-17,-39,-20v-29,17,-54,76,-54,122v0,16,16,29,34,30",w:152},1:{d:"75,-167v7,-17,23,-7,32,3v0,3,-3,5,-9,5v-23,34,-55,104,-45,158v0,4,-1,6,-5,6v-18,-5,-28,-10,-22,-33v10,-40,18,-72,30,-96v-17,18,-19,27,-46,46v-7,0,-7,-7,-3,-11v22,-17,44,-46,62,-79v1,0,3,0,6,1",w:90},2:{d:"140,-5v14,5,15,24,4,31v-7,-2,-5,-12,-17,-13v-37,-11,-64,-16,-100,-15v0,6,-26,22,-28,2v3,-25,5,-35,38,-28v32,-31,78,-58,85,-111v1,-14,-8,-15,-20,-13v-14,3,-60,15,-53,43v1,4,0,5,-2,5v-11,-4,-31,-25,-17,-36v34,-26,63,-38,82,-37v5,0,9,5,14,13v20,-6,19,-4,20,18v2,36,-4,35,-24,57v-23,25,-47,45,-69,63v29,2,57,10,87,21",w:157},3:{d:"54,-84v32,5,61,11,74,31v-6,14,5,35,-9,47v-37,32,-124,116,-163,44v5,-13,26,11,33,6v48,-10,109,-41,123,-85v-7,-25,-49,-28,-75,-22v-11,-2,-11,-27,2,-33v34,-15,50,-21,63,-51v-14,-22,-67,17,-65,26v-1,3,-3,5,-5,5v-34,-34,30,-52,58,-60v10,0,11,8,14,13v43,36,-20,57,-50,79",w:137},4:{d:"152,-121v-13,16,-27,61,-33,91v18,3,19,-16,29,-8r4,22v-1,11,-24,8,-38,9v-4,21,-11,43,-4,60v0,5,-2,5,-7,5v-27,-11,-20,-17,-9,-64v-36,1,-62,1,-80,-1v0,9,-13,8,-16,2v-3,-4,-6,-27,5,-27v26,-23,53,-57,67,-86v-3,-6,-8,-10,-10,-18v0,-3,2,-5,7,-4v17,-7,26,-65,52,-33v-11,45,-62,108,-90,138v-2,2,0,3,4,4v27,3,49,5,67,3v13,-39,17,-73,38,-95v4,0,14,-1,14,2",w:166},5:{d:"13,-80v5,-38,34,-63,18,-97v2,-4,8,-6,19,-4v30,5,56,8,79,8v5,-8,6,-10,15,-9v2,13,13,39,-9,36v-40,-6,-62,-17,-81,-7v-12,32,-23,51,-22,65v39,-17,68,-47,87,-14v19,6,29,14,21,36v-21,64,-81,136,-143,160v-17,-1,-39,-23,-28,-33v8,2,16,9,22,8v53,-21,128,-84,128,-148v0,-10,-5,-15,-16,-15v-28,0,-53,19,-73,40v-9,-6,-12,-14,-17,-26",w:156},6:{d:"121,-146v14,7,41,15,32,41v-14,40,-37,103,-84,110v-24,-3,-58,-9,-58,-31v0,-74,32,-153,67,-198v30,-38,42,-44,75,-14v-3,8,-18,-3,-28,4v-47,32,-92,122,-91,200v0,16,7,25,21,26v43,-5,77,-71,77,-113v0,-6,-2,-9,-6,-9v-21,3,-41,14,-58,23v-4,0,-6,-2,-6,-5v14,-18,36,-28,59,-34",w:162},7:{d:"134,-167v2,-13,11,-14,20,-9v5,10,3,31,-9,32v-21,31,-122,207,-124,255v-13,-8,-29,-26,-16,-49r122,-207v-30,-4,-85,-14,-96,19v-2,8,-13,8,-11,-1v6,-26,4,-54,42,-49",w:147},8:{d:"158,-252v79,34,-24,91,-48,117v3,5,51,30,49,56v-4,43,-71,87,-110,84v-7,0,-14,-5,-20,-16v-14,-11,-39,-25,-23,-49v13,-20,57,-55,81,-75v-52,-37,-16,-100,37,-124v4,-2,34,14,20,20v-37,-8,-86,68,-46,94v24,-27,85,-64,55,-101v0,-4,1,-6,5,-6xm55,-17v30,0,85,-45,84,-72v0,-9,-14,-22,-40,-36v-26,27,-60,52,-72,90v0,12,9,18,28,18",w:171},9:{d:"6,-49v6,-51,45,-113,89,-127v25,3,76,8,65,46v-6,66,-83,225,-134,235v-9,2,-30,-7,-39,-21v1,-11,27,2,33,-4v46,-20,112,-148,115,-213v1,-26,-26,-37,-44,-20v-24,21,-56,65,-60,100v-1,9,2,13,10,13v25,-3,38,-19,61,-30v2,0,4,1,4,3v-25,29,-45,65,-80,37v-10,-3,-21,-5,-20,-19",w:163},":":{d:"40,-110v2,0,18,2,16,9v-3,9,-11,47,-35,30v10,-15,9,-33,19,-39xm15,-38v2,0,19,2,17,9v-2,8,-11,48,-35,30v7,-8,9,-30,18,-39",w:72},";":{d:"40,-110v2,0,18,2,16,9v-3,9,-11,47,-35,30v10,-15,9,-33,19,-39xm43,-40v-6,21,-23,46,-28,68v3,6,-9,11,-15,9v-6,-21,13,-84,43,-77",w:72},"<":{d:"18,-103v20,-7,59,-14,70,-28r8,15v-9,12,-31,15,-51,23v8,18,34,33,40,52v-4,3,-16,8,-18,-3v-1,-5,-23,-34,-43,-47v-4,-1,-6,-8,-6,-12",w:106},"=":{d:"31,-107v18,-17,84,8,109,-8v7,5,0,24,-13,20v-33,-2,-74,-7,-96,2v-4,-3,-1,-5,0,-14xm31,-76v24,1,82,11,102,-2v7,5,-2,24,-13,21v-33,-1,-75,-8,-96,2v-4,-3,-1,-22,7,-21",w:152},">":{d:"31,-120v-9,-9,-1,-12,8,-11v11,9,20,37,48,53v4,1,12,13,3,14v-21,3,-57,13,-66,26v-2,0,-4,-1,-6,-6v-9,-25,29,-21,49,-32v-6,-15,-29,-31,-36,-44",w:106},"?":{d:"46,-148v-13,-7,-28,-23,-14,-35v34,-30,55,-49,92,-57v7,0,13,5,21,15v10,2,26,8,26,17v-5,33,-55,97,-80,122v8,-1,21,-13,25,-2v-16,13,-41,18,-51,29v-5,-2,-21,-22,-2,-30v26,-20,77,-80,81,-114v1,-12,-5,-17,-17,-17v-35,9,-59,29,-79,57v0,5,5,14,-2,15xm69,-34v1,-1,18,7,19,14v1,3,-22,26,-30,26v0,0,-14,-4,-21,-10v-1,-2,1,-3,3,-3v7,-5,19,-19,29,-27",w:168},"@":{d:"143,-240v41,10,81,16,80,61v0,52,-42,80,-78,106v-2,-1,-12,-6,-9,-12v4,-22,8,-39,13,-52v-13,19,-40,56,-61,65v-5,-3,-16,-9,-15,-17v5,-30,25,-70,60,-89v2,0,12,6,18,14v-1,6,-15,-3,-18,2v-16,13,-50,55,-43,79v28,-17,54,-59,68,-88v5,3,14,8,12,14v-6,18,-12,40,-17,67v43,-14,71,-107,20,-131v-6,-3,-13,-4,-21,-4v-45,0,-105,100,-107,161v-12,39,45,37,74,29v25,-7,49,-31,63,-50v2,-1,2,0,2,2v-11,46,-70,86,-122,60v-21,-1,-36,-16,-35,-41v2,-81,51,-162,116,-176",w:213},A:{d:"229,-239v-18,20,-34,141,-32,186v1,30,4,39,22,31v8,11,-21,21,-34,27v-11,0,-15,-29,-12,-87v-28,2,-55,3,-80,6r-35,43v17,-6,17,10,22,22v-1,8,-9,3,-15,3v-8,-3,-38,13,-47,21v-9,-4,-26,-18,-11,-27v11,-7,48,-38,55,-48v-5,-30,0,-31,28,-33v29,-35,52,-70,70,-104v-24,19,-104,13,-98,60v1,4,-1,6,-4,6v-26,-29,-21,-59,28,-64v36,-3,72,-8,86,-33v3,-1,14,8,15,14v-15,33,-58,95,-78,120v28,0,49,-1,65,-2v2,-26,14,-82,19,-115v2,-14,21,-32,36,-26",w:230},B:{d:"75,-24v15,-22,28,16,57,12v31,-4,62,0,68,-23v-2,-29,-58,-58,-77,-69v-27,-3,-19,-7,-2,-21v8,-6,16,1,23,4v33,-2,58,-49,58,-84v0,-30,-56,-4,-72,0v-16,53,-49,164,-77,198v0,1,-22,9,-24,3v8,-23,11,-39,13,-55v0,0,6,-3,15,-6v3,-1,5,1,6,5v16,-31,39,-99,47,-136v-40,22,-75,26,-66,74v0,2,0,3,-2,3v-16,-14,-33,-31,-18,-47v16,-17,65,-48,91,-57v3,-12,-3,-17,4,-20v5,1,14,13,12,14v44,-11,63,-22,80,10v9,0,12,5,12,14v0,43,-24,83,-66,92v39,28,83,44,50,90v8,21,-21,28,-78,28v-25,0,-76,3,-54,-29",w:232},C:{d:"187,-214v-6,30,-13,62,-31,73v-8,-1,-20,-7,-18,-11v14,-13,19,-36,22,-59v-6,-6,-12,-9,-18,-9v-52,15,-101,111,-101,176v0,44,51,31,78,9v17,-14,34,-21,40,-42v0,-3,2,-4,4,-4v16,21,10,36,-10,49v-33,21,-47,37,-79,37v-10,0,-17,-4,-22,-10v-58,-21,-32,-80,-12,-131v16,-40,56,-96,91,-106v15,2,15,5,31,18v1,-5,2,-7,5,-7v3,0,21,10,20,17",w:181},D:{d:"200,-234v12,-4,47,21,43,45v-8,54,-42,124,-69,162v-32,44,-50,36,-89,5v7,-13,25,9,39,5v35,-1,96,-136,96,-180v0,-43,-66,-20,-92,-1v-21,49,-48,139,-60,194v-1,6,-3,9,-7,9v-29,-2,-24,-40,-12,-60v2,0,5,3,12,8v16,-54,31,-101,45,-140v-29,22,-55,32,-65,61v-3,7,16,25,4,27v-26,-22,-39,-40,-13,-61v20,-18,48,-37,86,-59v12,-24,9,-29,27,-13v19,-8,35,-20,55,-2",w:230},E:{d:"228,-223v14,10,3,38,-18,30v-21,-8,-47,-10,-75,-15v-8,32,-13,57,-17,73v12,5,85,-23,82,17v0,4,-4,6,-13,8v-20,6,-15,-6,-27,-7v-26,0,-42,1,-48,2v-12,30,-14,68,-40,83v32,-3,55,1,110,5v8,1,8,-20,16,-7v7,12,5,34,-12,36v-37,-12,-88,-16,-136,-11v-10,9,-17,13,-19,13v-6,-9,-13,-30,1,-32v5,-1,14,-3,30,-4v12,-23,22,-45,29,-67v-6,-10,-16,-34,11,-33r20,-79v-36,-6,-71,-14,-73,22v-3,7,9,28,1,33v-18,-26,-24,-84,22,-84v12,0,31,2,56,7v8,-5,12,-11,15,-3v0,2,0,3,-1,6v5,1,27,6,69,16v8,2,12,-6,17,-9",w:217},F:{d:"147,-203v-56,4,-135,19,-91,78v0,6,-7,4,-10,1v-23,-31,-40,-72,13,-85v32,-9,65,-14,98,-17v8,-18,8,-14,22,-3v3,0,13,-2,29,-4v7,-5,27,-21,38,-6v3,14,10,26,-15,26v-18,0,-41,6,-67,8v-7,15,-17,44,-30,90v28,3,82,-20,84,17v0,4,-5,5,-14,8v-18,6,-13,-6,-26,-6v-26,0,-42,0,-50,1v-4,11,-11,40,-22,87v-5,17,-7,16,-24,10v-12,-9,0,-34,2,-48v1,-5,6,-8,14,-6v7,-11,12,-35,3,-50v1,-4,6,-8,17,-10v1,-2,10,-32,29,-91",w:216},G:{d:"190,-128v3,-2,44,12,21,18v-19,5,-15,6,-21,28v-11,45,-21,83,-34,115v-13,30,-32,13,-57,-6v10,-9,29,9,36,-12v12,-18,24,-52,38,-102v-21,27,-72,72,-107,73v-24,-6,-48,-20,-48,-48v0,-73,72,-159,131,-180v6,0,15,4,27,13v2,-16,15,-7,22,-1v1,17,-6,40,-11,56v-3,10,-24,5,-27,-2v10,-7,11,-24,13,-39v0,-5,-2,-7,-8,-7v-62,15,-116,96,-125,163v9,46,45,31,81,-1v18,-16,36,-31,49,-47v-42,2,-51,12,-60,-15v9,-1,70,8,80,-6",w:217},H:{d:"205,-107v20,-51,41,-181,101,-124v0,2,-3,4,-8,4v-31,-2,-31,22,-48,58v-16,34,-26,79,-38,132v6,-7,12,-32,21,-24r-25,66v-3,-1,-20,-3,-20,-20v0,-14,5,-39,13,-75v-44,-3,-77,-3,-99,1v-6,18,-33,77,-42,91v-5,16,-32,2,-31,-4v0,-15,16,-22,13,-43v0,-4,1,-5,3,-5v3,-1,14,11,13,15v7,-8,13,-20,19,-38v-11,-25,-18,-34,16,-36v9,-19,34,-86,38,-106v-23,19,-106,18,-86,65v-10,6,-12,-9,-17,-19v-24,-63,100,-31,113,-74v24,10,12,27,-4,68r-27,67v32,3,63,3,95,1",w:252},I:{d:"59,-113v-68,-23,3,-107,33,-121v27,0,73,1,62,54v-14,65,-58,253,-136,166v2,-16,26,6,34,2v37,-2,81,-142,81,-191v0,-14,-9,-18,-24,-17v-30,9,-81,71,-45,103v0,2,-1,4,-5,4",w:149},J:{d:"113,-219v-31,8,-84,68,-49,101v-15,10,-39,-22,-35,-28v7,-37,40,-78,73,-89v22,6,60,3,58,42v-3,55,-16,96,-39,151v-33,81,-59,111,-109,56v6,-14,28,13,35,7v39,-4,90,-168,90,-222v0,-16,-7,-18,-24,-18",w:156},K:{d:"205,-214v15,-8,38,-50,57,-17v-18,31,-88,97,-114,117v26,33,50,86,88,97v5,3,18,-13,22,-3v-5,10,-17,24,-33,32v-33,-10,-77,-92,-98,-109v-11,6,-15,-1,-16,-11v-1,-14,16,-19,27,-15v20,-14,67,-61,78,-80v-7,-4,-11,-8,-11,-11xm157,-230v-28,63,-75,149,-78,232v0,2,-1,3,-3,3v-7,-2,-29,-13,-19,-26v17,-60,42,-127,66,-184v-41,12,-67,17,-80,42v-2,1,10,25,0,26v-11,-5,-16,-22,-19,-39v5,-35,86,-30,121,-63v3,0,12,6,12,9",w:264},L:{d:"179,-233v16,0,20,-1,20,18v0,18,-3,38,-11,61v-2,6,-5,9,-9,9v-1,0,-21,-1,-18,-6v9,-10,15,-46,15,-64v0,-13,-14,-13,-22,-6v-44,42,-61,101,-90,184v-3,8,-7,12,-13,14v34,-1,71,6,108,5v2,1,5,-13,9,-13v18,15,12,39,-6,43v-39,-10,-90,-20,-137,-11v-1,1,-10,17,-15,14v-18,-21,-13,-39,28,-38v20,-70,41,-124,63,-165v19,-35,36,-53,49,-55v4,-1,13,2,29,10",w:191},M:{d:"36,-192v36,-80,65,-59,113,13v10,-18,7,-38,13,-51v25,11,14,28,-2,70v21,40,36,77,47,110v41,-69,80,-121,112,-161v8,-10,11,-30,24,-34v5,0,22,7,31,20v-11,6,-20,0,-29,19v-21,45,-38,99,-45,165v4,-6,6,-17,16,-24v4,0,4,5,2,9v-5,12,-9,30,-14,53v-3,14,-14,6,-25,-2v-7,-5,-9,-5,-7,-17v5,-34,23,-129,33,-150v-26,32,-70,100,-91,142v10,21,-4,32,-16,40v-4,-13,-21,-20,-9,-35v-8,-28,-21,-62,-41,-102v-13,32,-25,61,-38,87v10,13,21,21,3,24v-12,2,-23,8,-31,19v-1,4,-2,5,-5,5v-3,1,-30,-12,-19,-21v8,-7,17,-13,27,-19v22,-36,39,-75,53,-115v-17,-35,-33,-58,-63,-69v-17,-1,-25,32,-39,24",w:335},N:{d:"257,-230v10,-13,19,-3,25,8v-1,10,-17,23,-24,32v-13,46,-47,131,-38,178v1,7,-19,27,-26,11v-2,-51,-59,-132,-78,-167v-8,27,-33,89,-47,123v3,-1,8,5,15,18v2,15,-35,-1,-35,24v-6,17,-35,-3,-32,-8v0,-6,10,-15,28,-26v14,-22,50,-118,60,-147v-11,-16,-17,-26,-34,-30v-7,-3,-23,19,-31,9v25,-32,47,-54,73,-11v4,-8,0,-14,4,-18v13,1,16,24,7,36v24,32,68,107,81,146v4,-27,14,-71,30,-132v-3,-2,-13,-8,-14,-14v13,-3,17,-7,36,-32",w:251},O:{d:"149,-224v16,-18,34,-37,54,-15v27,0,25,13,22,38v-11,74,-62,234,-149,200v-35,-14,-54,-17,-54,-56v-1,-56,43,-149,75,-176v20,-17,31,-5,52,9xm125,-223v-44,18,-97,137,-72,194v40,40,80,9,110,-54v21,-44,36,-89,39,-133v1,-9,-2,-13,-7,-13v-31,12,-51,39,-85,63v-2,0,-3,0,-3,-2v8,-19,22,-34,34,-48v-6,-5,-11,-7,-16,-7",w:209},P:{d:"61,5v-5,1,-28,-16,-13,-21v29,-66,50,-126,64,-181v-52,28,-76,35,-61,75v0,3,-1,5,-4,5v-4,0,-11,-11,-21,-31v-9,-41,63,-59,92,-76v3,-20,6,-29,23,-8v36,-11,52,-15,67,12v50,31,-22,107,-41,128v-18,13,-32,7,-51,-6v7,-5,29,-3,34,-10v23,-17,53,-57,55,-90v2,-34,-51,-13,-74,-6v-20,71,-38,127,-54,169v1,1,13,-10,18,-9v5,1,24,25,8,26v-15,1,-29,19,-42,23",w:203},Q:{d:"227,-221v-4,68,-40,158,-73,196v25,6,44,-2,59,-14v5,13,-16,49,-41,40v-2,0,-14,-3,-38,-8v-28,27,-79,1,-98,-10v-44,-60,25,-180,61,-216v19,-18,31,-5,52,9v16,-18,34,-37,54,-15v18,2,22,2,24,18xm83,-57v15,7,25,19,46,25v34,-34,69,-121,73,-184v1,-9,-2,-13,-7,-13v-31,12,-51,39,-85,63v-2,0,-3,0,-3,-2v8,-19,22,-34,34,-48v-6,-5,-11,-7,-16,-7v-44,18,-98,138,-72,194v6,13,36,28,55,14v-11,-1,-44,-19,-25,-42",w:217},R:{d:"292,13v-13,25,-25,44,-48,24v-42,-38,-85,-85,-128,-144v-10,26,-30,97,-49,114v-6,-3,-19,-14,-17,-17v6,-15,9,-33,16,-48v2,0,5,3,10,11v9,-19,18,-43,29,-74v-10,-19,-17,-20,8,-24v5,-14,10,-33,16,-55v-37,14,-56,24,-77,47v-14,15,7,34,-2,48v-18,-14,-38,-49,-14,-69v25,-21,56,-39,97,-51v2,0,3,-22,7,-21v2,0,5,6,10,15v48,-9,58,-20,75,13v52,27,-17,107,-47,110v-14,1,-25,-8,-33,-16v1,-10,13,-1,20,-2v20,4,61,-50,59,-70v-3,-31,-54,-20,-80,-9v-5,23,-11,46,-19,69v29,46,102,137,143,153v8,4,19,-15,24,-4",w:254},S:{d:"229,-223v-7,27,-22,79,-50,46v9,-3,34,-40,16,-52v-11,-2,-31,16,-46,8v15,-11,51,-39,64,-14v10,4,14,4,16,12xm124,-180v-6,18,51,112,51,127v0,21,-10,38,-32,51v-6,10,-15,14,-25,14v-41,-1,-98,-47,-106,-82v-1,-7,19,-29,24,-14v-1,36,58,73,92,74v14,0,22,-9,22,-29v4,-19,-56,-113,-50,-134v1,-25,14,-38,36,-48v3,0,5,1,5,4v-6,12,-19,22,-17,37",w:196},T:{d:"212,-233v12,-10,42,-22,43,12v-13,15,-57,10,-83,16v-18,36,-53,149,-61,197v-4,21,-19,15,-29,5v4,-21,-3,-72,25,-64v2,-11,43,-131,45,-136v-40,4,-100,9,-105,43v-1,7,8,21,13,35v0,6,-7,5,-9,1v-22,-31,-40,-71,13,-85v32,-8,65,-14,98,-17v8,-18,9,-14,22,-3v3,0,12,-2,28,-4",w:204},U:{d:"272,-234v13,-14,23,-1,40,14v-8,8,-24,-2,-30,18v-25,47,-41,102,-50,164v4,-11,9,-18,17,-24v4,0,4,7,1,10v-8,17,-13,33,-16,50v-1,6,-3,10,-7,10v-6,-1,-33,-14,-23,-27v3,-25,10,-57,21,-96v-26,47,-52,80,-72,107v-22,30,-55,-11,-62,-17v-23,-56,20,-136,39,-182v-39,17,-66,19,-78,45v0,7,9,19,2,23v-22,-17,-39,-55,-4,-63v23,-6,51,-14,86,-25v14,-22,24,-12,40,4v0,2,-6,5,-17,7v-22,34,-46,117,-51,167v-2,26,21,45,38,25v51,-60,82,-129,126,-210",w:269},V:{d:"228,-218v24,5,36,-41,55,-6v2,2,2,4,2,6v-40,32,-107,153,-129,204v6,12,-8,17,-18,19v-6,0,-22,-17,-9,-24v0,-63,-19,-155,-44,-191v-13,-18,-25,0,-46,7v-3,0,-5,-1,-5,-3v13,-15,48,-56,69,-26v24,35,41,98,50,188v7,-16,74,-132,82,-147v-7,0,-15,-22,-7,-27",w:238},W:{d:"362,-178v0,1,22,19,8,22r-11,-7v-20,75,-45,128,-74,161v-3,3,-7,5,-12,5v-39,-8,-65,-18,-65,-67v0,-33,4,-67,13,-102v-33,37,-79,105,-96,151v-4,6,-30,22,-35,13v18,-45,57,-156,56,-215v-25,5,-65,27,-85,38v-16,8,-3,28,-8,37v-25,-26,-42,-40,-4,-59v14,-7,72,-26,85,-32v1,-3,1,-9,7,-9v12,2,40,18,30,42v-2,21,-22,94,-29,115v10,-16,76,-104,88,-116v7,-22,4,-30,18,-34v16,4,32,8,20,20r-12,13v-18,60,-24,97,-24,146v0,32,28,58,50,28v23,-31,56,-108,63,-153v-14,-15,-11,-63,7,-73v26,14,23,28,10,76",w:353},X:{d:"194,-207v24,2,28,-50,47,-24v4,4,5,8,5,12v-16,41,-38,44,-95,92v14,58,18,90,47,108v2,2,21,-13,25,-4v-15,17,-39,29,-47,29v-14,0,-29,-39,-45,-118v-56,48,-87,64,-103,116v3,5,3,19,-6,8v-10,-11,-20,-25,-6,-42v16,-21,53,-53,112,-98v-5,-28,-9,-54,-11,-79v-26,18,-81,30,-57,72v0,3,-2,4,-4,4v-20,-22,-35,-42,-11,-60v13,-11,57,-24,69,-33v-1,-12,33,-37,34,-10v-14,18,-7,49,0,91v31,-24,50,-41,59,-50v-11,-4,-18,-8,-13,-14",w:231},Y:{d:"242,-213v5,-26,20,-20,27,-3v0,6,-8,19,-22,39v-25,71,-44,153,-75,217v-18,21,-38,-2,-64,-21v17,-13,37,20,51,-10v19,-40,40,-88,57,-147v-22,39,-46,72,-72,99v-7,7,-13,11,-18,11v-21,-14,-45,-17,-42,-52v2,-25,13,-67,36,-124v-34,15,-60,20,-71,45v0,7,10,20,3,24v-22,-17,-41,-53,-6,-63v23,-7,51,-16,85,-28v11,-24,25,-13,40,3v0,3,-6,6,-16,8v-22,28,-46,98,-48,143v-1,26,14,32,27,19v43,-41,77,-96,108,-160",w:240},Z:{d:"191,-213v12,-11,38,-10,36,7v-1,11,-18,30,-38,19v-17,9,-42,37,-76,83v25,1,44,1,57,2v5,0,7,3,7,6v0,3,-3,5,-9,5v-23,2,-45,3,-69,6v-17,24,-30,45,-38,61v21,-1,58,6,98,11v7,1,8,-12,13,-11v20,9,11,51,-14,41v-37,-15,-74,-20,-109,-20v-8,16,-36,7,-38,-6v3,-10,13,-18,29,-15v5,-9,13,-20,23,-35v0,-13,-5,-29,-1,-39v3,-3,14,-5,32,-6v31,-44,56,-74,76,-90v-14,-2,-87,-42,-102,-6v-6,14,-15,31,-22,54v0,7,-11,11,-11,1v14,-47,10,-91,54,-98v15,-2,90,31,102,30",w:196},"[":{d:"107,-237v9,-32,24,-16,56,-19v3,0,5,2,5,5v-14,12,-33,3,-42,30r-69,209v-6,18,-4,31,20,31v4,0,5,1,5,5v0,3,-2,5,-5,5v-23,0,-35,-2,-46,1v-7,1,-7,-6,-7,-13"},"\\":{d:"98,-236r-15,218v1,18,5,20,9,28v1,10,-16,6,-24,5v-8,-1,-12,-5,-11,-14r16,-195v3,-30,-2,-39,-11,-48v7,-6,37,-15,36,6"},"]":{d:"90,-258v18,1,34,2,47,-1v7,-1,7,6,7,13v-12,12,-75,285,-103,274v-10,-4,-36,5,-41,-6v13,-13,33,-3,42,-31r69,-208v6,-18,4,-31,-20,-31v-3,0,-5,-1,-5,-5v0,-3,1,-5,4,-5"},"^":{d:"114,-170v11,19,20,58,40,66v1,4,-21,11,-23,10v-16,-8,-18,-24,-30,-47v-25,9,-41,31,-73,47v-5,-2,-10,-18,3,-18v13,-6,60,-34,68,-49v0,-5,11,-8,15,-9",w:162},_:{d:"180,65r-180,0r0,-17r180,0r0,17",w:180},"`":{d:"49,-211v24,-21,48,20,53,36v0,3,-1,4,-3,4v-15,-10,-25,-31,-43,-35v-5,0,-7,-2,-7,-5",w:107},a:{d:"115,-137v3,1,20,8,15,20v-13,29,-18,55,-22,75v6,-4,13,-22,20,-14v-13,18,-19,42,-28,60v-4,-1,-22,-7,-17,-18v5,-30,12,-55,19,-75v-19,27,-55,82,-87,94v-8,-3,-23,-13,-18,-25v9,-46,42,-108,83,-127v3,0,17,8,25,20v-4,7,-21,-7,-26,3v-23,17,-62,73,-65,108v4,9,11,3,18,-4v29,-29,69,-79,83,-117",w:140},b:{d:"28,4v-11,-6,-19,-9,-16,-25v21,-105,46,-212,96,-267v14,-16,33,10,42,19v-3,8,-16,-4,-20,-2v-7,0,-15,8,-24,22v-32,51,-55,118,-69,201v24,-41,39,-60,66,-88v17,-18,45,1,43,19v-6,48,-23,105,-60,122v-7,1,-25,-13,-34,-31v8,-7,20,13,26,9v30,-10,44,-68,47,-104v0,-11,-8,-10,-14,-5v-29,24,-67,82,-78,124v-1,4,-3,6,-5,6",w:150},c:{d:"5,-33v3,-34,24,-100,52,-111v6,8,44,-1,46,14v-2,21,-1,47,-17,48v-22,-7,2,-27,-3,-39v1,-8,-7,-8,-13,-9v-26,14,-46,61,-46,99v0,18,6,26,17,26v10,3,30,-21,49,-41v2,0,3,1,3,3v-9,19,-14,44,-39,48v-26,-1,-51,-11,-49,-38",w:105},d:{d:"184,-288v14,-15,33,8,42,19v-2,8,-16,-4,-19,-2v-7,0,-16,8,-25,22v-32,53,-55,122,-70,210v4,-3,13,-17,19,-19v3,0,4,1,1,5v-11,16,-18,33,-22,51v-7,11,-23,-1,-23,-12r13,-67v-21,27,-51,73,-81,86v-9,-2,-24,-13,-21,-25v10,-46,43,-107,83,-127v4,0,18,8,26,20v-4,7,-21,-7,-26,3v-23,16,-60,73,-63,106v1,10,9,6,17,-2v25,-27,68,-73,78,-110v16,-61,39,-125,71,-158",w:144},e:{d:"101,-54v-23,34,-52,61,-62,59v-10,-2,-37,-15,-34,-32v2,-16,7,-35,13,-54v-5,-2,-11,-7,-3,-8v2,0,4,0,6,1v15,-29,20,-51,43,-60v2,0,6,2,14,5v-3,-7,6,-6,12,-6v16,-1,1,24,7,39v0,35,-28,44,-61,34v-5,11,-20,56,-5,66v22,-3,37,-25,66,-47v2,0,4,1,4,3xm78,-128v-1,-9,-3,-8,-8,-4v-11,9,-21,26,-30,49v29,1,45,-2,38,-45",w:105},f:{d:"91,-259v20,-38,37,-25,67,-1v-8,11,-23,-10,-37,0v-12,8,-30,47,-55,118v23,5,33,0,40,7v-8,10,-32,6,-46,9v-24,70,-45,146,-50,217v-5,-1,-27,-14,-22,-22v10,-52,27,-117,52,-194v-18,4,-32,-6,-18,-12v8,-2,22,-3,24,-10v19,-55,34,-92,45,-112",w:87},g:{d:"30,-9v41,-23,71,-86,84,-138v5,1,23,9,17,23v-36,187,-82,280,-140,280v-21,0,-53,-15,-71,-41v0,-3,2,-5,5,-5v20,12,40,26,56,26v48,0,89,-71,121,-213v-27,41,-36,66,-67,82v-70,-21,-2,-140,38,-151v13,1,19,10,30,22v-7,9,-25,-9,-34,4v-19,19,-46,63,-47,98v0,9,3,13,8,13",w:139},h:{d:"116,-131v-39,22,-69,89,-90,130v-3,0,-18,-7,-15,-20v21,-103,48,-212,97,-267v14,-16,33,10,42,19v-3,8,-16,-4,-20,-2v-7,0,-15,8,-24,22v-31,50,-54,115,-69,197v23,-41,43,-73,78,-94v11,5,30,10,23,30v-2,21,-8,45,-18,75v4,-3,14,-26,24,-22v-7,20,-26,37,-36,64v-5,11,-10,5,-20,0v-2,-2,-3,-4,-1,-8v20,-58,37,-90,29,-124",w:150},i:{d:"39,-179v23,-12,26,-39,46,-13v0,7,-37,36,-46,13xm12,-114v9,-16,22,-36,42,-22v5,3,4,9,3,16v-3,16,-10,42,-22,79v3,-2,10,-13,17,-18v2,9,-28,44,-30,59v-4,10,-18,0,-22,-4v11,-22,40,-94,34,-124v-8,-1,-16,21,-22,14",w:68},j:{d:"44,-179v15,0,29,-44,46,-13v1,8,-37,36,-46,13xm7,-98v7,-11,20,-27,35,-47v5,1,23,9,17,23v-16,75,-31,132,-45,169v-42,110,-97,144,-167,68v0,-3,2,-5,5,-5v20,12,40,26,56,26v48,0,89,-71,121,-213r9,-44v-9,4,-21,35,-31,23",w:68},k:{d:"147,20v8,3,14,-13,18,-5v-7,18,-22,30,-28,29v-28,-9,-60,-72,-74,-107v-14,17,-24,38,-29,61v-1,5,-3,7,-5,7v-15,-6,-20,-7,-16,-26v20,-103,47,-213,96,-267v15,-16,32,11,43,19v-3,8,-17,-4,-21,-2v-7,0,-15,8,-24,22v-32,51,-54,118,-68,201v0,-6,20,-24,17,-40v0,-3,4,-5,12,-7v20,-27,29,-42,48,-51v5,4,30,15,23,28v-3,12,-5,28,-16,31v-5,0,-20,-6,-18,-9v6,-5,16,-20,10,-33v-16,8,-27,24,-37,43v22,59,35,94,69,106",w:139},l:{d:"28,4v-11,-6,-19,-9,-16,-25v21,-104,46,-213,96,-267v14,-16,33,10,42,19v-3,8,-16,-4,-20,-2v-7,0,-15,8,-24,22v-34,53,-56,127,-70,210v4,-3,13,-17,19,-19v3,0,3,1,0,5v-15,17,-15,42,-27,57",w:68},m:{d:"201,-41v9,-9,10,-18,19,-22v3,0,2,4,1,7v-8,10,-21,38,-37,64v-4,2,-22,-5,-20,-8v14,-32,33,-87,34,-125v0,-4,-2,-6,-5,-6v-35,20,-74,93,-88,134v-8,-1,-24,-8,-16,-17v15,-38,23,-76,23,-112v0,-4,-2,-5,-4,-5v-36,22,-66,95,-86,135v-1,0,-26,-10,-13,-18v9,-16,28,-92,25,-114r-23,20v-3,-14,17,-28,25,-38v3,5,22,6,20,19v-3,23,-7,43,-13,63v25,-40,36,-69,65,-83v7,3,23,7,23,20v0,24,-2,45,-8,64v27,-38,40,-69,70,-84v9,3,27,8,26,24v-2,28,-7,56,-18,82",w:231},n:{d:"39,-147v37,16,15,39,1,89v14,-23,49,-80,76,-87v39,5,11,70,7,96v5,-6,7,-12,16,-19v4,17,-27,41,-32,68v-3,11,-20,1,-22,-3v11,-28,38,-92,27,-127v-36,28,-61,69,-84,120v-6,14,-17,8,-26,2v12,-29,37,-89,34,-126v-8,5,-15,20,-24,17v9,-10,15,-23,27,-30",w:151},o:{d:"76,-133v1,-1,17,-9,24,-9v8,-1,22,18,20,31v-5,47,-21,108,-64,116v-25,-1,-54,-10,-51,-38v4,-34,24,-102,52,-113v4,0,10,5,19,13xm43,-5v39,-9,55,-69,58,-116v-6,-22,-34,14,-44,3v-14,18,-30,55,-31,87v0,18,6,26,17,26",w:125},p:{d:"110,-145v14,5,35,17,32,37v-6,48,-34,153,-85,95v1,-6,11,-1,16,-1v34,-5,48,-69,48,-104v0,-17,-13,-12,-21,-3v-68,67,-98,144,-102,271v0,6,-3,9,-5,9v-4,0,-23,-13,-18,-24v3,-80,54,-250,85,-304v15,-26,25,-13,48,2v-12,6,-24,-1,-34,21v-10,13,-28,59,-33,78v20,-30,38,-60,69,-77",w:148},q:{d:"99,-118v-48,-20,-78,56,-78,97v0,8,2,13,8,13v37,-23,70,-80,80,-129v0,-3,2,-5,4,-5v13,5,25,16,8,38v-12,26,-35,112,-42,148v8,-13,9,-25,21,-29v3,0,4,0,4,3v-24,41,-32,93,-40,143v-9,-6,-30,-18,-18,-49v5,-35,27,-129,37,-159v-13,22,-26,42,-49,52v-14,-6,-34,-9,-33,-29v5,-43,31,-107,69,-118v5,0,24,9,32,22v0,2,-1,2,-3,2",w:128},r:{d:"98,-147v5,4,22,3,20,15v-2,18,-1,66,-22,43v-9,-10,8,-30,2,-39v-29,29,-48,73,-62,113v-8,23,-5,23,-24,13v-4,-2,-5,-6,-4,-12v9,-41,19,-74,30,-102v-13,10,-14,24,-23,18v9,-10,21,-54,46,-38v8,13,-6,16,-13,44v-5,20,-11,36,-14,47v19,-39,35,-77,64,-102",w:113},s:{d:"85,-148v14,6,2,48,-16,45v-5,-13,0,-47,16,-45xm44,-116v-2,31,46,92,-5,105v-6,23,-30,14,-54,11v-3,0,-4,-2,-5,-5v10,-16,65,3,62,-31v2,-10,-22,-65,-21,-76v2,-15,15,-24,41,-30v3,-1,3,1,3,3v-8,8,-23,14,-21,23",w:87},t:{d:"74,-221v9,-18,28,-8,38,3v-31,5,-31,37,-49,77v6,8,34,-6,39,6v-6,11,-14,3,-44,8v-13,46,-30,81,-22,114v2,3,18,-18,34,-25v1,17,-24,36,-37,44v-6,-2,-27,-10,-21,-20v4,-30,12,-67,25,-111v-8,-1,-27,-2,-17,-12v5,-2,19,-5,25,-9v13,-39,23,-63,29,-75",w:84},u:{d:"122,-138v7,-6,27,5,20,11v-16,29,-27,63,-35,102v5,-8,5,-15,14,-25v4,0,3,4,2,6v-16,22,-5,61,-34,41v-9,-25,10,-60,14,-80v-23,37,-43,64,-57,81v-10,12,-36,3,-34,-15v4,-34,9,-61,18,-83v-2,2,-7,8,-12,9v7,-18,15,-30,23,-44v5,-9,17,-2,23,5v-14,19,-40,89,-30,120v30,-18,69,-99,88,-128",w:142},v:{d:"113,-151v6,1,24,9,15,24v-4,14,-16,23,-2,36v0,5,-10,7,-13,1v-16,28,-32,85,-60,95v-6,-2,-13,-6,-19,-2v-23,-10,-14,-91,-8,-113v-3,-1,-14,23,-22,14v10,-18,12,-15,29,-41v8,-12,21,-4,28,6v-22,24,-32,93,-12,122v22,-16,41,-63,50,-91v-6,-15,1,-43,14,-51",w:124},w:{d:"156,-135v4,-19,27,-8,29,5v1,14,-18,32,-1,39v5,3,4,11,-2,10v-1,1,-10,-5,-12,-6v-15,41,-29,68,-38,83v-10,16,-35,6,-38,-9v-5,-21,-8,-39,-8,-52v-11,13,-46,60,-59,69v-2,0,-16,-6,-18,-12v19,-19,23,-78,21,-114v-2,-2,-17,30,-24,18v7,-13,23,-46,47,-35v3,39,-3,80,-12,109v35,-31,41,-62,54,-106v5,-16,22,-5,28,4v-4,20,-20,33,-18,59v1,18,1,49,12,62v19,-24,37,-72,41,-86v-12,-8,-5,-24,-2,-38",w:185},x:{d:"115,-166v47,37,-35,73,-49,98v6,12,10,72,34,48v5,0,5,5,2,7v-15,17,-29,28,-39,7v-6,-13,-9,-29,-14,-47v-44,47,-67,80,-68,103v-3,8,9,20,2,22v-11,-9,-17,-15,-17,-32v8,-34,51,-77,79,-105v-12,-37,-9,-66,-36,-53v-2,-13,26,-21,32,-25v13,10,8,23,22,61v27,-28,44,-41,52,-69v1,-5,-5,-13,0,-15",w:118},y:{d:"35,-19v19,-13,73,-89,79,-114v4,-18,7,-13,19,-4v4,3,5,7,3,15v-16,75,-31,132,-45,169v-42,110,-97,144,-167,68v0,-4,2,-5,5,-5v56,44,95,31,131,-43v19,-39,39,-101,51,-165v-23,34,-54,87,-88,104v-7,-4,-12,-10,-16,-17v15,-17,29,-82,25,-116v-3,1,-22,24,-24,15v5,-4,20,-42,34,-32v12,-2,15,-5,16,7v1,16,-17,107,-23,118",w:146},z:{d:"100,-135v8,-8,14,-8,18,0v-1,8,-6,30,-22,20v-10,9,-20,21,-30,35v9,0,38,-4,26,5v-11,3,-24,7,-40,12v-14,18,-23,30,-27,39v6,0,49,6,57,5v9,2,15,-8,21,-12v4,9,-11,38,-27,37v-14,0,-49,-15,-66,-12v-6,18,-21,10,-21,-4v0,-10,10,-15,20,-15v12,-18,26,-22,19,-45v-3,-9,8,-8,23,-9r31,-38v-10,-3,-21,-4,-32,-4v-22,0,-23,15,-35,24v-2,0,-2,-3,-2,-6v10,-20,7,-40,32,-41v11,0,29,3,55,9",w:115},"{":{d:"45,-125v81,-2,11,-143,118,-127v3,0,5,1,5,4v-11,14,-38,-1,-42,27v-10,24,-19,99,-61,107v38,29,-11,77,-11,118v0,10,8,15,23,15v4,0,5,1,5,5v0,3,-2,5,-5,5v-27,-1,-44,-4,-46,-25v4,-31,19,-46,31,-96v6,-11,-28,-21,-17,-33"},"|":{d:"80,-204v1,-21,-4,-47,-13,-54v7,-9,36,-16,35,7r-3,214v0,40,3,49,13,60v0,9,-15,7,-24,6v-7,0,-10,-6,-10,-17"},"}":{d:"137,-229v0,32,-19,47,-31,97v-6,10,32,21,17,32v-80,3,-12,143,-118,128v-3,0,-4,-2,-4,-5v13,-13,36,-1,41,-27v11,-23,20,-97,61,-107v-38,-29,10,-76,11,-117v4,-16,-23,-9,-27,-21v0,-3,1,-4,4,-4v27,1,46,2,46,24"},"~":{d:"148,-149v22,9,1,25,-11,36v-24,37,-40,-21,-68,-24v-4,-1,-12,5,-26,20v0,4,-2,6,-4,6v-21,-10,-1,-24,10,-37v29,-35,37,20,68,25v5,3,21,-14,31,-26",w:162},"":{w:64}}}),Cufon.registerFont({w:180,face:{"font-family":"Rage","font-weight":400,"font-style":"italic","font-stretch":"normal","units-per-em":"360","panose-1":"3 7 5 2 4 5 7 7 3 4",ascent:"288",descent:"-72","cap-height":"5",bbox:"-57.3869 -262 350.146 147","underline-thickness":"20.918","underline-position":"-27.7734","unicode-range":"U+0020-U+007E"},glyphs:{" ":{w:90},"!":{d:"143,-216v-27,43,-52,89,-66,145v-12,6,-28,-21,-17,-33r42,-94v9,-5,11,-34,25,-39v4,-1,17,18,16,21xm62,-16v-29,0,-24,-41,-2,-42v19,3,19,33,2,42",w:107},'"':{d:"110,-229v27,15,0,53,-12,66v-14,-4,-20,-29,-5,-37v3,-6,8,-28,17,-29xm169,-210v-6,21,-19,31,-23,47v-18,0,-23,-29,-8,-37v4,-6,6,-26,17,-29v3,0,15,15,14,19",w:152},"#":{d:"27,-20v10,-26,25,-48,37,-72v-5,-6,-26,3,-24,-12v2,-12,18,-6,28,-6v13,0,12,-16,20,-24v-6,-6,-27,4,-26,-12v1,-13,32,-2,36,-9v12,-25,27,-47,37,-74v7,-8,18,-11,21,3v-8,27,-25,49,-38,72v58,15,45,-63,83,-83v20,17,-10,44,-17,58v0,9,-8,14,-10,22v9,3,22,-2,25,9v-1,16,-22,13,-36,12v-3,8,-22,23,1,22v4,0,12,3,13,7v1,24,-39,1,-43,23v-12,20,-21,42,-35,60v0,3,-5,12,-9,11v-23,-6,4,-30,8,-44v3,-12,14,-23,19,-34v-8,-7,-33,-3,-35,4v-10,24,-23,41,-35,63v0,9,-18,16,-20,4xm128,-111v1,-8,10,-16,12,-22v-20,-11,-47,4,-40,22v10,-1,20,-1,28,0"},$:{d:"33,-22v-17,-3,-32,-13,-36,-28v15,2,40,14,49,2r47,-97v-29,2,-38,-44,-15,-54v15,-20,59,-15,66,-42v5,-4,10,-27,15,-10v-1,9,-4,16,-13,21v22,9,26,-20,35,-32v22,2,-11,32,3,34v16,3,14,29,5,35v-14,-4,7,-22,-10,-22v-24,0,-19,25,-29,43v44,7,42,84,13,105v-20,15,-43,29,-71,36v-11,-2,-9,29,-21,14v4,-11,-9,-9,-17,-7v-6,1,-6,16,-14,16v-3,-2,-11,-7,-7,-14xm130,-195r-10,24v6,-2,17,3,18,-4v4,-14,17,-24,17,-37v-8,5,-22,0,-25,17xm119,-195v-6,-5,-37,11,-38,23v-1,3,7,4,15,4v15,1,16,-17,23,-27xm111,-146v-19,25,-29,63,-42,94v34,-4,35,-68,56,-93xm100,-62v4,7,12,-8,21,-6v24,-13,48,-29,52,-63v-1,-10,-28,-18,-38,-11v-13,25,-20,56,-35,80"},"%":{d:"69,9v-55,-34,25,-107,49,-140v11,-24,34,-35,45,-59v10,-8,21,-19,29,-28v-7,-9,-10,10,-22,10v-21,20,-44,40,-68,55v-3,-3,-7,-4,-7,3v-13,10,-38,13,-33,-14v20,-23,45,-49,78,-48v0,2,-1,4,1,5v22,-18,59,-24,83,-37v22,33,-35,52,-51,77v-13,12,-24,23,-35,40v-22,31,-55,60,-62,104v8,14,8,30,-7,32xm113,-193v-13,1,-24,21,-34,29v23,-10,33,-24,54,-35v-4,-4,-20,1,-20,6xm98,-50v12,-22,26,-40,52,-51v3,2,-2,7,-2,10v12,-7,16,7,17,18v-10,22,-27,37,-49,47v-13,0,-15,-13,-18,-24xm114,-40v12,-6,22,-16,27,-30v-10,0,-6,-13,0,-16v-8,-4,-8,17,-16,15v-3,9,-16,20,-11,31",w:177},"&":{d:"143,-53v-12,14,-31,35,-52,33v-29,13,-66,-3,-68,-31v-3,-39,25,-49,44,-67v10,-9,35,-14,46,-24v-38,-25,15,-66,35,-78v18,-11,63,-33,65,8v1,14,-21,31,-25,15v-3,-10,25,-20,5,-23v-32,7,-52,31,-64,58v25,12,76,-4,85,-29v7,-18,18,-8,18,6v1,6,-11,9,-9,16v9,-4,6,-5,17,-2v16,-9,38,-6,38,14v-18,10,-49,2,-68,9v-16,22,-29,47,-47,67v3,8,-15,24,-3,30v26,3,33,-16,54,-21v7,-6,19,-26,26,-13v-2,20,-21,23,-27,38v-16,4,-53,33,-66,4v0,0,-5,-9,-4,-10xm55,-67v-8,44,42,25,62,13v18,-12,31,-31,40,-53v10,1,-3,-12,10,-15v-1,-6,13,-15,11,-21v-43,6,-74,19,-97,44v-13,5,-19,21,-26,32",w:257},"'":{d:"110,-229v27,15,0,53,-12,66v-14,-4,-20,-29,-5,-37v3,-6,8,-28,17,-29",w:107},"(":{d:"78,-44v-17,-59,15,-113,39,-151v26,-19,45,-48,75,-60v3,0,5,2,5,5v1,6,-10,2,-8,9v-45,27,-67,81,-90,130v-3,28,-6,61,-1,84v-1,4,27,30,16,34v-18,-6,-28,-33,-38,-49",w:160},")":{d:"116,-207v5,-15,-20,-31,-16,-43v71,45,39,188,-11,223v-14,17,-34,25,-51,35v-3,-15,28,-27,33,-43v20,-23,33,-62,45,-95v2,-20,12,-54,0,-77",w:160},"*":{d:"107,-204v18,-4,-13,-20,-1,-29v9,6,19,21,23,4v-2,-12,14,-23,15,-3v0,2,-8,9,-5,13v6,-3,15,-13,19,-4v-3,8,-16,11,-21,18v1,6,22,24,7,30v-7,2,-10,-12,-16,-12v-2,3,-5,29,-15,16v-7,-8,5,-18,0,-24v-5,-4,-22,19,-27,6v0,-11,15,-9,21,-15",w:139},"+":{d:"105,-65v-30,-5,-4,-41,-2,-55v-10,4,-49,7,-48,-11v10,-19,37,1,56,-9v10,-16,15,-43,29,-55v32,8,-10,41,0,57v19,-9,64,-1,40,18v-17,13,-56,-14,-59,20v-2,14,-7,28,-16,35"},",":{d:"27,24v-20,-2,0,-15,0,-23v-14,-13,-3,-34,13,-37v6,2,24,18,12,25v-4,14,-15,27,-25,35",w:88},"-":{d:"1,-53v-9,-9,4,-16,15,-16v25,0,51,-4,69,2v-3,33,-37,11,-59,18v-9,-3,-15,0,-25,-4",w:87},".":{d:"18,-18v2,-18,24,-28,30,-6v13,6,-2,28,-11,26v-8,-1,-15,-14,-19,-20",w:88},"/":{d:"30,-16v21,-71,69,-114,113,-167v7,-18,28,-25,37,-42v6,-11,28,-29,33,-9v-5,33,-42,43,-57,67v-14,12,-26,22,-35,40v-14,10,-22,31,-35,42v-7,22,-37,43,-23,76v2,14,-5,21,-17,17v-15,-1,-14,-11,-16,-24",w:163},0:{d:"193,-121v-21,47,-55,99,-121,100v-29,-9,-52,-50,-29,-82v-3,-14,12,-15,9,-24v0,-6,7,-6,10,-10v-1,0,-4,2,-3,-1v24,-42,56,-69,95,-94v19,5,-3,8,-4,17v50,-18,68,57,42,89xm149,-215v-2,-3,-7,-2,-4,1v2,0,4,0,4,-1xm126,-72v28,-30,59,-64,59,-114v0,-30,-38,-7,-51,1v-2,1,-1,-6,-4,-5v-17,12,-21,21,-33,37v-20,26,-50,79,-41,114v22,5,46,-12,59,-22v2,-6,6,-9,11,-11",w:186},1:{d:"62,-22v-5,7,-14,0,-18,-9v-16,-53,25,-92,41,-136v3,-9,14,-17,15,-25v-7,0,-11,-3,-11,-9v10,-12,25,-22,42,-28v31,19,-3,28,-8,48v-27,43,-56,96,-61,159",w:94},2:{d:"101,-213v36,-6,93,-14,98,30v-4,26,-37,27,-52,43v-19,6,-34,23,-53,30v-11,14,-34,23,-42,39v-6,5,-12,12,-2,16v33,-5,65,-12,100,-14v20,-1,23,30,12,34v-37,-17,-76,1,-112,4v-10,-1,-35,5,-35,-23v0,-42,40,-54,66,-76v27,-23,65,-35,98,-53v11,-6,2,-14,-7,-15v-31,-3,-49,3,-68,14v-9,-3,-17,8,-17,-13v0,-5,8,-17,14,-16",w:162},3:{d:"176,-208v34,25,-12,42,-34,49v-2,-2,-5,0,-6,2v16,7,44,18,36,43v8,36,-40,53,-66,69v-8,-8,-29,17,-40,8v-7,8,-38,15,-48,5v-3,-7,-17,-23,-5,-28v46,1,86,-16,119,-28v5,-9,36,-18,31,-37v-16,-33,-87,17,-96,-29v0,-6,1,-6,6,-6v32,-9,60,-19,87,-33v-15,-5,-28,6,-38,-1v-13,8,-32,0,-50,8v-9,-3,-25,-22,-8,-25v33,2,73,-3,102,3v3,-3,4,0,10,0",w:166},4:{d:"190,-124v9,16,-23,14,-32,23v-5,-4,-15,3,-22,0v-8,12,-14,25,-18,41v-15,4,0,80,-31,44v-17,-8,-11,-37,3,-44v-8,-16,24,-31,14,-48v-20,5,-28,-13,-46,-5v-14,2,-44,-15,-24,-26v18,-10,19,-28,38,-35v17,-15,29,-33,49,-44v-1,-8,0,-9,7,-8v7,12,-14,27,-18,39v-7,-5,-1,11,-10,9v-10,16,-26,27,-35,45v11,5,31,11,46,11v9,-4,14,-17,18,-26v11,-10,14,-29,24,-41v9,-7,6,-19,17,-23v-3,-5,3,-23,7,-24v29,16,-6,60,-17,79v-2,0,-3,0,-3,1v1,13,-15,17,-11,31v19,-4,30,-13,44,1",w:170},5:{d:"84,-34v-17,19,-46,14,-65,13v-3,0,-24,-24,-16,-29v59,20,91,-22,128,-42v8,-14,34,-53,-2,-55v-15,-1,-29,10,-36,5v-8,7,-25,17,-34,20v-3,-1,-27,-23,-10,-27v1,-5,7,-6,10,-9v10,-20,27,-35,35,-56v7,-7,9,-8,11,0v1,8,6,-2,13,-1v26,-11,57,-12,83,-22v9,-1,5,14,7,22v0,6,-7,9,-12,5r-88,24v-10,-6,-13,9,-22,7v4,8,-9,11,-5,19v17,-6,34,-8,52,-4v25,4,42,48,26,67v1,11,-10,17,-14,25v-6,-5,-8,13,-13,11v-5,4,-13,18,-19,12v-6,5,-19,16,-29,15",w:152},6:{d:"78,-26v-36,7,-62,-40,-42,-73v12,-19,22,-29,34,-50v2,-5,12,-3,11,-11v28,-31,56,-61,100,-76v5,3,11,7,11,14v0,12,-21,7,-28,17v-11,1,-20,20,-31,23v-17,9,-24,32,-39,43v-7,-5,-5,9,-11,13v35,-20,108,-29,94,30v0,3,-2,4,-6,5v-22,31,-46,56,-85,67v-2,0,-5,-1,-8,-2xm51,-43v52,-1,78,-40,106,-68v3,-9,5,-15,-6,-12v-12,-7,-27,8,-36,3v-7,8,-15,3,-22,12v-7,-4,-9,11,-16,5v-15,16,-27,27,-33,51v-1,5,4,10,7,9",w:172},7:{d:"66,-30v-3,-3,-24,-17,-17,-28v8,-46,59,-84,89,-114v10,-10,34,-22,43,-35v-44,-11,-69,4,-108,7v-20,1,-16,-7,-20,-18v6,-31,53,8,86,-12v27,3,65,-4,62,30v-2,19,-22,18,-28,33v-27,16,-48,38,-67,62v-17,10,-29,41,-39,61v1,4,4,13,-1,14",w:150},8:{d:"88,-18v-61,17,-78,-65,-36,-95v16,-20,43,-39,66,-55v-15,-11,-54,-1,-51,-31v13,-18,46,-34,70,-33v19,-17,84,2,52,22v-5,-3,-10,-17,-18,-11v-13,-8,-31,8,-43,5v-6,-1,-14,13,-17,6v-4,9,-20,6,-20,15v21,1,37,25,54,12v11,-9,33,-15,47,-23v13,-3,30,22,13,24v-2,-3,-4,-2,-5,2v-19,3,-34,12,-47,21v26,31,12,90,-14,100v-4,6,-10,16,-17,17v-6,13,-20,13,-34,24xm43,-45v13,18,43,-8,60,-12v23,-18,73,-63,38,-96v-31,22,-67,44,-84,77v-10,8,-11,19,-14,31",w:172},9:{d:"63,-134v35,-11,61,-44,89,-64v20,-14,37,-35,58,-48v26,5,7,42,-8,46v-8,25,-30,40,-41,63v-9,13,-18,29,-25,47v-13,13,-25,47,-14,67v-23,14,-41,-15,-28,-40v12,-24,27,-46,37,-70r43,-57v-12,11,-27,19,-35,33v-13,5,-23,22,-36,22v-3,2,-7,17,-16,11v-6,0,-8,17,-17,11v-1,3,-1,3,-3,3v-17,-3,-38,-27,-16,-43v31,-42,69,-76,124,-94v11,0,13,18,2,21v-26,-9,-44,20,-64,31v-3,2,-10,20,-14,11v-9,17,-31,31,-36,50",w:163},":":{d:"29,-82v2,-18,23,-27,30,-7v13,7,-3,28,-11,27v-8,-1,-15,-14,-19,-20xm17,-15v2,-17,23,-27,30,-7v13,7,-3,28,-11,27v-8,-1,-15,-14,-19,-20",w:88},";":{d:"47,-62v-18,-5,-24,-35,-3,-40v20,4,26,36,3,40xm23,24v-19,-2,1,-15,1,-23v-14,-13,-3,-34,13,-37v6,2,24,18,12,25v-4,15,-16,27,-26,35",w:88},"<":{d:"186,-220r0,13r-114,74r114,76r0,34r-149,-99r0,-2"},"=":{d:"193,-144v-30,6,-76,0,-118,1v-5,0,-7,-4,-7,-12v11,-18,48,-1,79,-9v13,6,44,-12,54,7v0,6,-3,11,-8,13xm168,-97v-30,8,-78,1,-118,2v-6,1,-10,-8,-7,-15v30,-10,81,1,117,-9v11,2,22,15,8,22"},">":{d:"52,-23r0,-13r114,-74r-114,-76r0,-34r148,99r0,3"},"?":{d:"85,-69v-11,-14,-28,-40,-5,-55v45,-30,95,-48,148,-70v13,-5,9,-16,-1,-18v-49,-2,-90,2,-120,17v-1,4,-4,14,-12,13v-18,-2,-13,-28,2,-31v46,-11,107,-22,143,-5v19,-2,27,42,5,47v-10,2,-14,15,-26,8v-16,21,-52,15,-67,34v-24,12,-52,12,-59,39v0,14,-3,21,-8,21xm88,-17v-28,-1,-20,-37,1,-41v20,7,14,35,-1,41",w:204},"@":{d:"221,-94v43,-3,52,-70,27,-98v-27,-31,-101,-18,-125,4v-51,24,-100,122,-34,157v26,14,58,-1,78,-11v8,1,24,-28,31,-5v-18,25,-69,37,-98,30v-66,7,-81,-99,-39,-135v30,-45,75,-71,143,-75v72,-5,105,90,52,133v-12,18,-55,30,-61,2v-2,-8,-1,-15,0,-23v-4,3,-10,3,-11,10v-20,9,-51,57,-77,31v-13,-52,37,-76,77,-93v15,-2,18,5,22,18v4,-8,23,-23,26,-4v-2,19,-16,31,-17,49v0,6,2,10,6,10xm200,-140v-36,-2,-66,19,-76,49v1,11,7,5,15,1v24,-13,44,-30,61,-50",w:262},A:{d:"227,-85v7,27,-27,47,-55,54v-29,-7,-16,-58,-12,-81v-16,19,-9,17,-23,36v-8,-1,-2,10,-10,10v-1,6,-5,18,-12,16v-7,40,-78,61,-82,5v2,-9,-1,-27,8,-23v-12,-25,15,-57,27,-78v26,-45,64,-84,118,-103v26,-2,23,29,16,47v0,14,-17,13,-17,1v1,-10,21,-19,10,-30v-19,-1,-27,19,-45,23v-24,25,-48,54,-63,83v-14,27,-30,52,-29,83v0,5,2,14,6,14v40,-16,53,-61,84,-87v1,-16,20,-22,22,-39v11,-7,14,-41,34,-30v15,14,-8,38,-7,57v-13,25,-23,56,-22,81v16,-8,35,-27,52,-39",w:214},B:{d:"243,-122v23,37,-26,62,-53,74v-33,15,-62,24,-100,31v-13,-6,-27,6,-35,-8v-5,3,-6,-5,-7,-8v30,-34,90,-62,137,-76v11,-3,15,10,9,17v-6,14,-25,-5,-39,9v-25,6,-66,26,-75,38v0,3,7,4,22,4v57,0,96,-27,128,-59v1,0,3,2,4,0v8,-40,-60,-37,-91,-38v-10,0,-15,-1,-15,-4v4,-31,52,-26,70,-46v23,-9,19,-26,-10,-26v-19,0,-33,0,-44,3v7,34,-27,68,-34,102v-9,7,-7,27,-16,36v-38,-24,7,-65,16,-92v10,-9,2,-27,16,-33v-6,-7,11,-10,2,-14v-29,7,-62,7,-77,24v-1,4,-7,7,-11,8v-20,-17,12,-31,28,-33v18,-2,33,-13,50,-9v31,-13,95,-10,115,10v13,30,-40,46,-55,55v24,7,59,14,65,35",w:253},C:{d:"70,-25v27,1,38,-18,56,-27v17,-13,28,-31,48,-41v6,-9,12,-20,26,-23v11,16,-21,34,-30,47v-11,15,-23,16,-31,29v-2,-1,-3,-4,-5,0v-4,15,-31,26,-45,27v1,-1,1,-3,0,-3v-1,15,-15,6,-28,4v-40,-20,-21,-93,2,-115v-2,-10,11,-28,17,-20v1,0,2,-1,2,-2v-3,-1,-5,-4,-6,-7v9,-3,6,-18,16,-18v3,-14,19,-36,31,-31v-1,1,-3,2,-1,3v-1,-14,14,-19,23,-27v4,2,5,1,6,-3v21,-16,64,-19,54,19v-7,27,-20,51,-38,68v-2,19,-22,18,-25,4v-1,-4,10,-18,22,-20v2,-14,17,-17,19,-31v5,-5,18,-34,5,-37v-20,6,-35,14,-45,29v-7,0,-6,12,-15,13v-2,9,-4,12,-13,15v1,1,2,1,2,1v-8,11,-7,24,-21,31v-2,20,-20,38,-24,59v-6,11,-11,30,-7,42v-5,2,3,9,5,14",w:194},D:{d:"88,-123v-31,18,-76,-16,-38,-43v48,-62,211,-85,220,12v6,66,-42,87,-83,112r-3,-1v0,6,-6,5,-11,5v-10,8,-24,11,-39,10v2,3,1,5,-4,5v-14,-5,-25,9,-41,3v-13,11,-57,-9,-30,-20v1,0,10,6,9,-1v10,-31,29,-52,37,-74v6,0,0,-8,8,-11v-11,-1,-17,7,-25,3xm245,-135v-7,-14,0,-32,-9,-44v-47,-60,-162,-15,-182,37v0,16,22,9,30,12r0,2v3,-9,36,-3,36,-15v7,-17,17,-25,11,-44v8,-12,26,4,25,17v1,4,-5,14,-7,22v19,2,29,-10,45,-8v9,-6,26,-27,35,-10v-1,13,-31,26,-42,21v-12,4,-27,10,-43,11v-14,31,-35,63,-45,93v12,-3,29,-1,36,-8v35,-3,67,-25,88,-44v11,-10,12,-29,22,-42",w:247},E:{d:"131,-35v-12,6,-22,23,-36,19v-22,30,-78,8,-73,-20v-5,-34,21,-57,40,-75v14,-14,33,-20,50,-31v-13,5,-30,7,-31,-11v10,-39,41,-52,66,-75v26,-11,63,-30,71,5v0,18,-17,49,-25,25v0,-5,5,-11,11,-10v5,-8,8,-24,-7,-22v-5,-1,-14,7,-23,7v-24,20,-56,42,-65,73v21,-9,41,-26,66,-26v7,0,10,2,10,5v-8,34,-60,27,-76,53v-5,-4,-6,10,-14,9v0,6,-2,8,-6,6v2,10,-13,6,-9,10v-12,15,-36,44,-20,66v47,2,62,-26,92,-43v24,-14,38,-41,63,-49v-7,37,-42,41,-60,67v-8,5,-14,16,-25,12",w:204},F:{d:"221,-224v-17,30,-42,51,-62,77r45,-10v10,0,13,9,12,21v-22,18,-64,-15,-79,23v-2,0,-4,1,-4,2r-64,115v0,13,-5,34,7,24v3,-1,1,6,3,8v-2,3,-1,15,-18,10v-30,-8,-18,-67,2,-76v-2,-1,-4,0,-4,-1v8,-10,10,-25,20,-34v1,-18,22,-38,27,-52v-10,4,-20,2,-26,11v-27,5,-48,20,-62,38v-10,-1,-10,-12,-4,-20v18,-23,59,-29,86,-45v41,-6,51,-54,80,-73v3,-6,15,-14,12,-19v-26,-2,-38,12,-57,14v-18,18,-45,13,-52,40v0,1,-5,7,-7,6v-27,-24,21,-40,43,-51v16,-8,96,-49,102,-8",w:179},G:{d:"90,-161v22,-34,59,-68,106,-70v23,9,1,71,-13,45v-3,-7,25,-21,12,-28v-32,8,-50,33,-75,50v-13,19,-23,33,-41,51v0,18,-40,60,-25,85v10,-3,20,-17,31,-19v27,-35,64,-70,86,-112v7,-7,12,-5,17,4v18,31,-20,60,-23,90v16,-12,29,-22,50,-30v-8,38,-63,33,-68,74v-20,39,-37,82,-60,116v-7,10,-27,29,-35,8v-17,-28,10,-58,17,-79v20,-24,39,-50,64,-70v5,-21,20,-39,23,-59v-11,11,-20,21,-30,28v-8,23,-34,39,-49,57v-34,18,-62,-23,-39,-54v7,-4,-5,-19,13,-25v6,-25,24,-52,39,-62xm123,-20v-8,12,-24,18,-29,33v-19,10,-26,46,-34,66v4,3,-1,14,3,16v27,-21,29,-59,50,-83v-3,-13,12,-22,10,-32",w:188},H:{d:"64,-110v6,-20,41,-11,44,-32r44,-75v-9,-15,-36,6,-52,9v-13,10,-30,20,-38,35v-8,7,-20,5,-21,-8v4,-17,52,-30,67,-44v23,-10,78,-22,64,22v-7,24,-24,39,-32,62v33,-4,59,-12,91,-16v13,-28,33,-50,37,-85v0,-8,4,-11,11,-11v19,4,11,34,1,46v-8,10,-15,32,-21,47v12,1,29,-3,34,7v-5,26,-30,6,-47,13v-17,31,-30,66,-49,94v1,8,-7,23,3,31v-12,20,-35,3,-31,-19v3,-19,-4,-36,-2,-48v-17,-6,-31,-27,-52,-22v-14,25,-23,55,-39,78v4,9,-7,14,-4,25v-2,11,-10,9,-16,-1v-22,-37,20,-74,33,-103v-2,-11,-18,4,-25,-5xm128,-124v-17,19,0,14,16,18v18,5,35,18,39,37v9,-24,24,-44,34,-67v-20,-1,-36,7,-53,3v-3,6,-14,5,-16,0v-3,7,-14,9,-20,9xm91,-118v-4,0,-5,3,0,3r0,-3",w:240},I:{d:"91,-221v-13,19,-44,33,-40,60v-6,5,2,10,3,14v1,6,-7,14,-13,13v-23,-41,32,-94,70,-111v42,-19,75,29,51,69v-10,32,-31,55,-44,84v-11,11,-14,29,-26,40v2,22,-24,37,-9,57v-1,17,-25,7,-29,-1v-15,-28,14,-56,22,-79v4,-10,9,-19,18,-25v2,-24,31,-49,36,-70v4,-3,6,-3,4,-8v19,-20,17,-61,-16,-53v-10,2,-21,9,-27,10",w:135},J:{d:"33,95v-48,-50,22,-124,66,-148v13,-12,15,-40,27,-53v-1,-7,5,-24,12,-19v-6,-11,3,-28,10,-35v-5,-3,-1,-16,7,-16v-5,-11,5,-8,2,-21v23,-27,-9,-55,-32,-28v-32,23,-53,57,-59,103v6,10,0,22,7,33v5,9,24,19,16,34v-39,-21,-44,-114,-16,-150v20,-25,48,-41,82,-42v44,-1,31,67,15,89v-2,32,-23,56,-29,81v16,-10,29,-24,47,-32v9,3,0,16,-6,20v-21,15,-55,20,-59,52v-26,45,-47,102,-90,132xm57,1v-9,19,-30,40,-22,66v26,-27,44,-76,63,-107v-20,7,-26,29,-41,41",w:172},K:{d:"66,-136v-7,-24,44,-29,60,-45v8,-19,20,-33,12,-59v0,-3,3,-9,6,-9v30,-2,30,33,15,45v4,4,-4,10,0,10v20,-8,35,-21,57,-27v21,-12,44,-20,66,-30v21,6,4,27,-7,31v-42,17,-90,29,-128,50v-12,17,-18,38,-28,55v30,21,71,34,98,56v19,7,31,9,38,27v-3,9,-23,21,-28,6v-20,-5,-30,-21,-49,-31v-19,-9,-48,-39,-66,-47v0,15,-6,4,-8,24v-9,20,-26,42,-21,67v-1,6,-7,12,-13,7v-34,-29,14,-77,22,-110v0,-1,-8,-8,-26,-20xm85,-146v-11,8,6,14,13,18v4,1,9,-23,14,-29v-10,0,-24,10,-27,11",w:252},L:{d:"62,-13v-2,21,-66,23,-70,-3v16,-23,62,-13,73,-41v18,-27,35,-53,47,-85v-13,8,-30,21,-45,21v-3,10,-15,4,-16,-3v2,-10,15,-22,25,-12v20,-5,45,-19,52,-36v1,-12,9,-6,10,-18v0,-5,2,-9,7,-12v0,-12,10,-7,7,-17v9,-4,11,-18,19,-19v-1,-11,19,-21,27,-11v13,18,-3,37,-11,50v-12,12,-22,23,-38,32r-32,73v-6,7,-13,25,-18,38v35,1,70,-3,98,7v19,-7,40,22,21,33v-34,-18,-79,-38,-126,-24v-13,8,-15,27,-30,27xm195,-243v-14,7,-24,30,-27,43v12,-12,27,-21,27,-43xm2,-15v13,10,41,4,44,-14v-19,3,-34,7,-44,14",w:228},M:{d:"13,-117v-12,-25,41,-30,55,-45v21,-5,39,-23,68,-22v12,0,22,22,8,32v-11,25,-32,46,-41,74v10,-12,22,-18,31,-33v14,-9,22,-26,36,-33v0,-12,16,-8,17,-16v12,-15,45,-42,62,-19v7,21,-11,36,-14,55v14,-8,24,-30,40,-38v16,-17,30,-35,58,-38v26,-3,18,45,5,54v-10,23,-27,39,-37,63r-3,0v2,11,-17,35,-3,50v2,18,-18,11,-24,6v-18,-13,-10,-65,9,-72v-5,-8,8,-4,4,-11v11,-16,19,-37,33,-50v-5,-5,6,-12,6,-18v-21,10,-44,29,-60,47v-25,17,-43,57,-72,72v-21,-8,-2,-40,4,-52v1,0,7,-7,15,-21v2,-10,9,-15,12,-24v-26,-2,-50,36,-74,46v-9,17,-27,25,-34,42v-11,-1,-4,15,-17,18v-12,15,-27,55,-51,35v-4,-31,24,-44,24,-62v12,-15,18,-44,36,-52v-1,-2,-2,2,-5,1v5,-14,17,-27,17,-42v-20,3,-28,15,-48,17v-12,18,-30,15,-37,28v-2,6,-13,15,-20,8xm230,-119v2,2,3,-2,4,-3",w:331},N:{d:"120,-97v22,-25,49,-45,70,-70v2,-3,8,-8,12,-5v11,-13,34,-29,58,-28v7,1,22,9,19,19v-15,51,-56,82,-64,141v15,10,25,-21,43,-23v6,-11,12,-18,19,-11v-2,7,-5,25,-17,23v-11,15,-28,23,-50,26v-18,-3,-37,-38,-13,-55v6,-37,44,-67,49,-102v-12,8,-29,12,-38,23v-11,0,-19,20,-33,22v-19,30,-51,49,-72,78v-18,9,-24,38,-45,44v-22,-9,-7,-45,8,-54v10,-29,32,-48,47,-70v0,-4,2,-5,5,-5v4,-6,1,-11,10,-13v-3,-9,16,-12,5,-20v-39,8,-72,20,-92,45v-5,7,-20,8,-19,-7v23,-27,66,-36,99,-52v4,3,19,-10,24,-1v21,-9,30,20,15,35v-13,22,-28,37,-40,60",w:268},O:{d:"40,-70v-3,-17,8,-24,9,-38v11,-19,17,-41,33,-54v5,-20,27,-30,36,-47v13,-1,37,-46,50,-20v35,-25,87,-6,72,42v-20,62,-56,101,-92,143v-18,9,-20,23,-42,25v-24,29,-89,-3,-66,-51xm109,-174v-13,43,-59,85,-52,140r-2,3v17,26,56,-8,68,-24v9,3,10,-16,21,-17v25,-42,59,-74,74,-126v-3,-10,6,-31,-23,-28v-36,13,-65,39,-61,80v0,9,-3,13,-10,13v-17,1,-7,-25,-6,-33v14,-17,24,-41,42,-56v-25,8,-33,34,-51,48",w:199},P:{d:"266,-218v26,18,7,79,-17,86v-22,19,-60,26,-89,23v-4,8,-29,-2,-39,1v-19,26,-35,50,-41,88v0,4,-5,9,-10,8v-32,-8,-6,-60,10,-66v-2,-24,16,-36,21,-53v1,0,3,3,3,1v-2,-19,25,-36,25,-59v0,-13,20,-21,22,-2v15,21,-12,30,-15,50v-1,6,-11,14,-6,19v51,-2,98,-9,112,-43v14,-14,3,-41,-6,-52v-24,-5,-58,-12,-80,-4v-44,2,-78,18,-103,39v-3,13,-17,32,-22,11v1,-24,28,-25,41,-37v21,-9,60,-33,87,-26v29,-14,99,-11,107,16",w:221},Q:{d:"88,-3v-69,4,-48,-114,-14,-150v22,-38,42,-75,84,-89v16,11,26,-10,46,-10v14,0,31,12,28,24v11,8,-5,29,1,40v-22,59,-55,120,-98,160v3,9,13,12,15,22v11,2,37,4,24,20v-27,10,-42,-16,-48,-35v-9,8,-25,13,-38,18xm155,-222v-41,13,-49,62,-72,92v-12,35,-30,79,-12,112v19,-2,31,-14,43,-24v-5,-16,-18,-7,-28,-14v4,-20,31,-4,35,6v28,-32,58,-67,74,-110v2,-3,6,-9,9,-12v-1,-17,19,-46,4,-62v-28,-4,-43,22,-61,34v-6,12,-17,25,-10,42v0,2,-5,14,-10,12v-26,-16,11,-48,18,-67",w:197},R:{d:"259,-200v-40,-17,-125,-34,-176,2v-2,10,-26,14,-25,-2v27,-32,74,-24,119,-34v22,4,61,-4,73,7v37,-1,46,58,11,67v-7,1,-15,7,-21,5v-29,15,-64,11,-85,22v-25,-3,-31,26,-42,43v7,8,17,16,27,22v-1,6,15,6,16,15v18,5,29,25,45,33v28,23,27,22,45,41v1,20,-29,18,-31,3v-26,-16,-44,-40,-65,-61v-8,-6,-6,-10,-16,-13r1,-3v-15,-4,-24,-36,-33,-11v-7,11,-13,25,-14,43v-8,15,-24,-2,-26,-14v2,-23,20,-40,27,-59v-4,-8,-17,-14,-17,-22v4,-11,27,-19,39,-22v9,-12,15,-30,22,-44v8,0,-9,-24,10,-21v26,6,10,36,3,53v12,-5,38,-14,52,-11v3,-5,12,-7,19,-6r-1,-1v14,-10,51,-8,43,-32xm101,-120v-5,3,-15,3,-17,8v7,7,14,13,17,-8",w:242},S:{d:"235,-64v-64,22,-104,74,-184,78v-3,-2,-9,-4,-8,-10v32,-28,88,-33,119,-62v7,-13,29,-29,3,-41v-30,-14,-65,-19,-97,-30v-23,-8,-15,-41,1,-51v14,-18,31,-32,56,-39v13,-14,43,-15,57,-23v7,4,23,-5,31,2v2,-10,16,0,25,0v4,-6,15,12,21,6v13,11,29,48,6,59v-13,-1,-12,-14,-2,-18v-17,-40,-93,-21,-121,-6v-3,-2,-11,-6,-9,3v-28,14,-49,23,-62,49v4,9,21,6,25,14v23,-4,50,2,66,10v5,-5,24,0,21,9v13,-9,31,10,26,30v-2,10,-11,17,-12,23r49,-23v8,7,-6,18,-11,20xm68,0v16,-5,37,-7,47,-18v-19,3,-34,10,-47,18",w:227},T:{d:"190,-231v-44,4,-85,17,-124,38v-4,8,-18,23,-20,3v53,-58,154,-57,233,-63v12,-2,17,21,6,24v-14,11,-24,-12,-44,-5v-15,0,-45,-5,-35,12r-42,50v-7,6,-10,19,-17,30v-17,27,-36,73,-46,111v3,9,4,24,-10,22v-34,-6,-14,-56,-5,-74v14,-30,29,-54,46,-80v20,-20,36,-49,58,-68",w:177},U:{d:"186,-112v7,-26,31,-62,47,-89v9,-9,29,-16,37,-3v1,19,-18,24,-19,42v-14,40,-34,72,-31,113v17,-9,30,-24,46,-38v4,0,6,2,6,6v-9,30,-38,40,-59,49v-32,-15,-13,-58,-9,-89v-2,13,-8,4,-6,16v-5,3,-9,22,-16,18v-15,29,-33,61,-62,77v-39,7,-53,-47,-37,-83v-1,-6,12,-3,6,-9v13,-37,34,-66,53,-97v9,5,-3,-15,8,-7v5,-14,-1,-28,-11,-18v-26,5,-50,19,-53,42v-9,13,-26,5,-20,-13v20,-27,55,-41,92,-48v14,-3,29,18,17,39v-30,54,-68,103,-73,173v13,13,21,-19,37,-17v4,-19,18,-27,27,-41v4,0,4,0,3,-4v3,-3,13,-28,17,-19",w:253},V:{d:"109,-134v-4,-15,20,-39,17,-55v-21,9,-43,22,-50,45v-4,12,-23,9,-21,-4v21,-29,57,-51,95,-64v34,23,-25,72,-32,105v-6,26,-25,51,-21,79v20,-20,32,-44,49,-66v2,0,4,4,5,0v-6,-18,17,-39,30,-49v0,0,1,2,1,3v5,-8,-11,-5,4,-16v13,-9,13,-22,27,-26v-8,-10,20,-23,27,-37v5,2,9,0,6,-5v14,-11,43,-26,47,0v4,28,-29,18,-39,37v-25,23,-50,45,-67,75v-11,2,-15,23,-24,29v-12,16,-23,34,-34,50v-11,15,-35,36,-47,4v-9,-25,4,-44,4,-62v8,-12,10,-35,23,-43",w:201},W:{d:"131,-191v-19,4,-36,11,-50,22v-22,4,-30,36,-51,44v-11,-3,-17,-9,-6,-21v36,-24,67,-53,119,-61v47,19,-10,67,-16,95v-8,19,-18,39,-22,56v36,-22,59,-65,88,-95v-3,-14,16,-17,15,-32v8,-8,11,-25,29,-19v15,14,-10,35,-9,50v-16,22,-24,59,-24,89v21,16,38,-26,50,-43v16,-24,28,-53,34,-83v2,0,3,0,3,-1v-11,-18,-1,-75,25,-47v5,22,-4,40,-6,60v-9,11,-12,42,-26,50v-6,25,-27,42,-38,62v-8,15,-50,45,-65,14v-11,-13,0,-44,0,-57v-8,8,-12,26,-23,28v-1,4,-1,10,-6,7v-2,9,-11,17,-21,23v-5,15,-22,13,-30,28v-18,18,-38,-8,-30,-30v10,-28,19,-49,36,-75v-4,-18,36,-48,24,-64",w:284},X:{d:"82,-207v-25,-3,-38,53,-57,19v7,-28,60,-31,81,-46v40,-14,95,-2,66,50v2,4,0,8,1,11v20,-18,30,-34,55,-49v3,3,3,2,2,-2v8,-14,25,-29,40,-14v7,17,-19,22,-30,25v-10,17,-35,19,-41,37v-7,11,-17,14,-21,23v-21,12,-14,59,-24,81v6,14,0,32,17,31v20,-9,33,-28,52,-39v7,0,1,6,4,9v0,5,-11,17,-17,17v-11,17,-27,18,-40,32v-30,9,-53,-21,-41,-52v-1,-8,7,-14,0,-29v-15,31,-41,45,-54,75v-5,11,-32,34,-36,5v3,-21,24,-32,37,-44v11,-11,20,-28,33,-35v10,-17,36,-29,30,-53v0,-6,2,-5,6,-5v-4,-26,20,-84,-33,-62v-10,4,-22,7,-30,15",w:215},Y:{d:"130,-32v-13,35,-63,14,-61,-21v1,-17,3,-38,14,-46v4,-34,34,-67,48,-95v7,0,-1,-10,9,-10v2,-9,-1,-25,-12,-14v-18,1,-48,17,-49,41v-7,9,-27,6,-20,-10v22,-24,56,-41,97,-48v30,24,-16,60,-25,87v-12,36,-50,77,-32,120v54,-34,81,-93,112,-150v4,-8,9,-22,22,-26v8,-2,20,16,20,22v-25,29,-31,71,-48,107v18,-6,33,-29,53,-35v4,33,-58,40,-66,72v-9,34,-16,52,-28,81v-10,2,-4,20,-13,29v-7,6,-11,31,-23,28v-1,7,-11,10,-18,12v-12,-9,-26,-36,-14,-52v-4,-13,13,-28,17,-43v9,-8,15,-24,27,-23v-4,-10,5,-11,8,-14v-5,-7,10,-4,9,-12v22,-15,17,-39,29,-59v-2,-5,1,-4,2,-11v-21,20,-30,47,-54,65v1,3,2,6,-4,5xm114,92v18,-17,18,-41,31,-62r15,-49v-20,25,-34,38,-42,72v-5,10,-8,30,-4,39",w:239},Z:{d:"243,-205v-13,21,-40,28,-55,46v-38,22,-72,63,-92,99v15,-6,26,-16,44,-20v13,-11,23,-16,44,-20v12,6,5,20,-2,28r49,-27v12,24,-38,26,-51,42v-12,-1,-8,20,-20,21v-4,21,-20,25,-25,47v-14,13,-17,38,-33,49v-9,22,-22,42,-44,48v-28,-8,-8,-58,2,-73r2,1v-1,-12,1,-18,11,-24v-3,-8,14,-9,9,-14v17,-24,44,-40,69,-56v1,-3,9,-17,1,-10v-36,9,-65,34,-102,38v-14,2,-18,-6,-4,-23v44,-51,93,-98,152,-134v-56,9,-84,-1,-118,-14v-27,-3,-46,30,-18,38v23,7,57,7,73,-5v1,-8,20,-11,22,-3v-20,29,-75,21,-107,13v-34,-17,-15,-77,19,-70v36,-3,58,37,100,31v28,3,50,-6,71,-14v2,0,3,2,3,6xm135,-33v-43,23,-67,67,-80,119v1,6,4,-1,7,-1v24,-35,53,-76,73,-118",w:203},"[":{d:"58,-76v19,-39,29,-86,58,-115v1,-9,13,-26,21,-34v10,-24,37,-31,64,-31v13,0,18,28,1,29v-14,1,-17,-15,-32,-6v-7,12,-17,25,-26,36v-4,19,-19,20,-23,39v-11,20,-25,49,-32,73v-7,5,-4,23,-13,30v-1,15,-11,31,-2,42v14,1,25,-5,33,-11v4,0,5,3,5,9v0,27,-64,21,-63,-5v-4,-16,0,-47,13,-54v-2,-1,-4,-1,-4,-2",w:161},"\\":{d:"85,-208v0,-16,5,-34,18,-36v20,8,18,41,30,57v-4,8,8,18,4,31v1,-1,4,-2,3,2v12,55,37,151,-28,163v-15,-7,-6,-14,8,-29v18,-19,5,-45,13,-65v-8,-4,-2,-23,-11,-29v2,-30,-15,-72,-37,-94",w:163},"]":{d:"52,-22v17,-17,22,-36,38,-52v0,-8,10,-10,11,-21v11,-17,24,-52,32,-73v9,-23,25,-53,15,-72v-14,-1,-26,4,-33,11v-11,-6,-1,-28,13,-25v45,-14,61,47,32,75v2,0,3,2,3,3v-18,44,-33,92,-63,123v0,14,-13,18,-17,30r-3,0v-6,22,-35,23,-59,26v-9,1,-14,-10,-12,-22v12,-14,28,7,43,1r0,-4",w:161},"^":{d:"189,-103r-13,0r-74,-114r-77,114r-34,0r100,-149r2,0"},_:{d:"9,32r162,0r0,14r-162,0r0,-14"},"`":{d:"114,-133v-17,14,-29,-16,-33,-32v-2,-7,10,-12,19,-8v11,4,5,33,14,40"},a:{d:"116,-46v18,-7,24,-23,39,-32v12,24,-23,44,-43,53v-20,-1,-18,-21,-17,-37v-10,4,-11,18,-25,18v-10,19,-57,50,-66,16v0,-51,45,-76,88,-85v9,-2,10,11,14,18v1,-6,26,-24,26,-3v0,17,-22,31,-16,52xm23,-40v-1,19,15,2,22,1v20,-13,41,-28,55,-47v-41,-4,-61,20,-77,46",w:154},b:{d:"140,-230v-8,38,-27,65,-41,96v-7,1,-6,13,-14,16v2,12,-10,6,-10,17v-10,14,-14,32,-29,19v-5,19,-7,39,0,56v5,-3,28,-21,8,-23v-9,-13,12,-34,28,-27v13,-9,14,14,27,2v11,-5,21,-18,33,-17v0,17,-17,22,-23,32v-7,-6,-6,10,-15,5v-4,3,-9,10,-18,7v-11,16,-20,33,-46,34v-17,1,-27,-27,-18,-37v-8,-59,31,-97,51,-140v18,-18,29,-46,55,-57v4,0,12,13,12,17xm50,-99v30,-33,67,-72,74,-126v-28,38,-58,75,-74,126",w:111},c:{d:"130,-82v11,29,-39,40,-55,59v-15,0,-27,19,-40,8v-38,4,-33,-52,-8,-67v11,-20,41,-37,64,-31v8,-7,14,8,15,14v-7,20,-35,-3,-43,11v-19,11,-35,25,-39,52v3,12,24,2,33,1",w:121},d:{d:"62,-37v-7,16,-50,42,-54,6v-4,-46,32,-76,68,-90v10,-4,21,4,24,15v17,-23,21,-59,43,-77v5,-18,35,-66,49,-35v-10,32,-23,60,-40,83v-5,6,-8,19,-18,22v-1,12,-23,47,-11,69v22,-10,36,-29,53,-42v13,20,-24,38,-36,52v-21,10,-46,1,-43,-26v-1,-8,-3,-12,-5,-12v-8,16,-24,26,-30,35xm174,-199v-14,18,-26,40,-37,62v14,-20,35,-34,37,-62xm31,-31v29,-14,48,-40,65,-66v-38,-2,-56,29,-70,56v1,4,0,10,5,10",w:162},e:{d:"36,-33v34,-2,50,-23,74,-38v1,1,1,3,3,3v-2,-8,14,-19,19,-16v1,22,-18,27,-27,40v-5,-4,-9,12,-17,9v-16,15,-57,31,-70,8v-10,-6,-17,-25,-5,-32v8,-33,34,-62,78,-54v5,0,10,5,10,10v-4,18,-26,19,-33,31v-9,-1,-14,15,-22,12v-2,11,-21,6,-19,22v0,3,3,5,9,5xm80,-99v-16,-5,-41,13,-41,29v17,-5,27,-20,41,-29",w:116},f:{d:"13,80v-18,14,-51,66,-60,20r42,-113v13,-13,-14,-17,10,-23r15,-34v-11,1,-21,30,-32,19v1,-28,45,-48,56,-75r40,-97v2,-11,20,-11,19,3v2,15,2,36,-8,42v0,33,-39,61,-46,96v-5,8,-11,21,-14,35v8,-4,14,-11,23,-11v5,-17,36,-20,46,-34v11,6,-5,20,-9,24v-12,2,-42,31,-60,39v-4,10,2,4,10,17v17,26,0,53,-14,66v2,13,-13,16,-18,26xm-21,98v26,-19,46,-54,57,-90v-1,-7,-7,-25,-18,-21v-5,11,-6,34,-18,41v0,25,-19,43,-21,70",w:78},g:{d:"117,-91v-6,28,-18,46,-27,71v4,2,13,9,13,14v-3,19,-25,2,-29,12v-3,9,-14,16,-15,25v-8,1,-8,18,-18,17v2,7,-8,11,-12,14v-7,12,-27,28,-44,33v-32,-32,15,-92,51,-103v14,-10,38,-8,42,-29v5,-10,9,-23,10,-31v-16,6,-16,16,-29,19v-3,10,-16,9,-20,18v-17,6,-43,31,-47,-5v-3,1,-10,4,-10,-1v24,-41,62,-65,113,-74v6,3,6,17,15,5v6,-1,7,13,7,15xm10,-33v28,-7,62,-32,73,-53v-28,7,-48,26,-68,42v-2,0,-5,10,-5,11xm47,1v-27,15,-67,33,-60,71v31,-13,56,-42,68,-70v-3,1,-6,0,-8,-1",w:130},h:{d:"38,-60v21,-20,47,-58,83,-46v18,15,-12,43,-1,61v15,-11,28,-26,46,-35v6,14,-13,37,-27,37v-5,4,-4,11,-13,11v-7,18,-35,11,-32,-12v2,-14,6,-30,4,-43v-21,-1,-40,29,-58,38v-10,4,-28,52,-40,23v2,-16,9,-24,13,-38v-8,5,-11,10,-13,1v6,-26,33,-38,43,-61v17,-40,34,-81,63,-109v33,27,-15,84,-32,110v-18,8,-31,44,-36,63",w:158},i:{d:"80,-180v9,-6,21,6,16,18v-1,12,-20,10,-21,-1v-1,-7,-2,-17,5,-17xm45,-83v-13,-4,-29,13,-42,23v-15,-16,16,-26,25,-37v12,1,21,-26,36,-10v17,20,-11,39,-8,61v1,1,-4,3,-2,4v23,-4,36,-22,53,-32v4,27,-35,50,-63,59v-25,-11,-8,-53,1,-68",w:108},j:{d:"73,-167v-12,1,-21,-25,-3,-25v7,0,15,8,15,14v-3,4,-3,12,-12,11xm3,16v24,-28,28,-68,38,-106v-15,7,-25,21,-36,31v-24,-24,35,-41,48,-61v39,12,-8,78,-9,111v-1,4,-6,8,-4,11v22,-5,68,-20,71,10v0,7,-5,11,-14,10v-8,-16,-35,-16,-53,-13v-24,12,-21,49,-37,69v-11,26,-27,62,-51,69v-30,-23,-3,-83,17,-99v3,-10,22,-29,30,-32xm-42,122v7,-3,9,-10,17,-11v-5,-12,13,-23,12,-36r18,-49v-24,22,-56,56,-47,96",w:88},k:{d:"54,-63v-21,9,-33,57,-55,39v-1,-21,13,-30,13,-45v-5,9,-16,7,-19,3v33,-34,57,-77,76,-124v8,-5,13,-38,31,-27v13,61,-43,86,-59,135v-7,5,-5,13,-9,24v9,-10,20,-19,28,-30v7,-1,14,-20,24,-17v6,-16,40,-17,38,8v-2,22,-24,28,-38,39v5,11,17,26,29,14v7,-3,13,-13,21,-14v8,-4,18,-21,26,-16v-2,27,-28,27,-39,45v-23,20,-52,12,-58,-20v-12,-5,0,-15,6,-18v8,-8,26,-8,22,-25v-13,4,-18,14,-29,18v0,8,-9,4,-8,11",w:155},l:{d:"71,-175v9,-23,27,-42,46,-58v22,-4,27,23,13,33v-17,49,-48,88,-76,126v-1,13,-18,-7,-16,12v-3,18,1,39,19,24v7,4,4,-10,14,-9v4,1,0,-9,6,-8r29,-29v13,23,-20,37,-28,52v-11,4,-26,23,-42,13v-14,2,-20,-19,-19,-33v1,-27,12,-66,28,-83v0,-16,18,-26,23,-40r3,0xm78,-159v-8,22,-23,39,-31,61v10,0,11,-16,21,-17v1,-17,21,-22,24,-37v6,-4,6,-13,14,-15v1,-11,17,-27,12,-39v-15,9,-26,43,-40,47",w:95},m:{d:"56,-58v-7,15,-24,24,-30,40v-9,7,-16,-1,-16,-19v4,-16,28,-27,24,-44v-15,1,-25,33,-35,15v3,-19,26,-32,49,-37v5,-1,8,4,8,17v-1,2,-1,4,0,5v19,-11,46,-48,62,-18r1,36v22,-13,44,-54,65,-24v1,14,-3,32,2,42v9,0,10,-10,19,-9v1,-5,17,-22,21,-13v5,12,-10,15,-14,25v-15,5,-32,36,-49,12v-8,-13,0,-33,-5,-46v-20,15,-33,39,-52,53v-10,-5,-16,-31,-9,-44v-5,-6,4,-19,-3,-23v-16,7,-25,22,-35,33",w:226},n:{d:"34,-28v-6,12,-26,18,-26,0v0,-31,21,-27,27,-52r-35,23v-14,-22,30,-33,40,-48v16,0,25,20,17,35v20,-6,69,-58,79,-14v4,19,-10,37,1,48v10,1,12,-14,21,-12v4,-12,19,-16,28,-25v11,21,-24,32,-32,48v-15,16,-49,8,-44,-16v-6,-11,4,-28,-5,-38v-20,7,-35,23,-50,34v-3,3,-5,9,-9,11v-7,-7,-4,8,-12,6",w:186},o:{d:"100,-97v25,17,1,68,-18,71v-31,34,-90,4,-63,-43v-4,-4,-8,8,-12,4v1,3,-6,11,-9,5v-1,-18,11,-19,19,-28v20,-14,55,-39,83,-21v5,0,1,12,0,12xm38,-24v28,5,45,-21,52,-46v-8,-8,-5,-22,0,-27v-24,10,-46,19,-52,46v-6,6,-2,18,0,27",w:130},p:{d:"60,-12v-9,-3,-17,-22,-20,-1r-44,100v-6,7,-21,18,-26,2v-21,-63,52,-91,62,-151v1,-7,9,-19,4,-24v-8,-1,-1,12,-12,8v-4,6,-25,31,-29,12v6,-11,17,-18,29,-24r-1,-2v14,0,21,-36,39,-22v11,9,0,25,0,39v17,-17,42,-38,66,-40v33,7,8,52,-1,63v21,-10,36,-27,56,-37v8,15,-15,24,-23,34v-30,17,-57,39,-100,43xm50,-38v4,-1,25,-16,31,-3v19,-12,42,-28,39,-54v-31,4,-46,27,-64,41v2,6,-7,8,-6,16xm-23,73v16,-21,23,-46,33,-74v-18,22,-31,37,-33,74",w:161},q:{d:"4,-37v8,-49,46,-73,94,-77v7,-1,12,12,14,23v6,-14,36,-11,25,10v-7,13,-19,22,-24,37v-2,0,-10,5,-4,7v27,-7,44,-22,63,-36v11,22,-26,33,-40,45v-8,0,-16,8,-24,10v1,8,8,19,-2,23v3,30,-24,51,-29,80v-11,11,-21,41,-43,28v-8,-53,29,-89,42,-133v-7,-7,-1,-10,8,-14v0,-6,12,-20,9,-23v-3,4,-8,6,-12,5v-17,17,-35,29,-61,32v-8,-1,-19,-5,-16,-17xm21,-37v25,7,50,-24,73,-33v0,-5,10,-7,11,-13v-33,-9,-73,11,-84,46xm87,-4v-1,7,-5,27,-15,30v-1,24,-23,47,-18,72v3,0,7,-8,14,-20v12,-20,25,-54,19,-82",w:173},r:{d:"57,-96v-20,12,-37,28,-59,38v-10,-9,8,-24,16,-25v18,-13,33,-33,55,-39v15,3,21,30,16,44v-9,7,-25,29,-30,44v28,5,47,-20,66,-32v-1,-5,18,-15,11,-2v0,25,-38,33,-42,45v-6,5,-21,13,-34,12v-37,-15,-6,-61,5,-80v0,-3,-1,-5,-4,-5",w:129},s:{d:"41,-124v30,-9,30,48,25,71v20,-10,31,-25,51,-36v11,17,-13,21,-21,34v-27,16,-50,36,-81,48v-23,1,-36,-26,-12,-31v30,8,51,-26,42,-58v-16,15,-33,32,-52,45v-8,1,-8,-13,-2,-17r1,0v19,-10,42,-30,49,-56",w:96},t:{d:"18,-93v12,-19,43,-37,45,-63v-33,11,-73,12,-99,30v-15,-12,-5,-30,23,-31r90,-23v9,-12,19,-29,31,-35v8,2,8,18,6,28v15,1,29,-6,44,-8v11,6,-6,26,-15,30v-18,-12,-51,6,-55,26v-23,14,-30,51,-31,81v4,9,20,36,2,44v-26,-8,-20,-66,-13,-84r-39,35v-2,5,-17,20,-19,9v1,-18,18,-28,30,-39",w:99},u:{d:"31,-95v8,-22,48,-6,33,12v-4,15,-21,28,-19,45v11,-5,17,-15,28,-19v19,-16,37,-43,58,-50v8,3,16,8,19,17v-4,17,-15,31,-15,49v4,-1,5,-6,12,-6v7,-10,8,-11,18,-15v-2,-4,14,-15,15,-15v6,4,8,15,0,19v-19,12,-34,30,-55,40v-20,-9,-17,-34,-11,-58v-8,5,-12,18,-23,18v-5,12,-16,13,-22,24v-8,5,-15,13,-23,17v-31,1,-28,-45,-15,-60v-9,3,-19,18,-28,11v1,-10,5,-21,14,-18v2,-5,8,-11,14,-11",w:176},v:{d:"5,-64v-18,-13,12,-22,19,-33v9,-2,18,-10,27,-12v21,7,6,47,-3,59v5,1,1,20,9,5v26,-19,39,-57,74,-67v11,0,19,23,6,25v-48,9,-63,53,-95,78v-29,-9,-17,-52,-7,-73v-9,-8,-20,13,-30,18",w:130},w:{d:"0,-70v1,-11,12,-7,17,-18v14,-3,24,-22,35,-26v14,2,11,21,6,31v-5,11,-23,29,-20,43v14,-4,20,-18,32,-24v9,-14,18,-34,32,-43v6,1,16,12,15,22v-7,15,-18,34,-11,47v24,-9,53,-29,41,-61v0,-9,6,-12,15,-11v33,31,-16,94,-55,94v-20,0,-24,-28,-22,-47v-15,19,-30,42,-54,51v-30,-11,-4,-52,0,-66v-7,1,-26,26,-31,8",w:192},x:{d:"59,-100r-58,37v3,-31,42,-46,70,-58v21,-2,12,17,14,30v18,-8,32,-23,49,-31v4,0,5,3,5,9v0,2,-1,4,-2,4v-21,6,-36,22,-55,31v0,14,-14,36,-4,46r32,-20v2,1,2,3,2,3v3,-10,27,-33,30,-18v-4,19,-23,25,-38,33v-7,9,-21,22,-36,25v-22,-2,-18,-28,-16,-47v-6,5,-16,11,-20,18v-2,-1,-5,-4,-4,2v-4,9,-15,24,-23,22v-24,-35,65,-37,54,-86",w:137},y:{d:"52,-101v0,21,-23,35,-20,52v37,-14,61,-43,98,-57v24,2,5,32,6,46v-9,14,-15,35,-21,52v21,-5,58,-14,57,17v-12,20,-13,-18,-30,-11v-36,-7,-42,29,-55,52v5,9,-14,12,-8,20v-9,17,-23,33,-30,48v-9,0,2,11,-11,9v1,9,-10,15,-20,17v-49,-26,10,-84,26,-109v15,-10,25,-24,42,-32v13,-24,21,-48,29,-76v-10,2,-22,17,-29,11v-17,16,-42,30,-64,35v-20,-4,-10,-29,-8,-43v-6,7,-15,20,-21,3v18,-13,30,-33,53,-41v4,0,6,2,6,7xm10,125v32,-18,50,-69,65,-102v-15,9,-25,27,-38,35v2,9,-7,12,-12,20v-3,19,-16,30,-15,47",w:164},z:{d:"53,10v16,-9,20,-39,24,-56r-60,16v-17,-13,25,-39,10,-54v-7,12,-20,20,-29,29v-16,-14,16,-27,22,-40v13,-10,39,-37,46,-7v-6,17,-18,35,-21,51r51,-18v22,6,-2,26,-2,41r-16,37v10,3,21,26,-1,26v-21,-11,-21,25,-37,32v-19,22,-39,45,-69,56v-33,-45,28,-105,82,-113xm44,32v-31,-1,-55,28,-69,44v1,7,-6,19,-2,24v35,-12,50,-39,71,-68",w:118},"{":{d:"65,-148v43,-7,47,-53,72,-77v7,-18,39,-29,64,-31v13,0,18,28,1,29v-12,1,-9,-9,-22,-9v-19,8,-17,20,-31,31v-6,19,-23,28,-28,47v-10,6,-7,11,-24,17v13,22,-5,37,-8,56v-7,5,-4,23,-13,30v-1,15,-11,31,-2,42v14,1,25,-5,33,-11v4,0,5,3,5,9v0,27,-64,21,-63,-5v-4,-16,0,-47,13,-54v-2,-1,-4,-1,-4,-2v8,-10,6,-25,15,-34v-2,-10,12,-38,-8,-38",w:161},"|":{d:"81,-240r18,0r0,300r-18,0r0,-300"},"}":{d:"42,-17v23,-10,25,-31,40,-47v1,-11,15,-14,19,-31v10,-9,12,-13,24,-17v-11,-18,2,-40,8,-56v9,-23,25,-53,15,-72v-14,-1,-26,4,-33,11v-11,-6,-1,-28,13,-25v45,-14,61,47,32,75v2,0,3,2,3,3v-8,22,-19,41,-16,68v0,2,4,3,10,3v-26,2,-21,16,-37,23v-24,39,-39,82,-99,85v-9,0,-14,-10,-12,-22v13,-11,19,-1,33,2",w:161},"~":{d:"62,-88v31,-74,106,12,147,-39r5,3v-10,17,-27,32,-49,34v-8,1,-55,-16,-65,-15v-18,2,-21,6,-33,21",w:240},"":{w:90}}}),Cufon.registerFont({w:187,face:{"font-family":"Script BL","font-weight":700,"font-stretch":"normal","units-per-em":"360","panose-1":"3 4 6 2 4 6 7 8 9 4",ascent:"288",descent:"-72","cap-height":"4",bbox:"-4 -270 364 91","underline-thickness":"17.9297","underline-position":"-18.1055","unicode-range":"U+0020-U+007E"},glyphs:{" ":{w:90},"!":{d:"105,-250v37,68,-47,115,-43,178v0,1,-2,2,-7,4v-35,-51,31,-102,11,-164xm26,-48v12,12,29,16,47,12v-5,12,-11,43,-34,40v-9,-1,-36,-7,-29,-16v7,-8,11,-23,16,-36",w:116},'"':{d:"142,-249v0,45,-9,55,-29,88r-11,2v10,-31,14,-50,6,-80xm82,-246v0,45,-9,56,-29,89r-11,1v11,-31,14,-49,7,-79",w:158},"#":{d:"225,-69r-55,0r-15,69r-26,0r15,-69r-71,0r-14,69r-25,0r14,-69r-33,0r0,-26r39,0r12,-61r-51,0r0,-25r56,0r15,-70r26,0r-15,70r70,0r15,-70r25,0r-15,70r33,0r0,25r-38,0r-13,61r51,0r0,26xm162,-156r-71,0r-12,61r70,0",w:240},$:{d:"47,-178v0,-37,34,-67,76,-65v0,-8,7,-10,17,-9r-3,10v39,9,57,24,26,62v-15,2,-8,-15,-8,-26v0,-14,-7,-23,-21,-26r-22,82v35,32,60,83,19,126v-15,16,-35,25,-61,28r-10,33r-13,0r9,-34v-20,-2,-43,-21,-48,-33v4,-5,18,-60,28,-34v-3,27,1,51,24,54r26,-96v-21,-23,-39,-38,-39,-72xm121,-233v-37,1,-46,45,-19,69xm74,-9v40,-4,56,-53,23,-83"},"%":{d:"90,-206v-17,-9,-15,-41,1,-46v9,0,13,13,13,37v47,13,118,-31,143,-36v6,-1,7,7,5,11r-206,328r-30,0r195,-311v-48,18,-67,27,-109,21v-6,35,-21,61,-54,63v-20,1,-36,-18,-36,-39v0,-32,25,-69,51,-74v3,0,5,2,5,5v-10,18,-27,50,-27,70v0,25,19,32,34,11v7,-10,12,-22,15,-40xm248,20v-17,-3,-16,-42,0,-45v9,0,13,13,13,37r5,1v0,9,1,12,-7,12v-6,32,-23,61,-54,63v-63,-9,-29,-109,15,-113v3,0,5,1,5,4v-10,22,-26,51,-26,73v0,25,18,28,32,9v7,-10,14,-23,17,-41",w:274},"&":{d:"206,-25v12,4,27,-28,35,-9v-2,11,-36,40,-57,38v-29,-3,-38,-18,-52,-39v-25,21,-37,38,-74,39v-28,1,-49,-19,-48,-47v0,-36,32,-69,95,-99v-5,-57,24,-104,72,-106v18,0,40,9,41,25v3,6,-22,24,-25,23v-12,-4,-6,-36,-25,-33v-16,2,-20,23,-20,46v0,41,20,120,34,143v7,13,15,19,24,19xm56,-69v-2,27,22,57,47,40v5,-3,13,-10,23,-19v-9,-22,-16,-48,-21,-80v-28,14,-47,25,-49,59",w:243},"'":{d:"82,-249v0,45,-9,55,-29,88r-11,2v11,-31,14,-50,7,-80",w:86},"(":{d:"19,-49v0,-99,55,-162,129,-206r19,0v-67,59,-107,136,-107,238v0,43,10,71,28,101r-18,0v-31,-42,-51,-73,-51,-133",w:172},")":{d:"115,-153v0,-47,-9,-69,-26,-102r17,0v30,40,52,74,52,133v0,99,-53,162,-129,206r-20,0v63,-57,106,-125,106,-237",w:172},"*":{d:"170,-130v-22,-2,-46,-13,-70,-34v0,17,4,38,12,64r-35,13v-5,-33,2,-48,11,-76v-16,5,-34,15,-56,31r-25,-29v22,-13,45,-16,77,-13v-17,-20,-32,-34,-48,-44r21,-32v16,13,28,35,36,69v13,-22,23,-42,27,-60r37,10v-8,21,-26,39,-54,55v22,7,43,10,64,9",w:172},"+":{d:"216,-82r-82,0r0,82r-28,0r0,-82r-83,0r0,-28r83,0r0,-83r28,0r0,83r82,0r0,28",w:240},",":{d:"47,9v7,-18,-37,-19,-16,-35v5,-4,12,-12,21,-25v32,13,39,55,11,81v-12,12,-28,22,-51,30r-4,-10v19,-12,37,-18,39,-41",w:86},"-":{d:"25,-76v6,-31,69,-4,81,-22v7,9,-6,43,-29,43v-21,0,-45,-4,-58,5v-4,0,-4,-1,-3,-4",w:117},".":{d:"23,-49v15,13,23,19,46,12v-6,39,-32,52,-64,30v6,-10,12,-24,18,-42",w:71},"/":{d:"133,-251r-79,331r-40,0r78,-331r41,0",w:142},0:{d:"136,-200v-1,-16,13,-51,28,-50v19,-3,17,48,14,70v10,2,13,19,-3,16v-23,112,-60,168,-111,168v-35,0,-52,-32,-52,-70v0,-82,55,-167,116,-184v5,2,3,12,-2,15v-32,29,-63,112,-63,170v0,22,6,42,24,43v13,0,26,-12,39,-35v13,-23,26,-60,37,-110v-18,-5,-27,-16,-27,-33"},1:{d:"31,-164v-13,-4,-11,-10,0,-23v18,-22,48,-66,89,-63v10,1,10,1,8,10r-54,204v-10,40,-11,37,-54,40v-13,0,-9,-6,-6,-15v19,-51,40,-119,63,-204v-23,18,-33,35,-46,51",w:142},2:{d:"118,-250v52,0,82,56,53,99v-31,48,-102,72,-137,116v38,-18,106,17,119,-24r10,4v-7,24,-20,63,-58,59v-30,-3,-71,-8,-97,0v-4,-80,124,-102,123,-195v0,-22,-13,-40,-34,-40v-18,-1,-36,17,-35,35v-3,12,14,22,18,29v0,6,-27,18,-35,18v-10,0,-17,-11,-17,-22v-2,-39,49,-79,90,-79"},3:{d:"37,-187v-1,-67,145,-93,147,-9v0,29,-20,50,-62,63v33,12,49,32,49,61v0,47,-47,76,-99,76v-39,0,-65,-16,-67,-51v-1,-19,26,-23,40,-26v14,4,-1,23,-1,35v0,16,14,29,32,29v30,0,45,-36,45,-66v1,-26,-12,-47,-42,-42v-9,-3,-8,-23,5,-21v41,5,52,-27,56,-60v5,-43,-66,-47,-68,-9v-1,5,5,16,5,20v1,6,-24,18,-30,17v-7,-1,-10,-9,-10,-17"},4:{d:"138,-99v18,1,34,-10,43,-1v-4,8,-3,36,-21,31v-6,1,-16,1,-30,1v-12,25,-4,68,-40,70v-13,1,-39,10,-31,-13r21,-57v-23,-3,-58,4,-74,-7v1,-30,15,-37,29,-61v21,-36,75,-92,105,-110v6,-3,32,-9,35,1v-7,37,-26,106,-37,146xm125,-216v-30,21,-79,83,-100,121v27,0,49,0,64,-1v10,-29,22,-69,36,-120"},5:{d:"79,-240v6,-22,32,0,52,-5v16,0,31,-2,49,-5v-5,48,-45,54,-98,45r-14,55v53,-19,102,17,102,67v0,50,-45,87,-96,87v-36,0,-67,-19,-68,-48v-2,-20,26,-21,38,-27v9,4,0,20,0,29v0,18,13,33,30,33v29,0,46,-40,46,-75v0,-38,-29,-53,-67,-45v-7,-2,-3,-4,-1,-12"},6:{d:"126,-97v0,-20,-17,-37,-34,-25r-4,-5v2,-4,32,-25,42,-22v25,0,46,30,46,57v0,48,-50,96,-98,96v-41,0,-65,-37,-65,-81v0,-87,67,-155,131,-173v1,-1,10,6,9,7v-55,31,-93,120,-96,199v-1,18,9,34,24,35v27,2,45,-59,45,-88"},7:{d:"152,-203v-36,8,-106,-26,-112,23v-11,5,-16,1,-10,-13v12,-28,10,-63,58,-57v29,3,69,11,92,0v12,10,-4,25,-22,62v-27,55,-56,130,-75,184v-6,6,-29,9,-44,8v-20,-5,-2,-20,5,-47v8,-30,89,-121,108,-160",w:190},8:{d:"138,-218v0,-29,39,-47,39,-11v0,10,-2,21,-7,31v5,1,12,-3,13,3v1,8,-10,14,-20,10v-8,14,-21,28,-42,42v22,23,32,46,32,66v2,41,-43,81,-85,81v-34,0,-60,-21,-60,-51v0,-42,26,-56,60,-79v-48,-48,-12,-121,45,-124v5,4,7,5,7,5v-20,11,-48,37,-29,67v4,7,11,15,20,25v19,-11,32,-24,40,-39v-9,-6,-13,-15,-13,-26xm67,-9v38,0,59,-40,38,-73v-6,-10,-15,-21,-27,-33v-38,22,-57,44,-57,67v-1,22,22,39,46,39",w:188},9:{d:"174,-169v0,87,-67,156,-132,173v0,0,-10,-6,-9,-7v56,-31,92,-121,97,-199v1,-17,-10,-35,-25,-35v-27,0,-45,60,-45,87v0,20,16,37,34,26v2,0,4,3,4,5v-1,4,-31,26,-41,22v-26,0,-47,-29,-47,-57v0,-48,50,-96,98,-96v42,0,66,37,66,81"},":":{d:"51,-150v14,13,28,18,48,11v-5,37,-33,54,-66,31v6,-6,12,-20,18,-42xm24,-49v17,13,20,19,47,12v-6,36,-32,54,-64,30v7,-10,12,-24,17,-42",w:101},";":{d:"68,-150v13,13,24,19,46,11v-4,37,-35,55,-65,30v8,-9,14,-23,19,-41xm45,9v7,-18,-36,-19,-17,-35v5,-4,12,-13,22,-26v61,38,7,103,-41,112r-4,-11v19,-12,38,-17,40,-40",w:116},"<":{d:"216,-3r-192,-80r0,-26r192,-80r0,30r-155,63r155,63r0,30",w:240},"=":{d:"216,-124r-192,0r0,-28r192,0r0,28xm216,-41r-192,0r0,-27r192,0r0,27",w:240},">":{d:"216,-84r-192,81r0,-30r155,-63r-155,-63r0,-31r192,81r0,25",w:240},"?":{d:"17,-183v-3,-67,136,-100,136,-11v0,56,-55,75,-89,105v-8,6,0,20,-11,22v-34,-59,55,-61,55,-124v0,-22,-11,-38,-32,-38v-18,0,-33,14,-33,31v0,8,3,20,13,19v5,0,7,1,7,4v2,6,-25,22,-30,20v-9,0,-16,-17,-16,-28xm30,-49v11,13,24,17,46,11v-5,37,-34,55,-65,30v6,-7,12,-20,19,-41",w:157},"@":{d:"150,66v66,-1,121,-39,139,-94r11,0v-25,60,-72,102,-150,103v-85,2,-150,-64,-150,-149v0,-91,72,-161,164,-161v69,0,121,45,121,114v0,63,-43,121,-101,121v-31,0,-41,-25,-30,-54v-19,29,-27,51,-59,54v-20,2,-29,-17,-28,-38v2,-58,37,-125,87,-125v14,0,22,8,25,26r5,-20r41,-1r-31,106v-6,21,-10,37,9,40v40,-8,73,-54,73,-105v1,-62,-46,-107,-109,-107v-85,0,-149,72,-149,156v0,76,56,135,132,134xm111,-47v-1,9,3,16,9,16v20,0,55,-68,51,-97v-1,-11,-4,-22,-12,-23v-20,-1,-50,81,-48,104",w:299},A:{d:"182,-59v0,46,42,33,66,0r0,20v-27,29,-53,43,-75,43v-27,0,-40,-22,-41,-50v-23,26,-37,50,-73,50v-35,0,-54,-36,-53,-75v4,-98,60,-181,166,-179v26,0,51,3,72,10r0,12v-28,27,-62,122,-62,169xm58,-77v0,57,48,54,75,7v7,-66,29,-119,64,-158v-89,-40,-139,74,-139,151",w:243},B:{d:"166,-238v-51,0,-132,62,-74,94v5,13,-27,19,-32,21v-10,0,-22,-21,-21,-34v7,-61,66,-94,137,-95v50,0,96,22,97,65v0,28,-20,47,-60,57v84,21,43,142,-33,134v-35,5,-41,-35,-16,-44v11,-3,6,32,17,30v27,-6,50,-107,7,-114r2,-13v25,1,35,-24,36,-47v1,-33,-26,-54,-60,-54xm41,-63v17,7,-10,56,23,53v57,-5,46,-126,69,-165v10,-17,45,-52,62,-30v-37,33,-19,128,-55,167v-20,21,-48,42,-86,42v-30,0,-48,-12,-49,-37v-1,-19,23,-26,36,-30",w:273,k:{".":9,",":20}},C:{d:"136,-20v36,-1,50,-17,71,-39r0,20v-57,70,-200,53,-197,-51v2,-83,56,-155,133,-160v33,-2,57,23,57,55v0,38,-29,78,-65,78v-25,0,-42,-26,-23,-43v4,7,8,11,15,11v20,0,38,-33,38,-56v0,-18,-8,-35,-25,-32v-47,8,-76,78,-78,133v-2,45,30,86,74,84",w:202},D:{d:"7,-14v1,-27,45,-36,71,-24v28,-18,20,-88,36,-119v11,-21,34,-43,59,-46r7,10v-32,18,-21,98,-43,128v-9,12,-20,23,-37,33v16,7,33,18,53,18v43,0,65,-72,65,-120v0,-56,-29,-101,-81,-103v-34,-1,-82,33,-80,65v-3,18,16,21,21,32v2,5,-28,18,-31,17v-12,0,-23,-20,-22,-34v2,-51,62,-94,126,-94v69,0,118,42,118,109v-1,101,-102,176,-203,133v-23,15,-53,22,-59,-5",w:273,k:{I:11,H:23,".":16,",":43}},E:{d:"116,-18v33,0,58,-19,76,-41r0,20v-27,26,-51,42,-98,43v-47,1,-84,-24,-84,-67v0,-42,34,-66,77,-73v-25,-9,-38,-26,-38,-48v0,-59,118,-95,138,-37v1,5,-17,27,-21,27v-10,-9,-11,-50,-31,-43v-39,-2,-63,89,-7,88v6,1,9,-1,10,4v0,7,-4,22,-10,22v-38,-10,-66,17,-67,51v0,31,24,54,55,54"},F:{d:"139,-252v22,-1,56,11,70,-2r9,0v7,87,-143,6,-156,79v-4,21,40,23,18,43v-13,21,-43,4,-40,-20v6,-48,43,-100,99,-100xm44,-41v1,16,8,31,25,31v24,0,38,-24,45,-73v-11,2,-22,7,-36,15r7,-24v10,-9,21,-15,32,-19v4,-39,11,-55,32,-78v14,-2,24,-3,29,-3v-9,21,-11,28,-11,63v15,-5,29,-11,43,-18v-3,16,2,36,-15,39v-6,1,-15,5,-30,9v-4,56,-41,102,-98,103v-30,1,-56,-16,-60,-37v-2,-7,23,-29,30,-27v9,1,6,5,7,19",w:217,k:{o:13,e:13,a:13,"\\":7,I:25,H:25,".":38,",":54}},G:{d:"58,-95v-1,34,14,61,45,62v23,0,45,-17,66,-49v12,0,32,-10,39,-2r-18,60v18,-11,33,-22,43,-35v4,36,-20,31,-46,51v-7,52,-35,96,-85,98v-19,0,-31,-7,-31,-25v0,-22,21,-42,63,-63v4,-16,9,-30,13,-43v-11,19,-45,41,-71,41v-43,0,-70,-45,-69,-91v2,-87,69,-154,150,-159v38,-2,68,24,68,61v0,38,-34,76,-70,75v-19,0,-37,-10,-37,-28v-2,-11,15,-26,19,-11v0,7,6,11,13,11v38,-2,63,-99,4,-95v-60,4,-94,78,-96,142xm130,20v-30,15,-45,30,-45,45v0,8,3,11,11,11v15,0,26,-18,34,-56",w:228},H:{d:"276,-27v23,-4,30,-13,47,-32r0,20v-23,23,-40,43,-75,43v-46,0,-55,-57,-46,-109v-18,1,-28,2,-32,2v-10,65,-42,103,-102,107v-27,1,-57,-15,-60,-35v-1,-10,38,-50,37,-15v-2,45,38,46,54,17v8,-13,14,-36,19,-67v-14,2,-28,9,-42,21v-1,-1,-1,-6,-2,-15v12,-14,29,-24,49,-29v13,-55,20,-58,62,-102v-25,15,-43,3,-67,0v-18,-2,-33,16,-33,32v-2,11,13,19,17,27v1,7,-13,21,-20,21v-52,-28,15,-111,57,-109v19,1,50,19,65,-1v9,5,13,7,13,8v-25,30,-36,53,-42,117v13,-1,25,-1,35,-3v11,-43,33,-79,57,-106v4,-2,70,-33,43,-1v-16,20,-39,68,-48,101v13,-2,26,-8,39,-17v11,21,-23,33,-46,39v-10,44,-15,78,21,86",w:318},I:{d:"181,-242v15,-7,49,-14,26,12v-56,64,-10,230,-139,234v-28,2,-57,-15,-59,-36v0,-9,40,-50,36,-12v-3,35,36,45,54,17v16,-24,24,-110,39,-136v9,-16,25,-36,49,-58v-24,13,-47,2,-68,-1v-17,-2,-34,16,-33,33v-3,12,15,19,17,27v2,7,-13,21,-20,20v-11,0,-19,-17,-19,-30v0,-34,43,-78,76,-78v10,0,30,9,41,8",w:217,k:{y:16,w:16,v:14,u:16,t:11,s:18,r:13,p:16,o:16,n:16,m:16,l:13,k:11,j:16,h:11,g:18,f:25,e:18,d:13,c:18,b:11,a:25,W:7,V:7,U:7,T:31,S:23,R:32,P:16,O:13,N:54,M:50,L:43,K:27,J:23,H:38,G:14,F:23,E:20,D:14,C:14,B:25,A:14}},J:{d:"120,-250v20,1,38,19,55,0v21,3,15,6,6,20v-27,42,-34,171,-48,211v25,-9,45,-22,59,-40r0,20v-11,12,-33,24,-65,37v-16,49,-48,88,-96,92v-15,1,-25,-10,-25,-25v0,-26,25,-48,75,-65v17,-117,27,-157,81,-223v-23,18,-40,4,-63,1v-17,-2,-35,17,-34,33v-3,11,16,22,18,27v1,3,-15,22,-20,20v-52,-29,14,-111,57,-108xm20,63v0,22,25,12,36,-2v7,-10,16,-25,21,-46v-38,14,-57,30,-57,48"},K:{d:"177,-239v13,-5,53,-22,27,8v-32,36,-31,148,-54,183v-19,28,-42,50,-82,52v-26,1,-59,-15,-60,-36v-1,-10,36,-48,37,-15v0,25,9,38,24,38v41,9,46,-105,62,-145v7,-18,24,-40,53,-67v-27,16,-54,3,-78,-3v-15,0,-29,14,-28,31v-2,12,11,23,18,32v0,4,-16,20,-22,19v-46,-30,8,-114,55,-109v12,-1,38,12,48,12xm213,-124v30,11,32,40,32,79v0,13,5,20,16,20v12,0,28,-11,47,-34r0,20v-23,23,-36,42,-71,43v-44,2,-46,-53,-37,-94v-1,-12,0,-25,-13,-24v-6,0,-9,-2,-9,-7v2,-19,31,-3,38,-20v5,-7,9,-20,14,-39v11,-47,29,-70,52,-70v9,-1,24,9,23,18v0,4,-13,31,-17,30v-13,-18,-31,-16,-40,19v-8,32,-14,49,-35,59",w:303},L:{d:"85,-50v34,-4,60,21,93,20v19,0,38,-9,55,-29r0,20v-28,28,-57,43,-86,43v-31,0,-56,-20,-82,-26v-16,17,-30,26,-43,26v-21,-1,-18,-28,-2,-39v9,-6,21,-11,37,-14v28,-41,9,-134,50,-166v33,-50,118,-47,121,19v1,32,-24,69,-54,69v-19,0,-28,-16,-22,-35v22,18,44,-17,42,-43v5,-29,-32,-43,-48,-22v-21,28,-15,91,-30,128v-7,17,-16,33,-31,49",w:228,k:{Y:-11,T:-11}},M:{d:"344,-249v-17,39,-45,129,-43,184v2,55,39,39,63,6r0,20v-26,28,-50,43,-72,43v-81,-25,-22,-183,6,-229v-58,53,-67,177,-127,225v-4,2,-27,8,-31,0v16,-55,3,-168,27,-223v-27,29,-48,175,-79,201v-18,15,-31,26,-46,26v-16,1,-36,-13,-35,-29v-2,-9,24,-30,29,-31v14,3,4,43,24,36v68,-25,53,-180,110,-228v6,-1,30,-10,34,0v-9,60,2,155,-14,204v35,-60,60,-173,118,-204v14,-1,27,-6,36,-1",w:360},N:{d:"153,-239v5,-12,45,-19,44,-3v-3,40,24,159,26,193v27,-44,18,-192,82,-201v16,-3,19,21,11,29v-8,8,-29,6,-35,19v-27,53,-31,158,-67,202v-7,2,-29,7,-35,1v-1,-62,-22,-127,-26,-193v-25,51,-25,191,-104,196v-18,1,-36,-16,-37,-30v-2,-6,24,-31,30,-29v12,5,6,40,25,37v37,3,66,-177,86,-221",w:318,k:{y:32,u:34,o:43,i:22,e:38,a:34,"\\":18,T:38,O:25,N:59,L:41,I:41,G:14,E:23,A:22,".":52,",":68," ":23}},O:{d:"70,4v-96,-13,-48,-171,-6,-212v29,-29,29,-41,75,-42v-41,44,-74,95,-76,167v-1,30,12,54,38,55v48,2,114,-119,110,-174v-1,-16,-4,-32,-18,-33v-20,-2,-44,43,-42,64v-2,15,14,10,17,19v0,9,-13,23,-24,22v-15,0,-25,-15,-25,-33v0,-35,37,-87,70,-87v25,0,35,23,35,48v0,94,-69,194,-154,206",w:228,k:{z:11,s:11,p:11,j:11,f:11,d:11,c:11,a:13,"\\":13,Y:-7,X:14,W:-7,V:-7,U:-7,T:23,S:16,R:20,P:13,O:11,N:56,M:49,L:31,K:22,I:31,H:32,F:11,E:11,B:11,";":36,":":29,".":38,",":59," ":16}},P:{d:"40,-157v2,-50,65,-94,123,-94v45,0,81,24,81,66v0,36,-38,81,-60,51v8,-13,32,-42,28,-60v1,-28,-21,-44,-50,-44v-39,0,-90,31,-90,67v0,16,16,20,21,30v2,6,-26,18,-31,18v-11,0,-22,-20,-22,-34xm42,-64v19,6,-12,56,21,54v61,-2,47,-126,72,-166v12,-19,32,-34,51,-37v3,0,6,2,10,8v-33,21,-24,112,-45,150v-17,30,-53,59,-96,59v-27,0,-51,-14,-51,-39v-1,-16,27,-25,38,-29",w:243,k:{y:14,o:25,e:22,a:27,"\\":22,Y:-16,U:-13,R:13,I:22,H:22,".":74,",":86," ":18}},Q:{d:"183,-250v25,0,35,22,35,49v0,48,-20,98,-61,150v28,38,44,28,76,-8r0,20v-22,21,-35,39,-63,43v-20,-1,-26,-14,-39,-29v-51,51,-123,30,-123,-46v0,-74,44,-139,84,-170v7,-5,28,-13,42,-7v-45,41,-72,94,-76,165v-2,43,31,72,65,46v-9,-16,-19,-19,-36,-21v0,-7,20,-24,31,-23v15,2,21,9,31,19v37,-48,56,-95,56,-140v0,-16,-4,-32,-18,-33v-20,-1,-43,44,-41,64v-2,15,14,10,17,19v0,10,-14,23,-25,22v-15,-1,-25,-15,-25,-33v0,-35,37,-87,70,-87",w:228},R:{d:"209,-117v29,11,34,43,26,79v0,10,4,15,12,15v11,0,26,-12,46,-36r0,20v-22,23,-37,42,-70,43v-50,2,-35,-63,-28,-100v4,-19,-14,-13,-17,-23v-1,-13,9,-11,19,-10v24,1,36,-28,36,-55v0,-36,-20,-53,-60,-53v-43,0,-98,29,-98,67v-4,15,18,20,21,31v2,5,-28,17,-32,16v-12,0,-20,-19,-20,-33v0,-104,227,-138,237,-24v-4,36,-28,55,-72,63xm50,-57v-5,19,-7,47,16,47v73,0,34,-162,95,-190v17,-8,29,-21,41,-7v-44,31,-18,133,-62,171v-21,39,-126,64,-133,0v-1,-14,26,-25,37,-28v4,0,6,3,6,7",w:288},S:{d:"127,-250v27,0,57,16,61,31v0,5,-8,16,-23,34r-3,0v-8,-18,-13,-52,-42,-52v-17,0,-35,17,-34,35v2,50,81,73,81,127v0,42,-46,79,-91,79v-29,0,-65,-18,-69,-36v1,-5,29,-70,34,-26v3,31,12,47,41,48v23,2,48,-21,46,-43v-4,-47,-79,-69,-76,-125v2,-37,33,-72,75,-72",w:202,k:{y:13,o:16,i:11,h:11,e:14,a:11,T:22,S:23,O:14,I:14,H:20,E:18,A:7,".":27,",":40}},T:{d:"45,-145v7,-79,108,-128,188,-93v4,-1,8,-3,12,-1v-5,68,-73,21,-115,21v-29,0,-59,30,-62,51v-2,12,19,23,24,32v1,5,-21,21,-24,21v-12,-1,-24,-17,-23,-31xm133,-106v-2,-51,12,-71,46,-79v15,0,2,18,3,27v4,95,-26,157,-115,162v-30,2,-59,-14,-61,-36v0,-9,38,-49,38,-14v0,25,6,37,27,36v48,-3,64,-39,62,-96",w:243,k:{y:27,w:36,u:25,r:25,o:40,i:16,h:18,e:40,a:40,"\\":22,O:22,M:52,I:38,H:40,E:14,A:20,";":70,":":52,".":61,"-":47,",":77}},U:{d:"230,-23v23,-4,27,-16,48,-36r0,20v-27,29,-50,43,-69,43v-26,0,-43,-24,-40,-59v-21,39,-44,59,-70,59v-94,0,-4,-159,-2,-211v0,-14,-8,-27,-21,-27v-18,0,-42,29,-40,50v-2,14,11,24,16,34v0,6,-14,23,-21,22v-12,0,-21,-20,-21,-33v-2,-39,40,-93,78,-89v96,10,15,148,15,209v0,28,28,21,41,1v33,-52,43,-141,70,-203v6,-6,34,-8,46,-5r-33,128v-9,38,-13,62,-13,72v-1,13,5,25,16,25",w:273},V:{d:"210,-150v2,-22,-15,-53,-23,-75v-2,-7,30,-26,36,-25v10,3,18,36,17,52v-5,85,-44,196,-124,202v-34,3,-54,-28,-56,-63v-2,-28,37,-119,37,-147v0,-16,-7,-28,-20,-29v-21,-1,-40,30,-40,51v0,16,14,25,16,33v1,6,-14,24,-21,23v-11,0,-20,-19,-20,-32v0,-40,35,-92,76,-91v34,1,52,29,52,65v0,43,-34,100,-34,141v-1,16,11,31,25,29v49,-7,75,-78,79,-134",w:243,k:{o:9,e:16,a:16,Y:-13,U:-13,I:16,";":34,":":16,".":32,"-":9,",":43}},W:{d:"208,4v-28,-1,-40,-25,-39,-59v-21,40,-44,59,-69,59v-97,0,0,-161,-4,-215v0,-12,-8,-24,-20,-24v-18,-1,-42,32,-41,51v-2,11,12,26,17,35v0,4,-14,23,-20,21v-12,-1,-21,-16,-21,-33v0,-41,38,-90,77,-90v30,0,51,31,51,63v0,29,-40,124,-36,148v5,30,31,19,46,-7v29,-48,40,-143,66,-197v3,-5,39,-9,45,-4v-14,58,-42,144,-46,202v-1,14,6,23,17,24v41,-13,76,-71,78,-126v1,-26,-11,-54,-20,-77v-3,-9,29,-26,35,-25v11,2,19,33,18,49v-4,90,-57,190,-134,205",w:344,k:{a:7,"\\":13,Y:-13,U:-13,I:23,H:18,";":22,":":18,".":23,",":47}},X:{d:"163,-68v0,63,69,54,100,9r0,20v-19,20,-53,43,-86,43v-36,0,-59,-31,-59,-74v-23,49,-49,74,-76,74v-16,0,-32,-16,-33,-26v-2,-4,28,-33,32,-30v8,6,7,29,24,27v43,-15,67,-124,71,-176v1,-18,-7,-33,-24,-34v-22,-1,-48,32,-48,55v0,20,17,21,30,26v0,6,-17,32,-27,28v-16,0,-29,-18,-29,-36v0,-39,45,-88,86,-88v37,0,55,25,54,66v16,-33,29,-62,59,-66v31,-4,22,40,2,45v-5,0,-11,-18,-18,-15v-34,15,-58,105,-58,152",w:258},Y:{d:"93,2v-89,-16,1,-162,0,-210v0,-14,-8,-27,-21,-27v-21,-1,-40,29,-40,50v0,14,10,24,16,33v1,7,-13,25,-21,24v-51,-29,5,-131,57,-124v98,14,15,151,15,216v0,11,3,15,11,15v14,0,33,-21,55,-64v22,-43,42,-95,60,-155v0,-11,42,-14,49,-9r-56,230v24,-8,45,-21,60,-40r0,20v-12,15,-34,27,-65,37v-17,50,-42,93,-91,93v-17,0,-30,-10,-30,-27v0,-25,25,-47,75,-64r35,-134v-31,61,-49,128,-109,136xm105,63v3,20,30,18,39,0v5,-10,12,-26,18,-47v-27,9,-52,24,-57,47",w:273},Z:{d:"165,-32v20,-2,28,-13,42,-27r0,20v-26,24,-45,41,-86,43v-19,1,-57,-20,-75,-19v-21,-5,-20,30,-39,15v23,-77,117,-146,163,-210v-35,23,-113,-31,-124,20v-3,11,17,22,17,28v2,5,-16,21,-20,20v-9,1,-18,-17,-18,-27v0,-37,44,-85,81,-82v30,3,69,18,90,1v14,1,1,15,-2,26v-28,53,-119,130,-149,181v35,-19,88,7,120,11",w:202},"[":{d:"175,-251r-4,16r-39,0r-78,300r39,0r-5,16r-81,0r86,-332r82,0",w:172},"\\":{d:"133,80r-41,0r-78,-331r40,0",w:142},"]":{d:"172,-251r-88,332r-82,0r4,-16r39,0r79,-300r-39,0r5,-16r82,0",w:172},"^":{d:"194,-117r-28,0r-52,-90r-51,90r-26,0r72,-126r14,0",w:205},_:{d:"183,45r-187,0r0,-18r187,0r0,18",w:180},"`":{d:"73,-171r-8,4v-27,-16,-48,-36,-60,-61r41,-7v3,20,12,42,27,64",w:119},a:{d:"153,-30v17,-4,24,-16,39,-29r0,20v-29,25,-33,43,-64,43v-19,0,-27,-16,-26,-49v-19,26,-31,47,-63,49v-22,2,-38,-26,-37,-50v1,-55,44,-104,92,-104v15,0,24,7,30,20v16,-6,24,-19,46,-19v-7,27,-26,82,-27,104v0,10,3,15,10,15xm46,-50v0,11,6,21,17,21v25,1,50,-58,49,-85v0,-12,-6,-21,-17,-21v-25,-1,-50,58,-49,85"},b:{d:"111,-51v16,20,39,13,51,-8r0,20v-17,17,-40,18,-59,0v-21,22,-33,43,-65,43v-21,0,-36,-21,-36,-45v1,-50,41,-162,64,-193v27,-6,76,-35,73,7v-4,51,-50,89,-81,121v-7,26,-11,45,-11,57v3,36,37,20,47,-1v-22,-35,2,-96,35,-99v9,0,15,9,14,19v0,19,-10,46,-32,79xm124,-220v0,-6,-2,-11,-7,-12v-14,0,-31,33,-51,99v27,-26,53,-53,58,-87",w:157},c:{d:"80,-26v27,-2,37,-15,55,-33r0,20v-26,24,-41,41,-80,43v-30,1,-53,-23,-53,-53v0,-45,44,-102,87,-100v24,-4,49,29,26,43v-9,2,-22,17,-28,8v2,-14,6,-35,-10,-36v-39,6,-52,110,3,108",w:131},d:{d:"144,-45v0,7,4,16,11,15v8,0,20,-10,37,-29r0,20v-26,24,-34,37,-62,43v-21,-2,-28,-22,-28,-48v-15,24,-33,48,-62,48v-20,0,-38,-24,-38,-47v0,-47,45,-106,90,-106v15,0,18,4,26,11r25,-105v24,-4,37,-11,45,-4v0,1,-3,13,-9,36v-23,92,-35,147,-35,166xm48,-50v0,11,6,20,17,20v24,0,49,-56,47,-83v0,-12,-6,-23,-17,-23v-24,-1,-47,60,-47,86"},e:{d:"81,-25v29,0,31,-13,54,-34r0,20v-25,24,-40,41,-79,43v-32,0,-53,-22,-53,-56v0,-45,40,-97,83,-97v21,0,36,12,36,31v0,24,-25,44,-77,59v5,23,16,34,36,34xm43,-71v30,-8,45,-24,45,-47v0,-27,-24,-18,-34,1v-6,12,-11,27,-11,46",w:131},f:{d:"116,-247v23,-10,28,8,28,28v0,52,-26,68,-62,104r-15,73v22,36,53,16,80,-17r0,20v-22,23,-50,53,-87,38v-5,26,-9,53,-13,83v-12,2,-27,5,-44,8v4,-32,11,-74,20,-125v-1,-2,-4,-8,-7,-17v-6,4,-7,13,-16,13v-2,-30,22,-33,33,-50v11,-64,26,-100,46,-145v7,-7,25,-8,37,-13xm131,-216v1,-9,-2,-16,-9,-17v-22,15,-23,47,-34,94v21,-19,42,-45,43,-77",w:142},g:{d:"2,-51v0,-53,67,-130,116,-84v13,-4,22,-12,37,-14v-15,40,-18,84,-27,128v16,-6,31,-18,48,-38r0,20v-15,16,-32,28,-53,35v-16,47,-38,91,-85,94v-35,3,-38,-46,-13,-65v12,-9,30,-20,57,-29r7,-34v-18,19,-28,37,-54,37v-22,0,-33,-24,-33,-50xm45,-59v0,14,5,26,18,26v30,0,39,-56,43,-84v1,-10,-7,-19,-15,-19v-27,-1,-47,49,-46,77xm21,59v0,23,30,23,39,2v5,-11,12,-27,18,-49v-38,14,-57,29,-57,47",w:172},h:{d:"132,-149v59,13,-29,106,3,124v8,0,21,-11,41,-34r0,20v-28,29,-50,43,-68,43v-58,0,-9,-79,-3,-115v-3,-14,-16,-5,-27,2v-9,6,-18,16,-28,27v-4,22,-6,47,-6,77r-40,9v-9,-100,17,-165,58,-233r60,-21v18,14,12,45,-1,67v-8,15,-20,34,-36,55v25,-13,24,-19,47,-21xm55,-111v42,-49,62,-84,62,-107v0,-7,-1,-11,-5,-11v-25,14,-48,75,-57,118",w:172},i:{d:"87,-218v4,42,-32,52,-57,33v7,-10,12,-22,16,-35v16,11,26,13,41,2xm55,-32v18,-3,20,-11,35,-27r0,20v-27,29,-47,43,-61,43v-18,0,-27,-21,-27,-40v0,-25,8,-60,25,-104r47,-9v-8,28,-26,78,-28,104v-1,8,3,12,9,13",w:86},j:{d:"131,-218v0,42,-35,54,-62,33v10,-13,16,-25,18,-34v17,10,28,11,44,1xm70,65v-21,35,-64,32,-65,-8v0,-23,15,-42,46,-58r13,-106v-24,30,-44,53,-60,68v-8,1,-3,-11,-4,-16v17,-15,50,-55,74,-88v12,-1,26,-3,41,-6v-5,28,-11,69,-18,123v11,-5,23,-16,38,-33r0,20v-11,11,-25,21,-41,30v-4,32,-13,56,-24,74xm18,57v0,8,5,20,13,19v15,2,16,-43,19,-61v-16,7,-31,23,-32,42",w:131},k:{d:"135,-26v19,-4,24,-16,41,-33r0,20v-27,29,-48,43,-66,43v-31,0,-34,-37,-25,-63v2,-11,-20,-4,-19,-15v0,-8,3,-12,12,-11v33,6,56,-37,20,-42v-23,2,-32,16,-44,31v-5,13,-12,66,-10,93r-40,7v-8,-97,16,-168,59,-233v22,-9,47,-17,64,-21v30,35,-8,79,-30,105v28,-10,60,-2,61,25v0,19,-17,34,-52,43v20,3,21,20,19,40v0,7,3,11,10,11xm61,-124v28,-29,68,-80,63,-94v0,-7,-3,-11,-9,-11v-30,14,-39,57,-54,105",w:172},l:{d:"67,-24v26,-4,30,-16,53,-35r0,20v-26,22,-41,40,-76,43v-60,-10,-44,-86,-26,-142v11,-34,24,-67,39,-96r48,-17v8,2,11,16,11,28v-2,65,-31,99,-68,141v-3,30,-3,54,19,58xm103,-216v0,-6,-2,-14,-7,-14v-21,20,-32,73,-43,122v24,-25,48,-68,50,-108",w:116},m:{d:"221,-25v18,-6,21,-14,42,-34r0,20v-25,21,-36,43,-68,43v-51,0,-9,-89,-6,-113v-38,-14,-59,62,-66,105r-45,8v7,-37,20,-74,24,-114v-13,-14,-31,18,-44,28v-15,18,-14,46,-15,76r-39,10v-6,-64,5,-101,27,-146r42,-8v-8,19,-14,37,-18,55v32,-37,56,-55,73,-55v20,0,23,22,19,48v30,-28,34,-42,66,-48v49,8,2,90,1,115v0,7,2,10,7,10",w:258},n:{d:"131,-149v50,7,-3,84,-5,113v0,7,3,11,9,11v9,0,22,-11,41,-34r0,20v-27,29,-50,43,-69,43v-54,0,-10,-79,-3,-114v-30,-7,-69,51,-61,105r-39,9v-6,-64,5,-100,26,-146r43,-8v-9,24,-15,44,-18,58v30,-30,40,-50,76,-57",w:172},o:{d:"99,-149v20,0,32,3,32,22v0,22,-6,48,-18,80v18,17,30,8,49,-12r0,20v-16,13,-37,22,-56,5v-27,55,-104,49,-104,-18v0,-52,45,-99,97,-97xm47,-58v0,40,32,50,49,14v-25,-30,-22,-69,8,-93v-40,-8,-57,41,-57,79",w:157},p:{d:"177,-100v0,54,-60,133,-112,93v-8,37,-15,67,-17,89r-44,8v8,-55,18,-110,31,-166v-18,21,-22,35,-35,37r0,-16v22,-24,41,-53,55,-87r40,-7r-7,30v13,-16,25,-30,49,-30v25,0,40,22,40,49xm133,-90v0,-35,-35,-36,-46,-9v-7,16,-14,52,-19,74v6,10,13,15,20,15v26,1,45,-53,45,-80",w:202,k:{y:16,p:14,h:16,e:18,a:7,"\\":-9,".":29,",":43}},q:{d:"2,-39v2,-57,45,-111,98,-111v15,0,25,8,30,22v17,-6,21,-22,43,-22r-46,166v19,-27,42,-52,65,-75r0,20v-44,46,-72,86,-84,121v-19,2,-34,5,-45,8r36,-126v-21,26,-41,40,-60,40v-23,0,-38,-19,-37,-43xm46,-43v0,8,8,16,16,16v26,3,58,-62,56,-88v0,-10,-7,-21,-16,-21v-28,-3,-58,67,-56,93"},r:{d:"97,-31v19,-2,18,-11,38,-28r0,20v-29,29,-52,43,-68,43v-15,0,-26,-15,-25,-31v0,-17,8,-39,26,-67v-9,4,-18,8,-28,10v-8,14,-20,29,-36,45v-8,1,-3,-11,-4,-16v9,-9,18,-19,25,-30v-32,-12,-8,-67,19,-64v23,2,13,24,6,45v19,-2,36,-16,51,-44r16,-1v-10,34,-27,64,-32,102v-1,9,3,17,12,16",w:131},s:{d:"54,-14v26,-5,39,-35,18,-61v-9,-11,-13,-23,-16,-31v-14,22,-31,44,-52,67v-8,1,-3,-11,-4,-16v29,-31,48,-59,58,-87v11,-2,31,-8,41,-6v-14,29,16,52,17,76v2,33,-45,76,-79,76v-13,0,-32,-8,-32,-19v-2,-4,20,-30,24,-28v9,-1,11,32,25,29",w:146,k:{e:11,"\\":-9,".":22,",":43}},t:{d:"62,-30v22,0,26,-12,43,-29r0,20v-23,22,-37,40,-69,43v-52,-7,-31,-83,-17,-121r-14,1r6,-28r16,-1r17,-55r47,-9r-18,61r25,-1r-6,27r-27,2v-6,20,-18,51,-18,72v-1,11,6,18,15,18",w:101},u:{d:"167,-149v-15,50,-22,67,-28,104v3,29,21,16,38,0r15,-14r0,20v-24,21,-37,43,-67,43v-20,0,-30,-17,-29,-41v-21,21,-35,41,-65,41v-20,0,-29,-18,-29,-41v0,-24,8,-59,24,-103r47,-9v-19,56,-29,92,-29,108v0,26,22,18,36,2v25,-28,26,-65,40,-101"},v:{d:"98,-47v-22,-37,-3,-98,33,-102v8,0,12,6,12,18v0,24,-10,52,-29,83v19,15,31,8,48,-11r0,20v-14,13,-38,19,-55,3v-21,26,-43,40,-66,40v-67,0,-31,-103,-14,-144r48,-9v-11,35,-27,67,-31,108v5,36,37,23,54,-6",w:157},w:{d:"183,-47v-22,-36,-2,-99,34,-102v8,0,11,6,11,17v0,25,-9,53,-28,84v18,16,29,8,48,-11r0,20v-15,13,-38,19,-55,3v-30,39,-79,61,-102,13v-27,38,-90,38,-89,-17v1,-41,11,-64,25,-101r47,-8v-9,28,-31,91,-30,109v3,30,32,25,44,-1v-1,-34,15,-71,24,-100r47,-8v-9,31,-27,75,-29,107v6,39,42,17,53,-5",w:243},x:{d:"126,-37v0,13,7,22,19,22v16,0,36,-15,62,-44r0,20v-29,29,-55,43,-77,43v-21,0,-34,-11,-40,-35v-12,24,-28,35,-48,35v-20,0,-47,-18,-22,-33v20,-25,18,18,34,15v29,-5,40,-66,40,-94v0,-13,-5,-19,-14,-19v-22,-5,-52,80,-80,88r0,-16v29,-29,48,-94,95,-94v20,0,32,11,36,34v11,-19,17,-33,41,-34v15,-1,27,12,27,24v0,2,-25,34,-26,15v-1,-7,-5,-19,-13,-19v-18,0,-34,75,-34,92",w:202},y:{d:"32,2v-59,-13,-17,-107,-2,-142r51,-9v-12,29,-37,80,-37,109v0,28,23,15,36,-2v20,-26,30,-65,43,-98r48,-9r-45,137v27,-12,49,-28,66,-47r0,20v-15,14,-39,29,-72,44v-17,47,-34,80,-79,85v-15,2,-25,-10,-25,-25v0,-23,22,-44,64,-63r10,-37v-22,25,-41,37,-58,37xm75,20v-21,10,-43,22,-45,45v0,8,3,12,10,12v13,0,25,-19,35,-57"},z:{d:"135,-31v23,-2,24,-12,41,-28r0,20v-25,25,-28,39,-59,43v-8,1,-44,-12,-52,-11v-17,-2,-18,17,-35,10v13,-24,68,-86,90,-115v-18,3,-37,3,-54,-3v-21,30,-42,56,-62,76v-8,1,-3,-11,-4,-16v23,-22,58,-71,72,-94v28,8,68,0,90,2v-11,25,-64,82,-85,109v22,-3,38,5,58,7",w:172},"{":{d:"101,-27v-5,35,-25,87,25,92r0,8v-39,1,-72,-22,-72,-56v0,-37,27,-93,-25,-97r0,-10v71,-11,-3,-99,43,-135v13,-10,30,-18,54,-18r0,8v-52,7,-26,53,-26,92v0,32,-24,51,-57,58v35,9,54,27,58,58",w:141},"|":{d:"112,90r-28,0r0,-360r28,0r0,360",w:196},"}":{d:"88,-187v0,37,-27,92,25,97r0,10v-72,12,5,102,-44,135v-12,12,-30,18,-53,18r0,-8v51,-5,25,-55,25,-92v0,-31,25,-51,58,-58v-33,-9,-58,-26,-58,-58v0,-35,27,-88,-25,-92r0,-8v39,-2,72,23,72,56",w:141},"~":{d:"70,-146v30,-1,74,32,105,32v18,0,28,-11,30,-32r11,0v-1,33,-18,55,-48,57v-43,3,-119,-72,-133,0r-11,0v0,-34,17,-56,46,-57",w:240},"":{w:90}}}),Cufon.registerFont({w:262,face:{"font-family":"Segoesc","font-weight":400,"font-stretch":"normal","units-per-em":"360","panose-1":"2 11 5 4 2 0 0 0 0 3",ascent:"288",descent:"-72","cap-height":"2",bbox:"-35 -361 417.114 177.8","underline-thickness":"25.1367","underline-position":"-10.8984","unicode-range":"U+0020-U+007E"},glyphs:{" ":{w:143},"!":{d:"43,-142v17,-41,1,-106,37,-120v5,1,15,6,14,12v-8,50,-26,96,-29,151v3,15,-18,11,-26,7v0,-18,1,-35,4,-50xm25,-21v-1,-18,26,-36,37,-14v5,20,-35,50,-37,14",w:116},'"':{d:"104,-215v5,-15,1,-59,27,-44v6,33,-11,86,-20,119v-13,5,-20,-4,-20,-17v0,-7,13,-52,13,-58xm23,-160v9,-33,11,-72,23,-101v23,-6,17,25,13,44v-4,16,-9,34,-10,54v-2,8,-4,21,-14,21v-9,1,-12,-10,-12,-18",w:145},"#":{d:"244,-83v-20,-12,-44,2,-72,0v-3,12,-12,28,-10,45v0,7,-4,18,-12,17v-17,-7,-7,-39,-3,-55v-12,-1,-40,6,-53,7v-13,41,-20,67,-34,45v0,-15,5,-29,13,-45v-23,-3,-60,8,-65,-9v6,-24,44,-13,70,-13v7,-12,9,-38,16,-51v-23,-1,-40,6,-61,7v-22,1,-27,-12,-13,-18r72,-12v22,-12,16,-55,43,-62v17,9,-14,49,-13,60r57,-7r20,-80v5,-8,22,-8,20,5v-4,25,-16,48,-21,72v22,-2,44,-8,67,-5v12,-3,13,18,5,20v-30,1,-55,1,-78,7r-13,47v16,19,73,-30,78,14v1,6,-7,11,-13,11xm99,-94v23,-2,43,0,58,-9v4,-17,11,-32,14,-50v-19,3,-42,3,-58,9v-6,14,-10,30,-14,50",w:286},$:{d:"123,-277v21,2,5,42,6,59v20,3,51,-16,53,10v1,23,-34,8,-55,14v0,19,-9,47,-3,61v17,13,43,13,41,44v-1,25,-31,35,-53,43v-2,28,-6,56,-1,82v-9,14,-29,5,-27,-17r4,-53v-22,3,-42,11,-64,13v-7,1,-19,-3,-19,-9v5,-36,59,-16,85,-33v2,-21,6,-39,6,-62v-17,-11,-68,-18,-64,-51v3,-23,49,-33,72,-37v5,-22,-10,-67,19,-64xm103,-190v-33,8,-59,15,-26,31v10,5,17,8,22,10xm115,-69v10,-8,42,-16,19,-35v-6,-6,-11,-9,-15,-11v-2,17,-4,31,-4,46",w:197},"%":{d:"189,-105v28,2,55,11,55,40v0,38,-30,52,-66,55v-24,2,-32,-17,-32,-34v0,-27,20,-56,43,-61xm26,-170v8,-37,24,-76,68,-77v5,0,10,4,16,10r91,8v9,14,-14,20,-16,33r-75,123v-13,22,-17,52,-38,66v-24,-56,54,-123,76,-174r18,-29v-17,-4,-34,-8,-55,-5v12,44,-21,83,-61,83v-20,0,-23,-18,-24,-38xm65,-153v24,-6,38,-36,23,-67v-29,-1,-38,28,-40,54v-1,12,10,12,17,13xm175,-32v29,7,64,-27,36,-45v-22,-14,-41,3,-40,31v0,7,1,12,4,14"},"&":{d:"242,-135v26,1,65,-15,79,1v-7,28,-57,6,-67,37v-7,20,-22,39,-32,56v10,16,51,19,74,11v8,1,16,1,15,10v-21,36,-92,19,-117,-1v-25,13,-44,34,-80,34v-43,0,-83,-20,-83,-63v0,-47,34,-68,64,-88v10,-12,-1,-39,0,-60v2,-38,13,-67,52,-67v25,0,39,22,39,50v0,42,-38,57,-55,80v12,38,36,63,65,84v20,-11,22,-41,34,-60v-18,-4,-46,4,-44,-22v10,-20,36,-3,56,-2xm124,-159v21,-12,58,-69,15,-81v-25,6,-20,54,-15,81xm63,-52v6,50,79,38,108,18v-25,-24,-49,-50,-65,-81v-21,11,-40,33,-43,63",w:332},"'":{d:"58,-260v29,22,-21,62,-9,110v-2,8,-4,15,-12,16v-14,-3,-15,-25,-12,-42v5,-29,13,-76,33,-84",w:83},"(":{d:"100,68v10,11,1,22,-13,21v-65,-26,-92,-139,-67,-224v16,-55,49,-120,111,-141v20,24,-29,45,-43,66v-22,34,-48,73,-52,124v8,55,13,115,49,140v8,5,12,10,15,14",w:144,k:{j:-86}},")":{d:"7,-260v-8,-7,4,-19,13,-19v80,47,127,242,48,330v-14,16,-27,55,-46,27v30,-53,82,-113,57,-202v-15,-54,-37,-106,-72,-136",w:130},"*":{d:"87,-179v-17,16,-32,87,-54,49v6,-13,28,-38,35,-51v-23,-3,-39,5,-58,8v-12,-18,14,-23,27,-24v19,0,30,-2,36,-4v-7,-14,-39,-38,-23,-50v7,0,19,13,37,38v16,-15,26,-37,46,-49v17,0,9,16,1,20v-11,19,-15,22,-27,34v21,8,64,-23,72,6v-5,17,-51,4,-71,14v9,16,33,34,38,51v-23,29,-40,-30,-59,-42",w:185,k:{J:50,A:47}},"+":{d:"103,-187v20,12,1,53,7,78v28,5,82,-15,80,20v-16,12,-53,-3,-80,3v-6,13,-1,42,-5,61v-1,7,-1,11,-9,11v-28,-5,-4,-44,-7,-72v-27,-5,-91,13,-64,-22v21,3,42,2,65,1v9,-24,-12,-72,13,-80",w:205},",":{d:"78,-55v4,0,23,5,22,9v23,53,-21,85,-69,92v-3,0,-6,-2,-6,-8v0,-2,1,-4,2,-5v39,-5,62,-38,44,-76v-1,-3,4,-12,7,-12",w:123,k:{9:94,7:72,2:-36,0:-25}},"-":{d:"100,-116v37,8,92,-15,117,11v7,29,-29,9,-52,14v-27,-4,-56,0,-84,0v-11,0,-19,-1,-19,-11v0,-15,29,-13,38,-14",w:230},".":{d:"24,-41v2,-7,39,-15,41,4v2,19,-36,49,-42,20",w:90,k:{9:94,7:72,2:-36,0:-25}},"/":{d:"182,-275v23,-2,27,19,4,42r-163,243v-9,21,-21,12,-26,-1v47,-101,113,-174,167,-263v6,-8,12,-15,18,-21",w:207},0:{d:"160,-236v71,0,125,78,81,145v-34,52,-95,95,-179,95v-38,0,-60,-30,-58,-67v5,-96,67,-173,156,-173xm55,-129v-26,38,-28,109,29,104v55,-6,104,-46,132,-82v28,-34,-5,-80,-30,-95v-14,13,-29,-12,-50,0v-38,11,-61,44,-81,73",k:{".":22,",":43}},1:{d:"144,-49v25,-1,63,-18,94,-17v4,8,6,17,2,22v-25,13,-66,10,-92,22v7,16,-9,22,-26,17v-17,-30,-86,39,-97,-7v11,-25,63,-17,88,-32v3,-53,11,-102,18,-151v-25,4,-51,34,-85,34v-7,0,-10,-4,-8,-11v7,-27,49,-24,65,-41v15,-8,38,-24,53,-29v7,-1,14,15,14,21v-16,46,-30,114,-26,172"},2:{d:"179,-43v33,8,63,-15,72,8v0,18,-21,26,-40,24v-61,-8,-152,-18,-181,26v-8,6,-28,4,-26,-9v9,-60,80,-59,112,-97v21,-24,51,-43,56,-81v-6,-29,-41,-52,-70,-27v-23,10,-28,33,-57,37v-8,-4,-18,-29,0,-32v31,-18,49,-45,99,-44v33,1,56,35,66,61v-14,60,-68,106,-115,132"},3:{d:"46,-233v36,23,98,4,148,3v33,-1,21,32,3,38v-21,16,-49,26,-65,48v52,-5,99,1,104,50v-14,76,-120,114,-205,86v-12,-9,-10,-38,10,-36v51,35,153,3,164,-45v-4,-44,-92,-36,-122,-19v-22,-1,-9,-21,0,-28r78,-64v-35,0,-63,8,-97,8v-19,1,-31,-10,-31,-28v1,-7,5,-13,13,-13",k:{".":36,",":36}},4:{d:"176,-119v15,12,84,-9,73,26v-8,26,-44,-6,-77,2v-8,27,-11,67,4,86v-2,8,-8,18,-17,18v-39,0,-18,-67,-16,-102v-50,-8,-88,20,-128,9v-23,-23,36,-52,50,-70r110,-90v14,-11,21,-14,31,-3v-12,40,-22,81,-30,124xm61,-107v19,-7,64,-4,88,-11v3,-27,17,-59,18,-84r-109,92v0,2,1,3,3,3"},5:{d:"25,-23v1,-43,49,0,75,-3v35,-3,75,-15,84,-46v-1,-50,-64,-39,-104,-48v-9,-2,-27,-10,-27,-19v15,-25,36,-84,82,-84v41,0,86,0,118,-11v10,1,22,5,25,13v-12,47,-107,9,-155,27v-13,13,-23,30,-33,44v50,20,132,5,126,74v-6,76,-137,106,-191,53"},6:{d:"162,-130v65,-13,106,55,52,91v-32,21,-49,39,-108,39v-84,0,-93,-101,-47,-152v29,-33,51,-71,100,-83v16,-4,22,24,9,28v-52,16,-82,62,-105,106v-15,29,-3,60,20,68v-2,-61,29,-87,79,-97xm199,-60v28,-21,6,-44,-28,-44v-46,0,-65,29,-67,73v38,11,72,-12,95,-29"},7:{d:"60,-229v67,14,163,-17,193,8v-43,68,-99,118,-116,208v-2,10,-6,17,-16,18v-36,-10,-3,-58,5,-75v24,-50,52,-91,85,-131v-39,-6,-105,6,-155,2v-16,-1,-10,-29,4,-30",k:{".":72,",":72}},8:{d:"210,-194v5,2,10,9,11,14v-11,32,-44,48,-68,68v25,13,55,31,54,68v-1,42,-51,42,-90,48v-57,8,-93,-49,-43,-84v13,-9,26,-17,37,-27v-35,-11,-83,-58,-38,-90v21,-15,43,-34,77,-34v29,0,52,17,51,50v2,-3,6,-11,9,-13xm135,-123v15,-13,37,-26,42,-50v-6,-56,-81,-24,-93,6v4,27,35,32,51,44xm108,-21v35,0,93,-9,64,-48v-9,-12,-27,-22,-39,-28v-17,12,-51,36,-53,60v-1,11,18,17,28,16",k:{".":29,",":29}},9:{d:"56,-165v26,-45,119,-98,169,-39v1,1,2,4,3,10v-16,55,-46,101,-46,167v0,18,-4,26,-12,26v-15,0,-17,-15,-19,-27v4,-26,16,-61,22,-86v-24,4,-53,30,-87,25v-29,-5,-48,-44,-30,-76xm76,-137v20,54,112,1,116,-40v14,-17,-5,-29,-25,-28v-48,1,-80,31,-91,68",k:{".":43,",":43}},":":{d:"59,-178v10,6,22,6,20,22v-2,12,-12,23,-28,22v-21,-5,-17,-45,8,-44xm33,-24v-7,-27,35,-37,42,-13v4,25,-42,52,-42,13",w:107},";":{d:"60,-178v10,6,25,5,24,22v1,11,-18,19,-28,19v-7,0,-12,-12,-12,-18v3,-6,5,-26,16,-23xm46,-46v-1,-15,24,-15,28,-4v23,56,-25,87,-69,94v-4,1,-5,-10,-3,-13v37,-3,64,-40,44,-77",w:118},"<":{d:"54,-114v34,22,71,38,109,54v16,6,8,30,-6,30r-111,-56v-61,-26,4,-51,20,-75v25,-21,54,-40,76,-64v7,-6,22,-3,21,8v4,14,-84,75,-109,103",w:193},"=":{d:"70,-181v52,9,109,-22,124,17v-1,28,-30,4,-51,12v-34,-4,-67,3,-101,3v-10,0,-17,-1,-16,-12v0,-20,27,-18,44,-20xm50,-87v52,0,124,-16,147,17v-1,21,-27,10,-44,10r-111,2v-3,0,-14,-15,-13,-19v-1,-6,14,-10,21,-10",w:225},">":{d:"34,-196v-13,-28,7,-28,24,-13v35,31,92,54,128,81v1,26,-39,32,-52,50v-19,14,-40,54,-66,64v-22,-3,-13,-28,1,-33v22,-29,50,-49,77,-73v-29,-36,-85,-41,-112,-76",w:206},"?":{d:"104,-267v83,-20,107,83,54,124v-18,14,-46,19,-69,27v-9,17,-2,51,-33,48v-17,-56,38,-83,85,-96v27,-15,22,-82,-20,-76v-26,-2,-39,7,-45,25v-3,6,-30,12,-28,-5v3,-23,34,-42,56,-47xm29,-10v0,-11,26,-29,37,-14v8,0,12,3,12,10v0,25,-49,32,-49,4",w:185},"@":{d:"135,-250v70,-41,139,24,142,96v2,51,-60,105,-96,63v-14,10,-36,25,-59,25v-45,0,-39,-63,-10,-87v11,-15,26,-35,46,-35v18,0,36,1,35,22v2,7,23,-8,22,9v-5,15,-13,27,-14,46v0,8,4,8,12,8v23,0,43,-25,43,-49v0,-52,-55,-117,-110,-78v-50,36,-88,80,-104,148v14,91,171,74,220,26v21,7,5,35,-13,38v-77,39,-226,38,-231,-64v12,-74,62,-136,117,-168xm174,-116v-3,-25,18,-58,-17,-45v-21,8,-37,34,-42,58v-2,11,7,14,19,13v15,-1,36,-14,40,-26",w:296},A:{d:"191,-265v20,-2,14,24,13,42v31,59,42,139,78,189v24,20,1,52,-16,33v-21,-22,-31,-59,-42,-88v-36,13,-80,19,-121,27v-23,5,-37,67,-71,72v-14,1,-28,-6,-28,-16v4,-11,14,-3,23,-16r120,-169v15,-23,33,-77,44,-74xm215,-115v-10,-28,-18,-60,-31,-84r-68,104v37,0,69,-13,99,-20",w:301,k:{y:-4,w:7,v:14,t:-14,Z:-5,Y:14,W:-9,V:11,U:-14,T:14,O:-7,C:-7,";":-18,":":-18,".":-16,",":-16,"*":14}},B:{d:"194,-153v45,8,84,49,56,99v-22,40,-61,73,-117,73v-18,0,-39,-6,-39,-25v1,-30,44,-8,59,-8v45,0,69,-35,78,-75v-5,-43,-68,-49,-102,-31v-7,-1,-17,-5,-17,-13v-1,-19,16,-22,34,-23v31,-8,57,-31,69,-57v-21,-39,-132,-18,-132,38v0,49,-10,90,-7,140v1,17,-3,29,-18,29v-42,-8,-6,-86,-9,-123v12,-42,-16,-107,40,-110v42,-18,146,-50,153,23v-4,29,-25,43,-48,63",w:271},C:{d:"72,-134v-21,38,-39,128,27,123v93,-8,141,-68,196,-114v26,28,-30,58,-51,76v-38,31,-82,60,-146,64v-110,6,-75,-152,-29,-198v35,-35,71,-72,131,-80v63,-8,48,77,8,84v-34,-7,3,-38,10,-51v-67,-14,-118,47,-146,96",w:265,k:{"}":-36,"]":-36,Y:-22,V:-22,Q:22,G:27,C:29,A:7,"?":-36,")":-36}},D:{d:"72,-247v94,0,215,-19,226,88v-19,97,-131,115,-211,151v-49,22,-47,-33,-41,-76v6,-42,21,-86,20,-127v-18,-7,-13,-36,6,-36xm82,-46v78,-23,170,-37,185,-113v-4,-68,-99,-61,-165,-55r-24,147v0,9,1,16,4,21",w:312,k:{y:29,x:29,w:22,v:14,t:-50,s:14,n:14,m:14,f:14,d:14,J:58,A:36,".":58,",":58}},E:{d:"228,-145v-5,44,-96,17,-147,32v-5,26,-15,49,-17,77v57,9,132,-5,181,-20v20,4,13,32,-5,35r-192,28v-49,-23,9,-101,2,-155v6,-56,-8,-117,75,-99v54,12,98,-12,143,-15v24,31,-22,38,-51,39r-127,5v-6,19,-5,46,-7,69v39,16,98,-1,136,-10v7,1,9,6,9,14",w:270,k:{"}":-22,z:-22,t:-29,"]":-22,Y:-14,X:-14,W:-7,V:-29,J:-7,")":-22}},F:{d:"214,-263v20,2,14,34,-5,34v-44,0,-88,1,-119,15v-10,25,-16,62,-16,97r109,-26v12,0,17,5,19,15v-22,37,-94,19,-133,45v-6,21,-3,52,-4,80v0,11,-2,20,-15,18v-55,-47,23,-173,0,-248v3,-18,20,-18,39,-14v42,-2,81,-21,125,-16",w:209,k:{"}":-43,t:-29,"]":-43,Y:-29,W:-18,V:-29,T:-29,S:-23,J:14,A:29,".":27,",":27,")":-43}},G:{d:"155,-243v32,-15,117,-54,129,1v2,9,-6,20,-16,19v-11,-2,-15,-15,-28,-15v-92,16,-175,71,-185,173v3,21,24,34,51,31v57,-6,105,-28,124,-74v-3,-11,-8,-20,13,-19v5,-1,27,14,25,19v-16,31,-37,69,-41,110v7,13,6,32,-14,31v-32,-3,-6,-52,-8,-71v-25,9,-69,36,-104,34v-39,-2,-83,-20,-83,-59v0,-74,73,-149,137,-180",w:289,k:{"}":-22,"]":-22,V:-29,T:-22,")":-22}},H:{d:"35,-44v23,-70,6,-185,43,-221v42,17,-2,82,3,124v29,18,100,-1,139,-4v31,-15,20,-78,26,-127v2,-17,34,-19,36,-1v-10,84,-31,160,-28,258v0,21,-37,33,-37,8v0,-34,10,-64,10,-99v-24,-21,-88,3,-131,-1r-19,3v-10,19,-11,50,-11,79v0,36,-28,47,-37,14v1,-11,3,-24,6,-33",w:296},I:{d:"95,-237v-12,63,-31,129,-32,207v10,16,-3,31,-20,32v-45,-55,15,-172,18,-245v1,-7,6,-14,12,-16v12,1,21,9,22,22",w:111,k:{z:14,w:22,v:29}},J:{d:"193,-253v17,110,11,254,-98,254v-36,0,-74,-6,-86,-32v9,-40,54,3,81,3v96,-3,71,-131,73,-224v5,-9,28,-16,30,-1",w:220,k:{"}":-54,w:14,v:14,t:-14,s:7,o:-7,m:7,"]":-54,V:-14,A:22,".":18,",":18,")":-54}},K:{d:"118,-108v51,18,90,55,156,46v10,16,-4,33,-20,35v-64,-11,-100,-48,-169,-58v-19,16,-6,65,1,81v0,10,-12,13,-20,16v-34,-15,-22,-81,-21,-124r3,-134v-1,-18,30,-19,33,-4v-5,39,-4,80,-6,124v-1,12,9,6,15,3v60,-26,92,-101,144,-134v17,5,15,27,5,38v-3,8,-18,7,-22,14v-24,42,-61,72,-99,97",w:281,k:{x:14,v:22,t:-14,g:-14,d:-14,Y:14,X:-29,T:22,J:-43}},L:{d:"230,-41v15,11,-1,32,-22,30v-61,-4,-98,19,-150,26v-52,-10,-5,-90,-5,-133v0,-36,13,-68,14,-107v-8,-35,45,-45,39,-10r-36,209v-1,4,4,9,9,8v51,-6,95,-29,151,-23",w:243,k:{v:11,s:-7,l:14,d:-14,c:-14,Y:22,V:14,U:-14,T:29,Q:-7,J:-29,A:-7}},M:{d:"303,-271v4,-18,28,-8,32,5v-23,65,-21,160,-21,248v4,5,15,8,15,17v0,8,-13,20,-21,19v-61,-34,-8,-156,-16,-229r-95,131v-60,44,-82,-72,-103,-133v-13,62,-45,119,-31,192v-1,8,-11,25,-24,17v-45,-27,7,-103,9,-146r24,-91v3,-6,6,-9,10,-9v45,-5,40,38,51,68v10,28,23,55,41,82",w:361,k:{t:-14}},N:{d:"66,-36v9,36,-21,69,-34,38v1,-81,37,-149,37,-231v0,-21,32,-21,36,-1v16,78,67,132,108,187r35,-222v2,-11,12,-17,25,-17v29,36,-7,91,-12,136v-5,45,-18,82,-18,133v-20,48,-47,-6,-60,-24v-32,-46,-64,-89,-91,-141v-12,42,-20,96,-26,142",w:301},O:{d:"203,-68v48,-40,65,-178,-33,-164v-69,10,-95,69,-115,130v-22,69,46,108,103,70v16,-10,34,-22,45,-36xm91,-223v57,-54,200,-41,187,60v-12,93,-71,150,-150,173v-96,28,-130,-81,-89,-160v14,-26,32,-54,52,-73",w:289,k:{J:22,A:29,".":43,",":43}},P:{d:"42,-235v55,-31,213,-55,235,17v-21,82,-113,108,-187,139v-2,29,4,56,3,87v1,8,-7,15,-15,14v-14,3,-22,-37,-19,-89v3,-59,10,-119,34,-158v42,1,-3,56,2,88v-1,10,-3,18,-3,29v50,-22,104,-40,139,-78v15,-17,32,-40,4,-46v-66,-15,-132,-1,-189,20v-11,-1,-10,-17,-4,-23",w:281,k:{t:-18,q:22,o:18,g:22,e:-4,d:5,c:22,a:9,Y:-36,W:-23,V:-29,J:54,G:5,A:40,".":65,",":65}},Q:{d:"110,-234v27,-24,96,-51,106,1v42,29,91,105,43,161v-17,20,-37,36,-59,50v15,21,38,38,49,64v-1,12,-23,25,-31,12v-14,-22,-29,-44,-46,-62v-61,20,-158,12,-154,-63v4,-75,49,-124,92,-163xm253,-127v-8,-52,-42,-86,-82,-106v-68,13,-96,72,-117,131v-23,62,34,93,97,72v-9,-18,-42,-40,-7,-50v25,-7,18,33,40,34v36,-11,60,-43,69,-81",w:299,k:{A:14}},R:{d:"262,-183v0,44,-47,63,-80,82r139,95v-45,41,-97,-32,-134,-56v-36,-24,-25,-26,-74,-24v-13,-12,-4,-36,20,-30v39,-6,69,-23,90,-47v35,-41,-33,-73,-85,-65r-48,8v32,61,-28,153,5,216v-17,19,-50,4,-41,-30v2,-61,23,-113,13,-179v-13,4,-20,6,-22,6v-15,-3,-11,-21,4,-25v62,-31,213,-41,213,49",w:315,k:{z:-14,w:14,v:14,J:-29,";":-86,":":-86,".":-86,",":-86}},S:{d:"15,-20v58,16,135,-2,154,-49v-36,-49,-149,-26,-153,-113v13,-55,71,-72,138,-74v34,0,70,23,48,56v-3,3,-8,6,-15,6v-1,-63,-117,-29,-136,1v-24,84,164,42,146,136v-28,46,-79,74,-148,74v-17,0,-45,-5,-42,-23v1,-5,3,-13,8,-14",w:220,k:{t:-29}},T:{d:"51,-224v82,0,168,-52,227,-15v5,44,-110,-11,-129,43v-3,60,-20,124,-7,181v-2,9,-5,20,-15,20v-26,-6,-21,-43,-21,-74v0,-42,11,-89,14,-128v1,-5,-3,-5,-8,-5v-35,-1,-82,17,-107,1v-5,-25,25,-23,46,-23",w:252,k:{"}":-36,e:22,"]":-36,Y:-65,W:-43,V:-36,Q:11,J:65,A:65,".":43,",":43,")":-36}},U:{d:"263,-247v0,113,4,251,-132,251v-91,0,-115,-97,-89,-184v8,-28,4,-65,19,-86v25,-13,26,17,20,39v-19,69,-44,193,47,201v94,9,91,-77,96,-160v2,-30,0,-69,27,-73v8,-1,12,5,12,12",w:278,k:{A:20}},V:{d:"248,-247v9,-1,16,18,16,26v-19,78,-98,149,-125,223v-48,-1,-49,-70,-71,-104v-20,-52,-46,-98,-61,-155v6,-15,26,-13,29,5r77,183v8,17,12,26,14,27v45,-55,86,-128,115,-200v1,-4,3,-5,6,-5",k:{"}":-29,y:29,u:36,s:14,r:29,q:29,p:22,o:14,n:29,m:29,i:14,e:22,d:22,c:22,a:22,"]":-29,W:-14,V:-29,Q:7,O:7,J:52,G:9,C:13,A:54,")":-29}},W:{d:"335,-275v5,-15,29,-12,27,8v-8,104,-47,185,-80,259v-48,26,-55,-71,-80,-104v-7,-15,-6,-15,-11,-27v-28,41,-58,119,-91,156v-31,-5,-35,-51,-41,-78r-39,-174v1,-12,16,-20,23,-3v27,62,35,144,56,209v28,-50,57,-95,80,-151v10,-13,19,-12,29,11r30,70v14,33,24,52,28,58v36,-63,63,-143,69,-234",w:364,k:{z:36,y:29,x:36,w:43,v:36,u:22,t:-14,n:14,m:29,i:29,g:29,e:29,c:22,a:22,A:22}},X:{d:"140,-135v31,43,75,83,118,114v0,9,-14,22,-23,21v-39,-14,-89,-78,-117,-114v-41,33,-74,76,-104,120v-10,5,-16,-12,-14,-23v9,-53,77,-82,100,-122v-6,-18,-45,-75,-50,-101v-4,-20,22,-39,28,-10v14,33,28,64,48,91r89,-97v10,-14,39,-11,35,11v-2,15,-29,10,-34,29v-21,32,-52,54,-76,81",w:264,k:{J:-18}},Y:{d:"222,-293v4,-17,38,-14,30,5v-19,44,-65,78,-87,120v-33,32,-23,107,-30,166v-6,15,-35,15,-35,-5v0,-44,15,-92,9,-134v-41,-24,-61,-68,-94,-97v-3,-3,-5,-7,-5,-9v7,-11,32,-20,41,-2v23,24,41,54,67,75v32,-2,42,-47,63,-63",w:245,k:{"}":-29,z:58,y:58,x:43,w:43,v:72,u:58,s:43,r:58,q:29,p:29,o:43,n:58,m:36,g:43,f:43,e:65,d:65,c:65,a:36,"]":-29,W:-14,V:-22,Q:20,O:20,J:50,G:32,C:32,B:18,A:50,")":-29}},Z:{d:"50,-245v64,35,181,-23,216,15r-163,178v71,-4,145,-27,215,-25v9,4,11,24,-5,22r-205,31v-14,1,-28,3,-42,3v-11,8,-42,31,-45,1v30,-44,82,-63,112,-106v20,-29,42,-56,70,-78v-43,-17,-131,22,-169,-14v1,-14,0,-28,16,-27",w:305},"[":{d:"47,-187v2,-39,-37,-85,32,-85v25,0,71,-6,68,17v-3,22,-50,8,-73,15v-2,18,-1,68,-2,81r-10,200v-6,32,28,14,49,12v16,-2,17,20,10,27v-19,9,-55,8,-75,16v-26,-8,-13,-57,-11,-94",w:146,k:{j:-86}},"\\":{d:"15,-248v-20,-19,-1,-49,19,-30r72,124v28,60,64,112,87,177v1,12,-18,16,-27,12r-97,-195",w:197},"]":{d:"19,-253v6,-37,63,-18,101,-30v7,-1,19,10,17,17v-27,91,-34,220,-34,335v0,26,-34,9,-55,13v-18,0,-45,9,-51,-5v-3,-35,40,-23,75,-25v11,-88,2,-215,32,-298v0,-3,-1,-4,-4,-4v-27,-1,-40,5,-62,8v-5,0,-20,-5,-19,-11",w:150},"^":{d:"44,-115v-6,17,-29,19,-30,-1v26,-44,55,-77,78,-114v7,-12,24,-11,27,4v22,39,62,68,78,113v-10,29,-26,0,-34,-11r-57,-76v-27,15,-49,65,-62,85",w:207},_:{d:"0,14v58,4,138,-19,161,13v-4,22,-41,-1,-67,7r-94,2v-8,0,-11,-5,-11,-12v0,-6,5,-10,11,-10",w:150},"`":{d:"87,-184v-20,-24,-96,-51,-64,-73v30,10,46,37,72,49v16,8,7,29,-8,24",w:113},a:{d:"181,-55v51,-6,75,-46,105,-72v12,38,-40,62,-64,85v-25,24,-85,21,-91,-18v-25,25,-47,54,-91,60v-68,-52,11,-183,96,-176v63,6,-20,111,45,121xm47,-29v52,-9,90,-53,86,-113v0,-7,-4,-11,-12,-10v-50,12,-77,58,-82,111v0,6,3,11,8,12",w:236,k:{".":-36,",":-36}},b:{d:"195,-73v33,-13,78,-67,107,-55v-34,58,-115,69,-159,115v-12,13,-28,31,-53,34v-21,2,-21,-20,-5,-26v36,-30,93,-46,98,-106v2,-32,-31,-46,-52,-21v-27,32,-65,60,-66,119v0,6,-6,11,-13,11v-39,-43,4,-167,5,-235v5,-16,4,-47,28,-41v6,2,8,9,7,18v-11,55,-25,111,-26,176v20,-37,49,-79,96,-87v47,2,59,64,33,98",w:244,k:{".":-22,",":-22}},c:{d:"44,-54v9,53,85,20,110,1v30,-23,58,-59,93,-73v-3,37,-53,55,-74,81v-33,41,-155,80,-155,-12v0,-50,30,-87,58,-115v28,-28,49,10,53,35v2,13,-12,33,-21,13r-13,-29v-35,13,-46,55,-51,99",w:188,k:{".":-14,",":-14}},d:{d:"195,-52v46,-7,80,-52,109,-78v6,41,-50,74,-78,98v-42,35,-63,-28,-64,-72v-25,44,-70,102,-130,104v-38,-10,-15,-77,-2,-99v16,-29,38,-63,66,-81v8,-5,20,-7,36,-7v19,0,24,32,26,51v9,-29,12,-62,15,-98v2,-21,-1,-44,20,-43v7,0,16,2,16,8v0,59,-25,108,-23,176v1,12,1,38,9,41xm144,-110v-21,-8,4,-55,-26,-56v-36,19,-71,77,-81,124v3,25,22,16,39,5v32,-23,50,-42,68,-73",w:254,k:{".":-43,",":-43}},e:{d:"55,-67v3,61,93,26,115,4v27,-18,46,-45,73,-62v1,0,2,2,2,4v-35,55,-79,116,-158,116v-100,0,-56,-176,9,-189v21,-9,41,8,41,29v0,54,-48,69,-82,98xm55,-93v21,-18,69,-41,50,-76v-30,0,-43,45,-50,76",w:189,k:{".":-43,",":-43}},f:{d:"104,-130v38,0,73,-7,102,-5v-13,36,-75,25,-122,31v-16,72,-1,182,-73,196v-19,4,-24,-25,-7,-30v51,5,34,-78,49,-126r2,-31v1,-10,-11,-8,-11,-18v0,-5,20,-28,20,-34v7,-55,17,-115,68,-121v46,-5,38,69,5,79v4,-17,7,-51,-8,-56v-34,13,-38,64,-43,108v0,5,6,7,18,7",w:143,k:{"}":-94,"]":-94,"?":-29,"*":-115,")":-94}},g:{d:"161,-165v-13,81,0,186,-46,236v-37,39,-115,0,-125,-44v1,-10,9,-2,12,1v21,23,48,32,73,32v56,0,42,-77,52,-128v-22,22,-52,46,-91,50v-55,-53,27,-158,94,-169v15,1,29,6,31,22xm46,-55v51,15,97,-36,88,-100v-1,-8,-8,-8,-19,-8v-32,24,-67,58,-69,108",w:175},h:{d:"87,-253v-13,60,-14,135,-24,200v16,2,27,-39,43,-48v19,-23,39,-52,75,-53v32,14,7,87,37,102v56,-1,90,-48,122,-71v-9,51,-65,96,-123,101v-51,5,-34,-66,-50,-101v-54,27,-82,93,-116,141v-44,0,-5,-72,-9,-112v9,-56,-4,-132,22,-171v9,-8,26,-2,23,12",w:286,k:{";":-58,":":-58,".":-58,",":-58}},i:{d:"85,-271v13,0,21,1,20,14v5,27,-35,35,-47,18v1,-15,14,-29,27,-32xm213,-123v20,29,-36,65,-56,89v-14,16,-45,38,-67,37v-44,-1,-54,-47,-54,-91v0,-29,1,-77,34,-76v14,17,-6,53,-3,81v2,20,4,55,23,55v55,-13,93,-56,123,-95",w:167,k:{".":-50,",":-50}},j:{d:"101,-228v-24,-1,-34,-39,-7,-43v11,2,22,6,23,18v-3,8,-9,21,-16,25xm74,-173v29,10,-8,35,2,67v-3,82,14,192,-61,192v-23,0,-43,-10,-50,-27v0,-3,1,-5,3,-5v12,3,27,7,42,8v54,-8,34,-98,36,-160v1,-38,2,-69,28,-75",w:109},k:{d:"286,-114v4,-5,16,-27,20,-9v-24,51,-60,101,-110,124v-58,26,-75,-41,-112,-65v-12,13,-27,22,-26,47v0,15,-3,25,-18,24v-25,-23,3,-95,7,-138r10,-118v-1,-20,28,-29,34,-10r-29,190r81,-98v7,-21,57,-30,41,3v-26,27,-60,53,-82,81v32,16,49,76,95,55v37,-17,65,-57,89,-86",w:246,k:{";":-29,":":-29,".":-43,",":-43}},l:{d:"100,-34v52,0,69,-53,101,-78v1,44,-53,97,-106,104v-101,-12,-34,-161,-34,-244v0,-17,23,-30,32,-13r-29,177v0,29,8,54,36,54",w:159,k:{";":-58,":":-58,".":-79,",":-79}},m:{d:"185,-19v-36,-2,-9,-89,-33,-106v-37,25,-55,78,-81,114v-14,19,-36,-2,-33,-28v4,-40,6,-76,11,-113v2,-13,27,-24,29,-3v2,38,-13,72,-15,110v31,-34,44,-82,81,-109v39,-18,44,32,44,72v0,19,9,30,18,7v22,-31,31,-77,74,-87v41,10,-3,139,65,99v28,-17,48,-43,72,-64v3,44,-54,77,-89,98v-46,16,-47,-38,-53,-77v0,-8,0,-18,-6,-20v-36,22,-47,90,-84,107",w:366},n:{d:"326,-130v6,45,-61,99,-114,110v-50,-1,-39,-66,-56,-101v-44,-6,-55,59,-86,82v-6,7,-14,15,-23,18v-27,-22,-19,-138,21,-148v7,0,8,15,6,22v-5,23,-17,49,-14,77v37,-21,52,-99,113,-82v26,17,10,74,32,98v4,3,8,4,15,4v52,0,71,-55,106,-80",w:272,k:{".":-79,",":-79}},o:{d:"134,-174v21,33,97,46,140,22v2,47,-83,43,-112,22v19,68,-35,131,-112,126v-56,-4,-31,-92,-7,-118v21,-24,50,-72,91,-52xm99,-149v-27,24,-82,85,-37,118v56,0,100,-55,72,-106v-12,-4,-22,-13,-35,-12",w:208},p:{d:"172,-67v49,-18,87,-51,130,-75v6,44,-68,61,-100,85v-33,15,-60,37,-97,45v-19,4,-29,-24,-9,-29v45,-11,75,-38,83,-87v-3,-46,-53,-14,-64,3v-45,44,-62,114,-65,198v0,17,-28,19,-31,2r16,-201v-1,-37,26,-42,33,-17v-2,20,-11,40,-8,61v28,-45,49,-90,110,-99v47,2,42,77,15,99v-4,5,-8,11,-13,15",w:241},q:{d:"255,-95v9,-5,27,-44,34,-21v-35,75,-109,112,-157,174v-5,20,-21,40,-36,15v-3,-50,31,-102,40,-146v-26,20,-54,54,-94,54v-21,0,-24,-9,-24,-35v0,-69,59,-131,127,-143v28,3,22,34,31,56r-48,164r68,-59xm149,-144v-27,12,3,-30,-16,-27v-31,5,-87,63,-90,109v-2,26,9,18,25,10v37,-19,81,-36,81,-92",w:233},r:{d:"59,-50v20,-56,76,-138,139,-92v2,13,-8,12,-22,12v-73,0,-90,77,-113,135v-20,15,-34,-4,-30,-33v7,-44,7,-95,20,-134v8,-11,25,-2,22,15",w:184},s:{d:"163,-97v20,-8,33,-49,48,-34v-7,36,-43,53,-64,78v-39,26,-75,73,-124,86v-5,1,-17,-2,-16,-8v1,-43,102,-28,58,-87v-11,-15,-26,-32,-26,-56v0,-30,17,-58,42,-66v36,10,-2,50,-16,58v5,28,24,52,37,74v23,-9,43,-29,61,-45",w:150},t:{d:"100,-147v43,3,78,-11,113,-12v-7,45,-82,25,-125,41v-9,33,-18,67,-21,106v-2,17,13,14,14,27v-11,22,-46,10,-43,-20v4,-37,14,-72,19,-103v-7,-19,-65,15,-60,-23v9,-21,71,12,71,-31r20,-84v5,-14,28,-14,26,5v-3,30,-20,62,-21,88v0,4,3,6,7,6",w:134},u:{d:"202,-171v-8,40,-16,128,40,103v38,-17,65,-51,96,-76v-6,55,-68,93,-120,110v-35,-2,-39,-35,-44,-66v-29,39,-49,90,-110,96v-54,-12,-17,-87,-19,-143v2,-8,5,-16,16,-15v40,17,-8,81,0,118v51,37,98,-68,118,-115v6,-13,11,-20,15,-20v6,1,7,2,8,8",w:275},v:{d:"215,-124v29,0,47,-23,67,-15v-14,34,-73,48,-110,27r-65,128v-9,8,-23,2,-23,-12v0,-49,-39,-84,-45,-136v-3,-27,33,-41,36,-13v-13,46,15,89,30,121v24,-33,31,-85,56,-117v20,-9,31,17,54,17",w:209},w:{d:"297,-159v16,30,77,21,101,7v1,45,-77,48,-110,30v-25,35,-31,90,-55,126v-4,3,-8,6,-13,7v-41,-13,-47,-75,-60,-113v-25,33,-34,103,-66,122v-45,-24,-55,-96,-55,-158v0,-14,7,-21,21,-21v16,5,10,35,13,53v5,31,10,62,23,83v33,-33,29,-110,73,-133v5,0,8,4,9,12v4,33,12,60,18,83v17,60,40,18,45,-10v13,-31,17,-74,45,-91v5,1,8,1,11,3",w:322},x:{d:"244,-72v20,-13,43,-72,59,-56v-19,47,-53,86,-90,110v-41,27,-78,-1,-106,-28v-27,18,-38,53,-52,83v-15,0,-23,-8,-24,-23v8,-37,32,-52,56,-77v-17,-21,-39,-44,-42,-77v-2,-21,33,-27,34,-5v2,31,12,46,29,62v26,-20,37,-49,56,-75v43,4,10,45,-5,57v-11,14,-19,23,-31,35v18,18,54,44,85,22v9,-6,20,-16,31,-28",w:243},y:{d:"88,-154v-12,29,-42,76,-15,107v59,-7,110,-40,103,-115v3,-11,8,-17,15,-17v27,2,10,49,10,76v0,62,-17,123,-42,163v-31,50,-118,24,-135,-17v0,-5,5,-16,9,-16v17,22,41,38,76,37v48,-14,55,-77,60,-130v-27,15,-62,43,-100,48v-60,-10,-28,-114,-7,-147v7,-12,28,-5,26,11",w:226},z:{d:"91,-27v42,2,92,16,118,-9v6,0,6,6,7,10v-16,44,-81,31,-126,21v-27,-6,-38,31,-60,15v-8,-15,9,-22,17,-31v32,-35,70,-68,95,-110v-27,-6,-103,18,-105,-17v10,-28,51,4,88,-10v19,-1,56,-14,60,9v-23,49,-66,77,-94,122",w:217},"{":{d:"76,5v-3,45,31,58,63,42v10,0,14,2,14,8v-3,21,-26,29,-51,26v-45,-5,-50,-53,-49,-103v0,-23,2,-41,-11,-46v-13,3,-38,18,-39,-5v7,-33,80,-26,63,-77v-19,-60,1,-114,57,-125v21,-4,26,26,11,32v-49,-12,-50,42,-42,83v7,40,-12,58,-31,72v24,12,17,59,15,93",w:152,k:{j:-86}},"|":{d:"59,-361v10,0,11,14,11,24r-2,475v1,39,-17,52,-26,27r4,-504v-1,-12,3,-22,13,-22",w:116},"}":{d:"78,-226v0,-34,-56,-27,-73,-11v-3,0,-5,-1,-5,-4v1,-28,26,-37,58,-37v29,0,46,21,46,55v0,43,-26,62,-24,107v11,23,55,-11,63,23v-2,16,-30,18,-43,11v-22,21,9,65,5,106v-4,40,-24,67,-68,61v-8,-1,-18,-7,-18,-16v4,-13,22,-15,37,-12v33,-14,13,-85,11,-124v-1,-14,5,-18,16,-21v-58,-21,-5,-88,-5,-138",w:145},"~":{d:"48,-152v62,-59,94,46,161,28v22,-6,26,-63,55,-48v2,2,4,4,4,7v-9,35,-46,75,-92,71v-39,-3,-46,-52,-91,-50v-27,1,-34,45,-53,58v-34,-12,-1,-60,16,-66",w:280},"":{w:143}}}),Cufon.registerFont({w:166,face:{"font-family":"Vladimir","font-weight":400,"font-stretch":"normal","units-per-em":"360","panose-1":"3 5 4 2 4 4 7 7 3 5",ascent:"288",descent:"-72","x-height":"3","cap-height":"12",bbox:"-83 -262.207 427 112","underline-thickness":"20.918","underline-position":"-27.7734","unicode-range":"U+0020-U+007E"},glyphs:{" ":{w:90},"!":{d:"177,-200v2,6,-51,74,-141,162v-2,0,-4,-2,-4,-5v4,-18,129,-160,139,-163v4,0,6,1,6,6xm33,-20v2,12,-27,35,-30,13v-2,-12,26,-34,30,-13",w:85},'"':{d:"97,-164v1,-6,34,-67,45,-44v-9,13,-30,52,-45,44xm142,-164v2,-5,34,-67,46,-44r-34,44v-3,3,-11,3,-12,0",w:90},"#":{d:"122,-126r34,-1v10,-9,29,-48,39,-38v0,3,-9,16,-27,38v6,0,19,-3,19,3v1,9,-16,8,-26,8r-22,33v7,-1,20,-2,20,4v0,5,-9,7,-28,7v-17,23,-30,51,-49,71v-10,-6,-1,-11,10,-29r26,-42r-35,1v-15,17,-29,53,-50,73v-10,-12,12,-28,38,-73v-7,-1,-22,2,-24,-3v0,-4,10,-7,31,-8r23,-33v-16,4,-44,-5,-11,-9r18,-1v10,-10,31,-51,41,-40v0,2,-9,14,-27,39xm114,-115r-23,33r35,-1r22,-33"},$:{d:"129,-86v-23,4,-51,3,-49,-20v2,-25,38,-42,73,-42v18,-18,20,-33,29,-22v-4,6,-10,13,-18,22v11,1,16,6,16,17v0,11,-25,26,-32,14v4,-2,39,-12,6,-14v-19,-1,-92,25,-48,36v20,0,47,-7,45,18v-2,25,-46,55,-80,54v-20,28,-26,46,-37,37v0,-1,8,-15,26,-39v-38,-1,-29,-42,0,-41v2,0,4,1,4,3v2,5,-20,9,-18,14v0,5,6,8,19,8v31,0,63,-18,71,-41v0,-3,-2,-4,-7,-4"},"%":{d:"82,-146v0,-22,42,-61,64,-57v23,4,9,31,-4,47v25,2,61,-13,112,-32v4,0,5,2,5,6v-59,55,-197,134,-258,184v-2,0,-7,-5,-6,-8v0,-12,73,-66,221,-160v-33,11,-59,17,-80,17v-13,15,-25,22,-36,22v-11,0,-18,-9,-18,-19xm146,-189v-12,0,-35,28,-12,32v12,-12,22,-24,12,-32xm118,-173v-16,11,-23,21,-23,31v6,17,21,4,34,-8v-10,-4,-14,-12,-11,-23xm169,-57v0,20,-39,62,-58,60v-10,0,-20,-7,-19,-18v1,-28,36,-62,62,-62v9,0,15,11,15,20xm112,-6v16,1,64,-38,45,-55v-13,-2,-57,34,-54,48v0,5,3,7,9,7",w:189},"&":{d:"28,-56v0,-22,36,-48,58,-48v20,0,29,13,25,32v15,-16,28,-40,47,-51v4,0,6,2,6,6v0,6,-17,27,-50,63v33,-1,58,-9,70,4v-22,5,-50,2,-80,8v-12,10,-36,61,-44,39v0,-4,9,-17,26,-38v-23,3,-58,6,-58,-15xm91,-92v-12,-1,-57,24,-55,36v6,13,39,7,59,3v11,-15,18,-36,-4,-39",w:185},"'":{d:"97,-164v1,-6,34,-67,45,-44v-9,13,-30,52,-45,44",w:45},"(":{d:"-30,52v46,-121,183,-269,301,-314v5,2,3,8,-3,10v-117,61,-231,189,-293,310v-3,0,-5,-2,-5,-6",w:110},")":{d:"226,-256v-43,116,-187,271,-301,314v-6,-2,-2,-7,3,-10v119,-61,230,-190,293,-310v3,0,5,2,5,6",w:110},"*":{d:"154,-182v-20,12,-25,25,-30,14v0,-1,9,-8,26,-19v-5,-5,-27,-14,-17,-20v1,0,9,5,23,16v8,-6,21,-34,29,-27v0,3,-7,13,-21,29v12,-3,51,2,25,7v-5,0,-14,0,-27,-1v12,23,4,40,-4,16",w:118},"+":{d:"126,-108r48,-55r13,0r-48,55r54,0v-8,17,-41,8,-63,10r-48,55r-12,0r48,-55r-54,0r8,-10r54,0"},",":{d:"27,-19v3,18,-25,44,-42,48v-7,-5,-2,-4,8,-13v8,-7,13,-12,15,-16v-7,0,-11,-2,-11,-7v-2,-13,26,-35,30,-12",w:66},"-":{d:"93,-48v-29,-1,-74,9,-88,-5v0,-5,21,-8,64,-8v14,-3,42,5,24,13",w:100},".":{d:"28,-20v2,12,-26,35,-29,13v-2,-12,26,-35,29,-13",w:66},"/":{d:"347,-247v11,3,7,8,-4,17r-135,95r-211,140v-33,22,-52,32,-56,32v-9,-1,-8,-8,0,-13",w:208},0:{d:"27,-27v5,-65,85,-150,141,-165v11,8,20,-6,33,-6v14,0,21,8,21,24v0,74,-87,170,-160,179v-18,2,-35,-14,-35,-32xm57,-6v59,-15,141,-108,153,-172v-9,-26,-22,-4,-48,13v-3,-1,-2,-4,0,-8v-34,13,-121,112,-122,152v0,10,6,15,17,15"},1:{d:"55,-2v-5,9,-12,0,-13,-6v4,-18,106,-128,138,-161v-38,21,-60,31,-67,31v-7,-3,-5,-8,4,-10v24,-7,79,-43,96,-52v18,5,7,14,-7,28v-39,38,-89,95,-151,170"},2:{d:"203,-204v18,-1,36,17,35,35v-26,73,-157,107,-223,154r94,-10v19,-1,24,12,5,13v-34,2,-78,11,-112,15v-15,-5,-9,-29,8,-32v65,-41,159,-82,208,-132v9,-9,13,-28,-6,-28v-38,0,-81,32,-108,51v-3,0,-8,-5,-7,-8v11,-22,87,-64,106,-58"},3:{d:"228,-165v9,25,-63,52,-111,59v25,-1,49,11,49,33v0,48,-61,73,-114,77v-43,3,-46,-54,-14,-61v11,6,-17,19,-13,30v0,10,8,15,23,15v38,0,101,-36,101,-66v-1,-25,-39,-24,-60,-17v-10,-6,-7,-11,8,-14v42,-9,103,-30,117,-63v0,-6,-5,-10,-17,-10v-27,-2,-61,15,-92,29v-3,-1,-4,-4,-4,-7v2,-14,64,-41,86,-38v21,-2,39,18,41,33"},4:{d:"38,-79v-3,-30,174,-113,196,-116v16,2,8,10,-1,20r-81,86v18,-4,46,14,15,12v-7,0,-16,0,-26,1v-24,25,-45,56,-71,78v-5,0,-7,-2,-7,-6v0,-8,18,-31,54,-70r-69,4v-7,0,-10,-2,-10,-9xm128,-88r79,-85v-45,21,-112,54,-149,87v22,2,47,-2,70,-2"},5:{d:"76,-93v-4,1,-8,-9,-8,-12v0,-5,18,-25,55,-62v12,-8,27,-39,41,-25v28,0,60,-13,64,11v-20,7,-54,4,-78,7v-24,23,-44,43,-59,60v29,-15,70,-15,72,21v3,40,-68,101,-111,97v-33,6,-46,-38,-23,-50v4,10,-13,35,13,35v32,0,113,-56,107,-88v-7,-34,-51,-8,-73,6"},6:{d:"39,-31v6,-74,95,-162,168,-172v4,0,6,2,6,6v-37,19,-87,42,-112,87v22,-21,68,-27,70,10v3,37,-61,104,-98,104v-19,0,-36,-16,-34,-35xm69,-4v28,0,84,-71,84,-100v0,-10,-4,-15,-12,-15v-35,-3,-91,62,-88,97v0,12,6,18,16,18"},7:{d:"61,2v-4,0,-9,-6,-9,-10v19,-37,127,-134,169,-172v-20,-7,-50,4,-87,5v-9,1,-12,-8,-6,-13v11,-2,164,-33,109,12v-56,46,-122,122,-176,178"},8:{d:"197,-200v19,0,43,10,29,28v9,-3,8,5,4,11v-28,20,-72,32,-96,47v34,56,-8,118,-65,119v-21,0,-38,-20,-37,-42v0,-34,28,-64,86,-90v-9,-46,37,-73,79,-73xm187,-185v-32,0,-65,20,-58,53v33,-15,62,-28,88,-38v-1,-10,-11,-15,-30,-15xm64,-9v44,-1,80,-51,58,-99v-53,28,-80,54,-80,80v0,12,10,19,22,19"},9:{d:"220,-176v-5,67,-106,163,-166,179v-3,0,-5,-2,-5,-5v38,-20,84,-60,110,-96v-20,13,-39,20,-55,20v-16,0,-28,-14,-28,-30v0,-36,77,-97,115,-97v15,0,30,14,29,29xm197,-193v-24,-1,-115,61,-107,93v0,8,4,13,13,13v50,-1,105,-52,105,-95v0,-7,-4,-11,-11,-11"},":":{d:"81,-87v1,9,-12,22,-21,21v-6,0,-8,-2,-8,-8v-3,-13,25,-34,29,-13xm24,-20v2,12,-27,35,-30,13v-2,-12,26,-34,30,-13",w:66},";":{d:"69,-87v1,9,-12,22,-21,21v-6,0,-8,-2,-8,-8v-3,-13,25,-34,29,-13xm-27,23v7,-7,28,-14,29,-23v-7,-1,-10,-3,-10,-7v-1,-12,30,-32,32,-11v2,16,-34,53,-51,41",w:66},"<":{d:"212,-219r0,12r-116,75r116,78r0,32r-148,-99r0,-2",w:180},"=":{d:"205,-120r-9,10r-120,0r9,-10r120,0xm181,-96r-9,10r-120,0r8,-10r121,0"},">":{d:"64,-22r0,-12r115,-76r-115,-77r0,-32r148,99r0,2",w:180},"?":{d:"92,-157v-2,-21,67,-42,92,-42v33,0,40,29,24,51v-29,36,-128,68,-170,103v-13,-13,10,-22,41,-42v35,-22,117,-58,130,-86v0,-5,-7,-8,-21,-8v-31,0,-69,17,-92,29v-2,0,-4,-2,-4,-5xm27,-20v2,12,-26,35,-29,13v-2,-13,25,-34,29,-13",w:135},"@":{d:"120,-86v0,-31,64,-79,89,-78v9,0,14,5,15,14v7,-7,12,-10,15,-2v8,7,-76,75,-47,78v36,5,95,-87,95,-124v0,-24,-12,-36,-34,-36v-92,0,-176,102,-187,190v-7,54,89,39,107,24v4,0,5,1,5,4v-31,30,-138,31,-130,-34v11,-93,100,-189,201,-193v31,-1,55,18,55,47v0,45,-71,133,-115,129v-22,-2,-16,-20,-6,-35v-24,20,-39,31,-47,31v-10,0,-16,-5,-16,-15xm141,-80v9,4,81,-61,76,-71v0,-4,-2,-5,-5,-5v-7,-3,-95,66,-71,76",w:236},A:{d:"179,0v-4,0,-9,-9,-8,-13v0,-4,19,-30,59,-78r-99,3v-33,27,-69,66,-105,88v-3,0,-5,-2,-5,-5v-2,-6,71,-65,91,-82v-62,2,-117,8,-58,11v9,1,23,-3,28,2v0,3,-12,5,-38,5v-42,0,-42,-21,-13,-23r95,-7v33,-29,204,-155,236,-158v6,0,10,4,10,12v-20,46,-77,102,-108,144v14,-3,43,7,19,11r-28,-1v-16,21,-67,89,-76,91xm239,-101r98,-119v7,-10,16,-16,11,-22v-18,3,-160,111,-201,142",w:273},B:{d:"338,-194v0,47,-75,55,-134,68v31,2,70,21,65,46v2,45,-87,89,-136,89v-37,0,-62,-19,-52,-56v-14,12,-38,65,-53,39v-5,-9,94,-110,91,-112v-6,-9,-2,-16,14,-14r85,-88v-51,5,-79,16,-109,28v-5,0,-8,-2,-8,-7v10,-25,94,-38,136,-40v7,-6,12,-9,15,-9v4,0,7,5,5,9v54,0,81,16,81,47xm159,-134v58,-8,170,-29,170,-67v0,-15,-21,-23,-63,-23r-24,0xm256,-86v0,-30,-69,-38,-109,-34v-40,39,-60,68,-60,87v0,18,20,24,40,25v47,3,129,-40,129,-78",w:275},C:{d:"34,-43v8,-94,147,-203,244,-203v19,0,29,9,30,27v5,-1,10,-4,11,1v0,2,-4,4,-12,7v-3,29,-63,107,-94,104v-9,0,-14,-5,-14,-14v-2,-27,70,-86,94,-93v5,-11,1,-24,-13,-23v-62,6,-148,75,-186,119v-30,34,-46,62,-46,84v2,39,54,28,83,14v18,-8,39,-23,56,-36v2,0,3,3,3,6v-8,28,-63,56,-102,57v-29,1,-57,-21,-54,-50xm290,-205v-27,10,-75,59,-82,81v0,3,1,4,3,4v18,0,71,-68,79,-85",w:219},D:{d:"197,-202v-31,3,-63,18,-84,23v-5,0,-8,-1,-8,-5v18,-16,73,-32,113,-39v7,-4,21,-26,25,-10v0,1,-1,4,-3,7v93,-7,87,87,34,140v-37,37,-98,91,-156,93v-29,1,-43,-26,-35,-56v-17,16,-28,38,-49,49v-9,0,-10,-7,-6,-14v15,-24,130,-146,169,-188xm113,-9v77,-10,179,-95,188,-171v4,-33,-42,-35,-74,-27r-133,147v-10,18,-10,55,19,51",w:265},E:{d:"22,-49v0,-61,92,-86,166,-94v-28,0,-66,-13,-66,-36v0,-40,110,-65,157,-65v27,0,40,8,40,26v0,19,-52,42,-72,41v-7,0,-11,-3,-11,-9v-1,-8,19,-22,27,-15v-2,3,-16,8,-7,9v14,2,95,-36,28,-36v-35,0,-86,14,-115,26v-24,10,-36,18,-36,27v1,21,75,26,112,26v5,0,7,1,7,5v0,6,-8,11,-23,11v-67,0,-192,42,-196,91v-3,37,77,33,108,16v18,-10,37,-25,53,-38v19,35,-69,68,-105,68v-45,0,-67,-17,-67,-53",w:211},F:{d:"388,-239v0,17,-48,25,-72,25v-23,20,-52,53,-86,100v12,0,27,-4,29,4v0,2,-12,5,-37,7v-48,62,-82,113,-137,125v-13,0,-26,-9,-26,-22v-3,-16,32,-72,44,-64v-12,18,-34,39,-35,64v4,22,25,14,41,0v25,-21,63,-71,87,-102v-17,0,-80,8,-91,10v-7,0,-8,-7,-2,-10v10,-5,77,-10,102,-12v39,-51,70,-84,93,-101v-82,-12,-167,7,-201,56v-8,12,-15,18,-20,6v0,-6,11,-22,33,-50v22,-28,35,-42,39,-42v10,1,6,9,0,15v-12,13,-22,27,-30,39v59,-41,114,-53,197,-38v19,-12,37,-19,56,-19v11,0,16,3,16,9xm330,-227v16,3,47,-1,50,-12v-14,-9,-37,2,-50,12",w:231},G:{d:"71,-24v57,-4,166,-87,209,-124v8,5,2,17,-5,25r-91,99v6,0,7,9,3,13v-6,6,-6,1,-10,-5r-35,38v-45,46,-73,88,-128,88v-15,0,-23,-6,-23,-18v0,-45,119,-121,171,-119r51,-56v-65,49,-111,73,-138,73v-21,0,-42,-17,-39,-39v13,-100,157,-200,264,-200v21,0,31,8,31,24v0,31,-60,82,-85,81v-8,0,-12,-5,-12,-14v2,-28,50,-61,73,-71v2,0,3,1,3,2v-12,12,-65,43,-66,65v0,3,1,4,4,4v16,3,78,-50,74,-67v0,-9,-6,-13,-19,-13v-64,0,-160,72,-201,114v-33,34,-51,60,-51,82v0,12,6,18,20,18xm154,-17v-49,-2,-151,72,-155,109v6,19,30,6,46,-3v12,-7,81,-75,109,-106",w:249},H:{d:"394,-234v-27,41,-73,84,-98,119v11,-1,42,3,26,11v-15,0,-27,0,-35,1r-78,94v-8,12,-18,11,-21,0v2,-12,55,-74,71,-94r-90,4v-56,56,-95,105,-151,114v-17,3,-32,-12,-30,-29v7,-60,79,-96,164,-96v75,-81,113,-124,113,-128v-16,-5,-72,37,-94,50v-2,0,-2,-1,-2,-3v-4,-8,102,-67,110,-63v27,12,11,20,-14,48r-87,95r91,-4v73,-84,112,-125,118,-125v5,0,7,2,7,6xm142,-99v-63,3,-88,15,-121,50v-15,16,-22,29,-22,39v2,20,25,15,40,5v20,-13,86,-74,103,-94",w:291},I:{d:"64,-114v8,-69,127,-131,201,-131v18,0,27,6,27,18v0,21,-31,63,-91,123v10,0,25,-10,31,-3v0,3,-15,9,-44,16v-60,55,-78,86,-123,103v-7,0,-11,-3,-11,-10v-1,-3,36,-55,41,-41r-24,29v4,0,32,-25,83,-74v-37,7,-94,5,-90,-30xm271,-236v-59,9,-176,75,-195,125v0,10,15,15,44,15v73,-2,40,2,91,-45v20,-18,64,-69,67,-90v0,-3,-2,-5,-7,-5",w:206},J:{d:"59,-105v9,-78,135,-144,220,-144v18,0,27,7,27,21v0,28,-43,91,-128,192v6,0,9,3,9,8v1,6,-5,9,-9,8v1,-6,-1,-7,-8,-8v-53,55,-111,117,-171,127v-35,-9,-16,-39,11,-63v32,-29,93,-64,142,-72v26,-30,139,-150,141,-196v0,-4,-2,-7,-6,-7v-77,9,-214,71,-214,144v0,14,7,21,22,21v39,2,120,-42,129,-72v3,0,4,2,4,7v-10,38,-82,76,-128,76v-21,0,-44,-19,-41,-42xm144,-27v-56,16,-137,61,-158,109v2,13,20,10,32,4v25,-12,100,-85,126,-113",w:241},K:{d:"219,-240v15,7,16,9,-1,27r-84,92v5,0,8,1,8,6r169,-88v37,-19,57,-29,62,-29v12,18,-28,28,-42,35r-187,92r17,92v1,5,14,6,16,9v0,3,-14,6,-19,5v-34,-13,-17,-33,-35,-110r-101,109v-4,0,-8,-3,-10,-8v5,-19,148,-169,187,-215v-8,0,-56,37,-72,47v-2,0,-2,-1,-2,-3v-3,-5,89,-66,94,-61",w:232},L:{d:"198,-99v0,-41,57,-91,99,-110v1,-8,-2,-15,-9,-14v-70,28,-140,133,-198,188v51,19,67,26,98,23v0,7,-18,14,-26,14v-15,0,-44,-8,-85,-24v-25,23,-50,34,-76,34v-21,1,-42,-9,-40,-27v4,-40,71,-49,110,-27r91,-98v42,-44,76,-92,122,-92v15,0,22,6,24,19v10,-6,20,-1,9,5r-8,3v3,33,-67,121,-96,120v-10,0,-15,-5,-15,-14xm295,-200v-33,12,-83,66,-89,98v0,4,2,6,5,6v28,-7,74,-69,84,-104xm57,-29v-27,-11,-88,-18,-89,13v0,13,9,19,28,19v19,0,39,-11,61,-32",w:229},M:{d:"39,-102v18,-32,105,-129,149,-129v9,0,13,6,13,15v0,16,-21,49,-63,101v72,-69,118,-103,136,-103v9,0,13,4,13,13v0,14,-18,42,-51,85v81,-82,133,-123,156,-123v24,0,15,26,4,41v-5,7,-34,41,-89,100v-48,52,-73,82,-73,91v-3,6,14,4,14,7v-3,9,-30,5,-26,-9v14,-53,90,-123,153,-189v16,-17,28,-27,18,-34v-76,31,-209,187,-256,236v-4,0,-9,-5,-9,-9v0,-5,25,-35,74,-95v50,-62,82,-92,72,-106v-87,42,-171,144,-241,213v-4,1,-12,-5,-12,-8v28,-46,149,-160,170,-212v0,-3,-1,-5,-4,-5v-48,17,-90,71,-144,123v-3,0,-4,-1,-4,-3",w:315},N:{d:"41,-115v18,-34,109,-117,159,-121v10,0,14,6,14,16v0,25,-45,76,-65,95v64,-51,122,-101,176,-112v10,0,22,8,20,18v-10,54,-163,168,-182,208v-2,9,17,2,18,8v-7,9,-40,11,-38,-8v10,-30,18,-34,57,-72r104,-103v13,-14,22,-25,25,-40v0,-3,-1,-3,-3,-3v-106,41,-193,132,-293,229v-4,0,-9,-5,-9,-9v29,-50,160,-157,180,-215v0,-4,-1,-5,-4,-5v-20,-2,-121,84,-146,116v-5,6,-12,5,-13,-2",w:261},O:{d:"46,-42v0,-86,95,-172,152,-200v6,0,9,4,9,11v9,-6,20,-11,31,-13v1,-6,2,-9,3,-9v5,0,7,3,6,9v20,0,33,13,33,33v-1,63,-88,161,-133,194v-37,28,-101,34,-101,-25xm84,-5v76,-13,170,-135,184,-212v2,-13,-9,-22,-22,-18v-15,46,-90,141,-110,130v-9,0,-14,-6,-14,-19v0,-29,23,-60,69,-96v-65,38,-120,108,-130,189v-2,15,9,28,23,26xm236,-232v-39,17,-93,67,-102,112v0,4,2,6,6,6v22,3,91,-98,96,-118",w:213},P:{d:"319,-205v0,63,-107,105,-179,103r-88,102v-3,0,-11,-6,-10,-9v0,-4,25,-36,75,-95v-15,-2,-22,-6,-22,-10v2,-11,24,-4,35,-5r99,-107v-42,6,-85,20,-127,35v-4,0,-5,-3,-5,-8v2,-23,127,-47,159,-47v33,0,63,12,63,41xm157,-120v67,-6,144,-27,156,-84v4,-22,-39,-29,-69,-23v4,15,-68,82,-87,107",w:226},Q:{d:"246,-244v20,0,34,14,34,35v0,43,-31,95,-93,158v7,0,16,2,16,6v-6,18,-19,14,-36,12v-29,25,-55,38,-76,38v-28,1,-46,-17,-45,-46v3,-80,89,-179,149,-203v11,5,2,11,-10,21v-43,30,-130,129,-122,196v21,-22,58,-30,102,-26v38,-39,99,-111,103,-163v0,-13,-6,-19,-17,-19v-34,1,-84,52,-101,80v-4,9,-13,9,-14,0v9,-33,80,-97,110,-89xm146,-35v-33,-3,-75,0,-80,21v0,7,6,10,19,10v16,0,36,-10,61,-31",w:213},R:{d:"171,-111v56,-3,137,-39,143,-86v4,-29,-51,-29,-86,-22v4,13,-2,11,-18,28v-58,62,-112,119,-159,185v-9,12,-19,17,-22,3v0,-12,51,-74,153,-185v7,-8,18,-17,30,-28v-24,3,-56,18,-88,32v-4,0,-6,-3,-6,-9v17,-25,100,-46,146,-46v40,0,58,15,58,53v0,51,-79,88,-146,86v12,12,9,97,41,90v-7,14,-42,12,-41,-12v-9,-30,-11,-70,-30,-89v0,-5,22,-8,25,0",w:254},S:{d:"236,-174v16,7,76,-33,76,-46v0,-7,-9,-10,-25,-10v-35,-1,-110,24,-140,40v-42,21,-69,43,-16,54v40,8,105,1,105,43v-16,59,-100,99,-179,100v-37,0,-56,-12,-56,-34v0,-25,54,-53,82,-51v5,0,7,1,7,4v-22,9,-77,19,-77,44v0,12,14,19,43,19v68,-1,152,-37,169,-84v6,-17,-101,-20,-98,-23v-23,-6,-35,-16,-35,-30v0,-63,125,-98,197,-98v23,0,35,8,35,22v0,22,-61,67,-83,67v-11,0,-16,-4,-16,-11v-1,-10,37,-40,48,-31v-10,5,-37,19,-37,25",w:225},T:{d:"121,-184v42,-41,88,-56,169,-48v6,-6,14,-11,14,1v31,4,64,-6,89,-2v-23,15,-63,17,-102,17v-38,37,-102,144,-140,184v-25,26,-50,40,-75,40v-18,0,-30,-13,-29,-31v-5,-24,42,-68,57,-55v-13,17,-49,33,-47,62v0,11,4,16,13,16v77,-17,136,-163,207,-217v-85,-12,-141,22,-177,62v-5,0,-7,-2,-7,-5v13,-18,44,-42,40,-75v0,-4,1,-5,4,-5v7,0,11,2,11,6v0,14,-9,31,-27,50",w:230},U:{d:"208,-5v-3,10,-31,12,-31,-8v0,-20,19,-53,58,-100v-39,33,-131,115,-170,117v-32,-5,-25,-39,-8,-64v35,-53,103,-118,156,-159v2,-3,5,-6,1,-6v-22,1,-70,37,-89,47v-4,0,-6,-1,-6,-4v11,-18,85,-61,99,-56v23,8,10,28,-8,43v-43,37,-150,141,-155,181v0,4,2,6,4,6v109,-41,216,-157,297,-233v7,0,17,10,9,17v-66,67,-150,156,-175,212v-1,10,12,5,18,7",w:265},V:{d:"65,-112v7,6,54,-40,56,-32v2,8,-47,45,-56,41v-9,0,-14,-4,-14,-13v15,-52,109,-121,166,-131v19,1,14,22,4,34v-4,6,-15,19,-34,40v-68,75,-103,127,-103,155v0,10,5,16,14,16v77,-24,208,-160,234,-235v0,-3,-1,-5,-5,-5v-15,-1,-93,68,-87,90v-3,1,-6,-6,-6,-8v9,-29,62,-90,96,-90v9,0,13,4,13,13v0,57,-84,137,-136,181v-47,40,-84,62,-110,62v-18,1,-29,-17,-28,-36v3,-70,111,-155,149,-205v0,-2,-1,-4,-4,-4v-14,-6,-172,107,-149,127",w:250},W:{d:"338,-175v-10,-16,65,-69,78,-66v7,0,11,3,11,11v-18,65,-116,173,-167,213v-19,14,-35,21,-50,21v-40,-1,-30,-55,-14,-84v6,-11,15,-26,28,-45v-37,38,-116,128,-160,131v-15,1,-25,-11,-25,-25v4,-73,132,-161,178,-207v-9,-13,-133,66,-115,75v6,1,24,-19,30,-10v-4,6,-50,36,-52,9v13,-36,96,-84,143,-88v6,0,10,3,10,8v0,8,-10,21,-30,39v-102,95,-153,155,-153,180v0,7,3,10,9,10v52,-14,184,-150,240,-207v7,-7,14,-1,15,6v-30,44,-121,123,-121,183v0,29,29,16,48,1v49,-40,146,-144,172,-206v-12,-12,-56,39,-75,51",w:336},X:{d:"195,-236v40,10,-2,68,-8,93v89,-58,141,-87,155,-87v10,5,7,9,-6,15v-31,13,-115,65,-158,92v-12,32,-35,76,-40,110v-2,12,14,4,19,9v-9,12,-36,6,-36,-15v0,-16,9,-45,27,-88v-50,30,-102,70,-155,107v-6,-1,-7,-7,-2,-12v26,-23,131,-94,166,-116r20,-47v11,-31,21,-41,13,-50v-22,6,-65,39,-79,56v-3,2,-9,2,-8,-3v-5,-15,78,-68,92,-64",w:215},Y:{d:"83,111v-13,-5,-12,-16,0,-29r168,-191v-63,53,-108,97,-160,110v-17,0,-26,-10,-26,-30v0,-79,128,-140,167,-199v-49,-4,-147,73,-167,108v12,12,39,-14,54,-13v-2,9,-62,47,-66,14v15,-49,117,-115,178,-120v10,0,15,4,15,13v-20,61,-170,135,-170,204v0,8,4,12,12,12v42,0,130,-84,174,-122v8,-7,65,-70,97,-93v8,0,14,7,7,15r-208,235v-11,11,-37,35,-41,45v3,1,12,-11,15,-7v-8,10,-38,40,-49,48",w:260},Z:{d:"287,-184v0,74,-83,117,-166,147v6,7,7,16,5,27v4,0,7,1,7,5v0,7,-8,7,-10,2v-11,42,-113,114,-164,113v-14,0,-21,-4,-21,-13v17,-52,107,-113,176,-110v2,-8,2,-16,-5,-19v-22,9,-38,13,-50,13v-6,0,-9,-2,-9,-6v3,-14,38,-23,59,-18v45,-17,165,-95,165,-151v0,-12,-8,-18,-25,-18v-53,0,-133,32,-158,60v14,15,69,-28,77,-19v-6,7,-87,51,-94,22v18,-43,104,-75,165,-77v32,0,48,14,48,42xm109,-6v-43,-14,-158,76,-162,102v0,4,3,6,8,6v51,-13,128,-62,154,-108",w:215},"[":{d:"262,-262v-4,12,-22,10,-38,10r-259,300r30,0r-6,10r-50,0r275,-320r48,0",w:110},"\\":{d:"211,36v-15,1,-57,-258,-56,-271v-2,-11,13,-21,13,-4v0,69,37,199,54,266v1,4,-8,9,-11,9",w:281},"]":{d:"204,-251v7,-14,36,-8,56,-9r-278,317r-50,0v6,-11,22,-11,40,-10r261,-298r-29,0",w:110},"^":{d:"237,-103r-12,0r-76,-116r-77,116r-32,0r99,-149r2,0",w:180},_:{d:"57,31r162,0r0,14r-162,0r0,-14",w:180},"`":{d:"137,-156v4,3,27,34,20,40v-5,-1,-47,-37,-20,-40",w:180},a:{d:"139,-84v7,7,-72,73,-49,78v4,0,6,1,6,3v-4,6,-24,6,-24,-7v0,-6,4,-13,10,-23v-12,9,-33,29,-47,30v-18,1,-17,-20,-11,-34v-33,24,-54,42,-67,35v0,-2,1,-4,4,-4v48,-12,93,-90,147,-90v9,0,14,5,15,14v7,-7,13,-11,16,-2xm40,-11v8,5,81,-62,76,-72v0,-4,-2,-5,-5,-5v-7,-2,-93,65,-71,77",w:134},b:{d:"127,-77v0,27,-46,78,-73,76v-28,-2,-24,-31,-11,-54v-20,16,-61,61,-86,53v40,-18,88,-59,118,-97v42,-53,78,-95,124,-114v23,9,6,27,-11,49v-14,19,-68,48,-97,74v14,-11,36,-6,36,13xm107,-110v54,-35,80,-52,96,-90v-11,-10,-86,77,-96,90xm106,-89v-20,-1,-35,35,-9,42v11,-13,16,-25,16,-33v0,-6,-2,-9,-7,-9xm93,-42v-16,-7,-21,-19,-13,-35v-24,30,-36,51,-36,61v0,5,2,7,7,7v11,0,25,-11,42,-33",w:137},c:{d:"46,-20v-2,15,18,11,26,17v-13,10,-45,1,-40,-21v0,-6,2,-15,7,-25v-20,14,-59,54,-82,47v45,-17,111,-93,159,-100v11,-1,19,12,11,15v-3,14,-21,41,-36,40v-4,0,-6,-2,-6,-6v0,-13,26,-34,36,-39v0,-2,-1,-3,-3,-3v-11,-4,-76,64,-72,75xm117,-83v-3,3,-28,21,-23,27v6,1,22,-20,23,-27",w:110},d:{d:"242,-205v-21,33,-150,166,-158,195v-1,6,13,2,12,7v-3,8,-26,3,-22,-8v0,-6,3,-15,11,-28v-23,25,-39,37,-49,37v-21,0,-15,-22,-6,-40v-18,12,-52,47,-73,40v48,-16,91,-80,142,-93v10,0,16,4,16,13v27,-31,101,-124,122,-130v4,0,5,3,5,7xm106,-87v-10,-2,-84,61,-65,75v8,2,86,-62,65,-75",w:134},e:{d:"46,-31v-6,12,-3,27,15,25v4,0,7,1,7,3v-10,9,-59,5,-44,-25v-10,-1,-54,35,-67,26v12,-7,53,-27,70,-33v6,-22,53,-64,79,-64v9,0,14,4,14,12v0,22,-51,48,-74,56xm48,-38v16,-7,57,-35,58,-50v-15,-15,-52,35,-58,50",w:106},f:{d:"-24,108v-19,-1,-18,-24,-10,-41v15,-31,77,-108,106,-145v-30,21,-81,80,-115,76v99,-57,135,-99,228,-204v9,-9,18,-17,22,-4v-16,33,-44,55,-67,81r-71,82v8,0,12,4,12,14v0,30,-76,149,-105,141xm68,-42v-13,1,-29,40,-1,37v5,-14,13,-31,1,-37xm64,1v-13,0,-19,-7,-19,-19v-49,61,-74,98,-74,112v0,5,2,8,7,8v23,0,76,-78,86,-101",w:115},g:{d:"83,-33v-20,17,-30,28,-49,31v-18,-1,-14,-25,-7,-38v-28,20,-45,41,-70,38v45,-17,103,-95,153,-95v10,0,15,5,15,16v8,-9,13,-14,17,-3v0,4,-21,30,-60,79v8,-4,18,4,4,6r-9,0v-57,71,-99,106,-126,106v-11,0,-17,-4,-17,-13v0,-47,68,-86,125,-96v10,-11,18,-22,24,-31xm40,-11v9,0,101,-64,72,-79v-11,-2,-89,64,-72,79xm52,6v-38,6,-106,56,-112,87v0,5,3,7,7,7v24,-2,87,-71,105,-94",w:130},h:{d:"30,0v-18,-12,-5,-18,16,-44r28,-35v-28,24,-74,71,-115,79v-4,-10,22,-9,27,-17v61,-44,97,-70,160,-147v30,-37,47,-54,50,-54v4,0,6,3,6,8v-29,46,-101,122,-139,170v42,-38,71,-57,85,-57v6,0,10,3,10,10v7,9,-64,71,-61,76v-2,6,12,2,13,8v-5,6,-28,3,-24,-9v-8,-19,61,-69,52,-75v-21,6,-89,67,-108,87",w:147},i:{d:"144,-149v1,12,-32,27,-33,8v-1,-12,31,-30,33,-8xm98,-89v6,5,-61,75,-56,78v-2,6,11,2,12,8v-3,6,-29,3,-25,-9v0,-10,14,-31,40,-62v-28,19,-85,80,-112,72v38,-15,89,-61,126,-92v4,-1,16,-4,15,5",w:92},j:{d:"144,-149v1,11,-32,28,-33,8v-1,-12,31,-30,33,-8xm76,-81v-31,24,-90,83,-119,79v42,-15,100,-76,136,-100v15,2,9,14,1,24r-60,73v8,-3,25,2,7,5r-12,1v-9,9,-78,93,-103,101v-6,0,-9,-4,-9,-11v4,-39,52,-85,95,-94v22,-25,43,-50,64,-78xm7,5v-37,9,-78,50,-83,83v0,3,1,4,3,4v4,0,31,-29,80,-87",w:87},k:{d:"106,-3v-26,10,-31,-3,-45,-34v-7,10,-29,36,-35,38v-5,0,-8,-3,-8,-9v2,-9,45,-58,58,-73v-36,25,-69,70,-117,81v-3,-1,-2,-5,1,-6v83,-38,155,-122,218,-194v11,-11,17,-21,22,-8v-23,49,-74,89,-107,132v17,-12,30,-18,38,-18v9,0,15,5,15,14v2,20,-47,37,-70,36v7,10,7,36,27,38v2,0,3,1,3,3xm71,-48v26,-2,55,-16,60,-33v0,-3,-2,-4,-5,-4v-13,0,-31,12,-55,37",w:143},l:{d:"54,-57v-24,15,-72,62,-97,55v34,-15,72,-43,106,-70v19,-33,106,-130,140,-136v5,0,8,2,8,8v-3,36,-85,103,-123,130v-8,6,-36,48,-36,60v-2,5,12,1,12,7v-5,8,-28,4,-24,-11v0,-10,5,-24,14,-43xm205,-200v-10,-11,-23,15,-57,51v-31,33,-50,57,-58,70v77,-62,115,-102,115,-121",w:102},m:{d:"72,-6v-6,-6,72,-72,52,-78v-13,0,-73,60,-81,71v-7,10,-17,18,-22,7v2,-11,41,-56,53,-73v-28,21,-87,82,-117,77v44,-18,86,-60,132,-97v23,7,3,18,-10,40v26,-23,43,-35,53,-35v18,0,15,18,3,32v24,-23,42,-35,56,-35v8,0,12,3,12,9v6,10,-60,71,-58,77v-2,7,12,3,12,8v-3,8,-28,4,-24,-9v-9,-12,62,-71,48,-76v-25,4,-81,74,-102,88v-5,0,-7,-2,-7,-6",w:195},n:{d:"81,-93v3,-7,21,-13,23,-1v0,2,-9,16,-28,41v32,-27,55,-41,68,-41v8,0,12,4,12,12v9,14,-77,66,-50,76v4,0,6,1,6,3v-3,7,-32,5,-27,-9v1,-25,41,-51,54,-71v-28,-6,-88,68,-109,79v-16,-11,-4,-17,17,-41r29,-34v-35,24,-73,69,-117,79v-4,-7,10,-7,18,-12v17,-6,91,-67,104,-81",w:150},o:{d:"124,-83v2,22,-60,89,-81,86v-27,-3,-20,-29,-6,-50v-20,13,-59,52,-80,45v3,-8,17,-4,22,-10v27,-16,76,-61,105,-81v3,0,6,2,10,5v11,-9,28,-14,30,5xm111,-89v-15,-1,-42,35,-15,42v7,-6,21,-25,20,-36v0,-4,-1,-6,-5,-6xm79,-69v-24,21,-36,38,-36,51v0,6,3,9,8,9v9,0,22,-11,41,-32v-13,-2,-16,-15,-13,-28",w:126},p:{d:"143,-81v0,28,-38,64,-60,75v13,-2,39,4,10,7v-22,-5,-47,6,-44,-27r-94,106v-4,7,-12,5,-12,-5v23,-44,99,-114,136,-157v-33,25,-75,70,-120,82v-4,-8,9,-7,17,-11v26,-12,107,-88,131,-101v15,9,3,12,-11,34v14,-12,25,-18,34,-18v9,0,13,5,13,15xm60,-37v6,-3,11,21,12,22v19,-9,52,-48,56,-66v-17,-18,-53,30,-68,44xm62,-12v6,0,0,-8,0,-12v-2,-6,-3,-10,-4,-10v-4,1,-5,25,4,22",w:145},q:{d:"85,0v12,33,-55,102,-76,104v-7,0,-10,-4,-10,-12v1,-31,61,-92,84,-121v-23,19,-38,28,-47,28v-23,-1,-17,-24,-7,-40v-18,11,-51,46,-72,39v53,-19,99,-86,157,-97v16,-3,21,12,14,24v4,1,6,4,6,7v0,1,-17,22,-51,62v5,1,15,-3,15,3v0,3,-4,3,-13,3xm120,-90v-15,-5,-89,62,-84,76v0,3,1,4,4,4v15,3,88,-61,85,-75v0,-3,-2,-5,-5,-5xm14,97v10,-4,84,-71,64,-97v-17,18,-64,77,-67,94v0,2,1,3,3,3",w:136},r:{d:"-43,-2v31,-12,79,-51,101,-76v-7,-14,24,-38,30,-28v0,2,-1,6,-4,11v13,0,20,4,20,15v9,13,-65,68,-48,74v3,0,9,-2,8,3v-3,7,-27,5,-23,-8v0,-25,37,-52,50,-69v-2,-6,-6,-2,-13,-1v-5,1,-8,2,-9,3v-56,51,-91,83,-112,76",w:102},s:{d:"107,-93v0,19,-38,76,-51,87v10,-1,11,7,1,7v-24,-2,-45,0,-43,-31v-25,19,-43,34,-57,28v3,-8,12,-4,23,-11v3,2,113,-90,115,-91v5,1,12,5,12,11xm42,-15v15,-12,40,-54,47,-76r-63,51v9,1,13,16,16,25xm25,-33v-10,5,1,31,12,24v-2,-7,-7,-23,-12,-24",w:102},t:{d:"99,-115v-22,-1,-51,7,-68,0v10,-9,60,-6,77,-10v12,-13,40,-51,50,-54v4,0,5,3,5,7v0,5,-11,20,-32,47v21,-4,60,2,19,7r-27,1v-19,24,-75,92,-76,107v-1,6,13,2,12,7v-27,9,-27,-15,-13,-38r15,-26v-27,17,-74,70,-104,65v3,-7,12,-4,21,-10v30,-19,99,-67,121,-103",w:97},u:{d:"148,-86v7,6,-75,74,-48,80v4,0,6,1,6,3v-22,10,-31,-9,-17,-30v-20,20,-35,30,-45,30v-29,-16,13,-57,25,-71v-26,20,-85,80,-112,72v38,-17,88,-60,124,-91v6,-5,18,-3,18,4v4,10,-63,64,-46,76v7,0,23,-13,47,-40v24,-27,38,-41,41,-41v3,0,8,5,7,8",w:144},v:{d:"102,-89v5,10,-67,69,-44,79v8,0,23,-11,44,-33v-4,-1,-6,-3,-6,-7v-2,-14,28,-50,41,-49v4,0,6,3,6,7v4,18,-72,98,-91,92v-41,-13,13,-65,24,-81v-26,23,-76,72,-117,81v-3,-8,9,-7,17,-11v26,-12,83,-71,116,-88v7,0,10,3,10,10xm134,-88v-7,-4,-42,33,-27,40v7,-7,26,-31,27,-40",w:136},w:{d:"101,-43v-19,21,-30,38,-50,42v-33,-15,12,-61,22,-77v-28,20,-89,83,-116,76v43,-18,93,-66,138,-101v4,0,11,5,10,10v4,7,-68,75,-48,82v6,0,21,-14,43,-41v22,-27,36,-40,39,-40v4,0,6,2,6,6v3,9,-56,66,-34,77v6,0,19,-11,39,-34v-17,-20,24,-60,39,-61v22,19,-66,105,-81,103v-22,-3,-15,-25,-7,-42xm182,-94v-7,0,-39,35,-26,44v19,-24,32,-35,26,-44",w:182},x:{d:"94,-61v10,-4,55,-52,62,-38v-16,16,-27,18,-66,49v-6,30,-18,37,-4,44v4,0,5,1,5,3v-5,8,-31,3,-27,-11v0,-4,2,-11,4,-21r-49,35v-2,0,-3,-1,-3,-2v2,-6,42,-35,54,-44r12,-40v-38,26,-75,75,-123,86v-4,-8,9,-6,17,-11v27,-14,83,-64,118,-92v20,3,1,29,0,42",w:129},y:{d:"169,-98r-73,93v9,-4,22,4,5,6r-10,0v-25,30,-84,109,-112,111v-6,0,-9,-3,-9,-11v0,-39,68,-99,106,-104r36,-47v-15,13,-51,48,-65,48v-31,-17,12,-61,24,-75v-30,21,-75,77,-114,75v36,-18,99,-70,134,-99v6,0,14,5,13,11v-15,17,-56,62,-56,76v0,2,2,3,4,3v22,-4,86,-75,107,-95v4,-1,11,4,10,8xm70,5v-36,9,-89,58,-93,92v0,4,1,5,4,5v11,0,41,-32,89,-97",w:148},z:{d:"23,-16v1,-9,30,-18,43,-14v25,-21,37,-39,37,-53v-8,-22,-18,-2,-42,15v-26,19,-72,71,-104,66v45,-19,102,-74,139,-100v15,-5,29,-1,29,15v0,17,-17,39,-53,62v5,3,7,7,7,13v4,22,-87,121,-115,112v-10,0,-14,-4,-14,-13v3,-37,69,-89,112,-93v4,-5,4,-9,2,-14v-17,7,-32,14,-41,4xm58,1v-39,6,-98,52,-102,86v0,4,2,6,6,6v24,-1,83,-70,96,-92",w:120},"{":{d:"39,-62v19,-26,37,-36,18,-46v69,-28,107,-143,196,-154v4,0,6,1,6,3v-12,9,-31,8,-47,22v-31,25,-88,118,-131,132v2,2,2,4,2,6v10,9,-114,133,-105,142v-2,11,11,5,16,10v-3,9,-34,6,-30,-10v7,-30,55,-78,75,-105",w:110},"|":{d:"130,-240r16,0r0,300r-16,0r0,-300",w:180},"}":{d:"164,-149v-18,25,-33,35,-17,44v-7,8,-22,5,-30,18v-52,49,-96,130,-174,145v-4,0,-5,-1,-5,-3v0,-3,3,-5,9,-5v74,-16,115,-135,177,-159v-2,-1,-3,-3,-3,-5v-9,-7,107,-126,98,-133v-1,-9,-7,-6,-16,-9v5,-11,33,-7,30,9v-5,28,-50,73,-69,98",w:110},"~":{d:"92,-92v32,-74,107,13,148,-40r4,3v-7,16,-28,32,-48,33v-13,1,-54,-16,-66,-15v-17,1,-24,10,-34,22",w:239},"":{w:90}}}),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)
}};Signature.Form=function(){function Form(element){this.element=element,this._termsChange=__bind(this._termsChange,this),this._submit=__bind(this._submit,this),this._signatureChange=__bind(this._signatureChange,this),this._navigationSwitch=__bind(this._navigationSwitch,this),this._keyup=__bind(this._keyup,this),this.assignElements(),this.observeElements(),this._renderAll(),this._showFooter=this.footerElement.hasClass("hide")?{"signature-standard":!1,"signature-custom":!1}:{"signature-standard":!0,"signature-custom":!0},$(window).scrollTop(0)}return Form.prototype.assignElements=function(){var element;return this.fields={fullName:this.element.find("input#signature_full_name"),initials:this.element.find("input#signature_initials"),custom:this.element.find("input#signature_custom"),fullNameImageData:this.element.find("input#signature_full_name_image_data"),initialsImageData:this.element.find("input#signature_initials_image_data")},this.navigation={elements:this.element.find(".signature-navigation a"),sections:this.element.find("section")},element=this.element.find(".signature-options"),this.signature={container:element,options:element.find(".signature-option .canvas"),optionsRadios:element.find(".signature-option input:radio")},this.terms={element:this.element.find(".terms"),checkbox:this.element.find(".terms #accept_terms")},this.footerElement=this.element.find(".signature-footer"),this.uploadElements=this.element.find("input:file")},Form.prototype.observeElements=function(){return this.fields.fullName.on("keyup",this._keyup),this.element.on("submit",this._submit),this.terms.checkbox.on("change",this._termsChange),this.navigation.elements.on("click",this._navigationSwitch),this.signature.optionsRadios.on("change",this._signatureChange),this.uploadElements.on("change",this._signatureChange)},Form.prototype.showFooter=function(){var current;return current=this.element.find(".signature-navigation a.active").data("trigger"),this._showFooter[current]?this.footerElement.show():this.footerElement.hide()},Form.prototype._fontFamily=function(canvas){var fontClass;return fontClass=canvas.parents(".signature-option").find("input:radio").val(),fontClass.replace(/_[4|7]00/g,"").replace("_italic","").replace(/_/g," ")},Form.prototype._keyup=function(){return this._renderAll()},Form.prototype._navigationSwitch=function(event){var section,target,trigger;return target=$(event.target),trigger=target.data("trigger"),section=this.element.find("."+trigger),this.navigation.sections.hide(),section&&section.show(),this.navigation.elements.removeClass("active"),target.addClass("active"),this.terms.checkbox.check(!1),this.terms.element.removeClass("accepted"),this.showFooter(),"signature-standard"===trigger&&this.fields.custom.val("0"),"signature-custom"===trigger&&this.fields.custom.val("1"),event.stop()},Form.prototype._renderAll=function(){var e,_i,_len,_ref,_results;for(_ref=this.signature.options,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],_results.push(this._renderSignature($(e)));return _results},Form.prototype._renderInitials=function(canvas){return canvas=canvas.find(".initials"),canvas.html(this.fields.initials.val().replace(/\s/g,"&nbsp;")),Cufon.replace(canvas,{fontFamily:this._fontFamily(canvas)})},Form.prototype._renderSignature=function(canvas){var _this=this;return setTimeout(function(){return canvas=canvas.find(".signature"),canvas.html(_this.fields.fullName.val().replace(/\s/g,"&nbsp;")),Cufon.replace(canvas,{fontFamily:_this._fontFamily(canvas)})},0)},Form.prototype._setDataFields=function(option){var initialsCanvas,signatureCanvas;return signatureCanvas=option.find(".signature canvas"),initialsCanvas=option.find(".initials canvas"),signatureCanvas.exists()&&initialsCanvas.exists()?(this.fields.fullNameImageData.val(signatureCanvas[0].toDataURL()),this.fields.initialsImageData.val(initialsCanvas[0].toDataURL())):void 0},Form.prototype._signatureChange=function(event){var target;return target=$(event.target),target.is(":file")&&(this._showFooter["signature-custom"]=!0),target.is(":radio")&&(this._showFooter["signature-standard"]=!0),this.showFooter()},Form.prototype._submit=function(){var selectedOption;return selectedOption=this.signature.container.find("input:radio:checked").parents(".signature-option"),this._renderInitials(selectedOption),this._setDataFields(selectedOption)},Form.prototype._termsChange=function(){return this.terms.element.toggleClass("accepted")},Form}()}.call(this),function(){this.Signup={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Signup.First=function(){function First(element){this.element=element,this._toggleCopyFields=__bind(this._toggleCopyFields,this),this._checkPasswordStrength=__bind(this._checkPasswordStrength,this),this.assignElements(),this.observeElements()}return First.prototype.assignElements=function(){return this.password={field:this.element.find("input:password").first(),comparisonFields:this.element.find("input:text,input[type=tel],select"),indicator:{container:this.element.find(".password-strength"),bar:this.element.find(".password-strength .bar"),description:this.element.find(".password-strength .description")}},this.copy=this.element.find(".copy"),this.fields=["phone","fax","address","city","zip","country","state"]},First.prototype.observeElements=function(){return this.copy.on("click",this._toggleCopyFields),this.password.field.on("input",this._checkPasswordStrength),this.password.comparisonFields.on("input",this._checkPasswordStrength)},First.prototype._checkPasswordStrength=function(){var e,i,password,result,score,titles,_i,_j,_len,_ref;{if("function"==typeof zxcvbn){for(i=_i=0;4>=_i;i=++_i)this.password.indicator.bar.removeClass("strength-"+i);if(password=this.password.field.val(),password.blank())return this.password.indicator.description.text(""),this.password.indicator.bar.addClass("empty"),void 0;if(!this.comparisons)for(this.comparisons=[],_ref=this.password.comparisonFields,_j=0,_len=_ref.length;_len>_j;_j++)e=_ref[_j],this.comparisons.push($(e).val());return titles=["Poor","Weak","Fair","Good","Strong"],result=zxcvbn(password,this.comparisons),score=result.score,this.password.indicator.description.text(titles[score]),this.password.indicator.bar.addClass("strength-"+score)}try{this.password.indicator.container.remove()}catch(_error){e=_error}}},First.prototype._copyField=function(field){var destination,source;return destination=$("#account_profile_"+field),source=$("#user_profile_"+field),destination.val(source.val()),destination.is("select")?destination.change():void 0},First.prototype._toggleCopyFields=function(event){var field,_i,_len,_ref,_results;for(event.stop(),_ref=this.fields,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)field=_ref[_i],_results.push(this._copyField(field));return _results},First}()}.call(this),function(){$(function(){var path;return"signup"===layout?(path=$("[data-zxcvbn]").data("zxcvbn"),$.getScript(path)):void 0})}.call(this),function(){this.SocialMedia={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};SocialMedia.List=function(){function List(){var e,_i,_len,_ref;for(_ref=$(".service"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],new SocialMedia.List.Service($(e))}return List}(),SocialMedia.List.Service=function(){function Service(element){this.element=element,this._remove=__bind(this._remove,this),this.assignElements(),this.observeTriggers()}return Service.prototype.assignElements=function(){return this.message=Message.create(),this.triggers={test:this.element.find(".test-button"),"delete":this.element.find(".delete-button")}},Service.prototype.observeTriggers=function(){var _this=this;return this.triggers.test.data("message","Publishing test post"),this.triggers.test.on("ajax:success",function(){return setTimeout(function(){return _this.message.flash("Test post published")},50)}),this.triggers["delete"].data("message","Deleting"),this.triggers["delete"].on("ajax:success",this._remove)},Service.prototype._remove=function(){return this.element.remove(),$(".service").exists()?void 0:($(".toolbar").hide(),$(".empty").show())},Service}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};SocialMedia.New=function(){function New(options){this._changeService=__bind(this._changeService,this),$.extend(this,options),this.assignElements(),this.observeElements(),this.select.exists()&&this._changeService()}return New.prototype.assignElements=function(){var e,service,url,_i,_len,_ref,_results;for(this.select=this.element.find("select#service_name"),url=this.accountNameStorageUrl,this.services=[],_ref=this.element.find(".service"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],service=new SocialMedia.New.Service($(e),url),_results.push(this.services.push(service));return _results},New.prototype.observeElements=function(){return this.select.on("change",this._changeService)},New.prototype._changeService=function(){var s,value,_i,_len,_ref;for(value=this.select.val().underscore(),_ref=this.services,_i=0,_len=_ref.length;_len>_i;_i++)s=_ref[_i],s.hide();return this.services.detect(function(s){return s.name===value}).show()},New}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};SocialMedia.New.Service=function(){function Service(element,url){this.element=element,this.url=url,this._storeAccountName=__bind(this._storeAccountName,this),this._prepareForPageAccess=__bind(this._prepareForPageAccess,this),this.assignElements(),this.observeElements()}return Service.prototype.assignElements=function(){return this.message=Message.create(),this.name=this.element.data("name"),"facebook"===this.name&&(this.pagesAccess=$("#manage_pages"),this.pagesAuthorizationTrigger=this.element.find(".authorization-button.pages")),this.accountNameField=this.element.find("input.account-name"),this.authorizationTrigger=this.element.find(".authorization-button.standard")},Service.prototype.observeElements=function(){return this.authorizationTrigger.on("click",this._storeAccountName),"facebook"===this.name?(this.authorizationTrigger.hide(),this.pagesAuthorizationTrigger.on("click",this._storeAccountName),this.pagesAccess.on("click",this._prepareForPageAccess)):void 0},Service.prototype.hide=function(){return this.element.hide()},Service.prototype.show=function(){return this.element.show()},Service.prototype._prepareForPageAccess=function(){return this.element.find(".update-options").toggle(),this.pagesAuthorizationTrigger.toggle(),this.authorizationTrigger.toggle()},Service.prototype._serviceTitle=function(){return this.name.titleize().replace(/\s/g,"")},Service.prototype._storeAccountName=function(event){var accountName,title;return accountName=this.accountNameField.val(),title=this._serviceTitle(),accountName.blank()?(event.stop(),this.message.flash("Please name your account before authorizing with "+title+".","error")):($.ajax({url:this.url,type:"post",data:defaultParams({account_name:accountName,service_name:this.name}),async:!1,message:"Loading"}),!0)},Service}()}.call(this),function(){module("Tasks")}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Tasks.Calendar=function(_super){function Calendar(){return this._provideTaskData=__bind(this._provideTaskData,this),this._loadMonth=__bind(this._loadMonth,this),this._addNewTask=__bind(this._addNewTask,this),_ref=Calendar.__super__.constructor.apply(this,arguments)}return __extends(Calendar,_super),Calendar.prototype.initialize=function(options){return $.extend(this,options),this.addObservers(),this._createMonths()},Calendar.prototype.addObservers=function(){return this.on("task:needs-data",this._provideTaskData),this.on("calendar:load-month",this._loadMonth),this.on("task:created",this._addNewTask)},Calendar.prototype._addNewTask=function(event,data){var d,date,m,y;return date=new Date(Date.parse(data.due_date)),m=date.getMonth()+1,d=date.getDate(),y=date.getFullYear(),this.trigger("task:"+d+":"+m+":"+y+":added",data)},Calendar.prototype._createMonths=function(){var element,_i,_len,_ref1,_results;for(_ref1=this.element.find(".month:not([data-calendar])"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)element=_ref1[_i],_results.push(new Tasks.Calendar.Month($(element)));return _results},Calendar.prototype._loadMonth=function(event,options){var trigger;return trigger=options.trigger,$.ajax({url:trigger.attr("href"),type:"get",dataType:"text html"}).done(this._showNewMonth(options))},Calendar.prototype._provideTaskData=function(event,task){return $.extend(task,{template:this.taskTemplate,completionURL:this.completionURL.evaluate(task)}),task.finalize()},Calendar.prototype._showNewMonth=function(options){return function(html){var element,month,position;return month=options.month,position=options.position,element=$(html),month.element[position](element),new Tasks.Calendar.Month(element).show()}},Calendar}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Tasks.Calendar.Day=function(_super){function Day(){return this._moveTask=__bind(this._moveTask,this),this._insertTask=__bind(this._insertTask,this),this._addTask=__bind(this._addTask,this),_ref=Day.__super__.constructor.apply(this,arguments)}return __extends(Day,_super),Day.prototype.initialize=function(element){return this.element=element,this.message=Message.create(),this.assignValues(),this.observeElement()},Day.prototype.assignValues=function(){return this.day=this.element.data("day"),this.month=this.element.data("month"),this.year=this.element.data("year"),this.monthId=this.element.data("month-id")},Day.prototype.includes=function(task){return task.day===this.day&&task.month===this.month&&task.year===this.year},Day.prototype.observeElement=function(){return this.on("task:"+this.day+":"+this.month+":"+this.year+":ready",this._insertTask),this.on("task:"+this.day+":"+this.month+":"+this.year+":added",this._addTask),this.on("task:"+this.day+":"+this.month+":"+this.year+":possibly-moved",this._moveTask)},Day.prototype._addTask=function(event,data){var description,element;return description=data.description,delete data.description,element=$('<div class="task-data hide">'),element.data("month-id",this.monthId),element.data("json",data),element.text(description),$(document.body).append(element),Tasks.Calendar.Task.create(element),this.message.flash("Task added.")},Day.prototype._insertTask=function(event,task){return this.monthId===task.monthId?(event.stop(),this.element.removeClass("empty").append(task.element)):void 0},Day.prototype._moveTask=function(event,task){var element,previousDay;return element=task.element,previousDay=element.parents(".day"),this.element.is(previousDay)?void 0:(task.monthId=this.monthId,this._insertTask(event,task),0===previousDay.find(".task").length?previousDay.addClass("empty"):void 0)},Day}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Tasks.Calendar.Month=function(_super){function Month(){return this._show=__bind(this._show,this),this._loadPreviousMonth=__bind(this._loadPreviousMonth,this),this._loadNextMonth=__bind(this._loadNextMonth,this),this._hide=__bind(this._hide,this),_ref=Month.__super__.constructor.apply(this,arguments)}return __extends(Month,_super),Month.prototype.initialize=function(element){return this.element=element,this.element=element,this.assignElements(),this.observeElements(),this.element.data("calendar","true")},Month.prototype.assignElements=function(){var day,task,_i,_j,_len,_len1,_ref1,_ref2;for(this.id=this.element.data("id"),_ref1=this.element.find("td.day"),_i=0,_len=_ref1.length;_len>_i;_i++)day=_ref1[_i],new Tasks.Calendar.Day($(day));for(_ref2=this.element.find(".task-data"),_j=0,_len1=_ref2.length;_len1>_j;_j++)task=_ref2[_j],Tasks.Calendar.Task.create($(task));return this.triggers={previous:this.element.find("a.previous"),next:this.element.find("a.next")}},Month.prototype.observeElements=function(){return this.triggers.previous.on("click",this._loadPreviousMonth),this.triggers.next.on("click",this._loadNextMonth),this.element.on("month:show",this._show),this.on("month:shown",this._hide)},Month.prototype.show=function(){return this.element.show(),this.trigger("month:shown",this)},Month.prototype._hide=function(event,month){return month!==this?this.element.hide():void 0},Month.prototype._loadNextMonth=function(event){var next;return event.stop(),next=this.element.next(".month"),next.exists()?next.trigger("month:show"):this._loadOtherMonth({trigger:$(event.target),position:"after"})},Month.prototype._loadPreviousMonth=function(event){var previous;return event.stop(),previous=this.element.prev(".month"),previous.exists()?previous.trigger("month:show"):this._loadOtherMonth({trigger:$(event.target),position:"before"})},Month.prototype._loadOtherMonth=function(options){return options.month=this,this.trigger("calendar:load-month",options)},Month.prototype._show=function(event){return event.stop(),this.show()},Month}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Tasks.Calendar.Task=function(_super){function Task(){return this._udpateState=__bind(this._udpateState,this),this._update=__bind(this._update,this),this._toggleComplete=__bind(this._toggleComplete,this),this._remove=__bind(this._remove,this),this._edit=__bind(this._edit,this),_ref=Task.__super__.constructor.apply(this,arguments)}return __extends(Task,_super),Task.cache={},Task.create=function(dataElement){var data,task;return data=dataElement.data("json"),task=this.cache[data.id],task?task.moved():(task=new Tasks.Calendar.Task(dataElement),this.cache[data.id]=task),task},Task.prototype.initialize=function(dataElement){var data;return data=dataElement.data("json"),dataElement.remove(),$.extend(this,data),this.assignData(),this.trigger("task:needs-data",this)},Task.prototype.assignData=function(){var parts;return this.all_day?(parts=this.due_day.split("-"),this.dueDate=new Date(parts[0],parseInt(parts[1])-1,parts[2])):this.dueDate=new Date(Date.parse(this.due_date)),this.day=this.dueDate.getDate(),this.month=this.dueDate.getMonth()+1,this.year=this.dueDate.getFullYear(),this.monthId=""+this.month+"/"+this.year},Task.prototype.finalize=function(){return this._assignElements(),this._observeElement()},Task.prototype.moved=function(){return this.trigger("task:"+this.day+":"+this.month+":"+this.year+":possibly-moved",this)},Task.prototype._assignElements=function(){var html;return html=this.template.evaluate(this),this.element=$(html),this.edit={link:this.element.find(".title")},this.edit.url=this.edit.link.attr("href"),this.edit.link.attr("href","#"),this.checkbox=this.element.find("input:checkbox"),this.complete?(this.checkbox.check(!0),this.checkbox.parents("span").addClass("checked"),this.element.addClass("complete")):this.dueDate<new Date&&this.element.addClass("overdue"),this.message=Message.create()},Task.prototype._edit=function(event){return event.stop(),top.overlay.open(this.edit.url)},Task.prototype._observeElement=function(){return this.checkbox.on("click",this._toggleComplete),this.edit.link.on("click",this._edit),this.on("task:"+this.id+":deleted",this._remove),this.on("task:"+this.id+":updated",this._update),this.trigger("task:"+this.day+":"+this.month+":"+this.year+":ready",this)},Task.prototype._remove=function(event){return event.stop(),this.element.remove(),this.stopAllObservations()},Task.prototype._toggleComplete=function(){return $.ajax({url:this.completionURL,data:defaultParams(),type:"post"}).done(this._udpateState)},Task.prototype._update=function(event,data){var oldMonth;return oldMonth=this.month,$.extend(this,data),this.assignData(),this.month!==oldMonth&&this.element.remove(),this.edit.link.text(this.title),this._udpateState(),this.moved()},Task.prototype._udpateState=function(text){return null!=text&&(this.complete="complete"===text),this.complete?this.element.addClass("complete"):this.element.removeClass("complete"),this.dueDate<new Date?this.element.addClass("overdue"):this.element.removeClass("overdue")},Task}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Tasks.Form=function(){function Form(element,isNewTask){this.element=element,this.isNewTask=isNewTask,this._toggleReminderTime=__bind(this._toggleReminderTime,this),this._toggleReminderAbility=__bind(this._toggleReminderAbility,this),this._toggleElementAndLabel=__bind(this._toggleElementAndLabel,this),this._reminderUnitTimeKeyDown=__bind(this._reminderUnitTimeKeyDown,this),this._onSuccess=__bind(this._onSuccess,this),this._onDelete=__bind(this._onDelete,this),this._gotoObject=__bind(this._gotoObject,this),this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){return this.dueDate=this.element.find(".input.date"),this.addTime={element:this.element.find("#add-time .field"),label:this.element.find("#add-time a.label"),field:this.element.find("#add-time input")},this.assignUser={field:this.element.find("#assign-user select")},this.reminder={element:this.element.find("#send-reminder"),checkbox:this.element.find("#send-reminder input:checkbox"),timeElement:this.element.find("#reminder-time"),fields:this.element.find("#reminder-time input, #reminder-time select"),valueField:this.element.find("#reminder-time input")},this.deleteTrigger=this.element.find(".delete-button"),this.linkedObject=this.element.find(".linked-object")},Form.prototype.observeElements=function(){var value,_this=this;return this.addTime.label.on("click",function(event){return _this._toggleElementAndLabel("addTime",event)}),value=this.addTime.field.val(),!value||value.blank()?this.addTime.field.disable():this._toggleElementAndLabel("addTime"),this.assignUser.field.on("change",this._toggleReminderAbility),this._toggleReminderAbility(),this.reminder.checkbox.on("change",this._toggleReminderTime),this._toggleReminderTime(),this.reminder.valueField.on("keydown",this._reminderUnitTimeKeyDown),new Tasks.Form.TimeSelector(this.addTime.field),this.element.on("ajax:success",this._onSuccess),this.deleteTrigger.exists()&&this.deleteTrigger.on("ajax:success",this._onDelete),this.linkedObject.exists()?this.linkedObject.on("click",this._gotoObject):void 0},Form.prototype._gotoObject=function(event){var anchor;return event.stop(),anchor=$(event.target).closest("a"),top.overlay.hide(),top.pjax.loadUrl(anchor.attr("href"))},Form.prototype._onDelete=function(event,text){return event.stop(),top.overlay.hide(),top.Observations.trigger("task:"+text+":deleted"),top.Observations.trigger("task:deleted",{id:text})},Form.prototype._onSuccess=function(event,data){var eventName;return event.stop(),top.overlay.hide(),eventName=this.isNewTask?(this.element[0].reset(),"created"):(top.Observations.trigger("task:updated",data),""+data.id+":updated"),top.Observations.trigger("task:"+eventName,data)},Form.prototype._prepareField=function(namespace){var field,hours,meridian,minutes,now;return field=this[namespace].field,"addTime"===namespace&&field.val().blank()?(now=new Date,hours=now.getHours(),minutes=now.getMinutes(),meridian="am",hours>12&&(meridian="pm",hours-=12),0===hours?hours="12":10>hours&&(hours="0"+hours),10>minutes&&(minutes="0"+minutes),field.val(""+hours+":"+minutes+meridian)):void 0},Form.prototype._reminderUnitTimeKeyDown=function(event){return event.metaKey||event.ctrlKey?void 0:([8,9,37,39,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105].include(event.keyCode)||event.stop(),this.reminder.valueField.val().length>=2&&![8,9,37,39,46].include(event.keyCode)?event.stop():void 0)},Form.prototype._toggleElementAndLabel=function(namespace,event){return event&&event.stop(),this._prepareField(namespace),namespace=this[namespace],namespace.label.hide(),namespace.field.enable(),namespace.element.show()},Form.prototype._toggleReminderAbility=function(){var checkbox,userValue;return userValue=this.assignUser.field.val(),checkbox=this.reminder.checkbox,!userValue||userValue.blank()?(checkbox.is(":checked")&&checkbox.click(),checkbox.disable(),this._toggleReminderTime()):checkbox.enable()},Form.prototype._toggleReminderTime=function(){var r;return r=this.reminder,r.checkbox.is(":checked")?(r.fields.enable(),r.element.addClass("enabled"),r.timeElement.show()):(r.fields.disable(),r.element.removeClass("enabled"),r.timeElement.hide()),top.overlay.refreshHeight()},Form}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Tasks.Form.TimeSelector=function(){function TimeSelector(element){this.element=element,this._selectMeridian=__bind(this._selectMeridian,this),this._selectMinutes=__bind(this._selectMinutes,this),this._selectHours=__bind(this._selectHours,this),this._keydown=__bind(this._keydown,this),this._focus=__bind(this._focus,this),this._click=__bind(this._click,this),this.positions=["hours","minutes","meridian"],this.regex=/^(\d{1,2}):(\d\d)(am|pm)$/i,this.observeInput(),this.val(this.val().toLowerCase())}return TimeSelector.prototype.observeInput=function(){return this.element.on("click",this._click),this.element.on("focus",this._focus),this.element.on("keydown",this._keydown)},TimeSelector.prototype.val=function(newValue){return null==newValue?this.element.val():newValue.match(this.regex)?(newValue.match(/^\d:/)&&(newValue="0"+newValue),this.element.val(newValue)):void 0},TimeSelector.prototype._click=function(){return this._selectPosition(this._currentPosition()),this.focused=!1},TimeSelector.prototype._focus=function(event){var _this=this;return this.focused=!0,setTimeout(function(){return _this.focused?_this._click(event):void 0},1)},TimeSelector.prototype._keydown=function(event){var keyCode,position;if(position=this._currentPosition(),keyCode=event.keyCode,event.metaKey||event.ctrlKey||9===keyCode||event.stop(),[48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,65,80].include(keyCode))return this._manuallyChangeValue(position,keyCode);switch(keyCode){case 8:return this._clearValue(position);case 46:return this._clearValue(position);case 37:return this._decreasePosition(position);case 38:return this._increaseValue(position),this._selectPosition(position);case 39:return this._increasePosition(position);case 40:return this._decreaseValue(position),this._selectPosition(position)}},TimeSelector.prototype._clearValue=function(position){var match,value;if("meridian"!==position)return value=this.val(),match=value.match(this.regex),"hours"===position&&this.val(value.replace(match[1],12)),"minutes"===position&&this.val(value.replace(":"+match[2],":00")),this._selectPosition(position)},TimeSelector.prototype._currentPosition=function(){var index;return index=this.element.caret(),2>=index?this.positions[0]:index>=5?this.positions[2]:this.positions[1]},TimeSelector.prototype._decreaseHours=function(){var hours,oldHours,value;return value=this.val(),oldHours=value.match(this.regex)[1],hours=parseInt(oldHours,10),hours--,1>hours&&(hours=12),10>hours&&(hours="0"+hours),11===hours&&(this._toggleMeridian(),value=this.val()),this.val(value.replace(""+oldHours+":",""+hours+":"))},TimeSelector.prototype._decreaseMinutes=function(){var minutes,oldMinutes,value;return value=this.val(),oldMinutes=value.match(this.regex)[2],minutes=parseInt(oldMinutes,10),minutes--,0>minutes&&(minutes=59,this._decreaseHours(),value=this.val()),10>minutes&&(minutes="0"+minutes),this.val(value.replace(":"+oldMinutes,":"+minutes))},TimeSelector.prototype._decreasePosition=function(position){var index;return index=this.positions.indexOf(position),0===index?this._selectPosition(this.positions.last()):this._selectPosition(this.positions[index-1])},TimeSelector.prototype._decreaseValue=function(position){return"meridian"===position?this._toggleMeridian():this["_decrease"+position.capitalize()]()},TimeSelector.prototype._increaseHours=function(){var hours,oldHours,value;return value=this.val(),oldHours=value.match(this.regex)[1],hours=parseInt(oldHours,10),hours++,10>hours&&(hours="0"+hours),12===hours&&(this._toggleMeridian(),value=this.val()),parseInt(hours)>12&&(hours="01"),this.val(value.replace(""+oldHours+":",""+hours+":"))},TimeSelector.prototype._increaseMinutes=function(){var minutes,oldMinutes,value;return value=this.val(),oldMinutes=value.match(this.regex)[2],minutes=parseInt(oldMinutes,10),minutes++,10>minutes&&(minutes="0"+minutes),60===minutes&&(minutes="00",this._increaseHours(),value=this.val()),this.val(value.replace(":"+oldMinutes,":"+minutes))},TimeSelector.prototype._increasePosition=function(position){var index;return index=this.positions.indexOf(position),index===this.positions.length-1?this._selectPosition(this.positions.first()):this._selectPosition(this.positions[index+1])},TimeSelector.prototype._increaseValue=function(position){return"meridian"===position?this._toggleMeridian():this["_increase"+position.capitalize()]()},TimeSelector.prototype._manuallyChangeValue=function(position,keyCode){var hours,keyValue,match,minutes,newHours,newMinutes,newValue,value;return value=this.val(),match=value.match(this.regex),newValue=null,keyValue={65:"am",80:"pm",48:0,49:1,50:2,51:3,52:4,53:5,54:6,55:7,56:8,57:9,96:0,97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9}[keyCode],"meridian"===position&&(newValue=value.replace(match[3],keyValue)),"hours"===position&&(hours=parseInt(match[1],10),newHours=parseInt(match[1]+keyValue,10),newHours>12&&(newHours=keyValue),11===hours&&1===keyValue&&(newHours=keyValue),0===newHours&&(newHours=12),10>newHours&&(newHours="0"+newHours),newValue=value.replace(match[1],newHours)),"minutes"===position&&(minutes=parseInt(match[2],10),newMinutes=parseInt(match[2]+keyValue,10),newMinutes>59&&(newMinutes=keyValue),10>newMinutes&&(newMinutes="0"+newMinutes),newValue=value.replace(":"+match[2],":"+newMinutes)),this.val(newValue),this._selectPosition(position)},TimeSelector.prototype._selectHours=function(){return this.element.range(0,2)},TimeSelector.prototype._selectMinutes=function(){return this.element.range(3,5)},TimeSelector.prototype._selectMeridian=function(){return this.element.range(5,7)},TimeSelector.prototype._selectPosition=function(position){return setTimeout(this["_select"+position.capitalize()],0)},TimeSelector.prototype._toggleMeridian=function(){var oldText,text,value;return value=this.val(),oldText=value.match(this.regex)[3],text="am"===oldText?"pm":"am",this.val(value.replace(oldText,text))},TimeSelector}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Tasks.Lists=function(){function Lists(template){var e,_i,_len,_ref;for(_ref=$(".tasks-wrapper"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],new Tasks.List($(e),template)}return Lists}(),Tasks.List=function(_super){function List(){return this._handleIncompleteTask=__bind(this._handleIncompleteTask,this),this._handleCompleteTask=__bind(this._handleCompleteTask,this),this._addTask=__bind(this._addTask,this),this._addNewTask=__bind(this._addNewTask,this),this.removeTask=__bind(this.removeTask,this),_ref=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.prototype.initialize=function(element,taskTemplate){return this.element=element,this.taskTemplate=taskTemplate,this.assignElements(),this.observeElements()
},List.prototype.assignElements=function(){var e,_i,_len,_ref1;for(this.message=Message.create(),this.tasks=[],_ref1=this.element.find(".task"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],this.tasks.push(new Tasks.List.Task($(e),this));return this.isComplete=this.element.hasClass("complete")},List.prototype.observeElements=function(){return this.on("task:complete",this._handleCompleteTask),this.on("task:incomplete",this._handleIncompleteTask),this.on("task:created",this._addNewTask)},List.prototype.removeTask=function(task){return this.tasks.include(task)?(this.tasks.remove(task),this.tasks.any()?this.element.show():this.element.hide()):void 0},List.prototype._addNewTask=function(event,data){var element,task;if(this.isComplete===data.complete)return element=$(this.taskTemplate.evaluate(data)),this.element.append(element),task=new Tasks.List.Task(element,this),this._addTask(task),this.trigger("task:"+task.id+":updated",data),this.message.flash("Task added."),top.overlay.hide(),$(".tasks-empty").hide(),$(".tasks-actionbar").show()},List.prototype._addTask=function(task){return this.tasks.push(task),this.element.append(task.element),this.element.show(),this._sortAndRenderTasks()},List.prototype._handleCompleteTask=function(event,task){return this.isComplete?(this._addTask(task),task.list=this):this._removeTask(task)},List.prototype._handleIncompleteTask=function(event,task){return this.isComplete?this._removeTask(task):(this._addTask(task),task.list=this)},List.prototype._removeTask=function(task){return this.removeTask(task),this._sortAndRenderTasks()},List.prototype._sortAndRenderTasks=function(){var t,_i,_j,_len,_len1,_ref1,_ref2,_results;for(this.tasks=this.tasks.sort(function(t1,t2){return t1.date-t2.date}),_ref1=this.tasks,_i=0,_len=_ref1.length;_len>_i;_i++)t=_ref1[_i],t.remove();for(_ref2=this.tasks,_results=[],_j=0,_len1=_ref2.length;_len1>_j;_j++)t=_ref2[_j],_results.push(this.element.append(t.element));return _results},List}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Tasks.List.Task=function(_super){function Task(){return this._update=__bind(this._update,this),this._toggleExpansion=__bind(this._toggleExpansion,this),this._toggleCompletion=__bind(this._toggleCompletion,this),this._success=__bind(this._success,this),this._remove=__bind(this._remove,this),_ref=Task.__super__.constructor.apply(this,arguments)}return __extends(Task,_super),Task.prototype.initialize=function(element,list){return this.element=element,this.list=list,this.assignElements(),this.observeElements()},Task.prototype.assignElements=function(){return this.expansion=this.element.find(".expand"),this.titleElement=this.element.find("h2"),this.bodyElement=this.element.find(".task-body"),this.dueDateElement=this.element.find(".task-detail.date"),this.timeElement=this.element.find(".task-detail.time"),this.assigneeElement=this.element.find(".task-detail.assignee"),this.checkbox=this.element.find("input:checkbox"),this.editTrigger=this.element.find("a.edit"),this.deleteTrigger=this.element.find("a.remove"),this.id=this.element.data("id"),this.completionUrl=this.element.data("completion-url"),this.date=new Date(Date.parse(this.element.data("date"))),this.emptyContainer=$(".tasks-empty"),this.actionBar=$(".tasks-actionbar")},Task.prototype.observeElements=function(){return this.element.on("click",this._toggleExpansion),this.checkbox.on("click",this._toggleCompletion),this.editTrigger.addClass("open-overlay"),this.deleteTrigger.data("message","Deleting"),this.deleteTrigger.on("ajax:success",this._remove),this.on("task:"+this.id+":deleted",this._remove),this.on("task:"+this.id+":updated",this._update)},Task.prototype.remove=function(){return this.element.detach()},Task.prototype._remove=function(){return this.remove(),this.list.removeTask(this),this.stopAllObservations(),$("div.task").exists()?void 0:(this.actionBar.hide(),this.emptyContainer.show())},Task.prototype._success=function(data){var dateElement,isComplete,text;return text=data.status,isComplete="complete"===text,this.trigger("task:"+text,this),this.checkbox.enable(),this.checkbox.check(isComplete),dateElement=this.dueDateElement.parents(".task-date"),this.date<=new Date&&!isComplete?dateElement.addClass("overdue"):dateElement.removeClass("overdue")},Task.prototype._toggleCompletion=function(){return this.checkbox.disable(),$.ajax({url:this.completionUrl,type:"post",data:defaultParams(),message:"Saving"}).done(this._success)},Task.prototype._toggleExpansion=function(event){var target;return target=event.target,"a"===target.tagName.toLowerCase()||"input"===target.tagName.toLowerCase()||$(target).hasClass("task-description")?void 0:(event.stop(),this.expansion.toggleClass("open"),this.bodyElement.toggle())},Task.prototype._update=function(event,data){var date,dateElement,today;return this.titleElement.text(data.title),this.bodyElement.find(".task-description").text(data.description),date=new Date(Date.parse(data.due_date)),today=new Date,this.date=date,this.dueDateElement.find("span").text(data.formatted_due_date),data.formatted_due_time?this.timeElement.show().find("span").text(data.formatted_due_time):this.timeElement.hide(),data.assignee?this.assigneeElement.show().find("span").text(data.assignee):this.assigneeElement.hide(),dateElement=this.dueDateElement.parents(".task"),today>=date&&!data.complete?dateElement.addClass("is-overdue"):dateElement.removeClass("is-overdue")},Task}(GCObject)}.call(this),function(){this.Templates={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Templates.DirectMail=function(){function DirectMail(){this._showCreateWithEditor=__bind(this._showCreateWithEditor,this),this._showCreateFromFile=__bind(this._showCreateFromFile,this),this.assignElements(),this.observeElements()}return DirectMail.prototype.assignElements=function(){return this.element=$(".new-direct-mail-templates"),this.step1=this.element.find(".step-1"),this.step2=this.element.find(".step-2"),this.createFromFileButton=this.element.find(".create-from-file-button"),this.createFromFile=this.element.find(".create-from-file"),this.createWithEditorButton=this.element.find(".create-with-editor-button"),this.createWithEditor=this.element.find(".create-with-editor"),this.form=this.element.find("form")},DirectMail.prototype.observeElements=function(){return this.createFromFileButton.on("click",this._showCreateFromFile),this.createWithEditorButton.on("click",this._showCreateWithEditor)},DirectMail.prototype._showCreateFromFile=function(event){return event.preventDefault(),this.step1.hide(),this.step2.show(),this.createFromFile.show(),this.form.find("#template_source").val(this.createFromFileButton.data("source"))},DirectMail.prototype._showCreateWithEditor=function(event){return event.preventDefault(),this.step1.hide(),this.step2.show(),this.createWithEditor.show(),this.form.find("#template_source").val(this.createWithEditorButton.data("source"))},DirectMail}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Templates.DirectMail.Editor=function(){function Editor(paddingMappings){this.paddingMappings=paddingMappings,this._stopFormSubmission=__bind(this._stopFormSubmission,this),this._redirect=__bind(this._redirect,this),this.editorContainer=$(".editor-field"),this.form=this.editorContainer.closest("form"),this.editors=[],this.editors.push(new Templates.DirectMail.Editor.Instance(this,".page-1")),$(".page-2").exists()&&this.editors.push(new Templates.DirectMail.Editor.Instance(this,".page-2")),this.form.on("ajax:success",this._redirect)}return Editor.prototype.changeFormDisability=function(){var editor,oversizeEditors,_i,_len,_ref;for(oversizeEditors=0,_ref=this.editors,_i=0,_len=_ref.length;_len>_i;_i++)editor=_ref[_i],editor.isContentOverHeight()&&oversizeEditors++;return oversizeEditors>0?this.form.on("submit",this._stopFormSubmission):this.form.off("submit",this._stopFormSubmission)},Editor.prototype._redirect=function(event,data){return data.redirect?(Message.create().display("Loading"),setTimeout(function(){return window.location=data.redirect},10)):void 0},Editor.prototype._stopFormSubmission=function(event){return event.stop()},Editor}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Templates.DirectMail.Editor.Instance=function(){function Instance(parent,selector){this.parent=parent,this.selector=selector,this._setValueField=__bind(this._setValueField,this),this._padContent=__bind(this._padContent,this),this._disallowOversizeContent=__bind(this._disallowOversizeContent,this),this.assignElements(),this.resize(),this.setup(),this.observeElements()}return Instance.prototype.assignElements=function(){return this.element=$(this.selector),this.form=this.parent.form,this.container=this.parent.editorContainer,this.valueField=this.element.find("input:hidden"),this.format=this.container.data("format"),this.isLetter="8.5x11"===this.format},Instance.prototype.isContentOverHeight=function(){var contentHeight,maxHeight,padding;return maxHeight=Math.ceil(this.element.find(".dm-editor-wrapper").height()),contentHeight=Math.ceil(this.element.find(".ql-editor").height()),padding=parseFloat(this.element.find(".dm-editor").css("padding-top")),contentHeight+=2*padding,contentHeight>maxHeight},Instance.prototype.observeElements=function(){return".page-2"===this.selector&&this.form.on("submit",this._padContent),this.form.on("submit",this._setValueField),this.isLetter?void 0:this.editor.on("text-change",this._disallowOversizeContent)},Instance.prototype.resize=function(){var areaHeight,areaWidth,blockedArea,height,marginSizeInInches,maxInches,maxWidth,pageHeight,pageMargin,pageWidth,sizeInInches,width;return maxWidth=this.container.width(),maxInches=11,sizeInInches=this.format.split("x").map(function(n){return parseFloat(n)}),marginSizeInInches=this.parent.paddingMappings[this.format],pageWidth=maxWidth/maxInches*sizeInInches[0],pageHeight=sizeInInches[1]/sizeInInches[0]*pageWidth,pageMargin=maxWidth/(maxInches/marginSizeInInches),this.element.css({width:pageWidth}),this.element.find(".dm-editor-wrapper").css({height:pageHeight,padding:pageMargin-11}),blockedArea=this.element.find(".blocked-area"),blockedArea.exists()?(width=blockedArea.data("width"),height=blockedArea.data("height"),areaWidth=maxWidth/maxInches*width,areaHeight=height/width*areaWidth,this.element.find(".blocked-area").css({width:areaWidth,height:areaHeight})):void 0},Instance.prototype.setup=function(){return this.editor=new Quill(""+this.selector+" .dm-editor",{styles:!1,theme:"snow"}),this.editor.addModule("toolbar",{container:""+this.selector+" .dm-toolbar"}),this.editor.addModule("custom_variables",{container:""+this.selector+" .dm-toolbar .ql-custom-container",variables:["merge-fields"]}),this.editor.setHTML(this.valueField.val())},Instance.prototype._disallowOversizeContent=function(){var warning;return warning=this.element.find(".dm-editor-warning"),this.isContentOverHeight()?warning.addClass("is-visible"):warning.removeClass("is-visible"),this.parent.changeFormDisability()},Instance.prototype._padContent=function(event){var currentContent,previousContent;if(!this.contentPadded){for(event.stop(),currentContent=this.editor.getHTML(),previousContent=currentContent;!this.isContentOverHeight();)previousContent=currentContent,this.editor.setHTML(currentContent+"<div><br/>&nbsp;</div>"),currentContent=this.editor.getHTML();return this.editor.setHTML(previousContent),this.contentPadded=!0,this.form.submit()}},Instance.prototype._setValueField=function(){return this.valueField.val(this.editor.getHTML())},Instance}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Editor=function(_super){function Editor(){return this._success=__bind(this._success,this),this._submit=__bind(this._submit,this),this._removeFragment=__bind(this._removeFragment,this),this._fail=__bind(this._fail,this),this._addPage=__bind(this._addPage,this),this._addFragments=__bind(this._addFragments,this),this._addFragment=__bind(this._addFragment,this),_ref=Editor.__super__.constructor.apply(this,arguments)}return __extends(Editor,_super),Editor.prototype.initialize=function(options){return $.extend(this,options),this.baseFontSize=10,this.baseFontFamily="Verdana",this.existingFragments=this.fragments,this.fragments=[],this.pages=[],this.submitted=!1,$.extend(Templates.Editor,{fontScaling:this.fontScaling,baseFontSize:this.baseFontSize,baseFontFamily:this.baseFontFamily,textFragmentTemplate:this.textFragmentTemplate,isPreview:this.isPreview}),this.assignAndObserveElements(),this._adjustEditorHeight()},Editor.prototype.assignAndObserveElements=function(){return this.on("page:added",this._addPage),this.on("pages:added",this._addFragments),this.on("fragment:added",this._addFragment),this.on("fragment:removed",this._removeFragment),new Templates.Editor.Titlebar(this.element.find(".header")),new Templates.Editor.Toolbar(this.element.find(".document-toolbar")),new Templates.Editor.Thumbnails(this.element.find(".thumbnails")),new Templates.Editor.Pages(this.element.find(".pages")),this.on("editor:submit",this._submit)},Editor.prototype._addFragment=function(event,fragment){return this.fragments.push(fragment)},Editor.prototype._addFragments=function(){var attribute,data,page,value,_i,_j,_k,_len,_len1,_len2,_ref1,_ref2,_ref3;for(_ref1=this.pages,_i=0,_len=_ref1.length;_len>_i;_i++)page=_ref1[_i],page.show();for(_ref2=this.existingFragments,_j=0,_len1=_ref2.length;_len1>_j;_j++){data=_ref2[_j];for(attribute in data)value=data[attribute],data[attribute.camelCase()]=value;data.page=this.pages.detect(function(p){return p.number===data.page_number}),new Templates.Editor.TextFragment(data)}for(_ref3=this.pages,_k=0,_len2=_ref3.length;_len2>_k;_k++)page=_ref3[_k],page.hide();return this.pages.any()?this.pages[0].show():void 0},Editor.prototype._addPage=function(event,page){return this.pages.push(page)},Editor.prototype._adjustEditorHeight=function(){var editorHeight;return editorHeight=$(window).height()-120,this.trigger("editor:adjust-height",editorHeight)},Editor.prototype._fail=function(){return this.submitted=!1},Editor.prototype._parameters=function(defaults){var attribute,counter,fragment,id,result,value,_i,_len,_ref1,_ref2;for(result=defaults||{},result=defaultParams(result),counter=0,_ref1=this.fragments,_i=0,_len=_ref1.length;_len>_i;_i++){fragment=_ref1[_i],id=fragment.id||"fragment_"+counter,_ref2=fragment.submissionValues();for(attribute in _ref2)value=_ref2[attribute],result["text_fragments["+id+"]["+attribute+"]"]=value;counter++}return result},Editor.prototype._removeFragment=function(event,fragment){return this.fragments=this.fragments.remove(fragment)},Editor.prototype._submit=function(event,data){var type;if(!this.submitted)return this.submitted=!0,type="put",(this.isWizard||this.isPreview)&&(type="post"),$.ajax({url:this.url,type:type,data:this._parameters(data),message:"Saving"}).done(this._success).fail(this._fail)},Editor.prototype._success=function(data){return data.redirect?(Message.create().display("Loading"),setTimeout(function(){return window.location=data.redirect},10)):void 0},Editor}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Editor.JumpTo=function(_super){function JumpTo(){return this._jumpToDocument=__bind(this._jumpToDocument,this),_ref=JumpTo.__super__.constructor.apply(this,arguments)}return __extends(JumpTo,_super),JumpTo.prototype.initialize=function(element){return this.element=element,this.element.exists()?(this.container=this.element.closest(".thumbnails"),this.select=this.element.find("select"),this.select.on("change",this._jumpToDocument)):void 0},JumpTo.prototype._jumpToDocument=function(){return this.trigger("thumbnail:"+this.select.val()+":selected")},JumpTo}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Editor.Page=function(_super){function Page(){return this._deactivate=__bind(this._deactivate,this),this._click=__bind(this._click,this),this._activate=__bind(this._activate,this),_ref=Page.__super__.constructor.apply(this,arguments)}return __extends(Page,_super),Page.prototype.initialize=function(element){return this.element=element,this.container=this.element.closest(".pages"),this.assignValues(),this.observeElement(),this.trigger("page:added",this),this.addressing=this.element.find(".blocked-area"),this.addressing.exists()?this._resizeAddressing():void 0},Page.prototype.assignValues=function(){return this.number=this.element.data("number"),this.maxHeight=this.element.data("max-height"),this.maxWidth=this.element.data("max-width")},Page.prototype.append=function(element){return this.element.append(element)},Page.prototype.height=function(){return this.element.height()},Page.prototype.width=function(){return this.element.width()},Page.prototype.hide=function(){return this.element.hide()},Page.prototype.show=function(){return this.element.show()},Page.prototype.observeElement=function(){return this.on("thumbnail:"+this.number+":selected",this._activate),this.on("page:selected",this._deactivate),Templates.Editor.isPreview?void 0:this.element.on("click",this._click)},Page.prototype._activate=function(){return this.element.show(),this.trigger("page:selected",this)},Page.prototype._click=function(event){var className,element;return element=$(event.target),element.closest(".blocked-area").exists()?void 0:(className="text-fragment-container",element.hasClass(className)||element.closest("."+className).exists()?void 0:new Templates.Editor.TextFragment({page:this,activateOnCreate:!0,clickEvent:event}))},Page.prototype._deactivate=function(event,page){return page!==this?this.element.hide():void 0},Page.prototype._resizeAddressing=function(){var actualHeight,actualWidth,height,pageHeight,pageWidth,sizeInInches,width;return width=parseFloat(this.addressing.data("width")),height=parseFloat(this.addressing.data("height")),sizeInInches=this.addressing.data("format").split("x").map(function(n){return parseFloat(n)}),pageWidth=this.element.find("img").width(),pageHeight=this.element.find("img").height(),actualWidth=pageWidth/sizeInInches[0]*width,actualHeight=pageHeight/sizeInInches[1]*height,this.addressing.css({width:actualWidth,height:actualHeight})},Page}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Editor.Pages=function(_super){function Pages(){return this._adjustHeight=__bind(this._adjustHeight,this),_ref=Pages.__super__.constructor.apply(this,arguments)}return __extends(Pages,_super),Pages.prototype.initialize=function(element){var e,_i,_len,_ref1;for(this.element=element,this.pages=this.element.find(".page"),_ref1=this.pages,_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],element=$(e),new Templates.Editor.Page(element),element.hide();return this.pages.exists()&&this.pages.first().show(),this.on("pages:adjust-height",this._adjustHeight),this.trigger("pages:added")},Pages.prototype._adjustHeight=function(event,height){return this.element.css({height:""+height+"px"})},Pages}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Editor.TextFragment=function(_super){function TextFragment(){return this._resetContainment=__bind(this._resetContainment,this),this._remove=__bind(this._remove,this),this._paste=__bind(this._paste,this),this._keydown=__bind(this._keydown,this),this._insertAtCursor=__bind(this._insertAtCursor,this),this.deactivate=__bind(this.deactivate,this),this.activate=__bind(this.activate,this),_ref=TextFragment.__super__.constructor.apply(this,arguments)}return __extends(TextFragment,_super),TextFragment.prototype.initialize=function(options){return this.baseFontSize=Templates.Editor.baseFontSize,this.fontScaling=Templates.Editor.fontScaling,this.template=Templates.Editor.textFragmentTemplate,this._processClickEvent(options),this._initializeOptions(options),this._normalizePosition(),this._createElement(),Templates.Editor.isPreview||this.observeElements(),this.activateOnCreate&&this.activate(),this.trigger("fragment:added",this)},TextFragment.prototype.activate=function(){return this.isActive()?void 0:(this.trigger("fragments:deactivate",this),this.zIndex=this.activeZIndex,this._positionElement(),this.textElement.attr("contenteditable","true"),this.textElement.focus(),this.element.addClass("active").removeClass("inactive"))},TextFragment.prototype.deactivate=function(event,fragment){if(fragment!==this){if(!this.hasContent())return this._remove();if(this.isActive())return this.element.removeClass("active").addClass("inactive"),this.textElement.attr("contenteditable","false"),this.zIndex=this.inactiveZIndex,this._positionElement(),this.textElement.blur(),this.options.hide(),this.options.closeColorPicker()}},TextFragment.prototype.fontSizeForDisplay=function(){return this._round(this.fontSize/this.fontScaling*this.maxPageHeight/this.pageHeight)},TextFragment.prototype.hasContent=function(){return!this._elementContent().blank()},TextFragment.prototype.isActive=function(){return this.element.hasClass("active")},TextFragment.prototype.observeElements=function(){return this.textElement.on("click",this.activate),this.textElement.on("paste",this._paste),this.controls.remove.on("click",this._remove),this.controls.options.on("click",this.options.toggle),this.textElement.on("keydown",this._keydown),this._enableDragging(),this.on("page:selected",this.deactivate),this.on("page:selected",this._resetContainment),this.on("fragments:deactivate",this.deactivate),this.on("fragment:insert-at-cursor",this._insertAtCursor)},TextFragment.prototype.submissionValues=function(){return{x:this.x,y:this.y,content:this._elementContent(),page_number:this.page.number,source_id:this.sourceId,page_height:this.pageHeight,page_width:this.pageWidth,max_page_height:this.maxPageHeight,max_page_width:this.maxPageWidth,font_family:this.fontFamily,font_size:this.fontSize,bold:this.bold,italic:this.italic,underline:this.underline,strikethrough:this.strikethrough,color:this.foreground,background_color:this.background,image_height:this._imageHeight(),image_width:this._imageWidth()}},TextFragment.prototype._assignElements=function(){var e;this.controls={element:this.element.find(".actions"),drag:this.element.find("a.move"),options:this.element.find("a.options"),remove:this.element.find("a.remove")},this.textElement=this.element.find(".text-fragment");try{return this.textElement.html(decodeURIComponent(this.content))}catch(_error){return e=_error,this.textElement.html(this.content)}},TextFragment.prototype._createElement=function(){return this.element=$(this.template),this._assignElements(),this.page.append(this.element),this._positionElement(),this.options=new Templates.Editor.TextFragment.Options(this,this.element.find("div.options-container"))},TextFragment.prototype._draggableContainment=function(){var containment,offset;return offset=this.page.element.offset(),containment=[offset.left,offset.top],containment.push(offset.left+this.page.element.width()),containment.push(offset.top+this.page.element.height()-17),containment},TextFragment.prototype._elementContent=function(){var html;return html=this.textElement.html().stripHTML(),(this["signature?"]||this["initials?"])&&this.element.find("img").exists()?html:$("<span>").html(html).text()},TextFragment.prototype._enableDragging=function(){var _this=this;return this.controls.drag.on("click",function(e){return e.preventDefault()}),this.element.draggable({handle:this.controls.drag,containment:this._draggableContainment(),scrollSensitivity:100,zIndex:this.activeZIndex,stop:function(){return _this.x=parseInt(_this.element.css("left"),10),_this.y=parseInt(_this.element.css("top"),10)}})},TextFragment.prototype._getSelection=function(){var anchorNode,selection;if(selection=window.getSelection(),anchorNode=selection.anchorNode,!anchorNode)return null;for(;!anchorNode.tagName;)anchorNode=anchorNode.parentNode;return $(anchorNode).hasClass("text-fragment")?selection:null},TextFragment.prototype._imageDimension=function(dimension){var hidden,image,page,value;return image=this.element.find("img"),page=this.page.element,image.exists()&&(this["signature?"]||this["initials?"])?(hidden=page.is(":hidden"),value=null,hidden&&page.show(),value=image[dimension](),hidden&&page.hide(),value):void 0},TextFragment.prototype._imageHeight=function(){return this._imageDimension("height")},TextFragment.prototype._imageWidth=function(){return this._imageDimension("width")},TextFragment.prototype._initializeOptions=function(options){var page;return page=options.page,options=$.extend({fontSize:Templates.Editor.baseFontSize,fontFamily:"Verdana",bold:!1,italic:!1,underline:!1,strikethrough:!1,foreground:options.color||"#000000",background:options.background_color||"",content:"",inactiveZIndex:1,activeZIndex:2,zIndex:1},options),options=$.extend(options,{maxPageHeight:page.maxHeight,maxPageWidth:page.maxWidth,pageHeight:page.height(),pageWidth:page.width()}),$.extend(this,options)},TextFragment.prototype._insertAtCursor=function(event,data){var forceFocus,node,range,selection,selectionPoints;if(this.isActive())return selection=this._getSelection(),node=data.node,selectionPoints=data.selectionPoints,forceFocus=data.forceFocus,selection&&selection.getRangeAt&&selection.rangeCount&&(range=selection.getRangeAt(0),range.deleteContents(),range.insertNode(node),range.selectNode(node),selection.removeAllRanges(),forceFocus&&node.parentNode.focus(),selectionPoints&&$.isArray(selectionPoints)&&(range.setStart(node,selectionPoints[0]),range.setEnd(node,selectionPoints[1])),selection.addRange(range),selectionPoints&&$.isNumeric(selectionPoints))?selection.collapse(node,selectionPoints):void 0},TextFragment.prototype._normalizePosition=function(){return this.page_width&&this.pageWidth!==this.page_width&&(this.x=this.x*this.pageWidth/this.page_width),this.page_height&&this.pageHeight!==this.page_height?this.y=this.y*this.pageHeight/this.page_height:void 0},TextFragment.prototype._keydown=function(event){var keyCode;return keyCode=event.keyCode,27===keyCode&&this.deactivate(),13===keyCode&&(event.ctrlKey||event.metaKey)?this.deactivate():void 0},TextFragment.prototype._paste=function(e){var content,event,transfer,_this=this;return document.queryCommandSupported("insertText")?(e.preventDefault(),event=e.originalEvent||e,transfer=event.clipboardData||window.clipboardData,content=transfer.getData("Text"),document.execCommand("insertText",!1,content)):(this.textElement.find("*").addClass("within"),setTimeout(function(){var _i,_len,_ref1;for(_ref1=_this.textElement.find("*"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],$(e).not(".within").contents().unwrap();return _this.textElement.find(".within").removeClass("within")},1))},TextFragment.prototype._positionElement=function(){return this.element.css({left:""+this.x+"px",top:""+this.y+"px",zIndex:this.zIndex})},TextFragment.prototype._processClickEvent=function(options){var event,xOffset,yOffset;return(event=options.clickEvent)?(xOffset=2,yOffset=4*(this.baseFontSize/(12/this.fontScaling)),event.offsetX?(this.x=event.offsetX+xOffset,this.y=event.offsetY-yOffset):(this.x=event.layerX+xOffset,this.y=event.layerY-yOffset),delete options.clickEvent):void 0},TextFragment.prototype._remove=function(event){return event&&event.stop(),this.element.remove(),this.trigger("fragment:removed",this),this.stopAllObservations()},TextFragment.prototype._resetContainment=function(event,page){var error;if(this.page===page)try{return this.element.draggable("option","containment",this._draggableContainment())}catch(_error){error=_error}},TextFragment.prototype._round=function(value){return Math.round(10*value)/10},TextFragment}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Templates.Editor.TextFragment.Options=function(){function Options(fragment,element){this.fragment=fragment,this.element=element,this._showForegroundPicker=__bind(this._showForegroundPicker,this),this._showBackgroundPicker=__bind(this._showBackgroundPicker,this),this._pickColor=__bind(this._pickColor,this),this._hide=__bind(this._hide,this),this._applyUnderline=__bind(this._applyUnderline,this),this._applyStrikethrough=__bind(this._applyStrikethrough,this),this._applyItalic=__bind(this._applyItalic,this),this._applyFontSize=__bind(this._applyFontSize,this),this._applyFontFamily=__bind(this._applyFontFamily,this),this._applyBold=__bind(this._applyBold,this),this.toggle=__bind(this.toggle,this),this.applyStyles=__bind(this.applyStyles,this),this.assignElements(),this.observeElements(),this._initializeStyles()}return Options.prototype.applyStyles=function(){return this._applyFontFamily(),this._applyFontSize(),this._applyBold(),this._applyItalic(),this._applyUnderline(),this._applyStrikethrough(),this._applyColors()},Options.prototype.assignElements=function(){return this.styleElement=this.fragment.textElement,this.font={family:this.element.find(".font-family"),size:this.element.find(".font-size")},this.formatting={bold:this.element.find("a.bold-button"),italic:this.element.find("a.italic-button"),underline:this.element.find("a.underline-button"),strikethrough:this.element.find("a.strikethrough-button"),foreground:this.element.find("a.foreground-button"),background:this.element.find("a.background-button")},this.colorsContainer=this.element.find(".colors-container"),this.colors=this.colorsContainer.find(".color-option"),this.doneTrigger=this.element.find(".done-button")},Options.prototype.hide=function(){return this.element.hide()},Options.prototype.observeElements=function(){var _this=this;return this.font.family.on("change",this._applyFontFamily),this.font.size.on("change",this._applyFontSize),this.formatting.bold.on("click",this._applyBold),this.formatting.italic.on("click",this._applyItalic),this.formatting.underline.on("click",this._applyUnderline),this.formatting.strikethrough.on("click",this._applyStrikethrough),this.formatting.foreground.on("click",this._showForegroundPicker),this.formatting.background.on("click",this._showBackgroundPicker),this.colors.on("click",this._pickColor),$(function(){return setTimeout(_this.applyStyles,100)}),this.doneTrigger.on("click",this._hide)},Options.prototype.toggle=function(event){return event.stop(),this.element.toggle(),this.element.is(":hidden")?void 0:this.fragment.activate()},Options.prototype._applyBold=function(event){return this._handleFormattingClick(event,"bold"),this.fragment.bold?this.styleElement.css("font-weight","bold"):this.styleElement.css("font-weight","normal")},Options.prototype._applyColors=function(){return this.styleElement.css("color",this.fragment.foreground),this.styleElement.css("background-color",this.fragment.background.blank()?"transparent":this.fragment.background)},Options.prototype._applyFontFamily=function(){return this.fragment.fontFamily=this.font.family.val(),this.styleElement.css({fontFamily:this.fragment.fontFamily}),this.fragment.textElement.focus()
},Options.prototype._applyFontSize=function(){var size;return Templates.Editor.baseFontSize=this.fragment.fontSize=parseInt(this.font.size.val()),size=this.fragment.fontSizeForDisplay(),this.styleElement.css({fontSize:""+size+"px",height:""+size+"px"}),this.fragment.textElement.focus()},Options.prototype._applyItalic=function(event){return this._handleFormattingClick(event,"italic"),this.fragment.italic?this.styleElement.css("font-style","italic"):this.styleElement.css("font-style","normal")},Options.prototype._applyStrikethrough=function(event){return this._handleFormattingClick(event,"strikethrough"),this.fragment.strikethrough?this.styleElement.css("text-decoration","line-through"):this.fragment.underline?void 0:this.styleElement.css("text-decoration","none")},Options.prototype._applyUnderline=function(event){return this._handleFormattingClick(event,"underline"),this.fragment.underline?this.styleElement.css("text-decoration","underline"):this.fragment.strikethrough?void 0:this.styleElement.css("text-decoration","none")},Options.prototype._fontSize=function(){return""+this.fragment.fontSize},Options.prototype._handleFormattingClick=function(event,type){var element;return element=this.formatting[type],event&&(event.stop(),element.toggleClass("active")),this.fragment[type]=element.hasClass("active")},Options.prototype._hide=function(event){return event.stop(),this.element.hide()},Options.prototype._initializeStyles=function(){return this.font.family.val(this.fragment.fontFamily).change(),this.font.size.val(this._fontSize()).change(),this.fragment.bold&&this.formatting.bold.addClass("active"),this.fragment.italic&&this.formatting.italic.addClass("active"),this.fragment.underline&&this.formatting.underline.addClass("active"),this.fragment.strikethrough&&this.formatting.strikethrough.addClass("active"),this.applyStyles()},Options.prototype._pickColor=function(event){var color,target;return target=$(event.target),color=target.data("color"),this.colors.removeClass("active"),target.addClass("active"),this.formatting.foreground.hasClass("active")?this.fragment.foreground=color:this.fragment.background=color,this._applyColors()},Options.prototype._showBackgroundPicker=function(event){return event&&event.stop(),this.formatting.background.toggleClass("active"),this.formatting.foreground.removeClass("active"),this.formatting.background.hasClass("active")?this.colorsContainer.show().removeClass("color").addClass("background-color"):this.colorsContainer.hide(),this.colors.removeClass("active"),this.colors.filter("[data-color="+this.fragment.background+"]").addClass("active")},Options.prototype._showForegroundPicker=function(event){return event&&event.stop(),this.formatting.foreground.toggleClass("active"),this.formatting.background.removeClass("active"),this.formatting.foreground.hasClass("active")?this.colorsContainer.show().removeClass("background-color").addClass("color"):this.colorsContainer.hide(),this.colors.removeClass("active"),this.colors.filter("[data-color="+this.fragment.foreground+"]").addClass("active")},Options.prototype.closeColorPicker=function(){return this.colorsContainer.hide(),this.formatting.foreground.removeClass("active"),this.formatting.background.removeClass("active")},Options}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Editor.Thumbnail=function(_super){function Thumbnail(){return this._click=__bind(this._click,this),this._deactivate=__bind(this._deactivate,this),_ref=Thumbnail.__super__.constructor.apply(this,arguments)}return __extends(Thumbnail,_super),Thumbnail.prototype.initialize=function(element){return this.element=element,this.pageNumber=this.element.data("number"),this.on("thumbnail:selected",this._deactivate),this.on("thumbnail:"+this.pageNumber+":selected",this._click),this.element.on("click",this._click)},Thumbnail.prototype._deactivate=function(event,thumbnail){return thumbnail!==this?this.element.removeClass("active"):void 0},Thumbnail.prototype._click=function(){return this.element.hasClass("active")?void 0:(this.element.addClass("active"),this.trigger("thumbnail:selected",this),this.trigger("thumbnail:"+this.pageNumber+":selected"))},Thumbnail}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Editor.Thumbnails=function(_super){function Thumbnails(){return this._adjustHeight=__bind(this._adjustHeight,this),_ref=Thumbnails.__super__.constructor.apply(this,arguments)}return __extends(Thumbnails,_super),Thumbnails.prototype.initialize=function(element){var e,_i,_len,_ref1;for(this.element=element,_ref1=this.element.find(".thumbnail-container"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],new Templates.Editor.Thumbnail($(e));return new Templates.Editor.JumpTo(this.element.find(".jump-to")),this.on("editor:adjust-height",this._adjustHeight)},Thumbnails.prototype._adjustHeight=function(event,height){return this.element.css({height:""+height+"px"})},Thumbnails}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Editor.Titlebar=function(_super){function Titlebar(){return this._submit=__bind(this._submit,this),this._closeWindow=__bind(this._closeWindow,this),_ref=Titlebar.__super__.constructor.apply(this,arguments)}return __extends(Titlebar,_super),Titlebar.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Titlebar.prototype.assignElements=function(){return this.title=this.element.find("input:text"),this.submit=this.element.find("input.action-button:submit"),this.cancelTrigger=this.element.find("a.cancel"),this.namespace=this.element.data("namespace")},Titlebar.prototype.observeElements=function(){return this.submit.on("click",this._submit),this.cancelTrigger.hasClass("close")?this.cancelTrigger.on("click",this._closeWindow):void 0},Titlebar.prototype._closeWindow=function(event){return event.stop(),window.close()},Titlebar.prototype._submit=function(event){var data,form,target;return target=$(event.target),"Previous Step"!==target.attr("value")?(event.stop(),form=this.element.find("form.fields"),form.exists()||(form=this.element.closest("form")),data=form.serializeObject(),delete data.commit,this.trigger("editor:submit",data)):void 0},Titlebar}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Editor.Toolbar=function(_super){function Toolbar(){return this._insertVariable=__bind(this._insertVariable,this),this._adjustPageContainerHeight=__bind(this._adjustPageContainerHeight,this),this._addAdditionalField=__bind(this._addAdditionalField,this),_ref=Toolbar.__super__.constructor.apply(this,arguments)}return __extends(Toolbar,_super),Toolbar.prototype.initialize=function(element){return this.element=element,this.element.exists()&&this.assignElements(),this.observeElements()},Toolbar.prototype.assignElements=function(){return this.variables={your:this.element.find("select.variables.your"),property:this.element.find("select.variables.property"),buyer:this.element.find("select.variables.buyer"),contact:this.element.find("select.variables.contact"),recipient:this.element.find("select.variables.recipient"),merge:this.element.find("select.variables.merge"),custom:this.element.find(".variables.custom")},this.addFieldButton=this.element.find(".additional-object"),this._populateVariables()},Toolbar.prototype.observeElements=function(){var action,element,type,_ref1,_results;if(this.on("editor:adjust-height",this._adjustPageContainerHeight),this.element.exists()&&this.addFieldButton.on("click",this._addAdditionalField),this.variables){_ref1=this.variables,_results=[];for(type in _ref1)element=_ref1[type],action=element.hasClass("custom")?"click":"change",_results.push(element.on(action,this._insertVariable));return _results}},Toolbar.prototype.setupMultipleSelector=function(index){var label,options,select,selector;return selector=this._selector.clone(!0),label=selector.find("span:first-child"),select=selector.find("select"),options=selector.find("option"),options.each(function(i,el){var placeholder,value;return el=$(el),el.val().blank()?(placeholder=el.text().split(" "),placeholder.splice(1,0,index),el.text(placeholder.join(" ")),label.text(placeholder.join(" "))):(value=el.val().split("_"),value.splice(1,0,"["+index+"]"),el.val(value.join("_").replace("_[","[").replace("]_","]")))}),selector.show()},Toolbar.prototype._addAdditionalField=function(event){var target;return target=$(event.currentTarget),null==this._selector&&(this._selector=target.prev(".selector").hide()),this._selectorIndex||(this._selectorIndex=1,target.before(this.setupMultipleSelector(this._selectorIndex))),this._selectorIndex+=1,target.before(this.setupMultipleSelector(this._selectorIndex))},Toolbar.prototype._adjustPageContainerHeight=function(event,editorHeight){var elementHeight;return elementHeight=this.element.height()||0,this.trigger("pages:adjust-height",editorHeight-elementHeight)},Toolbar.prototype._insertAtCursor=function(textOrNode,selectionPoints,forceFocus){var node;if(window.getSelection)return node="object"==typeof textOrNode?textOrNode:document.createTextNode(textOrNode),this.trigger("fragment:insert-at-cursor",{node:node,selectionPoints:selectionPoints,forceFocus:forceFocus})},Toolbar.prototype._insertVariable=function(event){var element,value;return element=$(event.target),element.hasClass("custom")?(this._insertAtCursor("{!variable_name}",[2,15]),element.blur()):(value=element.val(),value.blank()||this._insertAtCursor(value,value.length,!0),element.val(""))},Toolbar.prototype._option=function(value,name){return null==name&&(name=value),'<option value="'+value+'">'+name+"</option>"},Toolbar.prototype._populateVariables=function(){var content,label,mappings,number,select,title,type,value,variables,_results;mappings={your:1,buyer:2,property:3,recipient:4,contact:5,merge:8},_results=[];for(type in mappings)if(number=mappings[type],select=this.variables[type],select.exists()){title={buyer:keywordsBuyerTitle,property:keywordsPropertyTitle}[type]||type.capitalize(),title=""+title+" Variables","merge"===type&&(title="Merge Fields"),select.append(this._option("",title)),variables=window["xinha_keywords"+number],content=[];for(label in variables)value=variables[label],content.push(this._option(value,label));content.shift(),select.append(content.join("")),_results.push(select.val(""))}else _results.push(void 0);return _results},Toolbar}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Templates.Guru=function(){function Guru(){this._showTemplate=__bind(this._showTemplate,this),this.templates=$(".template[data-template]"),this.templateLinks=$(".templates a[data-template]"),this.templateLinks.on("click",this._showTemplate),this.templateLinks.first().click()}return Guru.prototype._showTemplate=function(event){var target,template;return event.preventDefault(),target=$(event.currentTarget),template=target.data("template"),this.templateLinks.removeClass("is-selected"),target.addClass("is-selected"),this.templates.hide(),this.templates.filter("[data-template='"+template+"']").show()},Guru}()}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.List=function(_super){function List(){return _ref=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.prototype.initialize=function(element){var _i,_len,_ref1,_results;for(this.element=element,this.groups=this.element.find(".template-group"),this.toolbar=new Templates.List.Toolbar(this.element.find(".toolbar"),this.groups),_ref1=this.groups,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)element=_ref1[_i],_results.push(new Templates.List.Column[element.id]($(element)));return _results},List}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.List.Column=function(_super){function Column(){return this._toggleSystemTemplates=__bind(this._toggleSystemTemplates,this),this._showExcludedTemplates=__bind(this._showExcludedTemplates,this),this._search=__bind(this._search,this),this._createNewField=__bind(this._createNewField,this),this._alterSystemTrigger=__bind(this._alterSystemTrigger,this),_ref=Column.__super__.constructor.apply(this,arguments)}return __extends(Column,_super),Column.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Column.prototype.assignElements=function(){var element,klass,_i,_len,_ref1,_results;for(this.scope=this.element.attr("id"),this.header=this.element.find(".template-group-header"),this.toggleSystemTrigger=this.header.find("a.system-templates"),this.toggleSystemShown=this.toggleSystemTrigger.hasClass("defaults-shown"),this.showExclusionsTrigger=this.header.find("a.excluded-templates"),klass=Templates.List.Field[this.element.attr("id")],_ref1=this.element.find(".template-object"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)element=_ref1[_i],_results.push(new klass($(element)));return _results},Column.prototype.observeElements=function(){return this.observeHeaderElements(),this._registerTemplateSpecificCallbacks()},Column.prototype.observeHeaderElements=function(){var trigger;return this.toggleSystemTrigger.on("ajax:success",this._toggleSystemTemplates),trigger=this.showExclusionsTrigger,this.on("object:excluded",function(){return trigger.show()}),trigger.on("ajax:success",this._showExcludedTemplates),this.element.find(".excluded").exists()?trigger.show():trigger.hide(),this.on("search:"+this.scope+":changed",this._search),this.on("search:"+this.scope+":cleared",this._alterSystemTrigger)},Column.prototype._alterSystemTrigger=function(){return this.toggleSystemShown?this.toggleSystemTrigger.removeClass("defaults-hidden").addClass("defaults-shown"):this.toggleSystemTrigger.removeClass("defaults-shown").addClass("defaults-hidden")},Column.prototype._createNewField=function(event,html){var element;return element=$(html),this.element.find(".templates-container").append(element),new(Templates.List.Field[this.element.attr("id")])(element)},Column.prototype._registerTemplateSpecificCallbacks=function(){return this.on("email-template:created",this._createNewField)},Column.prototype._search=function(){return this.toggleSystemTrigger.removeClass("defaults-hidden").addClass("defaults-shown")},Column.prototype._showExcludedTemplates=function(){return this.showExclusionsTrigger.hide(),this.element.trigger("excluded-templates:show")},Column.prototype._toggleSystemTemplates=function(event,text){return this.toggleSystemShown=eval(text),this._alterSystemTrigger(),this.element.trigger("system-visibility:changed",{isVisible:this.toggleSystemShown})},Column}(GCObject)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.List.Column["direct-mail-templates"]=function(_super){function _Class(){return _ref=_Class.__super__.constructor.apply(this,arguments)}return __extends(_Class,_super),_Class}(Templates.List.Column)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.List.Column["document-templates"]=function(_super){function _Class(){return this._createNewPackage=__bind(this._createNewPackage,this),_ref=_Class.__super__.constructor.apply(this,arguments)}return __extends(_Class,_super),_Class.prototype._createNewPackage=function(event,html){var e,element,elements,id,_i,_j,_len,_len1,_ref1,_results;for(elements=[],_ref1=$("<div>").append(html).find(".template-object"),_i=0,_len=_ref1.length;_len>_i;_i++)element=_ref1[_i],this.element.find(".template-section").first().append(element),elements.push(element);for(id=this.element.attr("id"),_results=[],_j=0,_len1=elements.length;_len1>_j;_j++)e=elements[_j],_results.push(new Templates.List.Field[id]($(e)));return _results},_Class.prototype._registerTemplateSpecificCallbacks=function(){return this.on("document-package:created",this._createNewPackage)},_Class}(Templates.List.Column)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.List.Column["email-templates"]=function(_super){function _Class(){return _ref=_Class.__super__.constructor.apply(this,arguments)}return __extends(_Class,_super),_Class}(Templates.List.Column)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.List.Field=function(_super){function Field(){return this._showExclusion=__bind(this._showExclusion,this),this._searchClear=__bind(this._searchClear,this),this._search=__bind(this._search,this),this._insertCopy=__bind(this._insertCopy,this),this._goToEdit=__bind(this._goToEdit,this),this.toggle=__bind(this.toggle,this),this.remove=__bind(this.remove,this),_ref=Field.__super__.constructor.apply(this,arguments)}return __extends(Field,_super),Field.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Field.prototype.assignElements=function(){return this.container=this.element.parents(".template-group"),this.scope=this.container.attr("id"),this.isSystem=this.element.hasClass("system"),this.isExcluded=this.element.hasClass("excluded"),this.isSearchable=!0,this.titleElement=this.element.find(".field"),this.searchableContent=this.titleElement.text().strip().toLowerCase(),this.originallyVisible=null,this.actionsContainer=this.element.find(".actions"),this.triggers={edit:this.actionsContainer.find("a.edit-button"),copy:this.actionsContainer.find("a.copy-button"),print:this.actionsContainer.find("a.print-button"),"delete":this.actionsContainer.find("a.delete-button")}},Field.prototype.observeElements=function(){return this.isSystem&&(this.isPackaged||this.container.on("system-visibility:changed",this.toggle),this.container.on("excluded-templates:show",this._showExclusion)),this.triggers.edit.exists()&&!this.isPackage&&this.titleElement.on("click",this._goToEdit),this.triggers.copy.data("message","Copying"),this.triggers.copy.on("ajax:success",this._insertCopy),this.triggers["delete"].data("message","Deleting"),this.triggers["delete"].on("ajax:success",this.remove),this.isSearchable?(this.on("search:"+this.scope+":changed",this._search),this.on("search:"+this.scope+":cleared",this._searchClear)):void 0},Field.prototype.remove=function(){return this.isSystem?(this.element.addClass("excluded"),this.trigger("object:excluded",this)):(this.element.remove(),this.stopAllObservations())},Field.prototype.toggle=function(event,data){return this.element[data.isVisible?"show":"hide"]()},Field.prototype._copyAfterElement=function(){return this.element},Field.prototype._goToEdit=function(){return window.location=this.triggers.edit.attr("href")},Field.prototype._insertCopy=function(event,html){var element,parent,sibling,type,_i,_len,_ref1,_results;for(sibling=this._copyAfterElement(),type=this.container.attr("id"),parent=$("<div>").append(html),_ref1=parent.find(".template-object"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)element=_ref1[_i],sibling.after(element),sibling=$(element),_results.push(new Templates.List.Field[type](sibling));return _results},Field.prototype._search=function(event,query){var shouldShow;return null===this.originallyVisible&&(this.originallyVisible=!this.element.is(":hidden")&&!this.isExcluded),shouldShow=this.searchableContent.score(query)>=.6,this.toggle(event,{isVisible:shouldShow})},Field.prototype._searchClear=function(event){var visibility;return visibility=null===this.originallyVisible?!0:this.originallyVisible,this.toggle(event,{isVisible:visibility}),this.originallyVisible=null},Field.prototype._showExclusion=function(){return this.element.removeClass("excluded")},Field}(GCObject)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.List.Field["direct-mail-templates"]=function(_super){function _Class(){return _ref=_Class.__super__.constructor.apply(this,arguments)}return __extends(_Class,_super),_Class}(Templates.List.Field)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.List.Field["document-templates"]=function(_super){function _Class(){return this._toggleChildren=__bind(this._toggleChildren,this),this._packageRemove=__bind(this._packageRemove,this),this._packageEdit=__bind(this._packageEdit,this),this._enablePackageEdit=__bind(this._enablePackageEdit,this),this.toggle=__bind(this.toggle,this),this.remove=__bind(this.remove,this),this._search=__bind(this._search,this),_ref=_Class.__super__.constructor.apply(this,arguments)}return __extends(_Class,_super),_Class.prototype.assignElements=function(){var child,element,_i,_len,_ref1,_results;if(_Class.__super__.assignElements.call(this),this.id=this.element.data("id"),this.isPackage=this.element.hasClass("package"),this.isPackaged=this.element.hasClass("packaged"),this.isSearchable=!this.isPackaged,this.isPackage){for(this.children=this.container.find("."+this.id),_ref1=this.children,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)element=_ref1[_i],child=$(element),_results.push(this.searchableContent+=" "+child.find(".field").text().strip().toLowerCase());return _results}},_Class.prototype.observeElements=function(){return _Class.__super__.observeElements.call(this),this.isPackage&&this.isSystem&&this.children.find("a.delete-button").hide(),this.isPackage&&(this.element.on("click",this._toggleChildren),this.triggers.edit.on("click",this._enablePackageEdit)),this.on("package:edit",this._packageEdit),this.isPackaged?this.on("package:removed",this._packageRemove):void 0},_Class.prototype._search=function(event,query){return _Class.__super__._search.call(this,event,query),this.isPackage?this.children[this.element.is(":hidden")?"hide":"show"]():void 0},_Class.prototype.remove=function(event){return _Class.__super__.remove.call(this,event),this.isPackage?this.trigger("package:removed",this.id):void 0},_Class.prototype.replace=function(html){var e,element,elements,object,_i,_j,_len,_len1,_ref1,_results;for(elements=[],element=this.element,_ref1=$("<div>").append(html).find(".template-object"),_i=0,_len=_ref1.length;_len>_i;_i++)object=_ref1[_i],element.after(object),element=$(object),elements.push(object);for(this.remove(),_results=[],_j=0,_len1=elements.length;_len1>_j;_j++)e=elements[_j],_results.push(new Templates.List.Field["document-templates"]($(e)));return _results},_Class.prototype.toggle=function(event,data){return _Class.__super__.toggle.call(this,event,data),this.isPackage?this.children[this.element.is(":hidden")?"hide":"show"]():void 0},_Class.prototype._copyAfterElement=function(){var element;return this.isPackage?(element=this.children.last(),element.exists()||(element=this.element),element):_Class.__super__._copyAfterElement.call(this)},_Class.prototype._enablePackageEdit=function(event){return event.stop(),this.trigger("package:edit",{"package":this,url:this.triggers.edit.attr("href")})},_Class.prototype._packageEdit=function(event,data){var _package;if(!this.isPackage)return this.isPackaged?(_package=data["package"],this.element.hasClass(_package.id)?this.trigger("package:template-selected",this):void 0):this.trigger("package:template-available",this)},_Class.prototype._packageRemove=function(event,packageId){return this.element.hasClass(packageId)?this.remove():void 0},_Class.prototype._toggleChildren=function(event){return $(event.target).is("a")?void 0:(event.stop(),this.children.toggle())},_Class}(Templates.List.Field)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.List.Field["email-templates"]=function(_super){function _Class(){return this._updateTitle=__bind(this._updateTitle,this),_ref=_Class.__super__.constructor.apply(this,arguments)}return __extends(_Class,_super),_Class.prototype.observeElements=function(){return _Class.__super__.observeElements.call(this),this.on("email-template-updated:"+this.element.attr("id"),this._updateTitle)},_Class.prototype._updateTitle=function(event,text){return this.titleElement.text(text)},_Class}(Templates.List.Field)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.List.Toolbar=function(_super){function Toolbar(){return this._keyup=__bind(this._keyup,this),this._changeSections=__bind(this._changeSections,this),_ref=Toolbar.__super__.constructor.apply(this,arguments)}return __extends(Toolbar,_super),Toolbar.prototype.initialize=function(element,groups){return this.element=element,this.groups=groups,this.assignElements(),this.observeElements(),this._determineInitialState()},Toolbar.prototype.assignElements=function(){return this.triggers=this.element.find(".t-tabs a"),this.input=this.element.find(".search-field")},Toolbar.prototype.observeElements=function(){var _this=this;return this.triggers.on("click",this._changeSections),this.input.on("keyup",this._keyup),this.on("search:disable",function(){return _this.input.disable()}),this.on("search:enable",function(){return _this.input.enable()})},Toolbar.prototype._changeSections=function(event){var g,group,trigger,_i,_len,_ref1;for(event.stop(),this._reset(),trigger=$(event.target),this.scope=trigger.data("id"),this.triggers.removeClass("is-active"),trigger.addClass("is-active"),_ref1=this.groups,_i=0,_len=_ref1.length;_len>_i;_i++)g=_ref1[_i],group=$(g),g.id===this.scope?group.show():group.hide();return window.location.hash=this.scope.replace("-templates","")},Toolbar.prototype._determineInitialState=function(){var id,trigger;return id=""+window.location.hash.replace(/^#/,"")+"-templates",trigger=this.triggers.filter("[data-id="+id+"]").first(),trigger.exists()||(trigger=this.triggers.first()),this._changeSections({stop:function(){},target:trigger})},Toolbar.prototype._keyup=function(){var query;return query=this.input.val().toLowerCase(),query!==this.lastQuery&&(query.blank()?this.trigger("search:"+this.scope+":cleared"):this.trigger("search:"+this.scope+":changed",query)),this.lastQuery=query},Toolbar.prototype._reset=function(){return this.lastQuery="",this.input.val(this.lastQuery),this.trigger("search:"+this.scope+":cleared")},Toolbar}(GCObject)}.call(this),function(){Templates.Package={}}.call(this),function(){Templates.Package.Editor={}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Package.Editor.Base=function(_super){function Base(){return this._save=__bind(this._save,this),this._reset=__bind(this._reset,this),this._addToSelected=__bind(this._addToSelected,this),this._addToAvailable=__bind(this._addToAvailable,this),_ref=Base.__super__.constructor.apply(this,arguments)}return __extends(Base,_super),Base.prototype.initialize=function(){return this.assignElements(),this.observeElements()},Base.prototype.assignElements=function(){return this.element=this._element(),this.title=this.element.find(".overlay-header h1"),this.titleInput=this.element.find("input:text"),this.lists={available:this.element.find("#available-templates .fields"),selected:this.element.find("#selected-templates .fields")},this.lists.all=this.lists.available.add(this.lists.selected),this.triggers={save:this.element.find(".actions a.action-button"),cancel:this.element.find(".actions a.cancel-button")},this.form=this.triggers.save.closest("form"),this._reset()},Base.prototype.observeElements=function(){var _this=this;return this.on("package:template-selected",this._addToSelected),this.on("package:template-available",this._addToAvailable),this.triggers.cancel.on("click",function(){return _this.overlay.hide()}),this.triggers.save.on("click",function(e){return e.stop(),_this.form.submit()}),this.form.on("submit",this._save)},Base.prototype._addTemplateTo=function(list,template){var availableLi,element,id,selectedLi;return element=template.element.clone(),id=element.data("id"),element.find(".actions").remove(),element.identify().show().removeClass("packaged"),selectedLi=this.lists.selected.find('.template-object[data-id="'+id+'"]'),availableLi=this.lists.available.find('.template-object[data-id="'+id+'"]'),"available"===list&&selectedLi.exists()?void 0:("selected"===list&&availableLi.exists()&&availableLi.remove(),this.lists[list].append(element))},Base.prototype._addToAvailable=function(event,template){return this._addTemplateTo("available",template)},Base.prototype._addToSelected=function(event,template){return this._addTemplateTo("selected",template)},Base.prototype._createSortables=function(){var sort,_this=this;return sort=function(list){return _this.lists[list].sortable({dropOnEmpty:!0,revert:!0,containment:_this.lists.available.closest(".column-wrapper")})
},sort("available"),sort("selected"),this.lists.available.sortable("option","connectWith",this.lists.selected),this.lists.selected.sortable("option","connectWith",this.lists.available)},Base.prototype._element=function(){},Base.prototype._parameters=function(){return defaultParams({"package":{title:this.titleInput.val(),templates:this.lists.selected.find(".template-object").toArray().map(function(e){return $(e).data("id")})}})},Base.prototype._reset=function(){return this.lists.available.html(""),this.lists.selected.html(""),this["package"]=null,this.url=null},Base.prototype._save=function(event){return event.stop(),$.ajax({url:this.url,type:this.method,data:this._parameters(),message:"Saving"}).done(this._success)},Base}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Package.Editor.Create=function(_super){function Create(){return this._success=__bind(this._success,this),_ref=Create.__super__.constructor.apply(this,arguments)}return __extends(Create,_super),Create.prototype.initialize=function(overlay,templateContainer){return this.overlay=overlay,this.templateContainer=templateContainer,Create.__super__.initialize.call(this),this._initiateEditing()},Create.prototype._element=function(){return this.overlay.frame[0].contentWindow.$("body")},Create.prototype._initiateEditing=function(){var e,field,klass,_i,_len,_ref1;for(klass=Templates.List.Field["document-templates"],_ref1=this.templateContainer.find(".template-object"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],field=new klass($(e)),field.trigger("package:template-available",field);return this.url=this.element.find("form").attr("action"),this.method="post",this._createSortables()},Create.prototype._success=function(html){return top.Observations.trigger("document-package:created",html),this.overlay.hide(),top.Message.create().flash("Package created")},Create}(Templates.Package.Editor.Base)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Templates.Package.Editor.Update=function(_super){function Update(){return this._success=__bind(this._success,this),this._initiateEditing=__bind(this._initiateEditing,this),_ref=Update.__super__.constructor.apply(this,arguments)}return __extends(Update,_super),Update.prototype.initialize=function(overlayId){return this.overlay=new Overlay(overlayId,{onHide:this._reset}),Update.__super__.initialize.call(this)},Update.prototype._element=function(){return this.overlay.wrapper},Update.prototype._initiateEditing=function(event,data){var title;return this["package"]=data["package"],this.url=data.url,this.method="put",title=this["package"].titleElement.text(),this.title.text("Edit "+title),this.titleInput.val(title),this.overlay.show(),this._createSortables()},Update.prototype.observeElements=function(){return this.on("package:edit",this._initiateEditing),Update.__super__.observeElements.call(this)},Update.prototype._success=function(html){return this["package"].replace(html),this.overlay.hide(),Message.create().flash("Package updated")},Update}(Templates.Package.Editor.Base)}.call(this),function(){var Tooltip,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Tooltip=function(){function Tooltip(){this._hide=__bind(this._hide,this),this._show=__bind(this._show,this),this._clear=__bind(this._clear,this),this.build(),$(document).on("mouseover","[data-tooltip]",this._show),$(document).on("mouseout","[data-tooltip]",this._hide),$(document).on("scroll",this._hide),setInterval(this._clear,500)}return Tooltip.prototype.build=function(){return this.tooltip=$("<div>").addClass("global-tooltip").hide(),this.tooltip.append($("<div>").addClass("tooltip-pointer")),this.tooltipText=$("<div>").addClass("tooltip-text"),this.tooltip.append(this.tooltipText),$("body").append(this.tooltip)},Tooltip.prototype._clear=function(){return this.current&&!$.contains(document,this.current[0])?(this.current=null,this._hide()):void 0},Tooltip.prototype._show=function(event){var offset,target;return this.current=$(event.currentTarget),target=$(event.currentTarget),offset=target.offset(),this.tooltipText.html(target.data("tooltip")),offset.top+=target.height()+3,offset.left-=(this.tooltip.outerWidth()-target.width())/2,this.tooltip.css(offset),this.tooltip.show()},Tooltip.prototype._hide=function(){return this.tooltip.hide()},Tooltip}(),new Tooltip}.call(this),function(){this.Upgrade={observeForm:function(){var message;return message=Message.create(),$("form").on("submit",function(){return message.display("Loading")})}}}.call(this),function(){var _ref,_ref1,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Upgrade.FirstStep=function(_super){function FirstStep(){return this._selectPlan=__bind(this._selectPlan,this),this._selectALaCarte=__bind(this._selectALaCarte,this),_ref=FirstStep.__super__.constructor.apply(this,arguments)}return __extends(FirstStep,_super),FirstStep.prototype.initialize=function(){return this.assignElements(),this.observeElements(),this.plans.any()?this.plans[0].select():this.aLaCarte.check(!0)},FirstStep.prototype.assignElements=function(){var e,_i,_len,_ref1;for(this.plans=[],_ref1=$(".plan"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],this.plans.push(new Upgrade.FirstStep.Plan($(e)));return this.aLaCarte=$("#a_la_carte"),this.aLaCarteContainer=this.aLaCarte.closest(".a-la-carte-option"),this.newLevel=$("#new_level"),this.newFrequency=$("#new_frequency")},FirstStep.prototype.observeElements=function(){return this.on("plan:selected",this._selectPlan),this.aLaCarte.on("click",this._selectALaCarte),Upgrade.observeForm()},FirstStep.prototype._selectALaCarte=function(){return this.aLaCarte.is(":checked")?(this.trigger("plans:deselect",this),this.aLaCarteContainer.addClass("selected"),this.newLevel.val(""),this.newFrequency.val("")):this.plans[0].select()},FirstStep.prototype._selectPlan=function(event,plan){return this.aLaCarte&&this.aLaCarte.check(!1),this.newLevel.val(plan.level),this.newFrequency.val(plan.frequency()),this.aLaCarteContainer.removeClass("selected")},FirstStep}(GCObject),Upgrade.FirstStep.Plan=function(_super){function Plan(){return this._select=__bind(this._select,this),this._deselect=__bind(this._deselect,this),_ref1=Plan.__super__.constructor.apply(this,arguments)}return __extends(Plan,_super),Plan.prototype.initialize=function(element){return this.element=element,this.assignElements(),this.observeElements()},Plan.prototype.assignElements=function(){return this.selectElement=this.element.find(".plan-name select"),this.level=this.element.data("level"),this._frequency=this.element.data("frequency")},Plan.prototype.frequency=function(){return this._frequency?this._frequency:this.selectElement.val()},Plan.prototype.observeElements=function(){return this.element.on("click",this._select),this.selectElement.on("change",this._select),this.on("plans:deselect",this._deselect)},Plan.prototype.select=function(){return this._select()},Plan.prototype._deselect=function(event,plan){return plan!==this?this.element.removeClass("selected"):void 0},Plan.prototype._select=function(){return this.element.addClass("selected"),this.trigger("plans:deselect",this),this.trigger("plan:selected",this)},Plan}(GCObject)}.call(this),function(){$(document).on("click","a.upgrade-prompt[data-original-url]",function(event){var anchor;if("application"===layout)return anchor=$(event.target),anchor.is("a")||(anchor=anchor.closest("a")),top.originalUrlFromUpgrade=anchor.data("original-url")})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Upgrade.SecondStep=function(){function SecondStep(){this._changePayment=__bind(this._changePayment,this),this.info=$(".payment-info"),this.fields=$(".payment-fields"),$("#change-payment").on("click",this._changePayment),Upgrade.observeForm()}return SecondStep.prototype._changePayment=function(event){return event.stop(),this.info.toggle(),this.fields.toggle(),top.overlay.refreshHeight()},SecondStep}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Upgrade.ThirdStep=function(){function ThirdStep(){this._reload=__bind(this._reload,this),this._openInModal=__bind(this._openInModal,this),this._notify=__bind(this._notify,this),this._loadOriginalUrl=__bind(this._loadOriginalUrl,this),this._gotoAction=__bind(this._gotoAction,this),$("a.go-to-action").on("click",this._gotoAction),$("a.load-orignal-url").on("click",this._loadOriginalUrl),$("a.reload").on("click",this._reload),$("a.notify").on("click",this._notify),$("a.open-modal").on("click",this._openInModal)}return ThirdStep.prototype._closeOverlay=function(){return top.overlay&&top.overlay.hide(),top.modal?top.modal.close():void 0},ThirdStep.prototype._gotoAction=function(event){return event.stop(),this._closeOverlay(),top.pjax.loadUrl($(event.target).attr("href"))},ThirdStep.prototype._loadOriginalUrl=function(event){return event.stop(),this._closeOverlay(),top.pjax.loadUrl(top.originalUrlFromUpgrade)},ThirdStep.prototype._notify=function(event){return event.stop(),this._closeOverlay(),top.Observations.trigger("upgrade:complete")},ThirdStep.prototype._openInModal=function(event){return event.stop(),this._closeOverlay(),top.modal.open($(event.target).attr("href"))},ThirdStep.prototype._reload=function(event){return event.stop(),this._closeOverlay(),top.pjax.reload()},ThirdStep}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.Uploadify={instance:null,configure:function(options){return this.instance=new Uploadify.HTML5,this.instance.configure(options)},initialize:function(options){return this.trigger=options.trigger,delete options.trigger,this.instance._initialize(null,options)}},Uploadify.Base=function(_super){function Base(){return this.onSelect=__bind(this.onSelect,this),this.onQueueComplete=__bind(this.onQueueComplete,this),this.onInit=__bind(this.onInit,this),this.onUploadComplete=__bind(this.onUploadComplete,this),this.onFallback=__bind(this.onFallback,this),this.onDestroy=__bind(this.onDestroy,this),this.onClearQueue=__bind(this.onClearQueue,this),this.onCancel=__bind(this.onCancel,this),this._initialize=__bind(this._initialize,this),this._done=__bind(this._done,this),this._cancel=__bind(this._cancel,this),this.hideDropMessage=__bind(this.hideDropMessage,this),_ref=Base.__super__.constructor.apply(this,arguments)}return __extends(Base,_super),Base.prototype.initialize=function(){return this.trigger=null,this.uploadCount=0,this.message=Message.create(),this.initializeHandlers()},Base.prototype.cancel=function(){throw"not implemented!"},Base.prototype.configure=function(options){var key,option,_results;_results=[];for(key in options)option=options[key],"function"==typeof option?_results.push(this.handlers[key]=option):_results.push(this[key]=option);return _results},Base.prototype.hideDropMessage=function(){return this.hasQueuedItems()?void 0:(this._e("queueContainerElement").hide(),this._e("dropMessageElement").hide())},Base.prototype.hasQueuedItems=function(){return""!==this._e("queueElement").html()},Base.prototype.hideUploadQueue=function(){var afterHide,_this=this;return afterHide=function(){return _this._e("queueContainerElement").hide(),_this.reloadOnHide!==!1?top.pjax.reload():void 0},this._e("queueContainerElement").find("div.error").exists()?setTimeout(afterHide,3500):afterHide()},Base.prototype.initializeOptions=function(){},Base.prototype.processConfiguration=function(){return this._e("cancelTrigger").on("click",this._cancel),this._e("doneTrigger").on("click",this._done)},Base.prototype.showDropMessage=function(){return this._e("queueContainerElement").show(),this.hasQueuedItems()?void 0:(this._e("dropMessageElement").show(),this._e("queueElement").hide(),this._e("actionElement").hide())},Base.prototype.showUploadQueue=function(){return this._e("queueContainerElement").show(),this._e("queueElement").show(),this._e("actionElement").show(),this._e("dropMessageElement").hide()},Base.prototype.updateStatus=function(){var message;return this.statusElement?(message=""+this.uploadCount+" Files Uploaded",1===this.uploadCount&&(message=""+this.uploadCount+" File Uploaded"),this.statusElement.text(message)):void 0},Base.prototype._cancel=function(event){return event.stop(),this.cancel(),this.handlers.onQueueComplete()},Base.prototype._done=function(event){return this._cancel(event),this.handlers.onDone?this.handlers.onDone():void 0},Base.prototype._e=function(name){return this[name]||$()},Base.prototype._initialize=function(event,options){var _this=this;return this.trigger=Uploadify.trigger,$.extend(options,this.handlers),this.initializeOptions(options),this.uploadify(options),setTimeout(function(){return _this.dragDrop?new Uploadify.Dragging:void 0},1e3)},Base.prototype.initializeHandlers=function(){return this.handlers={onCancel:this.onCancel,onClearQueue:this.onClearQueue,onDestroy:this.onDestroy,onFallback:this.onFallback,onUploadComplete:this.onUploadComplete,onInit:this.onInit,onQueueComplete:this.onQueueComplete,onSelect:this.onSelect}},Base.prototype.onCancel=function(){},Base.prototype.onClearQueue=function(){},Base.prototype.onDestroy=function(){},Base.prototype.onFallback=function(){},Base.prototype.onUploadComplete=function(){},Base.prototype.onInit=function(){return this.processConfiguration()},Base.prototype.onQueueComplete=function(){var _this=this;return setTimeout(function(){return _this._e("actionElement").addClass("before-selection").removeClass("after-selection"),setTimeout(function(){return _this._e("emptyElement").show()},3500),_this.hideUploadQueue()},0)},Base.prototype.onSelect=function(){return this._e("actionElement").removeClass("before-selection").addClass("after-selection"),this._e("emptyElement").hide(),this.showUploadQueue()},Base.prototype.changeUploadCount=function(n){return this.uploadCount+=n,this.updateStatus()},Base}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Uploadify.Dragging=function(_super){function Dragging(){return this.onFileDrop=__bind(this.onFileDrop,this),this.onDragEnd=__bind(this.onDragEnd,this),this.onDragStart=__bind(this.onDragStart,this),_ref=Dragging.__super__.constructor.apply(this,arguments)}return __extends(Dragging,_super),Dragging.prototype.initialize=function(){return this.instance=Uploadify.instance,this.registerElements(),this.registerObservers()},Dragging.prototype.registerElements=function(){return this.queueContainerElement=this.instance.queueContainerElement,this.queueElement=this.instance.queueElement,this.dropMessageElement=this.instance.dropMessageElement,this.actionElement=this.instance.actionElement},Dragging.prototype.registerObservers=function(){var _this=this;return this.on("uploadify:html5-unavailable",function(){return _this.initialize()}),this.on("dragenter",this.onDragStart),this.queueContainerElement.on("dragenter",this.onDragStart),this.queueContainerElement.on("drop",this.onFileDrop),this.queueContainerElement.on("dragleave",this.onDragEnd)},Dragging.prototype.onDragStart=function(){return Modernizr.draganddrop&&window.FileReader?(clearTimeout(this.dragTimeout),this.instance.showDropMessage()):void 0},Dragging.prototype.onDragEnd=function(){return this.queueContainerElement.is(event.target)?Modernizr.draganddrop&&window.FileReader?(clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(this.instance.hideDropMessage,800)):void 0:void 0},Dragging.prototype.onFileDrop=function(){return clearTimeout(this.dragTimeout)},Dragging}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Uploadify.Flash=function(_super){function Flash(){return this.onUploadProgress=__bind(this.onUploadProgress,this),this.onUploadSuccess=__bind(this.onUploadSuccess,this),this.onUploadStart=__bind(this.onUploadStart,this),this.onUploadError=__bind(this.onUploadError,this),this.onSWFReady=__bind(this.onSWFReady,this),this.onSelectError=__bind(this.onSelectError,this),this.onEnable=__bind(this.onEnable,this),this.onDisable=__bind(this.onDisable,this),this.onDialogOpen=__bind(this.onDialogOpen,this),this.onDialogClose=__bind(this.onDialogClose,this),_ref=Flash.__super__.constructor.apply(this,arguments)}return __extends(Flash,_super),Flash.prototype.cancel=function(){return this.trigger.uploadify("cancel","*")},Flash.prototype.initializeOptions=function(options){return options.uploader=options.url,options.swf="/assets/desktop/uploadify.js.extensions/uploadify.swf"},Flash.prototype.uploadify=function(options){return this.trigger.uploadify(options)},Flash.prototype.initializeHandlers=function(){return Flash.__super__.initializeHandlers.call(this),$.extend(this.handlers,{onDialogClose:this.onDialogClose,onDialogOpen:this.onDialogOpen,onDisable:this.onDisable,onEnable:this.onEnable,onSelectError:this.onSelectError,onSWFReady:this.onSWFReady,onUploadError:this.onUploadError,onUploadSuccess:this.onUploadSuccess,onUploadProgress:this.onUploadProgress,onUploadStart:this.onUploadStart})},Flash.prototype.onDialogClose=function(){},Flash.prototype.onDialogOpen=function(){},Flash.prototype.onDisable=function(){},Flash.prototype.onEnable=function(){},Flash.prototype.onSelectError=function(){},Flash.prototype.onSWFReady=function(){},Flash.prototype.onUploadError=function(){},Flash.prototype.onUploadStart=function(){},Flash.prototype.onUploadSuccess=function(){return this.changeUploadCount(1)},Flash.prototype.onUploadProgress=function(file,bytesUploaded,bytesTotal){var element,percent;return percent=Math.ceil(bytesUploaded/bytesTotal*100),element=$("#"+file.id),element.exists()?element.find(".uploadify-progress-bar").css({width:""+percent+"%"}):void 0},Flash}(Uploadify.Base)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Uploadify.HTML5=function(_super){function HTML5(){return this.removeFile=__bind(this.removeFile,this),this.onUploadComplete=__bind(this.onUploadComplete,this),this.onFallback=__bind(this.onFallback,this),this.onError=__bind(this.onError,this),this.onDrop=__bind(this.onDrop,this),this.onUploadFile=__bind(this.onUploadFile,this),this.onUpload=__bind(this.onUpload,this),this.onProgress=__bind(this.onProgress,this),this.onCheck=__bind(this.onCheck,this),this.onAddQueueItem=__bind(this.onAddQueueItem,this),_ref=HTML5.__super__.constructor.apply(this,arguments)}return __extends(HTML5,_super),HTML5.prototype.cancel=function(){return this.trigger.uploadifive("clearQueue")},HTML5.prototype.initializeOptions=function(options){return options.uploadScript=options.url},HTML5.prototype.uploadify=function(options){return this.trigger.uploadifive(options)},HTML5.prototype.initializeHandlers=function(){return HTML5.__super__.initializeHandlers.call(this),$.extend(this.handlers,{onAddQueueItem:this.onAddQueueItem,onCheck:this.onCheck,onDrop:this.onDrop,onError:this.onError,onProgress:this.onProgress,onUpload:this.onUpload,onUploadFile:this.onUploadFile})},HTML5.prototype.onAddQueueItem=function(){},HTML5.prototype.onCheck=function(){},HTML5.prototype.onProgress=function(){},HTML5.prototype.onUpload=function(){},HTML5.prototype.onUploadFile=function(){},HTML5.prototype.onDrop=function(){return this.onSelect()},HTML5.prototype.onError=function(error,file){return this.removeFile(file)},HTML5.prototype.onFallback=function(){return Uploadify.instance=new Uploadify.Flash,this._trigger("uploadify:html5-unavailable")},HTML5.prototype.onUploadComplete=function(file){return HTML5.__super__.onUploadComplete.call(this,file),this.changeUploadCount(1),this.removeFile(file)},HTML5.prototype.removeFile=function(file){return setTimeout(function(){var element;return element=file.queueItem.exists()?file.queueItem.first():file.id,$(element).fadeOut(500,function(){return $(this).remove()})},3e3)},HTML5}(Uploadify.Base)}.call(this),function($){var methods={init:function(options){return this.each(function(){var $this=$(this);$this.data("uploadifive",{inputs:{},inputCount:0,fileID:0,queue:{count:0,selected:0,replaced:0,errors:0,queued:0,cancelled:0},uploads:{current:0,attempts:0,successful:0,errors:0,count:0}});var $data=$this.data("uploadifive"),settings=$data.settings=$.extend({auto:!0,buttonClass:!1,buttonText:"Select Files",checkScript:!1,dnd:!0,dropTarget:!1,fileObjName:"Filedata",fileSizeLimit:0,fileType:!1,formData:{},height:30,itemTemplate:!1,method:"post",multi:!0,overrideEvents:[],queueID:!1,queueSizeLimit:0,removeCompleted:!1,simUploadLimit:0,truncateLength:0,uploadLimit:0,uploadScript:"uploadifive.php",width:100},options);if(isNaN(settings.fileSizeLimit)){var fileSizeLimitBytes=1.024*parseInt(settings.fileSizeLimit);settings.fileSizeLimit.indexOf("KB")>-1?settings.fileSizeLimit=1e3*fileSizeLimitBytes:settings.fileSizeLimit.indexOf("MB")>-1?settings.fileSizeLimit=1e6*fileSizeLimitBytes:settings.fileSizeLimit.indexOf("GB")>-1&&(settings.fileSizeLimit=1e9*fileSizeLimitBytes)}else settings.fileSizeLimit=1024*settings.fileSizeLimit;if($data.inputTemplate=$('<input type="file">').css({"font-size":settings.height+"px",opacity:0,position:"absolute",right:"-3px",top:"-3px","z-index":999}),$data.createInput=function(){var input=$data.inputTemplate.clone(),inputName=input.name="input"+$data.inputCount++;settings.multi&&input.attr("multiple",!0),settings.fileType&&input.attr("accept",settings.fileType),input.bind("change",function(){$data.queue.selected=0,$data.queue.replaced=0,$data.queue.errors=0,$data.queue.queued=0;var limit=this.files.length;if($data.queue.selected=limit,$data.queue.count+limit>settings.queueSizeLimit&&0!==settings.queueSizeLimit)$.inArray("onError",settings.overrideEvents)<0&&alert("The maximum number of queue items has been reached ("+settings.queueSizeLimit+").  Please select fewer files."),"function"==typeof settings.onError&&settings.onError.call($this,"QUEUE_LIMIT_EXCEEDED");else{for(var n=0;limit>n;n++)file=this.files[n],$data.addQueueItem(file);$data.inputs[inputName]=this,$data.createInput()}settings.auto&&methods.upload.call($this),"function"==typeof settings.onSelect&&settings.onSelect.call($this,$data.queue)}),$data.currentInput&&$data.currentInput.hide(),$data.button.append(input),$data.currentInput=input},$data.destroyInput=function(key){$($data.inputs[key]).remove(),delete $data.inputs[key],$data.inputCount--},$data.drop=function(e){$data.queue.selected=0,$data.queue.replaced=0,$data.queue.errors=0,$data.queue.queued=0;var fileData=e.dataTransfer,inputName=fileData.name="input"+$data.inputCount++,limit=fileData.files.length;if($data.queue.selected=limit,$data.queue.count+limit>settings.queueSizeLimit&&0!==settings.queueSizeLimit)$.inArray("onError",settings.overrideEvents)<0&&alert("The maximum number of queue items has been reached ("+settings.queueSizeLimit+").  Please select fewer files."),"function"==typeof settings.onError&&settings.onError.call($this,"QUEUE_LIMIT_EXCEEDED");else{for(var n=0;limit>n;n++)file=fileData.files[n],$data.addQueueItem(file);$data.inputs[inputName]=fileData}settings.auto&&methods.upload.call($this),"function"==typeof settings.onDrop&&settings.onDrop.call($this,fileData.files,fileData.files.length),e.preventDefault(),e.stopPropagation()},$data.fileExistsInQueue=function(file){for(var key in $data.inputs){input=$data.inputs[key],limit=input.files.length;for(var n=0;limit>n;n++)if(existingFile=input.files[n],existingFile.name==file.name&&!existingFile.complete)return!0}return!1},$data.removeExistingFile=function(file){for(var key in $data.inputs){input=$data.inputs[key],limit=input.files.length;for(var n=0;limit>n;n++)existingFile=input.files[n],existingFile.name!=file.name||existingFile.complete||($data.queue.replaced++,methods.cancel.call($this,existingFile,!0))}},$data.queueItem=0==settings.itemTemplate?$('<div class="uploadifive-queue-item">                        <a class="close" href="#">X</a>                        <div><span class="filename"></span><span class="fileinfo"></span></div>                        <div class="progress">                            <div class="progress-bar"></div>                        </div>                    </div>'):$(settings.itemTemplate),$data.addQueueItem=function(file){if($.inArray("onAddQueueItem",settings.overrideEvents)<0){$data.removeExistingFile(file),file.queueItem=$data.queueItem.clone(),file.queueItem.attr("id",settings.id+"-file-"+$data.fileID++),file.queueItem.find(".close").bind("click",function(){return methods.cancel.call($this,file),!1});var fileName=file.name;fileName.length>settings.truncateLength&&0!=settings.truncateLength&&(fileName=fileName.substring(0,settings.truncateLength)+"..."),file.queueItem.find(".filename").html(fileName),file.queueItem.data("file",file),$data.queueEl.append(file.queueItem)}"function"==typeof settings.onAddQueueItem&&settings.onAddQueueItem.call($this,file),file.size>settings.fileSizeLimit&&0!=settings.fileSizeLimit?$data.error("FILE_SIZE_LIMIT_EXCEEDED",file):($data.queue.queued++,$data.queue.count++)},$data.removeQueueItem=function(file,instant,delay){delay||(delay=0);var fadeTime=instant?0:500;file.queueItem&&(" - Completed"!=file.queueItem.find(".fileinfo").html()&&file.queueItem.find(".fileinfo").html(" - Cancelled"),file.queueItem.find(".progress-bar").width(0),file.queueItem.delay(delay).fadeOut(fadeTime,function(){$(this).remove()}),delete file.queueItem,$data.queue.count--)},$data.filesToUpload=function(){var filesToUpload=0;for(var key in $data.inputs){input=$data.inputs[key],limit=input.files.length;for(var n=0;limit>n;n++)file=input.files[n],file.skip||file.complete||filesToUpload++}return filesToUpload},$data.checkExists=function(file){if($.inArray("onCheck",settings.overrideEvents)<0){$.ajaxSetup({async:!1});var checkData=$.extend(settings.formData,{filename:file.name});if($.post(settings.checkScript,checkData,function(fileExists){file.exists=parseInt(fileExists)}),file.exists&&!confirm("A file named "+file.name+" already exists in the upload folder.\nWould you like to replace it?"))return methods.cancel.call($this,file),!0}return"function"==typeof settings.onCheck&&settings.onCheck.call($this,file,file.exists),!1},$data.uploadFile=function(file,uploadAll){if(!file.skip&&!file.complete&&!file.uploading)if(file.uploading=!0,$data.uploads.current++,$data.uploads.attempted++,xhr=file.xhr=new XMLHttpRequest,"function"==typeof FormData||"object"==typeof FormData){var formData=new FormData;formData.append(settings.fileObjName,file);for(i in settings.formData)formData.append(i,settings.formData[i]);xhr.open(settings.method,settings.uploadScript,!0),xhr.upload.addEventListener("progress",function(e){e.lengthComputable&&$data.progress(e,file)},!1),xhr.addEventListener("load",function(e){4==this.readyState&&(file.uploading=!1,200==this.status?"Invalid file type."!==file.xhr.responseText?$data.uploadComplete(e,file,uploadAll):$data.error(file.xhr.responseText,file,uploadAll):404==this.status?$data.error("404_FILE_NOT_FOUND",file,uploadAll):403==this.status?$data.error("403_FORBIDDEN",file,uploadAll):$data.error("Unknown Error",file,uploadAll))}),xhr.send(formData)}else{var reader=new FileReader;reader.onload=function(e){var boundary="-------------------------"+(new Date).getTime(),dashes="--",eol="\r\n",binFile="";binFile+=dashes+boundary+eol,binFile+='Content-Disposition: form-data; name="'+settings.fileObjName+'"',file.name&&(binFile+='; filename="'+file.name+'"'),binFile+=eol,binFile+="Content-Type: application/octet-stream"+eol+eol,binFile+=e.target.result+eol;for(key in settings.formData)binFile+=dashes+boundary+eol,binFile+='Content-Disposition: form-data; name="'+key+'"'+eol+eol,binFile+=settings.formData[key]+eol;binFile+=dashes+boundary+dashes+eol,xhr.upload.addEventListener("progress",function(e){$data.progress(e,file)},!1),xhr.addEventListener("load",function(e){file.uploading=!1;var status=this.status;404==status?$data.error("404_FILE_NOT_FOUND",file,uploadAll):"Invalid file type."!=file.xhr.responseText?$data.uploadComplete(e,file,uploadAll):$data.error(file.xhr.responseText,file,uploadAll)},!1);var url=settings.uploadScript;if("get"==settings.method){var params=$(settings.formData).param();url+=params}xhr.open(settings.method,settings.uploadScript,!0),xhr.setRequestHeader("Content-Type","multipart/form-data; boundary="+boundary),"function"==typeof settings.onUploadFile&&settings.onUploadFile.call($this,file),xhr.sendAsBinary(binFile)},reader.readAsBinaryString(file)}},$data.progress=function(e,file){if($.inArray("onProgress",settings.overrideEvents)<0){if(e.lengthComputable)var percent=Math.round(e.loaded/e.total*100);file.queueItem.find(".fileinfo").html(" - "+percent+"%"),file.queueItem.find(".progress-bar").css("width",percent+"%")}"function"==typeof settings.onProgress&&settings.onProgress.call($this,file,e)},$data.error=function(errorType,file,uploadAll){if($.inArray("onError",settings.overrideEvents)<0){switch(errorType){case"404_FILE_NOT_FOUND":errorMsg="404 Error";break;case"403_FORBIDDEN":errorMsg="403 Forbidden";break;case"FORBIDDEN_FILE_TYPE":errorMsg="Forbidden File Type";break;case"FILE_SIZE_LIMIT_EXCEEDED":errorMsg="File Too Large";break;default:errorMsg="Unknown Error"}file.queueItem.addClass("error").find(".fileinfo").html(" - "+errorMsg),file.queueItem.find(".progress").remove()}"function"==typeof settings.onError&&settings.onError.call($this,errorType,file),file.skip=!0,"404_FILE_NOT_FOUND"==errorType?$data.uploads.errors++:$data.queue.errors++,uploadAll&&methods.upload.call($this,null,!0)},$data.uploadComplete=function(e,file,uploadAll){$.inArray("onUploadComplete",settings.overrideEvents)<0&&(file.queueItem.find(".progress-bar").css("width","100%"),file.queueItem.find(".fileinfo").html(" - Completed"),file.queueItem.find(".progress").slideUp(250),file.queueItem.addClass("complete")),"function"==typeof settings.onUploadComplete&&settings.onUploadComplete.call($this,file,file.xhr.responseText),settings.removeCompleted&&setTimeout(function(){methods.cancel.call($this,file)},3e3),file.complete=!0,$data.uploads.successful++,$data.uploads.count++,$data.uploads.current--,delete file.xhr,uploadAll&&methods.upload.call($this,null,!0)},$data.queueComplete=function(){"function"==typeof settings.onQueueComplete&&settings.onQueueComplete.call($this,$data.uploads)},!(window.File&&window.FileList&&window.Blob&&(window.FileReader||window.FormData)))return"function"==typeof settings.onFallback&&settings.onFallback.call($this),!1;if(settings.id="uploadifive-"+$this.attr("id"),$data.button=$('<div id="'+settings.id+'" class="uploadifive-button">'+settings.buttonText+"</div>"),settings.buttonClass&&$data.button.addClass(settings.buttonClass),$data.button.css({height:settings.height,"line-height":settings.height+"px",overflow:"hidden",position:"relative","text-align":"center",width:settings.width}),$this.before($data.button).appendTo($data.button).hide(),$data.createInput.call($this),settings.queueID?$data.queueEl=$("#"+settings.queueID):(settings.queueID=settings.id+"-queue",$data.queueEl=$('<div id="'+settings.queueID+'" class="uploadifive-queue" />'),$data.button.after($data.queueEl)),settings.dnd){var $dropTarget=settings.dropTarget?$(settings.dropTarget)[0]:$data.queueEl.get(0);
$dropTarget.addEventListener("dragleave",function(e){e.preventDefault(),e.stopPropagation()},!1),$dropTarget.addEventListener("dragenter",function(e){e.preventDefault(),e.stopPropagation()},!1),$dropTarget.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation()},!1),$dropTarget.addEventListener("drop",$data.drop,!1)}XMLHttpRequest.prototype.sendAsBinary||(XMLHttpRequest.prototype.sendAsBinary=function(datastr){function byteValue(x){return 255&x.charCodeAt(0)}var ords=Array.prototype.map.call(datastr,byteValue),ui8a=new Uint8Array(ords);this.send(ui8a.buffer)}),"function"==typeof settings.onInit&&settings.onInit.call($this)})},debug:function(){return this.each(function(){console.log($(this).data("uploadifive"))})},clearQueue:function(){this.each(function(){var $this=$(this),$data=$this.data("uploadifive"),settings=$data.settings;for(var key in $data.inputs)for(input=$data.inputs[key],limit=input.files.length,i=0;limit>i;i++)file=input.files[i],methods.cancel.call($this,file);"function"==typeof settings.onClearQueue&&settings.onClearQueue.call($this,$("#"+$data.settings.queueID))})},cancel:function(file,fast){this.each(function(){var $this=$(this),$data=$this.data("uploadifive"),settings=$data.settings;"string"==typeof file&&(isNaN(file)||(fileID="uploadifive-"+$(this).attr("id")+"-file-"+file),file=$("#"+fileID).data("file")),file.skip=!0,$data.filesCancelled++,file.uploading&&($data.uploads.current--,file.uploading=!1,file.xhr.abort(),delete file.xhr,methods.upload.call($this)),$.inArray("onCancel",settings.overrideEvents)<0&&$data.removeQueueItem(file,fast),"function"==typeof settings.onCancel&&settings.onCancel.call($this,file)})},upload:function(file,keepVars){this.each(function(){var $this=$(this),$data=$this.data("uploadifive"),settings=$data.settings;if(file)$data.uploadFile.call($this,file);else if($data.uploads.count+$data.uploads.current<settings.uploadLimit||0==settings.uploadLimit){if(!keepVars){$data.uploads.attempted=0,$data.uploads.successsful=0,$data.uploads.errors=0;var filesToUpload=$data.filesToUpload();"function"==typeof settings.onUpload&&settings.onUpload.call($this,filesToUpload)}$("#"+settings.queueID).find(".uploadifive-queue-item").not(".error, .complete").each(function(){return _file=$(this).data("file"),$data.uploads.current>=settings.simUploadLimit&&0!==settings.simUploadLimit||$data.uploads.current>=settings.uploadLimit&&0!==settings.uploadLimit||$data.uploads.count>=settings.uploadLimit&&0!==settings.uploadLimit?!1:(settings.checkScript?(_file.checking=!0,skipFile=$data.checkExists(_file),_file.checking=!1,skipFile||$data.uploadFile(_file,!0)):$data.uploadFile(_file,!0),void 0)}),0==$("#"+settings.queueID).find(".uploadifive-queue-item").not(".error, .complete").size()&&$data.queueComplete()}else 0==$data.uploads.current&&($.inArray("onError",settings.overrideEvents)<0&&$data.filesToUpload()>0&&0!=settings.uploadLimit&&alert("The maximum upload limit has been reached."),"function"==typeof settings.onError&&settings.onError.call($this,"UPLOAD_LIMIT_EXCEEDED",$data.filesToUpload()))})},destroy:function(){this.each(function(){var $this=$(this),$data=$this.data("uploadifive"),settings=$data.settings;methods.clearQueue.call($this),settings.queueID||$("#"+settings.queueID).remove(),$this.siblings("input").remove(),$this.show().insertBefore($data.button),$data.button.remove(),"function"==typeof settings.onDestroy&&settings.onDestroy.call($this)})}};$.fn.uploadifive=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?($.error("The method "+method+" does not exist in $.uploadify"),void 0):methods.init.apply(this,arguments)}}(jQuery);var swfobject=function(){function f(){if(!J){try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=!0;for(var X=U.length,Y=0;X>Y;Y++)U[Y]()}}function K(X){J?X():U[U.length]=X}function s(Y){if(typeof O.addEventListener!=D)O.addEventListener("load",Y,!1);else if(typeof j.addEventListener!=D)j.addEventListener("load",Y,!1);else if(typeof O.attachEvent!=D)i(O,"onload",Y);else if("function"==typeof O.onload){var X=O.onload;O.onload=function(){X(),Y()}}else O.onload=Y}function h(){T?V():H()}function V(){var X=j.getElementsByTagName("body")[0],aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;!function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");ab&&(ab=ab.split(" ")[1].split(","),M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)])}else if(10>Y)return Y++,setTimeout(arguments.callee,10),void 0;X.removeChild(aa),Z=null,H()}()}else H()}function H(){var ag=o.length;if(ag>0)for(var af=0;ag>af;af++){var Y=o[af].id,ab=o[af].callbackFn,aa={success:!1,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae)if(!F(o[af].swfVersion)||M.wk&&M.wk<312)if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall,ai.width=ae.getAttribute("width")||"0",ai.height=ae.getAttribute("height")||"0",ae.getAttribute("class")&&(ai.styleclass=ae.getAttribute("class")),ae.getAttribute("align")&&(ai.align=ae.getAttribute("align"));for(var ah={},X=ae.getElementsByTagName("param"),ac=X.length,ad=0;ac>ad;ad++)"movie"!=X[ad].getAttribute("name").toLowerCase()&&(ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value"));P(ai,ah,Y,ab)}else p(ae),ab&&ab(aa);else w(Y,!0),ab&&(aa.success=!0,aa.ref=z(Y),ab(aa))}else if(w(Y,!0),ab){var Z=z(Y);Z&&typeof Z.SetVariable!=D&&(aa.success=!0,aa.ref=Z),ab(aa)}}}function z(aa){var X=null,Y=c(aa);if(Y&&"OBJECT"==Y.nodeName)if(typeof Y.SetVariable!=D)X=Y;else{var Z=Y.getElementsByTagName(r)[0];Z&&(X=Z)}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=!0,E=Z||null,B={success:!1,id:X};var ae=c(X);if(ae){"OBJECT"==ae.nodeName?(l=g(ae),Q=null):(l=ae,Q=X),aa.id=R,(typeof aa.width==D||!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)&&(aa.width="310"),(typeof aa.height==D||!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)&&(aa.height="137"),j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D?ab.flashvars+="&"+ac:ab.flashvars=ac,M.ie&&M.win&&4!=ae.readyState){var Y=C("div");X+="SWFObjectNew",Y.setAttribute("id",X),ae.parentNode.insertBefore(Y,ae),ae.style.display="none",function(){4==ae.readyState?ae.parentNode.removeChild(ae):setTimeout(arguments.callee,10)}()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&4!=Y.readyState){var X=C("div");Y.parentNode.insertBefore(X,Y),X.parentNode.replaceChild(g(Y),X),Y.style.display="none",function(){4==Y.readyState?Y.parentNode.removeChild(Y):setTimeout(arguments.callee,10)}()}else Y.parentNode.replaceChild(g(Y),Y)}function g(ab){var aa=C("div");if(M.win&&M.ie)aa.innerHTML=ab.innerHTML;else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad)for(var X=ad.length,Z=0;X>Z;Z++)1==ad[Z].nodeType&&"PARAM"==ad[Z].nodeName||8==ad[Z].nodeType||aa.appendChild(ad[Z].cloneNode(!0))}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312)return X;if(aa)if(typeof ai.id==D&&(ai.id=Y),M.ie&&M.win){var ah="";for(var ae in ai)ai[ae]!=Object.prototype[ae]&&("data"==ae.toLowerCase()?ag.movie=ai[ae]:"styleclass"==ae.toLowerCase()?ah+=' class="'+ai[ae]+'"':"classid"!=ae.toLowerCase()&&(ah+=" "+ae+'="'+ai[ae]+'"'));var af="";for(var ad in ag)ag[ad]!=Object.prototype[ad]&&(af+='<param name="'+ad+'" value="'+ag[ad]+'" />');aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>",N[N.length]=ai.id,X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai)ai[ac]!=Object.prototype[ac]&&("styleclass"==ac.toLowerCase()?Z.setAttribute("class",ai[ac]):"classid"!=ac.toLowerCase()&&Z.setAttribute(ac,ai[ac]));for(var ab in ag)ag[ab]!=Object.prototype[ab]&&"movie"!=ab.toLowerCase()&&e(Z,ab,ag[ab]);aa.parentNode.replaceChild(Z,aa),X=Z}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X),aa.setAttribute("value",Y),Z.appendChild(aa)}function y(Y){var X=c(Y);X&&"OBJECT"==X.nodeName&&(M.ie&&M.win?(X.style.display="none",function(){4==X.readyState?b(Y):setTimeout(arguments.callee,10)}()):X.parentNode.removeChild(X))}function b(Z){var Y=c(Z);if(Y){for(var X in Y)"function"==typeof Y[X]&&(Y[X]=null);Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y),I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");return X[0]=parseInt(X[0],10),X[1]=parseInt(X[1],10)||0,X[2]=parseInt(X[2],10)||0,Y[0]>X[0]||Y[0]==X[0]&&Y[1]>X[1]||Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]?!0:!1}function v(ac,Y,ad,ab){if(!M.ie||!M.mac){var aa=j.getElementsByTagName("head")[0];if(aa){var X=ad&&"string"==typeof ad?ad:"screen";if(ab&&(n=null,G=null),!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css"),Z.setAttribute("media",X),n=aa.appendChild(Z),M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0&&(n=j.styleSheets[j.styleSheets.length-1]),G=X}M.ie&&M.win?n&&typeof n.addRule==r&&n.addRule(ac,Y):n&&typeof j.createTextNode!=D&&n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(m){var Y=X?"visible":"hidden";J&&c(Z)?c(Z).style.visibility=Y:v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/,X=null!=Z.exec(Y);return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}{var l,Q,E,B,n,G,D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=!1,U=[h],o=[],N=[],I=[],J=!1,a=!1,m=!0,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,X=!1,ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r)ab=t.plugins[S].description,!ab||typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin||(T=!0,X=!1,ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10),ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10),ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof O.ActiveXObject!=D)try{var ad=new ActiveXObject(W);ad&&(ab=ad.GetVariable("$version"),ab&&(X=!0,ab=ab.split(" ")[1].split(","),ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]))}catch(Z){}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}();!function(){M.w3&&((typeof j.readyState!=D&&"complete"==j.readyState||typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))&&f(),J||(typeof j.addEventListener!=D&&j.addEventListener("DOMContentLoaded",f,!1),M.ie&&M.win&&(j.attachEvent(x,function(){"complete"==j.readyState&&(j.detachEvent(x,arguments.callee),f())}),O==top&&!function(){if(!J){try{j.documentElement.doScroll("left")}catch(X){return setTimeout(arguments.callee,0),void 0}f()}}()),M.wk&&!function(){return J?void 0:/loaded|complete/.test(j.readyState)?(f(),void 0):(setTimeout(arguments.callee,0),void 0)}(),s(f)))}(),function(){M.ie&&M.win&&window.attachEvent("onunload",function(){for(var ac=I.length,ab=0;ac>ab;ab++)I[ab][0].detachEvent(I[ab][1],I[ab][2]);for(var Z=N.length,aa=0;Z>aa;aa++)y(N[aa]);for(var Y in M)M[Y]=null;M=null;for(var X in swfobject)swfobject[X]=null;swfobject=null})}()}return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab,Y.swfVersion=X,Y.expressInstall=aa,Y.callbackFn=Z,o[o.length]=Y,w(ab,!1)}else Z&&Z({success:!1,id:ab})},getObjectById:function(X){return M.w3?z(X):void 0},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:!1,id:ah};M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y?(w(ah,!1),K(function(){ae+="",ag+="";var aj={};if(af&&typeof af===r)for(var al in af)aj[al]=af[al];aj.data=ab,aj.width=ae,aj.height=ag;var am={};if(ad&&typeof ad===r)for(var ak in ad)am[ak]=ad[ak];if(Z&&typeof Z===r)for(var ai in Z)typeof am.flashvars!=D?am.flashvars+="&"+ai+"="+Z[ai]:am.flashvars=ai+"="+Z[ai];if(F(Y)){var an=u(aj,am,ah);aj.id==ah&&w(ah,!0),X.success=!0,X.ref=an}else{if(aa&&A())return aj.data=aa,P(aj,am,ah,ac),void 0;w(ah,!0)}ac&&ac(X)})):ac&&ac(X)},switchOffAutoHideShow:function(){m=!1},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){return M.w3?u(Z,Y,X):void 0},showExpressInstall:function(Z,aa,X,Y){M.w3&&A()&&P(Z,aa,X,Y)},removeSWF:function(X){M.w3&&y(X)},createCSS:function(aa,Z,Y,X){M.w3&&v(aa,Z,Y,X)},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)&&(Z=Z.split("?")[1]),null==aa)return L(Z);for(var Y=Z.split("&"),X=0;X<Y.length;X++)if(Y[X].substring(0,Y[X].indexOf("="))==aa)return L(Y[X].substring(Y[X].indexOf("=")+1))}return""},expressInstallCallback:function(){if(a){var X=c(R);X&&l&&(X.parentNode.replaceChild(l,X),Q&&(w(Q,!0),M.ie&&M.win&&(l.style.display="block")),E&&E(B)),a=!1}}}}(),SWFUpload;if(void 0==SWFUpload&&(SWFUpload=function(a){this.initSWFUpload(a)}),SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={},this.settings=b,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(a){throw delete SWFUpload.instances[this.movieName],a}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(a){if("string"!=typeof a||a.match(/^https?:\/\//i)||a.match(/^\//))return a;var b=(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),window.location.pathname.lastIndexOf("/"));return path=0>=b?"/":window.location.pathname.substr(0,b)+"/",path+a},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(b,a){this.settings[b]=void 0==this.settings[b]?a:this.settings[b]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var a,b;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if(a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==a)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;b=document.createElement("div"),b.innerHTML=this.getFlashHTML(),a.parentNode.replaceChild(b.firstChild,a),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var b=this.buildParamString(),a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){if(void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var c=this.settings.post_params,b=[];if("object"==typeof c)for(var a in c)c.hasOwnProperty(a)&&b.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(c[a].toString()));return b.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var a=null;if(a=this.getMovieElement(),a&&"unknown"==typeof a.CallFunction){for(var c in a)try{"function"==typeof a[c]&&(a[c]=null)}catch(e){}try{a.parentNode.removeChild(a)}catch(b){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(d){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",("function"==typeof this.settings.swfupload_loaded_handler).toString(),"\n","	","file_dialog_start_handler assigned: ",("function"==typeof this.settings.file_dialog_start_handler).toString(),"\n","	","file_queued_handler assigned:       ",("function"==typeof this.settings.file_queued_handler).toString(),"\n","	","file_queue_error_handler assigned:  ",("function"==typeof this.settings.file_queue_error_handler).toString(),"\n","	","upload_start_handler assigned:      ",("function"==typeof this.settings.upload_start_handler).toString(),"\n","	","upload_progress_handler assigned:   ",("function"==typeof this.settings.upload_progress_handler).toString(),"\n","	","upload_error_handler assigned:      ",("function"==typeof this.settings.upload_error_handler).toString(),"\n","	","upload_success_handler assigned:    ",("function"==typeof this.settings.upload_success_handler).toString(),"\n","	","upload_complete_handler assigned:   ",("function"==typeof this.settings.upload_complete_handler).toString(),"\n","	","debug_handler assigned:             ",("function"==typeof this.settings.debug_handler).toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(b,c,a){return this.settings[b]=void 0==c?a:c},SWFUpload.prototype.getSetting=function(a){return void 0!=this.settings[a]?this.settings[a]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return void 0!=returnValue&&"object"==typeof returnValue.post&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])},SWFUpload.prototype.cancelUpload=function(a,b){b!==!1&&(b=!0),this.callFlash("CancelUpload",[a,b])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])},SWFUpload.prototype.getFile=function(a){return"number"==typeof a?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",[a])},SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])},SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])},SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString(),this.callFlash("SetUploadURL",[a])},SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a,this.callFlash("SetPostParams",[a])},SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a,this.settings.file_types_description=b,this.callFlash("SetFileTypes",[a,b])},SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a,this.callFlash("SetFileSizeLimit",[a])},SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a,this.callFlash("SetFileUploadLimit",[a])},SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a,this.callFlash("SetFileQueueLimit",[a])},SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a,this.callFlash("SetFilePostName",[a])},SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a,this.callFlash("SetUseQueryString",[a])},SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a,this.callFlash("SetRequeueOnError",[a])},SWFUpload.prototype.setHTTPSuccess=function(a){"string"==typeof a&&(a=a.replace(" ","").split(",")),this.settings.http_success=a,this.callFlash("SetHTTPSuccess",[a])},SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a,this.callFlash("SetAssumeSuccessTimeout",[a])},SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a,this.callFlash("SetDebugEnabled",[a])},SWFUpload.prototype.setButtonImageURL=function(a){void 0==a&&(a=""),this.settings.button_image_url=a,this.callFlash("SetButtonImageURL",[a])},SWFUpload.prototype.setButtonDimensions=function(c,a){this.settings.button_width=c,this.settings.button_height=a;var b=this.getMovieElement();void 0!=b&&(b.style.width=c+"px",b.style.height=a+"px"),this.callFlash("SetButtonDimensions",[c,a])},SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a,this.callFlash("SetButtonText",[a])},SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a,this.settings.button_text_left_padding=b,this.callFlash("SetButtonTextPadding",[b,a])},SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a,this.callFlash("SetButtonTextStyle",[a])},SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a,this.callFlash("SetButtonDisabled",[a])},SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a,this.callFlash("SetButtonAction",[a])},SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a,this.callFlash("SetButtonCursor",[a])},SWFUpload.prototype.queueEvent=function(b,c){void 0==c?c=[]:c instanceof Array||(c=[c]);var a=this;if("function"==typeof this.settings[b])this.eventQueue.push(function(){this.settings[b].apply(this,c)}),setTimeout(function(){a.executeNextEvent()},0);else if(null!==this.settings[b])throw"Event handler "+b+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;"function"==typeof a&&a.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(c){var d,e=/[$]([0-9a-f]{4})/i,f={};if(void 0!=c){for(var a in c.post)if(c.post.hasOwnProperty(a)){d=a;for(var b;null!==(b=e.exec(d));)d=d.replace(b[0],String.fromCharCode(parseInt("0x"+b[1],16)));f[d]=c.post[a]}c.post=f}return c},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return!1}},SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();return a?(this.cleanUp(a),this.queueEvent("swfupload_loaded_handler"),void 0):(this.debug("Flash called back ready but the flash movie can't be found."),void 0)},SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&"unknown"==typeof a.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var c in a)try{"function"==typeof a[c]&&(a[c]=null)}catch(b){}}}catch(d){}window.__flash__removeCallback=function(e,f){try{e&&(e[f]=null)}catch(g){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("file_queued_handler",a)},SWFUpload.prototype.fileQueueError=function(a,c,b){a=this.unescapeFilePostParams(a),this.queueEvent("file_queue_error_handler",[a,c,b])},SWFUpload.prototype.fileDialogComplete=function(b,c,a){this.queueEvent("file_dialog_complete_handler",[b,c,a])},SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("return_upload_start_handler",a)},SWFUpload.prototype.returnUploadStart=function(a){var b;if("function"==typeof this.settings.upload_start_handler)a=this.unescapeFilePostParams(a),b=this.settings.upload_start_handler.call(this,a);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===b&&(b=!0),b=!!b,this.callFlash("ReturnUploadStart",[b])},SWFUpload.prototype.uploadProgress=function(a,c,b){a=this.unescapeFilePostParams(a),this.queueEvent("upload_progress_handler",[a,c,b])},SWFUpload.prototype.uploadError=function(a,c,b){a=this.unescapeFilePostParams(a),this.queueEvent("upload_error_handler",[a,c,b])},SWFUpload.prototype.uploadSuccess=function(b,a,c){b=this.unescapeFilePostParams(b),this.queueEvent("upload_success_handler",[b,a,c])},SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("upload_complete_handler",a)},SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)},SWFUpload.prototype.debugMessage=function(c){if(this.settings.debug){var a,d=[];if("object"==typeof c&&"string"==typeof c.name&&"string"==typeof c.message){for(var b in c)c.hasOwnProperty(b)&&d.push(b+": "+c[b]);a=d.join("\n")||"",d=a.split("\n"),a="EXCEPTION: "+d.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(a)}else SWFUpload.Console.writeLine(c)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(d){var b,a;try{b=document.getElementById("SWFUpload_Console"),b||(a=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(a),b=document.createElement("textarea"),b.id="SWFUpload_Console",b.style.fontFamily="monospace",b.setAttribute("wrap","off"),b.wrap="off",b.style.overflow="auto",b.style.width="700px",b.style.height="350px",b.style.margin="5px",a.appendChild(b)),b.value+=d+"\n",b.scrollTop=b.scrollHeight-b.clientHeight
}catch(c){alert("Exception: "+c.name+" Message: "+c.message)}},/*
Uploadify v3.1.1
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
Released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
function($){var methods={init:function(options,swfUploadOptions){return this.each(function(){var $this=$(this),$clone=$this.clone(),settings=$.extend({id:$this.attr("id"),swf:"uploadify.swf",uploader:"uploadify.php",auto:!0,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:!1,debug:!1,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",height:30,method:"post",multi:!0,formData:{},preventCaching:!0,progressData:"percentage",queueID:!1,queueSizeLimit:999,removeCompleted:!0,removeTimeout:3,requeueErrors:!1,successTimeout:30,uploadLimit:0,width:120,overrideEvents:[]},options),swfUploadSettings={assume_success_timeout:settings.successTimeout,button_placeholder_id:settings.id,button_width:settings.width,button_height:settings.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:settings.multi?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disabled:!1,button_cursor:"arrow"==settings.buttonCursor?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:settings.debug,requeue_on_error:settings.requeueErrors,file_post_name:settings.fileObjName,file_size_limit:settings.fileSizeLimit,file_types:settings.fileTypeExts,file_types_description:settings.fileTypeDesc,file_queue_limit:settings.queueSizeLimit,file_upload_limit:settings.uploadLimit,flash_url:settings.swf,prevent_swf_caching:settings.preventCaching,post_params:settings.formData,upload_url:settings.uploader,use_query_string:"get"==settings.method,file_dialog_complete_handler:handlers.onDialogClose,file_dialog_start_handler:handlers.onDialogOpen,file_queued_handler:handlers.onSelect,file_queue_error_handler:handlers.onSelectError,swfupload_loaded_handler:settings.onSWFReady,upload_complete_handler:handlers.onUploadComplete,upload_error_handler:handlers.onUploadError,upload_progress_handler:handlers.onUploadProgress,upload_start_handler:handlers.onUploadStart,upload_success_handler:handlers.onUploadSuccess};swfUploadOptions&&(swfUploadSettings=$.extend(swfUploadSettings,swfUploadOptions)),swfUploadSettings=$.extend(swfUploadSettings,settings);var playerVersion=swfobject.getFlashPlayerVersion(),flashInstalled=playerVersion.major>=9;if(flashInstalled){window["uploadify_"+settings.id]=new SWFUpload(swfUploadSettings);var swfuploadify=window["uploadify_"+settings.id];$this.data("uploadify",swfuploadify);var $wrapper=$("<div />",{id:settings.id,"class":"uploadify",css:{height:settings.height+"px",width:settings.width+"px"}});$("#"+swfuploadify.movieName).wrap($wrapper),$wrapper=$("#"+settings.id),$wrapper.data("uploadify",swfuploadify);var $button=$("<div />",{id:settings.id+"-button","class":"uploadify-button "+settings.buttonClass});if(settings.buttonImage&&$button.css({"background-image":"url('"+settings.buttonImage+"')","text-indent":"-9999px"}),$button.html('<span class="uploadify-button-text">'+settings.buttonText+"</span>").css({height:settings.height+"px","line-height":settings.height+"px",width:settings.width+"px"}),$wrapper.append($button),$("#"+swfuploadify.movieName).css({position:"absolute","z-index":1}),!settings.queueID){var $queue=$("<div />",{id:settings.id+"-queue","class":"uploadify-queue"});$wrapper.after($queue),swfuploadify.settings.queueID=settings.id+"-queue",swfuploadify.settings.defaultQueue=!0}swfuploadify.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:"Some files were not added to the queue:"},swfuploadify.original=$clone,swfuploadify.wrapper=$wrapper,swfuploadify.button=$button,swfuploadify.queue=$queue,settings.onInit&&settings.onInit.call($this,swfuploadify)}else settings.onFallback&&settings.onFallback.call($this)})},cancel:function(){var args=arguments;this.each(function(){var $this=$(this),swfuploadify=$this.data("uploadify"),settings=swfuploadify.settings,delay=-1;if(args[0])if("*"==args[0]){var queueItemCount=swfuploadify.queueData.queueLength;$("#"+settings.queueID).find(".uploadify-queue-item").each(function(){delay++,args[1]===!0?swfuploadify.cancelUpload($(this).attr("id"),!1):swfuploadify.cancelUpload($(this).attr("id")),$(this).find(".data").removeClass("data").html(" - Cancelled"),$(this).find(".uploadify-progress-bar").remove(),$(this).delay(1e3+100*delay).fadeOut(500,function(){$(this).remove()})}),swfuploadify.queueData.queueSize=0,swfuploadify.queueData.queueLength=0,settings.onClearQueue&&settings.onClearQueue.call($this,queueItemCount)}else for(var n=0;n<args.length;n++)swfuploadify.cancelUpload(args[n]),$("#"+args[n]).find(".data").removeClass("data").html(" - Cancelled"),$("#"+args[n]).find(".uploadify-progress-bar").remove(),$("#"+args[n]).delay(1e3+100*n).fadeOut(500,function(){$(this).remove()});else{var item=$("#"+settings.queueID).find(".uploadify-queue-item").get(0);$item=$(item),swfuploadify.cancelUpload($item.attr("id")),$item.find(".data").removeClass("data").html(" - Cancelled"),$item.find(".uploadify-progress-bar").remove(),$item.delay(1e3).fadeOut(500,function(){$(this).remove()})}})},destroy:function(){this.each(function(){var $this=$(this),swfuploadify=$this.data("uploadify"),settings=swfuploadify.settings;swfuploadify.destroy(),settings.defaultQueue&&$("#"+settings.queueID).remove(),$("#"+settings.id).replaceWith(swfuploadify.original),settings.onDestroy&&settings.onDestroy.call(this),delete swfuploadify})},disable:function(isDisabled){this.each(function(){var $this=$(this),swfuploadify=$this.data("uploadify"),settings=swfuploadify.settings;isDisabled?(swfuploadify.button.addClass("disabled"),settings.onDisable&&settings.onDisable.call(this)):(swfuploadify.button.removeClass("disabled"),settings.onEnable&&settings.onEnable.call(this)),swfuploadify.setButtonDisabled(isDisabled)})},settings:function(name,value,resetObjects){var args=arguments,returnValue=value;return this.each(function(){var $this=$(this),swfuploadify=$this.data("uploadify"),settings=swfuploadify.settings;if("object"==typeof args[0])for(var n in value)setData(n,value[n]);if(1===args.length)returnValue=settings[name];else{switch(name){case"uploader":swfuploadify.setUploadURL(value);break;case"formData":resetObjects||(value=$.extend(settings.formData,value)),swfuploadify.setPostParams(settings.formData);break;case"method":"get"==value?swfuploadify.setUseQueryString(!0):swfuploadify.setUseQueryString(!1);break;case"fileObjName":swfuploadify.setFilePostName(value);break;case"fileTypeExts":swfuploadify.setFileTypes(value,settings.fileTypeDesc);break;case"fileTypeDesc":swfuploadify.setFileTypes(settings.fileTypeExts,value);break;case"fileSizeLimit":swfuploadify.setFileSizeLimit(value);break;case"uploadLimit":swfuploadify.setFileUploadLimit(value);break;case"queueSizeLimit":swfuploadify.setFileQueueLimit(value);break;case"buttonImage":swfuploadify.button.css("background-image",settingValue);break;case"buttonCursor":"arrow"==value?swfuploadify.setButtonCursor(SWFUpload.CURSOR.ARROW):swfuploadify.setButtonCursor(SWFUpload.CURSOR.HAND);break;case"buttonText":$("#"+settings.id+"-button").find(".uploadify-button-text").html(value);break;case"width":swfuploadify.setButtonDimensions(value,settings.height);break;case"height":swfuploadify.setButtonDimensions(settings.width,value);break;case"multi":value?swfuploadify.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES):swfuploadify.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILE)}settings[name]=value}}),1===args.length?returnValue:void 0},stop:function(){this.each(function(){var $this=$(this),swfuploadify=$this.data("uploadify");swfuploadify.queueData.averageSpeed=0,swfuploadify.queueData.uploadSize=0,swfuploadify.queueData.bytesUploaded=0,swfuploadify.queueData.uploadQueue=[],swfuploadify.stopUpload()})},upload:function(){var args=arguments;this.each(function(){var $this=$(this),swfuploadify=$this.data("uploadify");if(swfuploadify.queueData.averageSpeed=0,swfuploadify.queueData.uploadSize=0,swfuploadify.queueData.bytesUploaded=0,swfuploadify.queueData.uploadQueue=[],args[0])if("*"==args[0])swfuploadify.queueData.uploadSize=swfuploadify.queueData.queueSize,swfuploadify.queueData.uploadQueue.push("*"),swfuploadify.startUpload();else{for(var n=0;n<args.length;n++)swfuploadify.queueData.uploadSize+=swfuploadify.queueData.files[args[n]].size,swfuploadify.queueData.uploadQueue.push(args[n]);swfuploadify.startUpload(swfuploadify.queueData.uploadQueue.shift())}else swfuploadify.startUpload()})}},handlers={onDialogOpen:function(){var settings=this.settings;this.queueData.errorMsg="Some files were not added to the queue:",this.queueData.filesReplaced=0,this.queueData.filesCancelled=0,settings.onDialogOpen&&settings.onDialogOpen.call(this)},onDialogClose:function(filesSelected,filesQueued,queueLength){var settings=this.settings;this.queueData.filesErrored=filesSelected-filesQueued,this.queueData.filesSelected=filesSelected,this.queueData.filesQueued=filesQueued-this.queueData.filesCancelled,this.queueData.queueLength=queueLength,$.inArray("onDialogClose",settings.overrideEvents)<0&&this.queueData.filesErrored>0,settings.onDialogClose&&settings.onDialogClose.call(this,this.queueData),settings.auto&&$("#"+settings.id).uploadify("upload","*")},onSelect:function(file){var settings=this.settings,queuedFile={};for(var n in this.queueData.files)if(queuedFile=this.queueData.files[n],1!=queuedFile.uploaded&&queuedFile.name==file.name){var replaceQueueItem=confirm('The file named "'+file.name+'" is already in the queue.\nDo you want to replace the existing item in the queue?');if(!replaceQueueItem)return this.cancelUpload(file.id),this.queueData.filesCancelled++,!1;$("#"+queuedFile.id).remove(),this.cancelUpload(queuedFile.id),this.queueData.filesReplaced++}var fileSize=Math.round(file.size/1024),suffix="KB";fileSize>1e3&&(fileSize=Math.round(fileSize/1e3),suffix="MB");var fileSizeParts=fileSize.toString().split(".");fileSize=fileSizeParts[0],fileSizeParts.length>1&&(fileSize+="."+fileSizeParts[1].substr(0,2)),fileSize+=suffix;var fileName=file.name;fileName.length>25&&(fileName=fileName.substr(0,25)+"..."),$.inArray("onSelect",settings.overrideEvents)<0&&$("#"+settings.queueID).append('<div id="'+file.id+'" class="uploadify-queue-item">					<div class="cancel">						<a href="javascript:jQuery(\'#'+settings.id+"').uploadify('cancel', '"+file.id+'\')">X</a>					</div>					<span class="fileName">'+fileName+" ("+fileSize+')</span><span class="data"></span>					<div class="uploadify-progress">						<div class="uploadify-progress-bar"><!--Progress Bar--></div>					</div>				</div>'),this.queueData.queueSize+=file.size,this.queueData.files[file.id]=file,settings.onSelect&&settings.onSelect.apply(this,arguments)},onSelectError:function(file,errorCode,errorMsg){var settings=this.settings;if($.inArray("onSelectError",settings.overrideEvents)<0)switch(errorCode){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:this.queueData.errorMsg+=settings.queueSizeLimit>errorMsg?"\nThe number of files selected exceeds the remaining upload limit ("+errorMsg+").":"\nThe number of files selected exceeds the queue size limit ("+settings.queueSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+file.name+'" exceeds the size limit ('+settings.fileSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:this.queueData.errorMsg+='\nThe file "'+file.name+'" is empty.';break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+file.name+'" is not an accepted file type ('+settings.fileTypeDesc+")."}errorCode!=SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED&&delete this.queueData.files[file.id],settings.onSelectError&&settings.onSelectError.apply(this,arguments)},onQueueComplete:function(){this.settings.onQueueComplete&&this.settings.onQueueComplete.call(this,this.settings.queueData)},onUploadComplete:function(file){var settings=this.settings,swfuploadify=this,stats=this.getStats();if(this.queueData.queueLength=stats.files_queued,"*"==this.queueData.uploadQueue[0]?this.queueData.queueLength>0?this.startUpload():(this.queueData.uploadQueue=[],settings.onQueueComplete&&settings.onQueueComplete.call(this,this.queueData)):this.queueData.uploadQueue.length>0?this.startUpload(this.queueData.uploadQueue.shift()):(this.queueData.uploadQueue=[],settings.onQueueComplete&&settings.onQueueComplete.call(this,this.queueData)),$.inArray("onUploadComplete",settings.overrideEvents)<0)if(settings.removeCompleted)switch(file.filestatus){case SWFUpload.FILE_STATUS.COMPLETE:setTimeout(function(){$("#"+file.id)&&(swfuploadify.queueData.queueSize-=file.size,swfuploadify.queueData.queueLength-=1,delete swfuploadify.queueData.files[file.id],$("#"+file.id).fadeOut(500,function(){$(this).remove()}))},1e3*settings.removeTimeout);break;case SWFUpload.FILE_STATUS.ERROR:settings.requeueErrors||setTimeout(function(){$("#"+file.id)&&(swfuploadify.queueData.queueSize-=file.size,swfuploadify.queueData.queueLength-=1,delete swfuploadify.queueData.files[file.id],$("#"+file.id).fadeOut(500,function(){$(this).remove()}))},1e3*settings.removeTimeout)}else file.uploaded=!0;settings.onUploadComplete&&settings.onUploadComplete.call(this,file)},onUploadError:function(file,errorCode,errorMsg){var settings=this.settings,errorString="Error";switch(errorCode){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:errorString="HTTP Error ("+errorMsg+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:errorString="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:errorString="IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:errorString="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+errorMsg+")."),errorString="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:errorString="Failed";break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:errorString="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:errorString="Cancelled",this.queueData.queueSize-=file.size,this.queueData.queueLength-=1,(file.status==SWFUpload.FILE_STATUS.IN_PROGRESS||$.inArray(file.id,this.queueData.uploadQueue)>=0)&&(this.queueData.uploadSize-=file.size),settings.onCancel&&settings.onCancel.call(this,file),delete this.queueData.files[file.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:errorString="Stopped"}$.inArray("onUploadError",settings.overrideEvents)<0&&(errorCode!=SWFUpload.UPLOAD_ERROR.FILE_CANCELLED&&errorCode!=SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED&&$("#"+file.id).addClass("uploadify-error"),$("#"+file.id).find(".uploadify-progress-bar").css("width","1px"),errorCode!=SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND&&file.status!=SWFUpload.FILE_STATUS.COMPLETE&&$("#"+file.id).find(".data").html(" - "+errorString));var stats=this.getStats();this.queueData.uploadsErrored=stats.upload_errors,settings.onUploadError&&settings.onUploadError.call(this,file,errorCode,errorMsg,errorString)},onUploadProgress:function(file,fileBytesLoaded,fileTotalBytes){var settings=this.settings,timer=new Date,newTime=timer.getTime(),lapsedTime=newTime-this.timer;lapsedTime>500&&(this.timer=newTime);var lapsedBytes=fileBytesLoaded-this.bytesLoaded;this.bytesLoaded=fileBytesLoaded;var queueBytesLoaded=this.queueData.queueBytesUploaded+fileBytesLoaded,percentage=Math.round(fileBytesLoaded/fileTotalBytes*100),suffix="KB/s",mbs=0,kbs=lapsedBytes/1024/(lapsedTime/1e3);kbs=Math.floor(10*kbs)/10,this.queueData.averageSpeed=this.queueData.averageSpeed>0?Math.floor((this.queueData.averageSpeed+kbs)/2):Math.floor(kbs),kbs>1e3&&(mbs=.001*kbs,this.queueData.averageSpeed=Math.floor(mbs),suffix="MB/s"),$.inArray("onUploadProgress",settings.overrideEvents)<0&&("percentage"==settings.progressData?$("#"+file.id).find(".data").html(" - "+percentage+"%"):"speed"==settings.progressData&&lapsedTime>500&&$("#"+file.id).find(".data").html(" - "+this.queueData.averageSpeed+suffix),$("#"+file.id).find(".uploadify-progress-bar").css("width",percentage+"%")),settings.onUploadProgress&&settings.onUploadProgress.call(this,file,fileBytesLoaded,fileTotalBytes,queueBytesLoaded,this.queueData.uploadSize)},onUploadStart:function(file){var settings=this.settings,timer=new Date;this.timer=timer.getTime(),this.bytesLoaded=0,0==this.queueData.uploadQueue.length&&(this.queueData.uploadSize=file.size),settings.checkExisting&&$.ajax({type:"POST",async:!1,url:settings.checkExisting,data:{filename:file.name},success:function(data){if(1==data){var overwrite=confirm('A file with the name "'+file.name+'" already exists on the server.\nWould you like to replace the existing file?');overwrite||(this.cancelUpload(file.id),$("#"+file.id).remove(),this.queueData.uploadQueue.length>0&&this.queueData.queueLength>0&&("*"==this.queueData.uploadQueue[0]?this.startUpload():this.startUpload(this.queueData.uploadQueue.shift())))}}}),settings.onUploadStart&&settings.onUploadStart.call(this,file)},onUploadSuccess:function(file,data,response){var settings=this.settings,stats=this.getStats();this.queueData.uploadsSuccessful=stats.successful_uploads,this.queueData.queueBytesUploaded+=file.size,$.inArray("onUploadSuccess",settings.overrideEvents)<0&&$("#"+file.id).find(".data").html(" - Complete"),settings.onUploadSuccess&&settings.onUploadSuccess.call(this,file,data,response)}};$.fn.uploadify=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?($.error("The method "+method+" does not exist in $.uploadify"),void 0):methods.init.apply(this,arguments)}}(jQuery),function(){this.Webforms={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design=function(_super){function Design(formId,data,sections){this.data=data,this.sections=sections,this._submit=__bind(this._submit,this),this.form=$("#"+formId),this.assignElements(),this.assignHelpers(),this.observeElements(),this.trigger("webform:initialized")}return __extends(Design,_super),Design.prototype.assignElements=function(){return this.element=this.form.closest(".fs-webform"),this.canvas=this.element.closest(".webform-canvas"),this.saveForm=$("#design-form")},Design.prototype.assignHelpers=function(){var data,generalSection,klass,sections,_i,_len,_ref;for(this.toolbar=new Webforms.Design.Toolbar(this.canvas.find(".webform-toolbar")),generalSection=new Webforms.Design.Section.General(this.data,this),sections=[],_ref=this.sections,_i=0,_len=_ref.length;_len>_i;_i++)data=_ref[_i],klass=Webforms.Design.Section[data.name.camelCase().capitalize()],sections.push(new klass(data,this));return this.sections=[generalSection].concat(sections)},Design.prototype.observeElements=function(){return this.saveForm.on("submit",this._submit)},Design.prototype._submit=function(event){var section,_i,_len,_ref;for(event.stop(),_ref=this.sections,_i=0,_len=_ref.length;_len>_i;_i++)section=_ref[_i],section.addFormData(this.saveForm);return this.saveForm.off("submit",this._submit),this.saveForm.submit(),this.saveForm.on("submit",this._submit)},Design}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Facebook=function(_super){function Facebook(){return this._toggleVideoEmbed=__bind(this._toggleVideoEmbed,this),this._showPrevious=__bind(this._showPrevious,this),this._showNext=__bind(this._showNext,this),this._registerDesign=__bind(this._registerDesign,this),_ref=Facebook.__super__.constructor.apply(this,arguments)}return __extends(Facebook,_super),Facebook.register=function(number,html){var data;return html=html.replace(/&quot;/g,'"'),data={number:number,html:$.unescapeHtml(html)},Observations.trigger("design:registered",data)},Facebook.prototype.initialize=function(){return this.designs=[],this.currentDesign=null,this.assignElements(),this.observeElements()},Facebook.prototype.assignElements=function(){var selector;return selector=$("#select-design"),this.selector={previous:selector.find(".previous"),next:selector.find(".next")},this.numberField=$("#configuration_number"),this.videoToggle=$("a.embed_video")},Facebook.prototype.observeElements=function(){return this.selector.previous.on("click",this._showPrevious),this.selector.next.on("click",this._showNext),this.videoToggle.on("click",this._toggleVideoEmbed),this.on("design:registered",this._registerDesign)},Facebook.prototype._registerDesign=function(event,data){var design;return design=new Webforms.Design.Facebook.Design(data.number,data.html),this.designs.push(design),""+design.number===this.numberField.val()?this.currentDesign=design:void 0},Facebook.prototype._showCurrentDesign=function(){var design,_i,_len,_ref1;for(_ref1=this.designs,_i=0,_len=_ref1.length;_len>_i;_i++)design=_ref1[_i],design.hide();return this.currentDesign.show(),this.numberField.val(this.currentDesign.number)},Facebook.prototype._showNext=function(){var index;return index=this.designs.indexOf(this.currentDesign),index===this.designs.length-1?index=0:index++,this.currentDesign=this.designs[index],this._showCurrentDesign()},Facebook.prototype._showPrevious=function(){var index;return index=this.designs.indexOf(this.currentDesign),0===index?index=this.designs.length-1:index--,this.currentDesign=this.designs[index],this._showCurrentDesign()},Facebook.prototype._toggleVideoEmbed=function(event){return event.stop(),$("#"+this.videoToggle.data("toggle")).toggle()},Facebook}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Webforms.Design.Facebook.Design=function(){function Design(number,html){this.number=number,this.html=html,this._styleIframe=__bind(this._styleIframe,this),this.assignElements=__bind(this.assignElements,this),this.assignElements(),this.element.is(":hidden")||this._styleIframe(),$(this._styleIframe),pjax.on("success",this._styleIframe),setTimeout(this._styleIframe,1e3)}return Design.prototype.assignElements=function(){return this.element=$(".design-"+this.number),this.iframe=this.element.find("iframe"),this.iframe.contents().find("body").append(this.html),delete this.html},Design.prototype.hide=function(){return this.element.hide()},Design.prototype.show=function(){return this.element.show(),this._styleIframe(!0)},Design.prototype._heightOffset=function(){return 9===this.number?0:5},Design.prototype._styleIframe=function(avoidOffset){var body,element,offset,_this=this;if(this.element)return body=this.iframe.contents().find("body"),element=$(body.find("div")[1]),body.css({padding:0,margin:0}),element.css("height","auto"),offset=avoidOffset?0:700,setTimeout(function(){var height,width;return width=element.width(),height=body.height()+_this._heightOffset(),_this.iframe.css({width:""+width+"px",height:""+(height+15)+"px"}),setTimeout(function(){return _this.iframe.css({width:""+width+"px",height:""+height+"px"}),_this.shown=!0},100)},offset)},Design}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Section=function(_super){function Section(){return this._setText=__bind(this._setText,this),this._observeElements=__bind(this._observeElements,this),this._click=__bind(this._click,this),this._blur=__bind(this._blur,this),_ref=Section.__super__.constructor.apply(this,arguments)}return __extends(Section,_super),Section.prototype.initialize=function(data,owner){return this.owner=owner,this._position=data.position,delete data.position,$.extend(this,data),this.id||(this.id=$.now()),this.element=this.owner.element.find(this.selector),this.submissionAttributes=["name","background_color","color","font_family","position","visible","bold","italic","underline","text","font_size"],this.on("webform:initialized",this._observeElements),this.trigger("section:registered",this)},Section.prototype.addFormData=function(form){var attribute,name,value,_i,_len,_ref1,_results;for(_ref1=this.submissionAttributes,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)attribute=_ref1[_i],value=this[attribute],"position"===attribute&&(value=this._position),"boolean"==typeof value&&(value===!0&&(value=1),value===!1&&(value=0)),"text"===attribute&&(value=value?value:""),name="sections["+this.id+"]["+attribute+"]",form.find('input:hidden[name="'+name+'"]').remove(),_results.push(form.append($("<input>").attr({type:"hidden",value:value,name:name})));return _results},Section.prototype.applyStyles=function(){var element,elements,styles;return element=this.styledElement(),elements=$().add(element).add(this.styledElement().find("label")),styles={color:this.color,fontFamily:this.font_family,fontSize:""+this.font_size+"px",lineHeight:""+(parseInt(this.font_size,10)+6)+"px"},styles.fontWeight=this.bold?"bold":"normal",styles.fontStyle=this.italic?"italic":"normal",styles.textDecoration=this.underline?"underline":"none","inherit"===this.background_color?styles.background="inherit":this._addBackgroundColorStyle(elements),elements.css(styles),this.element.removeClass(this.positions().join(" ")),this.element.addClass(this._position)},Section.prototype.containers=function(){return[]},Section.prototype.hide=function(){return this.visible=!1,this.element.hide()},Section.prototype.observeElements=function(){return this.element.on("click",this._click),this._contentEditable()?this._enableContentEditing():void 0},Section.prototype.positions=function(){return["left","center","right"]},Section.prototype.position=function(value){return value?this._position=value:this._position},Section.prototype.show=function(){return this.visible=!0,this.element.show()},Section.prototype.styledElement=function(){return this.element},Section.prototype._addBackgroundColorStyle=function(elements){return elements.css({backgroundColor:this.background_color})},Section.prototype._addGradientBackgroundStyles=function(elements){var bottomGradientColor,topGradientColor;return elements.css({backgroundColor:this.background_color}),topGradientColor=this._background_color_hex(),bottomGradientColor=Colors.darken(topGradientColor,5),elements.css({background:"-webkit-gradient(linear, left top, left bottom, from(#"+topGradientColor+"), to(#"+bottomGradientColor+"))"}),elements.css({background:"-moz-linear-gradient(top, #"+topGradientColor+", #"+bottomGradientColor+")"})},Section.prototype._background_color_hex=function(){return this.background_color.replace("#","")},Section.prototype._blur=function(){var div,text;return div=this._contentEditableElement(),text=div.text().strip(),text.blank()&&div.text(this._sampleText()),text===this._sampleText()?this.text="":void 0},Section.prototype._click=function(event){return this.trigger("section:clicked",this),event.stopPropagation()},Section.prototype._contentEditable=function(){return!0},Section.prototype._contentEditableElement=function(){return this.element.find("div").first()},Section.prototype._enableContentEditing=function(){var div;return div=this._contentEditableElement(),div.attr("contenteditable","true"),this._blur(),div.on("blur",this._blur),div.on("keyup",this._setText)},Section.prototype._observeElements=function(){return this.observeElements()},Section.prototype._sampleText=function(){return"Click to edit "+this.name+" text."},Section.prototype._setText=function(){return this.text=this._contentEditableElement().text()},Section}(GCObject)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Section.Footer=function(_super){function Footer(){return _ref=Footer.__super__.constructor.apply(this,arguments)}return __extends(Footer,_super),Footer.prototype.containers=function(){return["toggle","background","text","position"]},Footer}(Webforms.Design.Section)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Section.FormBody=function(_super){function FormBody(){return _ref=FormBody.__super__.constructor.apply(this,arguments)}return __extends(FormBody,_super),FormBody.prototype.containers=function(){return["background","text","position"]},FormBody.prototype.positions=function(){return["block","inline-block","split"]},FormBody.prototype.position=function(value){return value?this._position={left:"block",center:"inline-block",right:"split"}[value]:{block:"left","inline-block":"center",split:"right"}[this._position]},FormBody.prototype._contentEditable=function(){return!1},FormBody}(Webforms.Design.Section)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Section.General=function(_super){function General(){return this._setWidthViaInput=__bind(this._setWidthViaInput,this),this._dragStop=__bind(this._dragStop,this),this._dragStart=__bind(this._dragStart,this),this._drag=__bind(this._drag,this),_ref=General.__super__.constructor.apply(this,arguments)}return __extends(General,_super),General.prototype.initialize=function(data,owner){return this.owner=owner,data.name="general",General.__super__.initialize.call(this,data,this.owner),this.element=this.owner.element,this.sectionName=this.name,this.visible=!0,this.font_family="Helvetica",this.trigger("section:selected",this)},General.prototype.addFormData=function(form){var attribute,name,_i,_len,_ref1,_results;for(_ref1=["width","background_color"],_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)attribute=_ref1[_i],name="webform["+attribute+"]",form.find('input:hidden[name="'+name+'"]').remove(),_results.push(form.append($("<input>").attr({type:"hidden",value:this[attribute],name:name})));return _results},General.prototype.containers=function(){return["background","width"]},General.prototype.observeElements=function(){return this._assignWidth(),this._createWidthControl(),this.on("webform:width-changed",this._setWidthViaInput)},General.prototype._drag=function(event,ui){var deltaX;return deltaX=ui.position.left-this.x,this._setWidth(this.width+deltaX)},General.prototype._dragStart=function(event,ui){return this.x=ui.position.left},General.prototype._dragStop=function(){return this._assignWidth()},General.prototype._setWidth=function(newWidth){return newWidth=parseInt(newWidth,10),150>newWidth&&(newWidth=150),newWidth>680&&(newWidth=680),/^\d+$/.test(""+newWidth)?(this.element.css("width",""+newWidth+"px"),this.trigger("webform:dragged",newWidth)):void 0},General.prototype._setWidthViaInput=function(event,width){return this._setWidth(width),this._assignWidth()},General.prototype._assignWidth=function(){return this.width=this.element.width()},General.prototype._contentEditable=function(){return!1},General.prototype._createWidthControl=function(){return this.widthHandle=$('<div id="width-handle"></div>'),this.element.append(this.widthHandle),this.widthHandle.draggable({axis:"x",start:this._dragStart,drag:this._drag,stop:this._dragStop})},General}(Webforms.Design.Section)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child
}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Section.Header=function(_super){function Header(){return _ref=Header.__super__.constructor.apply(this,arguments)}return __extends(Header,_super),Header.prototype.containers=function(){return["toggle","background","text","position"]},Header.prototype._addBackgroundColorStyle=function(elements){return this._addGradientBackgroundStyles(elements)},Header}(Webforms.Design.Section)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Section.PoweredBy=function(_super){function PoweredBy(){return _ref=PoweredBy.__super__.constructor.apply(this,arguments)}return __extends(PoweredBy,_super),PoweredBy.prototype.containers=function(){return["toggle","background","text","position"]},PoweredBy}(Webforms.Design.Section)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Section.Privacy=function(_super){function Privacy(){return _ref=Privacy.__super__.constructor.apply(this,arguments)}return __extends(Privacy,_super),Privacy.prototype.containers=function(){return["toggle","background","text","position"]},Privacy}(Webforms.Design.Section)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Section.Submit=function(_super){function Submit(){return _ref=Submit.__super__.constructor.apply(this,arguments)}return __extends(Submit,_super),Submit.prototype.styledElement=function(){return this.element.find("button")},Submit.prototype.containers=function(){return["background","text","position"]},Submit.prototype._addBackgroundColorStyle=function(elements){return this._addGradientBackgroundStyles(elements),elements.css({borderColor:"#"+Colors.darken(this._background_color_hex(),5)})},Submit}(Webforms.Design.Section)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Toolbar=function(_super){function Toolbar(){return this._selectSection=__bind(this._selectSection,this),this._registerSection=__bind(this._registerSection,this),this._alterColorPicker=__bind(this._alterColorPicker,this),_ref=Toolbar.__super__.constructor.apply(this,arguments)}return __extends(Toolbar,_super),Toolbar.prototype.initialize=function(element){return this.element=element,this.sections=[],this.assignElements(),this.observeElements()},Toolbar.prototype.assignElements=function(){var find,namespace,_this=this;return find=function(s){return _this.element.find(s)},namespace=Webforms.Design.Toolbar,new namespace.Display(find(".display-options"),this),new namespace.Background(find(".background-options"),this),new namespace.Width(find(".width-options"),this),new namespace.Text(find(".text-options"),this),new namespace.Position(find(".position-options"),this)},Toolbar.prototype.observeElements=function(){return this.on("toolbar:alter-color-picker",this._alterColorPicker),this.trigger("toolbar:observe"),this.on("section:registered",this._registerSection),this.on("section:selected",this._selectSection),this.on("section:clicked",this._selectSection)},Toolbar.prototype._alterColorPicker=function(event,option){var interval,_this=this;return interval=setInterval(function(){var oldExport,picker;if("undefined"!=typeof jscolor&&null!==jscolor)return _this.jscolorLoaded||(jscolor.preloading=!1,jscolor.init(),_this.jscolorLoaded=!0),option.color?(picker=option.color[0].color,picker?(clearInterval(interval),oldExport=$.proxy(picker.exportColor,picker),picker.exportColor=function(){var result;return result=oldExport(),option.colorChange(),result}):void 0):clearInterval(interval)},100)},Toolbar.prototype._registerSection=function(event,section){return null==this.section&&(this.section=section),this.sections.push(section)},Toolbar.prototype._selectSection=function(event,section){return this.section=section,this.trigger("toolbar:section-selected"),this.trigger("toolbar:prepare")},Toolbar}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Toolbar.Option=function(_super){function Option(){return this._sectionSelect=__bind(this._sectionSelect,this),this._prepare=__bind(this._prepare,this),this._observeElements=__bind(this._observeElements,this),_ref=Option.__super__.constructor.apply(this,arguments)}return __extends(Option,_super),Option.prototype.initialize=function(container,toolbar){return this.container=container,this.toolbar=toolbar,this.sections=this.toolbar.sections,this.assignElements(),this.on("toolbar:section-selected",this._sectionSelect),this.on("toolbar:prepare",this._prepare),this.on("toolbar:observe",this._observeElements)},Option.prototype.find=function(selector){return this.container.find(selector)},Option.prototype.prepare=function(){},Option.prototype._activate=function(element,boolean){return boolean?element.addClass("active"):element.removeClass("active")},Option.prototype._hide=function(){return this.container.hide()},Option.prototype._show=function(){return this.container.show()},Option.prototype._observeElements=function(){return this.observeElements()},Option.prototype._prepare=function(){return this.container.is(":hidden")?void 0:this.prepare()},Option.prototype._sectionSelect=function(){return this.section=this.toolbar.section,this.section.containers().include(this.name)?this._show():this._hide()},Option}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Toolbar.Background=function(_super){function Background(){return this._clear=__bind(this._clear,this),_ref=Background.__super__.constructor.apply(this,arguments)}return __extends(Background,_super),Background.prototype.assignElements=function(){return this.name="background",this.color=this.find("input"),this.clear=this.find(".clear-background")},Background.prototype.observeElements=function(){return this.trigger("toolbar:alter-color-picker",this),this.clear.on("click",this._clear)},Background.prototype.colorChange=function(){return this.section.background_color="#"+this.color.val(),this.section.applyStyles(),this.clear.show()},Background.prototype.prepare=function(){var color;return color=this.section.background_color,"inherit"===color?this._clear():(this.color.val(color.replace("#","")),this.color[0].color?this.color[0].color.importColor():this.color.css("background-color:",color),this.clear.show())},Background.prototype._clear=function(){return this.section.background_color="inherit",this.section.applyStyles(),this.clear.hide(),this.color.val(""),this.color.css("background-color","#fff")},Background}(Webforms.Design.Toolbar.Option)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Toolbar.Display=function(_super){function Display(){return this._toggleVisiblity=__bind(this._toggleVisiblity,this),this._setSelectValue=__bind(this._setSelectValue,this),this._sectionChange=__bind(this._sectionChange,this),this._registerSection=__bind(this._registerSection,this),_ref=Display.__super__.constructor.apply(this,arguments)}return __extends(Display,_super),Display.prototype.assignElements=function(){return this.name="toggle",this.select=this.find("select"),this.toggle=this.find(".toggle"),this.checkbox=this.find(".toggle input")},Display.prototype.observeElements=function(){return this.on("section:registered",this._registerSection),this.on("section:clicked",this._setSelectValue),this.select.on("change",this._sectionChange),this.toggle.on("click",this._toggleVisiblity)},Display.prototype.prepare=function(){return this.checkbox.check(this.section.visible)},Display.prototype._hide=function(){return this.toggle.hide()},Display.prototype._show=function(){return this.toggle.show()},Display.prototype._option=function(section){var option;return option=$("<option>").attr({value:section.name}),option.text(section.name.titleize()),option},Display.prototype._registerSection=function(event,section){return this.select.append(this._option(section))},Display.prototype._sectionChange=function(){return this.trigger("section:selected",this._section())},Display.prototype._section=function(){var _this=this;return this.sections.detect(function(s){return s.name===_this.select.val()})},Display.prototype._setSelectValue=function(event,section){return this.select.val(section.name).change()},Display.prototype._toggleVisiblity=function(){return this.checkbox.is(":checked")?this.section.show():this.section.hide()},Display}(Webforms.Design.Toolbar.Option)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Toolbar.Position=function(_super){function Position(){return _ref=Position.__super__.constructor.apply(this,arguments)}return __extends(Position,_super),Position.prototype.assignElements=function(){return this.name="position",this.left=this.find("#wf-aleft"),this.center=this.find("#wf-acenter"),this.right=this.find("#wf-aright")},Position.prototype.observeElements=function(){return this.left.on("click",this._setPosition("left")),this.center.on("click",this._setPosition("center")),this.right.on("click",this._setPosition("right"))},Position.prototype.prepare=function(){var position;return position=this.section.position(),this._activate(this.left,"left"===position),this._activate(this.center,"center"===position),this._activate(this.right,"right"===position)},Position.prototype._setPosition=function(position){var _this=this;return function(event){return event.stop(),_this._activate(_this.left,!1),_this._activate(_this.center,!1),_this._activate(_this.right,!1),_this._activate(_this[position],!0),_this.section.position(position),_this.section.applyStyles()}},Position}(Webforms.Design.Toolbar.Option)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Toolbar.Text=function(_super){function Text(){return _ref=Text.__super__.constructor.apply(this,arguments)}return __extends(Text,_super),Text.prototype.assignElements=function(){return this.name="text",this.fontFamily=this.find("#wf_font_family"),this.fontSize=this.find("#wf_font_size"),this.bold=this.find("#wf-bold"),this.italic=this.find("#wf-italic"),this.underline=this.find("#wf-underline"),this.color=this.find("input.color")},Text.prototype.observeElements=function(){return this.trigger("toolbar:alter-color-picker",this),this.fontFamily.on("change",this._change("fontFamily")),this.fontSize.on("change",this._change("fontSize")),this.bold.on("click",this._toggle("bold")),this.italic.on("click",this._toggle("italic")),this.underline.on("click",this._toggle("underline"))},Text.prototype.colorChange=function(){return this.section.color="#"+this.color.val(),this.section.applyStyles()},Text.prototype.prepare=function(){var color;return this.fontFamily.val(this.section.font_family).change(),this.fontSize.val(this.section.font_size).change(),this._activate(this.bold,this.section.bold),this._activate(this.italic,this.section.italic),this._activate(this.underline,this.section.underline),color=this.section.color,this.color.val(color.replace("#","")),this.color[0].color.importColor(),this.section.applyStyles()},Text.prototype._change=function(name){var _this=this;return function(){var attribute,value;return value=_this[name].val(),attribute=name.underscore(),_this.section[attribute]=value,_this.section.applyStyles()}},Text.prototype._toggle=function(name){var _this=this;return function(event){return event.stop(),_this[name].toggleClass("active"),_this.section[name]=_this[name].hasClass("active"),_this.section.applyStyles()}},Text}(Webforms.Design.Toolbar.Option)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Webforms.Design.Toolbar.Width=function(_super){function Width(){return this._widthChangedViaDrag=__bind(this._widthChangedViaDrag,this),this._setTimeout=__bind(this._setTimeout,this),this._change=__bind(this._change,this),_ref=Width.__super__.constructor.apply(this,arguments)}return __extends(Width,_super),Width.prototype.assignElements=function(){return this.name="width",this.value=this.find("input"),this.timeout=null},Width.prototype.observeElements=function(){return this.value.on("keyup",this._setTimeout),this.value.on("change",this._change),this.on("webform:dragged",this._widthChangedViaDrag)},Width.prototype._change=function(){return this.trigger("webform:width-changed",this.value.val())},Width.prototype._setTimeout=function(){return clearTimeout(this.timeout),this.timeout=setTimeout(this._change,1e3)},Width.prototype._widthChangedViaDrag=function(event,width){return this.value.val(width)},Width}(Webforms.Design.Toolbar.Option)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Webforms.List=function(){function List(){var e,_i,_len,_ref;for(_ref=$("tr.webform"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],new Webforms.List.Webform($(e))}return List}(),Webforms.List.Webform=function(){function Webform(element){this.element=element,this._remove=__bind(this._remove,this),this.element.find(".remove-button").on("ajax:success",this._remove)}return Webform.prototype._remove=function(){var table;return table=this.element.closest("table"),this.element.remove(),table.find("tr.webform").exists()?void 0:pjax.reload()},Webform}()}.call(this),function(){Webforms.Publish=function(){function Publish(){$(".snippet textarea").on("click",function(event){return $(event.target).select()})}return Publish}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Webforms.Settings=function(){function Settings(){this._toggleTestMode=__bind(this._toggleTestMode,this),this._fetchIPAddress=__bind(this._fetchIPAddress,this),this.assignElements(),this.observeElements()}return Settings.prototype.assignElements=function(){return this.message=Message.create(),this.success={redirect:$("#webform_success_redirect"),url:$("#webform_success_url").closest(".field"),preview:$("#preview_thank_you")},this.error={redirect:$("#webform_error_redirect"),url:$("#webform_error_url").closest(".field"),preview:$("#preview_error")},this.ip={enable:$("#webform_test_mode"),container:$("#webform_test_mode_ip").closest(".field"),field:$("#webform_test_mode_ip"),trigger:$("#determine_ip")}},Settings.prototype.observeElements=function(){return this.success.redirect.on("change",this._toggleRedirect("success")),this.error.redirect.on("change",this._toggleRedirect("error")),this._toggleRedirect("success")(),this._toggleRedirect("error")(),this.ip.enable.on("click",this._toggleTestMode),this.ip.trigger.on("click",this._fetchIPAddress),this._toggleTestMode()},Settings.prototype._fetchIPAddress=function(event){var f,fetch,field,message,services;return event.stop(),services=["api.ipify.org?format=jsonp&","freegeoip.net/json/?"],f="determineIPAddressForWebforms",field=this.ip.field,message=this.message,window[f]=function(json){return field.val(json.ip),message.hide()},fetch=function(index){var script,service;return(service=services[index])?(script=$("<script>").attr({type:"text/javascript",src:"//"+service+"callback="+f}),script.on("error",function(){return fetch(index+1)}),$(document.body).append(script)):message.hide()},message.display("Loading"),fetch(0)},Settings.prototype._toggleRedirect=function(type){var _this=this;return function(){var object;return object=_this[type],"custom"===object.redirect.val()?(object.url.show(),object.preview.hide()):(object.url.hide(),object.preview.show())}},Settings.prototype._toggleTestMode=function(){return this.ip.enable.is(":checked")?(this.ip.field.enable(),this.ip.container.show()):(this.ip.field.disable(),this.ip.container.hide())},Settings}()}.call(this),function(){this.Websites={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Websites.AutoresponderWarning=function(){function AutoresponderWarning(form){this.form=form,this._change=__bind(this._change,this),this.element=this.form.find("p.instructions.autoresponder"),this.element.exists()&&(this.select=this.form.find("select#website_autoresponder_strategy"),this.initialValue=this.select.val(),this.select.on("change",this._change))}return AutoresponderWarning.prototype._change=function(){return this.select.val()!==this.initialValue?this.element.show():this.element.hide()},AutoresponderWarning}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Websites.CategorySelection=function(){function CategorySelection(form){this.form=form,this._siteTypeChange=__bind(this._siteTypeChange,this),this.assignElements(),this.observeElements()}return CategorySelection.prototype.assignElements=function(){return this.siteTypeSelect=this.form.find("select#website_site_type"),this.categorySelect=this.form.find("select#website_category"),this.initialCategory=this.categorySelect.val(),this.optionGroups=this.categorySelect.find("optgroup").clone(),this.configurationFields=this.form.find("#website-configuration")},CategorySelection.prototype.observeElements=function(){return this.siteTypeSelect.on("change",this._siteTypeChange),this._siteTypeChange()},CategorySelection.prototype._siteTypeChange=function(){var e,group,label,method,siteType,_i,_len,_ref;for(siteType=this.siteTypeSelect.val(),this.categorySelect.html(""),_ref=this.optionGroups,_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],group=$(e),label=group.attr("label").replace(/\s/g,"").underscore(),label===siteType&&(this.categorySelect.html(group.html()),this.initialCategory?this.categorySelect.val(this.initialCategory).change():this.categorySelect.val(this.categorySelect.find("option").attr("value")).change(),this.initialCategory=null);return method="buyer"===siteType?"show":"hide",this.configurationFields[method]()},CategorySelection}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Websites.Designs=function(_super){function Designs(){this._revealDesigns=__bind(this._revealDesigns,this),this.assignElements(),this.observeElements(),this._revealDesigns()}return __extends(Designs,_super),Designs.prototype.assignElements=function(){var e,_i,_len,_ref,_results;for(this.nameSelect=$("#template_name"),_ref=$(".design"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],_results.push(new Websites.Design($(e)));return _results},Designs.prototype.observeElements=function(){return this.nameSelect.on("change",this._revealDesigns)},Designs.prototype._revealDesigns=function(){return this.trigger("designs:hide"),this.trigger("designs:"+this.nameSelect.val()+":show")},Designs}(GCObject),Websites.Design=function(_super){function Design(){return this._select=__bind(this._select,this),this._show=__bind(this._show,this),this._hide=__bind(this._hide,this),this._deselect=__bind(this._deselect,this),_ref=Design.__super__.constructor.apply(this,arguments)}return __extends(Design,_super),Design.prototype.initialize=function(element){return this.element=element,this.radio=this.element.find("input:radio"),this.name=this.element.data("name"),this.color=this.element.data("color"),this.on("designs:deselect",this._deselect),this.on("designs:hide",this._hide),this.on("designs:"+this.name+":show",this._show),this.element.on("click",this._select)},Design.prototype._deselect=function(event,design){return this!==design?(this.radio[0].checked=!1,this.element.removeClass("selected")):void 0},Design.prototype._hide=function(){return this.element.hide()},Design.prototype._show=function(){return this.element.show()},Design.prototype._select=function(event){return event.stop(),this.trigger("designs:deselect",this),this.radio[0].checked=!0,this.element.addClass("selected")},Design}(GCObject)}.call(this),function(){Websites.Listings={}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Websites.Listings.List=function(_super){function List(){return this._restripeRows=__bind(this._restripeRows,this),this._removeListing=__bind(this._removeListing,this),this._hideSave=__bind(this._hideSave,this),_ref=List.__super__.constructor.apply(this,arguments)}return __extends(List,_super),List.prototype.initialize=function(form){return this.form=form,this.assignElements(),this.observeElements()},List.prototype.assignElements=function(){var e,_i,_len,_ref1;for(this.listings=[],_ref1=this.form.find("tr.listing"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],this.listings.push(new Websites.Listings.Listing($(e),this));return this.sorter=new Websites.Listings.Sorting(this),this.actions=this.form.find(".form-actions")},List.prototype.observeElements=function(){return this.on("rows:restripe",this._restripeRows),this.on("listing:removed",this._removeListing),this.on("sorting:cancelled",this._hideSave),this.on("listings:updated",this._hideSave)},List.prototype.save=function(){var _this=this;return $.ajax({url:this.form.attr("action"),type:"post",data:this.form.serialize(),message:"Saving"}).done(function(){return _this.trigger("listings:updated")})},List.prototype.showSave=function(){return this.actions.show()},List.prototype._hideSave=function(){return this.actions.hide(),this.form.reset()},List.prototype._removeListing=function(event,listing){return this.listings=this.listings.remove(listing),this.listings.any()?this._restripeRows():pjax.reload()},List.prototype._restripeRows=function(){var counter,e,_i,_len,_ref1;for(counter=0,_ref1=this.form.find("tr.listing"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],$(e).removeClass("odd even").addClass(counter%2?"even":"odd"),counter++;return this.showSave()},List}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Websites.Listings.Listing=function(_super){function Listing(){return this._updateDisplayValues=__bind(this._updateDisplayValues,this),this._showEdit=__bind(this._showEdit,this),this._remove=__bind(this._remove,this),this._hideEdit=__bind(this._hideEdit,this),_ref=Listing.__super__.constructor.apply(this,arguments)}return __extends(Listing,_super),Listing.prototype.initialize=function(element,owner){return this.element=element,this.owner=owner,this.assignElements(),this.observeElements()},Listing.prototype.assignElements=function(){return this.deleteTrigger=this.element.find("a.delete-button"),this.sortHandle=this.element.find(".position"),this.displayElements=this.element.find(".display"),this.editElements=this.element.find(".edit")},Listing.prototype.observeElements=function(){var _this=this;return this.deleteTrigger.on("ajax:success",this._remove),this.on("sorting:enabled",function(){return _this.sortHandle.show()}),this.on("sorting:disabled",function(){return _this.sortHandle.hide()}),this.on("sorting:cancelled",this._hideEdit),this.on("listings:updated",this._updateDisplayValues),this.displayElements.on("click",this._showEdit)},Listing.prototype._editElement=function(displayElement){var displays,edits;return edits=this.editElements.toArray(),displays=this.displayElements.toArray(),$(edits[displays.indexOf(displayElement[0])])},Listing.prototype._hideEdit=function(){var e,_i,_len,_ref1,_results;for(this.editElements.hide(),this.displayElements.show(),_ref1=this.element.find(".edit select"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],_results.push($(e).change());return _results},Listing.prototype._remove=function(){return this.element.remove(),this.trigger("listing:removed",this)},Listing.prototype._showEdit=function(event){var target;return target=$(event.target),target.is("img,span")&&(target=target.closest(".display")),target.hide(),this._editElement(target).show(),this.owner.showSave()},Listing.prototype._updateDisplayValues=function(){var display,e,element,input,option,select,value,_i,_len,_ref1;for(_ref1=this.displayElements,_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],element=$(e),input=element.next(".edit").find("input"),display=element.find("span"),input.exists()?(value=commaize(input.val()),display.text("$"+value),input.attr("value",value.replace(/\W/g,""))):(select=element.next(".edit").find("select"),value=select.val(),option=select.find('option[value="'+value+'"]'),display.text(option.text()),select.find("option").removeAttr("selected"),option.attr("selected","selected"));return this._hideEdit()},Listing}(GCObject)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Websites.Listings.Sorting=function(_super){function Sorting(){return this._save=__bind(this._save,this),this._reinstatePreviousOrder=__bind(this._reinstatePreviousOrder,this),_ref=Sorting.__super__.constructor.apply(this,arguments)}return __extends(Sorting,_super),Sorting.prototype.initialize=function(owner){return this.owner=owner,this.assignElements(),this.observeElements(),this.enableSort()},Sorting.prototype.assignElements=function(){return this.form=this.owner.form,this.table=this.form.find("table"),this.sortableContainer=this.table.find("#sortable-properties"),this.triggers={sort:this.table.find("thead a.sort-listings"),save:this.form.find(".form-actions .save-button"),cancel:this.form.find(".form-actions .cancel-button")},this.sortHandleHeader=this.table.find("thead .position")},Sorting.prototype.enableSort=function(){return this.trigger("sorting:enabled"),this._cacheCurrentOrder()},Sorting.prototype.observeElements=function(){var _this=this;return this.triggers.cancel.on("click",this._reinstatePreviousOrder),this.triggers.save.on("click",this._save),this.on("sorting:enabled",function(){return _this.sortHandleHeader.show()}),this.on("sorting:disabled",function(){return _this.sortHandleHeader.hide()}),this.sortableContainer.sortable({items:"tr",handle:".handle",update:function(){return _this.trigger("rows:restripe")}})},Sorting.prototype._cacheCurrentOrder=function(){var tr,_i,_len,_ref1,_results;for(this.currentOrder=[],_ref1=this.table.find("tbody tr"),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)tr=_ref1[_i],_results.push(this.currentOrder.push(tr.id));return _results},Sorting.prototype._reinstatePreviousOrder=function(){var id,row,rows,tbody,_i,_len,_ref1;for(tbody=this.table.find("tbody"),rows=tbody.find("tr.listing"),rows.detach(),_ref1=this.currentOrder,_i=0,_len=_ref1.length;_len>_i;_i++)id=_ref1[_i],row=rows.filter("#"+id),row.exists()&&tbody.append(row);return this.trigger("sorting:cancelled")},Sorting.prototype._save=function(event){var counter,e,rows,_i,_len;for(event.stop(),rows=this.table.find("tbody tr.listing"),counter=1,_i=0,_len=rows.length;_len>_i;_i++)e=rows[_i],$(e).find(".position input").val(counter),counter++;return this.owner.save()},Sorting}(GCObject)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Websites.Testimonials={},Websites.Testimonials.List=function(){function List(){this._removeTestimonial=__bind(this._removeTestimonial,this);var e,_i,_len,_ref;for(_ref=$("tr.testimonial a.delete-button"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],$(e).on("ajax:success",this._removeTestimonial)}return List.prototype._removeTestimonial=function(event){return $(event.target).closest("tr").remove(),$("tr.testimonial").exists()?void 0:pjax.reload()},List}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.Whiteboard={},Whiteboard.Form=function(){function Form(element){this.element=element,this._success=__bind(this._success,this),this.checkbox=this.element.find("input:checkbox"),this.element.on("ajax:success",this._success)}return Form.prototype._success=function(event,data){var parent;return top.overlay.hide(),parent=top.Observations,this.checkbox.is(":checked")?parent.trigger("property:published-to-whiteboard",data):parent.trigger("property:whiteboard-data-saved",data)},Form}()}.call(this),function(){this.Wizard=function(){function Wizard(){}return Wizard}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Wizard.Header=function(){function Header(){this._previousStep=__bind(this._previousStep,this),this._nextStep=__bind(this._nextStep,this),this.assignElements(),this.observeElements()}return Header.prototype.assignElements=function(){return this.element=$(".wizard-header"),this.nextButton=this.element.find(".next-step"),this.nextCommit=this.element.find(".next-step-commit"),this.previousButton=this.element.find(".previous-step"),this.previousCommit=this.element.find(".previous-step-commit")},Header.prototype.observeElements=function(){return this.nextButton.on("click",this._nextStep),this.previousButton.on("click",this._previousStep)},Header.prototype._nextStep=function(event){return event.preventDefault(),this.nextCommit.click()},Header.prototype._previousStep=function(event){var target;return target=$(event.target).closest("a"),"#"===target.attr("href")?(event.stop(),this.element.append('<input type="hidden" name="commit" value="Previous Step" />'),this.previousCommit.click()):void 0
},Header}()}.call(this),function(){this.Workflows={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Workflows.Form=function(){function Form(options){this._updatePositions=__bind(this._updatePositions,this),this._showStatusText=__bind(this._showStatusText,this),this._showNewActionForm=__bind(this._showNewActionForm,this),this._showEditActionForm=__bind(this._showEditActionForm,this),this._removeStatusSet=__bind(this._removeStatusSet,this),this._removeAction=__bind(this._removeAction,this),this._addStatusSet=__bind(this._addStatusSet,this),this._addOrUpdateAction=__bind(this._addOrUpdateAction,this),$.extend(this,options),this.assignElements(),this.observeElements(),this._fixInputNamespacing()}return Form.prototype.assignElements=function(){return this.element=$(".workflow-form"),this.statusSetContainer=this.element.find(".status-sets-container"),this.statusSetButton=this.element.find(".add-status-set-button"),this.action={overlay:Overlay.cache["action-form"],template:this.actionTemplate,statusSet:null},this.action.form=this.action.overlay.wrapper.find("form")},Form.prototype.observeElements=function(){return this.statusSetButton.on("click",this._addStatusSet),this.element.on("change",".status-select select",this._showStatusText),this.element.on("click","a.add-action-button",this._showNewActionForm),this.element.on("click",".action-summary a.edit-button",this._showEditActionForm),this.element.on("click",".action-summary a.remove-button",this._removeAction),this.element.on("click",".status-set a.remove-status-set-button",this._removeStatusSet),this.element.on("submit",this._updatePositions),this.action.form.on("submit",this._addOrUpdateAction),this.element.sortable({items:".form-section.status-set",containment:"form",handle:".status-set-drag-handle",axis:"y"})},Form.prototype._actionHtml=function(data){var html;return html=this.action.template.evaluate(data),this._replaceInputIds(html,data)},Form.prototype._addOrUpdateAction=function(event){var data,formData,userName;return event.stop(),formData=this.action.form.serializeObject(),formData["action[title]"].blank()?Message.create().flash("Title can't be blank","error"):(data={statusSetId:this.action.statusSet.data("id"),title:formData["action[title]"],description:formData["action[description]"],days_delay:formData["action[days_delay]"],user_id:formData["action[user_id]"],due_time:formData["action[due_time]"],reminder_value:formData["action[reminder_value]"],reminder_option:formData["action[reminder_option]"]},data.delay="0"===data.days_delay?"no delay":""+data.days_delay+" day delay",data.fullDescription=data.title,null==data.user_id||data.user_id.blank()||(userName=this.action.form.find("#assign-user option:selected").text(),data.fullDescription+="; assigned to "+userName),this.action.action?this._updateAction(data):this._addAction(data),this.action.overlay.hide())},Form.prototype._addAction=function(data){return data.id=uniqueId(),this.action.statusSet.find(".action-collection").append(this._actionHtml(data))},Form.prototype._addStatusSet=function(event){var html,id;return event.preventDefault(),id=uniqueId(),html=this.statusSetTemplate.evaluate({id:id}),html=html.replace(/_0_/g,"_"+id+"_"),html=html.replace(/\[0\]/g,"["+id+"]"),this.statusSetContainer.append(html),$.uniform()},Form.prototype._fixInputNamespacing=function(){var e,ee,element,id,incorrectId,match,regex,select,statusSet,_i,_len,_ref,_results;for(_ref=this.element.find(".status-set").toArray().reverse(),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],statusSet=$(e),select=statusSet.find('select[name*="[status]"]'),match=select.attr("name").match(/workflow\[status_sets_attributes\]\[(\d+)\]\[status\]/),id=statusSet.data("id"),incorrectId=match[1],regex=new RegExp("workflow\\[status_sets_attributes\\]\\["+incorrectId+"\\](.*?)$"),_results.push(function(){var _j,_len1,_ref1,_results1;for(_ref1=this.element.find("[name*='workflow[status_sets_attributes]["+incorrectId+"]']"),_results1=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)ee=_ref1[_j],element=$(ee),match=element.attr("name").match(regex),_results1.push(element.attr("name","workflow[status_sets_attributes]["+id+"]"+match[1]));return _results1}.call(this));return _results},Form.prototype._removeAction=function(event){var action;return event.stop(),confirm("Are you sure you want to remove this action?")?(action=$(event.target).closest(".action-summary"),action.hide(),action.find('input[name*="[_destroy]"]').val("1")):void 0},Form.prototype._removeStatusSet=function(event){var confirmMessage,statusSet;return event.stop(),!(confirmMessage=$(event.currentTarget).data("confirm"))||confirm(confirmMessage)?(statusSet=$(event.target).closest(".status-set"),statusSet.hide(),statusSet.find('input[name*="[_destroy]"]').val("1")):void 0},Form.prototype._replaceInputIds=function(html,data){return html=html.replace(/\[status_sets_attributes\]\[0\]/g,"[status_sets_attributes]["+data.statusSetId+"]"),html=html.replace(/\[actions_attributes\]\[0\]/g,"[actions_attributes]["+data.id+"]"),html=html.replace(/_0_/g,"_"+data.id+"_")},Form.prototype._resetActionForm=function(){return this.action.form.reset(),this.action.form.find("#send-reminder input:checkbox").val(!1).change().disable(),this.action.form.find("#add-time .field").hide(),this.action.form.find("#add-time a").show(),this.action.form.find("input:submit").val("Add Action")},Form.prototype._showEditActionForm=function(event){var action,attr,destinationField,sourceField,value,_i,_len,_ref;for(event.stop(),action=$(event.target).closest(".action-summary"),this.action.action=action,this.action.statusSet=action.closest(".status-set"),this._resetActionForm(),_ref=["title","description","days_delay","user_id","due_time","reminder_value","reminder_option"],_i=0,_len=_ref.length;_len>_i;_i++)attr=_ref[_i],sourceField=action.find("input:hidden[name*='["+attr+"]']"),destinationField=this.action.form.find("[name*='["+attr+"]']"),value=sourceField.val(),null==value||value.blank()||(destinationField.enable(),destinationField.val(value).change(),"due_time"===attr&&(this.action.form.find("#add-time .field").show(),this.action.form.find("#add-time a").hide()),"reminder_value"===attr&&this.action.form.find("#send-reminder input:checkbox").enable().click());return this.action.form.find("input:submit").val("Update Action"),this.action.overlay.show()},Form.prototype._showNewActionForm=function(event){return event.stop(),this.action.statusSet=$(event.target).closest(".status-set"),this.action.action=null,this._resetActionForm(),this.action.overlay.show()},Form.prototype._showStatusText=function(event){var el,target;return target=$(event.currentTarget),"-- Add Custom Status --"===target.val()?(el=target.parents(".status-select"),el.find(".status-select-field").hide(),el.find(".status-text-field").show(),el.find(".status-text-field input").enable().trigger("focus"),el.next(".custom-status-notice").show()):void 0},Form.prototype._updateAction=function(data){var idField,idHtml,newAction;return data.id=this.action.action.data("id"),newAction=$(this._actionHtml(data)),idField=this.action.action.find('input:hidden[name*="[id]"]'),idField.exists()&&(idHtml=idField[0].outerHTML,idHtml=idHtml.replace(/\[actions_attributes\]\[\d+\]/g,"[actions_attributes]["+data.id+"]"),idHtml=idHtml.replace(/_\d+_/g,"_"+data.id+"_"),newAction.append(idHtml)),this.action.action.replaceWith(newAction)},Form.prototype._updatePositions=function(){var e,position,_i,_len,_ref,_results;for(position=0,_ref=this.element.find(".status-set"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],$(e).find('input:hidden[name*="[position]"]').val(position),_results.push(position++);return _results},Form}()}.call(this),function(){this._editor_url="/xinha/",this._editor_lang="en",this._editor_skin="freedomsoft_simple",this._editor_icons="freedomsoft_simple.png",this._editor_simple=!0}.call(this),/*--------------------------------------------------------------------------
    --  Xinha (is not htmlArea) - http://xinha.org
    --
    --  Use of Xinha is granted by the terms of the htmlArea License (based on
    --  BSD license)  please read license.txt in this package for details.
    --
    --  Copyright (c) 2005-2008 Xinha Developer Team and contributors
    --  
    --  Xinha was originally based on work by Mihai Bazon which is:
    --      Copyright (c) 2003-2004 dynarch.com.
    --      Copyright (c) 2002-2003 interactivetools.com, inc.
    --      This copyright notice MUST stay intact for use.
    -------------------------------------------------------------------------*/
Xinha.version={Release:"0.95",Head:"$HeadURL:http://svn.xinha.webfactional.com/trunk/XinhaCore.js $".replace(/^[^:]*:\s*(.*)\s*\$$/,"$1"),Date:"$LastChangedDate:2008-05-01 14:33:36 +0200 (Do, 01 Mai 2008) $".replace(/^[^:]*:\s*([0-9-]*) ([0-9:]*) ([+0-9]*) \((.*)\)\s*\$/,"$4 $2 $3"),Revision:"$LastChangedRevision:999 $".replace(/^[^:]*:\s*(.*)\s*\$$/,"$1"),RevisionBy:"$LastChangedBy:ray $".replace(/^[^:]*:\s*(.*)\s*\$$/,"$1")},Xinha._resolveRelativeUrl=function(_1,_2){if(_2.match(/^([^:]+\:)?\/\//))return _2;var b=_1.split("/");""==b[b.length-1]&&b.pop();var p=_2.split("/");for("."==p[0]&&p.shift();".."==p[0];)b.pop(),p.shift();return b.join("/")+"/"+p.join("/")},"string"==typeof _editor_url){if(_editor_url=_editor_url.replace(/\x2f*$/,"/"),!_editor_url.match(/^([^:]+\:)?\//)){var path=window.location.toString().split("/");path.pop(),_editor_url=Xinha._resolveRelativeUrl(path.join("/"),_editor_url)}}else alert("WARNING: _editor_url is not set!  You should set this variable to the editor files path; it should preferably be an absolute path, like in '/htmlarea/', but it can be relative if you prefer.  Further we will try to load the editor files correctly but we'll probably fail."),_editor_url="";_editor_lang="string"==typeof _editor_lang?_editor_lang.toLowerCase():"en","string"!=typeof _editor_skin&&(_editor_skin="");var __xinhas=[];Xinha.agt=navigator.userAgent.toLowerCase(),Xinha.is_ie=-1!=Xinha.agt.indexOf("msie")&&-1==Xinha.agt.indexOf("opera"),Xinha.ie_version=parseFloat(Xinha.agt.substring(Xinha.agt.indexOf("msie")+5)),Xinha.is_opera=-1!=Xinha.agt.indexOf("opera"),Xinha.opera_version=Xinha.is_opera&&Xinha.agt.match(/opera[\/ ]([0-9.]+)/)?parseFloat(RegExp.$1):0,Xinha.is_khtml=-1!=Xinha.agt.indexOf("khtml"),Xinha.is_webkit=-1!=Xinha.agt.indexOf("applewebkit"),Xinha.webkit_version=parseInt(navigator.appVersion.replace(/.*?AppleWebKit\/([\d]).*?/,"$1")),Xinha.is_safari=-1!=Xinha.agt.indexOf("safari"),Xinha.is_mac=-1!=Xinha.agt.indexOf("mac"),Xinha.is_mac_ie=Xinha.is_ie&&Xinha.is_mac,Xinha.is_win_ie=Xinha.is_ie&&!Xinha.is_mac,Xinha.is_gecko="Gecko"==navigator.product||Xinha.is_opera,Xinha.is_real_gecko="Gecko"==navigator.product&&!Xinha.is_webkit,Xinha.is_ff3=Xinha.is_real_gecko&&parseInt(navigator.productSub)>=2007121016,Xinha.is_ff2=Xinha.is_real_gecko&&parseInt(navigator.productSub)<2007121016,Xinha.isRunLocally=-1!=document.URL.toLowerCase().search(/^file:/),Xinha.is_designMode="undefined"!=typeof document.designMode&&!Xinha.is_ie,Xinha.checkSupportedBrowser=function(){return Xinha.is_real_gecko||Xinha.is_opera&&Xinha.opera_version>=9.2||Xinha.ie_version>=5.5||Xinha.webkit_version>=522},Xinha.isSupportedBrowser=Xinha.checkSupportedBrowser(),Xinha.isRunLocally&&Xinha.isSupportedBrowser&&alert('Xinha *must* be installed on a web server. Locally opened files (those that use the "file://" protocol) cannot properly function. Xinha will try to initialize but may not be correctly loaded.'),Xinha.onload=function(){},Xinha.init=function(){Xinha.onload()},Xinha.RE_tagName=/(<\/|<)\s*([^ \t\n>]+)/gi,Xinha.RE_doctype=/(<!doctype((.|\n)*?)>)\n?/i,Xinha.RE_head=/<head>((.|\n)*?)<\/head>/i,Xinha.RE_body=/<body[^>]*>((.|\n|\r|\t)*?)<\/body>/i,Xinha.RE_Specials=/([\/\^$*+?.()|{}[\]])/g,Xinha.escapeStringForRegExp=function(_9){return _9.replace(Xinha.RE_Specials,"\\$1")},Xinha.RE_email=/^[_a-z\d\-\.]{3,}@[_a-z\d\-]{2,}(\.[_a-z\d\-]{2,})+$/i,Xinha.RE_url=/(https?:\/\/)?(([a-z0-9_]+:[a-z0-9_]+@)?[a-z0-9_-]{2,}(\.[a-z0-9_-]{2,}){2,}(:[0-9]+)?(\/\S+)*)/i,Xinha.Config=function(){this.version=Xinha.version.Revision,this.width="auto",this.height="auto",this.sizeIncludesBars=!0,this.sizeIncludesPanels=!0,this.panel_dimensions={left:"200px",right:"200px",top:"100px",bottom:"100px"},this.iframeWidth=null,this.statusBar=!0,this.htmlareaPaste=!1,this.mozParaHandler="best",this.getHtmlMethod="DOMwalk",this.undoSteps=20,this.undoTimeout=500,this.changeJustifyWithDirection=!1,this.fullPage=!1,this.pageStyle="",this.pageStyleSheets=[],this.baseHref=null,this.expandRelativeUrl=!0,this.stripBaseHref=!0,this.stripSelfNamedAnchors=!0,this.only7BitPrintablesInURLs=!0,this.sevenBitClean=!1,this.specialReplacements={},this.inwardHtml=function(_a){return _a},this.outwardHtml=function(_b){return _b},this.killWordOnPaste=!0,this.makeLinkShowsTarget=!0,this.charSet="undefined"!=typeof document.characterSet?document.characterSet:document.charset,this.browserQuirksMode=null,this.imgURL="images/",this.popupURL="popups/",this.htmlRemoveTags=null,this.flowToolbars=!1,this.toolbarAlign="left",this.showLoading=!1,this.stripScripts=!0,this.convertUrlsToLinks=!0,this.colorPickerCellSize="6px",this.colorPickerGranularity=18,this.colorPickerPosition="bottom,right",this.colorPickerWebSafe=!1,this.colorPickerSaveColors=20,this.fullScreen=!1,this.fullScreenMargins=[0,0,0,0],this.toolbar=[["popupeditor"],["separator","formatblock","fontname","fontsize","bold","italic","underline","strikethrough"],["separator","forecolor","hilitecolor","textindicator"],["linebreak","separator","justifyleft","justifycenter","justifyfull"],["separator","insertorderedlist","insertunorderedlist","outdent","indent"],["separator","inserthorizontalrule","createlink","insertimage","inserttable"],["linebreak","separator","undo","redo","selectall","print"],Xinha.is_gecko?[]:["cut","copy","paste","overwrite","saveas"],["separator","killword","clearfonts","removeformat","toggleborders","splitblock"],["separator","htmlmode","showhelp","about"]],this.fontname={"&mdash; font &mdash;":"",Arial:"arial,helvetica,sans-serif","Courier New":"courier new,courier,monospace",Georgia:"georgia,times new roman,times,serif",Tahoma:"tahoma,arial,helvetica,sans-serif","Times New Roman":"times new roman,times,serif",Verdana:"verdana,arial,helvetica,sans-serif",impact:"impact",WingDings:"wingdings"},this.fontsize={"&mdash; size &mdash;":"","1 (8 pt)":"1","2 (10 pt)":"2","3 (12 pt)":"3","4 (14 pt)":"4","5 (18 pt)":"5","6 (24 pt)":"6","7 (36 pt)":"7"},this.formatblock={"&mdash; format &mdash;":"","Heading 1":"h1","Heading 2":"h2","Heading 3":"h3","Heading 4":"h4","Heading 5":"h5","Heading 6":"h6",Normal:"p",Address:"address",Formatted:"pre"},this.customSelects={},this.debug=!0,this.URIs={blank:_editor_url+"popups/blank.html",link:_editor_url+"modules/CreateLink/link.html",insert_image:_editor_url+"modules/InsertImage/insert_image.html",insert_table:_editor_url+"modules/InsertTable/insert_table.html",select_color:_editor_url+"popups/select_color.html",about:_editor_url+"popups/about.html",help:_editor_url+"popups/editor_help.html"},this.btnList={bold:["Bold",Xinha._lc({key:"button_bold",string:["ed_buttons_main.gif",3,2]},"Xinha"),!1,function(e){e.execCommand("bold")}],italic:["Italic",Xinha._lc({key:"button_italic",string:["ed_buttons_main.gif",2,2]},"Xinha"),!1,function(e){e.execCommand("italic")}],underline:["Underline",Xinha._lc({key:"button_underline",string:["ed_buttons_main.gif",2,0]},"Xinha"),!1,function(e){e.execCommand("underline")}],strikethrough:["Strikethrough",Xinha._lc({key:"button_strikethrough",string:["ed_buttons_main.gif",3,0]},"Xinha"),!1,function(e){e.execCommand("strikethrough")}],subscript:["Subscript",Xinha._lc({key:"button_subscript",string:["ed_buttons_main.gif",3,1]},"Xinha"),!1,function(e){e.execCommand("subscript")}],superscript:["Superscript",Xinha._lc({key:"button_superscript",string:["ed_buttons_main.gif",2,1]},"Xinha"),!1,function(e){e.execCommand("superscript")}],justifyleft:["Justify Left",["ed_buttons_main.gif",0,0],!1,function(e){e.execCommand("justifyleft")}],justifycenter:["Justify Center",["ed_buttons_main.gif",1,1],!1,function(e){e.execCommand("justifycenter")}],justifyright:["Justify Right",["ed_buttons_main.gif",1,0],!1,function(e){e.execCommand("justifyright")}],justifyfull:["Justify Full",["ed_buttons_main.gif",0,1],!1,function(e){e.execCommand("justifyfull")}],orderedlist:["Ordered List",["ed_buttons_main.gif",0,3],!1,function(e){e.execCommand("insertorderedlist")}],unorderedlist:["Bulleted List",["ed_buttons_main.gif",1,3],!1,function(e){e.execCommand("insertunorderedlist")}],insertorderedlist:["Ordered List",["ed_buttons_main.gif",0,3],!1,function(e){e.execCommand("insertorderedlist")}],insertunorderedlist:["Bulleted List",["ed_buttons_main.gif",1,3],!1,function(e){e.execCommand("insertunorderedlist")}],outdent:["Decrease Indent",["ed_buttons_main.gif",1,2],!1,function(e){e.execCommand("outdent")}],indent:["Increase Indent",["ed_buttons_main.gif",0,2],!1,function(e){e.execCommand("indent")}],forecolor:["Font Color",["ed_buttons_main.gif",3,3],!1,function(e){e.execCommand("forecolor")}],hilitecolor:["Background Color",["ed_buttons_main.gif",2,3],!1,function(e){e.execCommand("hilitecolor")}],undo:["Undoes your last action",["ed_buttons_main.gif",4,2],!1,function(e){e.execCommand("undo")}],redo:["Redoes your last action",["ed_buttons_main.gif",5,2],!1,function(e){e.execCommand("redo")}],cut:["Cut selection",["ed_buttons_main.gif",5,0],!1,function(e,cmd){e.execCommand(cmd)}],copy:["Copy selection",["ed_buttons_main.gif",4,0],!1,function(e,cmd){e.execCommand(cmd)}],paste:["Paste from clipboard",["ed_buttons_main.gif",4,1],!1,function(e,cmd){e.execCommand(cmd)}],selectall:["Select all","ed_selectall.gif",!1,function(e){e.execCommand("selectall")}],inserthorizontalrule:["Horizontal Rule",["ed_buttons_main.gif",6,0],!1,function(e){e.execCommand("inserthorizontalrule")}],createlink:["Insert Web Link",["ed_buttons_main.gif",6,1],!1,function(e){e._createLink()}],insertimage:["Insert/Modify Image",["ed_buttons_main.gif",6,3],!1,function(e){e.execCommand("insertimage")}],inserttable:["Insert Table",["ed_buttons_main.gif",6,2],!1,function(e){e.execCommand("inserttable")}],htmlmode:["Toggle HTML Source",["ed_buttons_main.gif",7,0],!0,function(e){e.execCommand("htmlmode")}],toggleborders:["Toggle Borders",["ed_buttons_main.gif",7,2],!1,function(e){e._toggleBorders()}],print:["Print document",["ed_buttons_main.gif",8,1],!1,function(e){Xinha.is_gecko?e._iframe.contentWindow.print():(e.focusEditor(),print())}],saveas:["Save as","ed_saveas.gif",!1,function(e){e.execCommand("saveas",!1,"noname.htm")}],about:["About this editor",["ed_buttons_main.gif",8,2],!0,function(e){e.execCommand("about")}],showhelp:["Help using editor",["ed_buttons_main.gif",9,2],!0,function(e){e.execCommand("showhelp")}],splitblock:["Split Block","ed_splitblock.gif",!1,function(e){e._splitBlock()}],lefttoright:["Direction left to right",["ed_buttons_main.gif",0,4],!1,function(e){e.execCommand("lefttoright")}],righttoleft:["Direction right to left",["ed_buttons_main.gif",1,4],!1,function(e){e.execCommand("righttoleft")}],overwrite:["Insert/Overwrite","ed_overwrite.gif",!1,function(e){e.execCommand("overwrite")}],wordclean:["MS Word Cleaner",["ed_buttons_main.gif",5,3],!1,function(e){e._wordClean()}],clearfonts:["Clear Inline Font Specifications",["ed_buttons_main.gif",5,4],!0,function(e){e._clearFonts()}],removeformat:["Remove formatting",["ed_buttons_main.gif",4,4],!1,function(e){e.execCommand("removeformat")}],killword:["Clear MSOffice tags",["ed_buttons_main.gif",4,3],!1,function(e){e.execCommand("killword")}]};var imgURL=_editor_icons?_editor_url+"iconsets/":_editor_url+this.imgURL;for(var i in this.btnList){var btn=this.btnList[i];"object"==typeof btn&&(_editor_icons&&(btn[1][0]=_editor_icons),"string"!=typeof btn[1]?btn[1][0]=imgURL+btn[1][0]:btn[1]=imgURL+btn[1],btn[0]=Xinha._lc(btn[0]))}},Xinha.Config.prototype.registerButton=function(id,_3c,_3d,_3e,_3f,_40){var _41;if("string"==typeof id)_41=id;else{if("object"!=typeof id)return alert("ERROR [Xinha.Config::registerButton]:\ninvalid arguments"),!1;_41=id.id}switch(typeof id){case"string":this.btnList[id]=[_3c,_3d,_3e,_3f,_40];break;case"object":this.btnList[id.id]=[id.tooltip,id.image,id.textMode,id.action,id.context]}},Xinha.prototype.registerPanel=function(_42,_43){_42||(_42="right"),this.setLoadingMessage("Register "+_42+" panel ");var _44=this.addPanel(_42);_43&&_43.drawPanelIn(_44)},Xinha.Config.prototype.registerDropdown=function(_45){this.customSelects[_45.id]=_45},Xinha.Config.prototype.hideSomeButtons=function(_46){for(var _47=this.toolbar,i=_47.length;--i>=0;)for(var _49=_47[i],j=_49.length;--j>=0;)if(_46.indexOf(" "+_49[j]+" ")>=0){var len=1;/separator|space/.test(_49[j+1])&&(len=2),_49.splice(j,len)}},Xinha.Config.prototype.addToolbarElement=function(id,_4d,_4e){var a,i,j,o,sid,_4f=this.toolbar,_51=!1,_52=!1,_53=0,_54=0,_55=0,_57=!1;if(id&&"object"==typeof id&&id.constructor==Array&&(_51=!0),_4d&&"object"==typeof _4d&&_4d.constructor==Array&&(_52=!0,_53=_4d.length),_51)for(i=0;i<id.length;++i)"separator"!=id[i]&&0!==id[i].indexOf("T[")&&(sid=id[i]);else sid=id;for(i=0;i<_4f.length;++i)for(a=_4f[i],j=0;j<a.length;++j)if(a[j]==sid)return;for(i=0;!_57&&i<_4f.length;++i)for(a=_4f[i],j=0;!_57&&j<a.length;++j)if(_52){for(o=0;_53>o;++o)if(a[j]==_4d[o]){if(0===o){_57=!0,j--;break}_55=i,_54=j,_53=o}}else if(a[j]==_4d){_57=!0;break}if(!_57&&_52&&_4d.length!=_53&&(j=_54,a=_4f[_55],_57=!0),_57)if(0===_4e)if(_51)for(a[j]=id[id.length-1],i=id.length-1;--i>=0;)a.splice(j,0,id[i]);else a[j]=id;else if(0>_4e?j=j+_4e+1:_4e>0&&(j+=_4e),_51)for(i=id.length;--i>=0;)a.splice(j,0,id[i]);else a.splice(j,0,id);else if(_4f[0].splice(0,0,"separator"),_51)for(i=id.length;--i>=0;)_4f[0].splice(0,0,id[i]);else _4f[0].splice(0,0,id)},Xinha.Config.prototype.removeToolbarElement=Xinha.Config.prototype.hideSomeButtons,Xinha.replaceAll=function(_58){for(var tas=document.getElementsByTagName("textarea"),i=tas.length;i>0;new Xinha(tas[--i],_58).generate());},Xinha.replace=function(id,_5c){var ta=Xinha.getElementById("textarea",id);return ta?new Xinha(ta,_5c).generate():null},Xinha.prototype._createToolbar=function(){this.setLoadingMessage(Xinha._lc("Create Toolbar"));var _5e=this,_5f=document.createElement("div");this._toolBar=this._toolbar=_5f,_5f.className="toolbar",_5f.unselectable="1",_5f.align=this.config.toolbarAlign,Xinha.freeLater(this,"_toolBar"),Xinha.freeLater(this,"_toolbar");var _61={};return this._toolbarObjects=_61,this._createToolbar1(_5e,_5f,_61),this._htmlArea.appendChild(_5f),_5f},Xinha.prototype._setConfig=function(_62){this.config=_62},Xinha.prototype._addToolbar=function(){this._createToolbar1(this,this._toolbar,this._toolbarObjects)},Xinha._createToolbarBreakingElement=function(){var brk=document.createElement("div");return brk.style.height="1px",brk.style.width="1px",brk.style.lineHeight="1px",brk.style.fontSize="1px",brk.style.clear="both",brk},Xinha.prototype._createToolbar1=function(_64,_65,_66){function newLine(){if("undefined"==typeof _67||0!==_67.childNodes.length){var _68=document.createElement("table");_68.border="0px",_68.cellSpacing="0px",_68.cellPadding="0px",_64.config.flowToolbars&&(Xinha.is_ie?_68.style.styleFloat="left":_68.style.cssFloat="left"),_65.appendChild(_68);var _69=document.createElement("tbody");_68.appendChild(_69),_67=document.createElement("tr"),_69.appendChild(_67),_68.className="toolbarRow"}}function setButtonStatus(id,_6b){var _6c=this[id],el=this.element;if(_6c!=_6b){switch(id){case"enabled":_6b?(Xinha._removeClass(el,"buttonDisabled"),el.disabled=!1):(Xinha._addClass(el,"buttonDisabled"),el.disabled=!0);break;case"active":_6b?Xinha._addClass(el,"buttonPressed"):Xinha._removeClass(el,"buttonPressed")}this[id]=_6b}}function createSelect(txt){var _6f=null,el=null,cmd=null,_72=_64.config.customSelects,_73=null,_74="";switch(txt){case"fontsize":case"fontname":case"formatblock":_6f=_64.config[txt],cmd=txt;break;default:cmd=txt;var _75=_72[cmd];"undefined"!=typeof _75?(_6f=_75.options,_73=_75.context,"undefined"!=typeof _75.tooltip&&(_74=_75.tooltip)):alert("ERROR [createSelect]:\nCan't find the requested dropdown definition")}if(_6f){el=document.createElement("select"),el.title=_74;var obj={name:txt,element:el,enabled:!0,text:!1,cmd:cmd,state:setButtonStatus,context:_73};Xinha.freeLater(obj),_66[txt]=obj;for(var i in _6f)if("string"==typeof _6f[i]){var op=document.createElement("option");op.innerHTML=Xinha._lc(i),op.value=_6f[i],el.appendChild(op)}Xinha._addEvent(el,"change",function(){_64._comboSelected(el,txt)})}return el}function createButton(txt){var el,btn,obj=null;switch(txt){case"separator":_64.config.flowToolbars&&newLine(),el=document.createElement("div"),el.className="separator";break;case"space":el=document.createElement("div"),el.className="space";break;case"linebreak":return newLine(),!1;case"textindicator":el=document.createElement("div"),el.appendChild(document.createTextNode("A")),el.className="indicator",el.title=Xinha._lc("Current style"),obj={name:txt,element:el,enabled:!0,active:!1,text:!1,cmd:"textindicator",state:setButtonStatus},Xinha.freeLater(obj),_66[txt]=obj;break;default:btn=_64.config.btnList[txt]}if(!el&&btn){el=document.createElement("a"),el.style.display="block",el.href="javascript:void(0)",el.style.textDecoration="none",el.title=btn[0],el.className="button",el.style.direction="ltr",obj={name:txt,element:el,enabled:!0,active:!1,text:btn[2],cmd:btn[3],state:setButtonStatus,context:btn[4]||null},Xinha.freeLater(el),Xinha.freeLater(obj),_66[txt]=obj,el.ondrag=function(){return!1},Xinha._addEvent(el,"mouseout",function(){obj.enabled&&(Xinha._removeClass(el,"buttonActive"),obj.active&&Xinha._addClass(el,"buttonPressed"))}),Xinha._addEvent(el,"mousedown",function(ev){obj.enabled&&(Xinha._addClass(el,"buttonActive"),Xinha._removeClass(el,"buttonPressed"),Xinha._stopEvent(Xinha.is_ie?window.event:ev))}),Xinha._addEvent(el,"click",function(ev){ev=Xinha.is_ie?window.event:ev,_64.btnClickEvent=ev,obj.enabled&&(Xinha._removeClass(el,"buttonActive"),Xinha.is_gecko&&_64.activateEditor(),obj.cmd(_64,obj.name,obj),Xinha._stopEvent(ev))});var _7e=Xinha.makeBtnImg(btn[1]),img=_7e.firstChild;Xinha.freeLater(_7e),Xinha.freeLater(img),el.appendChild(_7e),obj.imgel=img,obj.swapImage=function(_80){"string"!=typeof _80?(img.src=_80[0],img.style.position="relative",img.style.top=_80[2]?"-"+18*(_80[2]+1)+"px":"-18px",img.style.left=_80[1]?"-"+18*(_80[1]+1)+"px":"-18px"):(obj.imgel.src=_80,img.style.top="0px",img.style.left="0px")}}else el||(el=createSelect(txt));return el}var _67;_64.config.flowToolbars&&_65.appendChild(Xinha._createToolbarBreakingElement()),newLine();for(var _81=!0,i=0;i<this.config.toolbar.length;++i){_81&&(_81=!1),null===this.config.toolbar[i]&&(this.config.toolbar[i]=["separator"]);for(var _83=this.config.toolbar[i],j=0;j<_83.length;++j){var _86,_85=_83[j];if(/^([IT])\[(.*?)\]/.test(_85)){var _87="I"==RegExp.$1,_88=RegExp.$2;_87&&(_88=Xinha._lc(_88)),_86=document.createElement("td"),_67.appendChild(_86),_86.className="label",_86.innerHTML=_88}else if("function"!=typeof _85){var _89=createButton(_85);_89?(_86=document.createElement("td"),_86.className="toolbarElement",_67.appendChild(_86),_86.appendChild(_89)):null===_89&&alert("FIXME: Unknown toolbar item: "+_85)}}}return _64.config.flowToolbars&&_65.appendChild(Xinha._createToolbarBreakingElement()),_65};var use_clone_img=!1;Xinha.makeBtnImg=function(_8a,doc){doc||(doc=document),doc._xinhaImgCache||(doc._xinhaImgCache={},Xinha.freeLater(doc._xinhaImgCache));var _8c=null;Xinha.is_ie&&(!doc.compatMode||doc.compatMode&&"BackCompat"==doc.compatMode)?_8c=doc.createElement("span"):(_8c=doc.createElement("div"),_8c.style.position="relative"),_8c.style.overflow="hidden",_8c.style.width="18px",_8c.style.height="18px",_8c.className="buttonImageContainer";var img=null;return"string"==typeof _8a?doc._xinhaImgCache[_8a]?img=doc._xinhaImgCache[_8a].cloneNode():(img=doc.createElement("img"),img.src=_8a,img.style.width="18px",img.style.height="18px",use_clone_img&&(doc._xinhaImgCache[_8a]=img.cloneNode())):(doc._xinhaImgCache[_8a[0]]?img=doc._xinhaImgCache[_8a[0]].cloneNode():(img=doc.createElement("img"),img.src=_8a[0],img.style.position="absolute",use_clone_img&&(doc._xinhaImgCache[_8a[0]]=img.cloneNode())),img.style.top=_8a[2]?"-"+18*(_8a[2]+1)+"px":"-18px",img.style.left=_8a[1]?"-"+18*(_8a[1]+1)+"px":"-18px"),_8c.appendChild(img),_8c},Xinha.prototype._createStatusBar=function(){this.setLoadingMessage(Xinha._lc("Create Statusbar"));var _8e=document.createElement("div");_8e.className="statusBar",this._statusBar=_8e,Xinha.freeLater(this,"_statusBar");var div=document.createElement("span");return div.className="statusBarTree",div.innerHTML=Xinha._lc("Path")+": ",this._statusBarTree=div,Xinha.freeLater(this,"_statusBarTree"),this._statusBar.appendChild(div),div=document.createElement("span"),div.innerHTML=Xinha._lc("You are in TEXT MODE.  Use the [<>] button to switch back to WYSIWYG."),div.style.display="none",this._statusBarTextMode=div,Xinha.freeLater(this,"_statusBarTextMode"),this._statusBar.appendChild(div),this.config.statusBar||(_8e.style.display="none"),_8e},Xinha.prototype.generate=function(){if(Xinha.isSupportedBrowser){var i,url,_91=this,_93=!1,_94=document.getElementsByTagName("link");if(!document.getElementById("XinhaCoreDesign")){for(_editor_css="string"==typeof _editor_css?_editor_css:"Xinha.css",i=0;i<_94.length;i++)"stylesheet"==_94[i].rel&&_94[i].href==_editor_url+_editor_css&&(_93=!0);_93||Xinha.loadStyle(_editor_css,null,"XinhaCoreDesign",!0)}if(""!==_editor_skin&&!document.getElementById("XinhaSkin")){for(_93=!1,i=0;i<_94.length;i++)"stylesheet"==_94[i].rel&&_94[i].href==_editor_url+"skins/"+_editor_skin+"/skin.css"&&(_93=!0);_93||Xinha.loadStyle("skins/"+_editor_skin+"/skin.css",null,"XinhaSkin")}if(Xinha.is_ie){if(url=_editor_url+"modules/InternetExplorer/InternetExplorer.js",!Xinha.loadPlugins([{plugin:"InternetExplorer",url:url}],function(){_91.generate()}))return!1;_91._browserSpecificPlugin=_91.registerPlugin("InternetExplorer")}else if(Xinha.is_webkit){if(url=_editor_url+"modules/WebKit/WebKit.js",!Xinha.loadPlugins([{plugin:"WebKit",url:url}],function(){_91.generate()}))return!1;_91._browserSpecificPlugin=_91.registerPlugin("WebKit")}else if(Xinha.is_opera){if(url=_editor_url+"modules/Opera/Opera.js",!Xinha.loadPlugins([{plugin:"Opera",url:url}],function(){_91.generate()}))return!1;_91._browserSpecificPlugin=_91.registerPlugin("Opera")}else if(Xinha.is_gecko){if(url=_editor_url+"modules/Gecko/Gecko.js",!Xinha.loadPlugins([{plugin:"Gecko",url:url}],function(){_91.generate()}))return!1;_91._browserSpecificPlugin=_91.registerPlugin("Gecko")}if("undefined"==typeof Dialog&&!Xinha._loadback(_editor_url+"modules/Dialogs/dialog.js",this.generate,this))return!1;if("undefined"==typeof Xinha.Dialog&&!Xinha._loadback(_editor_url+"modules/Dialogs/inline-dialog.js",this.generate,this))return!1;if(url=_editor_url+"modules/FullScreen/full-screen.js",!Xinha.loadPlugins([{plugin:"FullScreen",url:url}],function(){_91.generate()}))return!1;if(url=_editor_url+"modules/ColorPicker/ColorPicker.js",!Xinha.loadPlugins([{plugin:"ColorPicker",url:url}],function(){_91.generate()}))return!1;"undefined"!=typeof ColorPicker&&_91.registerPlugin("ColorPicker");var _95=_91.config.toolbar;for(i=_95.length;--i>=0;)for(var j=_95[i].length;--j>=0;)switch(_95[i][j]){case"popupeditor":_91.registerPlugin("FullScreen");break;case"insertimage":if(url=_editor_url+"modules/InsertImage/insert_image.js","undefined"==typeof Xinha.prototype._insertImage&&!Xinha.loadPlugins([{plugin:"InsertImage",url:url}],function(){_91.generate()}))return!1;"undefined"!=typeof InsertImage&&_91.registerPlugin("InsertImage");break;case"createlink":if(url=_editor_url+"modules/CreateLink/link.js","undefined"==typeof Linker&&!Xinha.loadPlugins([{plugin:"CreateLink",url:url}],function(){_91.generate()}))return!1;"undefined"!=typeof CreateLink&&_91.registerPlugin("CreateLink");break;case"inserttable":if(url=_editor_url+"modules/InsertTable/insert_table.js",!Xinha.loadPlugins([{plugin:"InsertTable",url:url}],function(){_91.generate()}))return!1;"undefined"!=typeof InsertTable&&_91.registerPlugin("InsertTable")}if(Xinha.is_gecko&&"built-in"!=_91.config.mozParaHandler){if(!Xinha.loadPlugins([{plugin:"EnterParagraphs",url:_editor_url+"modules/Gecko/paraHandlerBest.js"}],function(){_91.generate()}))return!1;_91.registerPlugin("EnterParagraphs")}switch(8==Xinha.ie_version&&(this.config.getHtmlMethod="TransformInnerHTML"),this.config.getHtmlMethod){case"TransformInnerHTML":var _97=_editor_url+"modules/GetHtml/TransformInnerHTML.js";break;default:var _97=_editor_url+"modules/GetHtml/DOMwalk.js"}if(!Xinha.loadPlugins([{plugin:"GetHtmlImplementation",url:_97}],function(){_91.generate()}))return!1;_91.registerPlugin("GetHtmlImplementation"),this.setLoadingMessage(Xinha._lc("Generate Xinha framework")),this._framework={table:document.createElement("table"),tbody:document.createElement("tbody"),tb_row:document.createElement("tr"),tb_cell:document.createElement("td"),tp_row:document.createElement("tr"),tp_cell:this._panels.top.container,ler_row:document.createElement("tr"),lp_cell:this._panels.left.container,ed_cell:document.createElement("td"),rp_cell:this._panels.right.container,bp_row:document.createElement("tr"),bp_cell:this._panels.bottom.container,sb_row:document.createElement("tr"),sb_cell:document.createElement("td")},Xinha.freeLater(this._framework);var fw=this._framework;fw.table.border="0",fw.table.cellPadding="0",fw.table.cellSpacing="0",fw.tb_row.style.verticalAlign="top",fw.tp_row.style.verticalAlign="top",fw.ler_row.style.verticalAlign="top",fw.bp_row.style.verticalAlign="top",fw.sb_row.style.verticalAlign="top",fw.ed_cell.style.position="relative",fw.tb_row.appendChild(fw.tb_cell),fw.tb_cell.colSpan=3,fw.tp_row.appendChild(fw.tp_cell),fw.tp_cell.colSpan=3,fw.ler_row.appendChild(fw.lp_cell),fw.ler_row.appendChild(fw.ed_cell),fw.ler_row.appendChild(fw.rp_cell),fw.bp_row.appendChild(fw.bp_cell),fw.bp_cell.colSpan=3,fw.sb_row.appendChild(fw.sb_cell),fw.sb_cell.colSpan=3,fw.tbody.appendChild(fw.tb_row),fw.tbody.appendChild(fw.tp_row),fw.tbody.appendChild(fw.ler_row),fw.tbody.appendChild(fw.bp_row),fw.tbody.appendChild(fw.sb_row),fw.table.appendChild(fw.tbody);var _99=this._framework.table;this._htmlArea=_99,Xinha.freeLater(this,"_htmlArea"),_99.className="htmlarea",this._framework.tb_cell.appendChild(this._createToolbar());var _9a=document.createElement("iframe");_9a.src=this.popupURL(_91.config.URIs.blank),_9a.id="XinhaIFrame_"+this._textArea.id,this._framework.ed_cell.appendChild(_9a),this._iframe=_9a,this._iframe.className="xinha_iframe",Xinha.freeLater(this,"_iframe");var _9b=this._createStatusBar();this._framework.sb_cell.appendChild(_9b);var _9c=this._textArea;if(_9c.parentNode.insertBefore(_99,_9c),_9c.className="xinha_textarea",Xinha.removeFromParent(_9c),this._framework.ed_cell.appendChild(_9c),Xinha.addDom0Event(this._textArea,"click",function(){return Xinha._currentlyActiveEditor!=this&&_91.updateToolbar(),!0}),_9c.form){Xinha.prependDom0Event(this._textArea.form,"submit",function(){return _91.firePluginEvent("onBeforeSubmit"),_91._textArea.value=_91.outwardHtml(_91.getHTML()),!0});var _9d=_9c.value;if(Xinha.prependDom0Event(this._textArea.form,"reset",function(){return _91.setHTML(_91.inwardHtml(_9d)),_91.updateToolbar(),!0}),!_9c.form.xinha_submit)try{_9c.form.xinha_submit=_9c.form.submit,_9c.form.submit=function(){this.onsubmit(),this.xinha_submit()}}catch(ex){}}Xinha.prependDom0Event(window,"unload",function(){return _91.firePluginEvent("onBeforeUnload"),_9c.value=_91.outwardHtml(_91.getHTML()),Xinha.is_ie||_99.parentNode.replaceChild(_9c,_99),!0}),_9c.style.display="none",_91.initSize(),this.setLoadingMessage(Xinha._lc("Finishing")),_91._iframeLoadDone=!1,Xinha.is_opera?_91.initIframe():Xinha._addEvent(this._iframe,"load",function(){return _91._iframeLoadDone||(_91._iframeLoadDone=!0,_91.initIframe()),!0})}},Xinha.prototype.initSize=function(){this.setLoadingMessage(Xinha._lc("Init editor size"));var _9f=this,_a0=null,_a1=null;switch(this.config.width){case"auto":_a0=this._initial_ta_size.w;break;case"toolbar":_a0=this._toolBar.offsetWidth+"px";break;default:_a0=/[^0-9]/.test(this.config.width)?this.config.width:this.config.width+"px"}switch(this.config.height){case"auto":_a1=this._initial_ta_size.h;break;default:_a1=/[^0-9]/.test(this.config.height)?this.config.height:this.config.height+"px"}this.sizeEditor(_a0,_a1,this.config.sizeIncludesBars,this.config.sizeIncludesPanels),this.notifyOn("panel_change",function(){_9f.sizeEditor()})},Xinha.prototype.sizeEditor=function(_a2,_a3,_a4,_a5){function panel_is_alive(pan){return _aa[pan].on&&_aa[pan].panels.length&&Xinha.hasDisplayedChildren(_aa[pan].container)?(_aa[pan].container.style.display="",!0):(_aa[pan].container.style.display="none",!1)}if(!this._risizing){if(this._risizing=!0,this.notifyOf("before_resize",{width:_a2,height:_a3}),this.firePluginEvent("onBeforeResize",_a2,_a3),this._iframe.style.height="100%",this._textArea.style.height="100%",this._iframe.style.width="",this._textArea.style.width="",null!==_a4&&(this._htmlArea.sizeIncludesToolbars=_a4),null!==_a5&&(this._htmlArea.sizeIncludesPanels=_a5),_a2&&(this._htmlArea.style.width=_a2,!this._htmlArea.sizeIncludesPanels)){var _a6=this._panels.right;_a6.on&&_a6.panels.length&&Xinha.hasDisplayedChildren(_a6.div)&&(this._htmlArea.style.width=this._htmlArea.offsetWidth+parseInt(this.config.panel_dimensions.right,10)+"px");var _a7=this._panels.left;_a7.on&&_a7.panels.length&&Xinha.hasDisplayedChildren(_a7.div)&&(this._htmlArea.style.width=this._htmlArea.offsetWidth+parseInt(this.config.panel_dimensions.left,10)+"px")}if(_a3&&(this._htmlArea.style.height=_a3,this._htmlArea.sizeIncludesToolbars||(this._htmlArea.style.height=this._htmlArea.offsetHeight+this._toolbar.offsetHeight+this._statusBar.offsetHeight+"px"),!this._htmlArea.sizeIncludesPanels)){var _a8=this._panels.top;_a8.on&&_a8.panels.length&&Xinha.hasDisplayedChildren(_a8.div)&&(this._htmlArea.style.height=this._htmlArea.offsetHeight+parseInt(this.config.panel_dimensions.top,10)+"px");var _a9=this._panels.bottom;_a9.on&&_a9.panels.length&&Xinha.hasDisplayedChildren(_a9.div)&&(this._htmlArea.style.height=this._htmlArea.offsetHeight+parseInt(this.config.panel_dimensions.bottom,10)+"px")}_a2=this._htmlArea.offsetWidth,_a3=this._htmlArea.offsetHeight;var _aa=this._panels,_ac=1;panel_is_alive("left")&&(_ac+=1),panel_is_alive("right")&&(_ac+=1),this._framework.tb_cell.colSpan=_ac,this._framework.tp_cell.colSpan=_ac,this._framework.bp_cell.colSpan=_ac,this._framework.sb_cell.colSpan=_ac,this._framework.tp_row.childNodes.length?Xinha.hasParentNode(this._framework.tp_row)||this._framework.tbody.insertBefore(this._framework.tp_row,this._framework.ler_row):Xinha.removeFromParent(this._framework.tp_row),this._framework.bp_row.childNodes.length?Xinha.hasParentNode(this._framework.bp_row)||this._framework.tbody.insertBefore(this._framework.bp_row,this._framework.ler_row.nextSibling):Xinha.removeFromParent(this._framework.bp_row),this.config.statusBar?Xinha.hasParentNode(this._framework.sb_row)||this._framework.table.appendChild(this._framework.sb_row):Xinha.removeFromParent(this._framework.sb_row),this._framework.lp_cell.style.width=this.config.panel_dimensions.left,this._framework.rp_cell.style.width=this.config.panel_dimensions.right,this._framework.tp_cell.style.height=this.config.panel_dimensions.top,this._framework.bp_cell.style.height=this.config.panel_dimensions.bottom,this._framework.tb_cell.style.height=this._toolBar.offsetHeight+"px",this._framework.sb_cell.style.height=this._statusBar.offsetHeight+"px";var _ae=_a3-this._toolBar.offsetHeight-this._statusBar.offsetHeight;panel_is_alive("top")&&(_ae-=parseInt(this.config.panel_dimensions.top,10)),panel_is_alive("bottom")&&(_ae-=parseInt(this.config.panel_dimensions.bottom,10)),this._iframe.style.height=_ae+"px";var _af=_a2;panel_is_alive("left")&&(_af-=parseInt(this.config.panel_dimensions.left,10)),panel_is_alive("right")&&(_af-=parseInt(this.config.panel_dimensions.right,10));var _b0=this.config.iframeWidth?parseInt(this.config.iframeWidth,10):null;this._iframe.style.width=_b0&&_af>_b0?_b0+"px":_af+"px",this._textArea.style.height=this._iframe.style.height,this.notifyOf("resize",{width:this._htmlArea.offsetWidth,height:this._htmlArea.offsetHeight}),this.firePluginEvent("onResize",this._htmlArea.offsetWidth,this._htmlArea.offsetWidth),this._risizing=!1}},Xinha.prototype.registerPanel=function(_b1,_b2){_b1||(_b1="right"),this.setLoadingMessage("Register "+_b1+" panel ");var _b3=this.addPanel(_b1);_b2&&_b2.drawPanelIn(_b3)},Xinha.prototype.addPanel=function(_b4){var div=document.createElement("div");return div.side=_b4,("left"==_b4||"right"==_b4)&&(div.style.width=this.config.panel_dimensions[_b4],this._iframe&&(div.style.height=this._iframe.style.height)),Xinha.addClasses(div,"panel"),this._panels[_b4].panels.push(div),this._panels[_b4].div.appendChild(div),this.notifyOf("panel_change",{action:"add",panel:div}),this.firePluginEvent("onPanelChange","add",div),div},Xinha.prototype.removePanel=function(_b6){this._panels[_b6.side].div.removeChild(_b6);
for(var _b7=[],i=0;i<this._panels[_b6.side].panels.length;i++)this._panels[_b6.side].panels[i]!=_b6&&_b7.push(this._panels[_b6.side].panels[i]);this._panels[_b6.side].panels=_b7,this.notifyOf("panel_change",{action:"remove",panel:_b6}),this.firePluginEvent("onPanelChange","remove",_b6)},Xinha.prototype.hidePanel=function(_b9){if(_b9&&"none"!=_b9.style.display){try{var pos=this.scrollPos(this._iframe.contentWindow)}catch(e){}_b9.style.display="none",this.notifyOf("panel_change",{action:"hide",panel:_b9}),this.firePluginEvent("onPanelChange","hide",_b9);try{this._iframe.contentWindow.scrollTo(pos.x,pos.y)}catch(e){}}},Xinha.prototype.showPanel=function(_bb){if(_bb&&"none"==_bb.style.display){try{var pos=this.scrollPos(this._iframe.contentWindow)}catch(e){}_bb.style.display="",this.notifyOf("panel_change",{action:"show",panel:_bb}),this.firePluginEvent("onPanelChange","show",_bb);try{this._iframe.contentWindow.scrollTo(pos.x,pos.y)}catch(e){}}},Xinha.prototype.hidePanels=function(_bd){"undefined"==typeof _bd&&(_bd=["left","right","top","bottom"]);for(var _be=[],i=0;i<_bd.length;i++)this._panels[_bd[i]].on&&(_be.push(_bd[i]),this._panels[_bd[i]].on=!1);this.notifyOf("panel_change",{action:"multi_hide",sides:_bd}),this.firePluginEvent("onPanelChange","multi_hide",_bd)},Xinha.prototype.showPanels=function(_c0){"undefined"==typeof _c0&&(_c0=["left","right","top","bottom"]);for(var _c1=[],i=0;i<_c0.length;i++)this._panels[_c0[i]].on||(_c1.push(_c0[i]),this._panels[_c0[i]].on=!0);this.notifyOf("panel_change",{action:"multi_show",sides:_c0}),this.firePluginEvent("onPanelChange","multi_show",_c0)},Xinha.objectProperties=function(obj){var _c4=[];for(var x in obj)_c4[_c4.length]=x;return _c4},Xinha.prototype.editorIsActivated=function(){try{return Xinha.is_designMode?"on"==this._doc.designMode:this._doc.body.contentEditable}catch(ex){return!1}},Xinha._someEditorHasBeenActivated=!1,Xinha._currentlyActiveEditor=null,Xinha.prototype.activateEditor=function(){if(Xinha._currentlyActiveEditor){if(Xinha._currentlyActiveEditor==this)return!0;Xinha._currentlyActiveEditor.deactivateEditor()}if(Xinha.is_designMode&&"on"!=this._doc.designMode)try{"none"==this._iframe.style.display?(this._iframe.style.display="",this._doc.designMode="on",this._iframe.style.display="none"):this._doc.designMode="on"}catch(ex){}else Xinha.is_ie&&this._doc.body.contentEditable!==!0&&(this._doc.body.contentEditable=!0);Xinha._someEditorHasBeenActivated=!0,Xinha._currentlyActiveEditor=this;this.enableToolbar()},Xinha.prototype.deactivateEditor=function(){if(this.disableToolbar(),Xinha.is_designMode&&"off"!=this._doc.designMode)try{this._doc.designMode="off"}catch(ex){}else Xinha.is_designMode||this._doc.body.contentEditable===!1||(this._doc.body.contentEditable=!1);Xinha._currentlyActiveEditor==this&&(Xinha._currentlyActiveEditor=!1)},Xinha.prototype.initIframe=function(){this.disableToolbar();var doc=null,_c8=this;try{if(this._doc=_c8._iframe.contentDocument?_c8._iframe.contentDocument:_c8._iframe.contentWindow.document,doc=this._doc,!doc){if(Xinha.is_gecko)return setTimeout(function(){_c8.initIframe()},50),!1;alert("ERROR: IFRAME can't be initialized.")}}catch(ex){setTimeout(function(){_c8.initIframe()},50)}Xinha.freeLater(this,"_doc"),doc.open("text/html","replace");var _c9="";if(_c8.config.browserQuirksMode===!1)var _ca='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">';else if(_c8.config.browserQuirksMode===!0)var _ca="";else var _ca=Xinha.getDoctype(document);if(_c8.config.fullPage){_c9=_c8.inwardHtml(_c8._textArea.value),_c9.match(Xinha.RE_doctype)&&_c8.setDoctype(RegExp.$1);var _cc=_c9.match(/<link\s+[\s\S]*?["']\s*\/?>/gi);_c9=_c9.replace(/<link\s+[\s\S]*?["']\s*\/?>\s*/gi,""),_cc?_c9=_c9.replace(/<\/head>/i,_cc.join("\n")+"\n</head>"):null}else{if(_c9+=_ca+"\n",_c9+="<html>\n",_c9+="<head>\n",_c9+='<meta http-equiv="Content-Type" content="text/html; charset='+_c8.config.charSet+'">\n',"undefined"!=typeof _c8.config.baseHref&&null!==_c8.config.baseHref&&(_c9+='<base href="'+_c8.config.baseHref+'"/>\n'),_c9+=Xinha.addCoreCSS(),"undefined"!=typeof _c8.config.pageStyleSheets)for(var i=0;i<_c8.config.pageStyleSheets.length;i++)_c8.config.pageStyleSheets[i].length>0&&(_c9+='<link rel="stylesheet" type="text/css" href="'+_c8.config.pageStyleSheets[i]+'">');_c8.config.pageStyle&&(_c9+='<style type="text/css">\n'+_c8.config.pageStyle+"\n</style>"),_c9+="</head>\n",_c9+="<body"+(_c8.config.bodyID?' id="'+_c8.config.bodyID+'"':"")+">\n",_c9+=_c8.inwardHtml(_c8._textArea.value),_c9+="</body>\n",_c9+="</html>"}doc.write(_c9),doc.close(),this.config.fullScreen&&this._fullScreen(),this.setEditorEvents()},Xinha.prototype.whenDocReady=function(f){var e=this;this._doc&&this._doc.body?f():setTimeout(function(){e.whenDocReady(f)},50)},Xinha.prototype.setMode=function(_cf){var _d0;switch("undefined"==typeof _cf&&(_cf="textmode"==this._editMode?"wysiwyg":"textmode"),_cf){case"textmode":this.firePluginEvent("onBeforeMode","textmode"),this.setCC("iframe"),_d0=this.outwardHtml(this.getHTML()),this.setHTML(_d0),this.deactivateEditor(),this._iframe.style.display="none",this._textArea.style.display="",this.config.statusBar&&(this._statusBarTree.style.display="none",this._statusBarTextMode.style.display=""),this.findCC("textarea"),this.notifyOf("modechange",{mode:"text"}),this.firePluginEvent("onMode","textmode");break;case"wysiwyg":this.firePluginEvent("onBeforeMode","wysiwyg"),this.setCC("textarea"),_d0=this.inwardHtml(this.getHTML()),this.deactivateEditor(),this.setHTML(_d0),this._iframe.style.display="",this._textArea.style.display="none",this.activateEditor(),this.config.statusBar&&(this._statusBarTree.style.display="",this._statusBarTextMode.style.display="none"),this.findCC("iframe"),this.notifyOf("modechange",{mode:"wysiwyg"}),this.firePluginEvent("onMode","wysiwyg");break;default:return alert("Mode <"+_cf+"> not defined!"),!1}this._editMode=_cf},Xinha.prototype.setFullHTML=function(_d1){var _d2=RegExp.multiline;RegExp.multiline=!0,_d1.match(Xinha.RE_doctype)&&this.setDoctype(RegExp.$1),RegExp.multiline=_d2;var _d3=this.editorIsActivated();_d3&&this.deactivateEditor();var _d4=/<html>((.|\n)*?)<\/html>/i;return _d1=_d1.replace(_d4,"$1"),this._doc.open("text/html","replace"),this._doc.write(_d1),this._doc.close(),_d3&&this.activateEditor(),this.setEditorEvents(),!0},Xinha.prototype.setEditorEvents=function(){var _d5=this,doc=this._doc;_d5.whenDocReady(function(){Xinha._addEvents(doc,["mousedown"],function(){return _d5.activateEditor(),!0}),Xinha.is_ie&&Xinha._addEvent(_d5._doc.getElementsByTagName("html")[0],"click",function(){if("html"==_d5._iframe.contentWindow.event.srcElement.tagName.toLowerCase()){var r=_d5._doc.body.createTextRange();r.collapse(),r.select()}return!0}),Xinha._addEvents(doc,["keydown","keypress","mousedown","mouseup","drag"],function(_d8){return _d5._editorEvent(Xinha.is_ie?_d5._iframe.contentWindow.event:_d8)});for(var i in _d5.plugins){var _da=_d5.plugins[i].instance;Xinha.refreshPlugin(_da)}"function"==typeof _d5._onGenerate&&_d5._onGenerate(),Xinha.addDom0Event(window,"resize",function(){_d5.sizeEditor()}),_d5.removeLoadingMessage()})},Xinha.prototype.registerPlugin=function(){if(Xinha.isSupportedBrowser){var _dc=arguments[0];if(null===_dc||"undefined"==typeof _dc||"string"==typeof _dc&&"undefined"==typeof window[_dc])return!1;for(var _dd=[],i=1;i<arguments.length;++i)_dd.push(arguments[i]);return this.registerPlugin2(_dc,_dd)}},Xinha.prototype.registerPlugin2=function(_df,_e0){if("string"==typeof _df&&"function"==typeof window[_df]&&(_df=window[_df]),"undefined"==typeof _df)return!1;var obj=new _df(this,_e0);if(obj){var _e2={},_e3=_df._pluginInfo;for(var i in _e3)_e2[i]=_e3[i];return _e2.instance=obj,_e2.args=_e0,this.plugins[_df._pluginInfo.name]=_e2,obj}alert("Can't register plugin "+_df.toString()+".")},Xinha.getPluginDir=function(_e5){return Xinha.externalPlugins[_e5]?Xinha.externalPlugins[_e5][0]:_editor_url+"plugins/"+_e5},Xinha.loadPlugin=function(_e6,_e7,_e8){if(Xinha.isSupportedBrowser){if(Xinha.setLoadingMessage(Xinha._lc("Loading plugin $plugin="+_e6+"$")),"undefined"!=typeof window.pluginName)return _e7&&_e7(_e6),!0;if(!_e8){var dir=this.getPluginDir(_e6),_ea=_e6.replace(/([a-z])([A-Z])([a-z])/g,function(str,l1,l2,l3){return l1+"-"+l2.toLowerCase()+l3}).toLowerCase()+".js";_e8=dir+"/"+_ea}return Xinha._loadback(_e8,_e7?function(){_e7(_e6)}:null),!1}},Xinha._pluginLoadStatus={},Xinha.externalPlugins={},Xinha.loadPlugins=function(_ef,_f0,url){if(Xinha.isSupportedBrowser){Xinha.setLoadingMessage(Xinha._lc("Loading plugins"));for(var m,i=0;i<_ef.length;i++)"object"==typeof _ef[i]&&(m=_ef[i].url.match(/(.*)(\/[^\/]*)$/),Xinha.externalPlugins[_ef[i].plugin]=[m[1],m[2]],_ef[i]=_ef[i].plugin);for(var _f4=!0,_f5=Xinha.cloneObject(_ef);_f5.length;){var p=_f5.pop();if("FullScreen"!=p||Xinha.externalPlugins.FullScreen)if("undefined"==typeof Xinha._pluginLoadStatus[p])Xinha._pluginLoadStatus[p]="loading",Xinha.loadPlugin(p,function(_f7){Xinha._pluginLoadStatus[_f7]="undefined"!=typeof window[_f7]?"ready":"failed"},Xinha.externalPlugins[p]?Xinha.externalPlugins[p][0]+Xinha.externalPlugins[p][1]:url),_f4=!1;else switch(Xinha._pluginLoadStatus[p]){case"failed":case"ready":break;default:_f4=!1}}return _f4?!0:(_f0&&setTimeout(function(){Xinha.loadPlugins(_ef,_f0)&&_f0()},150),_f4)}},Xinha.refreshPlugin=function(_f8){_f8&&"function"==typeof _f8.onGenerate&&_f8.onGenerate(),_f8&&"function"==typeof _f8.onGenerateOnce&&(_f8.onGenerateOnce(),_f8.onGenerateOnce=null)},Xinha.prototype.firePluginEvent=function(_f9){for(var _fa=[],i=1;i<arguments.length;i++)_fa[i-1]=arguments[i];for(var i in this.plugins){var _fc=this.plugins[i].instance;if(_fc!=this._browserSpecificPlugin&&_fc&&"function"==typeof _fc[_f9]&&_fc[_f9].apply(_fc,_fa))return!0}var _fc=this._browserSpecificPlugin;return _fc&&"function"==typeof _fc[_f9]&&_fc[_f9].apply(_fc,_fa)?!0:!1},Xinha.loadStyle=function(_fd,_fe,id,_100){var url=_editor_url||"";_fe&&(url=Xinha.getPluginDir(_fe)+"/"),url+=_fd,/^\//.test(_fd)&&(url=_fd);var head=document.getElementsByTagName("head")[0],link=document.createElement("link");link.rel="stylesheet",link.href=url,link.type="text/css",id&&(link.id=id),_100&&head.getElementsByTagName("link")[0]?head.insertBefore(link,head.getElementsByTagName("link")[0]):head.appendChild(link)},Xinha.prototype.debugTree=function(){function debug(_105,str){for(;--_105>=0;)ta.value+=" ";ta.value+=str+"\n"}function _dt(root,_108){var i,tag=root.tagName.toLowerCase(),ns=Xinha.is_ie?root.scopeName:root.prefix;for(debug(_108,"- "+tag+" ["+ns+"]"),i=root.firstChild;i;i=i.nextSibling)1==i.nodeType&&_dt(i,_108+2)}var ta=document.createElement("textarea");ta.style.width="100%",ta.style.height="20em",ta.value="",_dt(this._doc.body,0),document.body.appendChild(ta)},Xinha.getInnerText=function(el){var i,txt="";for(i=el.firstChild;i;i=i.nextSibling)3==i.nodeType?txt+=i.data:1==i.nodeType&&(txt+=Xinha.getInnerText(i));return txt},Xinha.prototype._wordClean=function(){function clearClass(node){var newc=node.className.replace(/(^|\s)mso.*?(\s|$)/gi," ");newc!=node.className&&(node.className=newc,/\S/.test(node.className)||(node.removeAttribute("className"),++_10e.mso_class))}function clearStyle(node){for(var _115=node.style.cssText.split(/\s*;\s*/),i=_115.length;--i>=0;)(/^mso|^tab-stops/i.test(_115[i])||/^margin\s*:\s*0..\s+0..\s+0../i.test(_115[i]))&&(++_10e.mso_style,_115.splice(i,1));node.style.cssText=_115.join("; ")}function checkEmpty(el){/^(span|b|strong|i|em|font|div|p)$/i.test(el.tagName)&&!el.firstChild&&(Xinha.removeFromParent(el),++_10e.empty_tags)}function parseTree(root){var i,next,tag=root.tagName.toLowerCase();if(Xinha.is_ie&&"HTML"!=root.scopeName||!Xinha.is_ie&&/:/.test(tag))return _117(root),!1;for(clearClass(root),clearStyle(root),i=root.firstChild;i;i=next)next=i.nextSibling,1==i.nodeType&&parseTree(i)&&checkEmpty(i);return!0}var _10e={empty_tags:0,mso_class:0,mso_style:0,mso_xmlel:0,orig_len:this._doc.body.innerHTML.length,T:(new Date).getTime()},_117=null;_117=Xinha.is_ie?function(el){el.outerHTML=Xinha.htmlEncode(el.innerText),++_10e.mso_xmlel}:function(el){var txt=document.createTextNode(Xinha.getInnerText(el));el.parentNode.insertBefore(txt,el),Xinha.removeFromParent(el),++_10e.mso_xmlel},parseTree(this._doc.body),this.updateToolbar()},Xinha.prototype._clearFonts=function(){var D=this.getInnerHTML();confirm(Xinha._lc("Would you like to clear font typefaces?"))&&(D=D.replace(/face="[^"]*"/gi,""),D=D.replace(/font-family:[^;}"']+;?/gi,"")),confirm(Xinha._lc("Would you like to clear font sizes?"))&&(D=D.replace(/size="[^"]*"/gi,""),D=D.replace(/font-size:[^;}"']+;?/gi,"")),confirm(Xinha._lc("Would you like to clear font colours?"))&&(D=D.replace(/color="[^"]*"/gi,""),D=D.replace(/([^-])color:[^;}"']+;?/gi,"$1")),D=D.replace(/(style|class)="\s*"/gi,""),D=D.replace(/<(font|span)\s*>/gi,""),this.setHTML(D),this.updateToolbar()},Xinha.prototype._splitBlock=function(){this._doc.execCommand("formatblock",!1,"div")},Xinha.prototype.forceRedraw=function(){this._doc.body.style.visibility="hidden",this._doc.body.style.visibility=""},Xinha.prototype.focusEditor=function(){switch(this._editMode){case"wysiwyg":try{Xinha._someEditorHasBeenActivated&&(this.activateEditor(),this._iframe.contentWindow.focus())}catch(ex){}break;case"textmode":try{this._textArea.focus()}catch(e){}break;default:alert("ERROR: mode "+this._editMode+" is not defined")}return this._doc},Xinha.prototype._undoTakeSnapshot=function(){++this._undoPos,this._undoPos>=this.config.undoSteps&&(this._undoQueue.shift(),--this._undoPos);var take=!0,txt=this.getInnerHTML();this._undoPos>0&&(take=this._undoQueue[this._undoPos-1]!=txt),take?this._undoQueue[this._undoPos]=txt:this._undoPos--},Xinha.prototype.undo=function(){if(this._undoPos>0){var txt=this._undoQueue[--this._undoPos];txt?this.setHTML(txt):++this._undoPos}},Xinha.prototype.redo=function(){if(this._undoPos<this._undoQueue.length-1){var txt=this._undoQueue[++this._undoPos];txt?this.setHTML(txt):--this._undoPos}},Xinha.prototype.disableToolbar=function(_123){this._timerToolbar&&clearTimeout(this._timerToolbar),"undefined"==typeof _123?_123=[]:"object"!=typeof _123&&(_123=[_123]);for(var i in this._toolbarObjects){var btn=this._toolbarObjects[i];_123.contains(i)||"function"==typeof btn.state&&btn.state("enabled",!1)}},Xinha.prototype.enableToolbar=function(){this.updateToolbar()},Xinha.prototype.updateToolbar=function(_126){var doc=this._doc,text="textmode"==this._editMode,_129=null;if(!text&&(_129=this.getAllAncestors(),this.config.statusBar&&!_126)){for(;this._statusBarItems.length;){var item=this._statusBarItems.pop();item.el=null,item.editor=null,item.onclick=null,item.oncontextmenu=null,item._xinha_dom0Events.click=null,item._xinha_dom0Events.contextmenu=null,item=null}this._statusBarTree.innerHTML=Xinha._lc("Path")+": ";for(var i=_129.length;--i>=0;){var el=_129[i];if(el){var a=document.createElement("a");a.href="javascript:void(0)",a.el=el,a.editor=this,this._statusBarItems.push(a),Xinha.addDom0Event(a,"click",function(){return this.blur(),this.editor.selectNodeContents(this.el),this.editor.updateToolbar(!0),!1}),Xinha.addDom0Event(a,"contextmenu",function(){this.blur();var info="Inline style:\n\n";return info+=this.el.style.cssText.split(/;\s*/).join(";\n"),alert(info),!1});var txt=el.tagName.toLowerCase();"undefined"!=typeof el.style&&(a.title=el.style.cssText),el.id&&(txt+="#"+el.id),el.className&&(txt+="."+el.className),a.appendChild(document.createTextNode(txt)),this._statusBarTree.appendChild(a),0!==i&&this._statusBarTree.appendChild(document.createTextNode(String.fromCharCode(187))),Xinha.freeLater(a)}}}for(var cmd in this._toolbarObjects){var btn=this._toolbarObjects[cmd],_132=!0;if("function"==typeof btn.state){if(btn.context&&!text){_132=!1;var _133=btn.context,_134=[];/(.*)\[(.*?)\]/.test(_133)&&(_133=RegExp.$1,_134=RegExp.$2.split(",")),_133=_133.toLowerCase();for(var _135="*"==_133,k=0;k<_129.length;++k)if(_129[k]&&(_135||_129[k].tagName.toLowerCase()==_133)){_132=!0;for(var _137=null,att=null,comp=null,_13a=null,ka=0;ka<_134.length;++ka)if(_137=_134[ka].match(/(.*)(==|!=|===|!==|>|>=|<|<=)(.*)/),att=_137[1],comp=_137[2],_13a=_137[3],!eval(_129[k][att]+comp+_13a)){_132=!1;break}if(_132)break}}if(btn.state("enabled",(!text||btn.text)&&_132),"function"!=typeof cmd){var _13c=this.config.customSelects[cmd];if(text&&!btn.text||"undefined"==typeof _13c)switch(cmd){case"fontname":case"fontsize":if(!text)try{var _13d=(""+doc.queryCommandValue(cmd)).toLowerCase();if(!_13d){btn.element.selectedIndex=0;break}var _13e=this.config[cmd],_13f=0;for(var j in _13e){if(j.toLowerCase()==_13d||_13e[j].substr(0,_13d.length).toLowerCase()==_13d)throw btn.element.selectedIndex=_13f,"ok";++_13f}btn.element.selectedIndex=0}catch(ex){}break;case"formatblock":var _141=[];for(var _142 in this.config.formatblock)"string"==typeof this.config.formatblock[_142]&&(_141[_141.length]=this.config.formatblock[_142]);var _143=this._getFirstAncestor(this.getSelection(),_141);if(_143)for(var x=0;x<_141.length;x++)_141[x].toLowerCase()==_143.tagName.toLowerCase()&&(btn.element.selectedIndex=x);else btn.element.selectedIndex=0;break;case"textindicator":if(!text)try{var _145=btn.element.style;_145.backgroundColor=Xinha._makeColor(doc.queryCommandValue(Xinha.is_ie?"backcolor":"hilitecolor")),/transparent/i.test(_145.backgroundColor)&&(_145.backgroundColor=Xinha._makeColor(doc.queryCommandValue("backcolor"))),_145.color=Xinha._makeColor(doc.queryCommandValue("forecolor")),_145.fontFamily=doc.queryCommandValue("fontname"),_145.fontWeight=doc.queryCommandState("bold")?"bold":"normal",_145.fontStyle=doc.queryCommandState("italic")?"italic":"normal"}catch(ex){}break;case"htmlmode":btn.state("active",text);break;case"lefttoright":case"righttoleft":for(var _146=this.getParentElement();_146&&!Xinha.isBlockElement(_146);)_146=_146.parentNode;_146&&btn.state("active",_146.style.direction==("righttoleft"==cmd?"rtl":"ltr"));break;default:cmd=cmd.replace(/(un)?orderedlist/i,"insert$1orderedlist");try{btn.state("active",!text&&doc.queryCommandState(cmd))}catch(ex){}}else _13c.refresh(this)}}}if(this._customUndo&&!this._timerUndo){this._undoTakeSnapshot();var _147=this;this._timerUndo=setTimeout(function(){_147._timerUndo=null},this.config.undoTimeout)}this.firePluginEvent("onUpdateToolbar")},Xinha.getEditor=function(ref){for(var i=__xinhas.length;i--;){var _14a=__xinhas[i];if(_14a&&(_14a._textArea.id==ref||_14a._textArea.name==ref||_14a._textArea==ref))return _14a}return null},Xinha.prototype.getPluginInstance=function(_14b){return this.plugins[_14b]?this.plugins[_14b].instance:null},Xinha.prototype.getAllAncestors=function(){for(var p=this.getParentElement(),a=[];p&&1==p.nodeType&&"body"!=p.tagName.toLowerCase();)a.push(p),p=p.parentNode;return a.push(this._doc.body),a},Xinha.prototype._getFirstAncestor=function(sel,_14f){var prnt=this.activeElement(sel);if(null===prnt)try{prnt=Xinha.is_ie?this.createRange(sel).parentElement():this.createRange(sel).commonAncestorContainer}catch(ex){return null}for("string"==typeof _14f&&(_14f=[_14f]);prnt;){if(1==prnt.nodeType){if(null===_14f)return prnt;if(_14f.contains(prnt.tagName.toLowerCase()))return prnt;if("body"==prnt.tagName.toLowerCase())break;if("table"==prnt.tagName.toLowerCase())break}prnt=prnt.parentNode}return null},Xinha.prototype._getAncestorBlock=function(sel){for(var prnt=Xinha.is_ie?this.createRange(sel).parentElement:this.createRange(sel).commonAncestorContainer;prnt&&1==prnt.nodeType;)switch(prnt.tagName.toLowerCase()){case"div":case"p":case"address":case"blockquote":case"center":case"del":case"ins":case"pre":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"h7":return prnt;case"body":case"noframes":case"dd":case"li":case"th":case"td":case"noscript":return null}return null},Xinha.prototype._createImplicitBlock=function(){var sel=this.getSelection();Xinha.is_ie?sel.empty():sel.collapseToStart();this.createRange(sel)},Xinha.prototype.surroundHTML=function(_156,_157){var html=this.getSelectedHTML();this.insertHTML(_156+html+_157)},Xinha.prototype.hasSelectedText=function(){return""!==this.getSelectedHTML()},Xinha.prototype._comboSelected=function(el,txt){this.focusEditor();var _15b=el.options[el.selectedIndex].value;switch(txt){case"fontname":case"fontsize":this.execCommand(txt,!1,_15b);break;case"formatblock":if(!_15b){this.updateToolbar();break}Xinha.is_gecko&&"blockquote"===_15b||(_15b="<"+_15b+">"),this.execCommand(txt,!1,_15b);break;default:var _15c=this.config.customSelects[txt];"undefined"!=typeof _15c?_15c.action(this):alert("FIXME: combo box "+txt+" not implemented")}},Xinha.prototype._colorSelector=function(_15d){var _15e=this;if(Xinha.is_gecko)try{_15e._doc.execCommand("useCSS",!1,!1),_15e._doc.execCommand("styleWithCSS",!1,!0)}catch(ex){}var _160,btn=_15e._toolbarObjects[_15d].element;"hilitecolor"==_15d?Xinha.is_ie?(_15d="backcolor",_160=Xinha._colorToRgb(_15e._doc.queryCommandValue("backcolor"))):_160=Xinha._colorToRgb(_15e._doc.queryCommandValue("hilitecolor")):_160=Xinha._colorToRgb(_15e._doc.queryCommandValue("forecolor"));var _161=function(_162){_15e._doc.execCommand(_15d,!1,_162)};if(Xinha.is_ie){var _163=_15e.createRange(_15e.getSelection());_161=function(_164){_163.select(),_15e._doc.execCommand(_15d,!1,_164)}}var _165=new Xinha.colorPicker({cellsize:_15e.config.colorPickerCellSize,callback:_161,granularity:_15e.config.colorPickerGranularity,websafe:_15e.config.colorPickerWebSafe,savecolors:_15e.config.colorPickerSaveColors});_165.open(_15e.config.colorPickerPosition,btn,_160)},Xinha.prototype.execCommand=function(_166,UI,_168){var _169=this;if(this.focusEditor(),_166=_166.toLowerCase(),this.firePluginEvent("onExecCommand",_166,UI,_168))return this.updateToolbar(),!1;switch(_166){case"htmlmode":this.setMode();break;case"hilitecolor":case"forecolor":this._colorSelector(_166);break;case"createlink":this._createLink();break;case"undo":case"redo":this._customUndo?this[_166]():this._doc.execCommand(_166,UI,_168);break;case"inserttable":this._insertTable();break;case"insertimage":this._insertImage();break;case"about":this._popupDialog(_169.config.URIs.about,null,this);break;case"showhelp":this._popupDialog(_169.config.URIs.help,null,this);break;case"killword":this._wordClean();break;case"cut":case"copy":case"paste":this._doc.execCommand(_166,UI,_168),this.config.killWordOnPaste&&this._wordClean();break;case"lefttoright":case"righttoleft":this.config.changeJustifyWithDirection&&this._doc.execCommand("righttoleft"==_166?"justifyright":"justifyleft",UI,_168);for(var dir="righttoleft"==_166?"rtl":"ltr",el=this.getParentElement();el&&!Xinha.isBlockElement(el);)el=el.parentNode;el&&(el.style.direction=el.style.direction==dir?"":dir);break;case"justifyleft":case"justifyright":_166.match(/^justify(.*)$/);var ae=this.activeElement(this.getSelection());ae&&"img"==ae.tagName.toLowerCase()?ae.align=ae.align==RegExp.$1?"":RegExp.$1:this._doc.execCommand(_166,UI,_168);break;default:try{this._doc.execCommand(_166,UI,_168)}catch(ex){this.config.debug&&alert(ex+"\n\nby execCommand("+_166+");")}}return this.updateToolbar(),!1},Xinha.prototype._editorEvent=function(ev){var _16e=this;if("function"==typeof _16e._textArea["on"+ev.type]&&_16e._textArea["on"+ev.type](),this.isKeyEvent(ev)){if(_16e.firePluginEvent("onKeyPress",ev))return!1;this.isShortCut(ev)&&this._shortCuts(ev)}return"mousedown"==ev.type&&_16e.firePluginEvent("onMouseDown",ev)?!1:(_16e._timerToolbar&&clearTimeout(_16e._timerToolbar),_16e._timerToolbar=setTimeout(function(){_16e.updateToolbar(),_16e._timerToolbar=null},250),void 0)},Xinha.prototype._shortCuts=function(ev){var key=this.getKey(ev).toLowerCase(),cmd=null,_172=null;switch(key){case"b":cmd="bold";break;case"i":cmd="italic";break;case"u":cmd="underline";break;case"s":cmd="strikethrough";break;case"l":cmd="justifyleft";break;case"e":cmd="justifycenter";break;case"r":cmd="justifyright";break;case"j":cmd="justifyfull";break;case"z":cmd="undo";break;case"y":cmd="redo";break;case"v":cmd="paste";break;case"n":cmd="formatblock",_172="p";break;case"0":cmd="killword";break;case"1":case"2":case"3":case"4":case"5":case"6":cmd="formatblock",_172="h"+key}cmd&&(this.execCommand(cmd,!1,_172),Xinha._stopEvent(ev))},Xinha.prototype.convertNode=function(el,_174){for(var _175=this._doc.createElement(_174);el.firstChild;)_175.appendChild(el.firstChild);return _175},Xinha.prototype.scrollToElement=function(e){if(e||(e=this.getParentElement())){var _177=Xinha.getElementTopLeft(e);this._iframe.contentWindow.scrollTo(_177.left,_177.top)}},Xinha.prototype.getEditorContent=function(){return this.outwardHtml(this.getHTML())},Xinha.prototype.setEditorContent=function(html){this.setHTML(this.inwardHtml(html))},Xinha.prototype.getHTML=function(){var html="";switch(this._editMode){case"wysiwyg":html=this.config.fullPage?this.doctype+"\n"+Xinha.getHTML(this._doc.documentElement,!0,this):Xinha.getHTML(this._doc.body,!1,this).trim();break;case"textmode":html=this._textArea.value;break;default:return alert("Mode <"+this._editMode+"> not defined!"),!1}return html},Xinha.prototype.outwardHtml=function(html){for(var i in this.plugins){var _17c=this.plugins[i].instance;_17c&&"function"==typeof _17c.outwardHtml&&(html=_17c.outwardHtml(html))}html=html.replace(/<(\/?)b(\s|>|\/)/gi,"<$1strong$2"),html=html.replace(/<(\/?)i(\s|>|\/)/gi,"<$1em$2"),html=html.replace(/<(\/?)strike(\s|>|\/)/gi,"<$1del$2"),html=html.replace(/(<[^>]*on(click|mouse(over|out|up|down))=['"])if\(window\.parent &amp;&amp; window\.parent\.Xinha\)\{return false\}/gi,"$1");var _17d=location.href.replace(/(https?:\/\/[^\/]*)\/.*/,"$1")+"/";return html=html.replace(/https?:\/\/null\//g,_17d),html=html.replace(/((href|src|background)=[\'\"])\/+/gi,"$1"+_17d),html=this.outwardSpecialReplacements(html),html=this.fixRelativeLinks(html),this.config.sevenBitClean&&(html=html.replace(/[^ -~\r\n\t]/g,function(c){return"&#"+c.charCodeAt(0)+";"})),html=html.replace(/(<script[^>]*((type=[\"\']text\/)|(language=[\"\'])))(freezescript)/gi,"$1javascript"),this.config.fullPage&&(html=Xinha.stripCoreCSS(html)),"function"==typeof this.config.outwardHtml&&(html=this.config.outwardHtml(html)),html},Xinha.prototype.inwardHtml=function(html){for(var i in this.plugins){var _181=this.plugins[i].instance;_181&&"function"==typeof _181.inwardHtml&&(html=_181.inwardHtml(html))}html=html.replace(/<(\/?)del(\s|>|\/)/gi,"<$1strike$2"),html=html.replace(/(<[^>]*on(click|mouse(over|out|up|down))=["'])/gi,"$1if(window.parent &amp;&amp; window.parent.Xinha){return false}"),html=this.inwardSpecialReplacements(html),html=html.replace(/(<script[^>]*((type=[\"\']text\/)|(language=[\"\'])))(javascript)/gi,"$1freezescript");var _182=new RegExp("((href|src|background)=['\"])/+","gi");return html=html.replace(_182,"$1"+location.href.replace(/(https?:\/\/[^\/]*)\/.*/,"$1")+"/"),html=this.fixRelativeLinks(html),this.config.fullPage&&(html=Xinha.addCoreCSS(html)),"function"==typeof this.config.inwardHtml&&(html=this.config.inwardHtml(html)),html},Xinha.prototype.outwardSpecialReplacements=function(html){for(var i in this.config.specialReplacements){var from=this.config.specialReplacements[i],to=i;if("function"==typeof from.replace&&"function"==typeof to.replace){var reg=new RegExp(Xinha.escapeStringForRegExp(from),"g");html=html.replace(reg,to.replace(/\$/g,"$$$$"))}}return html},Xinha.prototype.inwardSpecialReplacements=function(html){for(var i in this.config.specialReplacements){var from=i,to=this.config.specialReplacements[i];if("function"==typeof from.replace&&"function"==typeof to.replace){var reg=new RegExp(Xinha.escapeStringForRegExp(from),"g");html=html.replace(reg,to.replace(/\$/g,"$$$$"))}}return html},Xinha.prototype.fixRelativeLinks=function(html){if("undefined"!=typeof this.config.expandRelativeUrl&&this.config.expandRelativeUrl)var src=html.match(/(src|href)="([^"]*)"/gi);var b=document.location.href;if(src)for(var url,url_m,relPath,base_m,absPath,i=0;i<src.length;++i)url=src[i].match(/(src|href)="([^"]*)"/i),url_m=url[2].match(/\.\.\//g),url_m&&(relPath=new RegExp("(.*?)(([^/]*/){"+url_m.length+"})[^/]*$"),base_m=b.match(relPath),absPath=url[2].replace(/(\.\.\/)*/,base_m[1]),html=html.replace(new RegExp(Xinha.escapeStringForRegExp(url[2])),absPath));if("undefined"!=typeof this.config.stripSelfNamedAnchors&&this.config.stripSelfNamedAnchors){var _192=new RegExp('((href|src|background)=")('+Xinha.escapeStringForRegExp(unescape(document.location.href.replace(/&/g,"&amp;")))+")([#?][^'\" ]*)","g");html=html.replace(_192,"$1$4")}if("undefined"!=typeof this.config.stripBaseHref&&this.config.stripBaseHref){var _193=null;"undefined"!=typeof this.config.baseHref&&null!==this.config.baseHref&&(_193=new RegExp('((href|src|background|action)=")('+Xinha.escapeStringForRegExp(this.config.baseHref.replace(/([^\/]\/)(?=.+\.)[^\/]*$/,"$1"))+")","g"),html=html.replace(_193,"$1")),_193=new RegExp('((href|src|background|action)=")('+Xinha.escapeStringForRegExp(document.location.href.replace(/^(https?:\/\/[^\/]*)(.*)/,"$1"))+")","g"),html=html.replace(_193,"$1")}return html},Xinha.prototype.getInnerHTML=function(){if(!this._doc.body)return"";var html="";switch(this._editMode){case"wysiwyg":html=this.config.fullPage?this.doctype+"\n"+this._doc.documentElement.innerHTML:this._doc.body.innerHTML;break;case"textmode":html=this._textArea.value;break;default:return alert("Mode <"+this._editMode+"> not defined!"),!1}return html},Xinha.prototype.setHTML=function(html){this.config.fullPage?this.setFullHTML(html):this._doc.body.innerHTML=html,this._textArea.value=html},Xinha.prototype.setDoctype=function(_196){this.doctype=_196},Xinha._object=null,Array.prototype.isArray=!0,RegExp.prototype.isRegExp=!0,Xinha.cloneObject=function(obj){if(!obj)return null;var _198=obj.isArray?[]:{};if(obj.constructor.toString().match(/\s*function Function\(/)||"function"==typeof obj)_198=obj;else if(obj.isRegExp)_198=eval(obj.toString());else for(var n in obj){var node=obj[n];_198[n]="object"==typeof node?Xinha.cloneObject(node):node}return _198},Xinha.flushEvents=function(){for(var x=0,e=Xinha._eventFlushers.pop();e;){try{3==e.length?(Xinha._removeEvent(e[0],e[1],e[2]),x++):2==e.length&&(e[0]["on"+e[1]]=null,e[0]._xinha_dom0Events[e[1]]=null,x++)}catch(ex){}e=Xinha._eventFlushers.pop()}},Xinha._eventFlushers=[],document.addEventListener?(Xinha._addEvent=function(el,_19e,func){el.addEventListener(_19e,func,!0),Xinha._eventFlushers.push([el,_19e,func])},Xinha._removeEvent=function(el,_1a1,func){el.removeEventListener(_1a1,func,!0)},Xinha._stopEvent=function(ev){ev.preventDefault(),ev.stopPropagation()}):document.attachEvent?(Xinha._addEvent=function(el,_1a5,func){el.attachEvent("on"+_1a5,func),Xinha._eventFlushers.push([el,_1a5,func])},Xinha._removeEvent=function(el,_1a8,func){el.detachEvent("on"+_1a8,func)},Xinha._stopEvent=function(ev){try{ev.cancelBubble=!0,ev.returnValue=!1}catch(ex){}}):(Xinha._addEvent=function(){alert("_addEvent is not supported")},Xinha._removeEvent=function(){alert("_removeEvent is not supported")},Xinha._stopEvent=function(){alert("_stopEvent is not supported")}),Xinha._addEvents=function(el,evs,func){for(var i=evs.length;--i>=0;)Xinha._addEvent(el,evs[i],func)},Xinha._removeEvents=function(el,evs,func){for(var i=evs.length;--i>=0;)Xinha._removeEvent(el,evs[i],func)},Xinha.addOnloadHandler=function(func,_1bb){_1bb=_1bb?_1bb:window;var init=function(){arguments.callee.done||(arguments.callee.done=!0,Xinha.onloadTimer&&clearInterval(Xinha.onloadTimer),func())};if(Xinha.is_ie){_1bb.document.write("<script id=__ie_onload defer src=javascript:void(0)></script>");var _1bd=_1bb.document.getElementById("__ie_onload");_1bd.onreadystatechange=function(){"loaded"==this.readyState&&(this.parentNode.removeChild(_1bd),init())}}else/applewebkit|KHTML/i.test(navigator.userAgent)?Xinha.onloadTimer=_1bb.setInterval(function(){/loaded|complete/.test(_1bb.document.readyState)&&init()},10):_1bb.document.addEventListener("DOMContentLoaded",init,!1);Xinha._addEvent(_1bb,"load",init)},Xinha.addDom0Event=function(el,ev,fn){Xinha._prepareForDom0Events(el,ev),el._xinha_dom0Events[ev].unshift(fn)},Xinha.prependDom0Event=function(el,ev,fn){Xinha._prepareForDom0Events(el,ev),el._xinha_dom0Events[ev].push(fn)},Xinha._prepareForDom0Events=function(el,ev){"undefined"==typeof el._xinha_dom0Events&&(el._xinha_dom0Events={},Xinha.freeLater(el,"_xinha_dom0Events")),"undefined"==typeof el._xinha_dom0Events[ev]&&(el._xinha_dom0Events[ev]=[],"function"==typeof el["on"+ev]&&el._xinha_dom0Events[ev].push(el["on"+ev]),el["on"+ev]=function(_1c6){for(var a=el._xinha_dom0Events[ev],_1c8=!0,i=a.length;--i>=0;){if(el._xinha_tempEventHandler=a[i],el._xinha_tempEventHandler(_1c6)===!1){el._xinha_tempEventHandler=null,_1c8=!1;
break}el._xinha_tempEventHandler=null}return _1c8},Xinha._eventFlushers.push([el,ev]))},Xinha.prototype.notifyOn=function(ev,fn){"undefined"==typeof this._notifyListeners[ev]&&(this._notifyListeners[ev]=[],Xinha.freeLater(this,"_notifyListeners")),this._notifyListeners[ev].push(fn)},Xinha.prototype.notifyOf=function(ev,args){if(this._notifyListeners[ev])for(var i=0;i<this._notifyListeners[ev].length;i++)this._notifyListeners[ev][i](ev,args)},Xinha._blockTags=" body form textarea fieldset ul ol dl li div p h1 h2 h3 h4 h5 h6 quote pre table thead tbody tfoot tr td th iframe address blockquote ",Xinha.isBlockElement=function(el){return el&&1==el.nodeType&&-1!=Xinha._blockTags.indexOf(" "+el.tagName.toLowerCase()+" ")},Xinha._paraContainerTags=" body td th caption fieldset div",Xinha.isParaContainer=function(el){return el&&1==el.nodeType&&-1!=Xinha._paraContainerTags.indexOf(" "+el.tagName.toLowerCase()+" ")},Xinha._closingTags=" a abbr acronym address applet b bdo big blockquote button caption center cite code del dfn dir div dl em fieldset font form frameset h1 h2 h3 h4 h5 h6 i iframe ins kbd label legend map menu noframes noscript object ol optgroup pre q s samp script select small span strike strong style sub sup table textarea title tt u ul var ",Xinha.needsClosingTag=function(el){return el&&1==el.nodeType&&-1!=Xinha._closingTags.indexOf(" "+el.tagName.toLowerCase()+" ")},Xinha.htmlEncode=function(str){return"undefined"==typeof str.replace&&(str=str.toString()),str=str.replace(/&/gi,"&amp;"),str=str.replace(/</gi,"&lt;"),str=str.replace(/>/gi,"&gt;"),str=str.replace(/\xA0/g,"&nbsp;"),str=str.replace(/\x22/g,"&quot;")},Xinha.prototype.stripBaseURL=function(_1d3){if(null===this.config.baseHref||!this.config.stripBaseHref)return _1d3;var _1d4=this.config.baseHref.replace(/^(https?:\/\/[^\/]+)(.*)$/,"$1"),_1d5=new RegExp(_1d4);return _1d3.replace(_1d5,"")},String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},Xinha._makeColor=function(v){if("number"!=typeof v)return v;var r=255&v,g=v>>8&255,b=v>>16&255;return"rgb("+r+","+g+","+b+")"},Xinha._colorToRgb=function(v){function hex(d){return 16>d?"0"+d.toString(16):d.toString(16)}if(!v)return"";var r,g,b;if("number"==typeof v)return r=255&v,g=v>>8&255,b=v>>16&255,"#"+hex(r)+hex(g)+hex(b);if("rgb"==v.substr(0,3)){var re=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/;return v.match(re)?(r=parseInt(RegExp.$1,10),g=parseInt(RegExp.$2,10),b=parseInt(RegExp.$3,10),"#"+hex(r)+hex(g)+hex(b)):null}return"#"==v.substr(0,1)?v:null},Xinha.prototype._popupDialog=function(url,_1df,init){Dialog(this.popupURL(url),_1df,init)},Xinha.prototype.imgURL=function(file,_1e2){return"undefined"==typeof _1e2?_editor_url+file:_editor_url+"plugins/"+_1e2+"/img/"+file},Xinha.prototype.popupURL=function(file){var url="";if(file.match(/^plugin:\/\/(.*?)\/(.*)/)){var _1e5=RegExp.$1,_1e6=RegExp.$2;/\.(html?|php)$/.test(_1e6)||(_1e6+=".html"),url=Xinha.getPluginDir(_1e5)+"/popups/"+_1e6}else url=file.match(/^\/.*?/)||file.match(/^https?:\/\//)?file:_editor_url+this.config.popupURL+file;return url},Xinha.getElementById=function(tag,id){var el,i,objs=document.getElementsByTagName(tag);for(i=objs.length;--i>=0&&(el=objs[i]);)if(el.id==id)return el;return null},Xinha.prototype._toggleBorders=function(){var _1ea=this._doc.getElementsByTagName("TABLE");if(0!==_1ea.length){this.borders=this.borders?!1:!0;for(var i=0;i<_1ea.length;i++)this.borders?Xinha._addClass(_1ea[i],"htmtableborders"):Xinha._removeClass(_1ea[i],"htmtableborders")}return!0},Xinha.addCoreCSS=function(html){var _1ed='<style title="XinhaInternalCSS" type="text/css">.htmtableborders, .htmtableborders td, .htmtableborders th {border : 1px dashed lightgrey ! important;}\nhtml, body { border: 0px; } \nbody { background-color: #ffffff; } \nimg, hr { cursor: default } \n</style>\n';return html&&/<head>/i.test(html)?html.replace(/<head>/i,"<head>"+_1ed):html?_1ed+html:_1ed},Xinha.prototype.addEditorStylesheet=function(_1ee){var _1ef=this._doc.createElement("link");_1ef.rel="stylesheet",_1ef.type="text/css",_1ef.title="XinhaInternalCSS",_1ef.href=_1ee,this._doc.getElementsByTagName("HEAD")[0].appendChild(_1ef)},Xinha.stripCoreCSS=function(html){return html.replace(/<style[^>]+title="XinhaInternalCSS"(.|\n)*?<\/style>/gi,"").replace(/<link[^>]+title="XinhaInternalCSS"(.|\n)*?>/gi,"")},Xinha._removeClass=function(el,_1f2){if(el&&el.className){for(var cls=el.className.split(" "),ar=[],i=cls.length;i>0;)cls[--i]!=_1f2&&(ar[ar.length]=cls[i]);el.className=ar.join(" ")}},Xinha._addClass=function(el,_1f7){Xinha._removeClass(el,_1f7),el.className+=" "+_1f7},Xinha.addClasses=function(el,_1f9){if(null!==el){for(var _1fa=el.className.trim().split(" "),ours=_1f9.split(" "),x=0;x<ours.length;x++){for(var _1fd=!1,i=0;_1fd===!1&&i<_1fa.length;i++)_1fa[i]==ours[x]&&(_1fd=!0);_1fd===!1&&(_1fa[_1fa.length]=ours[x])}el.className=_1fa.join(" ").trim()}},Xinha.removeClasses=function(el,_200){for(var _201=el.className.trim().split(),_202=[],_203=_200.trim().split(),i=0;i<_201.length;i++){for(var _205=!1,x=0;x<_203.length&&!_205;x++)_201[i]==_203[x]&&(_205=!0);_205||(_202[_202.length]=_201[i])}return _202.join(" ")},Xinha.addClass=Xinha._addClass,Xinha.removeClass=Xinha._removeClass,Xinha._addClasses=Xinha.addClasses,Xinha._removeClasses=Xinha.removeClasses,Xinha._hasClass=function(el,_208){if(!el||!el.className)return!1;for(var cls=el.className.split(" "),i=cls.length;i>0;)if(cls[--i]==_208)return!0;return!1},Xinha._postback_send_charset=!0,Xinha._postback=function(url,data,_20d){function callBack(){4==req.readyState&&(200==req.status||Xinha.isRunLocally&&0==req.status?"function"==typeof _20d&&_20d(req.responseText,req):Xinha._postback_send_charset?(Xinha._postback_send_charset=!1,Xinha._postback(url,data,_20d)):alert("An error has occurred: "+req.statusText+"\nURL: "+url))}var req=null;req=Xinha.getXMLHTTPRequestObject();var _20f="";if("string"==typeof data)_20f=data;else if("object"==typeof data)for(var i in data)_20f+=(_20f.length?"&":"")+i+"="+encodeURIComponent(data[i]);req.onreadystatechange=callBack,req.open("POST",url,!0),req.setRequestHeader("Content-Type","application/x-www-form-urlencoded"+(Xinha._postback_send_charset?"; charset=UTF-8":"")),req.send(_20f)},Xinha._getback=function(url,_212){function callBack(){4==req.readyState&&(200==req.status||Xinha.isRunLocally&&0==req.status?_212(req.responseText,req):alert("An error has occurred: "+req.statusText+"\nURL: "+url))}var req=null;req=Xinha.getXMLHTTPRequestObject(),req.onreadystatechange=callBack,req.open("GET",url,!0),req.send(null)},Xinha._geturlcontent=function(url){var req=null;return req=Xinha.getXMLHTTPRequestObject(),req.open("GET",url,!1),req.send(null),200==req.status||Xinha.isRunLocally&&0==req.status?req.responseText:""},Array.prototype.contains||(Array.prototype.contains=function(_21a){for(var _21b=this,i=0;i<_21b.length;i++)if(_21a==_21b[i])return!0;return!1}),Array.prototype.indexOf||(Array.prototype.indexOf=function(_21d){for(var _21e=this,i=0;i<_21e.length;i++)if(_21d==_21e[i])return i;return null}),Array.prototype.append||(Array.prototype.append=function(a){for(var i=0;i<a.length;i++)this.push(a[i]);return this}),Xinha.arrayContainsArray=function(a1,a2){for(var _224=!0,x=0;x<a2.length;x++){for(var _226=!1,i=0;i<a1.length;i++)if(a1[i]==a2[x]){_226=!0;break}if(!_226){_224=!1;break}}return _224},Xinha.arrayFilter=function(a1,_229){for(var _22a=[],x=0;x<a1.length;x++)_229(a1[x])&&(_22a[_22a.length]=a1[x]);return _22a},Xinha.collectionToArray=function(_22c){for(var _22d=[],i=0;i<_22c.length;i++)_22d.push(_22c.item(i));return _22d},Xinha.uniq_count=0,Xinha.uniq=function(_22f){return _22f+Xinha.uniq_count++},Xinha._loadlang=function(_230,url){var lang;"string"==typeof _editor_lcbackend?(url=_editor_lcbackend,url=url.replace(/%lang%/,_editor_lang),url=url.replace(/%context%/,_230)):url||("Xinha"!=_230?url=Xinha.getPluginDir(_230)+"/lang/"+_editor_lang+".js":(Xinha.setLoadingMessage("Loading language"),url=_editor_url+"lang/"+_editor_lang+".js"));var _233=Xinha._geturlcontent(url);if(""!==_233)try{eval("lang = "+_233)}catch(ex){alert("Error reading Language-File ("+url+"):\n"+Error.toString()),lang={}}else lang={};return lang},Xinha._lc=function(_234,_235,_236){var url,ret;"object"==typeof _235&&_235.url&&_235.context&&(url=_235.url+_editor_lang+".js",_235=_235.context);var m=null;if("string"==typeof _234&&(m=_234.match(/\$(.*?)=(.*?)\$/g)),m){_236||(_236={});for(var i=0;i<m.length;i++){var n=m[i].match(/\$(.*?)=(.*?)\$/);_236[n[1]]=n[2],_234=_234.replace(n[0],"$"+n[1])}}if("en"==_editor_lang)ret="object"==typeof _234&&_234.string?_234.string:_234;else{"undefined"==typeof Xinha._lc_catalog&&(Xinha._lc_catalog=[]),"undefined"==typeof _235&&(_235="Xinha"),"undefined"==typeof Xinha._lc_catalog[_235]&&(Xinha._lc_catalog[_235]=Xinha._loadlang(_235,url));var key;if(key="object"==typeof _234&&_234.key?_234.key:"object"==typeof _234&&_234.string?_234.string:_234,"undefined"==typeof Xinha._lc_catalog[_235][key]){if("Xinha"!=_235)return Xinha._lc(_234,"Xinha",_236);ret="object"==typeof _234&&_234.string?_234.string:_234}else ret=Xinha._lc_catalog[_235][key]}if("object"==typeof _234&&_234.replace&&(_236=_234.replace),"undefined"!=typeof _236)for(var i in _236)ret=ret.replace("$"+i,_236[i]);return ret},Xinha.hasDisplayedChildren=function(el){for(var _23d=el.childNodes,i=0;i<_23d.length;i++)if(_23d[i].tagName&&"none"!=_23d[i].style.display)return!0;return!1},Xinha._loadback=function(url,_240,_241,_242){if(document.getElementById(url))return!0;var t=Xinha.is_ie?"onreadystatechange":"onload",s=document.createElement("script");return s.type="text/javascript",s.src=url,s.id=url,_240&&(s[t]=function(){(!Xinha.is_ie||/loaded|complete/.test(window.event.srcElement.readyState))&&(_240.call(_241?_241:this,_242),s[t]=null)}),document.getElementsByTagName("head")[0].appendChild(s),!1},Xinha.makeEditors=function(_245,_246,_247){if(Xinha.isSupportedBrowser){"function"==typeof _246&&(_246=_246());for(var _249,_248={},x=0;x<_245.length;x++){if("string"==typeof _245[x]){if(_249=Xinha.getElementById("textarea",_245[x]),!_249){_245[x]=null;continue}}else"object"==typeof _245[x]&&_245[x].tagName&&"textarea"==_245[x].tagName.toLowerCase()&&(_249=_245[x],_249.id||(_249.id="xinha_id_"+x));var _24b=new Xinha(_249,Xinha.cloneObject(_246));_24b.registerPlugins(_247),_248[_249.id]=_24b}return _248}},Xinha.startEditors=function(_24c){if(Xinha.isSupportedBrowser)for(var i in _24c)_24c[i].generate&&_24c[i].generate()},Xinha.prototype.registerPlugins=function(_24e){if(Xinha.isSupportedBrowser&&_24e)for(var i=0;i<_24e.length;i++)this.setLoadingMessage(Xinha._lc("Register plugin $plugin","Xinha",{plugin:_24e[i]})),this.registerPlugin(_24e[i])},Xinha.base64_encode=function(_250){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,_251="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_252="",i=0;do chr1=_250.charCodeAt(i++),chr2=_250.charCodeAt(i++),chr3=_250.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),_252=_252+_251.charAt(enc1)+_251.charAt(enc2)+_251.charAt(enc3)+_251.charAt(enc4);while(i<_250.length);return _252},Xinha.base64_decode=function(_256){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,_257="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_258="",i=0;_256=_256.replace(/[^A-Za-z0-9\+\/\=]/g,"");do enc1=_257.indexOf(_256.charAt(i++)),enc2=_257.indexOf(_256.charAt(i++)),enc3=_257.indexOf(_256.charAt(i++)),enc4=_257.indexOf(_256.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,_258+=String.fromCharCode(chr1),64!=enc3&&(_258+=String.fromCharCode(chr2)),64!=enc4&&(_258+=String.fromCharCode(chr3));while(i<_256.length);return _258},Xinha.removeFromParent=function(el){if(el.parentNode){var pN=el.parentNode;return pN.removeChild(el),el}},Xinha.hasParentNode=function(el){return el.parentNode?11==el.parentNode.nodeType?!1:!0:!1},Xinha.viewportSize=function(_25f){_25f=_25f?_25f:window;var x,y;return _25f.innerHeight?(x=_25f.innerWidth,y=_25f.innerHeight):_25f.document.documentElement&&_25f.document.documentElement.clientHeight?(x=_25f.document.documentElement.clientWidth,y=_25f.document.documentElement.clientHeight):_25f.document.body&&(x=_25f.document.body.clientWidth,y=_25f.document.body.clientHeight),{x:x,y:y}},Xinha.pageSize=function(_261){_261=_261?_261:window;var x,y,_263=_261.document.body.scrollHeight,_264=_261.document.documentElement.scrollHeight;return _263>_264?(x=_261.document.body.scrollWidth,y=_261.document.body.scrollHeight):(x=_261.document.documentElement.scrollWidth,y=_261.document.documentElement.scrollHeight),{x:x,y:y}},Xinha.prototype.scrollPos=function(_265){_265=_265?_265:window;var x,y;return _265.pageYOffset?(x=_265.pageXOffset,y=_265.pageYOffset):_265.document.documentElement&&document.documentElement.scrollTop?(x=_265.document.documentElement.scrollLeft,y=_265.document.documentElement.scrollTop):_265.document.body&&(x=_265.document.body.scrollLeft,y=_265.document.body.scrollTop),{x:x,y:y}},Xinha.getElementTopLeft=function(_267){var _268=curtop=0;if(_267.offsetParent)for(_268=_267.offsetLeft,curtop=_267.offsetTop;_267=_267.offsetParent;)_268+=_267.offsetLeft,curtop+=_267.offsetTop;return{top:curtop,left:_268}},Xinha.findPosX=function(obj){var _26a=0;return obj.offsetParent?Xinha.getElementTopLeft(obj).left:(obj.x&&(_26a+=obj.x),_26a)},Xinha.findPosY=function(obj){var _26c=0;return obj.offsetParent?Xinha.getElementTopLeft(obj).top:(obj.y&&(_26c+=obj.y),_26c)},Xinha.createLoadingMessages=function(_26d){if(!Xinha.loadingMessages&&Xinha.isSupportedBrowser){Xinha.loadingMessages=[];for(var i=0;i<_26d.length;i++)document.getElementById(_26d[i])&&Xinha.loadingMessages.push(Xinha.createLoadingMessage(Xinha.getElementById("textarea",_26d[i])))}},Xinha.createLoadingMessage=function(_26f,text){if(!document.getElementById("loading_"+_26f.id)&&Xinha.isSupportedBrowser){var _271=document.createElement("div");_271.id="loading_"+_26f.id,_271.className="loading",_271.style.left=Xinha.findPosX(_26f)+_26f.offsetWidth/2-106+"px",_271.style.top=Xinha.findPosY(_26f)+_26f.offsetHeight/2-50+"px";var _272=document.createElement("div");_272.className="loading_main",_272.id="loading_main_"+_26f.id,_272.appendChild(document.createTextNode(Xinha._lc("Loading in progress. Please wait!")));var _273=document.createElement("div");return _273.className="loading_sub",_273.id="loading_sub_"+_26f.id,text=text?text:Xinha._lc("Loading Core"),_273.appendChild(document.createTextNode(text)),_271.appendChild(_272),_271.appendChild(_273),document.body.appendChild(_271),Xinha.freeLater(_271),Xinha.freeLater(_272),Xinha.freeLater(_273),_273}},Xinha.prototype.setLoadingMessage=function(_274,_275){document.getElementById("loading_sub_"+this._textArea.id)&&(document.getElementById("loading_main_"+this._textArea.id).innerHTML=_275?_275:Xinha._lc("Loading in progress. Please wait!"),document.getElementById("loading_sub_"+this._textArea.id).innerHTML=_274)},Xinha.setLoadingMessage=function(_276){if(Xinha.loadingMessages)for(var i=0;i<Xinha.loadingMessages.length;i++)Xinha.loadingMessages[i].innerHTML=_276},Xinha.prototype.removeLoadingMessage=function(){document.getElementById("loading_"+this._textArea.id)&&document.body.removeChild(document.getElementById("loading_"+this._textArea.id))},Xinha.removeLoadingMessages=function(_278){for(var i=0;i<_278.length;i++)if(document.getElementById(_278[i])){var main=document.getElementById("loading_"+document.getElementById(_278[i]).id);main.parentNode.removeChild(main)}Xinha.loadingMessages=null},Xinha.toFree=[],Xinha.freeLater=function(obj,prop){Xinha.toFree.push({o:obj,p:prop})},Xinha.free=function(obj,prop){if(obj&&!prop)for(var p in obj)Xinha.free(obj,p);else if(obj&&-1==prop.indexOf("src"))try{obj[prop]=null}catch(x){}},Xinha.collectGarbageForIE=function(){Xinha.flushEvents();for(var x=0;x<Xinha.toFree.length;x++)Xinha.free(Xinha.toFree[x].o,Xinha.toFree[x].p),Xinha.toFree[x].o=null},Xinha.prototype.insertNodeAtSelection=function(){Xinha.notImplemented("insertNodeAtSelection")},Xinha.prototype.getParentElement=function(){Xinha.notImplemented("getParentElement")},Xinha.prototype.activeElement=function(){Xinha.notImplemented("activeElement")},Xinha.prototype.selectionEmpty=function(){Xinha.notImplemented("selectionEmpty")},Xinha.prototype.saveSelection=function(){Xinha.notImplemented("saveSelection")},Xinha.prototype.restoreSelection=function(){Xinha.notImplemented("restoreSelection")},Xinha.prototype.selectNodeContents=function(){Xinha.notImplemented("selectNodeContents")},Xinha.prototype.insertHTML=function(){Xinha.notImplemented("insertHTML")},Xinha.prototype.getSelectedHTML=function(){Xinha.notImplemented("getSelectedHTML")},Xinha.prototype.getSelection=function(){Xinha.notImplemented("getSelection")},Xinha.prototype.createRange=function(){Xinha.notImplemented("createRange")},Xinha.prototype.isKeyEvent=function(){Xinha.notImplemented("isKeyEvent")},Xinha.prototype.isShortCut=function(_28b){return _28b.ctrlKey&&!_28b.altKey?!0:!1},Xinha.prototype.getKey=function(){Xinha.notImplemented("getKey")},Xinha.getOuterHTML=function(){Xinha.notImplemented("getOuterHTML")},Xinha.getXMLHTTPRequestObject=function(){try{if("undefined"!=typeof XMLHttpRequest&&"function"==typeof XMLHttpRequest.constructor)return new XMLHttpRequest;if("function"==typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){Xinha.notImplemented("getXMLHTTPRequestObject")}},Xinha.prototype._activeElement=function(sel){return this.activeElement(sel)},Xinha.prototype._selectionEmpty=function(sel){return this.selectionEmpty(sel)},Xinha.prototype._getSelection=function(){return this.getSelection()},Xinha.prototype._createRange=function(sel){return this.createRange(sel)},HTMLArea=Xinha,Xinha.init(),Xinha.ie_version<8&&Xinha.addDom0Event(window,"unload",Xinha.collectGarbageForIE),Xinha.notImplemented=function(_291){throw new Error("Method Not Implemented","Part of Xinha has tried to call the "+_291+" method which has not been implemented.")},function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.XinhaLoader=function(){function XinhaLoader(editorId){this.editorId=editorId,this._checkLoaded=__bind(this._checkLoaded,this),this.interval=setInterval(this._checkLoaded,50)}return XinhaLoader.prototype._afterLoad=function(){var s,select,selector,_i,_len,_ref;for(this.editorFrame=this._editor()._iframe,$(".extra-actions").first().show(),$(".assets").first().show(),window.overlay&&window.overlay.refreshHeight(),_ref=$(".toolbar select"),_i=0,_len=_ref.length;_len>_i;_i++)s=_ref[_i],select=$(s),selector=$('<div class="selector">'),selector.append("<span></span>"),select.before(selector),selector.append(select);return $.uniform()},XinhaLoader.prototype._checkLoaded=function(){var editor;return editor=this._editor(),editor&&editor._iframeLoadDone?(this._afterLoad(),clearInterval(this.interval)):void 0},XinhaLoader.prototype._editor=function(){return xinha_editors&&xinha_editors[this.editorId]?xinha_editors[this.editorId]:null},XinhaLoader}()}.call(this),xinha_editors=null,xinha_init=null,xinha_config=null,xinha_plugins=null,xinha_init=function(){"test"!=environment&&$("#text_editor").exists()&&(xinha_editors=["text_editor"],xinha_plugins=["InsertWords","InsertCustomVariable"],Xinha.loadPlugins(xinha_plugins,xinha_init)&&(xinha_config=new Xinha.Config,xinha_config.autofocus="text_editor",xinha_config.stripBaseHref=!1,xinha_config.mozParaHandler="built-in",xinha_config.toolbar=[["fontname","fontsize"],["separator","bold","italic","underline"],["separator","justifyleft","justifycenter","justifyright","justifyfull"],["separator","insertorderedlist","insertunorderedlist","outdent","indent"],["separator","createlink","htmlmode"],["linebreak"]],xinha_config.pageStyleSheets=[_editor_url+"examples/files/full_example.css"],xinha_config.statusBar=!1,"undefined"==typeof editorCombos?(xinha_config.InsertWords={combos:[]},_custom_fields_enabled.directMail&&xinha_config.InsertWords.combos.push({options:xinha_keywords4,context:""}),_custom_fields_enabled.seller&&xinha_config.InsertWords.combos.push({options:xinha_keywords3,context:""}),_custom_fields_enabled.contact&&xinha_config.InsertWords.combos.push({options:xinha_keywords5,context:""}),_custom_fields_enabled.buyer&&xinha_config.InsertWords.combos.push({options:xinha_keywords2,context:""}),_custom_fields_enabled.broadcast&&xinha_config.InsertWords.combos.push({options:xinha_keywords7,context:""}),xinha_config.InsertWords.combos.push({options:xinha_keywords1,context:""})):xinha_config.InsertWords=editorCombos(),xinha_editors=Xinha.makeEditors(xinha_editors,xinha_config,xinha_plugins),Xinha.startEditors(xinha_editors),new XinhaLoader("text_editor")))},Xinha._addEvent(window,"load",xinha_init),pjax.on("success",function(){$("#text_editor").exists()&&xinha_init()}),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};null==this.Attachments&&(this.Attachments={}),Attachments.Status=function(){function Status(selector){this.selector=selector,this._checkNextAvailableGeneratingAttachment=__bind(this._checkNextAvailableGeneratingAttachment,this),"test"!==environment&&(this.containers=[],this.interval=setInterval(this._checkNextAvailableGeneratingAttachment,5e3))}return Status.prototype._checkNextAvailableGeneratingAttachment=function(){return this.containers.any()||(this.containers=$(".generating").toArray()),this.containers.any()?this._checkAttachmentStatus($(this.containers.shift())):clearInterval(this.interval)},Status.prototype._checkAttachmentStatus=function(container){var _this=this;return document.hideLoader=!0,$.ajax({url:container.data("url"),type:"get",message:"no-message",dataType:"text html",contentType:!1,processData:!1}).done(function(html){return!html.blank()&&container.exists()?container.closest(_this.selector).replaceWith(html):void 0}).error(function(){return clearInterval(_this.interval)}),document.hideLoader=!1},Status}()}.call(this),function(){var Counters,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Counters=function(){function Counters(){this._update=__bind(this._update,this),this._refresh=__bind(this._refresh,this);var _this=this;"test"!==environment&&"application"===layout&&(this.delay=3e4,"development"===environment&&(this.delay*=10),$(function(){return _this._refresh(),$(document).on("counters:refresh",_this._refresh)}))}return Counters.prototype._refresh=function(){var _this=this;return clearTimeout(this.timeout),setTimeout(function(){return $(".badge").exists()?($(document).trigger("ajax:manual-control"),$.ajax({url:"/counters/refresh",type:"get",message:"no-message"}).done(_this._update)):void 0},250),this.timeout=setTimeout(this._refresh,this.delay)},Counters.prototype._update=function(data){var badge,count,link,token,type,_results;if(!data||""===data)return clearTimeout(this.timeout);$(document).trigger("ajax:automatic-control"),data.csrf_token&&(token=data.csrf_token,$('meta[name="csrf-token"]').attr("content",token),$("input[name='"+csrf.param+"']").val(token),delete data.csrf_token,"undefined"!=typeof refreshCSRF&&null!==refreshCSRF&&refreshCSRF()),_results=[];for(type in data)count=data[type],badge=$(".badge[data-type='"+type+"']"),link=badge.closest("a.badge-link"),0===link.length&&(link=badge),0===count?(badge.text(""),_results.push(link.addClass("none"))):(badge.text(count),_results.push(link.removeClass("none")));return _results},Counters}(),new Counters}.call(this),function(){this.CreditCard={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};CreditCard.Form=function(){function Form(){this._showForm=__bind(this._showForm,this),this._selectCard=__bind(this._selectCard,this),this._disableFields=__bind(this._disableFields,this),this.assignElements(),this.observeElements(),this._selectDefaultCard(),this._disableFields(),this.formContainer.hasClass("via-ajax")&&setTimeout(this._disableFields,100)}return Form.prototype.assignElements=function(){return this.cardsContainer=$(".credit-cards"),this.formContainer=$(".credit-card-form"),this.creditCards=this.cardsContainer.find(".credit-card"),this.addCardButton=this.cardsContainer.find(".add-credit-card"),this.selectedCardField=this.cardsContainer.find("#credit_card_id"),this.isCheckout=this.cardsContainer.hasClass("for-checkout")},Form.prototype.observeElements=function(){return this.isCheckout&&this.creditCards.on("click",this._selectCard),this.addCardButton.on("click",this._showForm)},Form.prototype._disableFields=function(){return this.formContainer.is(":visible")?(this.formContainer.find("input,select,textarea").enable(),this.formContainer.find("#credit_card_country").change(),this.selectedCardField.disable()):(this.formContainer.find("input,select,textarea").disable(),this.formContainer.find("#credit_card_country").change())},Form.prototype._selectDefaultCard=function(){var id;if(this.isCheckout)return id=this.selectedCardField.val(),null==id||id.blank()?void 0:this.creditCards.filter("[data-id="+id+"]").addClass("is-selected")},Form.prototype._selectCard=function(event){var target;return this.creditCards.removeClass("is-selected"),target=$(event.currentTarget),target.addClass("is-selected"),this.selectedCardField.val(target.data("id"))},Form.prototype._showForm=function(){return this.formContainer.find("input,select,textarea").enable(),this.formContainer.find("#credit_card_country").change(),this.selectedCardField.disable(),this.cardsContainer.hide(),this.formContainer.show()},Form}()}.call(this),function(){null==this.CustomFields&&(this.CustomFields={})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};CustomFields.Conditions=function(){function Conditions(form){this.form=form,this._determineVisibility=__bind(this._determineVisibility,this),this.assignElements(),this.assignConditions(),this.assignObservers()}return Conditions.prototype.assignElements=function(){return this.element=this.form.element,this.namespace=this.form.details.label,this.namespace={lead:"property",project:"property"}[this.namespace]||this.namespace,this.config=this.form.details.conditionConfigurations.conditions.configuration[this.namespace]},Conditions.prototype.assignConditions=function(){var condition,conditions,e,element,_base,_i,_len,_name,_ref,_results;for(this.conditions={},_ref=this.element.find("[data-condition]"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],element=$(e),condition=element.data("condition"),condition.element=element,null==(_base=this.conditions)[_name=condition.target]&&(_base[_name]=[]),conditions=this.conditions[condition.target],_results.push(conditions.push(condition));return _results},Conditions.prototype.assignObservers=function(){return this.element.on("change","select,input:text,textarea",this._determineVisibility),this.element.on("click","input:checkbox",this._determineVisibility)},Conditions.prototype._determineMatch=function(fieldValue,condition){return this._matches(fieldValue,condition)?condition.element.show():condition.element.hide()},Conditions.prototype._determineVisibility=function(event){var condition,conditions,field,target,value,_ref,_results;field=$(event.currentTarget),_ref=this.conditions,_results=[];for(target in _ref)conditions=_ref[target],field.is(this._selector(target))?(value=field.val(),_results.push(function(){var _i,_len,_results1;for(_results1=[],_i=0,_len=conditions.length;_len>_i;_i++)condition=conditions[_i],_results1.push(this._determineMatch(value,condition));return _results1}.call(this))):_results.push(void 0);return _results},Conditions.prototype._matches=function(value,condition){var target,type,values;return target=condition.target,type=this._type(target),values=[value],"multitext"===type&&(values=this.element.find(this._selector(taret)).map(function(){return $(this).val()}).toArray()),values=values.map(function(v){return"checkbox"!==type?v.strip():void 0}),this["_match"+type.capitalize()](values,condition.operator,condition.value)},Conditions.prototype._selector=function(target){var type;return type=this._type(target),'[name="'+this.namespace+"["+target+("multitext"===type?"][":"")+']"]'},Conditions.prototype._type=function(target){var type;return type=this.config[target],$.isArray(type)&&(type=type.first()),type},Conditions.prototype._matchCheckbox=function(values,operator){var checked;return checked=values.include("1"),"is"===operator?checked:"is not"===operator?!checked:void 0},Conditions.prototype._matchDate=function(values,operator,value){var d,date,dates,v,_i,_len;for(date=new Date(Date.parse(value)),dates=[],_i=0,_len=values.length;_len>_i;_i++)v=values[_i],d=new Date(Date.parse(v)),"Invalid Date"!==d&&dates.push(d);return"Invalid Date"!==date&&dates.any()?"="===operator?!!dates.detect(function(d){return d.valueOf()===date.valueOf()}):"before"===operator?!!dates.detect(function(d){return date>d}):"after"===operator?!!dates.detect(function(d){return d>=date}):void 0:!1},Conditions.prototype._matchMultitext=function(values,operator,value){return this._matchText(values,operator,value)},Conditions.prototype._matchNumeric=function(values,operator,value){var included,number,numbers,_number;return _number=function(v){return parseFloat(v.replace(/[^\d.-]/g,""))},number=_number(value),numbers=values.map(_number),included=numbers.include(number),"="===operator?included:"!="===operator?!included:">"===operator?!!numbers.detect(function(n){return n>number}):"<"===operator?!!numbers.detect(function(n){return number>n}):">="===operator?!!numbers.detect(function(n){return n>=number}):"<="===operator?!!numbers.detect(function(n){return number>=n}):void 0},Conditions.prototype._matchSelect=function(values,operator,value){var content,included;return included=values.include(value),"is"===operator?included:"is not"===operator?!included:"contains"===operator?(content=values.map(function(v){return v.toLowerCase()}).join(" "),!!content.match(value.toLowerCase())):void 0},Conditions.prototype._matchText=function(values,operator,value){var content,lowercase;return lowercase=values.map(function(v){return v.toLowerCase()}),"="===operator?values.include(value)||lowercase.include(value.toLowerCase()):"is blank"===operator?(values=values.uniq(),1===values.length&&values.first().blank()):"contains"===operator?(content=lowercase.join(" "),!!content.match(value.toLowerCase())):void 0},Conditions}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};CustomFields.Editor=function(){function Editor(element,templates,extensions){this.element=element,this.templates=templates,this._switchTabs=__bind(this._switchTabs,this),this._submit=__bind(this._submit,this),this._saveField=__bind(this._saveField,this),this._restoreField=__bind(this._restoreField,this),this._renderUpdatedSections=__bind(this._renderUpdatedSections,this),this._removeSection=__bind(this._removeSection,this),this._removeNewField=__bind(this._removeNewField,this),this._removeField=__bind(this._removeField,this),this._editSection=__bind(this._editSection,this),this._editField=__bind(this._editField,this),this._editConditions=__bind(this._editConditions,this),this._cancelEditing=__bind(this._cancelEditing,this),this._addSection=__bind(this._addSection,this),this._addField=__bind(this._addField,this),$.extend(this,extensions),this.assignElements(),this.observeElements(),this._addConditions()}return Editor.prototype.assignElements=function(){return this.form=this.element.find("form"),this.placeholder=this.element.find(".form-section.placeholder"),this.submit=this.element.find(".custom-fields-setup-header .action-button"),this.overlay=new Overlay("#custom-field-overlay",{onHide:this._removeNewField})},Editor.prototype.observeElements=function(){return this.element.on("click",".add-custom-section",this._addSection),this.element.on("click",".add-custom-field",this._addField),this.element.on("click",".form-section-controls .edit-button",this._editSection),this.element.on("click",".form-section-controls .remove-button",this._removeSection),this.element.on("click",".field .edit-button",this._editField),this.element.on("click",".field .remove-button",this._removeField),this.overlay.wrapper.on("click",".save-button",this._saveField),this.overlay.wrapper.on("click",".cancel-button",this._cancelEditing),this.overlay.wrapper.on("click",".add-condition",this._editConditions),this.overlay.wrapper.on("click",".tabs a",this._switchTabs),this.overlay.wrapper.on("click",".restore-field",this._restoreField),this.submit.on("click",this._submit),this.element.sortable({items:".form-section",handle:".form-section-controls .drag-handle",tolerance:"pointer",axis:"y"}),this.form.sortable({items:".field",handle:".drag-handle",tolerance:"pointer",beforeStop:function(event,ui){return ui.helper.closest(".form-section.locked").exists()?event.stop():void 0
}})},Editor.prototype._addConditions=function(){var attributes,condition,content,e,field,section,_i,_j,_len,_len1,_ref,_ref1,_results;for(_ref=this.element.find(".form-section[data-section-type]"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],section=$(e),attributes={id:section.data("id"),objectType:"section"},condition=section.data("condition"),condition&&$.extend(attributes,condition),content=this.templates.condition.evaluate(attributes),section.find(".conditions").replaceWith(content),section.find(".conditions").attr("data-condition",section.attr("data-condition"));for(_ref1=this.element.find(".field.editable"),_results=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)e=_ref1[_j],field=$(e),attributes={id:field.data("id"),objectType:"field"},condition=field.data("condition"),condition&&$.extend(attributes,condition),content=this.templates.condition.evaluate(attributes),field.find(".conditions").replaceWith(content),_results.push(field.find(".conditions").attr("data-condition",field.attr("data-condition")));return _results},Editor.prototype._addField=function(event){var attributes,content,field,id,trigger;return event.stop(),this.newField=!0,trigger=$(event.target),id=uniqueId(),field=this.templates.field.evaluate({id:id}),field=field.replace(/cf\|0/gi,"cf|"+id),field=field.replace(/custom_field_0/g,"custom_field_"+id),trigger.before(field),field=trigger.prev(".field"),attributes={id:id,objectType:"field"},content=this.templates.condition.evaluate(attributes),field.find(".conditions").replaceWith(content),field.find(".form-content").find("input:text").first().val(""),field.find(".edit-button").click()},Editor.prototype._addSection=function(event){var attributes,content,lastSection,section;return event.stop(),lastSection=$(event.target).closest(".form-section"),section=$(this.templates.section.evaluate({id:uniqueId()})),lastSection.before(section),attributes={id:section.data("id"),objectType:"section"},content=this.templates.condition.evaluate(attributes),section.find(".conditions").replaceWith(content)},Editor.prototype._cancelEditing=function(event){return event.stop(),this.overlay.hide(),this.overlay.wrapper.find(".overlay-content").empty()},Editor.prototype._editConditions=function(event){return event.stop(),new CustomFields.Editor.ConditionEditor($(event.target),this.conditions)},Editor.prototype._editField=function(event){var content,field,form;return event.stop(),field=$(event.target).closest(".field.editable"),form=field.find(".form-content").clone().show(),content=this.overlay.wrapper.find(".overlay-content"),content.empty().append(form),content.find("select").first().change(),field.data("condition")&&this._editConditions({target:form.find("a.add-condition"),stop:function(){}}),this.overlay.show()},Editor.prototype._editSection=function(event){var content,form,section;return event.stop(),section=$(event.target).closest(".form-section"),form=section.find(".section-form-content").clone().show(),content=this.overlay.wrapper.find(".overlay-content"),content.empty().append(form),section.data("condition")&&this._editConditions({target:form.find("a.add-condition"),stop:function(){}}),this.overlay.show()},Editor.prototype._removeField=function(event){return event.stop(),confirm("Are you sure you want to remove this field?")?$(event.target).closest(".field").remove():void 0},Editor.prototype._removeNewField=function(){var content;if(this.newField&&!this.saving)return content=this.overlay.wrapper.find(".form-content"),this.element.find("#"+content.attr("for")).remove(),this.newField=!1},Editor.prototype._removeSection=function(event){return event.stop(),confirm("Are you sure you want to remove this section?")?$(event.target).closest(".form-section").remove():void 0},Editor.prototype._renderUpdatedSections=function(html){var allSections,e,existingSection,newSection,position,_i,_len,_ref;for(allSections=this.element.find(".form-section:not(.placeholder)"),_ref=$(html),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],newSection=$(e),position=newSection.data("position"),existingSection=$(allSections[position]),existingSection.replaceWith(newSection);return this._addConditions(),$.uniform(),this.submitting=!1},Editor.prototype._restoreField=function(event){var content,element,fieldName,forField;return event.stop(),content=this.overlay.wrapper.find(".form-content"),fieldName=this.overlay.wrapper.find("select[name=restore]").val(),fieldName.blank()?void 0:(this.saving=!0,this.overlay.hide(),content.hide(),forField=content.attr("for"),element=this.element.find("#"+forField),element.find(".form-content[for='"+forField+"']").remove(),element.attr("data-name",fieldName),this._submit(event))},Editor.prototype._saveField=function(event){var content,element,forField,label;return event.stop(),content=this.overlay.wrapper.find(".form-content"),label=content.find("input.custom-field-label").first(),label.exists()&&label.val().blank()?void 0:(this.saving=!0,this.overlay.hide(),content.hide(),forField=content.attr("for"),element=this.element.find("#"+forField),element.find(".form-content[for='"+forField+"']").replaceWith(content),this._submit(event))},Editor.prototype._submit=function(event){return event.stop(),this.submitting?void 0:(this.submitting=!0,this._updateFields(),$.ajax({url:this.form.attr("action"),type:"put",message:"Saving",data:this.form.serialize()}).done(this._renderUpdatedSections))},Editor.prototype._switchTabs=function(event){var tab,tabSections;return event.preventDefault(),tab=$(event.target),this.overlay.wrapper.find(".tabs a").removeClass("is-active"),tab.addClass("is-active"),tabSections=this.overlay.wrapper.find(".tab-section").hide(),tabSections.filter("[data-tab="+tab.data("tab-target")+"]").show(),$.uniform()},Editor.prototype._updateFields=function(){var e,field,input,name,names,section,side,_i,_len,_ref,_results;for(names=[],_ref=["left","right"],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)side=_ref[_i],_results.push(function(){var _j,_len1,_ref1,_results1;for(_ref1=this.element.find("."+side+" .field[data-name]"),_results1=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)e=_ref1[_j],field=$(e),section=field.closest(".form-section"),name=field.data("name"),names.include(name)?_results1.push(void 0):(names.push(name),input=$("<input>").attr({type:"hidden",value:name}),input.attr("name","custom_fields[section_fields]["+section.data("id")+"]["+side+"][]"),_results1.push(field.append(input)));return _results1}.call(this));return _results},Editor}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};CustomFields.Editor.ConditionEditor=function(){function ConditionEditor(originalTrigger,data){this.originalTrigger=originalTrigger,this.data=data,this._updateValueFields=__bind(this._updateValueFields,this),this._updateOperators=__bind(this._updateOperators,this),this._removeCondition=__bind(this._removeCondition,this),this.assignElements(),this.observeElements(),this.originalTrigger.hide(),this.element.show(),this._prepareInputs(),this._showCondition()}return ConditionEditor.prototype.assignElements=function(){return this.element=this.originalTrigger.next(".conditions"),this.config=this.data.configuration[this.element.data("section-type")],this.condition=this.element.data("condition"),this.inputs={target:this.element.find("select.target-field"),operator:this.element.find("select.operator-field"),text:this.element.find("input.text-field"),date:this.element.find("input.date-field"),checkbox:this.element.find(".checkbox-field"),select:this.element.find("select.select-field")},this.inputs.operator.closest(".selector").attr("id","uniform-"+this.inputs.operator.attr("id"))},ConditionEditor.prototype.observeElements=function(){return this.inputs.target.on("change",this._updateOperators),this.inputs.target.on("change",this._updateValueFields),this.element.on("click",".remove-condition",this._removeCondition)},ConditionEditor.prototype._hideAndDisableValueInputs=function(){return this.inputs.text.disable().hide(),this.inputs.date.disable().closest(".date").hide(),this.inputs.checkbox.hide(),this.inputs.select.disable().closest(".selector").hide()},ConditionEditor.prototype._prepareInputs=function(){return this.inputs.target.enable(),this.inputs.operator.enable(),this._hideAndDisableValueInputs(),this._prepareTargetInput()},ConditionEditor.prototype._prepareTargetInput=function(){var attribute,choice,options,titles,_i,_len,_ref;for(choice=null,options="",titles={fha:"FHA",va:"VA",hvac:"HVAC",hoa:"HOA / Maintenance",lao:"Lowest Acceptable",listing_price:"List Price",pt_current:"P/T Current?",price_flexible:"Flexible?",listing_agent_name:"Agent Name",listing_agent_phone:"Agent Phone",listing_agent_email:"Agent Email",email_collection:"Email",phone_collection:"Phone",fax_collection:"Fax"},_ref=this._targetAttributes(),_i=0,_len=_ref.length;_len>_i;_i++)attribute=_ref[_i],options+='<option value="'+attribute+'">'+(titles[attribute]||attribute.titleize())+"</option>",choice||(choice=attribute);return this.inputs.target.html(options),this.inputs.target.val(choice).change(),this._updateOperators(),this._updateValueFields()},ConditionEditor.prototype._removeCondition=function(event){return event.stop(),this.element.hide(),this.originalTrigger.show(),this.element.find("input:hidden").disable(),this.inputs.target.disable(),this.inputs.operator.disable(),this._hideAndDisableValueInputs()},ConditionEditor.prototype._showCondition=function(){var data,target,value;if(this.condition)return target=this.condition.target,value=this.condition.value,this.inputs.target.val(this.condition.target).change(),this._updateOperators(),this._updateValueFields(),this.inputs.operator.val(this.condition.operator).change(),data=this.config[target],$.isArray(data)?this.inputs.select.val(value).change():("date"===data&&this.inputs.date.val(value),["text","multitext","numeric"].include(data)?this.inputs.text.val(value):void 0)},ConditionEditor.prototype._targetAttributes=function(){var a,attributes,type,_ref;if(this.targetAttributes)return this.targetAttributes;attributes=[],_ref=this.config;for(a in _ref)type=_ref[a],attributes.push(a);return this.targetAttributes=attributes.sort(),this.targetAttributes},ConditionEditor.prototype._updateChoicesInSelect=function(choices,select){var choice,label,options,value,_i,_len;for(options=[],_i=0,_len=choices.length;_len>_i;_i++)choice=choices[_i],label=choice,value={"":"!=","":">","":"<","":">=","":"<="}[choice]||choice,"true"===label&&(label="Yes"),"false"===label&&(label="No"),options.push('<option value="'+value+'">'+label+"</option>");return select.html(options.join("")),select.val(choices[0]).change()},ConditionEditor.prototype._updateOperators=function(){var attribute,data,operators,type;return attribute=this.inputs.target.val(),data=this.config[attribute],type=$.isArray(data)?data[0]:data,operators=this.data.operators[type],this._updateChoicesInSelect(operators,this.inputs.operator)},ConditionEditor.prototype._updateValueFields=function(){var attribute,data;return this._hideAndDisableValueInputs(),attribute=this.inputs.target.val(),data=this.config[attribute],$.isArray(data)?(this._updateChoicesInSelect(data.last(),this.inputs.select),this.inputs.select.enable().closest(".selector").show()):(["text","multitext","numeric"].include(data)&&this.inputs.text.enable().show(),"date"===data&&this.inputs.date.enable().closest(".date").show(),"checkbox"===data?this.inputs.checkbox.show():void 0)},ConditionEditor}()}.call(this),function(){CustomFields.MultiTextbox=function(){function MultiTextbox(){$(document).on("click",".multi-textbox-field a.add",this._addRow),$(document).on("click",".multi-textbox-field a.remove",this._removeRow)}return MultiTextbox.prototype._addRow=function(event){var newRow,row,trigger;return event.stop(),trigger=$(event.target),row=trigger.closest(".row"),newRow=row.clone(),row.after(newRow),newRow.find("input").val("").focus()},MultiTextbox.prototype._removeRow=function(event){var container,row,trigger;return event.stop(),trigger=$(event.target),container=trigger.closest(".multi-textbox-field"),row=trigger.closest(".row"),1===container.find(".row").length?row.find("input").val("").focus():row.remove()},MultiTextbox}(),new CustomFields.MultiTextbox}.call(this),function(){null==this.Details&&(this.Details={})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Details.MultipleValueFields=function(){function MultipleValueFields(element){this.element=element,this._determineRowAction=__bind(this._determineRowAction,this),this.element.on("click",".linked-record__button",this._determineRowAction)}return MultipleValueFields.prototype._determineRowAction=function(event){var currentRow,e,element,field,match,n,name,newId,newName,newRow,row,target,_i,_len,_ref;if(event.stop(),target=$(event.currentTarget),currentRow=target.parents(".linked-record__row"),field=currentRow.closest(".linked-record__rowset"),row=field.find(".linked-record__row").last(),target.hasClass("remove"))return row.remove();if(newRow=row.clone(),name=newRow.find("input:text").val("").attr("name"),match=name.match(/\[phone_numbers\]\[(\d+)\]/))for(n=parseInt(match[1]),_ref=newRow.find("[name*='[phone_numbers]["+n+"]']"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],element=$(e),newName=element.attr("name").replace("[phone_numbers]["+n+"]","[phone_numbers]["+(n+1)+"]"),newId=element.attr("id").replace(""+n,""+(n+1)),element.attr({name:newName,id:newId});return newRow.find(".linked-record__button").addClass("remove"),newRow.insertAfter(row)},MultipleValueFields}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};null==this.DirectMail&&(this.DirectMail={}),null==DirectMail.Campaign&&(DirectMail.Campaign={}),DirectMail.Campaign.Show=function(){function Show(selector){this.selector=selector,this._checkNextAvailableGeneratingLetter=__bind(this._checkNextAvailableGeneratingLetter,this),"test"!==environment&&(this.containers=[],this.interval=setInterval(this._checkNextAvailableGeneratingLetter,5e3))}return Show.prototype._checkNextAvailableGeneratingLetter=function(){return this.containers.any()||(this.containers=$(".generating").toArray()),this.containers.any()?this._checkLetterStatus($(this.containers.shift())):clearInterval(this.interval)},Show.prototype._checkLetterStatus=function(container){var _this=this;return document.hideLoader=!0,$.ajax({url:container.data("url"),type:"get",message:"no-message",dataType:"text html",contentType:!1,processData:!1}).done(function(html){return!html.blank()&&container.exists()?container.closest(_this.selector).replaceWith(html):void 0}),document.hideLoader=!1},Show}()}.call(this),function(){var _base,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};null==this.DirectMail&&(this.DirectMail={}),null==DirectMail.Campaign&&(DirectMail.Campaign={}),null==(_base=DirectMail.Campaign).Wizard&&(_base.Wizard={}),DirectMail.Campaign.Wizard.Preview=function(){function Preview(selector){this._generatePreview=__bind(this._generatePreview,this),this._displayPreview=__bind(this._displayPreview,this),this.element=$(selector),this.url=this.element.data("url"),this.form=this.element.closest("form"),setTimeout(this._generatePreview,100)}return Preview.prototype._displayPreview=function(html){return this.element.html(html)},Preview.prototype._generatePreview=function(){return"test"!==environment?$.ajax({url:this.url,type:"post",data:new FormData(this.form[0]),message:"Generating preview",cache:!1,contentType:!1,processData:!1}).done(this._displayPreview):void 0},Preview}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.Domains={},Domains.List=function(){function List(){this._remove=__bind(this._remove,this),this.container=$(".account__container"),this.container.exists()||(this.container=$(".objects")),this.selectors={anchor:"a.remove-button",object:".domain"},this.container.is(".objects")&&(this.selectors={anchor:"a.remove",object:".website-object"}),this.container.on("ajax:success",this.selectors.anchor,this._remove)}return List.prototype._remove=function(event){var target;return target=$(event.target).closest(this.selectors.object),target.remove(),this.container.find(this.selectors.object).exists()?void 0:pjax.reload()},List}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Domains.Edit=function(){function Edit(){this._removeRecord=__bind(this._removeRecord,this),$(".account__dns-container").on("ajax:success","a.remove-button",this._removeRecord)}return Edit.prototype._removeRecord=function(event){var target;return target=$(event.target),target.closest(".account__dns-record").remove()},Edit}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Domains.Form=function(){function Form(){this._updateTlds=__bind(this._updateTlds,this),this.form=$(".domain__form form"),this.form.on("change","input:radio",this._updateTlds)}return Form.prototype._updateTlds=function(event){var options,radio,select,submit,suffix,tld,tldValues,_i,_len;for(radio=$(event.target).closest(".radio-field"),select=this.form.find("select"),submit=this.form.find("input[type=submit]"),tldValues=radio.data("values"),suffix=select.val(),tldValues.include(suffix.replace(/^\./,""))||(suffix=".com"),options="",_i=0,_len=tldValues.length;_len>_i;_i++)tld=tldValues[_i],options+="<option value='."+tld+"'>."+tld+"</option>";return select.html(options).val(suffix).change(),submit.val(radio.data("button-text"))},Form}()}.call(this),function(){this.Forms={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Forms.Editor=function(){function Editor(){this._select=__bind(this._select,this),this.deselect=__bind(this.deselect,this),this.assignElements(),this.observeElements()}return Editor.prototype.assignElements=function(){return this.element=$(".webform-editor"),this.webform=this.element.find(".fs-webform"),this.current=null,this.menu=new Forms.Editor.Menu(this),this.toolbar=new Forms.Editor.Toolbar(this)},Editor.prototype.deselect=function(){return this.webform.find(".selected").removeClass("selected"),this.current=null},Editor.prototype.enableContentEditing=function(){return this.webform.find("label,button,.fs-webform__text-content").attr("contenteditable","true"),this.fixChromeSpace()},Editor.prototype.fixChromeSpace=function(){return window.chrome&&window.chrome.webstore?this.webform.find("button").on("keypress",function(e){var newText,offset,range,selection,text;if(32===e.keyCode)return selection=window.getSelection(),range=selection.getRangeAt(0),offset=range.startOffset,range.deleteContents(),selection.removeAllRanges(),text=e.target.childNodes[0].nodeValue,newText=text.substr(0,offset)+" "+text.substr(offset),e.target.childNodes[0].nodeValue=newText,range=document.createRange(),range.setStart(e.target.childNodes[0],offset+1),selection.addRange(range)}):void 0},Editor.prototype.getOverlay=function(name){return this.element.find(".overlay.for-"+name).removeClass("is-loading").hide()},Editor.prototype.html=function(){var container;return container=this.element.find(".webform-preview").clone(),container.find(".fs-webform__toolbar").remove(),container.find("[contenteditable]").removeAttr("contenteditable"),container.find(".editor-hover").removeClass("editor-hover"),container.find(".ui-sortable").removeClass("ui-sortable"),container.find(".fs-webform__errors").html("").addClass("fs-webform__errors-hidden"),container.html()},Editor.prototype.observeElements=function(){return this.element.on("click",".fs-webform__section",this._select),this.element.find("form").on("submit",function(e){return e.stop()}),this.webform.on("click","label,button",function(e){return e.preventDefault()}),this.element.find(".fs-webform").sortable({items:".fs-webform__section",handle:".handle",axis:"y",tolerance:"pointer",start:function(event,ui){return ui.item.trigger("click")}}),this.enableContentEditing()},Editor.prototype._select=function(event){var element;return element=$(event.target).closest(".fs-webform__section"),this.element.find(".selected").removeClass("selected"),element.addClass("selected"),this.current=element,this.menu.show(element)},Editor}()}.call(this),function(){Forms.Editor.Menu=function(){function Menu(editor){var _this=this;this.editor=editor,this.assignElements(),this.observeElements(),$(function(){return"test"===environment&&_this.elements.main.trigger("activate"),_this.showMenuSections(_this.elements.main,_this.editor.element)})}return Menu.prototype.assignElements=function(){var _this=this;return this.elements={main:$('[data-menu-for="object"]'),field:$('[data-menu-for="editor-field"]')},this.form=this.elements.main.find("form"),this.helpers=["save","add","remove","back","custom-css","requirement","submit-styles","form-styles","field-styles","error-styles","instruction-styles","colorpicker","label-text"].map(function(n){return new(Forms.Editor.Menu.Helper[n.camelCase().capitalize()])(_this)})},Menu.prototype.observeElements=function(){var object,_i,_len,_ref,_results;for(_ref=this.helpers,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)object=_ref[_i],_results.push(object.observeElements());return _results},Menu.prototype.show=function(element){var helper,menu,_i,_len,_ref;for(_ref=this.helpers,_i=0,_len=_ref.length;_len>_i;_i++)helper=_ref[_i],helper.deactivate();return menu=this.elements.field,this.showMenuSections(menu,element),menu.trigger("activate")},Menu.prototype.showMenuSections=function(menu,field){var e,fieldType,helper,regex,section,sections,_i,_len,_results;for(sections=menu.find(".design-section").hide(),fieldType=field.data("type"),_results=[],_i=0,_len=sections.length;_len>_i;_i++)e=sections[_i],section=$(e),regex=new RegExp(section.data("matches")),fieldType.match(regex)?(section.show(),_results.push(function(){var _j,_len1,_ref,_results1;for(_ref=this.helpers,_results1=[],_j=0,_len1=_ref.length;_len1>_j;_j++)helper=_ref[_j],helper.applicableTo(section)?_results1.push(helper.applyTo(field)):_results1.push(void 0);return _results1}.call(this))):_results.push(void 0);return _results},Menu}()}.call(this),function(){Forms.Editor.Menu.Helper=function(){function Helper(menu){this.menu=menu,this.editor=this.menu.editor,this.elements=this.menu.elements,this.form=this.menu.form,this.webform=this.editor.webform,this.toolbar=this.editor.toolbar,this.assignElements()}return Helper.prototype.applicableTo=function(){return!1},Helper.prototype.applyTo=function(){},Helper.prototype.assignElements=function(){},Helper.prototype.deactivate=function(){},Helper.prototype.observeElements=function(){},Helper}()}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.Styles=function(_super){function Styles(){return _ref=Styles.__super__.constructor.apply(this,arguments)}return __extends(Styles,_super),Styles.prototype.namespace="",Styles.prototype.types=[],Styles.prototype.applicableTo=function(menuSection){var type,_i,_len,_ref1;for(_ref1=this.types,_i=0,_len=_ref1.length;_len>_i;_i++)if(type=_ref1[_i],menuSection.find("input#"+this.namespace+"_"+type+"_color").exists())return!0},Styles.prototype.applyTo=function(element){var color,type,_i,_len,_ref1,_results;for(_ref1=this.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],color=this._elementForStyle(element,type).css(this._styleForType(type)),"rgba(0, 0, 0, 0)"===color&&(color=""),_results.push(this[type].input.val(color));return _results},Styles.prototype.assignElements=function(){var input,type,_i,_len,_ref1,_results;for(_ref1=this.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],input=this._menuElement().find("input#"+this.namespace+"_"+type+"_color"),input.length>0||(input=this._menuElement().find("input#"+this.namespace+"_"+type)),_results.push(this[type]={input:input});return _results},Styles.prototype.observeElements=function(){var type,_i,_len,_ref1,_results;for(_ref1=this.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],this._enableColorPickerForType(type)&&this[type].input.colorpicker(),_results.push(this[type].input.on("change",this._render(type)));return _results},Styles.prototype._baseElement=function(){throw"Not Implemented"},Styles.prototype._elementForStyle=function(){throw"Not Implemented"},Styles.prototype._enableColorPickerForType=function(){return!0},Styles.prototype._focusColorInput=function(type){var _this=this;return function(type){return function(){return _this[type].input.focus()}}(type)},Styles.prototype._menuElement=function(){return this.elements.field},Styles.prototype._render=function(type){var _this=this;return function(type){return function(e){return _this._elementForStyle(_this._baseElement(),type).css(_this._styleForType(type),_this._valueForType(type,e))}}(type)},Styles.prototype._styleForType=function(){throw"Not Implemented"},Styles.prototype._valueForType=function(type,e){return e.target.value},Styles}(Forms.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.Add=function(_super){function Add(){return this._showOverlay=__bind(this._showOverlay,this),this._showFieldForm=__bind(this._showFieldForm,this),this._hideOverlay=__bind(this._hideOverlay,this),this._addSubmit=__bind(this._addSubmit,this),this._addInstructions=__bind(this._addInstructions,this),this._addField=__bind(this._addField,this),_ref=Add.__super__.constructor.apply(this,arguments)}return __extends(Add,_super),Add.prototype.assignElements=function(){return this.overlay=this.editor.getOverlay("field"),this.sectionOptions=this.overlay.find(".webform__section-options"),this.fieldForm=this.overlay.find(".webform__field-form")},Add.prototype.observeElements=function(){return this.overlay.on("click",".add-field",this._addField),this.overlay.on("click",".add-submit",this._addSubmit),this.overlay.on("click",".add-instructions",this._addInstructions),this.overlay.on("click",".show-field-form",this._showFieldForm),this.overlay.on("click",".overlay-close",this._hideOverlay),this.elements.field.on("click","a.add",this._showOverlay),this.elements.main.on("click","a.add",this._showOverlay)},Add.prototype._addElement=function(newElement,event){var currentField;return this._hideOverlay(event),currentField=this._currentField(),currentField.exists()?currentField.after(newElement):this.webform.find("form").append(newElement),newElement.trigger("click"),this.editor.enableContentEditing()},Add.prototype._addField=function(event){var field,select,selection;return select=this.overlay.find("select"),selection=select.val(),selection.blank()?event.stop():(field=this.overlay.find(".templates .fs-webform__section[data-field-name='"+selection+"']"),this._addElement($(field[0].outerHTML),event),select.val("").change())},Add.prototype._addInstructions=function(event){var submit;return submit=this.overlay.find(".templates .fs-webform__section[data-field-name='instructions']"),this._addElement($(submit[0].outerHTML),event)},Add.prototype._addSubmit=function(event){var submit;return submit=this.overlay.find(".templates .fs-webform__section[data-field-name='submit']"),this._addElement($(submit[0].outerHTML),event)},Add.prototype._currentField=function(){return null!=this.editor.current?this.editor.current:this.editor.element.find(".webform-preview .fs-webform__field").last()},Add.prototype._hideOverlay=function(event){return event.stop(),this.overlay.hide(),this.fieldForm.hide(),this.sectionOptions.show()},Add.prototype._showFieldForm=function(event){return event.stop(),this.fieldForm.show(),this.sectionOptions.hide()},Add.prototype._showOverlay=function(event){return event.stop(),this.overlay.show()},Add}(Forms.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.Back=function(_super){function Back(){return _ref=Back.__super__.constructor.apply(this,arguments)}return __extends(Back,_super),Back.prototype.observeElements=function(){return this.elements.field.on("click","a.back-link",this.editor.deselect)},Back}(Forms.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.Colorpicker=function(_super){function Colorpicker(){return _ref=Colorpicker.__super__.constructor.apply(this,arguments)}return __extends(Colorpicker,_super),Colorpicker.prototype.applicableTo=function(){return!0},Colorpicker.prototype.applyTo=function(){return $(document).trigger("colorpicker:hide"),this._updatePreviews()},Colorpicker.prototype.assignElements=function(){return this.container=$(".main-menu"),this.colorInputs=this.container.find(".color-input"),this.colorPreviews=this.container.find(".color-preview")},Colorpicker.prototype.observeElements=function(){return this.colorInputs.colorpicker(),this.colorInputs.on("keydown",this._triggerChange),this.colorInputs.on("change",this._setPreview),this.colorPreviews.on("click",this._selectInput)},Colorpicker.prototype._selectInput=function(e){return $(e.target).prev(".color-input").focus()},Colorpicker.prototype._setPreview=function(e){var input,preview;return input=$(e.target),preview=input.next(".color-preview"),preview.css("background-color",input.val())},Colorpicker.prototype._triggerChange=function(e){return 13===e.keyCode?$(e.target).trigger("change"):void 0},Colorpicker.prototype._updatePreviews=function(){var _this=this;return this.colorInputs.each(function(i,el){return _this._setPreview({target:el})})},Colorpicker}(Forms.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.CustomCss=function(_super){function CustomCss(){return this._updateStyles=__bind(this._updateStyles,this),_ref=CustomCss.__super__.constructor.apply(this,arguments)}return __extends(CustomCss,_super),CustomCss.prototype.selector="textarea#form_styles",CustomCss.prototype.applicableTo=function(menuSection){return menuSection.find(this.selector).exists()},CustomCss.prototype.applyTo=function(){return this.elements.main.find(this.selector).val(this.stylesContainer.html())},CustomCss.prototype.assignElements=function(){return this.stylesContainer=this.editor.element.find(".custom-styles")},CustomCss.prototype.observeElements=function(){return this.elements.main.on("keyup input",this.selector,this._updateStyles)},CustomCss.prototype._updateStyles=function(event){var css,styles;return css=$(event.target).val(),styles="<style type='text/css'>\n/*<![CDATA[*/\n"+css+"\n/*]]>*/\n</style>",this.stylesContainer.html(styles)},CustomCss}(Forms.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.ErrorStyles=function(_super){function ErrorStyles(){return this._togglePlaceholder=__bind(this._togglePlaceholder,this),_ref=ErrorStyles.__super__.constructor.apply(this,arguments)}return __extends(ErrorStyles,_super),ErrorStyles.prototype.namespace="error",ErrorStyles.prototype.types=["background","text"],ErrorStyles.prototype.observeElements=function(){return ErrorStyles.__super__.observeElements.call(this),this._menuElement().on("click","#form_show_error",this._togglePlaceholder)
},ErrorStyles.prototype._baseElement=function(){return this.webform},ErrorStyles.prototype._elementForStyle=function(element){return element.find(".fs-webform__errors")},ErrorStyles.prototype._menuElement=function(){return this.elements.main},ErrorStyles.prototype._styleForType=function(type){return{background:"background-color",text:"color"}[type]},ErrorStyles.prototype._togglePlaceholder=function(event){var placeholder;return placeholder=this.webform.find(".fs-webform__errors"),$(event.target).is(":checked")?(placeholder.html("This section is where any form submission errors will be displayed."),placeholder.removeClass("fs-webform__errors-hidden")):(placeholder.html(""),placeholder.addClass("fs-webform__errors-hidden"))},ErrorStyles}(Forms.Editor.Menu.Helper.Styles)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.FieldStyles=function(_super){function FieldStyles(){return _ref=FieldStyles.__super__.constructor.apply(this,arguments)}return __extends(FieldStyles,_super),FieldStyles.prototype.namespace="field",FieldStyles.prototype.types=["label","background","border","text"],FieldStyles.prototype._baseElement=function(){return this.editor.current},FieldStyles.prototype._elementForStyle=function(element,type){return"background"===type?element:"label"===type?element.find("label"):["border","text"].include(type)?element.find("input:not(:hidden),textarea,select"):void 0},FieldStyles.prototype._styleForType=function(type){return{label:"color",background:"background-color",border:"border-color",text:"color"}[type]},FieldStyles}(Forms.Editor.Menu.Helper.Styles)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.FormStyles=function(_super){function FormStyles(){return _ref=FormStyles.__super__.constructor.apply(this,arguments)}return __extends(FormStyles,_super),FormStyles.prototype.namespace="form",FormStyles.prototype.types=["background"],FormStyles.prototype._baseElement=function(){return this.webform},FormStyles.prototype._elementForStyle=function(element){return element},FormStyles.prototype._menuElement=function(){return this.elements.main},FormStyles.prototype._styleForType=function(){return"background-color"},FormStyles}(Forms.Editor.Menu.Helper.Styles)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.InstructionStyles=function(_super){function InstructionStyles(){return _ref=InstructionStyles.__super__.constructor.apply(this,arguments)}return __extends(InstructionStyles,_super),InstructionStyles.prototype.namespace="instruction",InstructionStyles.prototype.types=["background","text"],InstructionStyles.prototype._baseElement=function(){return this.editor.current},InstructionStyles.prototype._elementForStyle=function(element){return element},InstructionStyles.prototype._styleForType=function(type){return{background:"background-color",text:"color"}[type]},InstructionStyles}(Forms.Editor.Menu.Helper.Styles)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.LabelText=function(_super){function LabelText(){return this._updateLabel=__bind(this._updateLabel,this),this._updateInputs=__bind(this._updateInputs,this),_ref=LabelText.__super__.constructor.apply(this,arguments)}return __extends(LabelText,_super),LabelText.prototype.selector=".label-input",LabelText.prototype.applicableTo=function(menuSection){return menuSection.find(this.selector).exists()},LabelText.prototype.applyTo=function(field){var element;return element=this._contentEditableElement(field),this.elements.field.find(this.selector).val(this._convertToInput(element.html()))},LabelText.prototype.assignElements=function(){return this.stylesContainer=this.editor.element.find(".custom-styles")},LabelText.prototype.observeElements=function(){return this.elements.field.on("keyup input",this.selector,this._updateLabel),this.webform.on("keyup","[contenteditable]",this._updateInputs)},LabelText.prototype._contentEditableElement=function(formElement){var selector;return selector={field:"label",instructions:".fs-webform__text-content",submit:"button"}[formElement.data("type")],formElement.find(""+selector+"[contenteditable]")},LabelText.prototype._convertToInput=function(html){var ascii,entity,regex,replacements;if(!html)return"";html=html.replace(/<\/\s*(div|p)>/gi,""),html=html.replace(/<(div|p)><br/gi,"<br"),html=html.replace(/<(div|p)>/gi,"\r\n"),html=html.replace(/<br\s*[\/]*?>/gi,"\r\n"),replacements={"&ndash;":"-","&mdash;":"","&nbsp;":" ","&quot;":'"',"&hellip;":"...","&lt;":"<","&gt;":">","&amp;":"&"};for(entity in replacements)ascii=replacements[entity],regex=new RegExp(entity,"gi"),html=html.replace(regex,ascii);return html},LabelText.prototype._convertFromInput=function(text){return text?(text=text.replace(/\r/g,""),text.replace(/\n/g,"<br/>")):""},LabelText.prototype._updateInputs=function(event){var target;return target=$(event.target).closest("[contenteditable]"),this.elements.field.find(this.selector).val(this._convertToInput(target.html()))},LabelText.prototype._updateLabel=function(event){var input;return input=$(event.target).closest(this.selector),this._contentEditableElement(this.editor.current).html(this._convertFromInput(input.val()))},LabelText}(Forms.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.Remove=function(_super){function Remove(){return this._remove=__bind(this._remove,this),_ref=Remove.__super__.constructor.apply(this,arguments)}return __extends(Remove,_super),Remove.prototype.observeElements=function(){return this.elements.field.on("click","a.remove",this._remove)},Remove.prototype._remove=function(event){var field;return event.stop(),field=this.editor.current,field&&confirm("Are you sure you want to remove this field?")?(field.remove(),this.elements.field.trigger("deactivate"),this.editor.current=null):void 0},Remove}(Forms.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.Requirement=function(_super){function Requirement(){return this._toggleRequirement=__bind(this._toggleRequirement,this),_ref=Requirement.__super__.constructor.apply(this,arguments)}return __extends(Requirement,_super),Requirement.prototype.selector="input#required",Requirement.prototype.applicableTo=function(menuSection){return menuSection.find(this.selector).exists()},Requirement.prototype.applyTo=function(field){return this.elements.field.find(this.selector).check("true"===field.attr("data-required"))},Requirement.prototype.observeElements=function(){return this.elements.field.on("change",this.selector,this._toggleRequirement)},Requirement.prototype._toggleRequirement=function(event){var checkbox,field;return checkbox=$(event.target),field=this.editor.current,checkbox.is(":checked")?field.attr("data-required","true"):field.removeAttr("data-required")},Requirement}(Forms.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.Save=function(_super){function Save(){return this._success=__bind(this._success,this),this._submitForm=__bind(this._submitForm,this),this._submit=__bind(this._submit,this),_ref=Save.__super__.constructor.apply(this,arguments)}return __extends(Save,_super),Save.prototype.assignElements=function(){return this.submitButton=this.editor.element.find(".submit-button")},Save.prototype.observeElements=function(){return this.submitButton.on("click",this._submitForm),this.form.on("submit",this._submit),this.form.on("ajax:success",this._success)},Save.prototype._submit=function(){return this.form.find('input[name*="[content]"]').val(this.editor.html())},Save.prototype._submitForm=function(event){return event.preventDefault(),this.submitButton.addClass("is-loading"),this.form.submit()},Save.prototype._success=function(){return this.submitButton.removeClass("is-loading"),Message.create().flash("Changes saved.")},Save}(Forms.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Forms.Editor.Menu.Helper.SubmitStyles=function(_super){function SubmitStyles(){return _ref=SubmitStyles.__super__.constructor.apply(this,arguments)}return __extends(SubmitStyles,_super),SubmitStyles.prototype.namespace="button",SubmitStyles.prototype.types=["background","button","text","size"],SubmitStyles.prototype.applyTo=function(element){var clone,color,el,size,sizeInPixels,type,_i,_len,_ref1,_results;for(_ref1=this.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],el=this._elementForStyle(element,type),this.pixelsPerEm||(clone=el.clone().hide(),element.append(clone),clone.css({fontSize:"1rem"}),this.pixelsPerEm=parseInt(clone.css("font-size")),clone.remove()),"size"===type?(size=el.css(this._styleForType(type)),sizeInPixels=parseFloat(size),_results.push(this[type].input.val(sizeInPixels/this.pixelsPerEm))):(color=el.css(this._styleForType(type)),"rgba(0, 0, 0, 0)"===color&&(color=""),_results.push(this[type].input.val(color)));return _results},SubmitStyles.prototype._baseElement=function(){return this.editor.current},SubmitStyles.prototype._elementForStyle=function(element,type){return"background"===type?element:["button","text","size"].include(type)?element.find("button"):void 0},SubmitStyles.prototype._enableColorPickerForType=function(type){return"size"===type?!1:!0},SubmitStyles.prototype._styleForType=function(type){return{background:"background-color",button:"background-color",text:"color",size:"font-size"}[type]},SubmitStyles.prototype._valueForType=function(type,e){return"size"===type?""+e.target.value+"rem":e.target.value},SubmitStyles}(Forms.Editor.Menu.Helper.Styles)}.call(this),function(){Forms.Editor.Toolbar=function(){function Toolbar(editor){this.editor=editor,this.assignElements()}return Toolbar.prototype.assignElements=function(){var e,element,_i,_len,_ref,_results;for(this.container=this.editor.element,this.element=this.container.find(".fs-webform__toolbar").first(),_ref=this.container.find(".fs-webform .fs-webform__section"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],element=$(e),element.find(".fs-webform__toolbar").exists()?_results.push(void 0):_results.push(element.prepend(this.element.clone()));return _results},Toolbar}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Forms.Settings=function(){function Settings(){this._useCurrentIP=__bind(this._useCurrentIP,this),this.assignElements(),this.observeElements()}return Settings.prototype.assignElements=function(){var type,_i,_len,_ref,_results;for(this.form=$("#form-settings"),this.types=["success","error","ip-limiting"],_ref=this.types,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)type=_ref[_i],this[type]={container:this.form.find(".grid-section-annotated."+type)},this[type].strategy=this[type].container.find("select"),_results.push(this[type].input=this[type].container.find("input:text"));return _results},Settings.prototype.observeElements=function(){var type,_i,_len,_ref;for(_ref=this.types,_i=0,_len=_ref.length;_len>_i;_i++)type=_ref[_i],this[type].strategy.on("change",this._toggle(type)),this._toggle(type)();return this["ip-limiting"].container.on("click","a[data-ip]",this._useCurrentIP)},Settings.prototype._toggle=function(type){var _this=this;return function(type){return function(){var choices,object;return object=_this[type],choices=object.container.find(".choice"),choices.hide(),choices.filter("[data-toggle='"+object.strategy.val()+"']").show()}}(type)},Settings.prototype._useCurrentIP=function(event){var trigger;return event.stop(),trigger=$(event.target),this["ip-limiting"].input.val(trigger.data("ip"))},Settings}()}.call(this),function(){var CountryToggle,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};CountryToggle=function(){function CountryToggle(select){this.select=select,this._stateChange=__bind(this._stateChange,this),this.name=this.select.attr("name"),this.assignStateElements(),this.toggle()}return CountryToggle.prototype.assignStateElements=function(){return this.select.data("toggle-state")?(this.state=this.select.data("toggle-state"),void 0):(this.state={name:this.name.replace("country","state")},this.state.select=$("select[name='"+this.state.name+"']"),this.state.label=$("label[for='"+this.state.select.attr("id")+"']"),this.state.field=$('<input type="text">').attr({id:this.state.select.attr("id"),name:this.state.select.attr("name"),value:this.state.select.data("initial-value"),tabindex:this.state.select.attr("tabindex")}),this.state.field.val().blank()&&this.state.field.val(this.state.select.val()),this.state.select.is(".no-update")&&this.state.field.addClass("no-update"),this.state.select.closest(".dropdown").exists()?(this.state.wrapper=this.state.select.closest(".dropdown"),this.state.fieldWrapper=$('<div class="input">'),this.state.fieldWrapper.append(this.state.field)):this.state.select.closest(".selector").exists()?(this.state.wrapper=this.state.select.closest(".selector"),this.state.fieldWrapper=this.state.field):(this.state.wrapper=this.state.select,this.state.fieldWrapper=this.state.field),this.state.select.on("change",this._stateChange),this.select.data("toggle-state",this.state))},CountryToggle.prototype.toggle=function(){if("United States"===this.select.val()){if(this.state.wrapper.inDOM())return;return this.state.fieldWrapper.before(this.state.wrapper),this.state.fieldWrapper.detach(),this.state.label.text(this.state.label.text().replace("State / Province","State"))}if(!this.state.fieldWrapper.inDOM())return this.state.wrapper.before(this.state.fieldWrapper),this.state.wrapper.detach(),this.state.label.text(this.state.label.text().replace("State","State / Province"))},CountryToggle.prototype._stateChange=function(event){return this.state.field.val($(event.target).val())},CountryToggle}(),$(document).on("change","select.country-select",function(event){return new CountryToggle($(event.target))}),$(function(){var e,_i,_len,_ref,_results;for(_ref=$("select.country-select"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],_results.push(new CountryToggle($(e)));return _results}),$(document).on("pjax:success",function(){var e,_i,_len,_ref,_results;for(_ref=$("select.country-select"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],_results.push(new CountryToggle($(e)));return _results})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.CountyUpdate=function(){function CountyUpdate(countySelect,stateSelect){this.countySelect=countySelect,this.stateSelect=stateSelect,this._updateCountySelect=__bind(this._updateCountySelect,this),this._updateCountyValues=__bind(this._updateCountyValues,this),this.values={},this.allCounties=$("#counties_by_state"),stateSelect.on("change",this._updateCountySelect),countySelect.on("change",this._updateCountyValues)}return CountyUpdate.prototype._updateCountyValues=function(){var state;return state=this.stateSelect.val(),this.values[state]=this.countySelect.val()},CountyUpdate.prototype._updateCountySelect=function(){var allCounties,optgroup,state;return allCounties=this.allCounties.clone(),state=this.stateSelect.val(),optgroup=allCounties.find('optgroup[label="'+state+'"]'),optgroup.exists()||(optgroup=allCounties.find('optgroup[label="'+state.toLowerCase()+'"]')),this.countySelect.html(""),optgroup.exists()?(this.countySelect.html(optgroup.html()),this.countySelect.prepend(allCounties.find("option")[0]),this.countySelect.val("")):this.countySelect.html(allCounties.find("option").first()),this.countySelect.val(this.values[state]).change()},CountyUpdate}()}.call(this),function(){null==this.Form&&(this.Form={})}.call(this),function(){$(document).on("submit","form[data-remote-file]",function(event){var form,method,methodField;return event.stop(),form=$(event.target),method=form.attr("method"),methodField=form.find('input:hidden[name="_method"]'),methodField.exists()&&(method=methodField.val()),$.ajax(form.attr("action"),{type:method,message:form.data("message")||"Saving",data:new FormData(form[0]),cache:!1,processData:!1,contentType:!1})})}.call(this),function(){null==this.Leads&&(this.Leads={})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Leads.StatusChart=function(){function StatusChart(){this._mouseover=__bind(this._mouseover,this),this._mouseout=__bind(this._mouseout,this),this._click=__bind(this._click,this),this.assignElements(),this.observeElements(),this.createChart()}return StatusChart.prototype.assignElements=function(){return this.element=$(".campaign__status-section"),this.chart=this.element.find(".ct-pie-chart"),this.chartTooltip=this.element.find(".ct-tooltip").hide(),this.statusRows=this.element.find(".campaign__status-row")},StatusChart.prototype.createChart=function(){var data,options,size;return data={series:[]},this.statusRows.each(function(i,el){return data.series.push({name:$(el).data("series"),value:$(el).data("count")})}),size="250px",isMobile()&&(size="150px"),options={height:size,width:size,showLabel:!1},this.chartObject=new Chartist.Pie(this.chart[0],data,options)},StatusChart.prototype.observeElements=function(){return this.chart.on("click",".ct-series",this._click),this.chart.on("mouseover",".ct-series",this._mouseover),this.chart.on("mouseout",this._mouseout)},StatusChart.prototype._click=function(e){var series;return series=$(e.currentTarget).attr("ct:series-name"),this.statusRows.filter("[data-series="+series+"]")[0].click()},StatusChart.prototype._mouseout=function(){return this.statusRows.removeClass("is-hovered")},StatusChart.prototype._mouseover=function(e){var row,seriesName,target;return target=$(e.currentTarget),seriesName=target.attr("ct:series-name"),row=this.statusRows.filter("[data-series="+seriesName+"]"),row.addClass("is-hovered")},StatusChart}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.Menu=function(){function Menu(){this._showMenu=__bind(this._showMenu,this),this._setActive=__bind(this._setActive,this),this._deactivateMenu=__bind(this._deactivateMenu,this),this._activateMenu=__bind(this._activateMenu,this),this.assignElements(),this.observeElements(),new Menu.Design,new Menu.Object,this._setActive()}return Menu.prototype.assignElements=function(){return this.element=$(".main-menu")},Menu.prototype.observeElements=function(){return $(document).on("click","[data-menu]",this._showMenu),$(document).on("ajaxComplete",this._setActive),this.element.on("activate",".navigation",this._activateMenu),this.element.on("deactivate",".navigation",this._deactivateMenu),this.element.on("click","[href=#]",this._preventDefault)},Menu.prototype._activateMenu=function(event){var menu,targetMenu;return menu=$(event.currentTarget),menu.is("is-active")?void 0:(this._menus().removeClass("is-active"),menu.addClass("is-active"),targetMenu=menu.data("menu-for"),this._menuFooter().removeClass("is-active"),this._menuFooter().filter("[data-menu-for*="+targetMenu+"]").addClass("is-active"))},Menu.prototype._deactivateMenu=function(event){var menu;return menu=$(event.currentTarget),this._showMenu({currentTarget:menu.find("a.back-link")})},Menu.prototype._menus=function(){return this.element.find(".navigation")},Menu.prototype._menuFooter=function(){return this.element.find(".menu__footer")},Menu.prototype._menuLinks=function(){return this.element.find(".menu-tab")},Menu.prototype._preventDefault=function(e){return e.preventDefault()},Menu.prototype._setActive=function(){var _this=this;return this._menuLinks().removeClass("is-active"),this._menuLinks().each(function(i,el){var menu,regex,url;return el=$(el),url=el.attr("href"),regex=new RegExp(url,"g"),"#"===url||el.is(".back-link")?void 0:location.pathname.match(regex)&&(el.addClass("is-active"),menu=el.parents(".menu"),!menu.hasClass("main"))?(_this.element.find(".menu.main").removeClass("is-active"),menu.addClass("is-active")):void 0})},Menu.prototype._showMenu=function(event){var $el,targetMenu;return $el=$(event.currentTarget),targetMenu=$el.data("menu"),this._menus().removeClass("is-active"),this._menus().filter("[data-menu-for="+targetMenu+"]").addClass("is-active"),this._menuFooter().removeClass("is-active"),this._menuFooter().filter("[data-menu-for*="+targetMenu+"]").addClass("is-active")},Menu}(),jQuery(function(){return new Menu})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Menu.Design=function(){function Design(){this._toggleSection=__bind(this._toggleSection,this),this.assignElements(),this.observeElements()}return Design.prototype.assignElements=function(){return this.expandClassName="is-expanded"},Design.prototype.observeElements=function(){return $(".main-menu").on("click",".design-section__header",this._toggleSection)},Design.prototype._toggleSection=function(e){var currentMenu,section,sectionOpen;return section=$(e.target).closest(".design-section"),sectionOpen=section.hasClass(this.expandClassName),currentMenu=section.closest(".menu"),currentMenu.find(".design-section").removeClass(this.expandClassName),sectionOpen?void 0:section.addClass(this.expandClassName)},Design}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Menu.Object=function(){function Object(){this._showLoading=__bind(this._showLoading,this),this._hideLoading=__bind(this._hideLoading,this),this.menu=".main-menu [data-menu-for=object]",this.loadingClassName="is-loading",$(document).on("click",""+this.menu+" .button",this._showLoading),$(document).on("ajaxComplete",this._hideLoading)}return Object.prototype._hideLoading=function(){return $(""+this.menu+" .button").removeClass(this.loadingClassName)},Object.prototype._showLoading=function(e){return $(e.target).addClass(this.loadingClassName)},Object}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};this.Modal=function(){function Modal(){this._showOverlay=__bind(this._showOverlay,this),this._loadContent=__bind(this._loadContent,this),this._clickHandler=__bind(this._clickHandler,this),this.resize=__bind(this.resize,this),$(document).on("click","[data-modal]",this._clickHandler),$(document).on("click",".modal-close, [data-modal-close]",this.close),$(document).on("ajax:complete",".modal-wrapper form",this._loadContent),$(document).on("ajax:complete",".modal-wrapper form",this.resize),$(document).on("modal:resize",this.resize),$(document).on("click",".modal-wrapper",this.resize),$(document).on("change",".modal-wrapper select",this.resize),$(window).on("resize",this.resize)}return Modal.instance=null,Modal.initialize=function(){return null!=this.instance?this.instance:this.instance=new Modal},Modal.setupTabs=function(){return $(".modal-wrapper").each(function(i,el){return new Modal.Tabs($(el))})},Modal.prototype.close=function(e){var modal;return modal=null!=e?$(e.currentTarget).parents(".modal-wrapper"):$(".modal-wrapper"),modal.data("permanent")?(modal.hide(),modal.trigger("modal:hide")):modal.remove()},Modal.prototype.open=function(url,data,callback){var _this=this;return null==data&&(data={}),data["X-Modal"]=!0,$.ajax({url:url,data:data}).done(function(modalData){return _this._showOverlay(modalData),callback?callback($(".modal-wrapper")):void 0})},Modal.prototype.resize=function(){var e,modalWindow,_i,_len,_ref,_results;for(_ref=$(".modal-window"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],modalWindow=$(e),modalWindow.css({height:"auto"}),_results.push(modalWindow.css({height:modalWindow.height()}));return _results},Modal.prototype._clickHandler=function(event){var data,element,url;return event.preventDefault(),element=$(event.currentTarget),url=element.data("modal"),data={modal_params:element.data("modal-params")},this.open(url,data)},Modal.prototype._loadContent=function(event,xhr){var content;return xhr&&xhr.responseText&&(content=$(xhr.responseText),content.is(".modal-wrapper"))?$(".modal-wrapper").replaceWith(content):void 0},Modal.prototype._showOverlay=function(data){return this.close(),$("body").append(data),$.uniform(),Modal.setupTabs(),this.resize()},Modal}(),this.modal=Modal.initialize()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Modal.Tabs=function(){function Tabs(modal){this.modal=modal,this._show=__bind(this._show,this),this.modal.data("tabs-init")||(this.modal.data("tabs-init",!0),this.assignElements(),this.observeElements(),this.tabs.first().click())}return Tabs.prototype.assignElements=function(){return this.tabs=this.modal.find(".modal__tab"),this.tabContent=this.modal.find(".modal__tab-content")},Tabs.prototype.observeElements=function(){return this.tabs.on("click",this._show)},Tabs.prototype._show=function(e){var tab,tabTarget;return tab=$(e.target),tabTarget=tab.data("target"),this.tabs.removeClass("modal__tab--active"),tab.addClass("modal__tab--active"),this.tabContent.removeClass("modal__tab-content--active"),this.tabContent.filter("[data-tab="+tabTarget+"]").addClass("modal__tab-content--active")},Tabs}()}.call(this),function(){this.Optin=function(){function Optin(){}return Optin}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Optin.Disclaimer=function(){function Disclaimer(){this._toggleDisclaimer=__bind(this._toggleDisclaimer,this),this.assignElements(),this.observeElements(),this._toggleDisclaimer()}return Disclaimer.prototype.assignElements=function(){return this.element=$(".optin-section"),this.disclaimer=this.element.find(".optin-disclaimer"),this.radioButtons=this.element.find('input[type="radio"]')},Disclaimer.prototype.observeElements=function(){return this.radioButtons.on("click",this._toggleDisclaimer)},Disclaimer.prototype._toggleDisclaimer=function(){return this.disclaimer.hide(),"true"===this.radioButtons.filter(":checked").val()?this.disclaimer.show():void 0},Disclaimer}()}.call(this),function(){null==this.Projects&&(this.Projects={})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Projects.Analyzer=function(){function Analyzer(){this._updateValues=__bind(this._updateValues,this),this._updateAnalysis=__bind(this._updateAnalysis,this),this._toggleLoanTerm=__bind(this._toggleLoanTerm,this),this._saveAnalysisAsAttachment=__bind(this._saveAnalysisAsAttachment,this),this._saveAnalysis=__bind(this._saveAnalysis,this),this._revertFinalization=__bind(this._revertFinalization,this),this._printAnalysis=__bind(this._printAnalysis,this),this._handleEnter=__bind(this._handleEnter,this),this._finalizeAnalysis=__bind(this._finalizeAnalysis,this),this._changeDownPaymentInput=__bind(this._changeDownPaymentInput,this),this._allowInputEntry=__bind(this._allowInputEntry,this),this.assignElements(),this.observeElements()}return Analyzer.prototype.assignElements=function(){return this.form=$("#analysis-form"),this.analyzeAction=this.form.attr("action"),this.updateAutomatically="test"!==environment},Analyzer.prototype.observeElements=function(){return this.form.on("ajax:success",this._updateAnalysis),this.form.on("ajax:error",this._revertFinalization),this.form.on("change",'select[name*="loan][type]"]',this._toggleLoanTerm),this.form.on("click",".run-analyzer-button",this._finalizeAnalysis),this.form.on("click",".save-analyzer-button",this._saveAnalysis),this.form.on("focus click","select",this._setPreviousValue),this.updateAutomatically&&this.form.on("change","input:not(.no-update),select:not(.no-update)",this._updateValues),this.form.on("keydown","input",this._handleEnter),this.form.on("click","input[readonly]",this._allowInputEntry),this.form.on("click","a.print-analysis",this._printAnalysis),this.form.on("click","a.save-attachment",this._saveAnalysisAsAttachment),$(document).on("analysis:configuration-updated",this._finalizeAnalysis)},Analyzer.prototype._allowInputEntry=function(event){var input;return input=$(event.target),input.is("[readonly]")?input.removeAttr("readonly").select():void 0},Analyzer.prototype._changeDownPaymentInput=function(event){var field,input,previousInput,target,unit;return target=$(event.target),field=target.closest(".field"),unit=target.val(),previousInput=field.find("[data-unit]").not("[data-unit='"+unit+"']"),previousInput.hide(),previousInput.find("input").disable(),input=field.find("[data-unit='"+unit+"']"),input.find("input").enable(),input.show()},Analyzer.prototype._compensateForLoanAmountFlexibility=function(field){var alterLoanType,container,select,_this=this;if("fix_and_flip"===this.form.find("input:hidden[name=type]").val()&&(container=field.closest(".form-section.purchase,.form-section.misc"),container.exists()))return alterLoanType=function(type){var input,loanType;if(null!=type)return loanType={Financed:"first","First Loan":"first","Second Loan":"second"}[type],input=_this.form.find("#"+loanType+"-loan-amount input"),input.is("[readonly]")?void 0:input.attr("readonly","true")},field.is("input[name*=_price]")&&(select=field.closest(".input").find("select"),alterLoanType(select.val())),field.is("select")?(alterLoanType(field.data("previous-value")),alterLoanType(field.val())):void 0},Analyzer.prototype._finalizeAnalysis=function(event){return this.form.inDOM()?(clearTimeout(this.updateTimeout),event.stop(),this.form.find("input:hidden[name=finalized]").val("true"),this.form.submit()):void 0},Analyzer.prototype._handleEnter=function(event){var nextInput,tabIndex;if(13===event.keyCode)return event.stop(),tabIndex=parseInt($(event.target).attr("tabindex")),nextInput=this.form.find("input:text:visible[tabindex="+(tabIndex+1)+"]"),nextInput.exists()||(nextInput=this.form.find("input:text:visible[tabindex="+(tabIndex+2)+"]")),nextInput.exists()?nextInput.focus():void 0},Analyzer.prototype._printAnalysis=function(event){var e,printForm,_i,_len,_ref;for(event.stop(),printForm=$('<form target="_blank" method="post">').hide(),printForm.attr("action",$(event.currentTarget).attr("href")),_ref=this.form.find("input,select"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],printForm.append($(e).clone());return $(document.body).append(printForm),printForm.submit(),setTimeout(function(){return printForm.remove()},100)},Analyzer.prototype._replaceContent=function(content){var e,element,existing,focusedElement,id,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2;for(focusedElement=this.form.find("input:focus,select:focus"),content=$(content),_ref=content.find("input:text,select"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],element=$(e),existing=this.form.find("#"+element.attr("id")),existing.is(focusedElement)||existing.val(element.val());
for(_ref1=content.find(".updateable"),_j=0,_len1=_ref1.length;_len1>_j;_j++)e=_ref1[_j],element=$(e),id=element.attr("id"),this.form.find("#"+id).replaceWith(element);for(_ref2=this.form.find('select[name*="loan][type]"]'),_k=0,_len2=_ref2.length;_len2>_k;_k++)e=_ref2[_k],this._toggleLoanTerm({target:e});return $.uniform(),this._revertFinalization()},Analyzer.prototype._revertFinalization=function(){return this.form.find("input:hidden[name=finalized]").val("false")},Analyzer.prototype._saveAnalysis=function(event){var target,_this=this;return event.stop(),target=$(event.target),this.form.data("message","Saving"),this.form.attr("action",target.data("url")),this.form.attr("method",target.data("method")),this.form.submit(),setTimeout(function(){return _this.form.data("message","Analyzing"),_this.form.attr("action",_this.analyzeAction)},100)},Analyzer.prototype._saveAnalysisAsAttachment=function(event){return event.stop(),$.ajax({url:$(event.currentTarget).attr("href"),type:"post",data:this.form.serialize()})},Analyzer.prototype._setPreviousValue=function(event){var target;return target=$(event.target),target.data("previous-value",target.val())},Analyzer.prototype._toggleLoanTerm=function(event){var parent,sections,select;return select=$(event.target),parent=select.closest(".form-section"),sections=parent.find("[data-loan-type]"),sections.hide().filter("[data-loan-type='"+select.val()+"']").show()},Analyzer.prototype._updateAnalysis=function(event,content){var data,error;if($(event.target).is(this.form))try{return data=$.parseJSON(content),pjax.loadUrl(data.url)}catch(_error){return error=_error,this._replaceContent($(content))}},Analyzer.prototype._updateValues=function(event){var target,_this=this;return target=$(event.target),target.is('input[name="analysis[name]"]')?void 0:target.is('select[name*="down_payment_unit"]')?this._changeDownPaymentInput(event):target.is('select[name*="loan][type]"]')?this._toggleLoanTerm(event):(this._compensateForLoanAmountFlexibility(target),this.updateTimeout=setTimeout(function(){var handler;return $(document).trigger("ajax:manual-control"),_this.form.data("message","no-message"),_this.form.find("input[readonly]").disable(),_this.form.submit(),_this.form.data("message","Analyzing"),handler=function(){return $(document).trigger("ajax:automatic-control"),$(document).off("ajaxSuccess",handler)},$(document).on("ajaxSuccess",handler)},100))},Analyzer}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Projects.Analyzer.List=function(){function List(){this._showOverlay=__bind(this._showOverlay,this),this._hideOverlay=__bind(this._hideOverlay,this),this.assignElements(),this.observeElements()}return List.prototype.assignElements=function(){return this.newButton=$(".new-analyzer-button"),this.overlay=Overlay.cache["analyzer-selection"],this.overlayButtons=this.overlay.wrapper.find(".analyzer-option")},List.prototype.observeElements=function(){return this.newButton.on("click",this._showOverlay),this.overlayButtons.on("click",this._hideOverlay)},List.prototype._hideOverlay=function(){return this.overlay.hide()},List.prototype._showOverlay=function(event){return event.preventDefault(),this.overlay.show()},List}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Projects.Analyzer.Settings=function(){function Settings(){this._reset=__bind(this._reset,this),this._dragStart=__bind(this._dragStart,this),this._dragEnd=__bind(this._dragEnd,this),this._dragMove=__bind(this._dragMove,this),this.ensureVisible=__bind(this.ensureVisible,this),this.assignElements(),this.observeElements(),this.ensureVisible()}return Settings.prototype.assignElements=function(){return this.settingsFields=$(".analysis-settings-field").addClass("is-init"),this.ranges=this.settingsFields.find(".range-selector"),this.breakpoints=this.ranges.find(".breakpoint"),this.resetTrigger=$("a.reset-default")},Settings.prototype.ensureVisible=function(){var _this=this;return this.interval=setInterval(function(){return _this.settingsFields.find(".bar:visible").first().width()>0?(clearInterval(_this.interval),_this.gatherWidths(),_this.observeVisualElements()):void 0},100)},Settings.prototype.gatherWidths=function(){var e,_i,_len,_ref,_results;for(this.rangeMath={max:this.ranges.find(".bar").width(),min:0},_ref=this.ranges,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],_results.push(this._resizeBars($(e)));return _results},Settings.prototype.observeElements=function(){return this.resetTrigger.on("click",this._reset)},Settings.prototype.observeVisualElements=function(){return this.breakpoints.on("mousedown touchstart",this._dragStart),$(document).on("mousemove touchmove",this._dragMove),$(document).on("mouseup touchend",this._dragEnd)},Settings.prototype._formatValue=function(value){return value.replace(/\B(?=(\d{3})+(?!\d))/g,",")},Settings.prototype._dragMove=function(event){var delta,otherBreakpoint,otherBreakpointPosition,positionLeft;if(this.drag)return otherBreakpoint=this.drag.container.find(".breakpoint").not(this.drag.element),otherBreakpointPosition=parseInt(otherBreakpoint.css("left")),delta=event.clientX-this.drag.x,positionLeft=this.drag.left+delta,positionLeft<this.rangeMath.min&&(positionLeft=this.rangeMath.min),positionLeft>this.rangeMath.max&&(positionLeft=this.rangeMath.max),this.drag.element.hasClass("for-low")&&positionLeft>otherBreakpointPosition&&(positionLeft=otherBreakpointPosition),this.drag.element.hasClass("for-high")&&otherBreakpointPosition>positionLeft&&(positionLeft=otherBreakpointPosition),this.drag.element.css("left",positionLeft),this._updateTooltip(this.drag.element),this._resizeBars(this.drag.container)},Settings.prototype._dragEnd=function(){return this.drag=null},Settings.prototype._dragStart=function(event){var container,element,startingPositionLeft;return element=$(event.currentTarget),container=element.parents(".range-selector"),startingPositionLeft=parseInt(element.css("left")),this.drag={x:event.clientX,left:startingPositionLeft,element:element,container:container}},Settings.prototype._rawValue=function(value,precision,step){return step&&(value=step*Math.round(value/step)),parseFloat(value).toFixed(precision)},Settings.prototype._reset=function(event){var breakpoint,e,field,formattedValue,label,max,point,range,value,which,_i,_j,_len,_len1,_ref,_ref1,_results;for(event.stop(),_ref=this.ranges,_results=[],_i=0,_len=_ref.length;_len>_i;_i++){for(e=_ref[_i],range=$(e),max=range.data("max"),field=range.closest(".analysis-settings-field"),_ref1=["low","high"],_j=0,_len1=_ref1.length;_len1>_j;_j++)point=_ref1[_j],breakpoint=range.find(".breakpoint.for-"+point),value=range.data("defaults-"+point+"-value"),formattedValue=range.data("defaults-"+point+"-formatted"),breakpoint.css({left:""+value/max*100+"%"}),field.find(".breakpoint-labels").exists()?(which=breakpoint.hasClass("for-low")?".for-low":".for-high",label=field.find(".breakpoint-labels .label"+which),label.find("span").html(formattedValue),label.find("input:hidden").val(value)):(breakpoint.find(".tooltip span").html(formattedValue),breakpoint.find("input:hidden").val(value));_results.push(this._resizeBars(range))}return _results},Settings.prototype._resizeBars=function(element){var b1,b2,bar1,bar2,bp1,bp2;return bp1=element.find(".breakpoint.for-low"),bp2=element.find(".breakpoint.for-high"),bar1=element.find(".bar.is-red"),bar2=element.find(".bar.is-green"),element.is('[data-field="return_of_cash"]')&&(b1=bar1,b2=bar2,bar1=b2,bar2=b1),bar1.css({width:bp1.css("left")}),bar2.css({width:this.rangeMath.max-parseInt(bp2.css("left"))})},Settings.prototype._updateTooltip=function(element){var breakpointLabel,container,field,maxValue,minValue,percentage,position,tooltip,tooltipFormat,tooltipPrecision,tooltipStep,value,which;return container=element.parents(".range-selector"),position=parseInt(element.css("left")),maxValue=parseInt(container.data("max")),minValue=parseInt(container.data("min")),percentage=position/this.rangeMath.max,tooltipFormat=container.data("format"),tooltipPrecision=container.data("precision"),tooltipStep=container.data("step"),value=this._rawValue((maxValue-minValue)*percentage+minValue,tooltipPrecision,tooltipStep),tooltip=this._formatValue(value),tooltip=tooltipFormat.replace("#{n}",tooltip),tooltip=tooltip.replace("{u}",'<span class="unit">'),tooltip=tooltip.replace("{/u}","</span>"),field=element.parents(".analysis-settings-field"),field.find(".breakpoint-labels").exists()?(which=element.hasClass("for-low")?".for-low":".for-high",breakpointLabel=field.find(".breakpoint-labels .label"+which),breakpointLabel.find("span").html(tooltip),breakpointLabel.find("input:hidden").val(value)):(element.find(".tooltip span").html(tooltip),element.find("input:hidden").val(value))},Settings}()}.call(this),function(){null==this.Properties&&(this.Properties={})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};null==Properties.Estimate&&(Properties.Estimate={}),Properties.Estimate.Form=function(){function Form(data){this.data=data,this._rebuildCitySelect=__bind(this._rebuildCitySelect,this),this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){return this.form=$("form.estimate-setup"),this.selects={state:this.form.find("select#estimate_market_state"),city:this.form.find("select#estimate_market_city")},this.originalCity=this.selects.city.val()},Form.prototype.observeElements=function(){return this.selects.state.on("change",this._rebuildCitySelect)},Form.prototype._rebuildCitySelect=function(){var cities,city,option,select,state,_i,_len;for(state=this.selects.state.val(),cities=Object.keys(this.data[state]||{}),select=this.selects.city,select.html('<option value="">Please select</option>'),_i=0,_len=cities.length;_len>_i;_i++)city=cities[_i],option=$("<option value='"+city+"'>"+city+"</option>"),city===this.originalCity&&option.attr("selected","selected"),select.append(option);return select.change()},Form}()}.call(this),function(){this.Signing={fontScaling:3}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Signing.Field=function(){function Field(element){this.element=element,this._updateFormFields=__bind(this._updateFormFields,this),this._updateCoordinates=__bind(this._updateCoordinates,this),this._resetResizable=__bind(this._resetResizable,this),this._resizeStop=__bind(this._resizeStop,this),this._resize=__bind(this._resize,this),this._imageLoaded=__bind(this._imageLoaded,this),this._dragStop=__bind(this._dragStop,this),this._dragStart=__bind(this._dragStart,this),this._activate=__bind(this._activate,this),this.assignElements(),this.observeElements()}return Field.prototype.assignElements=function(){return this.baseFontSize=12,this.baseFontFamily="Verdana",this.type=this.element.data("type"),this.element.attr("data-original-title",this.element.data("title")),this.page=this.element.closest(".signing__page")},Field.prototype.observeElements=function(){return this.element.on("field:update",this._updateFormFields),this.element.draggable({containment:this.page,cancel:"[contenteditable]",scrollSensitivity:100,start:this._dragStart,stop:this._dragStop}),this.element.resizable({handles:"se",containment:this.page,maxHeight:this.page.height(),maxWidth:this.page.width(),aspectRatio:this.element.outerWidth()/this.element.outerHeight(),resize:this._resize,stop:this._resizeStop}),this.element.find("img").on("load",this._imageLoaded),this._updateFormFields()},Field.prototype._activate=function(){},Field.prototype._dragStart=function(){return this._activate()},Field.prototype._dragStop=function(){return this._updateCoordinates()},Field.prototype._fieldId=function(){throw"not implemented"},Field.prototype._fragmentContent=function(){throw"not implemented"},Field.prototype._imageLoaded=function(){return this._resetResizable()},Field.prototype._resize=function(){throw"not implemented"},Field.prototype._resizeStop=function(){},Field.prototype._dimensionalElement=function(){var img;return img=this.element.find("img"),img.exists()?img:this.element.find(".placeholder")},Field.prototype._fragmentOptions=function(){var fontSize,nominalFontSize;return fontSize=parseInt(this.element.css("font-size"),10),nominalFontSize=fontSize/Signing.fontScaling*this.page.data("max-height")/this.page.height(),{font_size:Math.round(10*nominalFontSize)/10,font_family:this.baseFontFamily,bold:!1,italic:!1,underline:!1,strikethrough:!1,color:"#000000",background_color:"",content:this._fragmentContent(),x:this.x,y:this.y,max_page_height:this.page.data("max-height"),max_page_width:this.page.data("max-width"),page_height:this.page.height(),page_width:this.page.width(),page_number:this.page.data("number"),image_height:this._dimensionalElement().height(),image_width:this._dimensionalElement().width()}},Field.prototype._input=function(name,prefix,value){var input;return input=$('<input type="hidden">'),name=""+prefix+"["+name+"]",input.attr({name:name,value:value})},Field.prototype._resetResizable=function(){return this.element.resizable("option","aspectRatio",this.element.outerWidth()/this.element.outerHeight())},Field.prototype._updateCoordinates=function(){return this.x=parseInt(this.element.css("left"),10),this.y=parseInt(this.element.css("top"),10),this._updateFormFields()},Field.prototype._updateFormFields=function(){var fields,name,prefix,value,_ref;this.element.find(".form-fields").remove(),fields=$('<div class="form-fields">').hide(),prefix="fields["+this._fieldId()+"]",fields.append(this._input("signatory_id",prefix,this.element.attr("data-signatory-id"))),fields.append(this._input("template_id",prefix,this.page.attr("data-template-id"))),fields.append(this._input("required",prefix,this.element.attr("data-required"))),fields.append(this._input("field_type",prefix,this.type)),prefix=""+prefix+"[fragment_attributes]",_ref=this._fragmentOptions();for(name in _ref)value=_ref[name],fields.append(this._input(name,prefix,value));return this.element.append(fields),this.element.trigger("form-fields-updated")},Field.prototype.__assignOriginalDimensions=function(){return this.original={height:this.element.outerHeight(),width:this.element.outerWidth(),fontSize:parseInt(this.element.css("font-size"),10)}},Field.prototype.__initializeFromPageLoad=function(){var fontSize,nominalFontSize,width;return this.page=this.element.closest(".signing__page"),this.__assignOriginalDimensions(),this.x=parseInt(this.element.data("x"),10),this.y=parseInt(this.element.data("y"),10),nominalFontSize=this.element.data("nominalFontSize"),fontSize=Signing.fontScaling*nominalFontSize*this.page.height()/this.page.data("max-height"),this.element.css({fontSize:""+fontSize+"px"}),width=this.element.data("imageWidth"),this.element.find(".placeholder").css({width:width,height:"auto"}),this.__initializePosition()},Field.prototype.__initializePosition=function(){return this.element.css({left:""+this.x+"px",top:""+this.y+"px"})},Field}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Signing.Form=function(){function Form(){this._toggleOrderFields=__bind(this._toggleOrderFields,this),this._submit=__bind(this._submit,this),this._selectTemplate=__bind(this._selectTemplate,this),this._removeTemplate=__bind(this._removeTemplate,this),this._removeSignatory=__bind(this._removeSignatory,this),this._moveSignatoryDown=__bind(this._moveSignatoryDown,this),this._moveSignatoryUp=__bind(this._moveSignatoryUp,this),this._createTemplate=__bind(this._createTemplate,this),this._addTemplate=__bind(this._addTemplate,this),this._addSignatory=__bind(this._addSignatory,this),this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){return this.form=$("form"),this.template={field:this.form.find("input:file"),container:this.form.find(".signer__actions"),trigger:this.form.find(".templates .signer__actions a")},this.signatory={container:this.form.find(".signer__fields"),add:this.form.find(".signatories .signer__fields a.button"),list:this.form.find(".signer__signers"),ordering:this.form.find(".signer__order-enabler input")},this.signatory.template=this.signatory.container.find(".signer__field").first().clone()},Form.prototype.observeElements=function(){return this.template.trigger.on("click",this._selectTemplate),this.template.field.on("change",this._createTemplate),this.form.on("click","a.wizard__next",this._submit),this.form.on("click",".signing__file .remove",this._removeTemplate),this.signatory.add.on("click",this._addSignatory),this.form.on("click",".signer__field .remove",this._removeSignatory),this.signatory.ordering.on("change",this._toggleOrderFields),this.signatory.list.on("click",".up",this._moveSignatoryUp),this.signatory.list.on("click",".down",this._moveSignatoryDown),this._uploadInitialTemplates()},Form.prototype._addSignatory=function(event){var e,id,input,newSignatory,_i,_len,_ref;for(event.stop(),newSignatory=this.signatory.template.clone(),newSignatory.find("input").val(""),id=uniqueId(),_ref=newSignatory.find("input"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],input=$(e),input.attr("name",input.attr("name").replace(/signatories\[\d+\]/,"signatories["+id+"]")),input.attr("id",input.attr("id").replace(/signatories_\d+_/,"signatories_"+id+"_"));return this.signatory.list.append(newSignatory),this._assignSignatoryNumbers()},Form.prototype._addTemplate=function(html){return this.template.container.removeClass("without-templates"),this.form.find(".signer__templates").append(html),this.template.field.val("")},Form.prototype._assignSignatoryNumbers=function(){var counter,e,_i,_len,_ref,_results;for(counter=1,_ref=this.signatory.list.find(".signer__field"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],$(e).find(".order").text(counter),_results.push(counter++);return _results},Form.prototype._createTemplate=function(){var data;if(!this.template.field.val().blank())return data=new FormData(this.form[0]),data.append("_method","post"),$.ajax({url:this.template.container.data("url"),type:"post",message:"Processing Document",data:data,cache:!1,processData:!1,contentType:!1}).done(this._addTemplate)},Form.prototype._moveSignatoryUp=function(event){var previous,row;return event.stop(),row=$(event.target).closest(".signer__field"),previous=row.prev(".signer__field"),previous.exists()&&previous.before(row),this._assignSignatoryNumbers()},Form.prototype._moveSignatoryDown=function(event){var next,row;return event.stop(),row=$(event.target).closest(".signer__field"),next=row.next(".signer__field"),next.exists()&&next.after(row),this._assignSignatoryNumbers()},Form.prototype._removeSignatory=function(event){return event.stop(),$(event.target).closest(".signer__field").remove(),this.signatory.list.find(".signer__field").exists()?void 0:this._addSignatory(event)},Form.prototype._removeTemplate=function(event){return event.stop(),$(event.target).closest(".signing__file").remove()},Form.prototype._selectTemplate=function(event){return event.stop(),this.template.field.click()},Form.prototype._submit=function(event){return event.stop(),this.form.submit()},Form.prototype._toggleOrderFields=function(){return this.signatory.container.toggleClass("signer__order-enabled")},Form.prototype._uploadInitialTemplates=function(){var data,id,ids,_i,_len,_results;if(ids=this.template.container.data("attachment-ids"),null!=ids){for(ids=(""+ids).split(","),data=defaultParams({object_type:this.form.find('input[name*="[object_type]"]').val(),object_id:this.form.find('input[name*="[object_id]"]').val()}),_results=[],_i=0,_len=ids.length;_len>_i;_i++)id=ids[_i],data.attachment_id=id,_results.push($.ajax({url:this.template.container.data("url"),type:"post",message:"Processing Document",data:data}).done(this._addTemplate));return _results}},Form}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Signing.Prepare=function(){function Prepare(options){this._toggleFieldType=__bind(this._toggleFieldType,this),this._submit=__bind(this._submit,this),this._signingFieldHelper=__bind(this._signingFieldHelper,this),this._placeField=__bind(this._placeField,this),this._placeDroppedField=__bind(this._placeDroppedField,this),this._goBack=__bind(this._goBack,this),this._activateField=__bind(this._activateField,this),$.extend(this,options),this.assignElements(),this.observeElements()}return Prepare.prototype.assignElements=function(){var e,_i,_len,_ref;for(this.form=$("form"),this.pageContainer=this.form.find(".signing__pages"),this.menus={placement:$("[data-menu-for=main]"),field:$("[data-menu-for=field]")},this.menu=new Signing.Prepare.Menu(this.menus.field,this),_ref=this.form.find(".signing__field"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],new Signing.Prepare.Field($(e));return this.menu.displaySignatories()},Prepare.prototype.observeElements=function(){return this.menus.placement.find(".signing-placement__button").draggable({helper:this._signingFieldHelper,zIndex:1e3,appendTo:"body"}),this.pageContainer.find(".signing__page img").droppable({accept:".signing-placement__button",drop:this._placeDroppedField}),this.menus.placement.on("click",".signing-placement__button",this._toggleFieldType),this.pageContainer.on("click",".signing__page img",this._placeField),this.pageContainer.on("click",".signing__page .signing__field",this._activateField),this.form.on("click","a.wizard__next",this._submit),this.form.on("click","a.wizard__previous",this._goBack)},Prepare.prototype.valid=function(){var el,signatory,_i,_len,_ref;for(_ref=this.form.find(".signing__field"),_i=0,_len=_ref.length;_len>_i;_i++)if(el=_ref[_i],signatory=$(el).attr("data-signatory-id"),signatory.blank())return Message.create().flash("Please ensure all fields are assigned to someone.","error"),!1;return!0},Prepare.prototype._activateField=function(event){var field;return field=$(event.target).closest(".signing__field"),this.current=field,this.current.trigger("field:activate"),this.menu.fieldActivated(this.current)},Prepare.prototype._createField=function(button,event){var element;return element=$(this.fieldTemplates).find("[data-type="+button.data("type")+"]").clone(),new Signing.Prepare.Field(element,event),this.current=element,this.current.trigger("field:activate"),this.menu.fieldActivated(this.current)},Prepare.prototype._goBack=function(event){var input;return event.stop(),input=$("<input>"),input.attr({type:"hidden",name:"commit",value:"Edit Document"}),this.form.append(input),this.form.submit()},Prepare.prototype._placeDroppedField=function(event,ui){var button,page;return page=$(event.target),button=ui.draggable,event.offsetY=ui.position.top-page.offset().top,event.offsetX=ui.position.left-page.offset().left,event.skipPlacementOffset=!0,this._createField(button,event)},Prepare.prototype._placeField=function(event){var button;return button=this.menus.placement.find(".signing-placement__button.is-selected"),button.exists()?this._createField(button,event):void 0},Prepare.prototype._signingFieldHelper=function(event){var button,helper;return button=$(event.target),helper=button.clone(),helper.css({width:button.outerWidth(),height:button.outerHeight()}),helper},Prepare.prototype._submit=function(event){return event.stop(),this.valid()?this.form.submit():void 0},Prepare.prototype._toggleFieldType=function(event){var button,currentlyActive;return event.stop(),button=$(event.target).closest(".signing-placement__button"),currentlyActive=button.hasClass("is-selected"),this.menus.placement.find(".signing-placement__button").removeClass("is-selected"),currentlyActive?void 0:button.addClass("is-selected")},Prepare}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Signing.Prepare.Field=function(_super){function Field(element,originatingEvent){this.element=element,this._resize=__bind(this._resize,this),this._activate=__bind(this._activate,this),this._processOriginatingEvent(originatingEvent),Field.__super__.constructor.call(this,this.element)}return __extends(Field,_super),Field.prototype.assignElements=function(){return Field.__super__.assignElements.call(this),this.menu=$("[data-menu-for=field]")},Field.prototype.observeElements=function(){return Field.__super__.observeElements.call(this),this.element.on("field:activate",this._activate)},Field.prototype._activate=function(){return this.menu.show(),$(".signing__field").removeClass("is-active"),this.element.addClass("is-active")},Field.prototype._fieldId=function(){return uniqueId()},Field.prototype._fragmentContent=function(){return""},Field.prototype._processOriginatingEvent=function(event){return event?this.__initializeFromClickEvent(event):this.__initializeFromPageLoad()},Field.prototype._resize=function(event,ui){return this.element.find(".placeholder").css({width:ui.size.width}),this.element.css({fontSize:""+ui.size.height+"px"}),this._updateFormFields()},Field.prototype.__initializeFromClickEvent=function(event){return this.page=$(event.target).closest(".signing__page"),this.page.append(this.element),this.__assignOriginalDimensions(),null!=event.offsetX?(this.x=event.offsetX,this.y=event.offsetY):(this.x=event.layerX,this.y=event.layerY),event.skipPlacementOffset||(this.x-=this.element.outerWidth()/2,this.y-=this.element.outerHeight()/2),this.__initializePosition()},Field}(Signing.Field)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Signing.Prepare.Menu=function(){function Menu(element,owner){this.element=element,this.owner=owner,this._removeField=__bind(this._removeField,this),this._assignRequired=__bind(this._assignRequired,this),this._assignSignatory=__bind(this._assignSignatory,this),this.element.on("change","select#who",this._assignSignatory),this.element.on("change","input:checkbox#required",this._assignRequired),this.element.on("click","a.remove",this._removeField)}return Menu.prototype.displaySignatories=function(){var e,field,_i,_len,_ref,_results;for(_ref=this.owner.form.find(".signing__field"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],field=$(e),_results.push(field.attr("data-title",this._fieldType(field)));return _results},Menu.prototype.fieldActivated=function(field){return this.element.find("select#who").val(field.attr("data-signatory-id")).change(),this.element.find("input:checkbox#required").check("1"===field.attr("data-required"))},Menu.prototype._assignSignatory=function(event){var field,signatoryId;return signatoryId=$(event.target).val(),field=this.owner.current,field.attr("data-signatory-id",signatoryId),field.attr("data-title",this._fieldType(field)),field.trigger("field:update")},Menu.prototype._assignRequired=function(event){var field,required;return required=$(event.target).is(":checked"),field=this.owner.current,field.attr("data-required",required?"1":"0"),field.attr("data-title",this._fieldType(field)),field.trigger("field:update")},Menu.prototype._fieldType=function(field){var info,name,title;return title=field.attr("data-original-title").split(" - ")[0],"1"===field.attr("data-required")&&(title=""+title+" (Required)"),name=this._signatoryName(field.attr("data-signatory-id")),info=[title],name.blank()||info.push(name),info.join(" - ").replace(/\s/g,"")},Menu.prototype._removeField=function(event){return event.stop(),this.owner.current.remove(),this.owner.menus.field.hide()},Menu.prototype._signatoryName=function(signatoryId){return!signatoryId||signatoryId.blank()?"":this.element.find("select#who option[value='"+signatoryId+"']").text()},Menu}()}.call(this),function(){Signing.Preview=function(){function Preview(){var e,_i,_len,_ref;for(_ref=$(".signing__field"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],new Signing.Preview.Field($(e))}return Preview}()}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Signing.Preview.Field=function(_super){function Field(element){this.element=element,this.__initializeFromPageLoad(),this.element.addClass("preview")}return __extends(Field,_super),Field}(Signing.Field)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Signing.Review=function(){function Review(){this._goBack=__bind(this._goBack,this),this.form=$("form"),this.form.on("click","a.wizard__previous",this._goBack)}return Review.prototype._goBack=function(event){var input;return event.stop(),input=$("<input>"),input.attr({type:"hidden",name:"commit",value:"Prepare Document"}),this.form.append(input),this.form.submit()},Review}()}.call(this),function(){Signing.Sign=function(){function Sign(){var e,_i,_len,_ref;for(this.form=$("form#signing_form"),this.fields=[],_ref=this.form.find(".signing__field"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],this.fields.push(new Signing.Sign.Field($(e)));this.menu=new Signing.Sign.Menu($("[data-menu-for=main]"),this),Signing.Sign.modals={signature:new Signing.Sign.Modal($(".signing__signature-modal")),initials:new Signing.Sign.Modal($(".signing__initials-modal"))}}return Sign}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Signing.Sign.Field=function(_super){function Field(element){this.element=element,this._toggleCheckbox=__bind(this._toggleCheckbox,this),this._resizeStop=__bind(this._resizeStop,this),this._resize=__bind(this._resize,this),this._openModal=__bind(this._openModal,this),this._imageLoaded=__bind(this._imageLoaded,this),this._dragStop=__bind(this._dragStop,this),this._applyTemporaryImage=__bind(this._applyTemporaryImage,this),this._applyImage=__bind(this._applyImage,this),this._activate=__bind(this._activate,this),this.__initializeFromPageLoad(),Field.__super__.constructor.call(this,this.element),"date"===this.type&&this._setDate()}return __extends(Field,_super),Field.prototype.assignElements=function(){var title;return Field.__super__.assignElements.call(this),this.form=$("form#signing_form"),this.element.addClass("signing"),this.element.find("input").removeAttr("readonly"),this.activatedEver=!1,title=this.element.data("title"),this.element.attr("data-title",title.replace(/\s/g,"")),this.required=!!this.element.data("required"),this.trackable="date"!==this.type,this.currentHeight=this.element.height()},Field.prototype.applyImage=function(src){var img;return img=this.element.find("img"),img.attr({src:src}),img.removeClass("placeholder-image"),this.element.find(".placeholder-text").remove(),this.updateFormFields()},Field.prototype.applyTemporaryImage=function(src){var img;return img=this.element.find("img"),img.attr({src:src})},Field.prototype.isSatisfied=function(){var content;return"checkbox"===this.type?this.activatedEver:(content=this._fragmentContent(),null!=content&&!content.blank())},Field.prototype.observeElements=function(){var content;return Field.__super__.observeElements.call(this),this.element.on("click activate",this._activate),"checkbox"===this.type&&this.element.on("click","img",this._toggleCheckbox),["signature","initials"].include(this.type)&&(this.element.on("click",".placeholder",this._openModal),this.form.on(""+this.type+":apply-image",this._applyImage),this.form.on(""+this.type+":apply-temporary-image",this._applyTemporaryImage)),["textbox","date"].include(this.type)?(content=this.element.find(".signing__field-content"),"date"!==this.type&&content.attr({contenteditable:"true"}),this.element.on("keyup",".signing__field-content",this._resetResizable),this.element.on("input",".signing__field-content",this._updateFormFields),this.element.css({width:"auto",height:"auto"}),this.element.find(".placeholder").css({width:"auto",height:"auto"}),this._resetResizable()):void 0},Field.prototype.updateFormFields=function(){return this._updateFormFields()},Field.prototype._activate=function(){return this.activatedEver=!0,"textbox"===this.type&&isMobile()&&this.element.find(".signing__field-content").focus(),this.element.trigger("activated")
},Field.prototype._applyImage=function(event,data){return this.applyImage(data.src)},Field.prototype._applyTemporaryImage=function(event,data){return this.applyTemporaryImage(data.src)},Field.prototype._dragStop=function(){return Field.__super__._dragStop.call(this),this._resizeStop()},Field.prototype._fieldId=function(){return this.element.attr("data-id")},Field.prototype._fragmentContent=function(){var img;switch(this.type){case"textbox":case"date":return this.element.find(".signing__field-content").html().stripHTML();case"signature":case"initials":case"checkbox":if(img=this.element.find("img:not(.placeholder-image)"),img.exists())return img[0].outerHTML}},Field.prototype._imageLoaded=function(){var newHeight,offset,top;return Field.__super__._imageLoaded.call(this),newHeight=this.element.height(),offset=this.currentHeight-newHeight,0!==offset?(this.currentHeight=newHeight,top=this.element.position().top,this.element.css({top:top+offset})):void 0},Field.prototype._openModal=function(){return Signing.Sign.modals[this.type].open(this)},Field.prototype._resize=function(event,ui){switch(this.type){case"textbox":case"date":this._resizeText(ui);break;case"signature":case"initials":case"checkbox":this._resizeImage(ui)}return this._updateFormFields()},Field.prototype._resizeImage=function(ui){return this.element.find(".placeholder").css({width:ui.size.width,height:"auto"})},Field.prototype._resizeStop=function(){return this.element.css({width:"auto",height:"auto"})},Field.prototype._resizeText=function(ui){var content,fontSize,lines,padding;return content=this.element.find(".signing__field-content"),padding=content.outerHeight()-content.height(),lines=content.height()/parseInt(content.css("line-height"),10),fontSize=(ui.size.height-padding)/lines,10>fontSize&&(fontSize=10),this.element.css({fontSize:""+fontSize+"px",width:"auto",height:"auto"})},Field.prototype._setDate=function(){var day,month,today,year;if(""===this.element.find(".signing__field-content").text())return today=new Date,month=("0"+(today.getMonth()+1)).slice(-2),day=("0"+today.getDate()).slice(-2),year=today.getFullYear(),this.element.find(".signing__field-content").text(""+month+"/"+day+"/"+year),this._updateFormFields()},Field.prototype._toggleCheckbox=function(event){var dataKey,img;return img=$(event.target),dataKey=img.attr("src").match(/checkbox-checked/)?"uncheckedImage":"checkedImage",img.attr("src",this.element.data(dataKey)),this._updateFormFields()},Field}(Signing.Field)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Signing.Sign.Menu=function(){function Menu(element,owner){this.element=element,this.owner=owner,this._trackProgress=__bind(this._trackProgress,this),this._submit=__bind(this._submit,this),this._overrideFocus=__bind(this._overrideFocus,this),this.assignElements(),this.observeElements()}return Menu.prototype.assignElements=function(){var container;return this.focusClass="signing__progress-focused",container=this.element.find(".signing__progress-container"),this.buttons={next:container.find(".signing__field-button.next"),previous:container.find(".signing__field-button.previous")},this.progress={bar:container.find(".signing__progress-bar"),message:container.find(".signing__information")},this.submission={container:this.element.find(".signing__submission")},this.fields=this.owner.fields.select(function(f){return f.trackable})},Menu.prototype.observeElements=function(){return this.element.on("click",".signing__agree-button",this._submit),this.owner.form.on("click",".signing__pages",this._overrideFocus),this.owner.form.on("activated",".signing__field",this._overrideFocus),this.owner.form.on("activated",".signing__field",this._trackProgress),this.owner.form.on("form-fields-updated",".signing__field",this._trackProgress),this.buttons.next.on("click",this._focusOnField("next")),this.buttons.previous.on("click",this._focusOnField("previous"))},Menu.prototype._focusedField=function(){var _this=this;return this.fields.detect(function(f){return f.element.hasClass(_this.focusClass)})},Menu.prototype._focusOnField=function(type){var _this=this;return function(type){return function(){var field,fields,index;return field=_this._focusedField(),fields=_this._sortedFields(),"previous"===type&&(fields=fields.reverse()),field=field?(index=fields.indexOf(field)+1,index===fields.length?index=0:void 0,field.element.removeClass(_this.focusClass),fields[index]):fields[0],field.element.addClass(_this.focusClass),_this._scrollToField(field.element),field.element.trigger("activate")}}(type)},Menu.prototype._overrideFocus=function(event){var directTarget,field;return directTarget=$(event.target),field=directTarget.closest(".signing__field"),this.owner.form.find(".signing__field").removeClass(this.focusClass),field.exists()?field.addClass(this.focusClass):void 0},Menu.prototype._scrollToField=function(element){var currentTop,interval,newTop,step;return newTop=element.offset().top-30,element=$(document),currentTop=element.scrollTop(),step=(newTop-currentTop)/30,interval=setInterval(function(){var shouldClear;return currentTop+=step,element.scrollTop(currentTop),shouldClear=step>0?currentTop>=newTop:newTop>=currentTop,shouldClear?clearInterval(interval):void 0},10)},Menu.prototype._sortedFields=function(){var sortBy;return sortBy=function(a,b){var aOffset,aX,aY,bOffset,bX,bY;return aOffset=a.element.offset(),aX=aOffset.left,aY=aOffset.top,bOffset=b.element.offset(),bX=bOffset.left,bY=bOffset.top,aY===bY&&aX===bX?0:aY===bY?aX-bX:aY-bY},this.fields.sort(sortBy)},Menu.prototype._submit=function(){return this.owner.form.submit()},Menu.prototype._trackProgress=function(){var count,message,remaining,requiredFieldsSatisfied,satisfiedFields,total;return total=this.fields.length,satisfiedFields=this.fields.select(function(f){return f.isSatisfied()}),count=satisfiedFields.length,remaining=total-count,message=0===remaining?"All fields are filled out.":"You have "+remaining+" field"+(1===remaining?"":"s")+" remaining.",this.progress.message.text(message),this.progress.bar.animate({width:""+count/total*100+"%"},200),requiredFieldsSatisfied=this.fields.select(function(f){return f.required?f.isSatisfied():!0}),requiredFieldsSatisfied.length===total?this.submission.container.show():void 0},Menu}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Signing.Sign.Modal=function(){function Modal(element){this.element=element,this._uploadImage=__bind(this._uploadImage,this),this._selectUpload=__bind(this._selectUpload,this),this._previewUpload=__bind(this._previewUpload,this),this._useSignatureType=__bind(this._useSignatureType,this),this._renderTyping=__bind(this._renderTyping,this),this._useSignatureDraw=__bind(this._useSignatureDraw,this),this._drawFinish=__bind(this._drawFinish,this),this._drawMove=__bind(this._drawMove,this),this._drawBegin=__bind(this._drawBegin,this),this._clearDrawing=__bind(this._clearDrawing,this),this._useImage=__bind(this._useImage,this),this._applyToAll=__bind(this._applyToAll,this),this.hide=__bind(this.hide,this),this.element.exists()&&(this.assignElements(),this.observeElements())}return Modal.prototype.assignElements=function(){var canvas,canvasContainer;return this.form=$("form#signing_form"),this.type=this.element.find(".modal-title").data("type"),this.tabs={draw:this.element.find("[data-tab=draw]"),type:this.element.find("[data-tab=type]"),upload:this.element.find("[data-tab=upload]")},canvasContainer=this.element.find(".signature__canvas"),canvas=this.tabs.draw.find("canvas"),canvas.attr("height",canvasContainer.height()),canvas.attr("width",canvasContainer.width()),this.draw={canvas:canvas,context:canvas[0].getContext("2d"),clear:this.tabs.draw.find(".signature__canvas-clear"),drawing:!1},this.draw.context.strokeStyle="#000000",this.draw.context.lineWidth=.2},Modal.prototype.hide=function(){return this.element.hide(),this.element.find("form").reset(),this.tabs.upload.find(".preview").html(""),this.tabs.type.find("canvas").remove(),this.element.find("[data-target]").first().click()},Modal.prototype.observeElements=function(){return this.element.on("modal:hide",this.hide),this.draw.canvas.on("mousedown touchstart",this._drawBegin),this.draw.canvas.on("mousemove touchmove",this._drawMove),this.draw.canvas.on("mouseup mouseout touchend",this._drawFinish),this.draw.clear.on("click",this._clearDrawing),this.tabs.type.on("input","input:text",this._renderTyping),this.tabs.type.find("input:text").trigger("input"),this.tabs.upload.on("change","input:file",this._uploadImage),this.tabs.upload.on("click","form a.button",this._selectUpload),this.element.on("click","a.use-image",this._useImage),this.element.on("click","input.apply-to-all",this._applyToAll)},Modal.prototype.open=function(currentField){return this.currentField=currentField,$(".modal-wrapper").hide(),this.element.show(),top.modal.resize(),this._clearDrawing()},Modal.prototype._applyToAll=function(event){var checkbox;return checkbox=$(event.target).closest("input:checkbox"),this.applyToAll=checkbox.is(":checked")},Modal.prototype._replaceTemporaryImage=function(field){var _this=this;return function(field){return function(imageUrl){return null!=imageUrl?_this.applyToAll?_this.form.trigger(""+_this.type+":apply-image",{src:imageUrl}):field.applyImage(imageUrl):void 0}}(field)},Modal.prototype._useImage=function(event){var tab;return event.stop(),tab=this.element.find(".modal__tab-content--active"),this["_useSignature"+tab.data("tab").capitalize()]()},Modal.prototype._useTemporarySignatureImageData=function(imageData){return this.applyToAll?this.form.trigger(""+this.type+":apply-temporary-image",{src:imageData}):this.currentField.applyTemporaryImage(imageData),this.hide()},Modal.prototype._clearDrawing=function(event){return null!=event&&event.stop(),this.draw.context.save(),this.draw.context.setTransform(1,0,0,1,0,0),this.draw.context.clearRect(0,0,this.draw.canvas.width(),this.draw.canvas.height()),this.draw.context.restore(),this.draw.clear.hide()},Modal.prototype._drawBegin=function(event){return this.draw.context.beginPath(),this.draw.context.moveTo(this._x(event),this._y(event)),this.draw.drawing=!0,this.draw.clear.show()},Modal.prototype._drawMove=function(event){return this.draw.drawing?(event.preventDefault(),this.draw.context.lineTo(this._x(event),this._y(event)),this.draw.context.stroke()):void 0},Modal.prototype._drawFinish=function(){return this.draw.drawing=!1},Modal.prototype._useSignatureDraw=function(){var form,imageData;return form=this.draw.canvas.closest("form"),imageData=this.draw.canvas.croppedDataUrl(),imageData!==this._emptyDrawing?($.ajax({url:form.attr("action"),type:"post",message:"no-message",data:defaultParams({image_data:imageData})}).done(this._replaceTemporaryImage(this.currentField)),this._useTemporarySignatureImageData(imageData)):void 0},Modal.prototype._x=function(event){return event.type.match(/touch/)&&(event=event.originalEvent),event.offsetX||event.layerX||0},Modal.prototype._y=function(event){return event.type.match(/touch/)&&(event=event.originalEvent),event.offsetY||event.layerY||0},Modal.prototype._emptyDrawing="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACWCAYAAABkW7XSAAAEYklEQVR4Xu3UAQkAAAwCwdm/9HI83BLIOdw5AgQIRAQWySkmAQIEzmB5AgIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlACBB1YxAJfjJb2jAAAAAElFTkSuQmCC",Modal.prototype._fontFamily=function(canvas){var fontClass;return fontClass=canvas.parents(".signature__type-option").find("input:radio").val(),fontClass.replace(/_[4|7]00/g,"").replace("_italic","").replace(/_/g," ")},Modal.prototype._renderTyping=function(event){var canvas,e,name,_i,_len,_ref;for(name=$(event.target).val().replace(/\s/g,"&nbsp;"),_ref=this.tabs.type.find(".signature__type-option .canvas"),_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],canvas=$(e).find(".signature__type-rendered-signature"),canvas.html(name),Cufon.replace(canvas,{fontFamily:this._fontFamily(canvas)});return top.modal.resize()},Modal.prototype._useSignatureType=function(){var canvas,form,imageData,radio;return radio=this.tabs.type.find("input:radio:checked"),radio.exists()?(canvas=radio.closest(".signature__type-option").find("canvas"),form=canvas.closest("form"),imageData=canvas[0].toDataURL(),$.ajax({url:form.attr("action"),type:"post",message:"no-message",data:defaultParams({image_data:imageData})}).done(this._replaceTemporaryImage(this.currentField)),this._useTemporarySignatureImageData(imageData)):void 0},Modal.prototype._previewUpload=function(imageUrl){var img;return img=$("<img src='"+imageUrl+"' />"),img.on("load",function(){return top.modal.resize()}),this.tabs.upload.find(".signing__upload-signature-preview").html(img)},Modal.prototype._selectUpload=function(event){return event.stop(),this.tabs.upload.find("input:file").click()},Modal.prototype._uploadImage=function(){var field,form;return field=this.tabs.upload.find("input:file"),field.val().blank()?void 0:(form=field.closest("form"),$.ajax({url:form.attr("action"),type:"post",message:"Processing Upload",data:new FormData(form[0]),cache:!1,processData:!1,contentType:!1}).done(this._previewUpload))},Modal.prototype._useSignatureUpload=function(){var uploadedImage;return uploadedImage=this.tabs.upload.find(".signing__upload-signature-preview img"),uploadedImage.exists()?(this._replaceTemporaryImage(this.currentField)(uploadedImage.attr("src")),this.currentField.updateFormFields(),this.hide()):void 0},Modal}()}.call(this),function(){null==this.Sites&&(this.Sites={})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Branding=function(){function Branding(){this._setPreview=__bind(this._setPreview,this),this._focusInput=__bind(this._focusInput,this),this.assignElements(),this.observeElements()}return Branding.prototype.assignElements=function(){return this.colors=$(".branding__color"),this.colorInputs=this.colors.find("input")},Branding.prototype.observeElements=function(){return this.colors.on("click",this._focusInput),this.colorInputs.colorpicker({alpha:!1,position:"center"}),this.colorInputs.on("keydown",this._triggerChange),this.colorInputs.on("change",this._setPreview)},Branding.prototype._focusInput=function(e){return $(e.currentTarget).find("input").focus()},Branding.prototype._setPreview=function(e){var input,preview;return input=$(e.target),preview=input.prev(".preview"),preview.css("background-color",input.val())},Branding.prototype._triggerChange=function(e){return 13===e.keyCode?(e.preventDefault(),$(e.target).trigger("change")):void 0},Branding}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Code={},Sites.Code.Form=function(){function Form(){this._enforceStylePosition=__bind(this._enforceStylePosition,this),this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){return this.element=$("form.grid-container"),this.fields={type:this.element.find('select[name*="[code_type]"]'),position:this.element.find('select[name*="[position]"]')}},Form.prototype.observeElements=function(){return this.fields.type.on("change",this._enforceStylePosition)},Form.prototype._enforceStylePosition=function(){return"css"===this.fields.type.val()?(this.fields.position.find("option").hide(),this.fields.position.find("option[value=head]").show(),this.fields.position.val("head").change()):this.fields.position.find("option").show()},Form}()}.call(this),function(){Sites.Domains=function(){function Domains(){new Sites.Domains.Custom,new Sites.Domains.Subdomain}return Domains}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Domains.Custom=function(){function Custom(){this._toggleTldOptions=__bind(this._toggleTldOptions,this),this._toggleAvailabilityTrigger=__bind(this._toggleAvailabilityTrigger,this),this._checkAvailability=__bind(this._checkAvailability,this),this.assignElements(),this.observeElements()}return Custom.prototype.assignElements=function(){return this.form=$("#domain-form"),this.suffixSelect=this.form.find("select#domain_suffix"),this.ownership=this.form.find('input:radio[name="domain[ownership]"]'),this.tldOptions={},this.availabilityTrigger=this.form.find("a.domain-availability")},Custom.prototype.observeElements=function(){return this.ownership.on("click",this._toggleAvailabilityTrigger),this.ownership.on("click",this._toggleTldOptions),this.availabilityTrigger.on("click",this._checkAvailability)},Custom.prototype._checkAvailability=function(event){return event.stop(),$.ajax({url:this.availabilityTrigger.attr("href"),type:"get",data:this.form.serialize()})},Custom.prototype._toggleAvailabilityTrigger=function(event){var method,value;return value=$(event.target).attr("value"),method="managed"===value?"show":"hide",this.availabilityTrigger[method]()},Custom.prototype._toggleTldOptions=function(event){var options,suffix,target,tld,value,_base,_i,_len,_ref;for(target=$(event.target),value=target.attr("value"),suffix=this.suffixSelect.val(),null==(_base=this.tldOptions)[value]&&(_base[value]=target.closest(".radio-field").data("values")),options="",_ref=this.tldOptions[value],_i=0,_len=_ref.length;_len>_i;_i++)tld=_ref[_i],options+="<option value='."+tld+"'>."+tld+"</option>";return this.suffixSelect.html(options).val(suffix)},Custom}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Domains.Subdomain=function(){function Subdomain(){this._checkAvailability=__bind(this._checkAvailability,this),this.assignElements(),this.observeElements()}return Subdomain.prototype.assignElements=function(){return this.form=$("#subdomain-form"),this.field=this.form.find("input:text"),this.submit=this.form.find("input[type=submit]"),this.availabilityTrigger=this.form.find("a.domain-availability")},Subdomain.prototype.observeElements=function(){return this.availabilityTrigger.on("click",this._checkAvailability)},Subdomain.prototype._checkAvailability=function(event){return event.stop(),$.ajax({url:this.availabilityTrigger.attr("href"),type:"get",data:this.form.serialize()})},Subdomain}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Editor=function(){function Editor(pageType,menuHtml){this.pageType=pageType,this.menuHtml=menuHtml,this.setupPostEditor=__bind(this.setupPostEditor,this),this.observeFrameElements=__bind(this.observeFrameElements,this),this.deselect=__bind(this.deselect,this),this.assignElements(),this.observeElements()}return Editor.prototype.assignElements=function(){return this.element=$(".website-editor"),this.iframe=$(".website-preview iframe"),this.types=["section","element"],this.current={},this.preview=new Sites.Editor.Preview},Editor.prototype.deselect=function(){var t,_i,_len,_ref,_results;for(this.frame.find(".selected").removeClass("selected"),_ref=this.types,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)t=_ref[_i],_results.push(this.current[t]=null);return _results},Editor.prototype.enableDragDrop=function(){var e,_i,_len,_ref,_results;for(_ref=this.frame.find(".column:not(.ui-sortable)"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],_results.push(this.iframe[0].contentWindow.$(e).sortable({connectWith:this.helper.dragConnection(),items:".page-element",handle:".handle",tolerance:"pointer",start:function(event,ui){return ui.item.trigger("click")}}));return _results},Editor.prototype.enableTextEditing=function(){return this.frame.find(".page-element[data-type=text] .text-content").attr("contenteditable","true"),this.frame.find(".page-element[data-type=button] .text-content").attr("contenteditable","true")},Editor.prototype.getOverlay=function(name){return this.element.find(".overlay.for-"+name).removeClass("is-loading").hide()},Editor.prototype.html=function(){var container;return container=this.frame.find(".content-wrapper").clone(),container.find(".page-element.selected,.page-section.selected").removeClass("selected"),container.find(".editor-toolbar").remove(),container.find(".page-element-placeholder").remove(),container.find(".page-widget-placeholder").remove(),container.find('[data-widget]:not([data-widget="form"])').html(""),container.find(".fs-webform-wrapper").remove(),container.find("[contenteditable]").removeAttr("contenteditable"),container.find(".editor-hover").removeClass("editor-hover"),container.find(".ui-sortable").removeClass("ui-sortable"),container.html()},Editor.prototype.manuallySelect=function(element,type){var t,_i,_len,_ref;for(this.frame.find(".selected").removeClass("selected"),element.addClass("selected"),_ref=this.types,_i=0,_len=_ref.length;_len>_i;_i++)t=_ref[_i],this.current[t]=null;return this.current[type]=element,this.menu.show(type)},Editor.prototype.observeElements=function(){return Observations.on("site:frame-loaded",this.observeFrameElements)},Editor.prototype.observeFrameElements=function(){var type,_i,_len,_ref;for(this.frame=this.iframe.contents(),this.helper=Sites.Editor.Helper(this),this.toolbar=new Sites.Editor.Toolbar(this),this.menu=new Sites.Editor.Menu(this),_ref=this.types,_i=0,_len=_ref.length;_len>_i;_i++)type=_ref[_i],this.helper.canSelect(type)&&this.frame.on("click",".page-"+type,this._select(type));return this.frame.on("click","a",function(e){return e.preventDefault()}),this.enableDragDrop(),this.enableTextEditing(),this.setupPostEditor()},Editor.prototype.setupPostEditor=function(){var contentBlocker;if("post"===this.pageType)return contentBlocker=$("<div>").addClass("content-blocker"),this.frame.find("body").append(contentBlocker)},Editor.prototype._select=function(type){var _this=this;return function(type){return function(event){var element,t,target,targets,_i,_len,_ref,_target;for(target=$(event.target),targets=[],_ref=_this.types,_i=0,_len=_ref.length;_len>_i;_i++)t=_ref[_i],_target=target.closest(".page-"+t),_target.exists()&&targets.push(_target);return"section"===type&&targets.length>1?void 0:(element=$(event.target).closest(".page-"+type),_this.manuallySelect(element,type))}}(type)},Editor}()}.call(this),function(){var _ref,_ref1,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Helper=function(editor){var className;return className=editor.pageType.capitalize(),new Sites.Editor.Helper[className](editor)},Sites.Editor.Helper.Base=function(){function Base(editor){this.editor=editor}return Base.prototype.canSelect=function(){return!0},Base.prototype.displayToolbarFor=function(){return!0},Base.prototype.dragConnection=function(){return".column"},Base}(),Sites.Editor.Helper.Page=function(_super){function Page(){return _ref=Page.__super__.constructor.apply(this,arguments)}return __extends(Page,_super),Page}(Sites.Editor.Helper.Base),Sites.Editor.Helper.Post=function(_super){function Post(){return _ref1=Post.__super__.constructor.apply(this,arguments)}return __extends(Post,_super),Post.prototype.canSelect=function(type){return"section"!==type},Post.prototype.displayToolbarFor=function(type){return"section"!==type},Post.prototype.dragConnection=function(){return".column .blog-post__body"},Post}(Sites.Editor.Helper.Base)}.call(this),function(){Sites.Editor.Menu=function(){function Menu(editor){this.editor=editor,this.assignElements(),this.observeElements(),this.elements.main.trigger("activate")}return Menu.prototype.assignElements=function(){var t,_i,_len,_ref,_this=this;for(this.container=$("#editor-menus"),this.container.html(this.editor.menuHtml),this.elements={main:$('[data-menu-for="object"]')},_ref=this.editor.types,_i=0,_len=_ref.length;_len>_i;_i++)t=_ref[_i],this.elements[t]=$("[data-menu-for='editor-"+t+"']");return this.elements.main.html(this.html),this.form=this.elements.main.find("form"),this.frame=this.editor.frame,this.current=this.editor.current,this.helpers=["back","save","add","remove","image-picker","image","background-image","classification","blog-posts","recent-posts","blog_categories","blog_post","background-color","link","video","text-styling","code","form","persistence","menu","listings","limit","padding","alignment","text-color","page-styling","link-color","button","spacer","hr","colorpicker","duplicate"].map(function(n){return new(Sites.Editor.Menu.Helper[n.camelCase().capitalize()])(_this)}),this.frame.find(".elements").show()},Menu.prototype.observeElements=function(){var object,_i,_len,_ref,_results;for(this.initializeSelectors(),_ref=this.helpers,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)object=_ref[_i],_results.push(object.observeElements());return _results},Menu.prototype.initializeSelectors=function(){var selectors;return selectors=this.container.find(".selector select").map(function(i,el){return $(el).is(".text-styling select")?void 0:el}),selectors.trigger("change")},Menu.prototype.show=function(type){var element,helper,menu,_i,_len,_ref;for(_ref=this.helpers,_i=0,_len=_ref.length;_len>_i;_i++)helper=_ref[_i],helper.deactivate();return menu=this.elements[type],element=this.current[type],this.showMenuSections(menu,element,type),menu.is(".is-active")?void 0:menu.trigger("activate")},Menu.prototype.showMenuSections=function(menu,element,type){var e,elementType,helper,regex,section,sections,_i,_len,_results;for(sections=menu.find(".design-section").hide(),elementType=element.data("type"),null==elementType&&(elementType=element.data("widget")),null==elementType&&(elementType=type),_results=[],_i=0,_len=sections.length;_len>_i;_i++)e=sections[_i],section=$(e),regex=new RegExp(section.data("matches")),elementType.match(regex)?(section.show(),_results.push(function(){var _j,_len1,_ref,_results1;for(_ref=this.helpers,_results1=[],_j=0,_len1=_ref.length;_len1>_j;_j++)helper=_ref[_j],helper.applicableTo(section)?_results1.push(helper.applyTo(element)):_results1.push(void 0);return _results1}.call(this))):_results.push(void 0);return _results},Menu}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Editor.Menu.Helper=function(){function Helper(menu){this.menu=menu,this._deactivate=__bind(this._deactivate,this),this.editor=this.menu.editor,this.elements=this.menu.elements,this.form=this.menu.form,this.frame=this.menu.frame,this.iframe=this.editor.iframe[0],this.current=this.menu.current,this.toolbar=this.editor.toolbar,this.pageType=this.editor.pageType,this.assignElements()}return Helper.prototype.applicableTo=function(){return!1},Helper.prototype.applyTo=function(){},Helper.prototype.assignElements=function(){},Helper.prototype.deactivate=function(){return $(".cp-color-picker").hide()},Helper.prototype.observeElements=function(){},Helper.prototype.on=function(eventName,callback){return $(this.iframe).on(eventName,callback)},Helper.prototype.trigger=function(eventName,data){return $(this.iframe).trigger(eventName,data)},Helper.prototype._currentSelection=function(){var anchorElement,findElement,focusElement,node,range,result,selection,_i,_len,_ref,_this=this;if(selection=this._getSelection()){if(findElement=function(node){var result;if(node&&(result=_this.iframe.contentWindow.$(node),result.exists()))return node.tagName||(result=result.parent()),result.exists()||(result=_this.iframe.contentWindow.$(node.parentNode)),result},anchorElement=findElement(selection.anchorNode),focusElement=findElement(selection.focusNode),result={start:anchorElement,end:focusElement,originalSelection:selection},focusElement)if(focusElement.is(anchorElement))result.element=anchorElement;else for(result.elements=[],range=selection.getRangeAt(0),_ref=this.__nodesInRange(range),_i=0,_len=_ref.length;_len>_i;_i++)node=_ref[_i],result.elements.push($(node));return result}},Helper.prototype._deactivate=function(event){var parent;return parent=$(event.target).closest("[data-name]"),parent.find(".color-preview").exists()?void 0:this.deactivate()},Helper.prototype._execCommand=function(command,value){return this.iframe.contentDocument.execCommand(command,!1,value),this.iframe.contentWindow.focus()},Helper.prototype._getSelection=function(){var d,m,w;return w=this.iframe.contentWindow,d=this.iframe.contentDocument,m="getSelection",null!=w[m]?w[m]():null!=d[m]?d[m]():void 0},Helper.prototype.__nextNode=function(node){if(node.hasChildNodes())return node.firstChild;for(;node&&!node.nextSibling;)node=node.parentNode;if(node)return node.nextSibling},Helper.prototype.__nodesInRange=function(range){var endNode,node,nodes;for(nodes=[],node=range.startContainer,endNode=range.endContainer;node&&node!==endNode;)node=this.__nextNode(node),node.tagName&&nodes.push(node);for(node=range.startContainer;node&&node!==range.commonAncestorContainer;)node.tagName&&nodes.unshift(node),node=node.parentNode;return nodes},Helper.prototype._render=function(){},Helper}()}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Add=function(_super){function Add(){return this._manuallyAddSection=__bind(this._manuallyAddSection,this),this._manuallyAddOption=__bind(this._manuallyAddOption,this),this._manuallyAddElement=__bind(this._manuallyAddElement,this),this._addExistingOption=__bind(this._addExistingOption,this),_ref=Add.__super__.constructor.apply(this,arguments)}return __extends(Add,_super),Add.prototype.assignElements=function(){return this.overlay={section:this.editor.getOverlay("layout"),element:this.editor.getOverlay("element")}},Add.prototype.observeElements=function(){var type,_i,_len,_ref1;for(_ref1=this.editor.types,_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],this.overlay[type]&&(this.overlay[type].on("click",".option",this._addOption(type)),this.overlay[type].on("click",".overlay-close",this._hideOverlay(type)),this.elements[type].on("click","a.add",this._showOverlay(type)),this.elements.main.on("click","a.add-"+type,this._showOverlay(type)));return this.overlay.section.on("click",".add-existing-section",this._addExistingOption),this.elements.section.on("click","a.add-element",this._showOverlay("element")),this.frame.on("click",".page-element-placeholder",this._showOverlay("element"))},Add.prototype._addExistingOption=function(event){return this._addOption("section")(event),this.editor.toolbar.addToolbars()},Add.prototype._addOption=function(type){var _this=this;return function(type){return function(event){var newElement;return _this._hideOverlay(type)(),newElement=_this._manuallyAddOption(type,event),_this.editor.manuallySelect(newElement,type)}}(type)},Add.prototype._hideOverlay=function(type){var _this=this;return function(type){return function(){return _this.overlay[type].hide()}}(type)},Add.prototype._lastSection=function(){return"post"===this.pageType?this.frame.find(".blog-post"):this.frame.find(".page-content .page-section").last()},Add.prototype._manuallyAddElement=function(options){var section;return this.placeholder.exists()?(options.anchor=this.placeholder,options.position="replaceWith",options):options.anchor?(options.position=options.overlay.find("input:radio:checked").val(),options):(section=this.current.section||this._lastSection(),section.exists()||(this.overlay.section.find(".option").first().click(),section=this._lastSection(),section.find(".column").html("")),options.anchor=section.is(".blog-post")?section:section.find(".column:first-child"),options.position="append",options.scrollToNewElement=!0,options)
},Add.prototype._manuallyAddOption=function(type,event){var option,result,_new;return option=this["_selected"+type.capitalize()+"Option"](event),_new=this["_new"+type.capitalize()+"FromOption"](option),result=this["_manuallyAdd"+type.capitalize()]({anchor:this.current[type],overlay:this.overlay[type],newElement:_new}),result.anchor[result.position](result.newElement),result.scrollToNewElement&&this.frame.find("body").animate({scrollTop:result.newElement.offset().top}),this.editor.enableDragDrop(),this.editor.enableTextEditing(),result.newElement},Add.prototype._manuallyAddSection=function(options){return options.anchor?(options.position=options.overlay.find("input:radio:checked").val(),options):(options.anchor=this.frame.find(".page-content"),options.position="append",options.scrollToNewElement=!0,options)},Add.prototype._newElementFromOption=function(option){return $(option.find(".template").html())},Add.prototype._newSectionFromOption=function(option){var template;return option.is("option")?(template=option.closest(".site__layout-option").find(".template[data-section-id="+option.attr("value")+"]"),$(template.html())):$(option.find(".template").html())},Add.prototype._selectedElementOption=function(event){return $(event.target).closest(".option")},Add.prototype._selectedSectionOption=function(event){var select,target;return target=$(event.target),target.closest(".add-existing-section").exists()?(select=target.closest(".site__layout-option").find("select"),select.find("option[value="+select.val()+"]")):target.closest(".option")},Add.prototype._showOverlay=function(type){var _this=this;return function(type){return function(event){var method,target;return event.stop(),target=$(event.target),_this.placeholder=target.closest(".page-"+type+"-placeholder"),method=_this.current[type]?"show":"hide",_this.overlay[type].find(".position")[method](),_this.overlay[type].show()}}(type)},Add}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Alignment=function(_super){function Alignment(){return this._update=__bind(this._update,this),_ref=Alignment.__super__.constructor.apply(this,arguments)}return __extends(Alignment,_super),Alignment.prototype.applicableTo=function(section){var alignment;return alignment=section.find('[data-name="alignment"]'),alignment.exists()?(this._assignElements(section),!0):!1},Alignment.prototype.applyTo=function(element){var alignment,o,_i,_len,_ref1;for(alignment="align-left",_ref1=this.options,_i=0,_len=_ref1.length;_len>_i;_i++)o=_ref1[_i],element.hasClass(o)&&(alignment=o);return this.skipUpdate=!0,this.select.val(alignment).change(),this.skipUpdate=!1},Alignment.prototype.observeElements=function(){return this.elements.element.find('[data-name="alignment"] select').on("change",this._update)},Alignment.prototype._assignElements=function(section){return this.select=section.find('[data-name="alignment"] select'),this.options=this.select.find("option").toArray().map(function(o){return $(o).attr("value")})},Alignment.prototype._update=function(){var element,o,_i,_len,_ref1;if(!this.skipUpdate){for(element=this.current.element,_ref1=this.options,_i=0,_len=_ref1.length;_len>_i;_i++)o=_ref1[_i],element.removeClass(o);return element.addClass(this.select.val())}},Alignment}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Back=function(_super){function Back(){return _ref=Back.__super__.constructor.apply(this,arguments)}return __extends(Back,_super),Back.prototype.observeElements=function(){var type,_i,_len,_ref1,_results;for(_ref1=this.editor.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],_results.push(this.elements[type].on("click","a.back-link",this.editor.deselect));return _results},Back}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.BackgroundColor=function(_super){function BackgroundColor(){return _ref=BackgroundColor.__super__.constructor.apply(this,arguments)}return __extends(BackgroundColor,_super),BackgroundColor.prototype.applicableTo=function(section){return section.find('[data-name="background-color"]').exists()},BackgroundColor.prototype.applyTo=function(element){var color,section,type,_i,_len,_ref1,_results;for(color=element.css("background-color"),"rgba(0, 0, 0, 0)"===color&&(color=""),_ref1=this.editor.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],section=this.elements[type].find('[data-name="background-color"]'),_results.push(section.find("input.color-input").val(color));return _results},BackgroundColor.prototype.observeElements=function(){var section,type,_i,_len,_ref1,_results;for(_ref1=this.editor.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],section=this.elements[type].find('[data-name="background-color"]'),section.find(".color-input").on("change",this._render(type)),_results.push(this.elements[type].on("click",this._deactivate));return _results},BackgroundColor.prototype._render=function(type){var _this=this;return function(type){return function(e){var color;return color=$(e.target).val(),_this.current[type]?_this.current[type].css({backgroundColor:color}):void 0}}(type)},BackgroundColor}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.BackgroundImage=function(_super){function BackgroundImage(){return this._updateRepeat=__bind(this._updateRepeat,this),this._showOverlay=__bind(this._showOverlay,this),this._remove=__bind(this._remove,this),_ref=BackgroundImage.__super__.constructor.apply(this,arguments)}return __extends(BackgroundImage,_super),BackgroundImage.prototype.applicableTo=function(section){return section.find('[data-name="background-image"]').exists()},BackgroundImage.prototype.applyTo=function(element){var repeat,url;return url=element.css("background-image"),"none"===url?(this.wrapper.removeClass("has-image"),this.container.find(".placeholder").text("No Image")):(url=url.replace(/^url\((['"]?)(.*?)(['"]?)\)$/,"$2"),this.placeholder.text(url.split("/").last()),this.wrapper.addClass("has-image")),repeat="Full",element.hasClass("background-image-repeat")&&(repeat="Tile"),this.inputs.repeat.val(repeat).change()},BackgroundImage.prototype.assignElements=function(){return this.container=this.elements.section.find('[data-name="background-image"]'),this.wrapper=this.container.find(".image-wrapper"),this.placeholder=this.container.find(".placeholder"),this.inputs={name:this.container.find(".image-input"),repeat:this.container.find("select")}},BackgroundImage.prototype.imageSelected=function(image){return this.current.section.css("background-image","url('"+image.attr("src")+"')"),this.placeholder.text(image.attr("alt")),this.wrapper.addClass("has-image")},BackgroundImage.prototype.observeElements=function(){return this.inputs.name.on("click",this._showOverlay),this.inputs.repeat.on("change",this._updateRepeat),this.container.on("click","a.remove-image",this._remove)},BackgroundImage.prototype._remove=function(event){return event.stop(),confirm("Are you sure you want to remove this background image?")?(this.current.section.css("background-image","none"),this.wrapper.removeClass("has-image"),this.container.find(".placeholder").text("No Image")):void 0},BackgroundImage.prototype._showOverlay=function(){return this.trigger("image-picker:open",{object:this})},BackgroundImage.prototype._updateRepeat=function(){var repeat,section;return section=this.current.section,section.removeClass("background-image-repeat background-image-no-repeat"),repeat={Full:"no-repeat",Tile:"repeat"}[this.inputs.repeat.val()],section.addClass("background-image-"+repeat)},BackgroundImage}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.BlogLinkList=function(_super){function BlogLinkList(){return _ref=BlogLinkList.__super__.constructor.apply(this,arguments)}return __extends(BlogLinkList,_super),BlogLinkList.prototype.selector="",BlogLinkList.prototype.assignElements=function(){var e,_i,_len,_ref1;for(this.element=this.elements.element.find("[data-matches='"+this.selector+"']"),this.placeholder=this.element.find(".placeholder"),_ref1=this.frame.find("[data-widget='"+this.selector+"']"),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],$(e).html(this.placeholder.html());return this.toolbar.addToolbars()},BlogLinkList}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.BlogCategories=function(_super){function BlogCategories(){return _ref=BlogCategories.__super__.constructor.apply(this,arguments)}return __extends(BlogCategories,_super),BlogCategories.prototype.selector="blog/categories",BlogCategories}(Sites.Editor.Menu.Helper.BlogLinkList)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.BlogPost=function(_super){function BlogPost(){return this._updateTitle=__bind(this._updateTitle,this),this._updatePostedAt=__bind(this._updatePostedAt,this),this._updateCategoryLinks=__bind(this._updateCategoryLinks,this),this._updateAuthor=__bind(this._updateAuthor,this),this._togglePostedAt=__bind(this._togglePostedAt,this),_ref=BlogPost.__super__.constructor.apply(this,arguments)}return __extends(BlogPost,_super),BlogPost.prototype.assignElements=function(){return"post"===this.pageType?(this.title=this.elements.main.find('input:text[name*="[title]"]'),this.author=this.elements.main.find('input:text[name*="[author]"]'),this.postedAt=this.elements.main.find('input:text[name*="[posted_at]"]'),this.showPostedAt=this.elements.main.find('input:checkbox[name*="[display_post_date]"]'),this.categories=this.elements.main.find('input[name*="[categories]"]')):void 0},BlogPost.prototype.observeElements=function(){return"post"===this.pageType?(this.title.on("input",this._updateTitle),this.author.on("input",this._updateAuthor),this.postedAt.on("input",this._updatePostedAt),this.showPostedAt.on("click",this._togglePostedAt),this.categories.on("classifier:changed",this._updateCategoryLinks)):void 0},BlogPost.prototype._detailsElements=function(selector){var elements;return elements=this.frame.find(selector),elements.add(this.editor.element.find(selector))},BlogPost.prototype._togglePostedAt=function(){var dates;return dates=this._detailsElements(".meta-item.date"),this.showPostedAt.is(":checked")?dates.show():dates.hide()},BlogPost.prototype._updateAuthor=function(){var authors,name;return name=this.author.val(),authors=this._detailsElements(".meta-item.author"),name.blank()?authors.hide():authors.show().find("span").text(name)},BlogPost.prototype._updateCategoryLinks=function(){var anchor,categories,category,elements,index,_i,_len,_results;for(categories=this.categories.val().split(","),elements=this._detailsElements(".meta-item.category"),elements.html(""),_results=[],index=_i=0,_len=categories.length;_len>_i;index=++_i)category=categories[index],0!==index&&elements.append(" | "),anchor=$("<a>").attr({href:"#"}).text(category),_results.push(elements.append(anchor));return _results},BlogPost.prototype._updatePostedAt=function(){var date,dates;return date=this.postedAt.val(),dates=this._detailsElements(".meta-item.date"),date.blank()?dates.hide():dates.show().find("span").text(date)},BlogPost.prototype._updateTitle=function(){var titles;return titles=this.frame.find('.page-element[data-type="post_title"] a'),titles.text(this.title.val())},BlogPost}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.BlogPosts=function(_super){function BlogPosts(){return _ref=BlogPosts.__super__.constructor.apply(this,arguments)}return __extends(BlogPosts,_super),BlogPosts.prototype.assignElements=function(){var e,_i,_len,_ref1;for(this.element=this.elements.element.find('[data-matches="blog/posts"]'),this.placeholder=this.element.find(".placeholder"),_ref1=this.frame.find('[data-widget="blog/posts"]'),_i=0,_len=_ref1.length;_len>_i;_i++)e=_ref1[_i],$(e).html(this.placeholder.html());return this.toolbar.addToolbars()},BlogPosts}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Button=function(_super){function Button(){return this._updateUrl=__bind(this._updateUrl,this),this._roundCorners=__bind(this._roundCorners,this),this._resize=__bind(this._resize,this),_ref=Button.__super__.constructor.apply(this,arguments)}return __extends(Button,_super),Button.prototype.applicableTo=function(section){return section.is(this.container)},Button.prototype.applyTo=function(element){var anchor,clone,color,radiusInPixels,section,sizeInPixels,style,type,_i,_len,_ref1,_results;for(anchor=element.find("a"),this.pixelsPerEm||(clone=anchor.clone().hide(),element.append(clone),clone.css({fontSize:"1rem"}),this.pixelsPerEm=parseInt(clone.css("font-size")),clone.remove()),this.inputs.url.val(anchor.attr("href")),radiusInPixels=parseInt(anchor.css("border-radius")),this.inputs.radius.val(radiusInPixels/this.pixelsPerEm),sizeInPixels=parseInt(anchor.css("font-size")),this.inputs.size.val(sizeInPixels/this.pixelsPerEm),_ref1=this.colorTypes,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],color=["button","button-text"].include(type)?(style={button:"background-color","button-text":"color"}[type],anchor.css(style)):element.attr("data-"+type+"-color"),section=this.elements.element.find("[data-name='"+type+"-color']"),_results.push(section.find("input.color-input").val(color));return _results},Button.prototype.assignElements=function(){return this.container=this.elements.element.find('[data-matches="button"]'),this.inputs={url:this.container.find('[data-name="url"] input:text'),radius:this.container.find('[data-name="border-radius"] input[type=range]'),size:this.container.find('[data-name="button-size"] input[type=range]')},this.colorTypes=["button","button-text","selected-button","selected-button-text"]},Button.prototype.observeElements=function(){var section,type,_i,_len,_ref1;for(this.inputs.url.on("input",this._updateUrl),this.inputs.radius.on("input",this._roundCorners),this.inputs.size.on("input",this._resize),_ref1=this.colorTypes,_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],section=this.container.find("[data-name='"+type+"-color']"),section.find(".color-input").on("change",this._render(type));return this.container.on("click",this._deactivate)},Button.prototype._render=function(type){var _this=this;return function(type){return function(e){var anchor,color,style;if(_this.current.element)return color=$(e.target).val(),anchor=_this.current.element.find("a"),["button","button-text"].include(type)?(style={button:"background-color","button-text":"color"}[type],anchor.css(style,color)):_this.current.element.attr("data-"+type+"-color",color)}}(type)},Button.prototype._resize=function(){return this.current.element?this.current.element.find("a").css("font-size",""+this.inputs.size.val()+"rem"):void 0},Button.prototype._roundCorners=function(){return this.current.element?this.current.element.find("a").css("border-radius",""+this.inputs.radius.val()+"rem"):void 0},Button.prototype._updateUrl=function(){return this.current.element?this.current.element.find("a").attr("href",this.inputs.url.val()):void 0},Button}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Classification=function(_super){function Classification(){return _ref=Classification.__super__.constructor.apply(this,arguments)}return __extends(Classification,_super),Classification.prototype.assignElements=function(){return this.classifiers={categories:this.elements.main.find('input[name*="[categories]"]'),tags:this.elements.main.find('input[name*="[tags]"]')}},Classification.prototype.observeElements=function(){var input,type,_ref1,_results;_ref1=this.classifiers,_results=[];for(type in _ref1)input=_ref1[type],_results.push(function(input){return input.tagsInput({defaultText:"Add a "+type.singularize()+" then hit enter",autocomplete_url:input.closest(".design-section__field").data("choices"),autocomplete:{delay:100,messages:{noResults:"",results:function(){return""}}},height:"auto",width:"auto",onAddTag:function(){return input.trigger("classifier:changed")},onRemoveTag:function(){return input.trigger("classifier:changed")}})}(input));return _results},Classification}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Code=function(_super){function Code(){return this._removeCode=__bind(this._removeCode,this),this._enforceStylePosition=__bind(this._enforceStylePosition,this),this._editCode=__bind(this._editCode,this),this._addNewCode=__bind(this._addNewCode,this),this._addCode=__bind(this._addCode,this),_ref=Code.__super__.constructor.apply(this,arguments)}return __extends(Code,_super),Code.prototype.assignElements=function(){return this.container=$(".design-section.codes"),this.template=this.container.find(".code-template").remove().html(),this.overlay=this.editor.getOverlay("codes"),this.fields={type:this.overlay.find("select#code_type"),position:this.overlay.find("select#code_position"),name:this.overlay.find("input#code_name"),content:this.overlay.find("textarea#code_content"),button:this.overlay.find("a.overlay-button")}},Code.prototype.observeElements=function(){var _this=this;return this.container.on("click","a.add-code",this._addNewCode),this.container.on("click","a.edit-code",this._editCode),this.container.on("click","a.remove-code",this._removeCode),this.overlay.on("click",".overlay-close",function(){return _this.overlay.hide()}),this.overlay.on("click",".add-code",this._addCode),this.fields.type.on("change",this._enforceStylePosition)},Code.prototype._addCode=function(event){var code,content,element,name,position,type;return event.stop(),content=this.fields.content.val(),content.blank()?void 0:(type=this.fields.type.val(),name=this.fields.name.val(),position=this.fields.position.val(),code={id:this.code?this.code.data("id"):$.now(),title:this.fields.type.find("option[value="+type+"]").text(),description:name.blank()?$("<div>").text(content).html().truncate():name},element=$(this.template.evaluate(code)),element.find('input[name*="code_type"]').val(type),element.find('input[name*="position"]').val(position),element.find('input[name*="name"]').val(name),element.find('input[name*="content"]').val(content),this.code?this.code.replaceWith(element):this.container.find(".design-section__field.codes-container").append(element),this.overlay.hide())},Code.prototype._addNewCode=function(event){return event.stop(),this.code=null,this.fields.type.val("tracker").change(),this.fields.position.val("head").change(),this.fields.name.val(""),this.fields.content.val(""),this.fields.button.text("Add Code"),this.overlay.show()},Code.prototype._editCode=function(event){return event.stop(),this.code=$(event.target).closest(".code"),this.fields.type.val(this.code.find('input[name*="code_type"]').val()),this.fields.position.val(this.code.find('input[name*="position"]').val()),this.fields.name.val(this.code.find('input[name*="name"]').val()),this.fields.content.val(this.code.find('input[name*="content"]').val()),this.fields.button.text("Update Code"),this.overlay.show()},Code.prototype._enforceStylePosition=function(){return"css"===this.fields.type.val()?(this.fields.position.find("option").hide(),this.fields.position.find("option[value=head]").show(),this.fields.position.val("head").change()):this.fields.position.find("option").show()},Code.prototype._removeCode=function(event){return event.stop(),confirm("Are you sure you want to remove this code?")?$(event.target).closest(".code").remove():void 0},Code}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Colorpicker=function(_super){function Colorpicker(){return _ref=Colorpicker.__super__.constructor.apply(this,arguments)}return __extends(Colorpicker,_super),Colorpicker.prototype.applicableTo=function(){return!0},Colorpicker.prototype.applyTo=function(){return $(document).trigger("colorpicker:hide"),this._updatePreviews()},Colorpicker.prototype.assignElements=function(){return this.colorInputs=this.menu.container.find(".color-input"),this.colorPreviews=this.menu.container.find(".color-preview")},Colorpicker.prototype.observeElements=function(){return this.colorInputs.colorpicker(),this.colorInputs.on("keydown",this._triggerChange),this.colorInputs.on("change",this._setPreview),this.colorPreviews.on("click",this._selectInput)},Colorpicker.prototype._selectInput=function(e){return $(e.target).prev(".color-input").focus()},Colorpicker.prototype._setPreview=function(e){var input,preview;return input=$(e.target),preview=input.next(".color-preview"),preview.css("background-color",input.val())},Colorpicker.prototype._triggerChange=function(e){return 13===e.keyCode?$(e.target).trigger("change"):void 0},Colorpicker.prototype._updatePreviews=function(){var _this=this;return this.colorInputs.each(function(i,el){return _this._setPreview({target:el})})},Colorpicker}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Duplicate=function(_super){function Duplicate(){return _ref=Duplicate.__super__.constructor.apply(this,arguments)}return __extends(Duplicate,_super),Duplicate.prototype.observeElements=function(){var type,_i,_len,_ref1,_results;for(_ref1=this.editor.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],_results.push(this.elements[type].on("click","a.duplicate",this._duplicate(type)));return _results},Duplicate.prototype._duplicate=function(type){var _this=this;return function(type){return function(event){var clone;return event.stop(),clone=_this.current[type].clone(),_this.current[type].after(clone),_this.editor.manuallySelect(clone,type)}}(type)},Duplicate}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Form=function(_super){function Form(){return this._update=__bind(this._update,this),this._editWebform=__bind(this._editWebform,this),_ref=Form.__super__.constructor.apply(this,arguments)}return __extends(Form,_super),Form.prototype.applicableTo=function(section){return section.is(this.element)},Form.prototype.applyTo=function(element){var formId;return null==element.attr("data-form-id")&&(formId=this.select.find("option").first().attr("value"),element.attr("data-form-id",formId),element.html(this._template(formId).html()),this.toolbar.addToolbars()),this.select.val(element.attr("data-form-id")).change()},Form.prototype.assignElements=function(){return this.element=this.elements.element.find("[data-matches=form]"),this.select=this.element.find("select"),this.editTrigger=this.element.find(".field-link")},Form.prototype.observeElements=function(){return this.select.on("change",this._update),this.editTrigger.on("click",this._editWebform)},Form.prototype._editWebform=function(event){var formId,url;return event.stop(),formId=this.select.val(),url=this.editTrigger.data("url").evaluate({id:formId}),window.open(url)},Form.prototype._template=function(formId){return this.element.find(".form-template[data-form-id="+formId+"] .fs-webform-wrapper")},Form.prototype._update=function(){var formId,widget;return widget=this.current.element,formId=this.select.val(),""+widget.attr("data-form-id")!=""+formId?(widget.attr("data-form-id",formId),widget.html(this._template(formId).html()),this.toolbar.addToolbars()):void 0},Form}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Hr=function(_super){function Hr(){return this._updatePadding=__bind(this._updatePadding,this),this._resize=__bind(this._resize,this),this._render=__bind(this._render,this),_ref=Hr.__super__.constructor.apply(this,arguments)}return __extends(Hr,_super),Hr.prototype.applicableTo=function(section){return section.is(this.container)},Hr.prototype.applyTo=function(element){var color,height,padding;return padding=parseInt(element.css("padding-top")),this.inputs.padding.val(padding),height=parseInt(element.find(".bar").css("height")),this.inputs.size.val(height),color=element.find(".bar").css("background-color"),this.inputs.color.val(color)},Hr.prototype.assignElements=function(){return this.container=this.elements.element.find('[data-matches="hr"]'),this.inputs={color:this.container.find('[data-name="hr-color"] input'),padding:this.container.find('[data-name="hr-padding"] input'),size:this.container.find('[data-name="hr-size"] input')}},Hr.prototype.observeElements=function(){return this.inputs.color.on("change",this._render),this.inputs.size.on("input",this._resize),this.inputs.padding.on("input change",this._updatePadding)},Hr.prototype._render=function(e){var color;return this.current.element?(color=$(e.target).val(),this.current.element.find(".bar").css("background-color",color)):void 0},Hr.prototype._resize=function(){return this.current.element?this.current.element.find(".bar").css("height",""+this.inputs.size.val()+"px"):void 0},Hr.prototype._updatePadding=function(){var value;return this.current.element?(value=""+this.inputs.padding.val()+"px",this.current.element.css({paddingTop:value,paddingBottom:value})):void 0},Hr}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.ImagePicker=function(_super){function ImagePicker(){return this._useImage=__bind(this._useImage,this),this._showOverlay=__bind(this._showOverlay,this),this._selectImage=__bind(this._selectImage,this),this._hideOverlay=__bind(this._hideOverlay,this),this._addToAvailableImages=__bind(this._addToAvailableImages,this),_ref=ImagePicker.__super__.constructor.apply(this,arguments)}return __extends(ImagePicker,_super),ImagePicker.prototype.assignElements=function(){return this.overlay=this.editor.getOverlay("media"),this.form=this.overlay.find("form"),this.availableImages=this.overlay.find(".media-picker__images-wrapper"),new Sites.Editor.Menu.Helper.MultiPartUpload(this.form)},ImagePicker.prototype.observeElements=function(){return this.form.on("upload:complete",this._addToAvailableImages),this.availableImages.on("click",".media-picker__image",this._selectImage),this.on("image-picker:open",this._showOverlay),this.overlay.on("click",".overlay-close",this._hideOverlay),this.overlay.on("click",".media-picker__actions .button",this._useImage)},ImagePicker.prototype._addToAvailableImages=function(event,data){var image,template;return template=this.overlay.find(".template").html(),image=$(template.evaluate(data)),this.availableImages.prepend(image),this.availableImages.find(".is-selected").removeClass("is-selected"),image.addClass("is-selected")},ImagePicker.prototype._hideOverlay=function(){return this.overlay.hide(),this.object=null},ImagePicker.prototype._selectImage=function(event){return this.availableImages.find(".is-selected").removeClass("is-selected"),$(event.target).closest(".media-picker__image").addClass("is-selected")},ImagePicker.prototype._showOverlay=function(event,data){return this.object=data.object,this.overlay.show()},ImagePicker.prototype._useImage=function(){var choice;return choice=this.availableImages.find(".is-selected img"),choice.exists()?(this.object.imageSelected(choice),this._hideOverlay()):void 0},ImagePicker}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Image=function(_super){function Image(){return this._updateImageUrl=__bind(this._updateImageUrl,this),this._showOverlay=__bind(this._showOverlay,this),this._changeImageSize=__bind(this._changeImageSize,this),_ref=Image.__super__.constructor.apply(this,arguments)}return __extends(Image,_super),Image.prototype.applicableTo=function(section){return section.is('[data-matches="image"]')
},Image.prototype.applyTo=function(element){var img,width;return img=element.find("img"),this.imageInput.find(".placeholder").text(img.attr("src").split("/").last()),this.urlInput.val(element.attr("data-url")),width=img.attr("data-width"),width||(width="auto",img.attr("data-width",width)),this.sizeSlider.val("auto"===width?0:width)},Image.prototype.assignElements=function(){return this.container=this.elements.element.find("[data-matches=image]"),this.imageInput=this.container.find(".image-input"),this.urlInput=this.container.find("input#image_url"),this.sizeSlider=this.container.find("[data-name=size] input")},Image.prototype.imageSelected=function(image){var img;return img=this.current.element.find("img"),img.attr({src:image.attr("src"),alt:image.attr("alt")}),this.container.find(".placeholder").text(image.attr("alt"))},Image.prototype.observeElements=function(){return this.imageInput.on("click",this._showOverlay),this.urlInput.on("input",this._updateImageUrl),this.sizeSlider.on("input",this._changeImageSize)},Image.prototype._changeImageSize=function(){var img,value;return img=this.current.element.find("img"),value=this.sizeSlider.val(),"0"===value?(img.css({width:"auto"}),img.attr("data-width","auto")):(img.css({width:""+value+"%"}),img.attr("data-width",value))},Image.prototype._showOverlay=function(){return this.trigger("image-picker:open",{object:this})},Image.prototype._updateImageUrl=function(){var url;return url=this.urlInput.val(),url.blank()?this.current.element.removeAttr("data-url"):this.current.element.attr("data-url",url)},Image}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Limit=function(_super){function Limit(){return this._update=__bind(this._update,this),_ref=Limit.__super__.constructor.apply(this,arguments)}return __extends(Limit,_super),Limit.prototype.applicableTo=function(section){return section.find("select#limit").exists()},Limit.prototype.applyTo=function(element){var text,type;return this.select.val(element.attr("data-limit")).change(),type=element.data("widget"),text={listings:"How many listings would you like to show at once?","blog/recent_posts":"How many posts would you like to show?","blog/categories":"How many categories would you like to show?","blog/posts":"How many posts would you like to show at once?"}[type],this.label.find(".label-title").text(text)},Limit.prototype.assignElements=function(){return this.select=this.elements.element.find("select#limit"),this.label=this.select.closest(".design-section__field").find("label")},Limit.prototype.observeElements=function(){return this.select.on("change",this._update)},Limit.prototype._update=function(){return this.current.element.attr("data-limit",this.select.val())},Limit}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Link=function(_super){function Link(){return this._updateLink=__bind(this._updateLink,this),this._unlink=__bind(this._unlink,this),this._hideOverlay=__bind(this._hideOverlay,this),this._configureNewLink=__bind(this._configureNewLink,this),this._configureExistingLink=__bind(this._configureExistingLink,this),_ref=Link.__super__.constructor.apply(this,arguments)}return __extends(Link,_super),Link.prototype.assignElements=function(){return this.overlay=this.editor.getOverlay("links"),this.fields={text:this.overlay.find("input#link_text"),url:this.overlay.find("input#link_url"),target:this.overlay.find("select#link_target")}},Link.prototype.observeElements=function(){return this.frame.on("click",".page-element[data-type=text] a",this._configureExistingLink),this.frame.on("style:action:link",".page-element",this._configureNewLink),this.overlay.on("click",".overlay-close",this._hideOverlay),this.overlay.on("click",".update-link",this._updateLink),this.overlay.on("click",".unlink",this._unlink)},Link.prototype._configureExistingLink=function(event){return this.anchor=$(event.target),this.overlay.show(),this.fields.text.removeAttr("readonly").val(this.anchor.text()),this.fields.url.val(this.anchor.attr("href")),this.fields.target.val(this.anchor.attr("target"))},Link.prototype._configureNewLink=function(){var s;return s=this._currentSelection(),this.selection=s.originalSelection,this.range=this.selection.getRangeAt(0),!this.selection.isCollapsed||s.start.is("a")?(this.overlay.show(),this.selection.isCollapsed&&s.start.is("a")?(this.anchor=s.start,this.fields.text.val(this.anchor.text()),this.fields.url.val(this.anchor.attr("href")),this.fields.target.val(this.anchor.attr("target"))):(this.fields.text.val(this.range.toString()),this.fields.url.val(""),this.fields.target.val(""))):void 0},Link.prototype._hideOverlay=function(){return this.overlay.hide()},Link.prototype._unlink=function(event){return event.stop(),this.overlay.hide(),this.anchor?this.anchor.replaceWith(this.anchor.html()):this._execCommand("unlink"),this.anchor=null},Link.prototype._updateLink=function(event){var href;return event.stop(),this.overlay.hide(),this.anchor||(this.selection.removeAllRanges(),this.selection.addRange(this.range),href="#"+$.now(),this._execCommand("createLink",href),this.anchor=this.frame.find("a[href='"+href+"']"),this.selection=this.range=null),this.anchor.text(this.fields.text.val().strip()),this.anchor.attr("href",this.fields.url.val()),this.anchor.attr("target",this.fields.target.val()),this.anchor=null},Link}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.LinkColor=function(_super){function LinkColor(){return _ref=LinkColor.__super__.constructor.apply(this,arguments)}return __extends(LinkColor,_super),LinkColor.prototype.applicableTo=function(section){return section.find('[data-name="link-color"]').exists()},LinkColor.prototype.applyTo=function(element){var color,section,type,_i,_len,_ref1,_results;for(_ref1=this.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],color=element.attr("data-"+type+"-color"),section=this.elements.element.find("[data-name='"+type+"-color']"),_results.push(section.find("input.color-input").val(color));return _results},LinkColor.prototype.assignElements=function(){return this.types=["link","selected-link"]},LinkColor.prototype.observeElements=function(){var section,type,_i,_len,_ref1,_results;for(_ref1=this.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],section=this.elements.element.find("[data-name='"+type+"-color']"),section.find(".color-input").on("change",this._render(type)),_results.push(this.elements.element.on("click",this._deactivate));return _results},LinkColor.prototype._render=function(type){var _this=this;return function(type){return function(e){var color;return color=$(e.target).val(),_this.current.element?_this.current.element.attr("data-"+type+"-color",color):void 0}}(type)},LinkColor}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Listings=function(_super){function Listings(){return this._updateLayout=__bind(this._updateLayout,this),this._update=__bind(this._update,this),_ref=Listings.__super__.constructor.apply(this,arguments)}return __extends(Listings,_super),Listings.prototype.applicableTo=function(section){return section.is(this.element)},Listings.prototype.applyTo=function(element){var currentLayout,option,_i,_len,_ref1;for(currentLayout="listings--list",_ref1=this.layoutOptions,_i=0,_len=_ref1.length;_len>_i;_i++)option=_ref1[_i],element.hasClass(option)&&(currentLayout=option);return this.select.val(element.attr("data-group-id")).change(),this.layout.val(currentLayout).change()},Listings.prototype.assignElements=function(){return this.element=this.elements.element.find("[data-matches=listings]"),this.select=this.element.find("select"),this.layout=this.element.find("[data-name=listings-layout] select"),this.layoutOptions=this.layout.find("option").toArray().map(function(o){return $(o).attr("value")})},Listings.prototype.observeElements=function(){return this.select.on("change",this._update),this.layout.on("change",this._updateLayout)},Listings.prototype._update=function(){var groupId,template,widget;return widget=this.current.element,groupId=this.select.val(),template=this.element.find(".group-template[data-group-id="+groupId+"] .page-element"),""+widget.attr("data-group-id")!=""+groupId?(widget.attr("data-group_id",groupId),widget.html(template.html()),this.toolbar.addToolbars()):void 0},Listings.prototype._updateLayout=function(){var element,l,_i,_len,_ref1;for(element=this.current.element,_ref1=this.layoutOptions,_i=0,_len=_ref1.length;_len>_i;_i++)l=_ref1[_i],element.removeClass(l);return element.addClass(this.layout.val())},Listings}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Menu=function(_super){function Menu(){return this._updateStyles=__bind(this._updateStyles,this),this._updatePadding=__bind(this._updatePadding,this),this._updateMenu=__bind(this._updateMenu,this),this._updateLayout=__bind(this._updateLayout,this),this._updateColor=__bind(this._updateColor,this),_ref=Menu.__super__.constructor.apply(this,arguments)}return __extends(Menu,_super),Menu.prototype.applicableTo=function(section){return section.is(this.element)},Menu.prototype.applyTo=function(element){var l,layout,_i,_len,_ref1;for(this.selects.menu.val(element.attr("data-menu-id")).change(),layout="layout-horizontal",_ref1=this.options.layout,_i=0,_len=_ref1.length;_len>_i;_i++)l=_ref1[_i],element.hasClass(l)&&(layout=l);return this.selects.layout.val(layout).change(),this.vars=Sites.Editor.Menu.Vars.parse(element.attr("data-vars")),this.selects.hoverTextColor.find(".color-input").val(this.vars.hover_text),this.selects.hoverBgColor.find(".color-input").val(this.vars.hover_bg),this.selects.itemPadding.val(this.vars.item_padding)},Menu.prototype.assignElements=function(){return this.element=this.elements.element.find('[data-matches="menu"]'),this.selects={menu:this.element.find("select#menu_title"),layout:this.element.find("select#menu_layout"),hoverTextColor:this.element.find('[data-name="menu-hover-text-color"]'),hoverBgColor:this.element.find('[data-name="menu-hover-bg-color"]'),itemPadding:this.element.find('[data-name="menu-item-padding"] input')},this.options={layout:this.selects.layout.find("option").toArray().map(function(o){return $(o).attr("value")})},this.stylesTemplate=this.element.find(".styles-template").text()},Menu.prototype.observeElements=function(){return this.selects.menu.on("change",this._updateMenu),this.selects.layout.on("change",this._updateLayout),this.selects.hoverTextColor.on("change",this._updateColor("hover_text")),this.selects.hoverBgColor.on("change",this._updateColor("hover_bg")),this.selects.itemPadding.on("change",this._updatePadding)},Menu.prototype._updateColor=function(name){var _this=this;return function(e){return _this.vars?(_this.vars[name]=$(e.target).val(),_this._updateStyles()):void 0}},Menu.prototype._updateLayout=function(){var element,l,_i,_len,_ref1;for(element=this.current.element,_ref1=this.options.layout,_i=0,_len=_ref1.length;_len>_i;_i++)l=_ref1[_i],element.removeClass(l);return element.addClass(this.selects.layout.val())},Menu.prototype._updateMenu=function(){var menuId,template,widget;return widget=this.current.element,menuId=this.selects.menu.val(),template=this.element.find(".menu-template[data-menu-id="+menuId+"] .page-element"),""+widget.attr("data-menu-id")!=""+menuId?(widget.attr("data-menu-id",menuId),widget.html(template.html()),this.toolbar.addToolbars(),widget.attr("id","menu-"+menuId+"-"+(new Date).getTime())):void 0},Menu.prototype._updatePadding=function(){return this.vars?(this.vars.item_padding=this.selects.itemPadding.val(),this._updateStyles()):void 0},Menu.prototype._updateStyles=function(){var tag,varsData,varsString;if(this.current.element)return this.current.element.find("style").remove(),varsData=$.extend({},this.vars),varsData.context="#"+this.current.element.attr("id"),varsData.item_padding_double=function(){return 2*varsData.item_padding},varsData.submenu_item_padding=function(){return 2*varsData.item_padding+15},tag=$("<style>").html(Mustache.render(this.stylesTemplate,varsData)),this.current.element.prepend(tag),varsString=Sites.Editor.Menu.Vars.stringify(this.vars),this.current.element.attr("data-vars",varsString)},Menu}(Sites.Editor.Menu.Helper)}.call(this),/*
 * jQuery File Upload Plugin 5.42.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],factory):"object"==typeof exports?factory(require("jquery"),require("./vendor/jquery.ui.widget")):factory(window.jQuery)}(function($){"use strict";function getDragHandler(type){var isDragOver="dragover"===type;return function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var dataTransfer=e.dataTransfer;dataTransfer&&-1!==$.inArray("Files",dataTransfer.types)&&this._trigger(type,$.Event(type,{delegatedEvent:e}))!==!1&&(e.preventDefault(),isDragOver&&(dataTransfer.dropEffect="copy"))}}$.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||$('<input type="file">').prop("disabled")),$.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),$.support.xhrFormDataFileUpload=!!window.FormData,$.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),$.widget("blueimp.fileupload",{options:{dropZone:$(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(message,context){return message=this.messages[message]||message.toString(),context&&$.each(context,function(key,value){message=message.replace("{"+key+"}",value)}),message},formData:function(form){return form.serializeArray()},add:function(e,data){return e.isDefaultPrevented()?!1:((data.autoUpload||data.autoUpload!==!1&&$(this).fileupload("option","autoUpload"))&&data.process().done(function(){data.submit()}),void 0)},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:$.support.blobSlice&&function(){var slice=this.slice||this.webkitSlice||this.mozSlice;return slice.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(now,loaded,interval){var timeDiff=now-this.timestamp;return(!this.bitrate||!interval||timeDiff>interval)&&(this.bitrate=(loaded-this.loaded)*(1e3/timeDiff)*8,this.loaded=loaded,this.timestamp=now),this.bitrate}},_isXHRUpload:function(options){return!options.forceIframeTransport&&(!options.multipart&&$.support.xhrFileUpload||$.support.xhrFormDataFileUpload)},_getFormData:function(options){var formData;return"function"===$.type(options.formData)?options.formData(options.form):$.isArray(options.formData)?options.formData:"object"===$.type(options.formData)?(formData=[],$.each(options.formData,function(name,value){formData.push({name:name,value:value})}),formData):[]},_getTotal:function(files){var total=0;return $.each(files,function(index,file){total+=file.size||1}),total},_initProgressObject:function(obj){var progress={loaded:0,total:0,bitrate:0};obj._progress?$.extend(obj._progress,progress):obj._progress=progress},_initResponseObject:function(obj){var prop;if(obj._response)for(prop in obj._response)obj._response.hasOwnProperty(prop)&&delete obj._response[prop];else obj._response={}},_onProgress:function(e,data){if(e.lengthComputable){var loaded,now=Date.now?Date.now():(new Date).getTime();if(data._time&&data.progressInterval&&now-data._time<data.progressInterval&&e.loaded!==e.total)return;data._time=now,loaded=Math.floor(e.loaded/e.total*(data.chunkSize||data._progress.total))+(data.uploadedBytes||0),this._progress.loaded+=loaded-data._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(now,this._progress.loaded,data.bitrateInterval),data._progress.loaded=data.loaded=loaded,data._progress.bitrate=data.bitrate=data._bitrateTimer.getBitrate(now,loaded,data.bitrateInterval),this._trigger("progress",$.Event("progress",{delegatedEvent:e}),data),this._trigger("progressall",$.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(options){var that=this,xhr=options.xhr?options.xhr():$.ajaxSettings.xhr();xhr.upload&&($(xhr.upload).bind("progress",function(e){var oe=e.originalEvent;e.lengthComputable=oe.lengthComputable,e.loaded=oe.loaded,e.total=oe.total,that._onProgress(e,options)}),options.xhr=function(){return xhr})},_isInstanceOf:function(type,obj){return Object.prototype.toString.call(obj)==="[object "+type+"]"},_initXHRData:function(options){var formData,that=this,file=options.files[0],multipart=options.multipart||!$.support.xhrFileUpload,paramName="array"===$.type(options.paramName)?options.paramName[0]:options.paramName;options.headers=$.extend({},options.headers),options.contentRange&&(options.headers["Content-Range"]=options.contentRange),multipart&&!options.blob&&this._isInstanceOf("File",file)||(options.headers["Content-Disposition"]='attachment; filename="'+encodeURI(file.name)+'"'),multipart?$.support.xhrFormDataFileUpload&&(options.postMessage?(formData=this._getFormData(options),options.blob?formData.push({name:paramName,value:options.blob}):$.each(options.files,function(index,file){formData.push({name:"array"===$.type(options.paramName)&&options.paramName[index]||paramName,value:file})})):(that._isInstanceOf("FormData",options.formData)?formData=options.formData:(formData=new FormData,$.each(this._getFormData(options),function(index,field){formData.append(field.name,field.value)})),options.blob?formData.append(paramName,options.blob,file.name):$.each(options.files,function(index,file){(that._isInstanceOf("File",file)||that._isInstanceOf("Blob",file))&&formData.append("array"===$.type(options.paramName)&&options.paramName[index]||paramName,file,file.uploadName||file.name)})),options.data=formData):(options.contentType=file.type||"application/octet-stream",options.data=options.blob||file),options.blob=null},_initIframeSettings:function(options){var targetHost=$("<a></a>").prop("href",options.url).prop("host");options.dataType="iframe "+(options.dataType||""),options.formData=this._getFormData(options),options.redirect&&targetHost&&targetHost!==location.host&&options.formData.push({name:options.redirectParamName||"redirect",value:options.redirect})},_initDataSettings:function(options){this._isXHRUpload(options)?(this._chunkedUpload(options,!0)||(options.data||this._initXHRData(options),this._initProgressListener(options)),options.postMessage&&(options.dataType="postmessage "+(options.dataType||""))):this._initIframeSettings(options)},_getParamName:function(options){var fileInput=$(options.fileInput),paramName=options.paramName;return paramName?$.isArray(paramName)||(paramName=[paramName]):(paramName=[],fileInput.each(function(){for(var input=$(this),name=input.prop("name")||"files[]",i=(input.prop("files")||[1]).length;i;)paramName.push(name),i-=1}),paramName.length||(paramName=[fileInput.prop("name")||"files[]"])),paramName},_initFormSettings:function(options){options.form&&options.form.length||(options.form=$(options.fileInput.prop("form")),options.form.length||(options.form=$(this.options.fileInput.prop("form")))),options.paramName=this._getParamName(options),options.url||(options.url=options.form.prop("action")||location.href),options.type=(options.type||"string"===$.type(options.form.prop("method"))&&options.form.prop("method")||"").toUpperCase(),"POST"!==options.type&&"PUT"!==options.type&&"PATCH"!==options.type&&(options.type="POST"),options.formAcceptCharset||(options.formAcceptCharset=options.form.attr("accept-charset"))},_getAJAXSettings:function(data){var options=$.extend({},this.options,data);return this._initFormSettings(options),this._initDataSettings(options),options},_getDeferredState:function(deferred){return deferred.state?deferred.state():deferred.isResolved()?"resolved":deferred.isRejected()?"rejected":"pending"},_enhancePromise:function(promise){return promise.success=promise.done,promise.error=promise.fail,promise.complete=promise.always,promise},_getXHRPromise:function(resolveOrReject,context,args){var dfd=$.Deferred(),promise=dfd.promise();return context=context||this.options.context||promise,resolveOrReject===!0?dfd.resolveWith(context,args):resolveOrReject===!1&&dfd.rejectWith(context,args),promise.abort=dfd.promise,this._enhancePromise(promise)},_addConvenienceMethods:function(e,data){var that=this,getPromise=function(args){return $.Deferred().resolveWith(that,args).promise()};data.process=function(resolveFunc,rejectFunc){return(resolveFunc||rejectFunc)&&(data._processQueue=this._processQueue=(this._processQueue||getPromise([this])).pipe(function(){return data.errorThrown?$.Deferred().rejectWith(that,[data]).promise():getPromise(arguments)}).pipe(resolveFunc,rejectFunc)),this._processQueue||getPromise([this])},data.submit=function(){return"pending"!==this.state()&&(data.jqXHR=this.jqXHR=that._trigger("submit",$.Event("submit",{delegatedEvent:e}),this)!==!1&&that._onSend(e,this)),this.jqXHR||that._getXHRPromise()},data.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",that._trigger("fail",null,this),that._getXHRPromise(!1))},data.state=function(){return this.jqXHR?that._getDeferredState(this.jqXHR):this._processQueue?that._getDeferredState(this._processQueue):void 0},data.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===that._getDeferredState(this._processQueue)},data.progress=function(){return this._progress},data.response=function(){return this._response}},_getUploadedBytes:function(jqXHR){var range=jqXHR.getResponseHeader("Range"),parts=range&&range.split("-"),upperBytesPos=parts&&parts.length>1&&parseInt(parts[1],10);return upperBytesPos&&upperBytesPos+1},_chunkedUpload:function(options,testOnly){options.uploadedBytes=options.uploadedBytes||0;var jqXHR,upload,that=this,file=options.files[0],fs=file.size,ub=options.uploadedBytes,mcs=options.maxChunkSize||fs,slice=this._blobSlice,dfd=$.Deferred(),promise=dfd.promise();return this._isXHRUpload(options)&&slice&&(ub||fs>mcs)&&!options.data?testOnly?!0:ub>=fs?(file.error=options.i18n("uploadedBytes"),this._getXHRPromise(!1,options.context,[null,"error",file.error])):(upload=function(){var o=$.extend({},options),currentLoaded=o._progress.loaded;o.blob=slice.call(file,ub,ub+mcs,file.type),o.chunkSize=o.blob.size,o.contentRange="bytes "+ub+"-"+(ub+o.chunkSize-1)+"/"+fs,that._initXHRData(o),that._initProgressListener(o),jqXHR=(that._trigger("chunksend",null,o)!==!1&&$.ajax(o)||that._getXHRPromise(!1,o.context)).done(function(result,textStatus,jqXHR){ub=that._getUploadedBytes(jqXHR)||ub+o.chunkSize,currentLoaded+o.chunkSize-o._progress.loaded&&that._onProgress($.Event("progress",{lengthComputable:!0,loaded:ub-o.uploadedBytes,total:ub-o.uploadedBytes}),o),options.uploadedBytes=o.uploadedBytes=ub,o.result=result,o.textStatus=textStatus,o.jqXHR=jqXHR,that._trigger("chunkdone",null,o),that._trigger("chunkalways",null,o),fs>ub?upload():dfd.resolveWith(o.context,[result,textStatus,jqXHR])}).fail(function(jqXHR,textStatus,errorThrown){o.jqXHR=jqXHR,o.textStatus=textStatus,o.errorThrown=errorThrown,that._trigger("chunkfail",null,o),that._trigger("chunkalways",null,o),dfd.rejectWith(o.context,[jqXHR,textStatus,errorThrown])})},this._enhancePromise(promise),promise.abort=function(){return jqXHR.abort()},upload(),promise):!1},_beforeSend:function(e,data){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(data),this._initProgressObject(data),data._progress.loaded=data.loaded=data.uploadedBytes||0,data._progress.total=data.total=this._getTotal(data.files)||1,data._progress.bitrate=data.bitrate=0,this._active+=1,this._progress.loaded+=data.loaded,this._progress.total+=data.total},_onDone:function(result,textStatus,jqXHR,options){var total=options._progress.total,response=options._response;options._progress.loaded<total&&this._onProgress($.Event("progress",{lengthComputable:!0,loaded:total,total:total}),options),response.result=options.result=result,response.textStatus=options.textStatus=textStatus,response.jqXHR=options.jqXHR=jqXHR,this._trigger("done",null,options)},_onFail:function(jqXHR,textStatus,errorThrown,options){var response=options._response;options.recalculateProgress&&(this._progress.loaded-=options._progress.loaded,this._progress.total-=options._progress.total),response.jqXHR=options.jqXHR=jqXHR,response.textStatus=options.textStatus=textStatus,response.errorThrown=options.errorThrown=errorThrown,this._trigger("fail",null,options)},_onAlways:function(jqXHRorResult,textStatus,jqXHRorError,options){this._trigger("always",null,options)},_onSend:function(e,data){data.submit||this._addConvenienceMethods(e,data);var jqXHR,aborted,slot,pipe,that=this,options=that._getAJAXSettings(data),send=function(){return that._sending+=1,options._bitrateTimer=new that._BitrateTimer,jqXHR=jqXHR||((aborted||that._trigger("send",$.Event("send",{delegatedEvent:e}),options)===!1)&&that._getXHRPromise(!1,options.context,aborted)||that._chunkedUpload(options)||$.ajax(options)).done(function(result,textStatus,jqXHR){that._onDone(result,textStatus,jqXHR,options)}).fail(function(jqXHR,textStatus,errorThrown){that._onFail(jqXHR,textStatus,errorThrown,options)}).always(function(jqXHRorResult,textStatus,jqXHRorError){if(that._onAlways(jqXHRorResult,textStatus,jqXHRorError,options),that._sending-=1,that._active-=1,options.limitConcurrentUploads&&options.limitConcurrentUploads>that._sending)for(var nextSlot=that._slots.shift();nextSlot;){if("pending"===that._getDeferredState(nextSlot)){nextSlot.resolve();break}nextSlot=that._slots.shift()}0===that._active&&that._trigger("stop")})};return this._beforeSend(e,options),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(slot=$.Deferred(),this._slots.push(slot),pipe=slot.pipe(send)):(this._sequence=this._sequence.pipe(send,send),pipe=this._sequence),pipe.abort=function(){return aborted=[void 0,"abort","abort"],jqXHR?jqXHR.abort():(slot&&slot.rejectWith(options.context,aborted),send())},this._enhancePromise(pipe)):send()},_onAdd:function(e,data){var paramNameSet,paramNameSlice,fileSet,i,that=this,result=!0,options=$.extend({},this.options,data),files=data.files,filesLength=files.length,limit=options.limitMultiFileUploads,limitSize=options.limitMultiFileUploadSize,overhead=options.limitMultiFileUploadSizeOverhead,batchSize=0,paramName=this._getParamName(options),j=0;if(!limitSize||filesLength&&void 0!==files[0].size||(limitSize=void 0),(options.singleFileUploads||limit||limitSize)&&this._isXHRUpload(options))if(options.singleFileUploads||limitSize||!limit)if(!options.singleFileUploads&&limitSize)for(fileSet=[],paramNameSet=[],i=0;filesLength>i;i+=1)batchSize+=files[i].size+overhead,(i+1===filesLength||batchSize+files[i+1].size+overhead>limitSize||limit&&i+1-j>=limit)&&(fileSet.push(files.slice(j,i+1)),paramNameSlice=paramName.slice(j,i+1),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice),j=i+1,batchSize=0);else paramNameSet=paramName;else for(fileSet=[],paramNameSet=[],i=0;filesLength>i;i+=limit)fileSet.push(files.slice(i,i+limit)),paramNameSlice=paramName.slice(i,i+limit),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice);else fileSet=[files],paramNameSet=[paramName];return data.originalFiles=files,$.each(fileSet||files,function(index,element){var newData=$.extend({},data);return newData.files=fileSet?element:[element],newData.paramName=paramNameSet[index],that._initResponseObject(newData),that._initProgressObject(newData),that._addConvenienceMethods(e,newData),result=that._trigger("add",$.Event("add",{delegatedEvent:e}),newData)}),result},_replaceFileInput:function(data){var input=data.fileInput,inputClone=input.clone(!0);data.fileInputClone=inputClone,$("<form></form>").append(inputClone)[0].reset(),input.after(inputClone).detach(),$.cleanData(input.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(i,el){return el===input[0]?inputClone[0]:el}),input[0]===this.element[0]&&(this.element=inputClone)},_handleFileTreeEntry:function(entry,path){var dirReader,that=this,dfd=$.Deferred(),errorHandler=function(e){e&&!e.entry&&(e.entry=entry),dfd.resolve([e])},successHandler=function(entries){that._handleFileTreeEntries(entries,path+entry.name+"/").done(function(files){dfd.resolve(files)}).fail(errorHandler)},readEntries=function(){dirReader.readEntries(function(results){results.length?(entries=entries.concat(results),readEntries()):successHandler(entries)},errorHandler)},entries=[];return path=path||"",entry.isFile?entry._file?(entry._file.relativePath=path,dfd.resolve(entry._file)):entry.file(function(file){file.relativePath=path,dfd.resolve(file)},errorHandler):entry.isDirectory?(dirReader=entry.createReader(),readEntries()):dfd.resolve([]),dfd.promise()},_handleFileTreeEntries:function(entries,path){var that=this;return $.when.apply($,$.map(entries,function(entry){return that._handleFileTreeEntry(entry,path)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(dataTransfer){dataTransfer=dataTransfer||{};var items=dataTransfer.items;return items&&items.length&&(items[0].webkitGetAsEntry||items[0].getAsEntry)?this._handleFileTreeEntries($.map(items,function(item){var entry;return item.webkitGetAsEntry?(entry=item.webkitGetAsEntry(),entry&&(entry._file=item.getAsFile()),entry):item.getAsEntry()})):$.Deferred().resolve($.makeArray(dataTransfer.files)).promise()},_getSingleFileInputFiles:function(fileInput){fileInput=$(fileInput);var files,value,entries=fileInput.prop("webkitEntries")||fileInput.prop("entries");if(entries&&entries.length)return this._handleFileTreeEntries(entries);if(files=$.makeArray(fileInput.prop("files")),files.length)void 0===files[0].name&&files[0].fileName&&$.each(files,function(index,file){file.name=file.fileName,file.size=file.fileSize});else{if(value=fileInput.prop("value"),!value)return $.Deferred().resolve([]).promise();files=[{name:value.replace(/^.*\\/,"")}]}return $.Deferred().resolve(files).promise()},_getFileInputFiles:function(fileInput){return fileInput instanceof $&&1!==fileInput.length?$.when.apply($,$.map(fileInput,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(fileInput)},_onChange:function(e){var that=this,data={fileInput:$(e.target),form:$(e.target.form)};this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that.options.replaceFileInput&&that._replaceFileInput(data),that._trigger("change",$.Event("change",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)})},_onPaste:function(e){var items=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,data={files:[]};items&&items.length&&($.each(items,function(index,item){var file=item.getAsFile&&item.getAsFile();file&&data.files.push(file)}),this._trigger("paste",$.Event("paste",{delegatedEvent:e}),data)!==!1&&this._onAdd(e,data))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var that=this,dataTransfer=e.dataTransfer,data={};dataTransfer&&dataTransfer.files&&dataTransfer.files.length&&(e.preventDefault(),this._getDroppedFiles(dataTransfer).always(function(files){data.files=files,that._trigger("drop",$.Event("drop",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)}))},_onDragOver:getDragHandler("dragover"),_onDragEnter:getDragHandler("dragenter"),_onDragLeave:getDragHandler("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),$.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(key,value){var reinit=-1!==$.inArray(key,this._specialOptions);reinit&&this._destroyEventHandlers(),this._super(key,value),reinit&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var options=this.options;void 0===options.fileInput?options.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):options.fileInput instanceof $||(options.fileInput=$(options.fileInput)),options.dropZone instanceof $||(options.dropZone=$(options.dropZone)),options.pasteZone instanceof $||(options.pasteZone=$(options.pasteZone))},_getRegExp:function(str){var parts=str.split("/"),modifiers=parts.pop();return parts.shift(),new RegExp(parts.join("/"),modifiers)},_isRegExpOption:function(key,value){return"url"!==key&&"string"===$.type(value)&&/^\/.*\/[igm]{0,3}$/.test(value)},_initDataAttributes:function(){var that=this,options=this.options,data=this.element.data();$.each(this.element[0].attributes,function(index,attr){var value,key=attr.name.toLowerCase();/^data-/.test(key)&&(key=key.slice(5).replace(/-[a-z]/g,function(str){return str.charAt(1).toUpperCase()}),value=data[key],that._isRegExpOption(key,value)&&(value=that._getRegExp(value)),options[key]=value)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(data){var that=this;data&&!this.options.disabled&&(data.fileInput&&!data.files?this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that._onAdd(null,data)}):(data.files=$.makeArray(data.files),this._onAdd(null,data)))},send:function(data){if(data&&!this.options.disabled){if(data.fileInput&&!data.files){var jqXHR,aborted,that=this,dfd=$.Deferred(),promise=dfd.promise();return promise.abort=function(){return aborted=!0,jqXHR?jqXHR.abort():(dfd.reject(null,"abort","abort"),promise)},this._getFileInputFiles(data.fileInput).always(function(files){if(!aborted){if(!files.length)return dfd.reject(),void 0;data.files=files,jqXHR=that._onSend(null,data),jqXHR.then(function(result,textStatus,jqXHR){dfd.resolve(result,textStatus,jqXHR)},function(jqXHR,textStatus,errorThrown){dfd.reject(jqXHR,textStatus,errorThrown)})}}),this._enhancePromise(promise)}if(data.files=$.makeArray(data.files),data.files.length)return this._onSend(null,data)}return this._getXHRPromise(!1,data&&data.context)}})}),/*
 * jQuery Iframe Transport Plugin 1.8.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?factory(require("jquery")):factory(window.jQuery)}(function($){"use strict";var counter=0;$.ajaxTransport("iframe",function(options){if(options.async){var form,iframe,addParamChar,initialIframeSrc=options.initialIframeSrc||"javascript:false;";return{send:function(_,completeCallback){form=$('<form style="display:none;"></form>'),form.attr("accept-charset",options.formAcceptCharset),addParamChar=/\?/.test(options.url)?"&":"?","DELETE"===options.type?(options.url=options.url+addParamChar+"_method=DELETE",options.type="POST"):"PUT"===options.type?(options.url=options.url+addParamChar+"_method=PUT",options.type="POST"):"PATCH"===options.type&&(options.url=options.url+addParamChar+"_method=PATCH",options.type="POST"),counter+=1,iframe=$('<iframe src="'+initialIframeSrc+'" name="iframe-transport-'+counter+'"></iframe>').bind("load",function(){var fileInputClones,paramNames=$.isArray(options.paramName)?options.paramName:[options.paramName];iframe.unbind("load").bind("load",function(){var response;try{if(response=iframe.contents(),!response.length||!response[0].firstChild)throw new Error}catch(e){response=void 0}completeCallback(200,"success",{iframe:response}),$('<iframe src="'+initialIframeSrc+'"></iframe>').appendTo(form),window.setTimeout(function(){form.remove()},0)}),form.prop("target",iframe.prop("name")).prop("action",options.url).prop("method",options.type),options.formData&&$.each(options.formData,function(index,field){$('<input type="hidden"/>').prop("name",field.name).val(field.value).appendTo(form)}),options.fileInput&&options.fileInput.length&&"POST"===options.type&&(fileInputClones=options.fileInput.clone(),options.fileInput.after(function(index){return fileInputClones[index]}),options.paramName&&options.fileInput.each(function(index){$(this).prop("name",paramNames[index]||options.paramName)}),form.append(options.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),options.fileInput.removeAttr("form")),form.submit(),fileInputClones&&fileInputClones.length&&options.fileInput.each(function(index,input){var clone=$(fileInputClones[index]);$(input).prop("name",clone.prop("name")).attr("form",clone.attr("form")),clone.replaceWith(input)})}),form.append(iframe).appendTo(document.body)},abort:function(){iframe&&iframe.unbind("load").prop("src",initialIframeSrc),form&&form.remove()}}}}),$.ajaxSetup({converters:{"iframe text":function(iframe){return iframe&&$(iframe[0].body).text()},"iframe json":function(iframe){return iframe&&$.parseJSON($(iframe[0].body).text())},"iframe html":function(iframe){return iframe&&$(iframe[0].body).html()},"iframe xml":function(iframe){var xmlDoc=iframe&&iframe[0];return xmlDoc&&$.isXMLDoc(xmlDoc)?xmlDoc:$.parseXML(xmlDoc.XMLDocument&&xmlDoc.XMLDocument.xml||$(xmlDoc.body).html())},"iframe script":function(iframe){return iframe&&$.globalEval($(iframe[0].body).text())}}})}),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Editor.Menu.Helper.MultiPartUpload=function(){function MultiPartUpload(form){this.form=form,this._updateProgress=__bind(this._updateProgress,this),this._submit=__bind(this._submit,this),this._send=__bind(this._send,this),this._done=__bind(this._done,this),this._chunkSend=__bind(this._chunkSend,this),this._chunkDone=__bind(this._chunkDone,this),this._add=__bind(this._add,this),$.extend(this,this.form.data()),this.assignElements(),this.assignData(),this.observeElements()}return MultiPartUpload.prototype.assignData=function(){return this.uploadId=null,this.filename=null,this.filesize=0,this.fileLastModified=0,this.currentPartNumber=0,this.uploadedBytes=0,this.authorizations={},this.fileuploadData=null},MultiPartUpload.prototype.assignElements=function(){return this.fileField=this.form.find("input:file")},MultiPartUpload.prototype.observeElements=function(){return this.form.on("submit",this._submit),this.form.fileupload({maxChunkSize:this.chunkSize,maxNumberOfFiles:1,replaceFileInput:!1,autoUpload:!1,multipart:!1,type:"put",formData:{},add:this._add,done:this._done,send:this._send,message:"no-message"}).on("fileuploadchunksend",this._chunkSend).on("fileuploadchunkdone",this._chunkDone).on("fileuploadprogress",this._updateProgress)},MultiPartUpload.prototype._add=function(event,data){var file;return this.fileuploadData=data,file=this.fileField[0].files?this.fileField[0].files[0]:null,file?(this.filename=file.name,this.filesize=file.size,this.fileLastModified=file.lastModified):this.filename=this.fileField.val().split("\\").pop(),this.form.submit()},MultiPartUpload.prototype._chunkDone=function(event,data){return this.uploadedBytes+=data.chunkSize,$.ajax({url:this.urls.update_bytes_sent.evaluate(this),type:"put",data:defaultParams({uploaded_bytes:this.uploadedBytes}),message:"no-message"})},MultiPartUpload.prototype._chunkSend=function(event,data){var partNumber,rangeStart,result;return rangeStart=parseInt(data.contentRange.replace("bytes ","").split("-")[0],10),partNumber=Math.floor(rangeStart/this.chunkSize)+1,result=this._signPart(partNumber,data)},MultiPartUpload.prototype._createUpload=function(){var data,_this=this;return data={file_file_name:this.filename,file_file_size:this.filesize,file_last_modified:this.fileLastModified},data.file_content_type=this.fileField[0].files[0].type,$.ajax({url:this.urls.create,type:"post",data:defaultParams({media:data})}).done(function(data){return $.extend(_this,data),_this._submitFileData()})},MultiPartUpload.prototype._done=function(){var _this=this;return $.ajax({url:this.urls.complete.evaluate(this),type:"put",data:defaultParams(),message:"no-message"}).done(function(data){return _this._markAsDoneUploading(),_this.form.trigger("upload:complete",data)})},MultiPartUpload.prototype._markAsDoneUploading=function(){return this.form.closest(".overlay").removeClass("uploading")},MultiPartUpload.prototype._markAsUploading=function(){return this.form.closest(".overlay").addClass("uploading")},MultiPartUpload.prototype._send=function(event,data){return this._signPart(1,data)},MultiPartUpload.prototype._signPart=function(partNumber,data){var authData,_base,_this=this;return null==(_base=this.authorizations)[partNumber]&&(_base[partNumber]={}),null==data.headers&&(data.headers={}),delete data.headers["Content-Range"],data.headers["Content-Type"]=this.content_type,data.message="no-message",authData=this.authorizations[partNumber],null!=authData.authorization?(data.headers.Authorization=authData.authorization,data.headers["x-amz-date"]=authData.date,data.url=authData.url):($.ajax({url:this.urls.sign_part.evaluate(this),type:"get",data:{part_number:partNumber},message:"no-message"}).done(function(signingData){return _this.authorizations[partNumber]=signingData,_this._submitFileData()}),!1)},MultiPartUpload.prototype._submitFileData=function(){return this.fileuploadData.uploadedBytes=this.uploadedBytes,this.fileuploadData.submit()},MultiPartUpload.prototype._submit=function(event){var file;return event.preventDefault(),this.fileuploadData?(file=this.fileField[0].files[0],file.size>this.form.data("chunkSize")?this._createUpload():this._uploadDirectly(),this._markAsUploading()):void 0},MultiPartUpload.prototype._updateProgress=function(event,data){var parts,progress,value;return value=data.loaded/data.total*100,progress=this.filesize>104857600?(value=Math.floor(100*value)/100,parts=(""+value).split("."),1===parts.length?""+value+".00":1===parts[1].length?""+value+"0":value):Math.floor(value)},MultiPartUpload.prototype._uploadDirectly=function(){var _this=this;return $.ajax({url:this.urls.create,type:"post",data:new FormData(this.form[0]),cache:!1,contentType:!1,processData:!1}).done(function(data){return _this._markAsDoneUploading(),_this.form.trigger("upload:complete",data)})},MultiPartUpload}()}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Padding=function(_super){function Padding(){return _ref=Padding.__super__.constructor.apply(this,arguments)}return __extends(Padding,_super),Padding.prototype.applicableTo=function(section){return section.find('[data-name="padding"]').exists()},Padding.prototype.applyTo=function(element){var clone,padding,paddingInPixels,type;return this.pixelsPerEm||(clone=element.clone().hide(),element.append(clone),clone.css({padding:"1em"}),this.pixelsPerEm=parseInt(clone.css("padding")),clone.remove()),paddingInPixels=parseInt(element.css("padding-top")),padding=paddingInPixels/this.pixelsPerEm,element.is(".page-element")&&(type="element"),element.is(".page-section")&&(type="section"),this.elements[type].find('[data-name="padding"] input').val(padding)},Padding.prototype.observeElements=function(){var section,type,_i,_len,_ref1,_results;for(_ref1=this.editor.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],section=this.elements[type].find('[data-name="padding"]'),_results.push(section.find("input").on("input change",this._updatePadding(type)));return _results},Padding.prototype._applyPaddingToElement=function(element,value){return element.css({padding:value})},Padding.prototype._applyPaddingToSection=function(section,value){return section.css({paddingTop:value,paddingBottom:value})},Padding.prototype._updatePadding=function(type){var _this=this;return function(type){return function(event){var element,input,value;return input=$(event.target),element=_this.current[type],value=""+input.val()+"em",_this["_applyPaddingTo"+type.capitalize()](element,value)}}(type)},Padding}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.PageStyling=function(_super){function PageStyling(){return _ref=PageStyling.__super__.constructor.apply(this,arguments)}return __extends(PageStyling,_super),PageStyling.prototype.assignElements=function(){var color,section;return this.container=this.elements.main.find(".page-styles"),this.element=this.frame.find(".page-content"),color=this.element.css("background-color"),section=this.container.find('[data-name="page-background-color"]'),section.find("input.color-input").val(color),color=this.element.css("color"),section=this.container.find('[data-name="page-text-color"]'),section.find("input.color-input").val(color)},PageStyling.prototype.observeElements=function(){var section,type,_i,_len,_ref1,_results;for(_ref1=["background","text"],_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],section=this.container.find("[data-name='page-"+type+"-color']"),section.find(".color-input").on("change",this._render(type)),_results.push(this.elements.main.on("click",this._deactivate));return _results},PageStyling.prototype._render=function(type){var _this=this;return function(type){return function(e){var color,style,styles;return color=$(e.target).val(),style={text:"color",background:"background-color"}[type],styles={},styles[style]=color,_this.element.css(styles)}}(type)},PageStyling}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Persistence=function(_super){function Persistence(){return this._updateSectionName=__bind(this._updateSectionName,this),this._determinePersistence=__bind(this._determinePersistence,this),_ref=Persistence.__super__.constructor.apply(this,arguments)}return __extends(Persistence,_super),Persistence.prototype.applicableTo=function(section){return section.find(this.checkbox).exists()},Persistence.prototype.applyTo=function(element){var name;return this.checkbox.check("true"===element.attr("data-section-persist")),name=element.attr("data-section-new-name"),null==name&&(name=element.attr("data-section-name")),this.input.val(name),this.toggleOptions()},Persistence.prototype.assignElements=function(){return this.checkbox=this.elements.section.find("input:checkbox.persist-section"),this.options=this.elements.section.find(".persist-section-options"),this.input=this.elements.section.find("input.section-name")},Persistence.prototype.observeElements=function(){return this.checkbox.on("click",this._determinePersistence),this.input.on("keyup",this._updateSectionName)},Persistence.prototype.toggleOptions=function(){return this.checkbox.is(":checked")?this.options.show():this.options.hide()},Persistence.prototype._determinePersistence=function(){return this.checkbox.is(":checked")?this._markSectionAsPersisted():this._removeSectionPersistence(),this.toggleOptions()},Persistence.prototype._markSectionAsPersisted=function(){return this.current.section.attr("data-section-persist","true")},Persistence.prototype._removeSectionPersistence=function(){return this.current.section.attr("data-section-persist","false")},Persistence.prototype._updateSectionName=function(){return this.current.section.attr("data-section-new-name",this.input.val())},Persistence}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.RecentPosts=function(_super){function RecentPosts(){return _ref=RecentPosts.__super__.constructor.apply(this,arguments)}return __extends(RecentPosts,_super),RecentPosts.prototype.selector="blog/recent_posts",RecentPosts}(Sites.Editor.Menu.Helper.BlogLinkList)}.call(this),function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Remove=function(_super){function Remove(){return _ref=Remove.__super__.constructor.apply(this,arguments)}return __extends(Remove,_super),Remove.prototype.observeElements=function(){var type,_i,_len,_ref1,_results;for(_ref1=this.editor.types,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)type=_ref1[_i],_results.push(this.elements[type].on("click","a.remove",this._remove(type)));return _results},Remove.prototype._remove=function(type){var _this=this;return function(type){return function(event){var current;return event.stop(),current=_this.current[type],confirm("Are you sure you want to remove this "+type+"?")?(current.remove(),_this.elements[type].trigger("deactivate"),_this.current[type]=null):void 0}}(type)},Remove}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Save=function(_super){function Save(){return this._success=__bind(this._success,this),this._submitForm=__bind(this._submitForm,this),this._submit=__bind(this._submit,this),this._publishForm=__bind(this._publishForm,this),_ref=Save.__super__.constructor.apply(this,arguments)}return __extends(Save,_super),Save.prototype.assignElements=function(){return this.namespace=this.editor.pageType,this.submitButton=this.editor.element.find(".submit-button"),this.visitButton=this.editor.element.find(".visit-button"),this.saveDraftButton=this.editor.element.find(".save-draft-button"),this.publishButton=this.editor.element.find(".publish-button")},Save.prototype.observeElements=function(){return this.submitButton.on("click",this._submitForm),this.saveDraftButton.on("click",this._submitForm),this.publishButton.on("click",this._publishForm),this.form.on("submit",this._submit),this.form.on("ajax:success",this._success)},Save.prototype._publishForm=function(event){return this.form.find("input[name='"+this.namespace+"[published]']").val(!0),this._submitForm(event)},Save.prototype._submit=function(){return this.form.find("input[name='"+this.namespace+"[content]']").val(this.editor.html())},Save.prototype._submitForm=function(event){return event.preventDefault(),$(event.target).addClass("is-loading"),this.form.submit()},Save.prototype._success=function(){return Message.create().flash("Changes saved."),this.editor.element.find(".button").removeClass("is-loading"),"true"===this.form.find("input[name='"+this.namespace+"[published]']").val()?(this.publishButton.hide(),this.saveDraftButton.hide(),this.submitButton.show(),this.visitButton.show()):void 0},Save}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Spacer=function(_super){function Spacer(){return this._resize=__bind(this._resize,this),_ref=Spacer.__super__.constructor.apply(this,arguments)}return __extends(Spacer,_super),Spacer.prototype.applicableTo=function(section){return section.is(this.container)},Spacer.prototype.applyTo=function(element){var height;return height=parseInt(element.css("height")),this.inputs.size.val(height)},Spacer.prototype.assignElements=function(){return this.container=this.elements.element.find('[data-matches="spacer"]'),this.inputs={size:this.container.find('[data-name="spacer-size"] input[type=range]')}},Spacer.prototype.observeElements=function(){return this.inputs.size.on("input",this._resize)},Spacer.prototype._resize=function(){return this.current.element?this.current.element.css("height",""+this.inputs.size.val()+"px"):void 0},Spacer}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.TextColor=function(_super){function TextColor(){return this._render=__bind(this._render,this),_ref=TextColor.__super__.constructor.apply(this,arguments)}return __extends(TextColor,_super),TextColor.prototype.applicableTo=function(section){return section.find('[data-name="text-color"]').exists()},TextColor.prototype.applyTo=function(element){var color;return color=element.css("color"),this.container.find("input.color-input").val(color)},TextColor.prototype.assignElements=function(){return this.container=this.elements.element.find('[data-name="text-color"]')},TextColor.prototype.observeElements=function(){return this.container.find(".color-input").on("change",this._render)},TextColor.prototype._render=function(e){var color;return color=$(e.target).val(),this.current.element?this.current.element.css({color:color}):void 0},TextColor}(Sites.Editor.Menu.Helper)}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.TextStyling=function(_super){function TextStyling(){return this._updateControls=__bind(this._updateControls,this),this._simpleStyle=__bind(this._simpleStyle,this),this._performAction=__bind(this._performAction,this),this._justify=__bind(this._justify,this),this._changeFont=__bind(this._changeFont,this),_ref=TextStyling.__super__.constructor.apply(this,arguments)}return __extends(TextStyling,_super),TextStyling.prototype.applicableTo=function(section){return section.closest(".text-styling").exists()},TextStyling.prototype.applyTo=function(){return this._updateControls()},TextStyling.prototype.assignElements=function(){return this.container=this.elements.element.find(".text-styling"),this.styles={bold:"font-weight",italic:"font-style",underline:"text-decoration",fontFamily:"font-family",fontSize:"font-size",justify:"text-align"}},TextStyling.prototype.observeElements=function(){return this.frame.on("mouseup keyup",".page-element[data-type=text]",this._updateControls),this.container.on("click","[data-directive]:not(select)",this._simpleStyle),this.container.on("click","[data-action]",this._performAction),this.container.on("change",'select[data-directive*="font"]',this._changeFont),this.container.on("change",'select[data-directive*="justify"]',this._justify)},TextStyling.prototype._changeFont=function(event){var select;return select=$(event.target),this["_change"+select.data("directive").capitalize()](select)},TextStyling.prototype._changeFontFamily=function(select){var font;return this.current.element?(this._execCommand("fontName","z"),font=this.current.element.find("font[face=z]"),font.removeAttr("face").css("font-family",select.val())):void 0},TextStyling.prototype._changeFontSize=function(select){var font;return this.current.element?(this._execCommand("fontSize","1"),font=this.current.element.find("font[size=1]"),font.removeAttr("size").css("font-size",select.val())):void 0},TextStyling.prototype._justify=function(event){var select;return select=$(event.target),this._execCommand("justify"+select.val().capitalize())},TextStyling.prototype._performAction=function(event){var button;return event.stop(),button=$(event.currentTarget),this.current.element.trigger("style:action:"+button.data("action"))},TextStyling.prototype._simpleStyle=function(event){var button;return button=$(event.currentTarget),this._execCommand(button.data("directive")),this._updateControls()},TextStyling.prototype._updateControls=function(){var element,elements,select,selection,style,_i,_j,_k,_len,_len1,_len2,_ref1,_ref2,_ref3,_results,_results1;if(selection=this._currentSelection(),element=selection.element){for(_ref1=["fontFamily","fontSize","justify"],_i=0,_len=_ref1.length;_len>_i;_i++)style=_ref1[_i],select=this.container.find("select[data-directive='"+style+"']"),select.val(element.css(this.styles[style])).trigger("uniform");for(_ref2=["bold","italic","underline"],_results=[],_j=0,_len1=_ref2.length;_len1>_j;_j++)style=_ref2[_j],element.css(this.styles[style])===style?_results.push(this.container.find("span[data-directive="+style+"]").addClass("active")):_results.push(this.container.find("span[data-directive="+style+"]").removeClass("active"));return _results}if(elements=selection.elements){for(_ref3=["fontFamily","fontSize","justify"],_results1=[],_k=0,_len2=_ref3.length;_len2>_k;_k++)style=_ref3[_k],select=this.container.find("select[data-directive='"+style+"']"),_results1.push(select.val(this._uniqueValueForStyle(elements,this.styles[style])).trigger("uniform"));return _results1}},TextStyling.prototype._uniqueValueForStyle=function(elements,style){var e,values,_i,_len;for(values=[],_i=0,_len=elements.length;_len>_i;_i++)e=elements[_i],values.push(e.css(style));return 1===values.uniq().length?values.uniq()[0]:""},TextStyling}(Sites.Editor.Menu.Helper)}.call(this),function(){Sites.Editor.Menu.Vars={parse:function(str){var item,name,value,vars,_i,_len,_ref;if(vars={},!str)return vars;for(_ref=str.split(";"),_i=0,_len=_ref.length;_len>_i;_i++)item=_ref[_i],""!==item&&(name=item.split(":")[0],value=item.split(":")[1],vars[name]=value);return vars},stringify:function(vars){var items,name,value;items=[];for(name in vars)value=vars[name],items.push(""+name+":"+value);return items.join(";")}}}.call(this),function(){var _ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Sites.Editor.Menu.Helper.Video=function(_super){function Video(){return this._embed=__bind(this._embed,this),_ref=Video.__super__.constructor.apply(this,arguments)}return __extends(Video,_super),Video.prototype.applicableTo=function(section){return section.is('[data-matches="video"]')},Video.prototype.applyTo=function(element){var embed,iframe;return embed=element.find(".video-content"),iframe=embed.find("iframe"),iframe.exists()&&this._resizeFrame(element,iframe),this.previousContent=embed.html().strip(),this.input.val(this.previousContent)},Video.prototype.assignElements=function(){return this.input=this.elements.element.find("textarea#embed"),this.previousContent=this._content()},Video.prototype.observeElements=function(){return this.input.on("change paste keyup",this._embed)},Video.prototype._content=function(){return this.input.val().strip()},Video.prototype._embed=function(){var content,embedElement;return content=this._content(),content!==this.previousContent?(embedElement=$(content),embedElement.is("iframe")&&this._resizeFrame(this.current.element,embedElement),this.current.element.find(".video-content").html(embedElement),this.previousContent=content):void 0},Video.prototype._resizeFrame=function(element,frame){var eheight,ewidth,frameHeight,height,width;return width=parseInt(frame.attr("width")),height=parseInt(frame.attr("height")),ewidth=element.width(),eheight=element.height(),width>ewidth?(frameHeight=height/width*ewidth,frame.attr({height:parseInt(frameHeight),width:ewidth})):void 0},Video}(Sites.Editor.Menu.Helper)}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Editor.Preview=function(){function Preview(){this._adjustSize=__bind(this._adjustSize,this),this.assignElements(),this.observeElements()}return Preview.prototype.assignElements=function(){return this.previewFrame=$(".website-preview__frame")},Preview.prototype.observeElements=function(){return $(document).on("click",".website-editor__screen-options .option",this._adjustSize)},Preview.prototype._adjustSize=function(e){var $el;return $el=$(e.currentTarget),$(".website-editor__screen-options .option").removeClass("is-active"),$el.addClass("is-active"),this.previewFrame.attr("data-size",$el.data("preview-size"))},Preview}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Editor.Toolbar=function(){function Toolbar(editor){this.editor=editor,this._moveSectionUp=__bind(this._moveSectionUp,this),this._moveSectionDown=__bind(this._moveSectionDown,this),this._hideSectionButtons=__bind(this._hideSectionButtons,this),this.assignElements(),this.observeElements()}return Toolbar.prototype.addToolbars=function(){var e,element,type,_i,_len,_ref,_results;for(_ref=this.editor.types,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)type=_ref[_i],_results.push(function(){var _j,_len1,_ref1,_results1;for(_ref1=this.frame.find(".page-content .page-"+type),_results1=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)e=_ref1[_j],element=$(e),element.find(".editor-toolbar").exists()?_results1.push(void 0):_results1.push(element.prepend(this.element.clone()));return _results1}.call(this));return _results},Toolbar.prototype.assignElements=function(){return this.frame=this.editor.frame,this.current=this.editor.current,this.element=this.frame.find(".editor-wrapper .editor-toolbar").first(),this.element.remove(),this.addToolbars()},Toolbar.prototype.observeElements=function(){var type,_i,_len,_ref;for(_ref=this.editor.types,_i=0,_len=_ref.length;_len>_i;_i++)type=_ref[_i],this.editor.helper.displayToolbarFor(type)&&this.frame.on("mouseover",".page-"+type,this._showButtons(type));return this.frame.on("mouseout",".page-section",this._hideSectionButtons),this.frame.on("click",".editor-toolbar .move-up",this._moveSectionUp),this.frame.on("click",".editor-toolbar .move-down",this._moveSectionDown)},Toolbar.prototype._hideSectionButtons=function(){return this.frame.find(".page-section").removeClass("editor-hover")},Toolbar.prototype._moveSectionDown=function(event){var neighbor,section;return section=$(event.target).closest(".page-section"),neighbor=section.next(".page-section"),neighbor.exists()?neighbor.after(section):void 0},Toolbar.prototype._moveSectionUp=function(event){var neighbor,section;return section=$(event.target).closest(".page-section"),neighbor=section.prev(".page-section"),neighbor.exists()?neighbor.before(section):void 0},Toolbar.prototype._showButtons=function(type){var _this=this;return function(type){return function(event){var element;return"element"===type&&event.stop(),_this.frame.find(".editor-hover").removeClass("editor-hover"),element=$(event.currentTarget).closest(".page-"+type),element.addClass("editor-hover")}}(type)},Toolbar}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Form=function(){function Form(){this._setPreview=__bind(this._setPreview,this),this._hide=__bind(this._hide,this),this._focusInput=__bind(this._focusInput,this),this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){return this.colors=$(".color-input"),this.colorInputs=this.colors.find("input")},Form.prototype.observeElements=function(){return this.colors.on("click",this._focusInput),this.colorInputs.colorpicker({alpha:!1}),this.colorInputs.on("keydown",this._triggerChange),this.colorInputs.on("change",this._setPreview),$(document).on("scroll",this._hide),$(".modal-content").on("scroll",this._hide)},Form.prototype._focusInput=function(e){return $(e.currentTarget).find("input").focus()},Form.prototype._hide=function(e){var scroll,target;return target=$(e.currentTarget),target.is(".modal-content")?(scroll=target.scrollTop(),this._modalScroll!==scroll&&$(".cpk-colorpicker").remove(),this._modalScroll=scroll):$(".cpk-colorpicker").remove()},Form.prototype._setPreview=function(e){var input,preview;return input=$(e.target),preview=input.next(".color-preview"),preview.css("background-color",input.val())},Form.prototype._triggerChange=function(e){return 13===e.keyCode?(e.preventDefault(),$(e.target).trigger("change")):void 0},Form}()}.call(this),function(){Sites.Listings=function(){function Listings(){var _this=this;this.form=$("form.update-positions"),this.form.sortable({items:".website-object",handle:".handle",tolerance:"pointer",axis:"y",update:function(){return _this.form.submit()}})}return Listings}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Listings.Form=function(){function Form(){this._verifyInfo=__bind(this._verifyInfo,this),this._configurePhotos=__bind(this._configurePhotos,this),this._configureListing=__bind(this._configureListing,this),this._autocompleteRender=__bind(this._autocompleteRender,this),this._autocompleteOpen=__bind(this._autocompleteOpen,this),this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){return this.container=$(".new-listing"),this.forms={search:this.container.find(".listing-search"),info:this.container.find(".listing-info"),photo:this.container.find(".new-listing-photo"),listing:this.container.find(".listing-form")},this.steps={one:this.container.find(".step-1"),two:this.container.find(".step-2"),three:this.container.find(".step-3")},this.photos=new Sites.Listings.Photos},Form.prototype.observeElements=function(){var input;return input=this.forms.search.find("input"),input.autocomplete({source:this.forms.search.attr("action"),appendTo:this.container.find(".listing-form__search-results"),minLength:2,delay:500,open:this._autocompleteOpen,response:this._autocompleteRender}),this.forms.search.on("submit",function(e){return e.stop()
}),this.container.on("click",".listing-form__property",this._configureListing),this.container.on("click",".listing-form__continue-button",this._verifyInfo),this.forms.info.on("ajax:success",this._configurePhotos)},Form.prototype._autocompleteOpen=function(){return this.container.find(".listing-form__search-results ul").remove()},Form.prototype._autocompleteRender=function(event,ui){var container,item,template,_i,_len,_ref;for(this.container.find(".listing-form__start").hide(),template=this.forms.search.find(".template").html(),container=this.container.find(".listing-form__search-results"),container.show(),container.find(".listing-form__property, ul").remove(),_ref=ui.content,_i=0,_len=_ref.length;_len>_i;_i++)item=_ref[_i],container.append(template.evaluate(item));return this._resize()},Form.prototype._configureListing=function(event){var anchor,type,_i,_len,_ref;for(event.stop(),anchor=$(event.target),_ref=["info","photo","listing"],_i=0,_len=_ref.length;_len>_i;_i++)type=_ref[_i],this.forms[type].find('input:hidden[name*="[property_id]"]').val(anchor.data("id"));return this.steps.one.hide(),this.steps.two.show(),this._resize()},Form.prototype._configurePhotos=function(event,html){return this.forms.listing.find('input:hidden[name*="[title]"]').val(this.forms.info.find('input[name*="[title]"]').val()),this.forms.listing.find('input:hidden[name*="[status]"]').val(this.forms.info.find('select[name*="[status]"]').val()),this.forms.listing.find('input:hidden[name*="[description]"]').val(this.forms.info.find('textarea[name*="[description]"]').val()),this.photos.container.find(".photos-container").html(html),this.steps.two.hide(),this.steps.three.show(),this._resize()},Form.prototype._resize=function(){return"undefined"!=typeof modal&&null!==modal?modal.resize():void 0},Form.prototype._verifyInfo=function(event){return event.stop(),this.forms.info.submit()},Form}(),Sites.Listings.Photos=function(){function Photos(){this._uploadPhoto=__bind(this._uploadPhoto,this),this._updatePhotos=__bind(this._updatePhotos,this),this._selectPhoto=__bind(this._selectPhoto,this),this._selectNewPhoto=__bind(this._selectNewPhoto,this),this.assignElements(),this.observeElements(),this._updatePhotos()}return Photos.prototype.assignElements=function(){return this.container=$(".listing-form__photos-wrapper"),this.forms={listing:$("form.listing-form")},this.photos={container:this.container.find(".listing-form__photos"),form:$("form.new-listing-photo")}},Photos.prototype.observeElements=function(){return this.photos.container.on("click",".listing-form__photo",this._selectPhoto),this.photos.container.sortable({items:".listing-form__photo",update:this._updatePhotos}),this.photos.container.on("click",".listing-form__photo-upload",this._selectNewPhoto),this.photos.form.find("input:file").on("change",this._uploadPhoto)},Photos.prototype._selectNewPhoto=function(){return this.photos.form.find("input:file").click()},Photos.prototype._selectPhoto=function(event){return $(event.currentTarget).toggleClass("is-selected"),this._updatePhotos()},Photos.prototype._updatePhotos=function(){var container,e,input,_i,_len,_ref,_results;for(container=this.forms.listing.find(".photo-fields"),container.html(""),_ref=this.photos.container.find(".is-selected"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)e=_ref[_i],input=$("<input>"),input.attr({type:"hidden",name:"listing[image_ids][]",value:$(e).data("id")}),_results.push(container.append(input));return _results},Photos.prototype._uploadPhoto=function(event){var _this=this;return event.target.files[0].size>5242880?(Message.create().flash("Please select an image under 5MB in size.","error"),void 0):$.ajax({url:this.photos.form.attr("action"),type:"post",data:new FormData(this.photos.form[0]),cache:!1,contentType:!1,processData:!1}).done(function(html){var photo;return photo=$(html),photo.addClass("is-selected"),_this.photos.container.find(".photos-container").append(photo),_this._updatePhotos()})},Photos}()}.call(this),function(){Sites.Listings.Group={}}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Listings.Group.Form=function(){function Form(){this._listingTypeChanged=__bind(this._listingTypeChanged,this),this.assignElements(),this.observeElements(),this._listingTypeChanged()}return Form.prototype.assignElements=function(){return this.element=$(".listing-type__form"),this.listingType=this.element.find("#group_listing_type"),this.matchingUnselected=this.element.find(".listing-type__matching-unselected"),this.matchingContainer=this.element.find(".listing-type__matching")},Form.prototype.observeElements=function(){return this.listingType.on("change",this._listingTypeChanged)},Form.prototype._listingTypeChanged=function(){var container;return this.matchingContainer.hide(),this.matchingContainer.find("select").disable(),""===this.listingType.val()?this.matchingUnselected.show():(this.matchingUnselected.hide(),container=this.matchingContainer.filter("[data-type='"+this.listingType.val()+"']"),container.find("select").enable(),container.show())},Form}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Menu={},Sites.Menu.Form=function(){function Form(){this._updateInputState=__bind(this._updateInputState,this),this._removeItem=__bind(this._removeItem,this),this._correctPositions=__bind(this._correctPositions,this),this._addSubmenuItem=__bind(this._addSubmenuItem,this),this._addSpecialOption=__bind(this._addSpecialOption,this),this._addMenuItem=__bind(this._addMenuItem,this),this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){return this.element=$("form.grid-container"),this.items=this.element.find(".menu-items"),this.templates={menuItem:this.element.find('.templates [data-type="menu-item"]').remove().html(),submenuItem:this.element.find('.templates [data-type="submenu-item"]').remove().html(),submenu:this.element.find('.templates [data-type="submenu"]').remove().html()}},Form.prototype.observeElements=function(){return this.element.on("change","select",this._addSpecialOption),this.element.on("input",".menu-item__input input:text",this._updateInputState),this.element.on("click",".menu-items__add",this._addMenuItem),this.element.on("click",".submenu-items__add",this._addSubmenuItem),this.element.on("click",".menu-item__button.remove",this._removeItem),this.element.find(".menu-items").sortable({items:".menu-item",handle:".move",tolerance:"pointer",axis:"y",update:this._correctPositions})},Form.prototype._addCustomUrl=function(select){var currentItem,urlInput;return currentItem=select.closest(".submenu-item"),currentItem.exists()||(currentItem=select.closest(".menu-item")),currentItem.find(".all-options").hide(),currentItem.find(".custom-url").show().find("input").enable(),urlInput=currentItem.find(".custom-url input"),urlInput.focus(),urlInput.val(urlInput.val())},Form.prototype._addMenuItem=function(event){var newItem;return event.stop(),newItem=$(this.templates.menuItem),this.items.append(newItem),newItem.find("select").trigger("change"),this._correctPositions()},Form.prototype._addSpecialOption=function(event){var select;return select=$(event.target).closest("select"),"submenu"===select.val()&&this._addSubmenu(select),"url"===select.val()&&this._addCustomUrl(select),this._correctPositions()},Form.prototype._addSubmenu=function(select){var currentItem,customTitle,submenu;return currentItem=select.closest(".menu-item"),customTitle=currentItem.find('input[name*="[custom_title]"]').val(),submenu=$(this.templates.submenu),currentItem.replaceWith(submenu),submenu.find(".submenu-items").sortable({items:".submenu-item",handle:".move",tolerance:"pointer",axis:"y",update:this._correctPositions}),submenu.find('input[name*="[custom_title]"]').first().val(customTitle).trigger("input").focus()},Form.prototype._addSubmenuItem=function(event){var newItem,submenu,target;return event.stop(),target=$(event.target),newItem=$(this.templates.submenuItem),target.before(newItem),submenu=target.closest(".menu-item"),submenu.find(".menu-item__input input:text").trigger("input"),newItem.find("select").trigger("change"),this._correctPositions()},Form.prototype._correctPositions=function(){var e,ee,f,i,ii,item,subitem,_correctField,_i,_j,_len,_len1,_ref,_ref1,_results;for(_correctField=function(field,nameRegex,replacement,index){var id,label;return field.attr("name",field.attr("name").replace(nameRegex,replacement.evaluate({index:index}))),id=field.attr("name").replace(/\]\[/g,"_").replace(/[\[\]]/g,"_"),field.attr("id",id),label=field.next("label"),label.exists()?label.attr("for",id):void 0},_ref=this.items.find(".menu-item"),_results=[],i=_i=0,_len=_ref.length;_len>_i;i=++_i){for(e=_ref[i],item=$(e),_ref1=item.find("input,select"),_j=0,_len1=_ref1.length;_len1>_j;_j++)f=_ref1[_j],_correctField($(f),/menu\[items\]\[.*?\]/,"menu[items][#{index}]",i);_results.push(function(){var _k,_len2,_ref2,_results1;for(_ref2=item.find(".submenu-item"),_results1=[],ii=_k=0,_len2=_ref2.length;_len2>_k;ii=++_k)ee=_ref2[ii],subitem=$(ee),_results1.push(function(){var _l,_len3,_ref3,_results2;for(_ref3=subitem.find("input,select"),_results2=[],_l=0,_len3=_ref3.length;_len3>_l;_l++)f=_ref3[_l],_results2.push(_correctField($(f),/\]\[items\]\[.*?\]/,"][items][#{index}]",ii));return _results2}());return _results1}())}return _results},Form.prototype._removeItem=function(event){return event.stop(),$(event.target).closest("[data-remove-target]").remove(),this._correctPositions()},Form.prototype._updateInputState=function(event){var input;return input=$(event.target),""===input.val()?input.removeClass("has-value"):input.addClass("has-value")},Form}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Objects=function(){function Objects(){this._submit=__bind(this._submit,this),this._sort=__bind(this._sort,this),this._replaceObjects=__bind(this._replaceObjects,this),this.assignElements(),this.observeElements()}return Objects.prototype.assignElements=function(){return this.element=$(".grid-container"),this.form=this.element.find(".search-column form"),this.objects=this.element.find(".objects"),this.headers=this.element.find(".sortable")},Objects.prototype.observeElements=function(){return this.form.on("submit",this._submit),this.headers.on("click",this._sort),$(document).on("click",".website-object",this._clickRow)},Objects.prototype._clickRow=function(event){var anchor,row,target;return target=$(event.target),target.closest("a").exists()?void 0:(row=target.closest(".website-object"),anchor=row.find("a.edit"),anchor.click())},Objects.prototype._replaceObjects=function(data){return this.objects.html(data.content)},Objects.prototype._sort=function(event){var direction,header;return header=$(event.target).closest(".sortable"),direction="ascending",header.hasClass("ascending")&&(direction="descending"),this.headers.removeClass("ascending descending"),header.addClass(direction),this.form.find("input:hidden[name=sort]").val(""+header.data("column")+" "+direction),this._submit(event)},Objects.prototype._submit=function(event){return event.stop(),$.ajax({url:this.form.attr("action"),type:"get",data:this.form.serialize(),contentType:"text/javascript",dataType:"json"}).done(this._replaceObjects)},Objects}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.PageForm=function(){function PageForm(){this._updateSlug=__bind(this._updateSlug,this),this._updatePreviousSlug=__bind(this._updatePreviousSlug,this),this._updateCounter=__bind(this._updateCounter,this),this._focusPlaceholderInput=__bind(this._focusPlaceholderInput,this),this._convertPastedContent=__bind(this._convertPastedContent,this),this._convertInvalidCharacters=__bind(this._convertInvalidCharacters,this),this._blurPlaceholderInput=__bind(this._blurPlaceholderInput,this),this.assignElements(),this.observeElements()}return PageForm.prototype.assignElements=function(){return this.form=$("form.grid-container"),this.inputs={title:this.form.find(".input.for-title input"),slug:this.form.find(".input.for-url input")},this.placeholderInput=this.form.find(".input.for-url .placeholder-input"),this.counters=this.form.find(".input.counter"),this.previous={title:this.inputs.title.val(),slug:this.inputs.slug.val()}},PageForm.prototype.observeElements=function(){return this.inputs.slug.on("blur",this._blurPlaceholderInput),this.inputs.slug.on("focus",this._focusPlaceholderInput),this.inputs.slug.on("keydown",this._convertInvalidCharacters),this.inputs.slug.on("paste",this._convertPastedContent),this.inputs.slug.on("change keyup",this._updatePreviousSlug),this.inputs.title.on("change keyup",this._updateSlug),this.counters.on("change keyup paste","input,textarea",this._updateCounter)},PageForm.prototype._blurPlaceholderInput=function(){return this.placeholderInput.removeClass("is-focused")},PageForm.prototype._convertInvalidCharacters=function(event){var character;if(!event.metaKey&&!event.ctrlKey){if(character=String.fromCharCode(event.keyCode)," "===character)return event.stop(),this.inputs.slug.insertAtCaret("-");if(character.match(/[A-Z]/))return event.stop(),this.inputs.slug.insertAtCaret(character.toLowerCase());if(!(event.keyCode<46))return character.match(/[^a-z0-9\-]/)?event.stop():void 0}},PageForm.prototype._convertPastedContent=function(event){var content;return event.stop(),content=event.originalEvent.clipboardData.getData("text/plain"),this.inputs.slug.insertAtCaret(this._formatSlug(content))},PageForm.prototype._focusPlaceholderInput=function(){return this.placeholderInput.addClass("is-focused")},PageForm.prototype._formatSlug=function(value){return value=value.toLowerCase(),value=value.replace("'",""),value=value.replace(/[^a-z0-9]+/gi,"-"),value=value.replace(/^-|-$/g,"")},PageForm.prototype._updateCounter=function(event){var count,counter,field,maxCount,target;return target=$(event.target).closest(".input"),field=target.find("input,textarea"),counter=target.find(".character-counter"),count=field.val().length,maxCount=counter.data("limit"),counter.text(""+count+" / "+maxCount+" characters used")},PageForm.prototype._updatePreviousSlug=function(){return this.previous.slug=this.inputs.slug.val()},PageForm.prototype._updateSlug=function(){var slug,title;return title=this.inputs.title.val(),this._formatSlug(this.previous.title)===this.previous.slug&&(slug=this._formatSlug(title),this.inputs.slug.val(slug),this.previous.slug=slug),this.previous.title=title},PageForm}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sites.Templates=function(){function Templates(){this._select_option=__bind(this._select_option,this),this._select_category=__bind(this._select_category,this),this.assignElements(),this.observeElements()}return Templates.prototype.assignElements=function(){return this.categories=$(".template__category"),this.options=$(".template__option")},Templates.prototype.observeElements=function(){return this.categories.on("click",this._select_category),this.options.on("click",this._select_option)},Templates.prototype._select_category=function(e){var category;return category=$(e.currentTarget).data("category"),this.categories.removeClass("is-selected"),$(e.currentTarget).addClass("is-selected"),"*"===category?this.options.show():(this.options.hide(),this.options.filter("[data-categories*="+category+"]").show())},Templates.prototype._select_option=function(e){return this.options.removeClass("is-selected"),$(e.currentTarget).addClass("is-selected")},Templates}()}.call(this),function(){null==this.SMS&&(this.SMS={})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};SMS.Broadcast=function(){function Broadcast(){this._showTab=__bind(this._showTab,this),this._moveToSent=__bind(this._moveToSent,this),this._disableSendButton=__bind(this._disableSendButton,this),this.assignElements(),this.observeElements()}return Broadcast.prototype.assignElements=function(){return this.element=$(".sms-broadcast"),this.tabs=this.element.find(".tabs a.tab"),this.tabContainers=this.element.find(".tab-container")},Broadcast.prototype.observeElements=function(){return this.tabs.on("click",this._showTab),this.element.on("ajax:success","a.action-button",this._moveToSent),this.element.on("click","a.action-button",this._disableSendButton)},Broadcast.prototype._disableSendButton=function(event){var trigger;return trigger=$(event.target),trigger.is("[disabled]")&&event.stop(),trigger.disable()},Broadcast.prototype._moveToSent=function(event,data){var container,existingRecipient,tab,text,trigger,type,_i,_len,_ref,_results;for(trigger=$(event.target),existingRecipient=trigger.closest(".recipient"),existingRecipient.remove(),container=this.tabContainers.filter(".for-sent"),container.prepend(data.recipient),_ref=["sent","pending"],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)type=_ref[_i],tab=this.tabs.filter("[data-tab="+type+"]"),text={sent:"Sent",pending:"Pending Recipients"}[type],_results.push(tab.text(""+text+" ("+data[type]+")"));return _results},Broadcast.prototype._showTab=function(event){var target,targetSelector;return event.preventDefault(),target=$(event.target),this.tabs.removeClass("is-active"),this.tabContainers.hide(),target.addClass("is-active"),targetSelector=".for-"+target.data("tab"),this.tabContainers.filter(targetSelector).show()},Broadcast}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};SMS.Broadcast.Form=function(){function Form(){this._updateCount=__bind(this._updateCount,this),this._delayedUpdateCount=__bind(this._delayedUpdateCount,this),this.assignElements(),this.observeElements()}return Form.prototype.assignElements=function(){return this.field=$("#broadcast_message"),this.message=$("span.count")},Form.prototype.observeElements=function(){return this.field.on("keyup",this._updateCount),this.field.on("cut paste",this._delayedUpdateCount)},Form.prototype._delayedUpdateCount=function(){return setTimeout(this._updateCount,100)},Form.prototype._updateCount=function(){var count,noun;return count=this.field.val().length,noun="character",1!==count&&(noun+="s"),this.message.text(""+count+" "+noun)},Form}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};SMS.Notifications=function(){function Notifications(readUrl){this.readUrl=readUrl,this._refresh=__bind(this._refresh,this),this._readMessage=__bind(this._readMessage,this),this.container=$(".sms-notifications"),this.container.on("click",'.is-unread a[href="#"]',this._readMessage),this.container.on("click",'a[href="#"]',this._flashMessage),this.interval=setInterval(this._refresh,29e3)}return Notifications.prototype._flashMessage=function(event){return event.stop(),$(event.currentTarget).is(".unpermitted-campaign")?Message.create().flash("You don't have permission to view this campaign.","error"):Message.create().flash("The record associated with this message no longer exists.")},Notifications.prototype._readMessage=function(event){var anchor,container;return event.stop(),anchor=$(event.target).closest("a"),container=anchor.closest(".notification"),container.removeClass("is-unread"),$.ajax({url:this.readUrl,type:"post",data:defaultParams({id:anchor.data("message-id")}),message:"no-message"}).done(function(){return container.addClass("is-read"),$(document).trigger("counters:refresh")})},Notifications.prototype._refresh=function(){var currentContainer;return currentContainer=$(".sms-notifications"),this.container.attr("id")===currentContainer.attr("id")?(pjax.reload({message:"no-message"}),$(document).trigger("counters:refresh")):clearInterval(this.interval)},Notifications}()}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};null==this.Syndication&&(this.Syndication={}),Syndication.SocialMedia=function(){function SocialMedia(element,data){this.element=element,this.data=data,this._shareViaFacebook=__bind(this._shareViaFacebook,this),this.assignElements(),this.observeElements(),this._loadFacebook(),this._loadTwitter(),this._loadLinkedIn(),this._loadGooglePlus()}return SocialMedia.prototype.assignElements=function(){return this.url=this.data.url,this.containers=this.element.find(".social-media-container")},SocialMedia.prototype.observeElements=function(){return this.containers.filter(".facebook").on("click",this._shareViaFacebook)},SocialMedia.prototype._loadFacebook=function(){var script,_this=this;return"undefined"!=typeof FB&&null!==FB?this.containers.filter(".facebook").show():(script=$("<script>"),window.fbAsyncInit=function(){return FB.init({appId:_this.data.facebook.app_id,autoLogAppEvents:!0,xfbml:!0,version:"v3.0"}),_this.containers.filter(".facebook").show()},script.attr("src","https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0"),this.element.after(script))},SocialMedia.prototype._loadGooglePlus=function(){var interval,script,_this=this;return null!=window.gapi?(this.containers.filter(".googleplus").show(),gapi.plus.go()):(window.___gcfg={lang:"en-US",parsetags:"explicit"},script=$("<script>"),script.attr("src","https://apis.google.com/js/platform.js"),script.prop("async",!0),script.prop("defer",!0),this.element.after(script),interval=setInterval(function(){return null!=window.gapi?(_this.containers.filter(".googleplus").show(),gapi.plus.go(),clearInterval(interval)):void 0},10))},SocialMedia.prototype._loadLinkedIn=function(){var script;return null!=window.IN&&delete window.IN,script=$("<script>"),script.attr("src","//platform.linkedin.com/in.js"),script.text(" lang: en_US"),this.element.after(script),this.containers.filter(".linkedin").show()},SocialMedia.prototype._loadTwitter=function(){var script,_this=this;return null==window.twttr&&(window.twttr={_e:[],ready:function(f){return window.twttr._e.push(f)}}),window.twttr.ready(function(){return _this.containers.filter(".twitter").show()}),script=$("<script>"),script.attr("src","https://platform.twitter.com/widgets.js"),this.element.after(script)},SocialMedia.prototype._shareViaFacebook=function(){return FB.ui({method:"share",href:this.data.url})},SocialMedia}()}.call(this),function(){null==this.Websites&&(this.Websites={})}.call(this);